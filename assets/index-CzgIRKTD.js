function nD(n,t){for(var e=0;e<t.length;e++){const s=t[e];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in n)){const r=Object.getOwnPropertyDescriptor(s,i);r&&Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();const xr=2,$m=4,Fp=8,Dv=1<<24,cc=16,El=32,Mh=64,Rv=128,ca=512,gr=1024,io=2048,_l=4096,Ho=8192,tc=16384,p1=32768,xh=65536,jk=1<<17,CS=1<<18,Zd=1<<19,SS=1<<20,Jl=1<<25,bh=32768,Mb=1<<21,Mv=1<<22,Hc=1<<23,ec=Symbol("$state"),TS=Symbol("legacy props"),sD=Symbol(""),Ad=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"},g1=3,Oh=8,Ob=!1;var m1=Array.isArray,iD=Array.prototype.indexOf,Od=Array.prototype.includes,x1=Array.from,IS=Object.defineProperty,$d=Object.getOwnPropertyDescriptor,ES=Object.getOwnPropertyDescriptors,rD=Object.prototype,oD=Array.prototype,Ov=Object.getPrototypeOf,Xk=Object.isExtensible;const aD=()=>{};function lD(n){return n()}function Fb(n){for(var t=0;t<n.length;t++)n[t]()}function _S(){var n,t,e=new Promise((s,i)=>{n=s,t=i});return{promise:e,resolve:n,reject:t}}function cD(n,t,e=!1){return n===void 0?e?t():t:n}function qk(n,t){if(Array.isArray(n))return n;if(!(Symbol.iterator in n))return Array.from(n);const e=[];for(const s of n)if(e.push(s),e.length===t)break;return e}function AS(n){return n===this.v}function uD(n,t){return n!=n?t==t:n!==t||n!==null&&typeof n=="object"||typeof n=="function"}function $S(n){return!uD(n,this.v)}function Fv(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function hD(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function dD(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function fD(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function pD(n){throw new Error("https://svelte.dev/e/effect_orphan")}function gD(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function mD(){throw new Error("https://svelte.dev/e/hydration_failed")}function xD(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function bD(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function vD(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function yD(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function wD(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}let Jd=!1,kD=!1;function CD(){Jd=!0}const SD=1,TD=2,NS=4,ID=8,ED=16,_D=1,AD=2,DS=4,$D=8,ND=16,DD=1,RD=2,RS="[",b1="[!",Pv="]",vh={},sr=Symbol(),MD="http://www.w3.org/1999/xhtml",OD="@attach";let di=null;function Fd(n){di=n}function ar(n,t=!1,e){di={p:di,i:!1,c:null,e:null,s:n,x:null,l:Jd&&!t?{s:null,u:null,$:[]}:null}}function lr(n){var t=di,e=t.e;if(e!==null){t.e=null;for(var s of e)oT(s)}return n!==void 0&&(t.x=n),t.i=!0,di=t.p,n??{}}function Pp(){return!Jd||di!==null&&di.l===null}let ah=[];function MS(){var n=ah;ah=[],Fb(n)}function Ua(n){if(ah.length===0&&!xp){var t=ah;queueMicrotask(()=>{t===ah&&MS()})}ah.push(n)}function FD(){for(;ah.length>0;)MS()}function Lp(n){console.warn("https://svelte.dev/e/hydration_mismatch")}function PD(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function LD(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let xs=!1;function Ba(n){xs=n}let Rs;function Br(n){if(n===null)throw Lp(),vh;return Rs=n}function yh(){return Br(Ya(Rs))}function Lt(n){if(xs){if(Ya(Rs)!==null)throw Lp(),vh;Rs=n}}function Ys(n=1){if(xs){for(var t=n,e=Rs;t--;)e=Ya(e);Rs=e}}function Nm(n=!0){for(var t=0,e=Rs;;){if(e.nodeType===Oh){var s=e.data;if(s===Pv){if(t===0)return e;t-=1}else(s===RS||s===b1)&&(t+=1)}var i=Ya(e);n&&e.remove(),e=i}}function OS(n){if(!n||n.nodeType!==Oh)throw Lp(),vh;return n.data}function no(n){if(typeof n!="object"||n===null||ec in n)return n;const t=Ov(n);if(t!==rD&&t!==oD)return n;var e=new Map,s=m1(n),i=qn(0),r=hh,o=a=>{if(hh===r)return a();var l=Ns,u=hh;ha(null),t4(r);var h=a();return ha(l),t4(u),h};return s&&e.set("length",qn(n.length)),new Proxy(n,{defineProperty(a,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&bD();var h=e.get(l);return h===void 0?h=o(()=>{var f=qn(u.value);return e.set(l,f),f}):Ve(h,u.value,!0),!0},deleteProperty(a,l){var u=e.get(l);if(u===void 0){if(l in a){const h=o(()=>qn(sr));e.set(l,h),bp(i)}}else Ve(u,sr),bp(i);return!0},get(a,l,u){if(l===ec)return n;var h=e.get(l),f=l in a;if(h===void 0&&(!f||$d(a,l)?.writable)&&(h=o(()=>{var m=no(f?a[l]:sr),y=qn(m);return y}),e.set(l,h)),h!==void 0){var g=Tt(h);return g===sr?void 0:g}return Reflect.get(a,l,u)},getOwnPropertyDescriptor(a,l){var u=Reflect.getOwnPropertyDescriptor(a,l);if(u&&"value"in u){var h=e.get(l);h&&(u.value=Tt(h))}else if(u===void 0){var f=e.get(l),g=f?.v;if(f!==void 0&&g!==sr)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return u},has(a,l){if(l===ec)return!0;var u=e.get(l),h=u!==void 0&&u.v!==sr||Reflect.has(a,l);if(u!==void 0||_s!==null&&(!h||$d(a,l)?.writable)){u===void 0&&(u=o(()=>{var g=h?no(a[l]):sr,m=qn(g);return m}),e.set(l,u));var f=Tt(u);if(f===sr)return!1}return h},set(a,l,u,h){var f=e.get(l),g=l in a;if(s&&l==="length")for(var m=u;m<f.v;m+=1){var y=e.get(m+"");y!==void 0?Ve(y,sr):m in a&&(y=o(()=>qn(sr)),e.set(m+"",y))}if(f===void 0)(!g||$d(a,l)?.writable)&&(f=o(()=>qn(void 0)),Ve(f,no(u)),e.set(l,f));else{g=f.v!==sr;var k=o(()=>no(u));Ve(f,k)}var C=Reflect.getOwnPropertyDescriptor(a,l);if(C?.set&&C.set.call(h,u),!g){if(s&&typeof l=="string"){var S=e.get("length"),$=Number(l);Number.isInteger($)&&$>=S.v&&Ve(S,$+1)}bp(i)}return!0},ownKeys(a){Tt(i);var l=Reflect.ownKeys(a).filter(f=>{var g=e.get(f);return g===void 0||g.v!==sr});for(var[u,h]of e)h.v!==sr&&!(u in a)&&l.push(u);return l},setPrototypeOf(){vD()}})}function Kk(n){try{if(n!==null&&typeof n=="object"&&ec in n)return n[ec]}catch{}return n}function BD(n,t){return Object.is(Kk(n),Kk(t))}var mp,FS,PS,LS;function Pb(){if(mp===void 0){mp=window,FS=/Firefox/.test(navigator.userAgent);var n=Element.prototype,t=Node.prototype,e=Text.prototype;PS=$d(t,"firstChild").get,LS=$d(t,"nextSibling").get,Xk(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),Xk(e)&&(e.__t=void 0)}}function Co(n=""){return document.createTextNode(n)}function za(n){return PS.call(n)}function Ya(n){return LS.call(n)}function Ht(n,t){if(!xs)return za(n);var e=za(Rs);if(e===null)e=Rs.appendChild(Co());else if(t&&e.nodeType!==g1){var s=Co();return e?.before(s),Br(s),s}return Br(e),e}function Ss(n,t=!1){if(!xs){var e=za(n);return e instanceof Comment&&e.data===""?Ya(e):e}if(t&&Rs?.nodeType!==g1){var s=Co();return Rs?.before(s),Br(s),s}return Rs}function pe(n,t=1,e=!1){let s=xs?Rs:n;for(var i;t--;)i=s,s=Ya(s);if(!xs)return s;if(e&&s?.nodeType!==g1){var r=Co();return s===null?i?.after(r):s.before(r),Br(r),r}return Br(s),s}function BS(n){n.textContent=""}function zS(){return!1}function WS(n){var t=_s;if(t===null)return Ns.f|=Hc,n;if((t.f&p1)===0){if((t.f&Rv)===0)throw n;t.b.error(n)}else Pd(n,t)}function Pd(n,t){for(;t!==null;){if((t.f&Rv)!==0)try{t.b.error(n);return}catch(e){n=e}t=t.parent}throw n}const zD=-7169;function Qi(n,t){n.f=n.f&zD|t}function Lv(n){(n.f&ca)!==0||n.deps===null?Qi(n,gr):Qi(n,_l)}function VS(n){if(n!==null)for(const t of n)(t.f&xr)===0||(t.f&bh)===0||(t.f^=bh,VS(t.deps))}function US(n,t,e){(n.f&io)!==0?t.add(n):(n.f&_l)!==0&&e.add(n),VS(n.deps),Qi(n,gr)}const Kg=new Set;let Ci=null,La=null,Vo=[],v1=null,Lb=!1,xp=!1;class jc{committed=!1;current=new Map;previous=new Map;#t=new Set;#e=new Set;#n=0;#i=0;#o=null;#r=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;#a=!1;is_deferred(){return this.is_fork||this.#i>0}process(t){Vo=[],this.apply();var e=[],s=[];for(const i of t)this.#l(i,e,s);if(this.is_deferred())this.#c(s),this.#c(e);else{for(const i of this.#t)i();this.#t.clear(),this.#n===0&&this.#u(),Ci=null,Yk(s),Yk(e),this.#o?.resolve()}La=null}#l(t,e,s){t.f^=gr;for(var i=t.first,r=null;i!==null;){var o=i.f,a=(o&(El|Mh))!==0,l=a&&(o&gr)!==0,u=l||(o&Ho)!==0||this.skipped_effects.has(i);if(!u&&i.fn!==null){a?i.f^=gr:r!==null&&(o&($m|Fp|Dv))!==0?r.b.defer_effect(i):(o&$m)!==0?e.push(i):Qd(i)&&((o&cc)!==0&&this.#s.add(i),Bd(i));var h=i.first;if(h!==null){i=h;continue}}var f=i.parent;for(i=i.next;i===null&&f!==null;)f===r&&(r=null),i=f.next,f=f.parent}}#c(t){for(var e=0;e<t.length;e+=1)US(t[e],this.#r,this.#s)}capture(t,e){e!==sr&&!this.previous.has(t)&&this.previous.set(t,e),(t.f&Hc)===0&&(this.current.set(t,t.v),La?.set(t,t.v))}activate(){Ci=this,this.apply()}deactivate(){Ci===this&&(Ci=null,La=null)}flush(){if(this.activate(),Vo.length>0){if(GS(),Ci!==null&&Ci!==this)return}else this.#n===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#e)t(this);this.#e.clear()}#u(){if(Kg.size>1){this.previous.clear();var t=La,e=!0;for(const i of Kg){if(i===this){e=!1;continue}const r=[];for(const[a,l]of this.current){if(i.current.has(a))if(e&&l!==i.current.get(a))i.current.set(a,l);else continue;r.push(a)}if(r.length===0)continue;const o=[...i.current.keys()].filter(a=>!this.current.has(a));if(o.length>0){var s=Vo;Vo=[];const a=new Set,l=new Map;for(const u of r)HS(u,o,a,l);if(Vo.length>0){Ci=i,i.apply();for(const u of Vo)i.#l(u,[],[]);i.deactivate()}Vo=s}}Ci=null,La=t}this.committed=!0,Kg.delete(this)}increment(t){this.#n+=1,t&&(this.#i+=1)}decrement(t){this.#n-=1,t&&(this.#i-=1),!this.#a&&(this.#a=!0,Ua(()=>{this.#a=!1,this.is_deferred()?Vo.length>0&&this.flush():this.revive()}))}revive(){for(const t of this.#r)this.#s.delete(t),Qi(t,io),ic(t);for(const t of this.#s)Qi(t,_l),ic(t);this.flush()}oncommit(t){this.#t.add(t)}ondiscard(t){this.#e.add(t)}settled(){return(this.#o??=_S()).promise}static ensure(){if(Ci===null){const t=Ci=new jc;Kg.add(Ci),xp||Ua(()=>{Ci===t&&t.flush()})}return Ci}apply(){}}function _n(n){var t=xp;xp=!0;try{for(var e;;){if(FD(),Vo.length===0&&(Ci?.flush(),Vo.length===0))return v1=null,e;GS()}}finally{xp=t}}function GS(){Lb=!0;var n=null;try{for(var t=0;Vo.length>0;){var e=jc.ensure();if(t++>1e3){var s,i;WD()}e.process(Vo),Xc.clear()}}finally{Lb=!1,v1=null}}function WD(){try{gD()}catch(n){Pd(n,v1)}}let ql=null;function Yk(n){var t=n.length;if(t!==0){for(var e=0;e<t;){var s=n[e++];if((s.f&(tc|Ho))===0&&Qd(s)&&(ql=new Set,Bd(s),s.deps===null&&s.first===null&&s.nodes===null&&(s.teardown===null&&s.ac===null?hT(s):s.fn=null),ql?.size>0)){Xc.clear();for(const i of ql){if((i.f&(tc|Ho))!==0)continue;const r=[i];let o=i.parent;for(;o!==null;)ql.has(o)&&(ql.delete(o),r.push(o)),o=o.parent;for(let a=r.length-1;a>=0;a--){const l=r[a];(l.f&(tc|Ho))===0&&Bd(l)}}ql.clear()}}ql=null}}function HS(n,t,e,s){if(!e.has(n)&&(e.add(n),n.reactions!==null))for(const i of n.reactions){const r=i.f;(r&xr)!==0?HS(i,t,e,s):(r&(Mv|cc))!==0&&(r&io)===0&&jS(i,t,s)&&(Qi(i,io),ic(i))}}function jS(n,t,e){const s=e.get(n);if(s!==void 0)return s;if(n.deps!==null)for(const i of n.deps){if(Od.call(t,i))return!0;if((i.f&xr)!==0&&jS(i,t,e))return e.set(i,!0),!0}return e.set(n,!1),!1}function ic(n){for(var t=v1=n;t.parent!==null;){t=t.parent;var e=t.f;if(Lb&&t===_s&&(e&cc)!==0&&(e&CS)===0)return;if((e&(Mh|El))!==0){if((e&gr)===0)return;t.f^=gr}}Vo.push(t)}function VD(n){let t=0,e=Qc(0),s;return()=>{Wv()&&(Tt(e),w1(()=>(t===0&&(s=Al(()=>n(()=>bp(e)))),t+=1,()=>{Ua(()=>{t-=1,t===0&&(s?.(),s=void 0,bp(e))})})))}}var UD=xh|Zd|Rv;function GD(n,t,e){new HD(n,t,e)}class HD{parent;is_pending=!1;#t;#e=xs?Rs:null;#n;#i;#o;#r=null;#s=null;#a=null;#l=null;#c=null;#u=0;#h=0;#p=!1;#f=!1;#g=new Set;#m=new Set;#d=null;#w=VD(()=>(this.#d=Qc(this.#u),()=>{this.#d=null}));constructor(t,e,s){this.#t=t,this.#n=e,this.#i=s,this.parent=_s.b,this.is_pending=!!this.#n.pending,this.#o=k1(()=>{if(_s.b=this,xs){const r=this.#e;yh(),r.nodeType===Oh&&r.data===b1?this.#C():(this.#k(),this.#h===0&&(this.is_pending=!1))}else{var i=this.#v();try{this.#r=yo(()=>s(i))}catch(r){this.error(r)}this.#h>0?this.#b():this.is_pending=!1}return()=>{this.#c?.remove()}},UD),xs&&(this.#t=Rs)}#k(){try{this.#r=yo(()=>this.#i(this.#t))}catch(t){this.error(t)}}#C(){const t=this.#n.pending;t&&(this.#s=yo(()=>t(this.#t)),Ua(()=>{var e=this.#v();this.#r=this.#x(()=>(jc.ensure(),yo(()=>this.#i(e)))),this.#h>0?this.#b():(dh(this.#s,()=>{this.#s=null}),this.is_pending=!1)}))}#v(){var t=this.#t;return this.is_pending&&(this.#c=Co(),this.#t.before(this.#c),t=this.#c),t}defer_effect(t){US(t,this.#g,this.#m)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#n.pending}#x(t){var e=_s,s=Ns,i=di;da(this.#o),ha(this.#o),Fd(this.#o.ctx);try{return t()}catch(r){return WS(r),null}finally{da(e),ha(s),Fd(i)}}#b(){const t=this.#n.pending;this.#r!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),pT(this.#r,this.#l)),this.#s===null&&(this.#s=yo(()=>t(this.#t)))}#y(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#y(t);return}if(this.#h+=t,this.#h===0){this.is_pending=!1;for(const e of this.#g)Qi(e,io),ic(e);for(const e of this.#m)Qi(e,_l),ic(e);this.#g.clear(),this.#m.clear(),this.#s&&dh(this.#s,()=>{this.#s=null}),this.#l&&(this.#t.before(this.#l),this.#l=null)}}update_pending_count(t){this.#y(t),this.#u+=t,!(!this.#d||this.#p)&&(this.#p=!0,Ua(()=>{this.#p=!1,this.#d&&Ld(this.#d,this.#u)}))}get_effect_pending(){return this.#w(),Tt(this.#d)}error(t){var e=this.#n.onerror;let s=this.#n.failed;if(this.#f||!e&&!s)throw t;this.#r&&(mr(this.#r),this.#r=null),this.#s&&(mr(this.#s),this.#s=null),this.#a&&(mr(this.#a),this.#a=null),xs&&(Br(this.#e),Ys(),Br(Nm()));var i=!1,r=!1;const o=()=>{if(i){LD();return}i=!0,r&&wD(),jc.ensure(),this.#u=0,this.#a!==null&&dh(this.#a,()=>{this.#a=null}),this.is_pending=this.has_pending_snippet(),this.#r=this.#x(()=>(this.#f=!1,yo(()=>this.#i(this.#t)))),this.#h>0?this.#b():this.is_pending=!1};Ua(()=>{try{r=!0,e?.(t,o),r=!1}catch(a){Pd(a,this.#o&&this.#o.parent)}s&&(this.#a=this.#x(()=>{jc.ensure(),this.#f=!0;try{return yo(()=>{s(this.#t,()=>t,()=>o)})}catch(a){return Pd(a,this.#o.parent),null}finally{this.#f=!1}}))})}}function XS(n,t,e,s){const i=Pp()?Bp:y1;var r=n.filter(g=>!g.settled);if(e.length===0&&r.length===0){s(t.map(i));return}var o=Ci,a=_s,l=jD(),u=r.length===1?r[0].promise:r.length>1?Promise.all(r.map(g=>g.promise)):null;function h(g){l();try{s(g)}catch(m){(a.f&tc)===0&&Pd(m,a)}o?.deactivate(),Bb()}if(e.length===0){u.then(()=>h(t.map(i)));return}function f(){l(),Promise.all(e.map(g=>XD(g))).then(g=>h([...t.map(i),...g])).catch(g=>Pd(g,a))}u?u.then(f):f()}function jD(){var n=_s,t=Ns,e=di,s=Ci;return function(r=!0){da(n),ha(t),Fd(e),r&&s?.activate()}}function Bb(){da(null),ha(null),Fd(null)}function Bp(n){var t=xr|io,e=Ns!==null&&(Ns.f&xr)!==0?Ns:null;return _s!==null&&(_s.f|=Zd),{ctx:di,deps:null,effects:null,equals:AS,f:t,fn:n,reactions:null,rv:0,v:sr,wv:0,parent:e??_s,ac:null}}function XD(n,t,e){let s=_s;s===null&&hD();var i=s.b,r=void 0,o=Qc(sr),a=!Ns,l=new Map;return i7(()=>{var u=_S();r=u.promise;try{Promise.resolve(n()).then(u.resolve,u.reject).then(()=>{h===Ci&&h.committed&&h.deactivate(),Bb()})}catch(m){u.reject(m),Bb()}var h=Ci;if(a){var f=i.is_rendered();i.update_pending_count(1),h.increment(f),l.get(h)?.reject(Ad),l.delete(h),l.set(h,u)}const g=(m,y=void 0)=>{if(h.activate(),y)y!==Ad&&(o.f|=Hc,Ld(o,y));else{(o.f&Hc)!==0&&(o.f^=Hc),Ld(o,m);for(const[k,C]of l){if(l.delete(k),k===h)break;C.reject(Ad)}}a&&(i.update_pending_count(-1),h.decrement(f))};u.promise.then(g,m=>g(null,m||"unknown"))}),Vv(()=>{for(const u of l.values())u.reject(Ad)}),new Promise(u=>{function h(f){function g(){f===r?u(o):h(r)}f.then(g,g)}h(r)})}function Ki(n){const t=Bp(n);return JS(t),t}function y1(n){const t=Bp(n);return t.equals=$S,t}function qS(n){var t=n.effects;if(t!==null){n.effects=null;for(var e=0;e<t.length;e+=1)mr(t[e])}}function qD(n){for(var t=n.parent;t!==null;){if((t.f&xr)===0)return(t.f&tc)===0?t:null;t=t.parent}return null}function Bv(n){var t,e=_s;da(qD(n));try{n.f&=~bh,qS(n),t=nT(n)}finally{da(e)}return t}function KS(n){var t=Bv(n);if(!n.equals(t)&&(n.wv=tT(),(!Ci?.is_fork||n.deps===null)&&(n.v=t,n.deps===null))){Qi(n,gr);return}tu||(La!==null?(Wv()||Ci?.is_fork)&&La.set(n,t):Lv(n))}let zb=new Set;const Xc=new Map;let YS=!1;function Qc(n,t){var e={f:0,v:n,reactions:null,equals:AS,rv:0,wv:0};return e}function qn(n,t){const e=Qc(n);return JS(e),e}function pl(n,t=!1,e=!0){const s=Qc(n);return t||(s.equals=$S),Jd&&e&&di!==null&&di.l!==null&&(di.l.s??=[]).push(s),s}function Ve(n,t,e=!1){Ns!==null&&(!Wa||(Ns.f&jk)!==0)&&Pp()&&(Ns.f&(xr|cc|Mv|jk))!==0&&(ua===null||!Od.call(ua,n))&&yD();let s=e?no(t):t;return Ld(n,s)}function Ld(n,t){if(!n.equals(t)){var e=n.v;tu?Xc.set(n,t):Xc.set(n,e),n.v=t;var s=jc.ensure();if(s.capture(n,e),(n.f&xr)!==0){const i=n;(n.f&io)!==0&&Bv(i),Lv(i)}n.wv=tT(),ZS(n,io),Pp()&&_s!==null&&(_s.f&gr)!==0&&(_s.f&(El|Mh))===0&&(ia===null?JD([n]):ia.push(n)),!s.is_fork&&zb.size>0&&!YS&&KD()}return t}function KD(){YS=!1;for(const n of zb)(n.f&gr)!==0&&Qi(n,_l),Qd(n)&&Bd(n);zb.clear()}function Zk(n,t=1){var e=Tt(n),s=t===1?e++:e--;return Ve(n,e),s}function bp(n){Ve(n,n.v+1)}function ZS(n,t){var e=n.reactions;if(e!==null)for(var s=Pp(),i=e.length,r=0;r<i;r++){var o=e[r],a=o.f;if(!(!s&&o===_s)){var l=(a&io)===0;if(l&&Qi(o,t),(a&xr)!==0){var u=o;La?.delete(u),(a&bh)===0&&(a&ca&&(o.f|=bh),ZS(u,_l))}else l&&((a&cc)!==0&&ql!==null&&ql.add(o),ic(o))}}}function YD(n,t){if(t){const e=document.body;n.autofocus=!0,Ua(()=>{document.activeElement===e&&n.focus()})}}let Jk=!1;function ZD(){Jk||(Jk=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{if(!n.defaultPrevented)for(const t of n.target.elements)t.__on_r?.()})},{capture:!0}))}function zv(n){var t=Ns,e=_s;ha(null),da(null);try{return n()}finally{ha(t),da(e)}}let mm=!1,tu=!1;function Qk(n){tu=n}let Ns=null,Wa=!1;function ha(n){Ns=n}let _s=null;function da(n){_s=n}let ua=null;function JS(n){Ns!==null&&(ua===null?ua=[n]:ua.push(n))}let vo=null,Wo=0,ia=null;function JD(n){ia=n}let QS=1,lh=0,hh=lh;function t4(n){hh=n}function tT(){return++QS}function Qd(n){var t=n.f;if((t&io)!==0)return!0;if(t&xr&&(n.f&=~bh),(t&_l)!==0){for(var e=n.deps,s=e.length,i=0;i<s;i++){var r=e[i];if(Qd(r)&&KS(r),r.wv>n.wv)return!0}(t&ca)!==0&&La===null&&Qi(n,gr)}return!1}function eT(n,t,e=!0){var s=n.reactions;if(s!==null&&!(ua!==null&&Od.call(ua,n)))for(var i=0;i<s.length;i++){var r=s[i];(r.f&xr)!==0?eT(r,t,!1):t===r&&(e?Qi(r,io):(r.f&gr)!==0&&Qi(r,_l),ic(r))}}function nT(n){var t=vo,e=Wo,s=ia,i=Ns,r=ua,o=di,a=Wa,l=hh,u=n.f;vo=null,Wo=0,ia=null,Ns=(u&(El|Mh))===0?n:null,ua=null,Fd(n.ctx),Wa=!1,hh=++lh,n.ac!==null&&(zv(()=>{n.ac.abort(Ad)}),n.ac=null);try{n.f|=Mb;var h=n.fn,f=h(),g=n.deps;if(vo!==null){var m;if(Dm(n,Wo),g!==null&&Wo>0)for(g.length=Wo+vo.length,m=0;m<vo.length;m++)g[Wo+m]=vo[m];else n.deps=g=vo;if(Wv()&&(n.f&ca)!==0)for(m=Wo;m<g.length;m++)(g[m].reactions??=[]).push(n)}else g!==null&&Wo<g.length&&(Dm(n,Wo),g.length=Wo);if(Pp()&&ia!==null&&!Wa&&g!==null&&(n.f&(xr|_l|io))===0)for(m=0;m<ia.length;m++)eT(ia[m],n);if(i!==null&&i!==n){if(lh++,i.deps!==null)for(let y=0;y<e;y+=1)i.deps[y].rv=lh;if(t!==null)for(const y of t)y.rv=lh;ia!==null&&(s===null?s=ia:s.push(...ia))}return(n.f&Hc)!==0&&(n.f^=Hc),f}catch(y){return WS(y)}finally{n.f^=Mb,vo=t,Wo=e,ia=s,Ns=i,ua=r,Fd(o),Wa=a,hh=l}}function QD(n,t){let e=t.reactions;if(e!==null){var s=iD.call(e,n);if(s!==-1){var i=e.length-1;i===0?e=t.reactions=null:(e[s]=e[i],e.pop())}}if(e===null&&(t.f&xr)!==0&&(vo===null||!Od.call(vo,t))){var r=t;(r.f&ca)!==0&&(r.f^=ca,r.f&=~bh),Lv(r),qS(r),Dm(r,0)}}function Dm(n,t){var e=n.deps;if(e!==null)for(var s=t;s<e.length;s++)QD(n,e[s])}function Bd(n){var t=n.f;if((t&tc)===0){Qi(n,gr);var e=_s,s=mm;_s=n,mm=!0;try{(t&(cc|Dv))!==0?r7(n):cT(n),lT(n);var i=nT(n);n.teardown=typeof i=="function"?i:null,n.wv=QS;var r;Ob&&kD&&(n.f&io)!==0&&n.deps}finally{mm=s,_s=e}}}function Tt(n){var t=n.f,e=(t&xr)!==0;if(Ns!==null&&!Wa){var s=_s!==null&&(_s.f&tc)!==0;if(!s&&(ua===null||!Od.call(ua,n))){var i=Ns.deps;if((Ns.f&Mb)!==0)n.rv<lh&&(n.rv=lh,vo===null&&i!==null&&i[Wo]===n?Wo++:vo===null?vo=[n]:vo.push(n));else{(Ns.deps??=[]).push(n);var r=n.reactions;r===null?n.reactions=[Ns]:Od.call(r,Ns)||r.push(Ns)}}}if(tu&&Xc.has(n))return Xc.get(n);if(e){var o=n;if(tu){var a=o.v;return((o.f&gr)===0&&o.reactions!==null||iT(o))&&(a=Bv(o)),Xc.set(o,a),a}var l=(o.f&ca)===0&&!Wa&&Ns!==null&&(mm||(Ns.f&ca)!==0),u=o.deps===null;Qd(o)&&(l&&(o.f|=ca),KS(o)),l&&!u&&sT(o)}if(La?.has(n))return La.get(n);if((n.f&Hc)!==0)throw n.v;return n.v}function sT(n){if(n.deps!==null){n.f|=ca;for(const t of n.deps)(t.reactions??=[]).push(n),(t.f&xr)!==0&&(t.f&ca)===0&&sT(t)}}function iT(n){if(n.v===sr)return!0;if(n.deps===null)return!1;for(const t of n.deps)if(Xc.has(t)||(t.f&xr)!==0&&iT(t))return!0;return!1}function Al(n){var t=Wa;try{return Wa=!0,n()}finally{Wa=t}}function Td(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(ec in n)Wb(n);else if(!Array.isArray(n))for(let t in n){const e=n[t];typeof e=="object"&&e&&ec in e&&Wb(e)}}}function Wb(n,t=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!t.has(n)){t.add(n),n instanceof Date&&n.getTime();for(let s in n)try{Wb(n[s],t)}catch{}const e=Ov(n);if(e!==Object.prototype&&e!==Array.prototype&&e!==Map.prototype&&e!==Set.prototype&&e!==Date.prototype){const s=ES(e);for(let i in s){const r=s[i].get;if(r)try{r.call(n)}catch{}}}}}function rT(n){_s===null&&(Ns===null&&pD(),fD()),tu&&dD()}function t7(n,t){var e=t.last;e===null?t.last=t.first=n:(e.next=n,n.prev=e,t.last=n)}function Za(n,t,e){var s=_s;s!==null&&(s.f&Ho)!==0&&(n|=Ho);var i={ctx:di,deps:null,nodes:null,f:n|io|ca,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if(e)try{Bd(i),i.f|=p1}catch(a){throw mr(i),a}else t!==null&&ic(i);var r=i;if(e&&r.deps===null&&r.teardown===null&&r.nodes===null&&r.first===r.last&&(r.f&Zd)===0&&(r=r.first,(n&cc)!==0&&(n&xh)!==0&&r!==null&&(r.f|=xh)),r!==null&&(r.parent=s,s!==null&&t7(r,s),Ns!==null&&(Ns.f&xr)!==0&&(n&Mh)===0)){var o=Ns;(o.effects??=[]).push(r)}return i}function Wv(){return Ns!==null&&!Wa}function Vv(n){const t=Za(Fp,null,!1);return Qi(t,gr),t.teardown=n,t}function kp(n){rT();var t=_s.f,e=!Ns&&(t&El)!==0&&(t&p1)===0;if(e){var s=di;(s.e??=[]).push(n)}else return oT(n)}function oT(n){return Za($m|SS,n,!1)}function e7(n){return rT(),Za(Fp|SS,n,!0)}function n7(n){jc.ensure();const t=Za(Mh|Zd,n,!0);return(e={})=>new Promise(s=>{e.outro?dh(t,()=>{mr(t),s(void 0)}):(mr(t),s(void 0))})}function zp(n){return Za($m,n,!1)}function Yg(n,t){var e=di,s={effect:null,ran:!1,deps:n};e.l.$.push(s),s.effect=w1(()=>{n(),!s.ran&&(s.ran=!0,Al(t))})}function s7(){var n=di;w1(()=>{for(var t of n.l.$){t.deps();var e=t.effect;(e.f&gr)!==0&&e.deps!==null&&Qi(e,_l),Qd(e)&&Bd(e),t.ran=!1}})}function i7(n){return Za(Mv|Zd,n,!0)}function w1(n,t=0){return Za(Fp|t,n,!0)}function un(n,t=[],e=[],s=[]){XS(s,t,e,i=>{Za(Fp,()=>n(...i.map(Tt)),!0)})}function k1(n,t=0){var e=Za(cc|t,n,!0);return e}function aT(n,t=0){var e=Za(Dv|t,n,!0);return e}function yo(n){return Za(El|Zd,n,!0)}function lT(n){var t=n.teardown;if(t!==null){const e=tu,s=Ns;Qk(!0),ha(null);try{t.call(null)}finally{Qk(e),ha(s)}}}function cT(n,t=!1){var e=n.first;for(n.first=n.last=null;e!==null;){const i=e.ac;i!==null&&zv(()=>{i.abort(Ad)});var s=e.next;(e.f&Mh)!==0?e.parent=null:mr(e,t),e=s}}function r7(n){for(var t=n.first;t!==null;){var e=t.next;(t.f&El)===0&&mr(t),t=e}}function mr(n,t=!0){var e=!1;(t||(n.f&CS)!==0)&&n.nodes!==null&&n.nodes.end!==null&&(uT(n.nodes.start,n.nodes.end),e=!0),cT(n,t&&!e),Dm(n,0),Qi(n,tc);var s=n.nodes&&n.nodes.t;if(s!==null)for(const r of s)r.stop();lT(n);var i=n.parent;i!==null&&i.first!==null&&hT(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes=n.ac=null}function uT(n,t){for(;n!==null;){var e=n===t?null:Ya(n);n.remove(),n=e}}function hT(n){var t=n.parent,e=n.prev,s=n.next;e!==null&&(e.next=s),s!==null&&(s.prev=e),t!==null&&(t.first===n&&(t.first=s),t.last===n&&(t.last=e))}function dh(n,t,e=!0){var s=[];dT(n,s,!0);var i=()=>{e&&mr(n),t&&t()},r=s.length;if(r>0){var o=()=>--r||i();for(var a of s)a.out(o)}else i()}function dT(n,t,e){if((n.f&Ho)===0){n.f^=Ho;var s=n.nodes&&n.nodes.t;if(s!==null)for(const a of s)(a.is_global||e)&&t.push(a);for(var i=n.first;i!==null;){var r=i.next,o=(i.f&xh)!==0||(i.f&El)!==0&&(n.f&cc)!==0;dT(i,t,o?e:!1),i=r}}}function Uv(n){fT(n,!0)}function fT(n,t){if((n.f&Ho)!==0){n.f^=Ho,(n.f&gr)===0&&(Qi(n,io),ic(n));for(var e=n.first;e!==null;){var s=e.next,i=(e.f&xh)!==0||(e.f&El)!==0;fT(e,i?t:!1),e=s}var r=n.nodes&&n.nodes.t;if(r!==null)for(const o of r)(o.is_global||t)&&o.in()}}function pT(n,t){if(n.nodes)for(var e=n.nodes.start,s=n.nodes.end;e!==null;){var i=e===s?null:Ya(e);t.append(e),e=i}}const gT=new Set,Vb=new Set;function Wp(n){if(!xs)return;n.removeAttribute("onload"),n.removeAttribute("onerror");const t=n.__e;t!==void 0&&(n.__e=void 0,queueMicrotask(()=>{n.isConnected&&n.dispatchEvent(t)}))}function mT(n,t,e,s={}){function i(r){if(s.capture||ap.call(t,r),!r.cancelBubble)return zv(()=>e?.call(this,r))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?Ua(()=>{t.addEventListener(n,i,s)}):t.addEventListener(n,i,s),i}function Mi(n,t,e,s,i){var r={capture:s,passive:i},o=mT(n,t,e,r);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Vv(()=>{t.removeEventListener(n,o,r)})}function C1(n){for(var t=0;t<n.length;t++)gT.add(n[t]);for(var e of Vb)e(n)}let e4=null;function ap(n){var t=this,e=t.ownerDocument,s=n.type,i=n.composedPath?.()||[],r=i[0]||n.target;e4=n;var o=0,a=e4===n&&n.__root;if(a){var l=i.indexOf(a);if(l!==-1&&(t===document||t===window)){n.__root=t;return}var u=i.indexOf(t);if(u===-1)return;l<=u&&(o=l)}if(r=i[o]||n.target,r!==t){IS(n,"currentTarget",{configurable:!0,get(){return r||e}});var h=Ns,f=_s;ha(null),da(null);try{for(var g,m=[];r!==null;){var y=r.assignedSlot||r.parentNode||r.host||null;try{var k=r["__"+s];k!=null&&(!r.disabled||n.target===r)&&k.call(r,n)}catch(C){g?m.push(C):g=C}if(n.cancelBubble||y===t||y===null)break;r=y}if(g){for(let C of m)queueMicrotask(()=>{throw C});throw g}}finally{n.__root=t,delete n.currentTarget,ha(h),da(f)}}}function xT(n){var t=document.createElement("template");return t.innerHTML=n.replaceAll("<!>","<!---->"),t.content}function ml(n,t){var e=_s;e.nodes===null&&(e.nodes={start:n,end:t,a:null,t:null})}function Re(n,t){var e=(t&DD)!==0,s=(t&RD)!==0,i,r=!n.startsWith("<!>");return()=>{if(xs)return ml(Rs,null),Rs;i===void 0&&(i=xT(r?n:"<!>"+n),e||(i=za(i)));var o=s||FS?document.importNode(i,!0):i.cloneNode(!0);if(e){var a=za(o),l=o.lastChild;ml(a,l)}else ml(o,o);return o}}function Ub(n=""){if(!xs){var t=Co(n+"");return ml(t,t),t}var e=Rs;return e.nodeType!==g1&&(e.before(e=Co()),Br(e)),ml(e,e),e}function Mr(){if(xs)return ml(Rs,null),Rs;var n=document.createDocumentFragment(),t=document.createComment(""),e=Co();return n.append(t,e),ml(t,e),n}function Ie(n,t){if(xs){var e=_s;((e.f&p1)===0||e.nodes.end===null)&&(e.nodes.end=Rs),yh();return}n!==null&&n.before(t)}function o7(n){return n.endsWith("capture")&&n!=="gotpointercapture"&&n!=="lostpointercapture"}const a7=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function l7(n){return a7.includes(n)}const c7={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function u7(n){return n=n.toLowerCase(),c7[n]??n}const h7=["touchstart","touchmove"];function d7(n){return h7.includes(n)}function nn(n,t){var e=t==null?"":typeof t=="object"?t+"":t;e!==(n.__t??=n.nodeValue)&&(n.__t=e,n.nodeValue=e+"")}function Kl(n,t){return bT(n,t)}function f7(n,t){Pb(),t.intro=t.intro??!1;const e=t.target,s=xs,i=Rs;try{for(var r=za(e);r&&(r.nodeType!==Oh||r.data!==RS);)r=Ya(r);if(!r)throw vh;Ba(!0),Br(r);const o=bT(n,{...t,anchor:r});return Ba(!1),o}catch(o){if(o instanceof Error&&o.message.split(`
`).some(a=>a.startsWith("https://svelte.dev/e/")))throw o;return o!==vh&&console.warn("Failed to hydrate: ",o),t.recover===!1&&mD(),Pb(),BS(e),Ba(!1),Kl(n,t)}finally{Ba(s),Br(i)}}const vd=new Map;function bT(n,{target:t,anchor:e,props:s={},events:i,context:r,intro:o=!0}){Pb();var a=new Set,l=f=>{for(var g=0;g<f.length;g++){var m=f[g];if(!a.has(m)){a.add(m);var y=d7(m);t.addEventListener(m,ap,{passive:y});var k=vd.get(m);k===void 0?(document.addEventListener(m,ap,{passive:y}),vd.set(m,1)):vd.set(m,k+1)}}};l(x1(gT)),Vb.add(l);var u=void 0,h=n7(()=>{var f=e??t.appendChild(Co());return GD(f,{pending:()=>{}},g=>{if(r){ar({});var m=di;m.c=r}if(i&&(s.$$events=i),xs&&ml(g,null),u=n(g,s)||{},xs&&(_s.nodes.end=Rs,Rs===null||Rs.nodeType!==Oh||Rs.data!==Pv))throw Lp(),vh;r&&lr()}),()=>{for(var g of a){t.removeEventListener(g,ap);var m=vd.get(g);--m===0?(document.removeEventListener(g,ap),vd.delete(g)):vd.set(g,m)}Vb.delete(l),f!==e&&f.parentNode?.removeChild(f)}});return Gb.set(u,h),u}let Gb=new WeakMap;function p7(n,t){const e=Gb.get(n);return e?(Gb.delete(n),e(t)):Promise.resolve()}function wr(n){return new g7(n)}class g7{#t;#e;constructor(t){var e=new Map,s=(r,o)=>{var a=pl(o,!1,!1);return e.set(r,a),a};const i=new Proxy({...t.props||{},$$events:{}},{get(r,o){return Tt(e.get(o)??s(o,Reflect.get(r,o)))},has(r,o){return o===TS?!0:(Tt(e.get(o)??s(o,Reflect.get(r,o))),Reflect.has(r,o))},set(r,o,a){return Ve(e.get(o)??s(o,a),a),Reflect.set(r,o,a)}});this.#e=(t.hydrate?f7:Kl)(t.component,{target:t.target,anchor:t.anchor,props:i,context:t.context,intro:t.intro??!1,recover:t.recover}),(!t?.props?.$$host||t.sync===!1)&&_n(),this.#t=i.$$events;for(const r of Object.keys(this.#e))r==="$set"||r==="$destroy"||r==="$on"||IS(this,r,{get(){return this.#e[r]},set(o){this.#e[r]=o},enumerable:!0});this.#e.$set=r=>{Object.assign(i,r)},this.#e.$destroy=()=>{p7(this.#e)}}$set(t){this.#e.$set(t)}$on(t,e){this.#t[t]=this.#t[t]||[];const s=(...i)=>e.call(this,...i);return this.#t[t].push(s),()=>{this.#t[t]=this.#t[t].filter(i=>i!==s)}}$destroy(){this.#e.$destroy()}}const m7="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(m7);class vT{anchor;#t=new Map;#e=new Map;#n=new Map;#i=new Set;#o=!0;constructor(t,e=!0){this.anchor=t,this.#o=e}#r=()=>{var t=Ci;if(this.#t.has(t)){var e=this.#t.get(t),s=this.#e.get(e);if(s)Uv(s),this.#i.delete(e);else{var i=this.#n.get(e);i&&(this.#e.set(e,i.effect),this.#n.delete(e),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),s=i.effect)}for(const[r,o]of this.#t){if(this.#t.delete(r),r===t)break;const a=this.#n.get(o);a&&(mr(a.effect),this.#n.delete(o))}for(const[r,o]of this.#e){if(r===e||this.#i.has(r))continue;const a=()=>{if(Array.from(this.#t.values()).includes(r)){var u=document.createDocumentFragment();pT(o,u),u.append(Co()),this.#n.set(r,{effect:o,fragment:u})}else mr(o);this.#i.delete(r),this.#e.delete(r)};this.#o||!s?(this.#i.add(r),dh(o,a,!1)):a()}}};#s=t=>{this.#t.delete(t);const e=Array.from(this.#t.values());for(const[s,i]of this.#n)e.includes(s)||(mr(i.effect),this.#n.delete(s))};ensure(t,e){var s=Ci,i=zS();if(e&&!this.#e.has(t)&&!this.#n.has(t))if(i){var r=document.createDocumentFragment(),o=Co();r.append(o),this.#n.set(t,{effect:yo(()=>e(o)),fragment:r})}else this.#e.set(t,yo(()=>e(this.anchor)));if(this.#t.set(s,t),i){for(const[a,l]of this.#e)a===t?s.skipped_effects.delete(l):s.skipped_effects.add(l);for(const[a,l]of this.#n)a===t?s.skipped_effects.delete(l.effect):s.skipped_effects.add(l.effect);s.oncommit(this.#r),s.ondiscard(this.#s)}else xs&&(this.anchor=Rs),this.#r()}}function yT(n,t,...e){var s=new vT(n);k1(()=>{const i=t()??null;s.ensure(i,i&&(r=>i(r,...e)))},xh)}function $l(n){di===null&&Fv(),Jd&&di.l!==null?y7(di).m.push(n):kp(()=>{const t=Al(n);if(typeof t=="function")return t})}function x7(n){di===null&&Fv(),$l(()=>()=>Al(n))}function b7(n,t,{bubbles:e=!1,cancelable:s=!1}={}){return new CustomEvent(n,{detail:t,bubbles:e,cancelable:s})}function v7(){const n=di;return n===null&&Fv(),(t,e,s)=>{const i=n.s.$$events?.[t];if(i){const r=m1(i)?i.slice():[i],o=b7(t,e,s);for(const a of r)a.call(n.x,o);return!o.defaultPrevented}return!0}}function y7(n){var t=n.l;return t.u??={a:[],b:[],m:[]}}function En(n,t,e=!1){xs&&yh();var s=new vT(n),i=e?xh:0;function r(o,a){if(xs){const u=OS(n)===b1;if(o===u){var l=Nm();Br(l),s.anchor=l,Ba(!1),s.ensure(o,a),Ba(!0);return}}s.ensure(o,a)}k1(()=>{var o=!1;t((a,l=!0)=>{o=!0,r(l,a)}),o||r(!1,null)},i)}function Fs(n,t){return t}function w7(n,t,e){for(var s=[],i=t.length,r,o=t.length,a=0;a<i;a++){let f=t[a];dh(f,()=>{if(r){if(r.pending.delete(f),r.done.add(f),r.pending.size===0){var g=n.outrogroups;Hb(x1(r.done)),g.delete(r),g.size===0&&(n.outrogroups=null)}}else o-=1},!1)}if(o===0){var l=s.length===0&&e!==null;if(l){var u=e,h=u.parentNode;BS(h),h.append(u),n.items.clear()}Hb(t,!l)}else r={pending:new Set(t),done:new Set},(n.outrogroups??=new Set).add(r)}function Hb(n,t=!0){for(var e=0;e<n.length;e++)mr(n[e],t)}var n4;function Ps(n,t,e,s,i,r=null){var o=n,a=new Map,l=(t&NS)!==0;if(l){var u=n;o=xs?Br(za(u)):u.appendChild(Co())}xs&&yh();var h=null,f=y1(()=>{var S=e();return m1(S)?S:S==null?[]:x1(S)}),g,m=!0;function y(){C.fallback=h,k7(C,g,o,t,s),h!==null&&(g.length===0?(h.f&Jl)===0?Uv(h):(h.f^=Jl,lp(h,null,o)):dh(h,()=>{h=null}))}var k=k1(()=>{g=Tt(f);var S=g.length;let $=!1;if(xs){var D=OS(o)===b1;D!==(S===0)&&(o=Nm(),Br(o),Ba(!1),$=!0)}for(var R=new Set,V=Ci,E=zS(),q=0;q<S;q+=1){xs&&Rs.nodeType===Oh&&Rs.data===Pv&&(o=Rs,$=!0,Ba(!1));var X=g[q],B=s(X,q),U=m?null:a.get(B);U?(U.v&&Ld(U.v,X),U.i&&Ld(U.i,q),E&&V.skipped_effects.delete(U.e)):(U=C7(a,m?o:n4??=Co(),X,B,q,i,t,e),m||(U.e.f|=Jl),a.set(B,U)),R.add(B)}if(S===0&&r&&!h&&(m?h=yo(()=>r(o)):(h=yo(()=>r(n4??=Co())),h.f|=Jl)),xs&&S>0&&Br(Nm()),!m)if(E){for(const[K,Y]of a)R.has(K)||V.skipped_effects.add(Y.e);V.oncommit(y),V.ondiscard(()=>{})}else y();$&&Ba(!0),Tt(f)}),C={effect:k,items:a,outrogroups:null,fallback:h};m=!1,xs&&(o=Rs)}function Qf(n){for(;n!==null&&(n.f&El)===0;)n=n.next;return n}function k7(n,t,e,s,i){var r=(s&ID)!==0,o=t.length,a=n.items,l=Qf(n.effect.first),u,h=null,f,g=[],m=[],y,k,C,S;if(r)for(S=0;S<o;S+=1)y=t[S],k=i(y,S),C=a.get(k).e,(C.f&Jl)===0&&(C.nodes?.a?.measure(),(f??=new Set).add(C));for(S=0;S<o;S+=1){if(y=t[S],k=i(y,S),C=a.get(k).e,n.outrogroups!==null)for(const U of n.outrogroups)U.pending.delete(C),U.done.delete(C);if((C.f&Jl)!==0)if(C.f^=Jl,C===l)lp(C,null,e);else{var $=h?h.next:l;C===n.effect.last&&(n.effect.last=C.prev),C.prev&&(C.prev.next=C.next),C.next&&(C.next.prev=C.prev),Lc(n,h,C),Lc(n,C,$),lp(C,$,e),h=C,g=[],m=[],l=Qf(h.next);continue}if((C.f&Ho)!==0&&(Uv(C),r&&(C.nodes?.a?.unfix(),(f??=new Set).delete(C))),C!==l){if(u!==void 0&&u.has(C)){if(g.length<m.length){var D=m[0],R;h=D.prev;var V=g[0],E=g[g.length-1];for(R=0;R<g.length;R+=1)lp(g[R],D,e);for(R=0;R<m.length;R+=1)u.delete(m[R]);Lc(n,V.prev,E.next),Lc(n,h,V),Lc(n,E,D),l=D,h=E,S-=1,g=[],m=[]}else u.delete(C),lp(C,l,e),Lc(n,C.prev,C.next),Lc(n,C,h===null?n.effect.first:h.next),Lc(n,h,C),h=C;continue}for(g=[],m=[];l!==null&&l!==C;)(u??=new Set).add(l),m.push(l),l=Qf(l.next);if(l===null)continue}(C.f&Jl)===0&&g.push(C),h=C,l=Qf(C.next)}if(n.outrogroups!==null){for(const U of n.outrogroups)U.pending.size===0&&(Hb(x1(U.done)),n.outrogroups?.delete(U));n.outrogroups.size===0&&(n.outrogroups=null)}if(l!==null||u!==void 0){var q=[];if(u!==void 0)for(C of u)(C.f&Ho)===0&&q.push(C);for(;l!==null;)(l.f&Ho)===0&&l!==n.fallback&&q.push(l),l=Qf(l.next);var X=q.length;if(X>0){var B=(s&NS)!==0&&o===0?e:null;if(r){for(S=0;S<X;S+=1)q[S].nodes?.a?.measure();for(S=0;S<X;S+=1)q[S].nodes?.a?.fix()}w7(n,q,B)}}r&&Ua(()=>{if(f!==void 0)for(C of f)C.nodes?.a?.apply()})}function C7(n,t,e,s,i,r,o,a){var l=(o&SD)!==0?(o&ED)===0?pl(e,!1,!1):Qc(e):null,u=(o&TD)!==0?Qc(i):null;return{v:l,i:u,e:yo(()=>(r(t,l??e,u??i,a),()=>{n.delete(s)}))}}function lp(n,t,e){if(n.nodes)for(var s=n.nodes.start,i=n.nodes.end,r=t&&(t.f&Jl)===0?t.nodes.start:e;s!==null;){var o=Ya(s);if(r.before(s),s===i)return;s=o}}function Lc(n,t,e){t===null?n.effect.first=e:t.next=e,e===null?n.effect.last=t:e.prev=t}function Gv(n,t,e=!1,s=!1,i=!1){var r=n,o="";un(()=>{var a=_s;if(o===(o=t()??"")){xs&&yh();return}if(a.nodes!==null&&(uT(a.nodes.start,a.nodes.end),a.nodes=null),o!==""){if(xs){Rs.data;for(var l=yh(),u=l;l!==null&&(l.nodeType!==Oh||l.data!=="");)u=l,l=Ya(l);if(l===null)throw Lp(),vh;ml(Rs,u),r=Br(l);return}var h=o+"";e?h=`<svg>${h}</svg>`:s&&(h=`<math>${h}</math>`);var f=xT(h);if((e||s)&&(f=za(f)),ml(za(f),f.lastChild),e||s)for(;za(f);)r.before(za(f));else r.before(f)}})}function S7(n,t,e,s,i){xs&&yh();var r=t.$$slots?.[e],o=!1;r===!0&&(r=t.children,o=!0),r===void 0?i!==null&&i(n):r(n,o?()=>s:s)}function Hv(n,t,e){zp(()=>{var s=Al(()=>t(n,e?.())||{});if(s?.destroy)return()=>s.destroy()})}function T7(n,t){var e=void 0,s;aT(()=>{e!==(e=t())&&(s&&(mr(s),s=null),e&&(s=yo(()=>{zp(()=>e(n))})))})}function wT(n){var t,e,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(t=0;t<i;t++)n[t]&&(e=wT(n[t]))&&(s&&(s+=" "),s+=e)}else for(e in n)n[e]&&(s&&(s+=" "),s+=e);return s}function I7(){for(var n,t,e=0,s="",i=arguments.length;e<i;e++)(n=arguments[e])&&(t=wT(n))&&(s&&(s+=" "),s+=t);return s}function E7(n){return typeof n=="object"?I7(n):n??""}const s4=[...` 	
\r\f \v\uFEFF`];function _7(n,t,e){var s=n==null?"":""+n;if(t&&(s=s?s+" "+t:t),e){for(var i in e)if(e[i])s=s?s+" "+i:i;else if(s.length)for(var r=i.length,o=0;(o=s.indexOf(i,o))>=0;){var a=o+r;(o===0||s4.includes(s[o-1]))&&(a===s.length||s4.includes(s[a]))?s=(o===0?"":s.substring(0,o))+s.substring(a+1):o=a}}return s===""?null:s}function i4(n,t=!1){var e=t?" !important;":";",s="";for(var i in n){var r=n[i];r!=null&&r!==""&&(s+=" "+i+": "+r+e)}return s}function lb(n){return n[0]!=="-"||n[1]!=="-"?n.toLowerCase():n}function A7(n,t){if(t){var e="",s,i;if(Array.isArray(t)?(s=t[0],i=t[1]):s=t,n){n=String(n).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var r=!1,o=0,a=!1,l=[];s&&l.push(...Object.keys(s).map(lb)),i&&l.push(...Object.keys(i).map(lb));var u=0,h=-1;const k=n.length;for(var f=0;f<k;f++){var g=n[f];if(a?g==="/"&&n[f-1]==="*"&&(a=!1):r?r===g&&(r=!1):g==="/"&&n[f+1]==="*"?a=!0:g==='"'||g==="'"?r=g:g==="("?o++:g===")"&&o--,!a&&r===!1&&o===0){if(g===":"&&h===-1)h=f;else if(g===";"||f===k-1){if(h!==-1){var m=lb(n.substring(u,h).trim());if(!l.includes(m)){g!==";"&&f++;var y=n.substring(u,f).trim();e+=" "+y+";"}}u=f+1,h=-1}}}}return s&&(e+=i4(s)),i&&(e+=i4(i,!0)),e=e.trim(),e===""?null:e}return n==null?null:String(n)}function Os(n,t,e,s,i,r){var o=n.__className;if(xs||o!==e||o===void 0){var a=_7(e,s,r);(!xs||a!==n.getAttribute("class"))&&(a==null?n.removeAttribute("class"):t?n.className=a:n.setAttribute("class",a)),n.__className=e}else if(r&&i!==r)for(var l in r){var u=!!r[l];(i==null||u!==!!i[l])&&n.classList.toggle(l,u)}return r}function cb(n,t={},e,s){for(var i in e){var r=e[i];t[i]!==r&&(e[i]==null?n.style.removeProperty(i):n.style.setProperty(i,r,s))}}function Bc(n,t,e,s){var i=n.__style;if(xs||i!==t){var r=A7(t,s);(!xs||r!==n.getAttribute("style"))&&(r==null?n.removeAttribute("style"):n.style.cssText=r),n.__style=t}else s&&(Array.isArray(s)?(cb(n,e?.[0],s[0]),cb(n,e?.[1],s[1],"important")):cb(n,e,s));return s}function jb(n,t,e=!1){if(n.multiple){if(t==null)return;if(!m1(t))return PD();for(var s of n.options)s.selected=t.includes(r4(s));return}for(s of n.options){var i=r4(s);if(BD(i,t)){s.selected=!0;return}}(!e||t!==void 0)&&(n.selectedIndex=-1)}function $7(n){var t=new MutationObserver(()=>{jb(n,n.__value)});t.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Vv(()=>{t.disconnect()})}function r4(n){return"__value"in n?n.__value:n.value}const Zg=Symbol("class"),tp=Symbol("style"),kT=Symbol("is custom element"),CT=Symbol("is html");function N7(n){if(xs){var t=!1,e=()=>{if(!t){if(t=!0,n.hasAttribute("value")){var s=n.value;rs(n,"value",null),n.value=s}if(n.hasAttribute("checked")){var i=n.checked;rs(n,"checked",null),n.checked=i}}};n.__on_r=e,Ua(e),ZD()}}function D7(n,t){t?n.hasAttribute("selected")||n.setAttribute("selected",""):n.removeAttribute("selected")}function rs(n,t,e,s){var i=ST(n);xs&&(i[t]=n.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&n.nodeName==="LINK")||i[t]!==(i[t]=e)&&(t==="loading"&&(n[sD]=e),e==null?n.removeAttribute(t):typeof e!="string"&&TT(n).includes(t)?n[t]=e:n.setAttribute(t,e))}function R7(n,t,e,s,i=!1,r=!1){if(xs&&i&&n.tagName==="INPUT"){var o=n,a=o.type==="checkbox"?"defaultChecked":"defaultValue";a in e||N7(o)}var l=ST(n),u=l[kT],h=!l[CT];let f=xs&&u;f&&Ba(!1);var g=t||{},m=n.tagName==="OPTION";for(var y in t)y in e||(e[y]=null);e.class?e.class=E7(e.class):e.class=null,e[tp]&&(e.style??=null);var k=TT(n);for(const q in e){let X=e[q];if(m&&q==="value"&&X==null){n.value=n.__value="",g[q]=X;continue}if(q==="class"){var C=n.namespaceURI==="http://www.w3.org/1999/xhtml";Os(n,C,X,s,t?.[Zg],e[Zg]),g[q]=X,g[Zg]=e[Zg];continue}if(q==="style"){Bc(n,X,t?.[tp],e[tp]),g[q]=X,g[tp]=e[tp];continue}var S=g[q];if(!(X===S&&!(X===void 0&&n.hasAttribute(q)))){g[q]=X;var $=q[0]+q[1];if($!=="$$")if($==="on"){const B={},U="$$"+q;let K=q.slice(2);var D=l7(K);if(o7(K)&&(K=K.slice(0,-7),B.capture=!0),!D&&S){if(X!=null)continue;n.removeEventListener(K,g[U],B),g[U]=null}if(X!=null)if(D)n[`__${K}`]=X,C1([K]);else{let Y=function(ct){g[q].call(this,ct)};var E=Y;g[U]=mT(K,n,Y,B)}else D&&(n[`__${K}`]=void 0)}else if(q==="style")rs(n,q,X);else if(q==="autofocus")YD(n,!!X);else if(!u&&(q==="__value"||q==="value"&&X!=null))n.value=n.__value=X;else if(q==="selected"&&m)D7(n,X);else{var R=q;h||(R=u7(R));var V=R==="defaultValue"||R==="defaultChecked";if(X==null&&!u&&!V)if(l[q]=null,R==="value"||R==="checked"){let B=n;const U=t===void 0;if(R==="value"){let K=B.defaultValue;B.removeAttribute(R),B.defaultValue=K,B.value=B.__value=U?K:null}else{let K=B.defaultChecked;B.removeAttribute(R),B.defaultChecked=K,B.checked=U?K:!1}}else n.removeAttribute(q);else V||k.includes(R)&&(u||typeof X!="string")?(n[R]=X,R in l&&(l[R]=sr)):typeof X!="function"&&rs(n,R,X)}}}return f&&Ba(!0),g}function M7(n,t,e=[],s=[],i=[],r,o=!1,a=!1){XS(i,e,s,l=>{var u=void 0,h={},f=n.nodeName==="SELECT",g=!1;if(aT(()=>{var y=t(...l.map(Tt)),k=R7(n,u,y,r,o,a);g&&f&&"value"in y&&jb(n,y.value);for(let S of Object.getOwnPropertySymbols(h))y[S]||mr(h[S]);for(let S of Object.getOwnPropertySymbols(y)){var C=y[S];S.description===OD&&(!u||C!==u[S])&&(h[S]&&mr(h[S]),h[S]=yo(()=>T7(n,()=>C))),k[S]=C}u=k}),f){var m=n;zp(()=>{jb(m,u.value,!0),$7(m)})}g=!0})}function ST(n){return n.__attributes??={[kT]:n.nodeName.includes("-"),[CT]:n.namespaceURI===MD}}var o4=new Map;function TT(n){var t=n.getAttribute("is")||n.nodeName,e=o4.get(t);if(e)return e;o4.set(t,e=[]);for(var s,i=n,r=Element.prototype;r!==i;){s=ES(i);for(var o in s)s[o].set&&e.push(o);i=Ov(i)}return e}class jv{#t=new WeakMap;#e;#n;static entries=new WeakMap;constructor(t){this.#n=t}observe(t,e){var s=this.#t.get(t)||new Set;return s.add(e),this.#t.set(t,s),this.#i().observe(t,this.#n),()=>{var i=this.#t.get(t);i.delete(e),i.size===0&&(this.#t.delete(t),this.#e.unobserve(t))}}#i(){return this.#e??(this.#e=new ResizeObserver(t=>{for(var e of t){jv.entries.set(e.target,e);for(var s of this.#t.get(e.target)||[])s(e)}}))}}var O7=new jv({box:"border-box"});function F7(n,t,e){var s=O7.observe(n,()=>e(n[t]));zp(()=>(Al(()=>e(n[t])),s))}function a4(n,t){return n===t||n?.[ec]===t}function Rm(n={},t,e,s){return zp(()=>{var i,r;return w1(()=>{i=r,r=[],Al(()=>{n!==e(...r)&&(t(n,...r),i&&a4(e(...i),n)&&t(null,...i))})}),()=>{Ua(()=>{r&&a4(e(...r),n)&&t(null,...r)})}}),n}function IT(n=!1){const t=di,e=t.l.u;if(!e)return;let s=()=>Td(t.s);if(n){let i=0,r={};const o=Bp(()=>{let a=!1;const l=t.s;for(const u in l)l[u]!==r[u]&&(r[u]=l[u],a=!0);return a&&i++,i});s=()=>Tt(o)}e.b.length&&e7(()=>{l4(t,s),Fb(e.b)}),kp(()=>{const i=Al(()=>e.m.map(lD));return()=>{for(const r of i)typeof r=="function"&&r()}}),e.a.length&&kp(()=>{l4(t,s),Fb(e.a)})}function l4(n,t){if(n.l.s)for(const e of n.l.s)Tt(e);t()}function kr(n,t,e){n.$$events||={},n.$$events[t]||=[],n.$$events[t].push(e)}function Cr(n){for(var t in n)t in this&&(this[t]=n[t])}let Jg=!1;function P7(n){var t=Jg;try{return Jg=!1,[n(),Jg]}finally{Jg=t}}const L7={get(n,t){if(!n.exclude.includes(t))return Tt(n.version),t in n.special?n.special[t]():n.props[t]},set(n,t,e){if(!(t in n.special)){var s=_s;try{da(n.parent_effect),n.special[t]=An({get[t](){return n.props[t]}},t,DS)}finally{da(s)}}return n.special[t](e),Zk(n.version),!0},getOwnPropertyDescriptor(n,t){if(!n.exclude.includes(t)&&t in n.props)return{enumerable:!0,configurable:!0,value:n.props[t]}},deleteProperty(n,t){return n.exclude.includes(t)||(n.exclude.push(t),Zk(n.version)),!0},has(n,t){return n.exclude.includes(t)?!1:t in n.props},ownKeys(n){return Reflect.ownKeys(n.props).filter(t=>!n.exclude.includes(t))}};function c4(n,t){return new Proxy({props:n,exclude:t,special:{},version:Qc(0),parent_effect:_s},L7)}function An(n,t,e,s){var i=!Jd||(e&AD)!==0,r=(e&$D)!==0,o=(e&ND)!==0,a=s,l=!0,u=()=>(l&&(l=!1,a=o?Al(s):s),a),h;if(r){var f=ec in n||TS in n;h=$d(n,t)?.set??(f&&t in n?D=>n[t]=D:void 0)}var g,m=!1;r?[g,m]=P7(()=>n[t]):g=n[t],g===void 0&&s!==void 0&&(g=u(),h&&(i&&xD(),h(g)));var y;if(i?y=()=>{var D=n[t];return D===void 0?u():(l=!0,D)}:y=()=>{var D=n[t];return D!==void 0&&(a=void 0),D===void 0?a:D},i&&(e&DS)===0)return y;if(h){var k=n.$$legacy;return(function(D,R){return arguments.length>0?((!i||!R||k||m)&&h(R?y():D),D):y()})}var C=!1,S=((e&_D)!==0?Bp:y1)(()=>(C=!1,y()));r&&Tt(S);var $=_s;return(function(D,R){if(arguments.length>0){const V=R?Tt(S):i&&r?no(D):D;return Ve(S,V),C=!0,a!==void 0&&(a=V),D}return tu&&C||($.f&tc)!==0?S.v:Tt(S)})}function Xv(n,{root:t=null,rootMargin:e="0px 0px 0px 0px",threshold:s=0}={}){if(window&&"IntersectionObserver"in window){const i=new IntersectionObserver(r=>{r.forEach(o=>{if(o.isIntersecting){const a=o.target;a.dataset.src&&(a.src=a.dataset.src),a.dataset.srcset&&(a.srcset=a.dataset.srcset),i.unobserve(a)}})},{root:t,rootMargin:e,threshold:s});return i.observe(n),{destroy(){i&&i.unobserve(n)}}}}CD();let nc="https://statsboxd-worker.vercel.app/";const Mm="03209f50e8253cf416b595048aced2ff",ir="https://letterboxd.com/",B7=[["codirector","Co-Directors","co-director"],["assistantdirector","Asst. Directors","assistant-director"],["additionaldirecting","Add. Directing","additional-directing"],["producer","Producers","producer"],["executiveproducer","Exec. Producers","executive-producer"],["writer","Writers","writer"],["originalwriter","Original Writers","original-writer"],["casting","Casting","casting"],["editor","Editors","editor"],["cinematography","Cinematography","cinematography"],["cameraoperator","Camera Operators","camera-operator"],["lighting","Lighting","lighting"],["additionalphotography","Add. Photography","additional-photography"],["productiondesign","Production Design","production-design"],["artdirection","Art Direction","art-direction"],["setdecoration","Set Decoration","set-decoration"],["specialeffects","Special Effects","special-effects"],["visualeffects","Visual Effects","visual-effects"],["titledesign","Title Design","title-design"],["stunts","Stunts","stunts"],["choreography","Choreography","choreography"],["composer","Composers","composer"],["songs","Songs","songs"],["sound","Sounds","sound"],["costumes","Costume Design","costume-design"],["makeup","MakeUp","makeup"],["hairstyling","Hairstyling","hairstyling"],["studio","Studios","studio"]];function Xl(n,t){try{return n[parseInt(t)]}catch{return""}}function z7(n){try{return n.replace("-"," ")}catch{return""}}function cp(n,t=null){return t!==null&&t.length>0?t:n==null?"":n.toLowerCase().includes("persian")?"persianfarsi":n.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/:/g,"").replace(/,/g,"").replace(/\(/g,"").replace(/\)/g,"").replace(/'/g,"-").replace(/\s+/g,"-")}function ub(n){let t="";return n!=null&&(t="★".repeat(parseInt(n))),n>parseInt(n)&&(t=t+"½"),t}function Bo(n){return n?typeof n.values=="function"?Array.from(n.values()):n:[]}function hb(n){const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e=new Date(n),s=t[e.getUTCMonth()],i=e.getUTCDate();return`${s} ${i}`}function Ju(n,t,e){try{return n?n.length>=e?n.slice(t,e):n.slice(t,n.length):[]}catch{return n||[]}}function ET(n,t=165,e=110){try{if(n!=null){if(n.includes("a.ltrbxd"))try{return n.split("-0-").slice(0,2).join("-0-")+"-0-"+e+"-0-"+t+"-crop.jpg"}catch{return n.includes(".jpg")?n:n+".jpg"}return"//a.ltrbxd.com/resized/"+n+"-0-"+e+"-0-"+t+"-crop.jpg"}}catch{}return""}function u4(n){return!n||n.length===0?null:n[n.length-1]}function Qg(n){return n!=null?n.length:0}var W7=Re('<div class="headerbar"><a href="/"><img src="/images/logo.webp" alt="statsboxdlogo" class="logoup"/></a> <div class="navbar"><a href="//github.com/GiuDiMax/Statsboxd" target="_blank">Repo</a> <a href="//t.me/giudimax" target="_blank">Contact Me</a> <a href="//ko-fi.com/giudimax" target="_blank">Support me</a></div></div>');function _T(n,t){if(new.target)return wr({component:_T,...n});ar(t,!0);let e=An(t,"data",7);var s={get data(){return e()},set data(r){e(r),_n()},$set:Cr,$on:(r,o)=>kr(t,r,o)},i=W7();return Ie(n,i),lr(s)}var V7=Re("<a> <!></a>"),U7=Re('<div role="presentation"><button class="popupButton svelte-2i4ue0" data-show="popupYear" aria-label="Select Year"><div class="arrow-down"></div></button> <div id="popupYear"><div class="arrow-up"></div> <div class="listaAnni"><div><a>All time</a> <!></div></div></div></div>');function AT(n,t){if(new.target)return wr({component:AT,...n});ar(t,!0);let e=An(t,"data",7),s=An(t,"year",7),i=qn(!1);var r={get data(){return e()},set data(u){e(u),_n()},get year(){return s()},set year(u){s(u),_n()},$set:Cr,$on:(u,h)=>kr(t,u,h)},o=Mr(),a=Ss(o);{var l=u=>{var h=U7(),f=Ht(h);f.__click=()=>{Ve(i,!Tt(i))};var g=pe(f,2),m=pe(Ht(g),2),y=Ht(m),k=Ht(y),C=pe(k,2);Ps(C,17,()=>e().yearsStats,Fs,(S,$)=>{var D=V7(),R=Ht(D,!0),V=pe(R);{var E=q=>{var X=Ub("...");Ie(q,X)};En(V,q=>{Tt($)===new Date().getUTCFullYear()&&q(E)})}Lt(D),un(()=>{rs(D,"href",`?username=${e().username??""}&year=${Tt($)??""}`),nn(R,Tt($))}),Ie(S,D)}),Lt(y),Lt(m),Lt(g),Lt(h),un(()=>{Os(h,1,`popupYearContainer ${s()!==""?"popupYear2Container":""} `),Os(g,1,`popupYear ${Tt(i)?"":"hide"}`,"svelte-2i4ue0"),rs(k,"href",`?username=${e().username??""}`)}),Mi("mouseleave",h,()=>{Ve(i,!1)}),Ie(u,h)};En(a,u=>{e().hasOwnProperty("yearsStats")&&u(l)})}return Ie(n,o),lr(r)}C1(["click"]);var G7=Re('<div class="sepline"><span> </span> <div class="line"></div> <!></div>');function Rr(n,t){if(new.target)return wr({component:Rr,...n});ar(t,!0);let e=An(t,"title",7),s=An(t,"children",7,null);var i={get title(){return e()},set title(h){e(h),_n()},get children(){return s()},set children(h=null){s(h),_n()},$set:Cr,$on:(h,f)=>kr(t,h,f)},r=G7(),o=Ht(r),a=Ht(o,!0);Lt(o);var l=pe(o,4);{var u=h=>{var f=Mr(),g=Ss(f);yT(g,s),Ie(h,f)};En(l,h=>{s()&&h(u)})}return Lt(r),un(()=>nn(a,e())),Ie(n,r),lr(i)}var H7=Re('<a><div class="containertextimg"><span> </span></div> <img src="images/poster.jpg"/></a>');function vp(n,t){if(new.target)return wr({component:vp,...n});ar(t,!0);let e=An(t,"uri",7,""),s=An(t,"poster",7,""),i=An(t,"width",7,165),r=An(t,"height",7,110),o=An(t,"alt",7,""),a=An(t,"link",7,""),l=An(t,"className",7,""),u=qn("loading");function h(){Ve(u,"ok")}function f(D){Ve(u,"error"),D.target.src="images/poster.jpg"}let g=Ki(()=>a()||`${ir}film/${e()}`);var m={get uri(){return e()},set uri(D=""){e(D),_n()},get poster(){return s()},set poster(D=""){s(D),_n()},get width(){return i()},set width(D=165){i(D),_n()},get height(){return r()},set height(D=110){r(D),_n()},get alt(){return o()},set alt(D=""){o(D),_n()},get link(){return a()},set link(D=""){a(D),_n()},get className(){return l()},set className(D=""){l(D),_n()},$set:Cr,$on:(D,R)=>kr(t,D,R)},y=H7(),k=Ht(y),C=Ht(k),S=Ht(C,!0);Lt(C),Lt(k);var $=pe(k,2);return Hv($,D=>Xv?.(D)),Lt(y),un((D,R)=>{Os(y,1,`poster ${l()??""} ${Tt(u)==="ok"?"imgok":""} ${Tt(u)==="error"?"notok":""}`),rs(y,"href",Tt(g)),nn(S,D),rs($,"data-src",R),rs($,"alt",o())},[()=>z7(e()),()=>ET(s(),i(),r())]),Mi("load",$,h),Mi("error",$,f),Wp($),Ie(n,y),lr(m)}var j7=Re('<span class="suptitle"> </span>'),X7=Re("<div><!></div>"),q7=Re("<div><!> <!> <!></div>");function nh(n,t){if(new.target)return wr({component:nh,...n});ar(t,!0);let e=An(t,"uri",7,""),s=An(t,"poster",7,""),i=An(t,"link",7,""),r=An(t,"suptitle",7,""),o=An(t,"className",7,""),a=An(t,"children",7);var l={get uri(){return e()},set uri(k=""){e(k),_n()},get poster(){return s()},set poster(k=""){s(k),_n()},get link(){return i()},set link(k=""){i(k),_n()},get suptitle(){return r()},set suptitle(k=""){r(k),_n()},get className(){return o()},set className(k=""){o(k),_n()},get children(){return a()},set children(k){a(k),_n()},$set:Cr,$on:(k,C)=>kr(t,k,C)},u=q7(),h=Ht(u);{var f=k=>{var C=j7(),S=Ht(C,!0);Lt(C),un(()=>nn(S,r())),Ie(k,C)};En(h,k=>{r()&&k(f)})}var g=pe(h,2);vp(g,{get uri(){return e()},get poster(){return s()},get link(){return i()}});var m=pe(g,2);{var y=k=>{var C=X7(),S=Ht(C);yT(S,a),Lt(C),Ie(k,C)};En(m,k=>{a()&&k(y)})}return Lt(u),un(()=>Os(u,1,`singleFilm ${o()??""}`)),Ie(n,u),lr(l)}var K7=Re('<a class="sottotitolo"> </a>'),Y7=Re('<span class="sottotitolo"> </span>'),Z7=Re('<div class="container_people"><a><img class="holeperson"/></a> <a class="clickable"> </a> <!></div>');function $T(n,t){if(new.target)return wr({component:$T,...n});ar(t,!0);let e=An(t,"roleId",7),s=An(t,"element",7),i=An(t,"year",7),r=An(t,"yearnum",7),o=An(t,"username",7),a=An(t,"typeCode",7),l=An(t,"setTmdb",7),u=Ki(()=>`${ir}${o()}/films${i()!==""?"/diary/for/"+r().toString():""}/with/${e()}/${s().uri}`);var h={get roleId(){return e()},set roleId(D){e(D),_n()},get element(){return s()},set element(D){s(D),_n()},get year(){return i()},set year(D){i(D),_n()},get yearnum(){return r()},set yearnum(D){r(D),_n()},get username(){return o()},set username(D){o(D),_n()},get typeCode(){return a()},set typeCode(D){a(D),_n()},get setTmdb(){return l()},set setTmdb(D){l(D),_n()},$set:Cr,$on:(D,R)=>kr(t,D,R)},f=Z7(),g=Ht(f),m=Ht(g);Lt(g);var y=pe(g,2),k=Ht(y,!0);Lt(y);var C=pe(y,2);{var S=D=>{var R=K7(),V=Ht(R);Lt(R),un(()=>{rs(R,"href",Tt(u)),nn(V,`${s().sum??""} films`)}),Ie(D,R)},$=D=>{var R=Y7(),V=Ht(R);Lt(R),un(()=>nn(V,`★ ${s().avg??""}`)),Ie(D,R)};En(C,D=>{a()==="w"?D(S):D($,!1)})}return Lt(f),un(()=>{rs(g,"href",Tt(u)),rs(m,"src",`images/${e()??""}.jpg`),rs(m,"data-tmdb",s().tmdb),rs(m,"alt",s().uri),rs(y,"href",Tt(u)),nn(k,s().name||s()._id)}),Mi("load",m,D=>l()(D.target)),Wp(m),Ie(n,f),lr(h)}var tm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function J7(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var t=n.default;if(typeof t=="function"){var e=function s(){var i=!1;try{i=this instanceof s}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var i=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:function(){return n[s]}})}),e}var xm={exports:{}},Q7=xm.exports,h4;function tR(){return h4||(h4=1,(function(n,t){(function(e,s){e._Highcharts=s(),n.exports=e._Highcharts})("u"<typeof window?Q7:window,()=>(()=>{let e,s,i,r,o,a;var l,u,h,f,g,m,y,k,C,S,$,D,R,V,E,q,X,B,U,K,Y,ct,j,ht,It,yt,Ot,Ct,Gt={};Gt.d=(N,c)=>{for(var d in c)Gt.o(c,d)&&!Gt.o(N,d)&&Object.defineProperty(N,d,{enumerable:!0,get:c[d]})},Gt.o=(N,c)=>Object.prototype.hasOwnProperty.call(N,c);var vt={};Gt.d(vt,{default:()=>eD}),(l=$||($={})).SVG_NS="http://www.w3.org/2000/svg",l.product="Highcharts",l.version="12.5.0",l.win="u">typeof window?window:{},l.doc=l.win.document,l.svg=!!l.doc?.createElementNS?.(l.SVG_NS,"svg")?.createSVGRect,l.pageLang=l.doc?.documentElement?.closest("[lang]")?.lang,l.userAgent=l.win.navigator?.userAgent||"",l.isChrome=l.win.chrome,l.isFirefox=l.userAgent.indexOf("Firefox")!==-1,l.isMS=/(edge|msie|trident)/i.test(l.userAgent)&&!l.win.opera,l.isSafari=!l.isChrome&&l.userAgent.indexOf("Safari")!==-1,l.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(l.userAgent),l.isWebKit=l.userAgent.indexOf("AppleWebKit")!==-1,l.deg2rad=2*Math.PI/360,l.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],l.noop=function(){},l.supportsPassiveEvents=(function(){let N=!1;if(!l.isMS){let c=Object.defineProperty({},"passive",{get:function(){N=!0}});l.win.addEventListener&&l.win.removeEventListener&&(l.win.addEventListener("testPassive",l.noop,c),l.win.removeEventListener("testPassive",l.noop,c))}return N})(),l.charts=[],l.composed=[],l.dateFormats={},l.seriesTypes={},l.symbolSizes={},l.chartCount=0;let at=$,{charts:Pt,doc:jt,win:Ut}=at;function me(N,c,d,p){let x=c?"Highcharts error":"Highcharts warning";N===32&&(N=`${x}: Deprecated member`);let v=Le(N),w=v?`${x} #${N}: www.highcharts.com/errors/${N}/`:N.toString();if(p!==void 0){let T="";v&&(w+="?"),be(p,function(A,M){T+=`
 - ${M}: ${A}`,v&&(w+=encodeURI(M)+"="+encodeURI(A))}),w+=T}$e(at,"displayError",{chart:d,code:N,message:w,params:p},function(){if(c)throw Error(w);Ut.console&&me.messages.indexOf(w)===-1&&console.warn(w)}),me.messages.push(w)}function Ee(N,c){return parseInt(N,c||10)}function le(N){return typeof N=="string"}function ce(N){let c=Object.prototype.toString.call(N);return c==="[object Array]"||c==="[object Array Iterator]"}function De(N,c){return!!N&&typeof N=="object"&&(!c||!ce(N))}function ae(N){return De(N)&&typeof N.nodeType=="number"}function Oe(N){let c=N?.constructor;return!!(De(N,!0)&&!ae(N)&&c?.name&&c.name!=="Object")}function Le(N){return typeof N=="number"&&!isNaN(N)&&N<1/0&&N>-1/0}function J(N){return N!=null}function Mt(N,c,d){let p,x=le(c)&&!J(d),v=(w,T)=>{J(w)?N.setAttribute(T,w):x?(p=N.getAttribute(T))||T!=="class"||(p=N.getAttribute(T+"Name")):N.removeAttribute(T)};return le(c)?v(d,c):be(c,v),p}function Ft(N){return ce(N)?N:[N]}function St(N,c){let d;for(d in N||(N={}),c)N[d]=c[d];return N}function ft(){let N=arguments,c=N.length;for(let d=0;d<c;d++){let p=N[d];if(p!=null)return p}}function zt(N,c){St(N.style,c)}function Et(N){return Math.pow(10,Math.floor(Math.log(N)/Math.LN10))}function de(N,c){return N>1e14?N:parseFloat(N.toPrecision(c||14))}(me||(me={})).messages=[],Math.easeInOutSine=function(N){return-.5*(Math.cos(Math.PI*N)-1)};let Xt=Array.prototype.find?function(N,c){return N.find(c)}:function(N,c){let d,p=N.length;for(d=0;d<p;d++)if(c(N[d],d))return N[d]};function be(N,c,d){for(let p in N)Object.hasOwnProperty.call(N,p)&&c.call(d||N[p],N[p],p,N)}function Te(N,c,d){function p(w,T){let A=N.removeEventListener;A&&A.call(N,w,T,!1)}function x(w){let T,A;N.nodeName&&(c?(T={})[c]=!0:T=w,be(T,function(M,z){if(w[z])for(A=w[z].length;A--;)p(z,w[z][A].fn)}))}let v=typeof N=="function"&&N.prototype||N;if(Object.hasOwnProperty.call(v,"hcEvents")){let w=v.hcEvents;if(c){let T=w[c]||[];d?(w[c]=T.filter(function(A){return d!==A.fn}),p(c,d)):(x(w),w[c]=[])}else x(w),delete v.hcEvents}}function $e(N,c,d,p){if(d=d||{},jt?.createEvent&&(N.dispatchEvent||N.fireEvent&&N!==at)){let x=jt.createEvent("Events");x.initEvent(c,!0,!0),d=St(x,d),N.dispatchEvent?N.dispatchEvent(d):N.fireEvent(c,d)}else if(N.hcEvents){d.target||St(d,{preventDefault:function(){d.defaultPrevented=!0},target:N,type:c});let x=[],v=N,w=!1;for(;v.hcEvents;)Object.hasOwnProperty.call(v,"hcEvents")&&v.hcEvents[c]&&(x.length&&(w=!0),x.unshift.apply(x,v.hcEvents[c])),v=Object.getPrototypeOf(v);w&&x.sort((T,A)=>T.order-A.order),x.forEach(T=>{T.fn.call(N,d)===!1&&d.preventDefault()})}p&&!d.defaultPrevented&&p.call(N,d)}let Pe=(i=Math.random().toString(36).substring(2,9)+"-",r=0,function(){return"highcharts-"+(e?"":i)+r++});Ut.jQuery&&(Ut.jQuery.fn.highcharts=function(){let N=[].slice.call(arguments);if(this[0])return N[0]?(new at[le(N[0])?N.shift():"Chart"](this[0],N[0],N[1]),this):Pt[Mt(this[0],"data-highcharts-chart")]});let Ae={addEvent:function(N,c,d,p={}){let x=typeof N=="function"&&N.prototype||N;Object.hasOwnProperty.call(x,"hcEvents")||(x.hcEvents={});let v=x.hcEvents;at.Point&&N instanceof at.Point&&N.series&&N.series.chart&&(N.series.chart.runTrackerClick=!0);let w=N.addEventListener;w&&w.call(N,c,d,!!at.supportsPassiveEvents&&{passive:p.passive===void 0?c.indexOf("touch")!==-1:p.passive,capture:!1}),v[c]||(v[c]=[]);let T={fn:d,order:typeof p.order=="number"?p.order:1/0};return v[c].push(T),v[c].sort((A,M)=>A.order-M.order),function(){Te(N,c,d)}},arrayMax:function(N){let c=N.length,d=N[0];for(;c--;)N[c]>d&&(d=N[c]);return d},arrayMin:function(N){let c=N.length,d=N[0];for(;c--;)N[c]<d&&(d=N[c]);return d},attr:Mt,clamp:function(N,c,d){return N>c?N<d?N:d:c},clearTimeout:function(N){J(N)&&clearTimeout(N)},correctFloat:de,createElement:function(N,c,d,p,x){let v=jt.createElement(N);return c&&St(v,c),x&&zt(v,{padding:"0",border:"none",margin:"0"}),d&&zt(v,d),p&&p.appendChild(v),v},crisp:function(N,c=0,d){let p=c%2/2,x=d?-1:1;return(Math.round(N*x-p)+p)*x},css:zt,defined:J,destroyObjectProperties:function(N,c,d){be(N,function(p,x){p!==c&&p?.destroy&&p.destroy(),(p?.destroy||!d)&&delete N[x]})},diffObjects:function(N,c,d,p){let x={};return(function v(w,T,A,M){let z=d?T:w;be(w,function(P,G){if(!M&&p&&p.indexOf(G)>-1&&T[G]){P=Ft(P),A[G]=[];for(let Z=0;Z<Math.max(P.length,T[G].length);Z++)T[G][Z]&&(P[Z]===void 0?A[G][Z]=T[G][Z]:(A[G][Z]={},v(P[Z],T[G][Z],A[G][Z],M+1)))}else De(P,!0)&&!P.nodeType?(A[G]=ce(P)?[]:{},v(P,T[G]||{},A[G],M+1),Object.keys(A[G]).length===0&&(G!=="colorAxis"||M!==0)&&delete A[G]):(w[G]!==T[G]||G in w&&!(G in T))&&G!=="__proto__"&&G!=="constructor"&&(A[G]=z[G])})})(N,c,x,0),x},discardElement:function(N){N?.parentElement?.removeChild(N)},erase:function(N,c){let d=N.length;for(;d--;)if(N[d]===c){N.splice(d,1);break}},error:me,extend:St,extendClass:function(N,c){let d=function(){};return d.prototype=new N,St(d.prototype,c),d},find:Xt,fireEvent:$e,getAlignFactor:(N="")=>({center:.5,right:1,middle:.5,bottom:1})[N]||0,getClosestDistance:function(N,c){let d,p,x,v=!c;return N.forEach(w=>{if(w.length>1)for(x=w.length-1;x>0;x--)(p=w[x]-w[x-1])<0&&!v?(c?.(),c=void 0):p&&(d===void 0||p<d)&&(d=p)}),d},getMagnitude:Et,getNestedProperty:function(N,c){let d=N.split(".");for(;d.length&&J(c);){let p=d.shift();if(p===void 0||p==="__proto__")return;if(p==="this"){let v;return De(c)&&(v=c["@this"]),v??c}let x=c[p.replace(/[\\'"]/g,"")];if(!J(x)||typeof x=="function"||typeof x.nodeType=="number"||x===Ut)return;c=x}return c},getStyle:function N(c,d,p){let x;if(d==="width"){let w=Math.min(c.offsetWidth,c.scrollWidth),T=c.getBoundingClientRect?.().width;return T<w&&T>=w-1&&(w=Math.floor(T)),Math.max(0,w-(N(c,"padding-left",!0)||0)-(N(c,"padding-right",!0)||0))}if(d==="height")return Math.max(0,Math.min(c.offsetHeight,c.scrollHeight)-(N(c,"padding-top",!0)||0)-(N(c,"padding-bottom",!0)||0));let v=Ut.getComputedStyle(c,void 0);return v&&(x=v.getPropertyValue(d),ft(p,d!=="opacity")&&(x=Ee(x))),x},insertItem:function(N,c){let d,p=N.options.index,x=c.length;for(d=N.options.isInternal?x:0;d<x+1;d++)if(!c[d]||Le(p)&&p<ft(c[d].options.index,c[d]._i)||c[d].options.isInternal){c.splice(d,0,N);break}return d},isArray:ce,isClass:Oe,isDOMElement:ae,isFunction:function(N){return typeof N=="function"},isNumber:Le,isObject:De,isString:le,merge:function(N,...c){let d,p=[N,...c],x={},v=function(T,A){return typeof T!="object"&&(T={}),be(A,function(M,z){z!=="__proto__"&&z!=="constructor"&&(!De(M,!0)||Oe(M)||ae(M)?T[z]=A[z]:T[z]=v(T[z]||{},M))}),T};N===!0&&(x=p[1],p=Array.prototype.slice.call(p,2));let w=p.length;for(d=0;d<w;d++)x=v(x,p[d]);return x},normalizeTickInterval:function(N,c,d,p,x){let v,w=N;d=ft(d,Et(N));let T=N/d;for(!c&&(c=x?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],p===!1&&(d===1?c=c.filter(function(A){return A%1==0}):d<=.1&&(c=[1/d]))),v=0;v<c.length&&(w=c[v],(!x||!(w*d>=N))&&(x||!(T<=(c[v]+(c[v+1]||c[v]))/2)));v++);return de(w*d,-Math.round(Math.log(.001)/Math.LN10))},objectEach:be,offset:function(N){let c=jt.documentElement,d=N.parentElement||N.parentNode?N.getBoundingClientRect():{top:0,left:0,width:0,height:0};return{top:d.top+(Ut.pageYOffset||c.scrollTop)-(c.clientTop||0),left:d.left+(Ut.pageXOffset||c.scrollLeft)-(c.clientLeft||0),width:d.width,height:d.height}},pad:function(N,c,d){return Array((c||2)+1-String(N).replace("-","").length).join(d||"0")+N},pick:ft,pInt:Ee,pushUnique:function(N,c){return 0>N.indexOf(c)&&!!N.push(c)},relativeLength:function(N,c,d){return/%$/.test(N)?c*parseFloat(N)/100+(d||0):parseFloat(N)},removeEvent:Te,replaceNested:function(N,...c){let d,p;do for(p of(d=N,c))N=N.replace(p[0],p[1]);while(N!==d);return N},splat:Ft,stableSort:function(N,c){let d,p,x=N.length;for(p=0;p<x;p++)N[p].safeI=p;for(N.sort(function(v,w){return(d=c(v,w))===0?v.safeI-w.safeI:d}),p=0;p<x;p++)delete N[p].safeI},syncTimeout:function(N,c,d){return c>0?setTimeout(N,c,d):(N.call(0,d),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},ucfirst:function(N){return le(N)?N.substring(0,1).toUpperCase()+N.substring(1):String(N)},uniqueKey:Pe,useSerialIds:function(N){return e=ft(N,e)},wrap:function(N,c,d){let p=N[c];N[c]=function(){let x=arguments,v=this;return d.apply(this,[function(){return p.apply(v,arguments.length?arguments:x)}].concat([].slice.call(arguments)))}}},{pageLang:vn,win:vs}=at,{defined:ei,error:ps,extend:Ws,isNumber:ns,isObject:bi,isString:Pi,merge:vi,objectEach:Ur,pad:Me,splat:ze,timeUnits:Ue,ucfirst:Ge}=Ae,Ze=at.isSafari&&vs.Intl&&!vs.Intl.DateTimeFormat.prototype.formatRange,tn=class{constructor(N,c){this.options={timezone:"UTC"},this.variableTimezone=!1,this.Date=vs.Date,this.update(N),this.lang=c}update(N={}){this.dTLCache={},this.options=N=vi(!0,this.options,N);let{timezoneOffset:c,useUTC:d,locale:p}=N;this.Date=N.Date||vs.Date||Date;let x=N.timezone;ei(d)&&(x=d?"UTC":void 0),c&&c%60==0&&(x="Etc/GMT"+(c>0?"+":"")+c/60),this.variableTimezone=x!=="UTC"&&x?.indexOf("Etc/GMT")!==0,this.timezone=x,this.lang&&p&&(this.lang.locale=p),["months","shortMonths","weekdays","shortWeekdays"].forEach(v=>{let w=/months/i.test(v),T=/short/.test(v),A={timeZone:"UTC"};A[w?"month":"weekday"]=T?"short":"long",this[v]=(w?[0,1,2,3,4,5,6,7,8,9,10,11]:[3,4,5,6,7,8,9]).map(M=>this.dateFormat(A,(w?31:1)*24*36e5*M))})}toParts(N){let[c,d,p,x,v,w,T]=this.dateTimeFormat({weekday:"narrow",day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},N,"es").split(/(?:, | |\/|:)/g);return[x,p-1,d,v,w,T,Math.floor(Number(N)||0)%1e3,"DLMXJVS".indexOf(c)].map(Number)}dateTimeFormat(N,c,d=this.options.locale||vn){let p=JSON.stringify(N)+d;Pi(N)&&(N=this.str2dtf(N));let x=this.dTLCache[p];if(!x){N.timeZone??(N.timeZone=this.timezone);try{x=new Intl.DateTimeFormat(d,N)}catch(v){/Invalid time zone/i.test(v.message)?(ps(34),N.timeZone="UTC",x=new Intl.DateTimeFormat(d,N)):ps(v.message,!1)}}return this.dTLCache[p]=x,x?.format(c)||""}str2dtf(N,c={}){let d={L:{fractionalSecondDigits:3},S:{second:"2-digit"},M:{minute:"numeric"},H:{hour:"2-digit"},k:{hour:"numeric"},E:{weekday:"narrow"},a:{weekday:"short"},A:{weekday:"long"},d:{day:"2-digit"},e:{day:"numeric"},b:{month:"short"},B:{month:"long"},m:{month:"2-digit"},o:{month:"numeric"},y:{year:"2-digit"},Y:{year:"numeric"}};return Object.keys(d).forEach(p=>{N.indexOf(p)!==-1&&Ws(c,d[p])}),c}makeTime(N,c,d=1,p=0,x,v,w){let T=this.Date.UTC(N,c,d,p,x||0,v||0,w||0);if(this.timezone!=="UTC"){let A=this.getTimezoneOffset(T);if(T+=A,[2,3,8,9,10,11].indexOf(c)!==-1&&(p<5||p>20)){let M=this.getTimezoneOffset(T);A!==M?T+=M-A:A-36e5!==this.getTimezoneOffset(T-36e5)||Ze||(T-=36e5)}}return T}parse(N){if(!Pi(N))return N??void 0;let c=(N=N.replace(/\//g,"-").replace(/(GMT|UTC)/,"")).indexOf("Z")>-1||/([+-][0-9]{2}):?[0-9]{2}$/.test(N),d=/^[0-9]{4}-[0-9]{2}(-[0-9]{2}|)$/.test(N);c||d||(N+="Z");let p=Date.parse(N);if(ns(p))return p+(!c||d?this.getTimezoneOffset(p):0)}getTimezoneOffset(N){if(this.timezone!=="UTC"){let[c,d,p,x,v=0]=this.dateTimeFormat({timeZoneName:"shortOffset"},N,"en").split(/(GMT|:)/).map(Number),w=-(60*(p+v/60)*6e4);if(ns(w))return w}return 0}dateFormat(N,c,d){let p=this.lang;if(!ei(c)||isNaN(c))return p?.invalidDate||"";if(Pi(N=N??"%Y-%m-%d %H:%M:%S")){let x,v=/%\[([a-zA-Z]+)\]/g;for(;x=v.exec(N);)N=N.replace(x[0],this.dateTimeFormat(x[1],c,p?.locale))}if(Pi(N)&&N.indexOf("%")!==-1){let x=this,[v,w,T,A,M,z,P,G]=this.toParts(c),Z=p?.weekdays||this.weekdays,st=p?.shortWeekdays||this.shortWeekdays,rt=p?.months||this.months,nt=p?.shortMonths||this.shortMonths;Ur(Ws({a:st?st[G]:Z[G].substr(0,3),A:Z[G],d:Me(T),e:Me(T,2," "),w:G,v:p?.weekFrom??"",b:nt[w],B:rt[w],m:Me(w+1),o:w+1,y:v.toString().substr(2,2),Y:v,H:Me(A),k:A,I:Me(A%12||12),l:A%12||12,M:Me(M),p:A<12?"AM":"PM",P:A<12?"am":"pm",S:Me(z),L:Me(P,3)},at.dateFormats),function(it,gt){if(Pi(N))for(;N.indexOf("%"+gt)!==-1;)N=N.replace("%"+gt,typeof it=="function"?it.call(x,c):it)})}else if(bi(N)){let x=(this.getTimezoneOffset(c)||0)/36e5,v=this.timezone||"Etc/GMT"+(x>=0?"+":"")+x,{prefix:w="",suffix:T=""}=N;N=w+this.dateTimeFormat(Ws({timeZone:v},N),c)+T}return d?Ge(N):N}resolveDTLFormat(N){return bi(N,!0)?bi(N,!0)&&N.main===void 0?{main:N}:N:{main:(N=ze(N))[0],from:N[1],to:N[2]}}getDateFormat(N,c,d,p){let x=this.dateFormat("%m-%d %H:%M:%S.%L",c),v="01-01 00:00:00.000",w={millisecond:15,second:12,minute:9,hour:6,day:3},T="millisecond",A=T;for(T in Ue){if(N&&N===Ue.week&&+this.dateFormat("%w",c)===d&&x.substr(6)===v.substr(6)){T="week";break}if(N&&Ue[T]>N){T=A;break}if(w[T]&&x.substr(w[T])!==v.substr(w[T]))break;T!=="week"&&(A=T)}return this.resolveDTLFormat(p[T]).main}},{defined:an,extend:ln,timeUnits:We}=Ae,fn=class extends tn{getTimeTicks(N,c,d,p){let x=this,v=[],w={},{count:T=1,unitRange:A}=N,[M,z,P,G,Z,st]=x.toParts(c),rt=(c||0)%1e3,nt;if(p??(p=1),an(c)){if(rt=A>=We.second?0:T*Math.floor(rt/T),A>=We.second&&(st=A>=We.minute?0:T*Math.floor(st/T)),A>=We.minute&&(Z=A>=We.hour?0:T*Math.floor(Z/T)),A>=We.hour&&(G=A>=We.day?0:T*Math.floor(G/T)),A>=We.day&&(P=A>=We.month?1:Math.max(1,T*Math.floor(P/T))),A>=We.month&&(z=A>=We.year?0:T*Math.floor(z/T)),A>=We.year&&(M-=M%T),A===We.week){T&&(c=x.makeTime(M,z,P,G,Z,st,rt));let _t=this.dateTimeFormat({timeZone:this.timezone,weekday:"narrow"},c,"es"),Wt="DLMXJVS".indexOf(_t);P+=-Wt+p+(Wt<p?-7:0)}c=x.makeTime(M,z,P,G,Z,st,rt),x.variableTimezone&&an(d)&&(nt=d-c>4*We.month||x.getTimezoneOffset(c)!==x.getTimezoneOffset(d));let it=c,gt=1;for(;it<d;)v.push(it),A===We.year?it=x.makeTime(M+gt*T,0):A===We.month?it=x.makeTime(M,z+gt*T):nt&&(A===We.day||A===We.week)?it=x.makeTime(M,z,P+gt*T*(A===We.day?1:7)):nt&&A===We.hour&&T>1?it=x.makeTime(M,z,P,G+gt*T):it+=A*T,gt++;v.push(it),A<=We.hour&&v.length<1e4&&v.forEach(_t=>{_t%18e5==0&&x.dateFormat("%H%M%S%L",_t)==="000000000"&&(w[_t]="day")})}return v.info=ln(N,{higherRanks:w,totalRange:A*T}),v}},{isTouchDevice:Yn}=at,{fireEvent:On,merge:xn}=Ae,hn={colors:["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{weekFrom:"week from",chartTitle:"Chart title",locale:void 0,loading:"Loading...",months:void 0,seriesName:"Series {add index 1}",shortMonths:void 0,weekdays:void 0,numericSymbols:["k","M","G","T","P","E"],pieSliceName:"Slice",resetZoom:"Reset zoom",yAxisTitle:"Values",resetZoomTitle:"Reset zoom level 1:1"},global:{buttonTheme:{fill:"#f7f7f7",padding:8,r:2,stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontSize:"0.8em",fontWeight:"normal"},states:{hover:{fill:"#e6e6e6"},select:{fill:"#e6e9ff",style:{color:"#000000",fontWeight:"bold"}},disabled:{style:{color:"#cccccc"}}}}},time:{Date:void 0,timezone:"UTC",timezoneOffset:0,useUTC:void 0},chart:{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{},position:{}},reflow:!0,type:"line",zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"},title:{style:{color:"#333333",fontWeight:"bold"},text:"Chart title",margin:15,minScale:.67},subtitle:{style:{color:"#666666",fontSize:"0.8em"},text:""},caption:{margin:15,style:{color:"#666666",fontSize:"0.8em"},text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",events:{},layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{color:"#333333",fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:{duration:300,easing:N=>Math.sqrt(1-Math.pow(N-1,2))},borderRadius:3,dateTimeLabelFormats:{millisecond:"%[AebHMSL]",second:"%[AebHMS]",minute:"%[AebHM]",hour:"%[AebHM]",day:"%[AebY]",week:"%v %[AebY]",month:"%[BY]",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,position:{x:0,y:3},shared:!1,snap:Yn?25:10,headerFormat:'<span style="font-size: 0.8em">{ucfirst point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}},Nn=new fn(hn.time,hn.lang),Xe={defaultOptions:hn,defaultTime:Nn,getOptions:function(){return hn},setOptions:function(N){return On(at,"setOptions",{options:N}),xn(!0,hn,N),N.time&&Nn.update(hn.time),N.lang&&"locale"in N.lang&&Nn.update({locale:N.lang.locale}),N.lang?.chartTitle&&(hn.title={...hn.title,text:N.lang.chartTitle}),hn}},{win:on}=at,{isNumber:Sn,isString:jn,merge:zn,pInt:gn,defined:Zn}=Ae,as=(N,c,d)=>`color-mix(in srgb,${N},${c} ${100*d}%)`,ls=N=>jn(N)&&!!N&&N!=="none";class In{static parse(c){return c?new In(c):In.None}constructor(c){let d,p,x,v;this.rgba=[NaN,NaN,NaN,NaN],this.input=c;const w=at.Color;if(w&&w!==In)return new w(c);if(typeof c=="object"&&c.stops!==void 0)this.stops=c.stops.map(T=>new In(T[1]));else if(typeof c=="string")for(this.input=c=In.names[c.toLowerCase()]||c,x=In.parsers.length;x--&&!p;)(d=(v=In.parsers[x]).regex.exec(c))&&(p=v.parse(d));p&&(this.rgba=p)}get(c){let d=this.input,p=this.rgba;if(this.output)return this.output;if(typeof d=="object"&&this.stops!==void 0){let x=zn(d);return x.stops=[].slice.call(x.stops),this.stops.forEach((v,w)=>{x.stops[w]=[x.stops[w][0],v.get(c)]}),x}return p&&Sn(p[0])?c!=="rgb"&&(c||p[3]!==1)?c==="a"?`${p[3]}`:"rgba("+p.join(",")+")":"rgb("+p[0]+","+p[1]+","+p[2]+")":d}brighten(c){let d=this.rgba;if(this.stops)this.stops.forEach(function(p){p.brighten(c)});else if(Sn(c)&&c!==0)if(Sn(d[0]))for(let p=0;p<3;p++)d[p]+=gn(255*c),d[p]<0&&(d[p]=0),d[p]>255&&(d[p]=255);else In.useColorMix&&ls(this.input)&&(this.output=as(this.input,c>0?"white":"black",Math.abs(c)));return this}setOpacity(c){return this.rgba[3]=c,this}tweenTo(c,d){let p=this.rgba,x=c.rgba;if(!Sn(p[0])||!Sn(x[0]))return In.useColorMix&&ls(this.input)&&ls(c.input)&&d<.99?as(this.input,c.input,d):c.input||"none";let v=x[3]!==1||p[3]!==1,w=(A,M)=>A+(p[M]-A)*(1-d),T=x.slice(0,3).map(w).map(Math.round);return v&&T.push(w(x[3],3)),(v?"rgba(":"rgb(")+T.join(",")+")"}}In.names={white:"#ffffff",black:"#000000"},In.parsers=[{regex:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?(?:\.\d+)?)\s*\)/,parse:function(N){return[gn(N[1]),gn(N[2]),gn(N[3]),parseFloat(N[4],10)]}},{regex:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/,parse:function(N){return[gn(N[1]),gn(N[2]),gn(N[3]),1]}},{regex:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?$/i,parse:function(N){return[gn(N[1]+N[1],16),gn(N[2]+N[2],16),gn(N[3]+N[3],16),Zn(N[4])?gn(N[4]+N[4],16)/255:1]}},{regex:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?$/i,parse:function(N){return[gn(N[1],16),gn(N[2],16),gn(N[3],16),Zn(N[4])?gn(N[4],16)/255:1]}}],In.useColorMix=on.CSS?.supports("color","color-mix(in srgb,red,blue 9%)"),In.None=new In("");let{parse:gs}=In,{win:pt}=at,{isNumber:kt,objectEach:mt}=Ae;class ut{constructor(c,d,p){this.pos=NaN,this.options=d,this.elem=c,this.prop=p}dSetter(){let c=this.paths,d=c?.[0],p=c?.[1],x=this.now||0,v=[];if(x!==1&&d&&p)if(d.length===p.length&&x<1)for(let w=0;w<p.length;w++){let T=d[w],A=p[w],M=[];for(let z=0;z<A.length;z++){let P=T[z],G=A[z];kt(P)&&kt(G)&&(A[0]!=="A"||z!==4&&z!==5)?M[z]=P+x*(G-P):M[z]=G}v.push(M)}else v=p;else v=this.toD||[];this.elem.attr("d",v,void 0,!0)}update(){let c=this.elem,d=this.prop,p=this.now,x=this.options.step;this[d+"Setter"]?this[d+"Setter"]():c.attr?c.element&&c.attr(d,p,null,!0):c.style[d]=p+this.unit,x&&x.call(c,p,this)}run(c,d,p){let x=this,v=x.options,w=function(M){return!w.stopped&&x.step(M)},T=pt.requestAnimationFrame||function(M){setTimeout(M,13)},A=function(){for(let M=0;M<ut.timers.length;M++)ut.timers[M]()||ut.timers.splice(M--,1);ut.timers.length&&T(A)};c!==d||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=c,this.end=d,this.unit=p,this.now=this.start,this.pos=0,w.elem=this.elem,w.prop=this.prop,w()&&ut.timers.push(w)===1&&T(A)):(delete v.curAnim[this.prop],v.complete&&Object.keys(v.curAnim).length===0&&v.complete.call(this.elem))}step(c){let d,p,x=+new Date,v=this.options,w=this.elem,T=v.complete,A=v.duration,M=v.curAnim;return w.attr&&!w.element?d=!1:c||x>=A+this.startTime?(this.now=this.end,this.pos=1,this.update(),M[this.prop]=!0,p=!0,mt(M,function(z){z!==!0&&(p=!1)}),p&&T&&T.call(w),d=!1):(this.pos=v.easing((x-this.startTime)/A),this.now=this.start+(this.end-this.start)*this.pos,this.update(),d=!0),d}initPath(c,d,p){let x=c.startX,v=c.endX,w=p.slice(),T=c.isArea,A=T?2:1,M=d&&p.length>d.length&&p.hasStackedCliffs,z,P,G,Z,st=d?.slice();if(!st||M)return[w,w];function rt(it,gt){for(;it.length<P;){let _t=it[0],Wt=gt[P-it.length];if(Wt&&_t[0]==="M"&&(Wt[0]==="C"?it[0]=["C",_t[1],_t[2],_t[1],_t[2],_t[1],_t[2]]:it[0]=["L",_t[1],_t[2]]),it.unshift(_t),T){let Vt=it.pop();it.push(it[it.length-1],Vt)}}}function nt(it){for(;it.length<P;){let gt=it[Math.floor(it.length/A)-1].slice();if(gt[0]==="C"&&(gt[1]=gt[5],gt[2]=gt[6]),T){let _t=it[Math.floor(it.length/A)].slice();it.splice(it.length/2,0,gt,_t)}else it.push(gt)}}if(x&&v&&v.length){for(G=0;G<x.length;G++)if(x[G]===v[0]){z=G;break}else if(x[0]===v[v.length-x.length+G]){z=G,Z=!0;break}else if(x[x.length-1]===v[v.length-x.length+G]){z=x.length-G;break}z===void 0&&(st=[])}return st.length&&kt(z)&&(P=w.length+z*A,Z?(rt(st,w),nt(w)):(rt(w,st),nt(st))),[st,w]}fillSetter(){ut.prototype.strokeSetter.apply(this,arguments)}strokeSetter(){this.elem.attr(this.prop,gs(this.start).tweenTo(gs(this.end),this.pos),void 0,!0)}}ut.timers=[];let{defined:bt,getStyle:At,isArray:re,isNumber:_e,isObject:He,merge:Fn,objectEach:bn,pick:Ke}=Ae;function Kn(N){return He(N)?Fn({duration:500,defer:0},N):{duration:500*!!N,defer:0}}function ss(N,c){let d=ut.timers.length;for(;d--;)ut.timers[d].elem!==N||c&&c!==ut.timers[d].prop||(ut.timers[d].stopped=!0)}let Un={animate:function(N,c,d){let p,x="",v,w,T;He(d)||(T=arguments,d={duration:T[2],easing:T[3],complete:T[4]}),_e(d.duration)||(d.duration=400),d.easing=typeof d.easing=="function"?d.easing:Math[d.easing]||Math.easeInOutSine,d.curAnim=Fn(c),bn(c,function(A,M){ss(N,M),w=new ut(N,d,M),v=void 0,M==="d"&&re(c.d)?(w.paths=w.initPath(N,N.pathArray,c.d),w.toD=c.d,p=0,v=1):N.attr?p=N.attr(M):(p=parseFloat(At(N,M))||0,M!=="opacity"&&(x="px")),v||(v=A),typeof v=="string"&&v.match("px")&&(v=v.replace(/px/g,"")),w.run(p,v,x)})},animObject:Kn,getDeferredAnimation:function(N,c,d){let p=Kn(c),x=d?[d]:N.series,v=0,w=0;return x.forEach(T=>{let A=Kn(T.options.animation);v=He(c)&&bt(c.defer)?p.defer:Math.max(v,A.duration+A.defer),w=Math.min(p.duration,A.duration)}),N.renderer.forExport&&(v=0),{defer:Math.max(0,v-w),duration:Math.min(v,w)}},setAnimation:function(N,c){c.renderer.globalAnimation=Ke(N,c.options.chart.animation,!0)},stop:ss},{SVG_NS:pi,win:qs}=at,{attr:kn,createElement:li,css:yf,error:jh,isFunction:wf,isString:bu,objectEach:vu,splat:Dl}=Ae,{trustedTypes:Gr}=qs,ba=Gr&&wf(Gr.createPolicy)&&Gr.createPolicy("highcharts",{createHTML:N=>N}),kf=ba?ba.createHTML(""):"";class Vs{static filterUserAttributes(c){return vu(c,(d,p)=>{let x=!0;Vs.allowedAttributes.indexOf(p)===-1&&(x=!1),["background","dynsrc","href","lowsrc","src"].indexOf(p)!==-1&&(x=bu(d)&&Vs.allowedReferences.some(v=>d.indexOf(v)===0)),x||(jh(33,!1,void 0,{"Invalid attribute in config":`${p}`}),delete c[p]),bu(d)&&c[p]&&(c[p]=d.replace(/</g,"&lt;"))}),c}static parseStyle(c){return c.split(";").reduce((d,p)=>{let x=p.split(":").map(w=>w.trim()),v=x.shift();return v&&x.length&&(d[v.replace(/-([a-z])/g,w=>w[1].toUpperCase())]=x.join(":")),d},{})}static setElementHTML(c,d){c.innerHTML=Vs.emptyHTML,d&&new Vs(d).addToDOM(c)}constructor(c){this.nodes=typeof c=="string"?this.parseMarkup(c):c}addToDOM(c){return(function d(p,x){let v;return Dl(p).forEach(function(w){let T,A=w.tagName,M=w.textContent?at.doc.createTextNode(w.textContent):void 0,z=Vs.bypassHTMLFiltering;if(A)if(A==="#text")T=M;else if(Vs.allowedTags.indexOf(A)!==-1||z){let P=A==="svg"?pi:x.namespaceURI||pi,G=at.doc.createElementNS(P,A),Z=w.attributes||{};vu(w,function(st,rt){rt!=="tagName"&&rt!=="attributes"&&rt!=="children"&&rt!=="style"&&rt!=="textContent"&&(Z[rt]=st)}),kn(G,z?Z:Vs.filterUserAttributes(Z)),w.style&&yf(G,w.style),M&&G.appendChild(M),d(w.children||[],G),T=G}else jh(33,!1,void 0,{"Invalid tagName in config":A});T&&x.appendChild(T),v=T}),v})(this.nodes,c)}parseMarkup(c){let d,p=[];c=c.trim().replace(/ style=(["'])/g," data-style=$1");try{d=new DOMParser().parseFromString(ba?ba.createHTML(c):c,"text/html")}catch{}if(!d){let v=li("div");v.innerHTML=c,d={body:v}}let x=(v,w)=>{let T=v.nodeName.toLowerCase(),A={tagName:T};T==="#text"&&(A.textContent=v.textContent||"");let M=v.attributes;if(M){let z={};[].forEach.call(M,P=>{P.name==="data-style"?A.style=Vs.parseStyle(P.value):z[P.name]=P.value}),A.attributes=z}if(v.childNodes.length){let z=[];[].forEach.call(v.childNodes,P=>{x(P,z)}),z.length&&(A.children=z)}w.push(A)};return[].forEach.call(d.body.childNodes,v=>x(v,p)),p}}Vs.allowedAttributes=["alt","aria-controls","aria-describedby","aria-expanded","aria-haspopup","aria-hidden","aria-label","aria-labelledby","aria-live","aria-pressed","aria-readonly","aria-roledescription","aria-selected","class","clip-path","color","colspan","cx","cy","d","disabled","dx","dy","fill","filterUnits","flood-color","flood-opacity","height","href","id","in","in2","markerHeight","markerWidth","offset","opacity","operator","orient","padding","paddingLeft","paddingRight","patternUnits","r","radius","refX","refY","result","role","rowspan","scope","slope","src","startOffset","stdDeviation","stroke-linecap","stroke-width","stroke","style","summary","tabindex","tableValues","target","text-align","text-anchor","textAnchor","textLength","title","type","valign","width","x","x1","x2","xlink:href","y","y1","y2","zIndex"],Vs.allowedReferences=["https://","http://","mailto:","/","../","./","#"],Vs.allowedTags=["#text","a","abbr","b","br","button","caption","circle","clipPath","code","dd","defs","div","dl","dt","em","feComponentTransfer","feComposite","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","filter","h1","h2","h3","h4","h5","h6","hr","i","img","li","linearGradient","marker","ol","p","path","pattern","pre","rect","small","span","stop","strong","style","sub","sup","svg","table","tbody","td","text","textPath","th","thead","title","tr","tspan","u","ul"],Vs.emptyHTML=kf,Vs.bypassHTMLFiltering=!1;let{defaultOptions:va,defaultTime:Rl}=Xe,{pageLang:Cf}=at,{extend:yu,getNestedProperty:wu,isArray:Sf,isNumber:Yo,isObject:Qa,isString:tl,pick:ku,ucfirst:Hr}=Ae,Ni={add:(N,c)=>N+c,divide:(N,c)=>c!==0?N/c:"",eq:(N,c)=>N==c,each:function(N){let c=arguments[arguments.length-1];return!!Sf(N)&&N.map((d,p)=>el(c.body,yu(Qa(d)?d:{"@this":d},{"@index":p,"@first":p===0,"@last":p===N.length-1}))).join("")},ge:(N,c)=>N>=c,gt:(N,c)=>N>c,if:N=>!!N,le:(N,c)=>N<=c,lt:(N,c)=>N<c,multiply:(N,c)=>N*c,ne:(N,c)=>N!=c,subtract:(N,c)=>N-c,ucfirst:Hr,unless:N=>!N},Cu={};function el(N="",c,d){let p=RegExp(`\\{([\\p{L}\\d:\\.,;\\-\\/<>\\[\\]%_@+"'’= #\\(\\)]+)\\}`,"gu"),x=RegExp(`\\(([\\p{L}\\d:\\.,;\\-\\/<>\\[\\]%_@+"'= ]+)\\)`,"gu"),v=[],w=/f$/,T=/\.(\d)/,A=d?.options?.lang||va.lang,M=d?.time||Rl,z=d?.numberFormatter||Xh.bind(d),P=(nt="")=>{let it;return nt==="true"||nt!=="false"&&((it=Number(nt)).toString()===nt?it:/^["'].+["']$/.test(nt)?nt.slice(1,-1):wu(nt,c))},G,Z,st=0,rt;for(;(G=p.exec(N))!==null;){let nt=G,it=x.exec(G[1]);it&&(G=it,rt=!0),Z?.isBlock||(Z={ctx:c,expression:G[1],find:G[0],isBlock:G[1].charAt(0)==="#",start:G.index,startInner:G.index+G[0].length,length:G[0].length});let gt=(Z.isBlock?nt:G)[1].split(" ")[0].replace("#","");Ni[gt]&&(Z.isBlock&&gt===Z.fn&&st++,Z.fn||(Z.fn=gt));let _t=G[1]==="else";if(Z.isBlock&&Z.fn&&(G[1]===`/${Z.fn}`||_t))if(st)!_t&&st--;else{let Wt=Z.startInner,Vt=N.substr(Wt,G.index-Wt);Z.body===void 0?(Z.body=Vt,Z.startInner=G.index+G[0].length):Z.elseBody=Vt,Z.find+=Vt+G[0],_t||(v.push(Z),Z=void 0)}else Z.isBlock||v.push(Z);if(it&&!Z?.isBlock)break}return v.forEach(nt=>{let it,gt,{body:_t,elseBody:Wt,expression:Vt,fn:qt}=nt;if(qt){let Kt=[nt],Zt=[],Se=Vt.length,Ne=0,we;for(gt=0;gt<=Se;gt++){let je=Vt.charAt(gt);we||je!=='"'&&je!=="'"?we===je&&(we=""):we=je,we||je!==" "&&gt!==Se||(Zt.push(Vt.substr(Ne,gt-Ne)),Ne=gt+1)}for(gt=Ni[qt].length;gt--;)Kt.unshift(P(Zt[gt+1]));it=Ni[qt].apply(c,Kt),nt.isBlock&&typeof it=="boolean"&&(it=el(it?_t:Wt,c,d))}else{let Kt=/^["'].+["']$/.test(Vt)?[Vt]:Vt.split(":");if(it=P(Kt.shift()||""),Kt.length&&typeof it=="number"){let Zt=Kt.join(":");if(w.test(Zt)){let Se=parseInt((Zt.match(T)||["","-1"])[1],10);it!==null&&(it=z(it,Se,A.decimalPoint,Zt.indexOf(",")>-1?A.thousandsSep:""))}else it=M.dateFormat(Zt,it)}x.lastIndex=0,x.test(nt.find)&&tl(it)&&(it=`"${it}"`)}N=N.replace(nt.find,ku(it,""))}),rt?el(N,c,d):N}function Xh(N,c,d,p){c*=1;let x,v,[w,T]=(N=+N||0).toString().split("e").map(Number),A=this?.options?.lang||va.lang,M=(N.toString().split(".")[1]||"").split("e")[0].length,z=c,P={};d??(d=A.decimalPoint),p??(p=A.thousandsSep),c===-1?c=Math.min(M,20):Yo(c)?c&&T<0&&((v=c+T)>=0?(w=+w.toExponential(v).split("e")[0],c=v):(w=Math.floor(w),N=c<20?+(w*Math.pow(10,T)).toFixed(c):0,T=0)):c=2,T&&(c??(c=2),N=w),Yo(c)&&c>=0&&(P.minimumFractionDigits=c,P.maximumFractionDigits=c),p===""&&(P.useGrouping=!1);let G=p||d,Z=G?"en":this?.locale||A.locale||Cf,st=JSON.stringify(P)+Z;return x=(Cu[st]??(Cu[st]=new Intl.NumberFormat(Z,P))).format(N),G&&(x=x.replace(/([,\.])/g,"_$1").replace(/_\,/g,p??",").replace("_.",d??".")),(c||+x!=0)&&(!(T<0)||z)||(x="0"),T&&+x!=0&&(x+="e"+(T<0?"":"+")+T),x}let dr={dateFormat:function(N,c,d){return Rl.dateFormat(N,c,d)},format:el,helpers:Ni,numberFormat:Xh};(u=D||(D={})).rendererTypes={},u.getRendererType=function(N=o){return u.rendererTypes[N]||u.rendererTypes[o]},u.registerRendererType=function(N,c,d){u.rendererTypes[N]=c,(!o||d)&&(o=N,at.Renderer=c)};let Ml=D,{clamp:Tf,pick:nl,pushUnique:pc,stableSort:gc}=Ae;(R||(R={})).distribute=function N(c,d,p){let x=c,v=x.reducedLen||d,w=(_t,Wt)=>_t.target-Wt.target,T=[],A=c.length,M=[],z=T.push,P,G,Z,st=!0,rt,nt,it=0,gt;for(P=A;P--;)it+=c[P].size;if(it>v){for(gc(c,(_t,Wt)=>(Wt.rank||0)-(_t.rank||0)),Z=(gt=c[0].rank===c[c.length-1].rank)?A/2:-1,G=gt?Z:A-1;Z&&it>v;)rt=c[P=Math.floor(G)],pc(M,P)&&(it-=rt.size),G+=Z,gt&&G>=c.length&&(Z/=2,G=Z);M.sort((_t,Wt)=>Wt-_t).forEach(_t=>z.apply(T,c.splice(_t,1)))}for(gc(c,w),c=c.map(_t=>({size:_t.size,targets:[_t.target],align:nl(_t.align,.5)}));st;){for(P=c.length;P--;)rt=c[P],nt=(Math.min.apply(0,rt.targets)+Math.max.apply(0,rt.targets))/2,rt.pos=Tf(nt-rt.size*rt.align,0,d-rt.size);for(P=c.length,st=!1;P--;)P>0&&c[P-1].pos+c[P-1].size>c[P].pos&&(c[P-1].size+=c[P].size,c[P-1].targets=c[P-1].targets.concat(c[P].targets),c[P-1].align=.5,c[P-1].pos+c[P-1].size>d&&(c[P-1].pos=d-c[P-1].size),c.splice(P,1),st=!0)}return z.apply(x,T),P=0,c.some(_t=>{let Wt=0;return(_t.targets||[]).some(()=>(x[P].pos=_t.pos+Wt,p!==void 0&&Math.abs(x[P].pos-x[P].target)>p?(x.slice(0,P+1).forEach(Vt=>delete Vt.pos),x.reducedLen=(x.reducedLen||d)-.1*d,x.reducedLen>.1*d&&N(x,d,p),!0):(Wt+=x[P].size,P++,!1)))}),gc(x,w),x};let lo=R,{animate:ya,animObject:Ol,stop:sl}=Un,{deg2rad:Su,doc:wa,svg:qh,SVG_NS:ka,win:If,isFirefox:Tu}=at,{addEvent:mc,attr:xc,createElement:Kh,crisp:Fl,css:Iu,defined:_o,erase:Yh,extend:Pl,fireEvent:bc,getAlignFactor:co,isArray:Eu,isFunction:Zh,isNumber:_u,isObject:Jh,isString:Au,merge:vc,objectEach:Di,pick:Er,pInt:Zo,pushUnique:Ef,replaceNested:_f,syncTimeout:$u,uniqueKey:Nu}=Ae;class Ks{_defaultGetter(c){let d=Er(this[c+"Value"],this[c],this.element?this.element.getAttribute(c):null,0);return/^-?[\d\.]+$/.test(d)&&(d=parseFloat(d)),d}_defaultSetter(c,d,p){p.setAttribute(d,c)}add(c){let d,p=this.renderer,x=this.element;return c&&(this.parentGroup=c),this.textStr!==void 0&&this.element.nodeName==="text"&&p.buildText(this),this.added=!0,(!c||c.handleZ||this.zIndex)&&(d=this.zIndexSetter()),d||(c?c.element:p.box).appendChild(x),this.onAdd&&this.onAdd(),this}addClass(c,d){let p=d?"":this.attr("class")||"";return(c=(c||"").split(/ /g).reduce(function(x,v){return p.indexOf(v)===-1&&x.push(v),x},p?[p]:[]).join(" "))!==p&&this.attr("class",c),this}afterSetters(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)}align(c,d,p,x=!0){let v=this.renderer,w=v.alignedObjects,T=!!c;c?(this.alignOptions=c,this.alignByTranslate=d,this.alignTo=p):(c=this.alignOptions||{},d=this.alignByTranslate,p=this.alignTo);let A=!p||Au(p)?p||"renderer":void 0;A&&(T&&Ef(w,this),p=void 0);let M=Er(p,v[A],v),z=(M.x||0)+(c.x||0)+((M.width||0)-(c.width||0))*co(c.align),P=(M.y||0)+(c.y||0)+((M.height||0)-(c.height||0))*co(c.verticalAlign),G={};return c.align&&(G["text-align"]=c.align),G[d?"translateX":"x"]=Math.round(z),G[d?"translateY":"y"]=Math.round(P),x&&(this[this.placed?"animate":"attr"](G),this.placed=!0),this.alignAttr=G,this}alignSetter(c){let d={left:"start",center:"middle",right:"end"};d[c]&&(this.alignValue=c,this.element.setAttribute("text-anchor",d[c]))}animate(c,d,p){let x=Ol(Er(d,this.renderer.globalAnimation,!0)),v=x.defer;return wa.hidden&&(x.duration=0),x.duration!==0?(p&&(x.complete=p),$u(()=>{this.element&&ya(this,c,x)},v)):(this.attr(c,void 0,p||x.complete),Di(c,function(w,T){x.step&&x.step.call(this,w,{prop:T,pos:1,elem:this})},this)),this}applyTextOutline(c){let d=this.element;c.indexOf("contrast")!==-1&&(c=c.replace(/contrast/g,this.renderer.getContrast(d.style.fill)));let p=c.indexOf(" "),x=c.substring(p+1),v=c.substring(0,p);if(v&&v!=="none"&&at.svg){this.fakeTS=!0,v=v.replace(/(^[\d\.]+)(.*?)$/g,function(z,P,G){return 2*Number(P)+G}),this.removeTextOutline();let w=wa.createElementNS(ka,"tspan");xc(w,{class:"highcharts-text-outline",fill:x,stroke:x,"stroke-width":v,"stroke-linejoin":"round"});let T=d.querySelector("textPath")||d;[].forEach.call(T.childNodes,z=>{let P=z.cloneNode(!0);P.removeAttribute&&["fill","stroke","stroke-width","stroke"].forEach(G=>P.removeAttribute(G)),w.appendChild(P)});let A=0;[].forEach.call(T.querySelectorAll("text tspan"),z=>{A+=Number(z.getAttribute("dy"))});let M=wa.createElementNS(ka,"tspan");M.textContent="​",xc(M,{x:Number(d.getAttribute("x")),dy:-A}),w.appendChild(M),T.insertBefore(w,T.firstChild)}}attr(c,d,p,x){let{element:v}=this,w=Ks.symbolCustomAttribs,T,A,M=this,z;return typeof c=="string"&&d!==void 0&&(T=c,(c={})[T]=d),typeof c=="string"?M=(this[c+"Getter"]||this._defaultGetter).call(this,c,v):(Di(c,function(P,G){z=!1,x||sl(this,G),this.symbolName&&w.indexOf(G)!==-1&&(A||(this.symbolAttr(c),A=!0),z=!0),this.rotation&&(G==="x"||G==="y")&&(this.doTransform=!0),z||(this[G+"Setter"]||this._defaultSetter).call(this,P,G,v)},this),this.afterSetters()),p&&p.call(this),M}clip(c){if(c&&!c.clipPath){let d=Nu()+"-",p=this.renderer.createElement("clipPath").attr({id:d}).add(this.renderer.defs);Pl(c,{clipPath:p,id:d,count:0}),c.add(p)}return this.attr("clip-path",c?`url(${this.renderer.url}#${c.id})`:"none")}crisp(c,d){d=Math.round(d||c.strokeWidth||0);let p=c.x||this.x||0,x=c.y||this.y||0,v=(c.width||this.width||0)+p,w=(c.height||this.height||0)+x,T=Fl(p,d),A=Fl(x,d);return Pl(c,{x:T,y:A,width:Fl(v,d)-T,height:Fl(w,d)-A}),_o(c.strokeWidth)&&(c.strokeWidth=d),c}complexColor(c,d,p){let x=this.renderer,v,w,T,A,M,z,P,G,Z,st,rt=[],nt;bc(this.renderer,"complexColor",{args:arguments},function(){if(c.radialGradient?w="radialGradient":c.linearGradient&&(w="linearGradient"),w){if(T=c[w],M=x.gradients,z=c.stops,Z=p.radialReference,Eu(T)&&(c[w]=T={x1:T[0],y1:T[1],x2:T[2],y2:T[3],gradientUnits:"userSpaceOnUse"}),w==="radialGradient"&&Z&&!_o(T.gradientUnits)&&(A=T,T=vc(T,x.getRadialAttr(Z,A),{gradientUnits:"userSpaceOnUse"})),Di(T,function(it,gt){gt!=="id"&&rt.push(gt,it)}),Di(z,function(it){rt.push(it)}),M[rt=rt.join(",")])st=M[rt].attr("id");else{T.id=st=Nu();let it=M[rt]=x.createElement(w).attr(T).add(x.defs);it.radAttr=A,it.stops=[],z.forEach(function(gt){gt[1].indexOf("rgba")===0?(P=(v=In.parse(gt[1])).get("rgb"),G=v.get("a")):(P=gt[1],G=1);let _t=x.createElement("stop").attr({offset:gt[0],"stop-color":P,"stop-opacity":G}).add(it);it.stops.push(_t)})}nt="url("+x.url+"#"+st+")",p.setAttribute(d,nt),p.gradient=rt,c.toString=function(){return nt}}})}css(c){let d=this.styles,p={},x=this.element,v,w=!d;if(d&&Di(c,function(T,A){d&&d[A]!==T&&(p[A]=T,w=!0)}),w){d&&(c=Pl(d,p)),c.width===null||c.width==="auto"?delete this.textWidth:x.nodeName.toLowerCase()==="text"&&c.width&&(v=this.textWidth=Zo(c.width)),Pl(this.styles,c),v&&!qh&&this.renderer.forExport&&delete c.width;let T=Tu&&c.fontSize||null;T&&(_u(T)||/^\d+$/.test(T))&&(c.fontSize+="px");let A=vc(c);x.namespaceURI===this.SVG_NS&&(["textOutline","textOverflow","whiteSpace","width"].forEach(M=>A&&delete A[M]),A.color&&(A.fill=A.color,delete A.color)),Iu(x,A)}return this.added&&(this.element.nodeName==="text"&&this.renderer.buildText(this),c.textOutline&&this.applyTextOutline(c.textOutline)),this}dashstyleSetter(c){let d,p=this["stroke-width"];if(p==="inherit"&&(p=1),c){let x=(c=c.toLowerCase()).replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(d=x.length;d--;)x[d]=""+Zo(x[d])*Er(p,NaN);c=x.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",c)}}destroy(){let c=this,{element:d={},renderer:p,stops:x}=c,v=d.ownerSVGElement,w=d.nodeName==="SPAN"&&c.parentGroup||void 0,T;if(d.onclick=d.onmouseout=d.onmouseover=d.onmousemove=d.point=null,sl(c),c.clipPath&&v){let A=c.clipPath;[].forEach.call(v.querySelectorAll("[clip-path],[CLIP-PATH]"),function(M){M.getAttribute("clip-path").indexOf(A.element.id)>-1&&M.removeAttribute("clip-path")}),c.clipPath=A.destroy()}if(x){for(let A of x)A.destroy();x.length=0}for(c.safeRemoveChild(d);w?.div&&w.div.childNodes.length===0;)T=w.parentGroup,c.safeRemoveChild(w.div),delete w.div,w=T;c.alignOptions&&Yh(p.alignedObjects,c),Di(c,(A,M)=>{(c[M]?.parentGroup===c||["connector","foreignObject"].indexOf(M)!==-1)&&c[M]?.destroy?.(),delete c[M]})}dSetter(c,d,p){Eu(c)&&(typeof c[0]=="string"&&(c=this.renderer.pathToSegments(c)),this.pathArray=c,c=c.reduce((x,v,w)=>v?.join?(w?x+" ":"")+v.join(" "):(v||"").toString(),"")),/(NaN| {2}|^$)/.test(c)&&(c="M 0 0"),this[d]!==c&&(p.setAttribute(d,c),this[d]=c)}fillSetter(c,d,p){typeof c=="string"?p.setAttribute(d,c):c&&this.complexColor(c,d,p)}hrefSetter(c,d,p){p.setAttributeNS("http://www.w3.org/1999/xlink",d,c)}getBBox(c,d){let p,x,v,{element:w,renderer:T,styles:A,textStr:M}=this,{cache:z,cacheKeys:P}=T,G=w.namespaceURI===this.SVG_NS,Z=Er(d,this.rotation,0),st=T.styledMode?w&&Ks.prototype.getStyle.call(w,"font-size"):A.fontSize,rt=this.getBBoxCacheKey([T.rootFontSize,this.textWidth,this.alignValue,A.fontWeight,A.lineClamp,A.textOverflow,st,Z]);if(rt&&!c&&(p=z[rt]),!p||p.polygon){if(G||T.forExport){try{v=this.fakeTS&&function(it){let gt=w.querySelector(".highcharts-text-outline");gt&&Iu(gt,{display:it})},Zh(v)&&v("none"),p=w.getBBox?Pl({},w.getBBox()):{width:w.offsetWidth,height:w.offsetHeight,x:0,y:0},Zh(v)&&v("")}catch{}(!p||p.width<0)&&(p={x:0,y:0,width:0,height:0})}else p=this.htmlGetBBox();x=p.height,G&&(p.height=x={"11px,17":14,"13px,20":16}[`${st||""},${Math.round(x)}`]||x),Z&&(p=this.getRotatedBox(p,Z));let nt={bBox:p};bc(this,"afterGetBBox",nt),p=nt.bBox}if(rt&&(M===""||p.height>0)){for(;P.length>250;)delete z[P.shift()];z[rt]||P.push(rt),z[rt]=p}return p}getBBoxCacheKey(c){if(_o(this.textStr)){let d=""+this.textStr;return d.indexOf("<")===-1&&(d=d.replace(/\d/g,"0")),[d,...c].join(",")}}getRotatedBox(c,d){let{x:p,y:x,width:v,height:w}=c,{alignValue:T,translateY:A,rotationOriginX:M=0,rotationOriginY:z=0}=this,P=co(T),G=Number(this.element.getAttribute("y")||0)-(A?0:x),Z=d*Su,st=(d-90)*Su,rt=Math.cos(Z),nt=Math.sin(Z),it=v*rt,gt=v*nt,_t=Math.cos(st),Wt=Math.sin(st),[[Vt,qt],[Kt,Zt]]=[M,z].map(Wn=>[Wn-Wn*rt,Wn*nt]),Se=p+P*(v-it)+Vt+Zt+G*_t,Ne=Se+it,we=Ne-w*_t,je=we-it,Qe=x+G-P*gt-qt+Kt+G*Wt,cn=Qe+gt,Tn=cn-w*Wt,yn=Tn-gt,mn=Math.min(Se,Ne,we,je),Qs=Math.min(Qe,cn,Tn,yn),Us=Math.max(Se,Ne,we,je)-mn,Yr=Math.max(Qe,cn,Tn,yn)-Qs;return{x:mn,y:Qs,width:Us,height:Yr,polygon:[[Se,Qe],[Ne,cn],[we,Tn],[je,yn]]}}getStyle(c){return If.getComputedStyle(this.element||this,"").getPropertyValue(c)}hasClass(c){return(""+this.attr("class")).split(" ").indexOf(c)!==-1}hide(){return this.attr({visibility:"hidden"})}htmlGetBBox(){return{height:0,width:0,x:0,y:0}}constructor(c,d){this.onEvents={},this.opacity=1,this.SVG_NS=ka,this.element=d==="span"||d==="body"?Kh(d):wa.createElementNS(this.SVG_NS,d),this.renderer=c,this.styles={},bc(this,"afterInit")}on(c,d){let{onEvents:p}=this;return p[c]&&p[c](),p[c]=mc(this.element,c,d),this}opacitySetter(c,d,p){let x=Number(Number(c).toFixed(3));this.opacity=x,p.setAttribute(d,x)}reAlign(){this.alignOptions?.width&&this.alignOptions.align!=="left"&&(this.alignOptions.width=this.getBBox().width,this.placed=!1,this.align())}removeClass(c){return this.attr("class",(""+this.attr("class")).replace(Au(c)?RegExp(`(^| )${c}( |$)`):c," ").replace(/ +/g," ").trim())}removeTextOutline(){let c=this.element.querySelector("tspan.highcharts-text-outline");c&&this.safeRemoveChild(c)}safeRemoveChild(c){let d=c.parentNode;d&&d.removeChild(c)}setRadialReference(c){let d=this.element.gradient&&this.renderer.gradients[this.element.gradient]||void 0;return this.element.radialReference=c,d?.radAttr&&d.animate(this.renderer.getRadialAttr(c,d.radAttr)),this}shadow(c){let{renderer:d}=this,p=vc(this.parentGroup?.rotation===90?{offsetX:-1,offsetY:-1}:{},Jh(c)?c:{}),x=d.shadowDefinition(p);return this.attr({filter:c?`url(${d.url}#${x})`:"none"})}show(c=!0){return this.attr({visibility:c?"inherit":"visible"})}"stroke-widthSetter"(c,d,p){this[d]=c,p.setAttribute(d,c)}strokeWidth(){if(!this.renderer.styledMode)return this["stroke-width"]||0;let c=this.getStyle("stroke-width"),d=0,p;return/px$/.test(c)?d=Zo(c):c!==""&&(xc(p=wa.createElementNS(ka,"rect"),{width:c,"stroke-width":0}),this.element.parentNode.appendChild(p),d=p.getBBox().width,p.parentNode.removeChild(p)),d}symbolAttr(c){let d=this;Ks.symbolCustomAttribs.forEach(function(p){d[p]=Er(c[p],d[p])}),d.attr({d:d.renderer.symbols[d.symbolName](d.x,d.y,d.width,d.height,d)})}textSetter(c){c!==this.textStr&&(delete this.textPxLength,this.textStr=c,this.added&&this.renderer.buildText(this),this.reAlign())}titleSetter(c){let d=this.element,p=d.getElementsByTagName("title")[0]||wa.createElementNS(this.SVG_NS,"title");d.insertBefore?d.insertBefore(p,d.firstChild):d.appendChild(p),p.textContent=_f(Er(c,""),[/<[^>]*>/g,""]).replace(/&lt;/g,"<").replace(/&gt;/g,">")}toFront(){let c=this.element;return c.parentNode.appendChild(c),this}translate(c,d){return this.attr({translateX:c,translateY:d})}updateTransform(c="transform"){let{element:d,foreignObject:p,matrix:x,padding:v,rotation:w=0,rotationOriginX:T,rotationOriginY:A,scaleX:M,scaleY:z,text:P,translateX:G=0,translateY:Z=0}=this,st=[`translate(${G},${Z})`];_o(x)&&st.push("matrix("+x.join(",")+")"),w&&(st.push("rotate("+w+" "+(T??d.getAttribute("x")??this.x??0)+" "+(A??d.getAttribute("y")??this.y??0)+")"),P?.element.tagName!=="SPAN"||P?.foreignObject||P.attr({rotation:w,rotationOriginX:(T||0)-v,rotationOriginY:(A||0)-v})),(_o(M)||_o(z))&&st.push(`scale(${M??1} ${z??1})`),st.length&&!(P||this).textPath&&(p?.element||d).setAttribute(c,st.join(" "))}visibilitySetter(c,d,p){c==="inherit"?p.removeAttribute(d):this[d]!==c&&p.setAttribute(d,c),this[d]=c}xGetter(c){return this.element.nodeName==="circle"&&(c==="x"?c="cx":c==="y"&&(c="cy")),this._defaultGetter(c)}zIndexSetter(c,d){let p=this.renderer,x=this.parentGroup,v=(x||p).element||p.box,w=this.element,T=v===p.box,A,M,z,P=!1,G,Z=this.added,st;if(_o(c)?(w.setAttribute("data-z-index",c),c*=1,this[d]===c&&(Z=!1)):_o(this[d])&&w.removeAttribute("data-z-index"),this[d]=c,Z){for((c=this.zIndex)&&x&&(x.handleZ=!0),st=(A=v.childNodes).length-1;st>=0&&!P;st--)G=!_o(z=(M=A[st]).getAttribute("data-z-index")),M!==w&&(c<0&&G&&!T&&!st?(v.insertBefore(w,A[st]),P=!0):(Zo(z)<=c||G&&(!_o(c)||c>=0))&&(v.insertBefore(w,A[st+1]),P=!0));P||(v.insertBefore(w,A[3*!!T]),P=!0)}return P}}Ks.symbolCustomAttribs=["anchorX","anchorY","clockwise","end","height","innerR","r","start","width","x","y"],Ks.prototype.strokeSetter=Ks.prototype.fillSetter,Ks.prototype.yGetter=Ks.prototype.xGetter,Ks.prototype.matrixSetter=Ks.prototype.rotationOriginXSetter=Ks.prototype.rotationOriginYSetter=Ks.prototype.rotationSetter=Ks.prototype.scaleXSetter=Ks.prototype.scaleYSetter=Ks.prototype.translateXSetter=Ks.prototype.translateYSetter=Ks.prototype.verticalAlignSetter=function(N,c){this[c]=N,this.doTransform=!0};let _r=Ks,{defined:Jo,extend:Qh,getAlignFactor:Ar,isNumber:Ll,merge:Du,pick:jr,removeEvent:Ca}=Ae;class Ao extends _r{constructor(c,d,p,x,v,w,T,A,M,z){let P;super(c,"g"),this.paddingLeftSetter=this.paddingSetter,this.paddingRightSetter=this.paddingSetter,this.doUpdate=!1,this.textStr=d,this.x=p,this.y=x,this.anchorX=w,this.anchorY=T,this.baseline=M,this.className=z,this.addClass(z==="button"?"highcharts-no-tooltip":"highcharts-label"),z&&this.addClass("highcharts-"+z),this.text=c.text(void 0,0,0,A).attr({zIndex:1}),typeof v=="string"&&((P=/^url\((.*?)\)$/.test(v))||this.renderer.symbols[v])&&(this.symbolKey=v),this.bBox=Ao.emptyBBox,this.padding=3,this.baselineOffset=0,this.needsBox=c.styledMode||P,this.deferredAttr={},this.alignFactor=0}alignSetter(c){let d=Ar(c);this.textAlign=c,d!==this.alignFactor&&(this.alignFactor=d,this.bBox&&Ll(this.xSetting)&&this.attr({x:this.xSetting}),this.updateTextPadding())}anchorXSetter(c,d){this.anchorX=c,this.boxAttr(d,Math.round(c)-this.getCrispAdjust()-this.xSetting)}anchorYSetter(c,d){this.anchorY=c,this.boxAttr(d,c-this.ySetting)}boxAttr(c,d){this.box?this.box.attr(c,d):this.deferredAttr[c]=d}css(c){if(c){let d={};c=Du(c),Ao.textProps.forEach(p=>{c[p]!==void 0&&(d[p]=c[p],delete c[p])}),this.text.css(d),"fontSize"in d||"fontWeight"in d||"width"in d?this.updateTextPadding():"textOverflow"in d&&this.updateBoxSize()}return _r.prototype.css.call(this,c)}destroy(){Ca(this.element,"mouseenter"),Ca(this.element,"mouseleave"),this.text&&this.text.destroy(),this.box&&(this.box=this.box.destroy()),_r.prototype.destroy.call(this)}fillSetter(c,d){c&&(this.needsBox=!0),this.fill=c,this.boxAttr(d,c)}getBBox(c,d){(this.textStr&&this.bBox.width===0&&this.bBox.height===0||this.rotation)&&this.updateBoxSize();let{padding:p,height:x=0,translateX:v=0,translateY:w=0,width:T=0}=this,A=jr(this.paddingLeft,p),M=d??(this.rotation||0),z={width:T,height:x,x:v+this.bBox.x-A,y:w+this.bBox.y-p+this.baselineOffset};return M&&(z=this.getRotatedBox(z,M)),z}getCrispAdjust(){return(this.renderer.styledMode&&this.box?this.box.strokeWidth():this["stroke-width"]?parseInt(this["stroke-width"],10):0)%2/2}heightSetter(c){this.heightSetting=c,this.doUpdate=!0}afterSetters(){super.afterSetters(),this.doUpdate&&(this.updateBoxSize(),this.doUpdate=!1)}onAdd(){this.text.add(this),this.attr({text:jr(this.textStr,""),x:this.x||0,y:this.y||0}),this.box&&Jo(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})}paddingSetter(c,d){Ll(c)?c!==this[d]&&(this[d]=c,this.updateTextPadding()):this[d]=void 0}rSetter(c,d){this.boxAttr(d,c)}strokeSetter(c,d){this.stroke=c,this.boxAttr(d,c)}"stroke-widthSetter"(c,d){c&&(this.needsBox=!0),this["stroke-width"]=c,this.boxAttr(d,c)}"text-alignSetter"(c){this.textAlign=this["text-align"]=c,this.updateTextPadding()}textSetter(c){c!==void 0&&this.text.attr({text:c}),this.updateTextPadding(),this.reAlign()}updateBoxSize(){let c,d=this.text,p={},x=this.padding,v=this.bBox=(!Ll(this.widthSetting)||!Ll(this.heightSetting)||this.textAlign)&&Jo(d.textStr)?d.getBBox(void 0,0):Ao.emptyBBox;this.width=this.getPaddedWidth(),this.height=(this.heightSetting||v.height||0)+2*x;let w=this.renderer.fontMetrics(d);if(this.baselineOffset=x+Math.min((this.text.firstLineMetrics||w).b,v.height||1/0),this.heightSetting&&(this.baselineOffset+=(this.heightSetting-w.h)/2),this.needsBox&&!d.textPath){if(!this.box){let T=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect();T.addClass((this.className==="button"?"":"highcharts-label-box")+(this.className?" highcharts-"+this.className+"-box":"")),T.add(this)}p.x=c=this.getCrispAdjust(),p.y=(this.baseline?-this.baselineOffset:0)+c,p.width=Math.round(this.width),p.height=Math.round(this.height),this.box.attr(Qh(p,this.deferredAttr)),this.deferredAttr={}}}updateTextPadding(){let c=this.text,d=c.styles.textAlign||this.textAlign;if(!c.textPath){this.updateBoxSize();let p=this.baseline?0:this.baselineOffset,x=(this.paddingLeft??this.padding)+Ar(d)*(this.widthSetting??this.bBox.width);(x!==c.x||p!==c.y)&&(c.attr({align:d,x}),p!==void 0&&c.attr("y",p)),c.x=x,c.y=p}}widthSetter(c){this.widthSetting=Ll(c)?c:void 0,this.doUpdate=!0}getPaddedWidth(){let c=this.padding,d=jr(this.paddingLeft,c),p=jr(this.paddingRight,c);return(this.widthSetting||this.bBox.width||0)+d+p}xSetter(c){this.x=c,this.alignFactor&&(c-=this.alignFactor*this.getPaddedWidth(),this["forceAnimate:x"]=!0),this.anchorX&&(this["forceAnimate:anchorX"]=!0),this.xSetting=Math.round(c),this.attr("translateX",this.xSetting)}ySetter(c){this.anchorY&&(this["forceAnimate:anchorY"]=!0),this.ySetting=this.y=Math.round(c),this.attr("translateY",this.ySetting)}}Ao.emptyBBox={width:0,height:0,x:0,y:0},Ao.textProps=["color","direction","fontFamily","fontSize","fontStyle","fontWeight","lineClamp","lineHeight","textAlign","textDecoration","textOutline","textOverflow","whiteSpace","width"];let{defined:$o,isNumber:Bl,pick:uo}=Ae;function Ru(N,c,d,p,x){let v=[];if(x){let w=x.start||0,T=x.end||0,A=uo(x.r,d),M=uo(x.r,p||d),z=2e-4/(x.borderRadius?1:Math.max(A,1)),P=Math.abs(T-w-2*Math.PI)<z;P&&(w=Math.PI/2,T=2.5*Math.PI-z);let G=x.innerR,Z=uo(x.open,P),st=Math.cos(w),rt=Math.sin(w),nt=Math.cos(T),it=Math.sin(T),gt=uo(x.longArc,T-w-Math.PI<z?0:1),_t=["A",A,M,0,gt,uo(x.clockwise,1),N+A*nt,c+M*it];_t.params={start:w,end:T,cx:N,cy:c},v.push(["M",N+A*st,c+M*rt],_t),$o(G)&&((_t=["A",G,G,0,gt,$o(x.clockwise)?1-x.clockwise:0,N+G*st,c+G*rt]).params={start:T,end:w,cx:N,cy:c},v.push(Z?["M",N+G*nt,c+G*it]:["L",N+G*nt,c+G*it],_t)),Z||v.push(["Z"])}return v}function yc(N,c,d,p,x){return x?.r?Sa(N,c,d,p,x):[["M",N,c],["L",N+d,c],["L",N+d,c+p],["L",N,c+p],["Z"]]}function Sa(N,c,d,p,x){let v=x?.r||0;return[["M",N+v,c],["L",N+d-v,c],["A",v,v,0,0,1,N+d,c+v],["L",N+d,c+p-v],["A",v,v,0,0,1,N+d-v,c+p],["L",N+v,c+p],["A",v,v,0,0,1,N,c+p-v],["L",N,c+v],["A",v,v,0,0,1,N+v,c],["Z"]]}let wc={arc:Ru,callout:function(N,c,d,p,x){let v=Math.min(x?.r||0,d,p),w=v+6,T=x?.anchorX,A=x?.anchorY||0,M=Sa(N,c,d,p,{r:v});if(!Bl(T)||T<d&&T>0&&A<p&&A>0)return M;if(N+T>d-w)if(A>c+w&&A<c+p-w)M.splice(3,1,["L",N+d,A-6],["L",N+d+6,A],["L",N+d,A+6],["L",N+d,c+p-v]);else if(T<d){let z=A<c+w,P=z?c:c+p;M.splice(z?2:5,0,["L",T,A],["L",N+d-v,P])}else M.splice(3,1,["L",N+d,p/2],["L",T,A],["L",N+d,p/2],["L",N+d,c+p-v]);else if(N+T<w)if(A>c+w&&A<c+p-w)M.splice(7,1,["L",N,A+6],["L",N-6,A],["L",N,A-6],["L",N,c+v]);else if(T>0){let z=A<c+w,P=z?c:c+p;M.splice(z?1:6,0,["L",T,A],["L",N+v,P])}else M.splice(7,1,["L",N,p/2],["L",T,A],["L",N,p/2],["L",N,c+v]);else A>p&&T<d-w?M.splice(5,1,["L",T+6,c+p],["L",T,c+p+6],["L",T-6,c+p],["L",N+v,c+p]):A<0&&T>w&&M.splice(1,1,["L",T-6,c],["L",T,c-6],["L",T+6,c],["L",d-v,c]);return M},circle:function(N,c,d,p){return Ru(N+d/2,c+p/2,d/2,p/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},diamond:function(N,c,d,p){return[["M",N+d/2,c],["L",N+d,c+p/2],["L",N+d/2,c+p],["L",N,c+p/2],["Z"]]},rect:yc,roundedRect:Sa,square:yc,triangle:function(N,c,d,p){return[["M",N+d/2,c],["L",N+d,c+p],["L",N,c+p],["Z"]]},"triangle-down":function(N,c,d,p){return[["M",N,c],["L",N+d,c],["L",N+d/2,c+p],["Z"]]}},{doc:Ta,SVG_NS:Af,win:kc}=at,{attr:Qo,extend:$f,fireEvent:Nf,isString:Mu,objectEach:Df,pick:td}=Ae,yi=(N,c)=>N.substring(0,c)+"…",Ou=class{constructor(N){const c=N.styles;this.renderer=N.renderer,this.svgElement=N,this.width=N.textWidth,this.textLineHeight=c?.lineHeight,this.textOutline=c?.textOutline,this.ellipsis=c?.textOverflow==="ellipsis",this.lineClamp=c?.lineClamp,this.noWrap=c?.whiteSpace==="nowrap"}buildSVG(){let N=this.svgElement,c=N.element,d=N.renderer,p=td(N.textStr,"").toString(),x=p.indexOf("<")!==-1,v=c.childNodes,w=!N.added&&d.box,T=[p,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,N.getStyle("font-size"),N.styles.lineClamp,this.width].join(",");if(T!==N.textCache){N.textCache=T,delete N.actualWidth;for(let A=v.length;A--;)c.removeChild(v[A]);if(x||this.ellipsis||this.width||N.textPath||p.indexOf(" ")!==-1&&(!this.noWrap||/<br.*?>/g.test(p))){if(p!==""){w&&w.appendChild(c);let A=new Vs(p);this.modifyTree(A.nodes),A.addToDOM(c),this.modifyDOM(),this.ellipsis&&(c.textContent||"").indexOf("…")!==-1&&N.attr("title",this.unescapeEntities(N.textStr||"",["&lt;","&gt;"])),w&&w.removeChild(c)}}else c.appendChild(Ta.createTextNode(this.unescapeEntities(p)));Mu(this.textOutline)&&N.applyTextOutline&&N.applyTextOutline(this.textOutline)}}modifyDOM(){let N,c=this.svgElement,d=Qo(c.element,"x");for(c.firstLineMetrics=void 0;(N=c.element.firstChild)&&/^[\s\u200B]*$/.test(N.textContent||" ");)c.element.removeChild(N);[].forEach.call(c.element.querySelectorAll("tspan.highcharts-br"),(w,T)=>{w.nextSibling&&w.previousSibling&&(T===0&&w.previousSibling.nodeType===1&&(c.firstLineMetrics=c.renderer.fontMetrics(w.previousSibling)),Qo(w,{dy:this.getLineHeight(w.nextSibling),x:d}))});let p=this.width||0;if(!p)return;let x=(w,T)=>{let A=w.textContent||"",M=A.replace(/([^\^])-/g,"$1- ").split(" "),z=!this.noWrap&&(M.length>1||c.element.childNodes.length>1),P=this.getLineHeight(T),G=Math.max(0,p-.8*P),Z=0,st=c.actualWidth;if(z){let rt=[],nt=[];for(;T.firstChild&&T.firstChild!==w;)nt.push(T.firstChild),T.removeChild(T.firstChild);for(;M.length;)if(M.length&&!this.noWrap&&Z>0&&(rt.push(w.textContent||""),w.textContent=M.join(" ").replace(/- /g,"-")),this.truncate(w,void 0,M,Z===0&&st||0,p,G,(it,gt)=>M.slice(0,gt).join(" ").replace(/- /g,"-")),st=c.actualWidth,Z++,this.lineClamp&&Z>=this.lineClamp){M.length&&(this.truncate(w,w.textContent||"",void 0,0,p,G,yi),w.textContent=w.textContent?.replace("…","")+"…");break}nt.forEach(it=>{T.insertBefore(it,w)}),rt.forEach(it=>{T.insertBefore(Ta.createTextNode(it),w);let gt=Ta.createElementNS(Af,"tspan");gt.textContent="​",Qo(gt,{dy:P,x:d}),T.insertBefore(gt,w)})}else this.ellipsis&&A&&this.truncate(w,A,void 0,0,p,G,yi)},v=w=>{[].slice.call(w.childNodes).forEach(T=>{T.nodeType===kc.Node.TEXT_NODE?x(T,w):(T.className.baseVal.indexOf("highcharts-br")!==-1&&(c.actualWidth=0),v(T))})};v(c.element)}getLineHeight(N){let c=N.nodeType===kc.Node.TEXT_NODE?N.parentElement:N;return this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(c||this.svgElement.element).h}modifyTree(N){let c=(d,p)=>{let{attributes:x={},children:v,style:w={},tagName:T}=d,A=this.renderer.styledMode;if(T==="b"||T==="strong"?A?x.class="highcharts-strong":w.fontWeight="bold":(T==="i"||T==="em")&&(A?x.class="highcharts-emphasized":w.fontStyle="italic"),w?.color&&(w.fill=w.color),T==="br"){x.class="highcharts-br",d.textContent="​";let M=N[p+1];M?.textContent&&(M.textContent=M.textContent.replace(/^ +/gm,""))}else T==="a"&&v&&v.some(M=>M.tagName==="#text")&&(d.children=[{children:v,tagName:"tspan"}]);T!=="#text"&&T!=="a"&&(d.tagName="tspan"),$f(d,{attributes:x,style:w}),v&&v.filter(M=>M.tagName!=="#text").forEach(c)};N.forEach(c),Nf(this.svgElement,"afterModifyTree",{nodes:N})}truncate(N,c,d,p,x,v,w){let T,A,M=this.svgElement,{rotation:z}=M,P=[],G=d&&!p?1:0,Z=(c||d||"").length,st=Z;d||(x=v);let rt=function(nt,it){let gt=it||nt,_t=N.parentNode;if(_t&&P[gt]===void 0&&_t.getSubStringLength)try{P[gt]=p+_t.getSubStringLength(0,d?gt+1:gt)}catch{}return P[gt]};if(M.rotation=0,p+(A=rt(N.textContent.length))>x){for(;G<=Z;)st=Math.ceil((G+Z)/2),d&&(T=w(d,st)),A=rt(st,T&&T.length-1),G===Z?G=Z+1:A>x?Z=st-1:G=st;Z===0?N.textContent="":c&&Z===c.length-1||(N.textContent=T||w(c||d,st)),this.ellipsis&&A>x&&this.truncate(N,N.textContent||"",void 0,0,x,v,yi)}d&&d.splice(0,st),M.actualWidth=A,M.rotation=z}unescapeEntities(N,c){return Df(this.renderer.escapes,function(d,p){c&&c.indexOf(d)!==-1||(N=N.toString().replace(RegExp(d,"g"),p))}),N}},{defaultOptions:il}=Xe,{charts:Ia,deg2rad:Cc,doc:$r,isFirefox:Fu,isMS:Sc,isWebKit:Pu,noop:ed,SVG_NS:ho,symbolSizes:No,win:Li}=at,{addEvent:Do,attr:zl,createElement:Tc,crisp:b,css:_,defined:O,destroyObjectProperties:H,extend:Q,isArray:tt,isNumber:dt,isObject:Rt,isString:$t,merge:Qt,pick:oe,pInt:ye,replaceNested:se,uniqueKey:xe}=Ae;class en{constructor(c,d,p,x,v,w,T){let A,M;this.x=0,this.y=0;const z=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}),P=z.element;T||z.css(this.getStyle(x||{})),c.appendChild(P),zl(c,"dir","ltr"),c.innerHTML.indexOf("xmlns")===-1&&zl(P,"xmlns",this.SVG_NS),this.box=P,this.boxWrapper=z,this.alignedObjects=[],this.url=this.getReferenceURL(),this.createElement("desc").add().element.appendChild($r.createTextNode("Created with Highcharts 12.5.0")),this.defs=this.createElement("defs").add(),this.allowHTML=w,this.forExport=v,this.styledMode=T,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.rootFontSize=z.getStyle("font-size"),this.setSize(d,p,!1),Fu&&c.getBoundingClientRect&&((A=function(){_(c,{left:0,top:0}),M=c.getBoundingClientRect(),_(c,{left:Math.ceil(M.left)-M.left+"px",top:Math.ceil(M.top)-M.top+"px"})})(),this.unSubPixelFix=Do(Li,"resize",A))}definition(c){return new Vs([c]).addToDOM(this.defs.element)}getReferenceURL(){if((Fu||Pu)&&$r.getElementsByTagName("base").length){if(!O(s)){let c=xe(),d=new Vs([{tagName:"svg",attributes:{width:8,height:8},children:[{tagName:"defs",children:[{tagName:"clipPath",attributes:{id:c},children:[{tagName:"rect",attributes:{width:4,height:4}}]}]},{tagName:"rect",attributes:{id:"hitme",width:8,height:8,"clip-path":`url(#${c})`,fill:"rgba(0,0,0,0.001)"}}]}]).addToDOM($r.body);_(d,{position:"fixed",top:0,left:0,zIndex:9e5}),s=$r.elementFromPoint(6,6)?.id==="hitme",$r.body.removeChild(d)}if(s)return se(Li.location.href.split("#")[0],[/<[^>]*>/g,""],[/([\('\)])/g,"\\$1"],[/ /g,"%20"])}return""}getStyle(c){return this.style=Q({fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif',fontSize:"1rem"},c),this.style}setStyle(c){this.boxWrapper.css(this.getStyle(c))}isHidden(){return!this.boxWrapper.getBBox().width}destroy(){let c=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),H(this.gradients||{}),this.gradients=null,this.defs=c.destroy(),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null,null}createElement(c){return new this.Element(this,c)}getRadialAttr(c,d){return{cx:c[0]-c[2]/2+(d.cx||0)*c[2],cy:c[1]-c[2]/2+(d.cy||0)*c[2],r:(d.r||0)*c[2]}}shadowDefinition(c){let d=[`highcharts-drop-shadow-${this.chartIndex}`,...Object.keys(c).map(x=>`${x}-${c[x]}`)].join("-").toLowerCase().replace(/[^a-z\d\-]/g,""),p=Qt({color:"#000000",offsetX:1,offsetY:1,opacity:.15,width:5},c);return this.defs.element.querySelector(`#${d}`)||this.definition({tagName:"filter",attributes:{id:d,filterUnits:p.filterUnits},children:this.getShadowFilterContent(p)}),d}getShadowFilterContent(c){return[{tagName:"feDropShadow",attributes:{dx:c.offsetX,dy:c.offsetY,"flood-color":c.color,"flood-opacity":Math.min(5*c.opacity,1),stdDeviation:c.width/2}}]}buildText(c){new Ou(c).buildSVG()}getContrast(c){if(c==="transparent")return"#000000";let d=In.parse(c).rgba,p=" clamp(0,calc(9e9*(0.5 - (0.2126*r + 0.7152*g + 0.0722*b))),1)";if(dt(d[0])||!In.useColorMix){let x=d.map(w=>{let T=w/255;return T<=.04?T/12.92:Math.pow((T+.055)/1.055,2.4)}),v=.2126*x[0]+.7152*x[1]+.0722*x[2];return 1.05/(v+.05)>(v+.05)/.05?"#FFFFFF":"#000000"}return"color(from "+c+" srgb"+p+p+p+")"}button(c,d,p,x,v={},w,T,A,M,z){let P=this.label(c,d,p,M,void 0,void 0,z,void 0,"button"),G=this.styledMode,Z=arguments,st=0;v=Qt(il.global.buttonTheme,v),G&&(delete v.fill,delete v.stroke,delete v["stroke-width"]);let rt=v.states||{},nt=v.style||{};delete v.states,delete v.style;let it=[Vs.filterUserAttributes(v)],gt=[nt];return G||["hover","select","disabled"].forEach((_t,Wt)=>{it.push(Qt(it[0],Vs.filterUserAttributes(Z[Wt+5]||rt[_t]||{}))),gt.push(it[Wt+1].style),delete it[Wt+1].style}),Do(P.element,Sc?"mouseover":"mouseenter",function(){st!==3&&P.setState(1)}),Do(P.element,Sc?"mouseout":"mouseleave",function(){st!==3&&P.setState(st)}),P.setState=(_t=0)=>{if(_t!==1&&(P.state=st=_t),P.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][_t]),!G){P.attr(it[_t]);let Wt=gt[_t];Rt(Wt)&&P.css(Wt)}},P.attr(it[0]),!G&&(P.css(Q({cursor:"default"},nt)),z&&P.text.css({pointerEvents:"none"})),P.on("touchstart",_t=>_t.stopPropagation()).on("click",function(_t){st!==3&&x?.call(P,_t)})}crispLine(c,d){let[p,x]=c;return O(p[1])&&p[1]===x[1]&&(p[1]=x[1]=b(p[1],d)),O(p[2])&&p[2]===x[2]&&(p[2]=x[2]=b(p[2],d)),c}path(c){let d=this.styledMode?{}:{fill:"none"};return tt(c)?d.d=c:Rt(c)&&Q(d,c),this.createElement("path").attr(d)}circle(c,d,p){let x=Rt(c)?c:c===void 0?{}:{x:c,y:d,r:p},v=this.createElement("circle");return v.xSetter=v.ySetter=function(w,T,A){A.setAttribute("c"+T,w)},v.attr(x)}arc(c,d,p,x,v,w){let T;Rt(c)?(d=(T=c).y,p=T.r,x=T.innerR,v=T.start,w=T.end,c=T.x):T={innerR:x,start:v,end:w};let A=this.symbol("arc",c,d,p,p,T);return A.r=p,A}rect(c,d,p,x,v,w){let T=Rt(c)?c:c===void 0?{}:{x:c,y:d,r:v,width:Math.max(p||0,0),height:Math.max(x||0,0)},A=this.createElement("rect");return this.styledMode||(w!==void 0&&(T["stroke-width"]=w,Q(T,A.crisp(T))),T.fill="none"),A.rSetter=function(M,z,P){A.r=M,zl(P,{rx:M,ry:M})},A.rGetter=function(){return A.r||0},A.attr(T)}roundedRect(c){return this.symbol("roundedRect").attr(c)}setSize(c,d,p){this.width=c,this.height=d,this.boxWrapper.animate({width:c,height:d},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:oe(p,!0)?void 0:0}),this.alignElements()}g(c){let d=this.createElement("g");return c?d.attr({class:"highcharts-"+c}):d}image(c,d,p,x,v,w){let T={preserveAspectRatio:"none"};dt(d)&&(T.x=d),dt(p)&&(T.y=p),dt(x)&&(T.width=x),dt(v)&&(T.height=v);let A=this.createElement("image").attr(T),M=function(z){A.attr({href:c}),w.call(A,z)};if(w){A.attr({href:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="});let z=new Li.Image;Do(z,"load",M),z.src=c,z.complete&&M({})}else A.attr({href:c});return A}symbol(c,d,p,x,v,w){let T,A,M,z,P=this,G=/^url\((.*?)\)$/,Z=G.test(c),st=!Z&&(this.symbols[c]?c:"circle"),rt=st&&this.symbols[st];if(rt)typeof d=="number"&&(A=rt.call(this.symbols,d||0,p||0,x||0,v||0,w)),T=this.path(A),P.styledMode||T.attr("fill","none"),Q(T,{symbolName:st||void 0,x:d,y:p,width:x,height:v}),w&&Q(T,w);else if(Z){M=c.match(G)[1];let nt=T=this.image(M);nt.imgwidth=oe(w?.width,No[M]?.width),nt.imgheight=oe(w?.height,No[M]?.height),z=it=>it.attr({width:it.width,height:it.height}),["width","height"].forEach(it=>{nt[`${it}Setter`]=function(gt,_t){this[_t]=gt;let{alignByTranslate:Wt,element:Vt,width:qt,height:Kt,imgwidth:Zt,imgheight:Se}=this,Ne=_t==="width"?Zt:Se,we=1;w&&w.backgroundSize==="within"&&qt&&Kt&&Zt&&Se?(we=Math.min(qt/Zt,Kt/Se),zl(Vt,{width:Math.round(Zt*we),height:Math.round(Se*we)})):Vt&&Ne&&Vt.setAttribute(_t,Ne),!Wt&&Zt&&Se&&this.translate(((qt||0)-Zt*we)/2,((Kt||0)-Se*we)/2)}}),O(d)&&nt.attr({x:d,y:p}),nt.isImg=!0,nt.symbolUrl=c,O(nt.imgwidth)&&O(nt.imgheight)?z(nt):(nt.attr({width:0,height:0}),Tc("img",{onload:function(){let it=Ia[P.chartIndex];this.width===0&&(_(this,{position:"absolute",top:"-999em"}),$r.body.appendChild(this)),No[M]={width:this.width,height:this.height},nt.imgwidth=this.width,nt.imgheight=this.height,nt.element&&z(nt),this.parentNode&&this.parentNode.removeChild(this),P.imgCount--,P.imgCount||!it||it.hasLoaded||it.onload()},src:M}),this.imgCount++)}return T}clipRect(c,d,p,x){return this.rect(c,d,p,x,0)}text(c,d,p,x){let v={};if(x&&(this.allowHTML||!this.forExport))return this.html(c,d,p);v.x=Math.round(d||0),p&&(v.y=Math.round(p)),O(c)&&(v.text=c);let w=this.createElement("text").attr(v);return x&&(!this.forExport||this.allowHTML)||(w.xSetter=function(T,A,M){let z=M.getElementsByTagName("tspan"),P=M.getAttribute(A);for(let G=0,Z;G<z.length;G++)(Z=z[G]).getAttribute(A)===P&&Z.setAttribute(A,T);M.setAttribute(A,T)}),w}fontMetrics(c){let d=dt(c)?c:ye(_r.prototype.getStyle.call(c,"font-size")||0),p=d<24?d+3:Math.round(1.2*d),x=Math.round(.8*p);return{h:p,b:x,f:d}}rotCorr(c,d,p){let x=c;return d&&p&&(x=Math.max(x*Math.cos(d*Cc),4)),{x:-c/3*Math.sin(d*Cc),y:x}}pathToSegments(c){let d=[],p=[],x={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2};for(let v=0;v<c.length;v++)$t(p[0])&&dt(c[v])&&p.length===x[p[0].toUpperCase()]&&c.splice(v,0,p[0].replace("M","L").replace("m","l")),typeof c[v]=="string"&&(p.length&&d.push(p.slice(0)),p.length=0),p.push(c[v]);return d.push(p.slice(0)),d}label(c,d,p,x,v,w,T,A,M){return new Ao(this,c,d,p,x,v,w,T,A,M)}alignElements(){this.alignedObjects.forEach(c=>c.align())}}Q(en.prototype,{Element:_r,SVG_NS:ho,escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},symbols:wc,draw:ed}),Ml.registerRendererType("svg",en,!0);let{composed:Ln,isFirefox:Pn}=at,{attr:Js,css:ws,createElement:er,defined:Ri,extend:ys,getAlignFactor:fo,isNumber:cs,pInt:ci,pushUnique:Lu}=Ae;function Bu(N,c,d){let p=this.div?.style;_r.prototype[`${c}Setter`].call(this,N,c,d),p&&(d.style[c]=p[c]=N)}let Ro=(N,c)=>{if(!N.div){let d=Js(N.element,"class"),p=N.css,x=er("div",d?{className:d}:void 0,{position:"absolute",left:`${N.translateX||0}px`,top:`${N.translateY||0}px`,...N.styles,display:N.display,opacity:N.opacity,visibility:N.visibility},N.parentGroup?.div||c);N.classSetter=(v,w,T)=>{T.setAttribute("class",v),x.className=v},N.translateXSetter=N.translateYSetter=(v,w)=>{N[w]=v,x.style[w==="translateX"?"left":"top"]=`${v}px`,N.doTransform=!0},N.scaleXSetter=N.scaleYSetter=(v,w)=>{N[w]=v,N.doTransform=!0},N.opacitySetter=N.visibilitySetter=Bu,N.css=v=>(p.call(N,v),v.cursor&&(x.style.cursor=v.cursor),v.pointerEvents&&(x.style.pointerEvents=v.pointerEvents),N),N.on=function(){return _r.prototype.on.apply({element:x,onEvents:N.onEvents},arguments),N},N.div=x}return N.div};class Mo extends _r{static compose(c){Lu(Ln,this.compose)&&(c.prototype.html=function(d,p,x){return new Mo(this,"span").attr({text:d,x:Math.round(p),y:Math.round(x)})})}constructor(c,d){super(c,d),Mo.useForeignObject?this.foreignObject=c.createElement("foreignObject").attr({zIndex:2}):this.css({position:"absolute",...c.styledMode?{}:{fontFamily:c.style.fontFamily,fontSize:c.style.fontSize}}),this.element.style.whiteSpace="nowrap"}getSpanCorrection(c,d,p){this.xCorr=-c*p,this.yCorr=-d}css(c){let d,{element:p}=this,x=p.tagName==="SPAN"&&c&&"width"in c,v=x&&c.width;return x&&(delete c.width,this.textWidth=ci(v)||void 0,d=!0),c?.textOverflow==="ellipsis"&&(c.overflow="hidden",c.whiteSpace="nowrap"),c?.lineClamp&&(c.display="-webkit-box",c.WebkitLineClamp=c.lineClamp,c.WebkitBoxOrient="vertical",c.overflow="hidden"),cs(Number(c?.fontSize))&&(c.fontSize+="px"),ys(this.styles,c),ws(p,c),d&&this.updateTransform(),this}htmlGetBBox(){let{element:c}=this;return{x:c.offsetLeft,y:c.offsetTop,width:c.offsetWidth,height:c.offsetHeight}}updateTransform(){if(!this.added){this.alignOnAdd=!0;return}let{element:c,foreignObject:d,oldTextWidth:p,renderer:x,rotation:v,rotationOriginX:w,rotationOriginY:T,scaleX:A,scaleY:M,styles:{display:z="inline-block",whiteSpace:P},textAlign:G="left",textWidth:Z,translateX:st=0,translateY:rt=0,x:nt=0,y:it=0}=this,gt=()=>this.textPxLength?this.textPxLength:(ws(c,{width:"",whiteSpace:P||"nowrap"}),c.offsetWidth);if(d||ws(c,{marginLeft:`${st}px`,marginTop:`${rt}px`}),c.tagName==="SPAN"){let _t,Wt=[v,G,c.innerHTML,Z,this.textAlign].join(","),Vt=-(this.parentGroup?.padding*1)||0;if(Z!==p){let Se=gt(),Ne=Z||0,we=!x.styledMode&&c.style.textOverflow===""&&c.style.webkitLineClamp;(Ne>p||Se>Ne||we)&&(/[\-\s\u00AD]/.test(c.textContent||c.innerText)||c.style.textOverflow==="ellipsis")&&(ws(c,{width:(v||A||Se>Ne||we)&&cs(Z)?Z+"px":"auto",display:z,whiteSpace:P||"normal"}),this.oldTextWidth=Z)}d&&(ws(c,{display:"inline-block",verticalAlign:"top"}),d.attr({width:x.width,height:x.height})),Wt!==this.cTT&&(_t=x.fontMetrics(c).b,Ri(v)&&!d&&(v!==(this.oldRotation||0)||G!==this.oldAlign)&&ws(c,{transform:`rotate(${v}deg)`,transformOrigin:`${Vt}% ${Vt}px`}),this.getSpanCorrection(!Ri(v)&&!this.textWidth&&this.textPxLength||c.offsetWidth,_t,fo(G)));let{xCorr:qt=0,yCorr:Kt=0}=this,Zt={left:`${nt+qt}px`,top:`${it+Kt}px`,textAlign:G,transformOrigin:`${(w??nt)-qt-nt-Vt}px ${(T??it)-Kt-it-Vt}px`};(A||M)&&(Zt.transform=`scale(${A??1},${M??1})`),d?(super.updateTransform(),cs(nt)&&cs(it)?(d.attr({x:nt+qt,y:it+Kt,width:c.offsetWidth+3,height:c.offsetHeight,"transform-origin":c.getAttribute("transform-origin")||"0 0"}),ws(c,{display:z,textAlign:G})):Pn&&d.attr({width:0,height:0})):ws(c,Zt),this.cTT=Wt,this.oldRotation=v,this.oldAlign=G}}add(c){let{foreignObject:d,renderer:p}=this,x=p.box.parentNode,v=[];if(d)d.add(c),super.add(p.createElement("body").attr({xmlns:"http://www.w3.org/1999/xhtml"}).css({background:"transparent",margin:"0 3px 0 0"}).add(d));else{let w;if(this.parentGroup=c,c&&!(w=c.div)){let T=c;for(;T;)v.push(T),T=T.parentGroup;for(let A of v.reverse())w=Ro(A,x)}(w||x).appendChild(this.element)}return this.added=!0,this.alignOnAdd&&this.updateTransform(),this}textSetter(c){c!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,Vs.setElementHTML(this.element,c??""),this.textStr=c,this.doTransform=!0)}alignSetter(c){this.alignValue=this.textAlign=c,this.doTransform=!0}xSetter(c,d){this[d]=c,this.doTransform=!0}}let fr=Mo.prototype;fr.visibilitySetter=fr.opacitySetter=Bu,fr.ySetter=fr.rotationSetter=fr.rotationOriginXSetter=fr.rotationOriginYSetter=fr.xSetter,(h=V||(V={})).xAxis={alignTicks:!0,allowDecimals:void 0,panningEnabled:!0,zIndex:2,zoomEnabled:!0,dateTimeLabelFormats:{millisecond:{main:"%[HMSL]",range:!1},second:{main:"%[HMS]",range:!1},minute:{main:"%[HM]",range:!1},hour:{main:"%[HM]",range:!1},day:{main:"%[eb]"},week:{main:"%[eb]"},month:{main:"%[bY]"},year:{main:"%Y"}},endOnTick:!1,gridLineDashStyle:"Solid",gridZIndex:1,labels:{autoRotationLimit:80,distance:15,enabled:!0,indentation:10,overflow:"justify",reserveSpace:void 0,rotation:void 0,staggerLines:0,step:0,useHTML:!1,zIndex:7,style:{color:"#333333",cursor:"default",fontSize:"0.8em",textOverflow:"ellipsis"}},maxPadding:.01,minorGridLineDashStyle:"Solid",minorTickLength:2,minorTickPosition:"outside",minorTicksPerMajor:5,minPadding:.01,offset:void 0,reversed:void 0,reversedStacks:!1,showEmpty:!0,showFirstLabel:!0,showLastLabel:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",title:{align:"middle",useHTML:!1,x:0,y:0,style:{color:"#666666",fontSize:"0.8em"}},visible:!0,minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#333333",lineWidth:1,gridLineColor:"#e6e6e6",gridLineWidth:void 0,tickColor:"#333333"},h.yAxis={reversedStacks:!0,endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:void 0},startOnTick:!0,title:{},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){let{numberFormatter:N}=this.axis.chart;return N(this.total||0,-1)},style:{color:"#000000",fontSize:"0.7em",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0};let rl=V,{addEvent:Ea,isFunction:Xr,objectEach:tx,removeEvent:ex}=Ae;(E||(E={})).registerEventOptions=function(N,c){N.eventOptions=N.eventOptions||{},tx(c.events,function(d,p){N.eventOptions[p]!==d&&(N.eventOptions[p]&&(ex(N,p,N.eventOptions[p]),delete N.eventOptions[p]),Xr(d)&&(N.eventOptions[p]=d,Ea(N,p,d,{order:0})))})};let nd=E,{deg2rad:Rf}=at,{clamp:Mf,correctFloat:Ic,defined:Of,destroyObjectProperties:nx,extend:sd,fireEvent:Wl,getAlignFactor:sx,isNumber:id,merge:lg,objectEach:ix,pick:Oo}=Ae,Ec=class{constructor(N,c,d,p,x){this.isNew=!0,this.isNewLabel=!0,this.axis=N,this.pos=c,this.type=d||"",this.parameters=x||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,Wl(this,"init"),d||p||this.addLabel()}addLabel(){let N=this,c=N.axis,d=c.options,p=c.chart,x=c.categories,v=c.logarithmic,w=c.names,T=N.pos,A=Oo(N.options?.labels,d.labels),M=c.tickPositions,z=T===M[0],P=T===M[M.length-1],G=(!A.step||A.step===1)&&c.tickInterval===1,Z=M.info,st=N.label,rt,nt,it,gt=this.parameters.category||(x?Oo(x[T],w[T],T):T);v&&id(gt)&&(gt=Ic(v.lin2log(gt))),c.dateTime&&(Z?rt=(nt=p.time.resolveDTLFormat(d.dateTimeLabelFormats[!d.grid?.enabled&&Z.higherRanks[T]||Z.unitName])).main:id(gt)&&(rt=c.dateTime.getXDateFormat(gt,d.dateTimeLabelFormats||{}))),N.isFirst=z,N.isLast=P;let _t={axis:c,chart:p,dateTimeLabelFormat:rt,isFirst:z,isLast:P,pos:T,tick:N,tickPositionInfo:Z,value:gt};Wl(this,"labelFormat",_t);let Wt=Kt=>A.formatter?A.formatter.call(Kt,Kt):A.format?(Kt.text=c.defaultLabelFormatter.call(Kt),dr.format(A.format,Kt,p)):c.defaultLabelFormatter.call(Kt),Vt=Wt.call(_t,_t),qt=nt?.list;qt?N.shortenLabel=function(){for(it=0;it<qt.length;it++)if(sd(_t,{dateTimeLabelFormat:qt[it]}),st.attr({text:Wt.call(_t,_t)}),st.getBBox().width<c.getSlotWidth(N)-2*(A.padding||0))return;st.attr({text:""})}:N.shortenLabel=void 0,G&&c._addedPlotLB&&N.moveLabel(Vt,A),Of(st)||N.movedLabel?st&&st.textStr!==Vt&&!G&&(!st.textWidth||A.style.width||st.styles.width||st.css({width:null}),st.attr({text:Vt}),st.textPxLength=st.getBBox().width):(N.label=st=N.createLabel(Vt,A),N.rotation=0)}createLabel(N,c,d){let p=this.axis,{renderer:x,styledMode:v}=p.chart,w=c.style.whiteSpace,T=Of(N)&&c.enabled?x.text(N,d?.x,d?.y,c.useHTML).add(p.labelGroup):void 0;return T&&(v||T.css(lg(c.style)),T.textPxLength=T.getBBox().width,!v&&w&&T.css({whiteSpace:w})),T}destroy(){nx(this,this.axis)}getPosition(N,c,d,p){let x=this.axis,v=x.chart,w=p&&v.oldChartHeight||v.chartHeight,T={x:N?Ic(x.translate(c+d,void 0,void 0,p)+x.transB):x.left+x.offset+(x.opposite?(p&&v.oldChartWidth||v.chartWidth)-x.right-x.left:0),y:N?w-x.bottom+x.offset-(x.opposite?x.height:0):Ic(w-x.translate(c+d,void 0,void 0,p)-x.transB)};return T.y=Mf(T.y,-1e9,1e9),Wl(this,"afterGetPosition",{pos:T}),T}getLabelPosition(N,c,d,p,x,v,w,T){let A,M,z=this.axis,P=z.transA,G=z.isLinked&&z.linkedParent?z.linkedParent.reversed:z.reversed,Z=z.staggerLines,st=z.tickRotCorr||{x:0,y:0},rt=p||z.reserveSpaceDefault?0:-z.labelOffset*(z.labelAlign==="center"?.5:1),nt=x.distance,it={};return A=z.side===0?d.rotation?-nt:-d.getBBox().height:z.side===2?st.y+nt:Math.cos(d.rotation*Rf)*(st.y-d.getBBox(!1,0).height/2),Of(x.y)&&(A=z.side===0&&z.horiz?x.y+A:x.y),N=N+Oo(x.x,[0,1,0,-1][z.side]*nt)+rt+st.x-(v&&p?v*P*(G?-1:1):0),c=c+A-(v&&!p?v*P*(G?1:-1):0),Z&&(M=w/(T||1)%Z,z.opposite&&(M=Z-M-1),c+=M*(z.labelOffset/Z)),it.x=N,it.y=Math.round(c),Wl(this,"afterGetLabelPosition",{pos:it,tickmarkOffset:v,index:w}),it}getLabelSize(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0}getMarkPath(N,c,d,p,x=!1,v){return v.crispLine([["M",N,c],["L",N+(x?0:-d),c+(x?d:0)]],p)}handleOverflow(N){let c=this.axis,d=c.options.labels,p=N.x,x=c.chart.chartWidth,v=c.chart.spacing,w=Oo(c.labelLeft,Math.min(c.pos,v[3])),T=Oo(c.labelRight,Math.max(c.isRadial?0:c.pos+c.len,x-v[1])),A=this.label,M=this.rotation,z=sx(c.labelAlign||A.attr("align")),P=A.getBBox().width,G=c.getSlotWidth(this),Z=G,st=1,rt;M||d.overflow!=="justify"?M<0&&p-z*P<w?rt=Math.round(p/Math.cos(M*Rf)-w):M>0&&p+z*P>T&&(rt=Math.round((x-p)/Math.cos(M*Rf))):(p-z*P<w?Z=N.x+Z*(1-z)-w:p+(1-z)*P>T&&(Z=T-N.x+Z*z,st=-1),(Z=Math.min(G,Z))<G&&c.labelAlign==="center"&&(N.x+=st*(G-Z-z*(G-Math.min(P,Z)))),(P>Z||c.autoRotation&&A?.styles?.width)&&(rt=Z)),rt&&A&&(this.shortenLabel?this.shortenLabel():A.css(sd({},{width:Math.floor(rt)+"px",lineClamp:+!c.isRadial})))}moveLabel(N,c){let d=this,p=d.label,x=d.axis,v=!1,w;p&&p.textStr===N?(d.movedLabel=p,v=!0,delete d.label):ix(x.ticks,function(T){v||T.isNew||T===d||!T.label||T.label.textStr!==N||(d.movedLabel=T.label,v=!0,T.labelPos=d.movedLabel.xy,delete T.label)}),!v&&(d.labelPos||p)&&(w=d.labelPos||p.xy,d.movedLabel=d.createLabel(N,c,w),d.movedLabel&&d.movedLabel.attr({opacity:0}))}render(N,c,d){let p=this.axis,x=p.horiz,v=this.pos,w=Oo(this.tickmarkOffset,p.tickmarkOffset),T=this.getPosition(x,v,w,c),A=T.x,M=T.y,z=p.pos,P=z+p.len,G=x?A:M,Z=Oo(d,this.label?.newOpacity,1);!p.chart.polar&&(Ic(G)<z||G>P)&&(d=0),d??(d=1),this.isActive=!0,this.renderGridLine(c,d),this.renderMark(T,d),this.renderLabel(T,c,Z,N),this.isNew=!1,Wl(this,"afterRender")}renderGridLine(N,c){let d=this.axis,p=d.options,x={},v=this.pos,w=this.type,T=Oo(this.tickmarkOffset,d.tickmarkOffset),A=d.chart.renderer,M=this.gridLine,z,P=p.gridLineWidth,G=p.gridLineColor,Z=p.gridLineDashStyle;this.type==="minor"&&(P=p.minorGridLineWidth,G=p.minorGridLineColor,Z=p.minorGridLineDashStyle),M||(d.chart.styledMode||(x.stroke=G,x["stroke-width"]=P||0,x.dashstyle=Z),w||(x.zIndex=1),N&&(c=0),this.gridLine=M=A.path().attr(x).addClass("highcharts-"+(w?w+"-":"")+"grid-line").add(d.gridGroup)),M&&(z=d.getPlotLinePath({value:v+T,lineWidth:M.strokeWidth(),force:"pass",old:N,acrossPanes:!1}))&&M[N||this.isNew?"attr":"animate"]({d:z,opacity:c})}renderMark(N,c){let d=this.axis,p=d.options,x=d.chart.renderer,v=this.type,w=d.tickSize(v?v+"Tick":"tick"),T=N.x,A=N.y,M=Oo(p[v!=="minor"?"tickWidth":"minorTickWidth"],!v&&d.isXAxis?1:0),z=p[v!=="minor"?"tickColor":"minorTickColor"],P=this.mark,G=!P;w&&(d.opposite&&(w[0]=-w[0]),!P&&(this.mark=P=x.path().addClass("highcharts-"+(v?v+"-":"")+"tick").add(d.axisGroup),d.chart.styledMode||P.attr({stroke:z,"stroke-width":M})),P[G?"attr":"animate"]({d:this.getMarkPath(T,A,w[0],P.strokeWidth(),d.horiz,x),opacity:c}))}renderLabel(N,c,d,p){let x=this.axis,v=x.horiz,w=x.options,T=this.label,A=w.labels,M=A.step,z=Oo(this.tickmarkOffset,x.tickmarkOffset),P=N.x,G=N.y,Z=!0;T&&id(P)&&(T.xy=N=this.getLabelPosition(P,G,T,v,A,z,p,M),(!this.isFirst||this.isLast||w.showFirstLabel)&&(!this.isLast||this.isFirst||w.showLastLabel)?!v||A.step||A.rotation||c||d===0||this.handleOverflow(N):Z=!1,M&&p%M&&(Z=!1),Z&&id(N.y)?(N.opacity=d,T[this.isNewLabel?"attr":"animate"](N).show(!0),this.isNewLabel=!1):(T.hide(),this.isNewLabel=!0))}replaceMovedLabel(){let N=this.label,c=this.axis;N&&!this.isNew&&(N.animate({opacity:0},void 0,N.destroy),delete this.label),c.isDirty=!0,this.label=this.movedLabel,delete this.movedLabel}},{animObject:rx}=Un,{xAxis:cg,yAxis:ox}=rl,{defaultOptions:Ff}=Xe,{registerEventOptions:ax}=nd,{deg2rad:ug}=at,{arrayMax:hg,arrayMin:dg,clamp:zu,correctFloat:qr,defined:Ms,destroyObjectProperties:lx,erase:Wu,error:rd,extend:_c,fireEvent:ri,getClosestDistance:fg,insertItem:pg,isArray:gg,isNumber:$n,isString:Vu,merge:od,normalizeTickInterval:cx,objectEach:ad,pick:is,relativeLength:ld,removeEvent:ux,splat:mg,syncTimeout:hx}=Ae,ta=(N,c)=>cx(c,void 0,void 0,is(N.options.allowDecimals,c<.5||N.tickAmount!==void 0),!!N.tickAmount);_c(Ff,{xAxis:cg,yAxis:od(cg,ox)});class Ac{constructor(c,d,p){this.init(c,d,p)}init(c,d,p=this.coll){let x=p==="xAxis",v=this.isZAxis||(c.inverted?!x:x);this.chart=c,this.horiz=v,this.isXAxis=x,this.coll=p,ri(this,"init",{userOptions:d}),this.opposite=is(d.opposite,this.opposite),this.side=is(d.side,this.side,v?2*!this.opposite:this.opposite?1:3),this.setOptions(d);let w=this.options,T=w.labels;this.type??(this.type=w.type||"linear"),this.uniqueNames??(this.uniqueNames=w.uniqueNames??!0),ri(this,"afterSetType"),this.userOptions=d,this.minPixelPadding=0,this.reversed=is(w.reversed,this.reversed),this.visible=w.visible,this.zoomEnabled=w.zoomEnabled,this.hasNames=this.type==="category"||w.categories===!0,this.categories=gg(w.categories)&&w.categories||(this.hasNames?[]:void 0),this.names||(this.names=[],this.names.keys={}),this.plotLinesAndBandsGroups={},this.positiveValuesOnly=!!this.logarithmic,this.isLinked=Ms(w.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len??(this.len=0),this.minRange=this.userMinRange=w.minRange||w.maxZoom,this.range=w.range,this.offset=w.offset||0,this.max=void 0,this.min=void 0;let A=is(w.crosshair,mg(c.options.tooltip.crosshairs)[+!x]);this.crosshair=A===!0?{}:A,c.axes.indexOf(this)===-1&&(x?c.axes.splice(c.xAxis.length,0,this):c.axes.push(this),pg(this,c[this.coll])),c.orderItems(this.coll),this.series=this.series||[],c.inverted&&!this.isZAxis&&x&&!Ms(this.reversed)&&(this.reversed=!0),this.labelRotation=$n(T.rotation)?T.rotation:void 0,ax(this,w),ri(this,"afterInit")}setOptions(c){let d=this.horiz?{labels:{autoRotation:[-45],padding:3},margin:15}:{labels:{padding:1},title:{rotation:90*this.side}};this.options=od(d,this.coll==="yAxis"?{title:{text:this.chart.options.lang.yAxisTitle}}:{},Ff[this.coll],c),ri(this,"afterSetOptions",{userOptions:c})}defaultLabelFormatter(){let c=this.axis,{numberFormatter:d}=this.chart,p=$n(this.value)?this.value:NaN,x=c.chart.time,v=c.categories,w=this.dateTimeLabelFormat,T=Ff.lang,A=T.numericSymbols,M=T.numericSymbolMagnitude||1e3,z=c.logarithmic?Math.abs(p):c.tickInterval,P=A?.length,G,Z;if(v)Z=`${this.value}`;else if(w)Z=x.dateFormat(w,p,!0);else if(P&&A&&z>=1e3)for(;P--&&Z===void 0;)z>=(G=Math.pow(M,P+1))&&10*p%G==0&&A[P]!==null&&p!==0&&(Z=d(p/G,-1)+A[P]);return Z===void 0&&(Z=Math.abs(p)>=1e4?d(p,-1):d(p,-1,void 0,"")),Z}getSeriesExtremes(){let c,d=this;ri(this,"getSeriesExtremes",null,function(){d.hasVisibleSeries=!1,d.dataMin=d.dataMax=d.threshold=void 0,d.softThreshold=!d.isXAxis,d.series.forEach(p=>{if(p.reserveSpace()){let x=p.options,v,w=x.threshold,T,A;if(d.hasVisibleSeries=!0,d.positiveValuesOnly&&0>=(w||0)&&(w=void 0),d.isXAxis)(v=p.getColumn("x")).length&&(v=d.logarithmic?v.filter(M=>M>0):v,T=(c=p.getXExtremes(v)).min,A=c.max,$n(T)||T instanceof Date||(v=v.filter($n),T=(c=p.getXExtremes(v)).min,A=c.max),v.length&&(d.dataMin=Math.min(is(d.dataMin,T),T),d.dataMax=Math.max(is(d.dataMax,A),A)));else{let M=p.applyExtremes();$n(M.dataMin)&&(T=M.dataMin,d.dataMin=Math.min(is(d.dataMin,T),T)),$n(M.dataMax)&&(A=M.dataMax,d.dataMax=Math.max(is(d.dataMax,A),A)),Ms(w)&&(d.threshold=w),(!x.softThreshold||d.positiveValuesOnly)&&(d.softThreshold=!1)}}})}),ri(this,"afterGetSeriesExtremes")}translate(c,d,p,x,v,w){let T=this.linkedParent||this,A=x&&T.old?T.old.min:T.min;if(!$n(A))return NaN;let M=T.minPixelPadding,z=(T.isOrdinal||T.brokenAxis?.hasBreaks||T.logarithmic&&v)&&!!T.lin2val,P=1,G=0,Z=x&&T.old?T.old.transA:T.transA,st=0;return Z||(Z=T.transA),p&&(P*=-1,G=T.len),T.reversed&&(P*=-1,G-=P*(T.sector||T.len)),d?(st=(c=c*P+G-M)/Z+A,z&&(st=T.lin2val(st))):(z&&(c=T.val2lin(c)),st=P*(c-A)*Z+G+P*M+($n(w)?Z*w:0),T.isRadial||(st=qr(st))),st}toPixels(c,d){return this.translate(this.chart?.time.parse(c)??NaN,!1,!this.horiz,void 0,!0)+(d?0:this.pos)}toValue(c,d){return this.translate(c-(d?0:this.pos),!0,!this.horiz,void 0,!0)}getPlotLinePath(c){let d=this,p=d.chart,x=d.left,v=d.top,w=c.old,T=c.value,A=c.lineWidth,M=w&&p.oldChartHeight||p.chartHeight,z=w&&p.oldChartWidth||p.chartWidth,P=d.transB,G=c.translatedValue,Z=c.force,st,rt,nt,it,gt;function _t(Vt,qt,Kt){return Z!=="pass"&&(Vt<qt||Vt>Kt)&&(Z?Vt=zu(Vt,qt,Kt):gt=!0),Vt}let Wt={value:T,lineWidth:A,old:w,force:Z,acrossPanes:c.acrossPanes,translatedValue:G};return ri(this,"getPlotLinePath",Wt,function(Vt){st=nt=(G=zu(G=is(G,d.translate(T,void 0,void 0,w)),-1e9,1e9))+P,rt=it=M-G-P,$n(G)?d.horiz?(rt=v,it=M-d.bottom+(d.options.isInternal?0:p.scrollablePixelsY||0),st=nt=_t(st,x,x+d.width)):(st=x,nt=z-d.right+(p.scrollablePixelsX||0),rt=it=_t(rt,v,v+d.height)):(gt=!0,Z=!1),Vt.path=gt&&!Z?void 0:p.renderer.crispLine([["M",st,rt],["L",nt,it]],A||1)}),Wt.path}getLinearTickPositions(c,d,p){let x,v,w,T=qr(Math.floor(d/c)*c),A=qr(Math.ceil(p/c)*c),M=[];if(qr(T+c)===T&&(w=20),this.single)return[d];for(x=T;x<=A&&(M.push(x),(x=qr(x+c,w))!==v);)v=x;return M}getMinorTickInterval(){let{minorTicks:c,minorTickInterval:d}=this.options;return c===!0?is(d,"auto"):c!==!1?d:void 0}getMinorTickPositions(){let c=this.options,d=this.tickPositions,p=this.minorTickInterval,x=this.pointRangePadding||0,v=(this.min||0)-x,w=(this.max||0)+x,T=this.brokenAxis?.hasBreaks?this.brokenAxis.unitLength:w-v,A=[],M;if(T&&T/p<this.len/3){let z=this.logarithmic;if(z)this.paddedTicks.forEach(function(P,G,Z){G&&A.push.apply(A,z.getLogTickPositions(p,Z[G-1],Z[G],!0))});else if(this.dateTime&&this.getMinorTickInterval()==="auto")A=A.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(p),v,w,c.startOfWeek));else for(M=v+(d[0]-v)%p;M<=w&&M!==A[0];M+=p)A.push(M)}return A.length!==0&&this.trimTicks(A),A}adjustForMinRange(){let c=this.options,d=this.logarithmic,p=this.chart.time,{max:x,min:v,minRange:w}=this,T,A,M,z;this.isXAxis&&w===void 0&&!d&&(w=Ms(c.min)||Ms(c.max)||Ms(c.floor)||Ms(c.ceiling)?null:Math.min(5*(fg(this.series.map(P=>{let G=P.getColumn("x");return P.xIncrement?G.slice(0,2):G}))||0),this.dataMax-this.dataMin)),$n(x)&&$n(v)&&$n(w)&&x-v<w&&(A=this.dataMax-this.dataMin>=w,T=(w-x+v)/2,M=[v-T,p.parse(c.min)??v-T],A&&(M[2]=d?d.log2lin(this.dataMin):this.dataMin),z=[(v=hg(M))+w,p.parse(c.max)??v+w],A&&(z[2]=d?d.log2lin(this.dataMax):this.dataMax),(x=dg(z))-v<w&&(M[0]=x-w,M[1]=p.parse(c.min)??x-w,v=hg(M))),this.minRange=w,this.min=v,this.max=x}getClosest(){let c,d;if(this.categories)d=1;else{let p=[];this.series.forEach(function(x){let v=x.closestPointRange,w=x.getColumn("x");w.length===1?p.push(w[0]):x.sorted&&Ms(v)&&x.reserveSpace()&&(d=Ms(d)?Math.min(d,v):v)}),p.length&&(p.sort((x,v)=>x-v),c=fg([p]))}return c&&d?Math.min(c,d):c||d}nameToX(c){let d=gg(this.options.categories),p=d?this.categories:this.names,x=c.options.x,v;return c.series.requireSorting=!1,Ms(x)||(x=this.uniqueNames&&p?d?p.indexOf(c.name):is(p.keys[c.name],-1):c.series.autoIncrement()),x===-1?!d&&p&&(v=p.length):$n(x)&&(v=x),v!==void 0?(this.names[v]=c.name,this.names.keys[c.name]=v):c.x&&(v=c.x),v}updateNames(){let c=this,d=this.names;d.length>0&&(Object.keys(d.keys).forEach(function(p){delete d.keys[p]}),d.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach(p=>{p.xIncrement=null,(!p.points||p.isDirtyData)&&(c.max=Math.max(c.max||0,p.dataTable.rowCount-1),p.processData(),p.generatePoints());let x=p.getColumn("x").slice();p.data.forEach((v,w)=>{let T=x[w];v?.options&&v.name!==void 0&&(T=c.nameToX(v))!==void 0&&T!==v.x&&(x[w]=v.x=T)}),p.dataTable.setColumn("x",x)}))}setAxisTranslation(){let c=this,d=c.max-c.min,p=c.linkedParent,x=!!c.categories,v=c.isXAxis,w=c.axisPointRange||0,T,A=0,M=0,z,P=c.transA;(v||x||w)&&(T=c.getClosest(),p?(A=p.minPointOffset,M=p.pointRangePadding):c.series.forEach(function(G){let Z=x?1:v?is(G.options.pointRange,T,0):c.axisPointRange||0,st=G.options.pointPlacement;if(w=Math.max(w,Z),!c.single||x){let rt=G.is("xrange")?!v:v;A=Math.max(A,rt&&Vu(st)?0:Z/2),M=Math.max(M,rt&&st==="on"?0:Z)}}),z=c.ordinal?.slope&&T?c.ordinal.slope/T:1,c.minPointOffset=A*=z,c.pointRangePadding=M*=z,c.pointRange=Math.min(w,c.single&&x?1:d),v&&(c.closestPointRange=T)),c.translationSlope=c.transA=P=c.staticScale||c.len/(d+M||1),c.transB=c.horiz?c.left:c.bottom,c.minPixelPadding=P*A,ri(this,"afterSetAxisTranslation")}minFromRange(){let{max:c,min:d}=this;return $n(c)&&$n(d)&&c-d||void 0}setTickInterval(c){let{categories:d,chart:p,dataMax:x,dataMin:v,dateTime:w,isXAxis:T,logarithmic:A,options:M,softThreshold:z}=this,P=p.time,G=$n(this.threshold)?this.threshold:void 0,Z=this.minRange||0,{ceiling:st,floor:rt,linkedTo:nt,softMax:it,softMin:gt}=M,_t=$n(nt)&&p[this.coll]?.[nt],Wt=M.tickPixelInterval,Vt=M.maxPadding,qt=M.minPadding,Kt=0,Zt,Se=$n(M.tickInterval)&&M.tickInterval>=0?M.tickInterval:void 0,Ne,we,je,Qe;if(w||d||_t||this.getTickAmount(),je=is(this.userMin,P.parse(M.min)),Qe=is(this.userMax,P.parse(M.max)),_t?(this.linkedParent=_t,Zt=_t.getExtremes(),this.min=is(Zt.min,Zt.dataMin),this.max=is(Zt.max,Zt.dataMax),this.type!==_t.type&&rd(11,!0,p)):(z&&Ms(G)&&$n(x)&&$n(v)&&(v>=G?(Ne=G,qt=0):x<=G&&(we=G,Vt=0)),this.min=is(je,Ne,v),this.max=is(Qe,we,x)),$n(this.max)&&$n(this.min)&&(A&&(this.positiveValuesOnly&&!c&&0>=Math.min(this.min,is(v,this.min))&&rd(10,!0,p),this.min=qr(A.log2lin(this.min),16),this.max=qr(A.log2lin(this.max),16)),this.range&&$n(v)&&(this.userMin=this.min=je=Math.max(v,this.minFromRange()||0),this.userMax=Qe=this.max,this.range=void 0)),ri(this,"foundExtremes"),this.adjustForMinRange(),$n(this.min)&&$n(this.max)){if(!$n(this.userMin)&&$n(gt)&&gt<this.min&&(this.min=je=gt),!$n(this.userMax)&&$n(it)&&it>this.max&&(this.max=Qe=it),d||this.axisPointRange||this.stacking?.usePercentage||_t||(Kt=this.max-this.min)&&(!Ms(je)&&qt&&(this.min-=Kt*qt),!Ms(Qe)&&Vt&&(this.max+=Kt*Vt)),!$n(this.userMin)&&$n(rt)&&(this.min=Math.max(this.min,rt)),!$n(this.userMax)&&$n(st)&&(this.max=Math.min(this.max,st)),z&&$n(v)&&$n(x)){let Tn=G||0;!Ms(je)&&this.min<Tn&&v>=Tn?this.min=M.minRange?Math.min(Tn,this.max-Z):Tn:!Ms(Qe)&&this.max>Tn&&x<=Tn&&(this.max=M.minRange?Math.max(Tn,this.min+Z):Tn)}!p.polar&&this.min>this.max&&(Ms(M.min)?this.max=this.min:Ms(M.max)&&(this.min=this.max)),Kt=this.max-this.min}if(this.min!==this.max&&$n(this.min)&&$n(this.max)?_t&&!Se&&Wt===_t.options.tickPixelInterval?this.tickInterval=Se=_t.tickInterval:this.tickInterval=is(Se,this.tickAmount?Kt/Math.max(this.tickAmount-1,1):void 0,d?1:Kt*Wt/Math.max(this.len,Wt)):this.tickInterval=1,T&&!c){let Tn=this.min!==this.old?.min||this.max!==this.old?.max;this.series.forEach(function(yn){yn.forceCrop=yn.forceCropping?.(),yn.processData(Tn)}),ri(this,"postProcessData",{hasExtremesChanged:Tn})}this.setAxisTranslation(),ri(this,"initialAxisTranslation"),this.pointRange&&!Se&&(this.tickInterval=Math.max(this.pointRange,this.tickInterval));let cn=is(M.minTickInterval,w&&!this.series.some(Tn=>!Tn.sorted)?this.closestPointRange:0);!Se&&cn&&this.tickInterval<cn&&(this.tickInterval=cn),w||A||Se||(this.tickInterval=ta(this,this.tickInterval)),this.tickAmount||(this.tickInterval=this.unsquish()),this.setTickPositions()}setTickPositions(){let c=this.options,d=c.tickPositions,p=c.tickPositioner,x=this.getMinorTickInterval(),v=!this.isPanning,w=v&&c.startOnTick,T=v&&c.endOnTick,A=[],M;if(this.tickmarkOffset=this.categories&&c.tickmarkPlacement==="between"&&this.tickInterval===1?.5:0,this.single=this.min===this.max&&Ms(this.min)&&!this.tickAmount&&(this.min%1==0||c.allowDecimals!==!1),d)A=d.slice();else if($n(this.min)&&$n(this.max)){if(!this.ordinal?.positions&&(this.max-this.min)/this.tickInterval>Math.max(2*this.len,200))A=[this.min,this.max],rd(19,!1,this.chart);else if(this.dateTime)A=this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,c.units),this.min,this.max,c.startOfWeek,this.ordinal?.positions,this.closestPointRange,!0);else if(this.logarithmic)A=this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max);else{let z=this.tickInterval,P=z;for(;P<=2*z&&(A=this.getLinearTickPositions(this.tickInterval,this.min,this.max),this.tickAmount&&A.length>this.tickAmount);)this.tickInterval=ta(this,P*=1.1)}A.length>this.len&&(A=[A[0],A[A.length-1]])[0]===A[1]&&(A.length=1),p&&(this.tickPositions=A,(M=p.apply(this,[this.min,this.max]))&&(A=M))}this.tickPositions=A,this.minorTickInterval=x==="auto"&&this.tickInterval?this.tickInterval/c.minorTicksPerMajor:x,this.paddedTicks=A.slice(0),this.trimTicks(A,w,T),!this.isLinked&&$n(this.min)&&$n(this.max)&&(this.single&&A.length<2&&!this.categories&&!this.series.some(z=>z.is("heatmap")&&z.options.pointPlacement==="between")&&(this.min-=.5,this.max+=.5),d||M||this.adjustTickAmount()),ri(this,"afterSetTickPositions")}trimTicks(c,d,p){let x=c[0],v=c[c.length-1],w=!this.isOrdinal&&this.minPointOffset||0;if(ri(this,"trimTicks"),!this.isLinked||!this.grid){if(d&&x!==-1/0)this.min=x;else for(;this.min-w>c[0];)c.shift();if(p)this.max=v;else for(;this.max+w<c[c.length-1];)c.pop();c.length===0&&Ms(x)&&!this.options.tickPositions&&c.push((v+x)/2)}}alignToOthers(){let c,d=this,p=d.chart,x=[this],v=d.options,w=p.options.chart,T=this.coll==="yAxis"&&w.alignThresholds,A=[];if(d.thresholdAlignment=void 0,(w.alignTicks!==!1&&v.alignTicks||T)&&v.startOnTick!==!1&&v.endOnTick!==!1&&!d.logarithmic){let M=P=>{let{horiz:G,options:Z}=P;return[G?Z.left:Z.top,Z.width,Z.height,Z.pane].join(",")},z=M(this);p[this.coll].forEach(function(P){let{series:G}=P;G.length&&G.some(Z=>Z.visible)&&P!==d&&M(P)===z&&(c=!0,x.push(P))})}if(c&&T){x.forEach(z=>{let P=z.getThresholdAlignment(d);$n(P)&&A.push(P)});let M=A.length>1?A.reduce((z,P)=>z+=P,0)/A.length:void 0;x.forEach(z=>{z.thresholdAlignment=M})}return c}getThresholdAlignment(c){if((!$n(this.dataMin)||this!==c&&this.series.some(d=>d.isDirty||d.isDirtyData||d.xAxis?.isDirty))&&this.getSeriesExtremes(),$n(this.threshold)){let d=zu((this.threshold-(this.dataMin||0))/((this.dataMax||0)-(this.dataMin||0)),0,1);return this.options.reversed&&(d=1-d),d}}getTickAmount(){let c=this.options,d=c.tickPixelInterval,p=c.tickAmount;Ms(c.tickInterval)||p||!(this.len<d)||this.isRadial||this.logarithmic||!c.startOnTick||!c.endOnTick||(p=2),!p&&this.alignToOthers()&&(p=Math.ceil(this.len/d)+1),p<4&&(this.finalTickAmt=p,p=5),this.tickAmount=p}adjustTickAmount(){let c=this,{finalTickAmt:d,max:p,min:x,options:v,tickPositions:w,tickAmount:T,thresholdAlignment:A}=c,M=w?.length,z=is(c.threshold,c.softThreshold?0:null),P,G,Z=c.tickInterval,st,rt=()=>w.push(qr(w[w.length-1]+Z)),nt=()=>w.unshift(qr(w[0]-Z));if($n(A)&&(st=A===0?0:A===1?T-1:Math.round(zu(A*(T-1),1,T-2)),v.reversed&&(st=T-1-st)),c.hasData()&&$n(x)&&$n(p)){let it=()=>{c.transA*=(M-1)/(T-1),c.min=v.startOnTick?w[0]:Math.min(x,w[0]),c.max=v.endOnTick?w[w.length-1]:Math.max(p,w[w.length-1])};if($n(st)&&$n(c.threshold)){for(;w[st]!==z||w.length!==T||w[0]>x||w[w.length-1]<p;){for(w.length=0,w.push(c.threshold);w.length<T;)w[st]===void 0||w[st]>c.threshold?nt():rt();if(Z>8*c.tickInterval)break;Z*=2}it()}else if(M<T){for(;w.length<T;)w.length%2||x===z?rt():nt();it()}if(Ms(d)){for(G=P=w.length;G--;)(d===3&&G%2==1||d<=2&&G>0&&G<P-1)&&w.splice(G,1);c.finalTickAmt=void 0}}}setScale(){let{coll:c,stacking:d}=this,p=!1,x=!1;this.series.forEach(w=>{p=p||w.isDirtyData||w.isDirty,x=x||w.xAxis?.isDirty||!1}),this.setAxisSize();let v=this.len!==this.old?.len;v||p||x||this.isLinked||this.forceRedraw||this.userMin!==this.old?.userMin||this.userMax!==this.old?.userMax||this.alignToOthers()?(d&&c==="yAxis"&&d.buildStacks(),this.forceRedraw=!1,this.userMinRange||(this.minRange=void 0),this.getSeriesExtremes(),this.setTickInterval(),d&&c==="xAxis"&&d.buildStacks(),this.isDirty||(this.isDirty=v||this.min!==this.old?.min||this.max!==this.old?.max)):d&&d.cleanStacks(),p&&delete this.allExtremes,ri(this,"afterSetScale")}setExtremes(c,d,p=!0,x,v){let w=this.chart;this.series.forEach(T=>{delete T.kdTree}),c=w.time.parse(c),d=w.time.parse(d),ri(this,"setExtremes",v=_c(v,{min:c,max:d}),T=>{this.userMin=T.min,this.userMax=T.max,this.eventArgs=T,p&&w.redraw(x)})}setAxisSize(){let c=this.chart,d=this.options,p=d.offsets||[0,0,0,0],x=this.horiz,v=this.width=Math.round(ld(is(d.width,c.plotWidth-p[3]+p[1]),c.plotWidth)),w=this.height=Math.round(ld(is(d.height,c.plotHeight-p[0]+p[2]),c.plotHeight)),T=this.top=Math.round(ld(is(d.top,c.plotTop+p[0]),c.plotHeight,c.plotTop)),A=this.left=Math.round(ld(is(d.left,c.plotLeft+p[3]),c.plotWidth,c.plotLeft));this.bottom=c.chartHeight-w-T,this.right=c.chartWidth-v-A,this.len=Math.max(x?v:w,0),this.pos=x?A:T}getExtremes(){let c=this.logarithmic;return{min:c?qr(c.lin2log(this.min)):this.min,max:c?qr(c.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}}getThreshold(c){let d=this.logarithmic,p=d?d.lin2log(this.min):this.min,x=d?d.lin2log(this.max):this.max;return c===null||c===-1/0?c=p:c===1/0?c=x:p>c?c=p:x<c&&(c=x),this.translate(c,0,1,0,1)}autoLabelAlign(c){let d=((c-90*this.side)%360+360)%360,p={align:"center"};return ri(this,"autoLabelAlign",p,function(x){d>15&&d<165?x.align="right":d>195&&d<345&&(x.align="left")}),p.align}tickSize(c){let d=this.options,p=is(d[c==="tick"?"tickWidth":"minorTickWidth"],c==="tick"&&this.isXAxis&&!this.categories?1:0),x=d[c==="tick"?"tickLength":"minorTickLength"],v;p&&x&&(d[c+"Position"]==="inside"&&(x=-x),v=[x,p]);let w={tickSize:v};return ri(this,"afterTickSize",w),w.tickSize}labelMetrics(){let c=this.chart.renderer,d=this.ticks,p=d[Object.keys(d)[0]]||{};return this.chart.renderer.fontMetrics(p.label||p.movedLabel||c.box)}unsquish(){let c=this.options.labels,d=c.padding||0,p=this.horiz,x=this.tickInterval,v=this.len/((+!!this.categories+this.max-this.min)/x),w=c.rotation,T=qr(.8*this.labelMetrics().h),A=Math.max(this.max-this.min,0),M=function(st){let rt=(st+2*d)/(v||1);return(rt=rt>1?Math.ceil(rt):1)*x>A&&st!==1/0&&v!==1/0&&A&&(rt=Math.ceil(A/x)),qr(rt*x)},z=x,P,G=Number.MAX_VALUE,Z;if(p){if(!c.staggerLines&&($n(w)?Z=[w]:v<c.autoRotationLimit&&(Z=c.autoRotation)),Z){let st,rt;for(let nt of Z)(nt===w||nt&&nt>=-90&&nt<=90)&&(rt=(st=M(Math.abs(T/Math.sin(ug*nt))))+Math.abs(nt/360))<G&&(G=rt,P=nt,z=st)}}else z=M(.75*T);return this.autoRotation=Z,this.labelRotation=is(P,$n(w)?w:0),c.step?x:z}getSlotWidth(c){let d=this.chart,p=this.horiz,x=this.options.labels,v=Math.max(this.tickPositions.length-!this.categories,1),w=d.margin[3];if(c&&$n(c.slotWidth))return c.slotWidth;if(p&&x.step<2&&!this.isRadial)return x.rotation?0:(this.staggerLines||1)*this.len/v;if(!p){let T=x.style.width;if(T!==void 0)return parseInt(String(T),10);if(!this.opposite&&w)return w-d.spacing[3]}return .33*d.chartWidth}renderUnsquish(){let c=this.chart,d=c.renderer,p=this.tickPositions,x=this.ticks,v=this.options.labels,w=v.style,T=this.horiz,A=this.getSlotWidth(),M=Math.max(1,Math.round(A-(T?2*(v.padding||0):v.distance||0))),z={},P=this.labelMetrics(),G=w.lineClamp,Z,st=G??(Math.floor(this.len/(p.length*P.h))||1),rt=0;Vu(v.rotation)||(z.rotation=v.rotation||0),p.forEach(function(nt){let it=x[nt];it.movedLabel&&it.replaceMovedLabel();let gt=it.label?.textPxLength||0;gt>rt&&(rt=gt)}),this.maxLabelLength=rt,this.autoRotation?rt>M&&rt>P.h?z.rotation=this.labelRotation:this.labelRotation=0:A&&(Z=M),z.rotation&&(Z=rt>.5*c.chartHeight?.33*c.chartHeight:rt,G||(st=1)),this.labelAlign=v.align||this.autoLabelAlign(this.labelRotation||0),this.labelAlign&&(z.align=this.labelAlign),p.forEach(function(nt){let it=x[nt],gt=it?.label,_t=w.width,Wt={};gt&&(gt.attr(z),it.shortenLabel?it.shortenLabel():Z&&!_t&&w.whiteSpace!=="nowrap"&&(Z<(gt.textPxLength||0)||gt.element.tagName==="SPAN")?gt.css(_c(Wt,{width:`${Z}px`,lineClamp:st})):!gt.styles.width||Wt.width||_t||gt.css({width:"auto"}),it.rotation=z.rotation)},this),this.tickRotCorr=d.rotCorr(P.b,this.labelRotation||0,this.side!==0)}hasData(){return this.series.some(function(c){return c.hasData()})||this.options.showEmpty&&Ms(this.min)&&Ms(this.max)}addTitle(c){let d,p=this.chart.renderer,x=this.horiz,v=this.opposite,w=this.options.title,T=this.chart.styledMode;this.axisTitle||((d=w.textAlign)||(d=(x?{low:"left",middle:"center",high:"right"}:{low:v?"right":"left",middle:"center",high:v?"left":"right"})[w.align]),this.axisTitle=p.text(w.text||"",0,0,w.useHTML).attr({zIndex:7,rotation:w.rotation||0,align:d}).addClass("highcharts-axis-title"),T||this.axisTitle.css(od(w.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),T||w.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[c?"show":"hide"](c)}generateTick(c){let d=this.ticks;d[c]?d[c].addLabel():d[c]=new Ec(this,c)}createGroups(){let{axisParent:c,chart:d,coll:p,options:x}=this,v=d.renderer,w=(T,A,M)=>v.g(T).attr({zIndex:M}).addClass(`highcharts-${p.toLowerCase()}${A} `+(this.isRadial?`highcharts-radial-axis${A} `:"")+(x.className||"")).add(c);this.axisGroup||(this.gridGroup=w("grid","-grid",x.gridZIndex),this.axisGroup=w("axis","",x.zIndex),this.labelGroup=w("axis-labels","-labels",x.labels.zIndex))}getOffset(){let c=this,{chart:d,horiz:p,options:x,side:v,ticks:w,tickPositions:T,coll:A}=c,M=d.inverted&&!c.isZAxis?[1,0,3,2][v]:v,z=c.hasData(),P=x.title,G=x.labels,Z=$n(x.crossing),st=d.axisOffset,rt=d.clipOffset,nt=[-1,1,1,-1][v],it,gt=0,_t,Wt=0,Vt=0,qt,Kt;if(c.showAxis=it=z||x.showEmpty,c.staggerLines=c.horiz&&G.staggerLines||void 0,c.createGroups(),z||c.isLinked?(T.forEach(function(Zt){c.generateTick(Zt)}),c.renderUnsquish(),c.reserveSpaceDefault=v===0||v===2||{1:"left",3:"right"}[v]===c.labelAlign,is(G.reserveSpace,!Z&&null,c.labelAlign==="center"||null,c.reserveSpaceDefault)&&T.forEach(function(Zt){Vt=Math.max(w[Zt].getLabelSize(),Vt)}),c.staggerLines&&(Vt*=c.staggerLines),c.labelOffset=Vt*(c.opposite?-1:1)):ad(w,function(Zt,Se){Zt.destroy(),delete w[Se]}),P?.text&&P.enabled!==!1&&(c.addTitle(it),it&&!Z&&P.reserveSpace!==!1&&(c.titleOffset=gt=c.axisTitle.getBBox()[p?"height":"width"],Wt=Ms(_t=P.offset)?0:is(P.margin,p?5:10))),c.renderLine(),c.offset=nt*is(x.offset,st[v]?st[v]+(x.margin||0):0),c.tickRotCorr=c.tickRotCorr||{x:0,y:0},Kt=v===0?-c.labelMetrics().h:v===2?c.tickRotCorr.y:0,qt=Math.abs(Vt)+Wt,Vt&&(qt-=Kt,qt+=nt*(p?is(G.y,c.tickRotCorr.y+nt*G.distance):is(G.x,nt*G.distance))),c.axisTitleMargin=is(_t,qt),c.getMaxLabelDimensions&&(c.maxLabelDimensions=c.getMaxLabelDimensions(w,T)),A!=="colorAxis"&&rt){let Zt=this.tickSize("tick");st[v]=Math.max(st[v],(c.axisTitleMargin||0)+gt+nt*c.offset,qt,T?.length&&Zt?Zt[0]+nt*c.offset:0);let Se=!c.axisLine||x.offset?0:c.axisLine.strokeWidth()/2;rt[M]=Math.max(rt[M],Se)}ri(this,"afterGetOffset")}getLinePath(c){let d=this.chart,p=this.opposite,x=this.offset,v=this.horiz,w=this.left+(p?this.width:0)+x,T=d.chartHeight-this.bottom-(p?this.height:0)+x;return p&&(c*=-1),d.renderer.crispLine([["M",v?this.left:w,v?T:this.top],["L",v?d.chartWidth-this.right:w,v?T:d.chartHeight-this.bottom]],c)}renderLine(){!this.axisLine&&(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))}getTitlePosition(c){let d=this.horiz,p=this.left,x=this.top,v=this.len,w=this.options.title,T=d?p:x,A=this.opposite,M=this.offset,z=w.x,P=w.y,G=this.chart.renderer.fontMetrics(c),Z=c?Math.max(c.getBBox(!1,0).height-G.h-1,0):0,st={low:T+(d?0:v),middle:T+v/2,high:T+(d?v:0)}[w.align],rt=(d?x+this.height:p)+(d?1:-1)*(A?-1:1)*(this.axisTitleMargin||0)+[-Z,Z,G.f,-Z][this.side],nt={x:d?st+z:rt+(A?this.width:0)+M+z,y:d?rt+P-(A?this.height:0)+M:st+P};return ri(this,"afterGetTitlePosition",{titlePosition:nt}),nt}renderMinorTick(c,d){let p=this.minorTicks;p[c]||(p[c]=new Ec(this,c,"minor")),d&&p[c].isNew&&p[c].render(null,!0),p[c].render(null,!1,1)}renderTick(c,d,p){let x=this.isLinked,v=this.ticks;(!x||c>=this.min&&c<=this.max||this.grid?.isColumn)&&(v[c]||(v[c]=new Ec(this,c)),p&&v[c].isNew&&v[c].render(d,!0,-1),v[c].render(d))}render(){let c,d,p=this,x=p.chart,v=p.logarithmic,w=x.renderer,T=p.options,A=p.isLinked,M=p.tickPositions,z=p.axisTitle,P=p.ticks,G=p.minorTicks,Z=p.alternateBands,st=T.stackLabels,rt=T.alternateGridColor,nt=T.crossing,it=p.tickmarkOffset,gt=p.axisLine,_t=p.showAxis,Wt=rx(w.globalAnimation);if(p.labelEdge.length=0,p.overlap=!1,[P,G,Z].forEach(function(Vt){ad(Vt,function(qt){qt.isActive=!1})}),$n(nt)){let Vt=this.isXAxis?x.yAxis[0]:x.xAxis[0],qt=[1,-1,-1,1][this.side];if(Vt){let Kt=Vt.toPixels(nt,!0);p.horiz&&(Kt=Vt.len-Kt),p.offset=qt*Kt}}if(p.hasData()||A){let Vt=p.chart.hasRendered&&p.old&&$n(p.old.min);p.minorTickInterval&&!p.categories&&p.getMinorTickPositions().forEach(function(qt){p.renderMinorTick(qt,Vt)}),M.length&&(M.forEach(function(qt,Kt){p.renderTick(qt,Kt,Vt)}),it&&(p.min===0||p.single)&&(P[-1]||(P[-1]=new Ec(p,-1,null,!0)),P[-1].render(-1))),rt&&M.forEach(function(qt,Kt){d=M[Kt+1]!==void 0?M[Kt+1]+it:p.max-it,Kt%2==0&&qt<p.max&&d<=p.max+(x.polar?-it:it)&&(Z[qt]||(Z[qt]=new at.PlotLineOrBand(p,{})),c=qt+it,Z[qt].options={from:v?v.lin2log(c):c,to:v?v.lin2log(d):d,color:rt,className:"highcharts-alternate-grid"},Z[qt].render(),Z[qt].isActive=!0)}),p._addedPlotLB||(p._addedPlotLB=!0,(T.plotLines||[]).concat(T.plotBands||[]).forEach(function(qt){p.addPlotBandOrLine(qt)}))}[P,G,Z].forEach(function(Vt){let qt=[],Kt=Wt.duration;ad(Vt,function(Zt,Se){Zt.isActive||(Zt.render(Se,!1,0),Zt.isActive=!1,qt.push(Se))}),hx(function(){let Zt=qt.length;for(;Zt--;)Vt[qt[Zt]]&&!Vt[qt[Zt]].isActive&&(Vt[qt[Zt]].destroy(),delete Vt[qt[Zt]])},Vt!==Z&&x.hasRendered&&Kt?Kt:0)}),gt&&(gt[gt.isPlaced?"animate":"attr"]({d:this.getLinePath(gt.strokeWidth())}),gt.isPlaced=!0,gt[_t?"show":"hide"](_t)),z&&_t&&(z[z.isNew?"attr":"animate"](p.getTitlePosition(z)),z.isNew=!1),st?.enabled&&p.stacking&&p.stacking.renderStackTotals(),p.old={len:p.len,max:p.max,min:p.min,transA:p.transA,userMax:p.userMax,userMin:p.userMin},p.isDirty=!1,ri(this,"afterRender")}redraw(){this.visible&&(this.render(),this.plotLinesAndBands.forEach(function(c){c.render()})),this.series.forEach(function(c){c.isDirty=!0})}getKeepProps(){return this.keepProps||Ac.keepProps}destroy(c){let d=this,p=d.plotLinesAndBands,x=this.eventOptions;if(ri(this,"destroy",{keepEvents:c}),c||ux(d),[d.ticks,d.minorTicks,d.alternateBands].forEach(function(v){lx(v)}),p){let v=p.length;for(;v--;)p[v].destroy()}for(let v in["axisLine","axisTitle","axisGroup","gridGroup","labelGroup","cross","scrollbar"].forEach(function(w){d[w]&&(d[w]=d[w].destroy())}),d.plotLinesAndBandsGroups)d.plotLinesAndBandsGroups[v]=d.plotLinesAndBandsGroups[v].destroy();ad(d,function(v,w){d.getKeepProps().indexOf(w)===-1&&delete d[w]}),this.eventOptions=x}drawCrosshair(c,d){let p=this.crosshair,x=p?.snap??!0,v=this.chart,w,T,A,M=this.cross,z;if(ri(this,"drawCrosshair",{e:c,point:d}),c||(c=this.cross?.e),p&&(Ms(d)||!x)!==!1){if(x?Ms(d)&&(T=is(this.coll!=="colorAxis"?d.crosshairPos:null,this.isXAxis?d.plotX:this.len-d.plotY)):T=c&&(this.horiz?c.chartX-this.pos:this.len-c.chartY+this.pos),Ms(T)&&(z={value:d&&(this.isXAxis?d.x:is(d.stackY,d.y)),translatedValue:T},v.polar&&_c(z,{isCrosshair:!0,chartX:c?.chartX,chartY:c?.chartY,point:d}),w=this.getPlotLinePath(z)||null),!Ms(w))return void this.hideCrosshair();A=this.categories&&!this.isRadial,M||(this.cross=M=v.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(A?"category ":"thin ")+(p.className||"")).attr({zIndex:is(p.zIndex,2)}).add(),!v.styledMode&&(M.attr({stroke:p.color||(A?In.parse("#ccd3ff").setOpacity(.25).get():"#cccccc"),"stroke-width":is(p.width,1)}).css({"pointer-events":"none"}),p.dashStyle&&M.attr({dashstyle:p.dashStyle}))),M.show().attr({d:w}),A&&!p.width&&M.attr({"stroke-width":this.transA}),this.cross.e=c}else this.hideCrosshair();ri(this,"afterDrawCrosshair",{e:c,point:d})}hideCrosshair(){this.cross&&this.cross.hide(),ri(this,"afterHideCrosshair")}update(c,d){let p=this.chart;c=od(this.userOptions,c),this.destroy(!0),this.init(p,c),p.isDirtyBox=!0,is(d,!0)&&p.redraw()}remove(c){let d=this.chart,p=this.coll,x=this.series,v=x.length;for(;v--;)x[v]&&x[v].remove(!1);Wu(d.axes,this),Wu(d[p]||[],this),d.orderItems(p),this.destroy(),d.isDirtyBox=!0,is(c,!0)&&d.redraw()}setTitle(c,d){this.update({title:c},d)}setCategories(c,d){this.update({categories:c},d)}}Ac.keepProps=["coll","extKey","hcEvents","len","names","series","userMax","userMin"];let{addEvent:dx,getMagnitude:fx,normalizeTickInterval:px,timeUnits:Uu}=Ae;(function(N){function c(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function d(){if(this.type!=="datetime"){this.dateTime=void 0;return}this.dateTime||(this.dateTime=new p(this))}N.compose=function(x){return x.keepProps.includes("dateTime")||(x.keepProps.push("dateTime"),x.prototype.getTimeTicks=c,dx(x,"afterSetType",d)),x};class p{constructor(v){this.axis=v}normalizeTimeTickInterval(v,w){let T=w||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],A=T[T.length-1],M=Uu[A[0]],z=A[1],P;for(P=0;P<T.length&&(M=Uu[(A=T[P])[0]],z=A[1],!T[P+1]||!(v<=(M*z[z.length-1]+Uu[T[P+1][0]])/2));P++);M===Uu.year&&v<5*M&&(z=[1,2,5]);let G=px(v/M,z,A[0]==="year"?Math.max(fx(v/M),1):1);return{unitRange:M,count:G,unitName:A[0]}}getXDateFormat(v,w){let{axis:T}=this,A=T.chart.time;return T.closestPointRange?A.getDateFormat(T.closestPointRange,v,T.options.startOfWeek,w)||A.resolveDTLFormat(w.year).main:A.resolveDTLFormat(w.day).main}}N.Additions=p})(q||(q={}));let Gu=q,{addEvent:$c,normalizeTickInterval:cd,pick:xg}=Ae;(function(N){function c(){this.type!=="logarithmic"?this.logarithmic=void 0:this.logarithmic??(this.logarithmic=new p(this))}function d(){let x=this.logarithmic;x&&(this.lin2val=function(v){return x.lin2log(v)},this.val2lin=function(v){return x.log2lin(v)})}N.compose=function(x){return x.keepProps.includes("logarithmic")||(x.keepProps.push("logarithmic"),$c(x,"afterSetType",c),$c(x,"afterInit",d)),x};class p{constructor(v){this.axis=v}getLogTickPositions(v,w,T,A){let M=this.axis,z=M.len,P=M.options,G=[];if(A||(this.minorAutoInterval=void 0),v>=.5)v=Math.round(v),G=M.getLinearTickPositions(v,w,T);else if(v>=.08){let Z,st,rt,nt,it,gt,_t,Wt=Math.floor(w);for(Z=v>.3?[1,2,4]:v>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],st=Wt;st<T+1&&!_t;st++)for(rt=0,nt=Z.length;rt<nt&&!_t;rt++)(it=this.log2lin(this.lin2log(st)*Z[rt]))>w&&(!A||gt<=T)&&gt!==void 0&&G.push(gt),gt>T&&(_t=!0),gt=it}else{let Z=this.lin2log(w),st=this.lin2log(T),rt=A?M.getMinorTickInterval():P.tickInterval,nt=P.tickPixelInterval/(A?5:1),it=A?z/M.tickPositions.length:z;v=cd(v=xg(rt==="auto"?null:rt,this.minorAutoInterval,(st-Z)*nt/(it||1))),G=M.getLinearTickPositions(v,Z,st).map(this.log2lin),A||(this.minorAutoInterval=v/5)}return A||(M.tickInterval=v),G}lin2log(v){return Math.pow(10,v)}log2lin(v){return Math.log(v)/Math.LN10}}N.Additions=p})(X||(X={}));let Pf=X,{erase:Lf,extend:bg,isNumber:vg}=Ae;(function(N){let c;function d(M){return this.addPlotBandOrLine(M,"plotBands")}function p(M,z){let P=this.userOptions,G=new c(this,M);if(this.visible&&(G=G.render()),G){if(this._addedPlotLB||(this._addedPlotLB=!0,(P.plotLines||[]).concat(P.plotBands||[]).forEach(Z=>{this.addPlotBandOrLine(Z)})),z){let Z=P[z]||[];Z.push(M),P[z]=Z}this.plotLinesAndBands.push(G)}return G}function x(M){return this.addPlotBandOrLine(M,"plotLines")}function v(M,z,P){P=P||this.options;let G=this.getPlotLinePath({value:z,force:!0,acrossPanes:P.acrossPanes}),Z=[],st=this.horiz,rt=!vg(this.min)||!vg(this.max)||M<this.min&&z<this.min||M>this.max&&z>this.max,nt=this.getPlotLinePath({value:M,force:!0,acrossPanes:P.acrossPanes}),it,gt=1,_t;if(nt&&G)for(rt&&(_t=nt.toString()===G.toString(),gt=0),it=0;it<nt.length;it+=2){let Wt=nt[it],Vt=nt[it+1],qt=G[it],Kt=G[it+1];(Wt[0]==="M"||Wt[0]==="L")&&(Vt[0]==="M"||Vt[0]==="L")&&(qt[0]==="M"||qt[0]==="L")&&(Kt[0]==="M"||Kt[0]==="L")&&(st&&qt[1]===Wt[1]?(qt[1]+=gt,Kt[1]+=gt):st||qt[2]!==Wt[2]||(qt[2]+=gt,Kt[2]+=gt),Z.push(["M",Wt[1],Wt[2]],["L",Vt[1],Vt[2]],["L",Kt[1],Kt[2]],["L",qt[1],qt[2]],["Z"])),Z.isFlat=_t}return Z}function w(M){this.removePlotBandOrLine(M)}function T(M){let z=this.plotLinesAndBands,P=this.options,G=this.userOptions;if(z){let Z=z.length;for(;Z--;)z[Z].id===M&&z[Z].destroy();[P.plotLines||[],G.plotLines||[],P.plotBands||[],G.plotBands||[]].forEach(function(st){for(Z=st.length;Z--;)st[Z]?.id===M&&Lf(st,st[Z])})}}function A(M){this.removePlotBandOrLine(M)}N.compose=function(M,z){let P=z.prototype;return P.addPlotBand||(c=M,bg(P,{addPlotBand:d,addPlotLine:x,addPlotBandOrLine:p,getPlotBandPath:v,removePlotBand:w,removePlotLine:A,removePlotBandOrLine:T})),z}})(B||(B={}));let gx=B,{addEvent:yg,arrayMax:wg,arrayMin:ud,defined:ea,destroyObjectProperties:mx,erase:xx,fireEvent:Bf,merge:kg,objectEach:hd,pick:bx}=Ae;class dd{static compose(c,d){return yg(c,"afterInit",function(){this.labelCollectors.push(()=>{let p=[];for(let x of this.axes)for(let{label:v,options:w}of x.plotLinesAndBands)v&&!w?.label?.allowOverlap&&p.push(v);return p})}),gx.compose(dd,d)}constructor(c,d){this.axis=c,this.options=d,this.id=d.id}render(){Bf(this,"render");let{axis:c,options:d}=this,{horiz:p,logarithmic:x}=c,{color:v,events:w,zIndex:T=0}=d,{renderer:A,time:M}=c.chart,z={},P=M.parse(d.to),G=M.parse(d.from),Z=M.parse(d.value),st=d.borderWidth,rt=d.label,{label:nt,svgElem:it}=this,gt=[],_t,Wt=ea(G)&&ea(P),Vt=ea(Z),qt=!it,Kt={class:"highcharts-plot-"+(Wt?"band ":"line ")+(d.className||"")},Zt=Wt?"bands":"lines";if(!c.chart.styledMode&&(Vt?(Kt.stroke=v||"#999999",Kt["stroke-width"]=bx(d.width,1),d.dashStyle&&(Kt.dashstyle=d.dashStyle)):Wt&&(Kt.fill=v||"#e6e9ff",st&&(Kt.stroke=d.borderColor,Kt["stroke-width"]=st))),z.zIndex=T,Zt+="-"+T,(_t=c.plotLinesAndBandsGroups[Zt])||(c.plotLinesAndBandsGroups[Zt]=_t=A.g("plot-"+Zt).attr(z).add()),it||(this.svgElem=it=A.path().attr(Kt).add(_t)),ea(Z))gt=c.getPlotLinePath({value:x?.log2lin(Z)??Z,lineWidth:it.strokeWidth(),acrossPanes:d.acrossPanes});else{if(!(ea(G)&&ea(P)))return;gt=c.getPlotBandPath(x?.log2lin(G)??G,x?.log2lin(P)??P,d)}return!this.eventsAdded&&w&&(hd(w,(Se,Ne)=>{it?.on(Ne,we=>{w[Ne].apply(this,[we])})}),this.eventsAdded=!0),(qt||!it.d)&&gt?.length?it.attr({d:gt}):it&&(gt?(it.show(),it.animate({d:gt})):it.d&&(it.hide(),nt&&(this.label=nt=nt.destroy()))),rt&&(ea(rt.text)||ea(rt.formatter))&&gt?.length&&c.width>0&&c.height>0&&!gt.isFlat?(rt=kg({align:p&&Wt?"center":void 0,x:p?!Wt&&4:10,verticalAlign:!p&&Wt?"middle":void 0,y:p?Wt?16:10:Wt?6:-4,rotation:p&&!Wt?90:0,...Wt?{inside:!0}:{}},rt),this.renderLabel(rt,gt,Wt,T)):nt&&nt.hide(),this}renderLabel(c,d,p,x){let v=this.axis,w=v.chart.renderer,T=c.inside,A=this.label;A||(this.label=A=w.text(this.getLabelText(c),0,0,c.useHTML).attr({align:c.textAlign||c.align,rotation:c.rotation,class:"highcharts-plot-"+(p?"band":"line")+"-label "+(c.className||""),zIndex:x}),v.chart.styledMode||A.css(kg({color:v.chart.options.title?.style?.color,fontSize:"0.8em",textOverflow:p&&!T?"":"ellipsis"},c.style)),A.add());let M=d.xBounds||[d[0][1],d[1][1],p?d[2][1]:d[0][1]],z=d.yBounds||[d[0][2],d[1][2],p?d[2][2]:d[0][2]],P=ud(M),G=ud(z),Z=wg(M)-P;A.align(c,!1,{x:P,y:G,width:Z,height:wg(z)-G}),A.alignAttr.y-=w.fontMetrics(A).b,(!A.alignValue||A.alignValue==="left"||ea(T))&&A.css({width:(c.style?.width||(p&&T?Z:A.rotation===90?v.height-(A.alignAttr.y-v.top):(c.clip?v.width:v.chart.chartWidth)-(A.alignAttr.x-v.left)))+"px"}),A.show(!0)}getLabelText(c){return ea(c.formatter)?c.formatter.call(this):c.text}destroy(){xx(this.axis.plotLinesAndBands,this),delete this.axis,mx(this)}}let{animObject:vx}=Un,{format:Hu}=dr,{composed:yx,dateFormats:Cg,doc:fd,isSafari:wx}=at,{distribute:kx}=lo,{addEvent:Sg,clamp:po,css:Tg,clearTimeout:Nc,discardElement:Ig,extend:Cx,fireEvent:ju,getAlignFactor:zf,isArray:go,isNumber:Sx,isObject:L,isString:I,merge:F,pick:W,pushUnique:et,splat:lt,syncTimeout:ot}=Ae;class xt{constructor(c,d,p){this.allowShared=!0,this.crosshairs=[],this.distance=0,this.isHidden=!0,this.isSticky=!1,this.options={},this.outside=!1,this.chart=c,this.init(c,d),this.pointer=p}bodyFormatter(c){return c.map(d=>{let p=d.series.tooltipOptions,x=d.formatPrefix||"point";return(p[x+"Formatter"]||d.tooltipFormatter).call(d,p[x+"Format"]||"")})}cleanSplit(c){this.chart.series.forEach(function(d){let p=d?.tt;p&&(!p.isActive||c?d.tt=p.destroy():p.isActive=!1)})}defaultFormatter(c){let d,p=this.points||lt(this);return(d=(d=[c.headerFooterFormatter(p[0])]).concat(c.bodyFormatter(p))).push(c.headerFooterFormatter(p[0],!0)),d}destroy(){this.label&&(this.label=this.label.destroy()),this.split&&(this.cleanSplit(!0),this.tt&&(this.tt=this.tt.destroy())),this.renderer&&(this.renderer=this.renderer.destroy(),Ig(this.container)),Nc(this.hideTimer)}getAnchor(c,d){let p,{chart:x,pointer:v}=this,w=x.inverted,T=x.plotTop,A=x.plotLeft;if(c=lt(c),c[0].series?.yAxis&&!c[0].series.yAxis.options.reversedStacks&&(c=c.slice().reverse()),this.followPointer&&d)d.chartX===void 0&&(d=v.normalize(d)),p=[d.chartX-A,d.chartY-T];else if(c[0].tooltipPos)p=c[0].tooltipPos;else{let z=0,P=0;c.forEach(function(G){let Z=G.pos(!0);Z&&(z+=Z[0],P+=Z[1])}),z/=c.length,P/=c.length,this.shared&&c.length>1&&d&&(w?z=d.chartX:P=d.chartY),p=[z-A,P-T]}let M={point:c[0],ret:p};return ju(this,"getAnchor",M),M.ret.map(Math.round)}getClassName(c,d,p){let x=this.options,v=c.series,w=v.options;return[x.className,"highcharts-label",p&&"highcharts-tooltip-header",d?"highcharts-tooltip-box":"highcharts-tooltip",!p&&"highcharts-color-"+W(c.colorIndex,v.colorIndex),w?.className].filter(I).join(" ")}getLabel({anchorX:c,anchorY:d}={anchorX:0,anchorY:0}){let p=this,x=this.chart.styledMode,v=this.options,w=this.split&&this.allowShared,T=this.container,A=this.chart.renderer;if(this.label){let M=!this.label.hasClass("highcharts-label");(!w&&M||w&&!M)&&this.destroy()}if(!this.label){if(this.outside){let M=this.chart,z=M.options.chart.style,P=Ml.getRendererType();this.container=T=at.doc.createElement("div"),T.className="highcharts-tooltip-container "+(M.renderTo.className.match(/(highcharts[a-zA-Z0-9-]+)\s?/gm)||""),Tg(T,{position:"absolute",top:"1px",pointerEvents:"none",zIndex:Math.max(this.options.style.zIndex||0,(z?.zIndex||0)+3)}),this.renderer=A=new P(T,0,0,z,void 0,void 0,A.styledMode)}if(w?this.label=A.g("tooltip"):(this.label=A.label("",c,d,v.shape||"callout",void 0,void 0,v.useHTML,void 0,"tooltip").attr({padding:v.padding,r:v.borderRadius}),x||this.label.attr({fill:v.backgroundColor,"stroke-width":v.borderWidth||0}).css(v.style).css({pointerEvents:v.style.pointerEvents||(this.shouldStickOnContact()?"auto":"none")})),p.outside){let M=this.label;[M.xSetter,M.ySetter].forEach((z,P)=>{M[P?"ySetter":"xSetter"]=G=>{z.call(M,p.distance),M[P?"y":"x"]=G,T&&(T.style[P?"top":"left"]=`${G}px`)}})}this.label.attr({zIndex:8}).shadow(v.shadow??!v.fixed).add()}return T&&!T.parentElement&&at.doc.body.appendChild(T),this.label}getPlayingField(){let{body:c,documentElement:d}=fd,{chart:p,distance:x,outside:v}=this;return{width:v?Math.max(c.scrollWidth,d.scrollWidth,c.offsetWidth,d.offsetWidth,d.clientWidth)-2*x-2:p.chartWidth,height:v?Math.max(c.scrollHeight,d.scrollHeight,c.offsetHeight,d.offsetHeight,d.clientHeight):p.chartHeight}}getPosition(c,d,p){let{distance:x,chart:v,outside:w,pointer:T}=this,{inverted:A,plotLeft:M,plotTop:z,polar:P}=v,{plotX:G=0,plotY:Z=0}=p,st={},rt=A&&p.h||0,{height:nt,width:it}=this.getPlayingField(),gt=T.getChartPosition(),_t=Qe=>{let cn=Qe==="x";return[Qe,cn?it:nt,cn?c:d].concat(w?[cn?c*gt.scaleX:d*gt.scaleY,cn?gt.left-x+(G+M)*gt.scaleX:gt.top-x+(Z+z)*gt.scaleY,0,cn?it:nt]:[cn?c:d,cn?G+M:Z+z,cn?M:z,cn?M+v.plotWidth:z+v.plotHeight])},Wt=_t("y"),Vt=_t("x"),qt,Kt=!!p.negative;!P&&v.hoverSeries?.yAxis?.reversed&&(Kt=!Kt);let Zt=!this.followPointer&&W(p.ttBelow,!P&&!A===Kt),Se=function(Qe,cn,Tn,yn,mn,Qs,Us){let Yr=w?Qe==="y"?x*gt.scaleY:x*gt.scaleX:x,Wn=(Tn-yn)/2,Gn=yn<mn-x,Is=mn+x+yn<cn,Qn=mn-Yr-Tn+Wn,Gs=mn+Yr-Wn;if(Zt&&Is)st[Qe]=Gs;else if(!Zt&&Gn)st[Qe]=Qn;else if(Gn)st[Qe]=Math.min(Us-yn,Qn-rt<0?Qn:Qn-rt);else{if(!Is)return st[Qe]=0,!1;st[Qe]=Math.max(Qs,Gs+rt+Tn>cn?Gs:Gs+rt)}},Ne=function(Qe,cn,Tn,yn,mn){if(mn<x||mn>cn-x)return!1;mn<Tn/2?st[Qe]=1:mn>cn-yn/2?st[Qe]=cn-yn-2:st[Qe]=mn-Tn/2},we=function(Qe){[Wt,Vt]=[Vt,Wt],qt=Qe},je=()=>{Se.apply(0,Wt)!==!1?Ne.apply(0,Vt)!==!1||qt||(we(!0),je()):qt?st.x=st.y=0:(we(!0),je())};return(A&&!P||this.len>1)&&we(),je(),st}getFixedPosition(c,d,p){let x=p.series,{chart:v,options:w,split:T}=this,A=w.position,M=A.relativeTo,z=w.shared||x?.yAxis?.isRadial&&(M==="pane"||!M)?"plotBox":M,P=z==="chart"?v.renderer:v[z]||v.getClipBox(x,!0);return{x:P.x+(P.width-c)*zf(A.align)+A.x,y:P.y+(P.height-d)*zf(A.verticalAlign)+(!T&&A.y||0)}}hide(c){let d=this;Nc(this.hideTimer),c=W(c,this.options.hideDelay),this.isHidden||(this.hideTimer=ot(function(){let p=d.getLabel();d.getLabel().animate({opacity:0},{duration:c&&150,complete:()=>{p.hide(),d.container&&d.container.remove()}}),d.isHidden=!0},c))}init(c,d){this.chart=c,this.options=d,this.crosshairs=[],this.isHidden=!0,this.split=d.split&&!c.inverted&&!c.polar,this.shared=d.shared||this.split,this.outside=W(d.outside,!!(c.scrollablePixelsX||c.scrollablePixelsY))}shouldStickOnContact(c){return!!(!this.followPointer&&this.options.stickOnContact&&(!c||this.pointer.inClass(c.target,"highcharts-tooltip")))}move(c,d,p,x){let{followPointer:v,options:w}=this,T=vx(!v&&!this.isHidden&&!w.fixed&&w.animation),A=v||(this.len||0)>1,M={x:c,y:d};A?M.anchorX=M.anchorY=NaN:(M.anchorX=p,M.anchorY=x),T.step=()=>this.drawTracker(),this.getLabel().animate(M,T)}refresh(c,d){let{chart:p,options:x,pointer:v,shared:w}=this,T=lt(c),A=T[0],M=x.format,z=x.formatter||this.defaultFormatter,P=p.styledMode,G=this.allowShared;if(!x.enabled||!A.series)return;Nc(this.hideTimer),this.allowShared=!(!go(c)&&c.series&&c.series.noSharedTooltip),G=G&&!this.allowShared,this.followPointer=!this.split&&A.series.tooltipOptions.followPointer;let Z=this.getAnchor(c,d),st=Z[0],rt=Z[1];w&&this.allowShared&&(v.applyInactiveState(T),T.forEach(gt=>gt.setState("hover")),A.points=T),this.len=T.length;let nt=I(M)?Hu(M,A,p):z.call(A,this);A.points=void 0;let it=A.series;if(this.distance=W(it.tooltipOptions.distance,16),nt===!1)this.hide();else{if(this.split&&this.allowShared)this.renderSplit(nt,T);else{let gt=st,_t=rt;if(d&&v.isDirectTouch&&(gt=d.chartX-p.plotLeft,_t=d.chartY-p.plotTop),!(p.polar||it.options.clip===!1||T.some(Wt=>v.isDirectTouch||Wt.series.shouldShowTooltip(gt,_t))))return void this.hide();{let Wt=this.getLabel(G&&this.tt||{});(!x.style.width||P)&&Wt.css({width:(this.outside?this.getPlayingField():p.spacingBox).width+"px"}),Wt.attr({class:this.getClassName(A),text:nt&&nt.join?nt.join(""):nt}),this.outside&&Wt.attr({x:po(Wt.x||0,0,this.getPlayingField().width-(Wt.width||0)-1)}),P||Wt.attr({stroke:x.borderColor||A.color||it.color||"#666666"}),this.updatePosition({plotX:st,plotY:rt,negative:A.negative,ttBelow:A.ttBelow,series:it,h:Z[2]||0})}}this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1}ju(this,"refresh")}renderSplit(c,d){let p=this,{chart:x,chart:{chartWidth:v,chartHeight:w,plotHeight:T,plotLeft:A,plotTop:M,scrollablePixelsY:z=0,scrollablePixelsX:P,styledMode:G},distance:Z,options:st,options:{fixed:rt,position:nt,positioner:it},pointer:gt}=p,{scrollLeft:_t=0,scrollTop:Wt=0}=x.scrollablePlotArea?.scrollingContainer||{},Vt=p.outside&&typeof P!="number"?fd.documentElement.getBoundingClientRect():{left:_t,right:_t+v},qt=p.getLabel(),Kt=this.renderer||x.renderer,Zt=!!x.xAxis[0]?.opposite,{left:Se,top:Ne}=gt.getChartPosition(),we=it||rt,je=M+Wt,Qe=0,cn=T-z,Tn=function(Wn,Gn,Is,Qn=[0,0],Gs=!0){let Si,Hs;if(Is.isHeader)Hs=Zt?0:cn,Si=po(Qn[0]-Wn/2,Vt.left,Vt.right-Wn-(p.outside?Se:0));else if(rt&&Is){let ki=p.getFixedPosition(Wn,Gn,Is);Si=ki.x,Hs=ki.y-je}else Hs=Qn[1]-je,Si=po(Si=Gs?Qn[0]-Wn-Z:Qn[0]+Z,Gs?Si:Vt.left,Vt.right);return{x:Si,y:Hs}};I(c)&&(c=[!1,c]);let yn=c.slice(0,d.length+1).reduce(function(Wn,Gn,Is){if(Gn!==!1&&Gn!==""){let Qn=d[Is-1]||{isHeader:!0,plotX:d[0].plotX,plotY:T,series:{}},Gs=Qn.isHeader,Si=Gs?p:Qn.series,Hs=Si.tt=(function(Na,pr,jl){let Lo=Na,{isHeader:Zu,series:Jf}=pr,Da=Jf.tooltipOptions||st;if(!Lo){let bd={padding:Da.padding,r:Da.borderRadius};G||(bd.fill=Da.backgroundColor,bd["stroke-width"]=Da.borderWidth??(rt&&!Zu?0:1)),Lo=Kt.label("",0,0,Da[Zu?"headerShape":"shape"]||(rt&&!Zu?"rect":"callout"),void 0,void 0,Da.useHTML).addClass(p.getClassName(pr,!0,Zu)).attr(bd).add(qt)}return Lo.isActive=!0,Lo.attr({text:jl}),G||Lo.css(Da.style).attr({stroke:Da.borderColor||pr.color||Jf.color||"#333333"}),Lo})(Si.tt,Qn,Gn.toString()),ki=Hs.getBBox(),Zr=ki.width+Hs.strokeWidth();Gs&&(Qe=ki.height,cn+=Qe,Zt&&(je-=Qe));let{anchorX:Jr,anchorY:xd}=(function(Na){let pr,jl,{isHeader:Lo,plotX:Zu=0,plotY:Jf=0,series:Da}=Na;if(Lo)pr=Math.max(A+Zu,A),jl=M+T/2;else{let{xAxis:bd,yAxis:Hk}=Da;pr=bd.pos+po(Zu,-Z,bd.len+Z),Da.shouldShowTooltip(0,Hk.pos-M+Jf,{ignoreX:!0})&&(jl=Hk.pos+Jf)}return{anchorX:pr=po(pr,Vt.left-Z,Vt.right+Z),anchorY:jl}})(Qn);if(typeof xd=="number"){let Na=ki.height+1,pr=(it||Tn).call(p,Zr,Na,Qn,[Jr,xd]);Wn.push({align:we?0:void 0,anchorX:Jr,anchorY:xd,boxWidth:Zr,point:Qn,rank:W(pr.rank,+!!Gs),size:Na,target:pr.y,tt:Hs,x:pr.x})}else Hs.isActive=!1}return Wn},[]);!we&&yn.some(Wn=>{let{outside:Gn}=p,Is=(Gn?Se:0)+Wn.anchorX;return Is<Vt.left&&Is+Wn.boxWidth<Vt.right||Is<Se-Vt.left+Wn.boxWidth&&Vt.right-Is>Is})&&(yn=yn.map(Wn=>{let{x:Gn,y:Is}=Tn.call(this,Wn.boxWidth,Wn.size,Wn.point,[Wn.anchorX,Wn.anchorY],!1);return Cx(Wn,{target:Is,x:Gn})})),p.cleanSplit(),kx(yn,cn);let mn={left:Se,right:Se};yn.forEach(function(Wn){let{x:Gn,boxWidth:Is,isHeader:Qn}=Wn;!Qn&&(p.outside&&Se+Gn<mn.left&&(mn.left=Se+Gn),!Qn&&p.outside&&mn.left+Is>mn.right&&(mn.right=Se+Gn))}),yn.forEach(function(Wn){let{x:Gn,anchorX:Is,anchorY:Qn,pos:Gs,point:{isHeader:Si}}=Wn,Hs={visibility:Gs===void 0?"hidden":"inherit",x:Gn,y:(Gs||0)+je+(rt&&nt.y||0),anchorX:Is,anchorY:Qn};if(p.outside&&Gn<Is){let ki=Se-mn.left;ki>0&&(Si||(Hs.x=Gn+ki,Hs.anchorX=Is+ki),Si&&(Hs.x=(mn.right-mn.left)/2,Hs.anchorX=Is+ki))}Wn.tt.attr(Hs)});let{container:Qs,outside:Us,renderer:Yr}=p;if(Us&&Qs&&Yr){let{width:Wn,height:Gn,x:Is,y:Qn}=qt.getBBox();Yr.setSize(Wn+Is,Gn+Qn,!1),Qs.style.left=mn.left+"px",Qs.style.top=Ne+"px"}wx&&qt.attr({opacity:qt.opacity===1?.999:1})}drawTracker(){let c=this;if(!this.shouldStickOnContact()){c.tracker&&(c.tracker=c.tracker.destroy());return}let d=c.chart,p=c.label,x=c.shared?d.hoverPoints:d.hoverPoint;if(!p||!x)return;let v={x:0,y:0,width:0,height:0},w=this.getAnchor(x),T=p.getBBox();w[0]+=d.plotLeft-(p.translateX||0),w[1]+=d.plotTop-(p.translateY||0),v.x=Math.min(0,w[0]),v.y=Math.min(0,w[1]),v.width=w[0]<0?Math.max(Math.abs(w[0]),T.width-w[0]):Math.max(Math.abs(w[0]),T.width),v.height=w[1]<0?Math.max(Math.abs(w[1]),T.height-Math.abs(w[1])):Math.max(Math.abs(w[1]),T.height),c.tracker?c.tracker.attr(v):(c.tracker=p.renderer.rect(v).addClass("highcharts-tracker").add(p),Sg(c.tracker.element,"mouseenter",()=>{Nc(c.hideTimer)}),d.styledMode||c.tracker.attr({fill:"rgba(0,0,0,0)"}))}styledModeFormat(c){return c.replace('style="font-size: 0.8em"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex} {series.options.className} {point.options.className}"')}headerFooterFormatter(c,d){let p=c.series,x=p.tooltipOptions,v=p.xAxis,w=v?.dateTime,T={isFooter:d,point:c},A=x.xDateFormat||"",M=x[d?"footerFormat":"headerFormat"];return ju(this,"headerFormatter",T,function(z){if(w&&!A&&Sx(c.key)&&(A=w.getXDateFormat(c.key,x.dateTimeLabelFormats)),w&&A){if(L(A)){let P=A;Cg[0]=G=>p.chart.time.dateFormat(P,G),A="%0"}(c.tooltipDateKeys||["key"]).forEach(P=>{M=M.replace(RegExp("point\\."+P+"([ \\)}])"),`(point.${P}:${A})$1`)})}p.chart.styledMode&&(M=this.styledModeFormat(M)),z.text=Hu(M,c,this.chart)}),T.text||""}update(c){this.destroy(),this.init(this.chart,F(!0,this.options,c))}updatePosition(c){let{chart:d,container:p,distance:x,options:v,pointer:w,renderer:T}=this,{height:A=0,width:M=0}=this.getLabel(),{fixed:z,positioner:P}=v,{left:G,top:Z,scaleX:st,scaleY:rt}=w.getChartPosition(),nt=(P||z&&this.getFixedPosition||this.getPosition).call(this,M,A,c),it=at.doc,gt=(c.plotX||0)+d.plotLeft,_t=(c.plotY||0)+d.plotTop,Wt;if(T&&p){if(P||z){let{scrollLeft:Vt=0,scrollTop:qt=0}=d.scrollablePlotArea?.scrollingContainer||{};nt.x+=Vt+G-x,nt.y+=qt+Z-x}Wt=(v.borderWidth||0)+2*x+2,T.setSize(po(M+Wt,0,it.documentElement.clientWidth)-1,A+Wt,!1),(st!==1||rt!==1)&&(Tg(p,{transform:`scale(${st}, ${rt})`}),gt*=st,_t*=rt),gt+=G-nt.x,_t+=Z-nt.y}this.move(Math.round(nt.x),Math.round(nt.y||0),gt,_t)}}(f=xt||(xt={})).compose=function(N){et(yx,"Core.Tooltip")&&Sg(N,"afterInit",function(){let c=this.chart;c.options.tooltip&&(c.tooltip=new f(c,c.options.tooltip,this))})};let Nt=xt,{animObject:Dt}=Un,{defaultOptions:ee}=Xe,{format:ue}=dr,{addEvent:fe,crisp:ke,erase:Ye,extend:Je,fireEvent:dn,getNestedProperty:Xn,isArray:Jn,isFunction:Bn,isNumber:pn,isObject:us,merge:Ts,pick:ks,syncTimeout:ms,removeEvent:oi,uniqueKey:Kr}=Ae;class Nr{constructor(c,d,p){this.formatPrefix="point",this.visible=!0,this.point=this,this.series=c,this.applyOptions(d,p),this.id??(this.id=Kr()),this.resolveColor(),this.dataLabelOnNull??(this.dataLabelOnNull=c.options.nullInteraction),c.chart.pointCount++,this.category=c.xAxis?.categories?.[this.x]??this.x,this.key=this.name??this.category,dn(this,"afterInit")}animateBeforeDestroy(){let c=this,d={x:c.startXPos,opacity:0},p=c.getGraphicalProps();p.singular.forEach(function(x){c[x]=c[x].animate(x==="dataLabel"?{x:c[x].startXPos,y:c[x].startYPos,opacity:0}:d)}),p.plural.forEach(function(x){c[x].forEach(function(v){v.element&&v.animate(Je({x:c.startXPos},v.startYPos?{x:v.startXPos,y:v.startYPos}:{}))})})}applyOptions(c,d){let p=this.series,x=p.options.pointValKey||p.pointValKey;return Je(this,c=Nr.prototype.optionsToObject.call(this,c)),this.options=this.options?Je(this.options,c):c,c.group&&delete this.group,c.dataLabels&&delete this.dataLabels,x&&(this.y=Nr.prototype.getNestedProperty.call(this,x)),this.selected&&(this.state="select"),"name"in this&&d===void 0&&p.xAxis&&p.xAxis.hasNames&&(this.x=p.xAxis.nameToX(this)),this.x===void 0&&p?this.x=d??p.autoIncrement():pn(c.x)&&p.options.relativeXValue?this.x=p.autoIncrement(c.x):typeof this.x=="string"&&(d??(d=p.chart.time.parse(this.x)),pn(d)&&(this.x=d)),this.isNull=this.isValid&&!this.isValid(),this.formatPrefix=this.isNull?"null":"point",this}destroy(){if(!this.destroyed){let c=this,d=c.series,p=d.chart,x=d.options.dataSorting,v=p.hoverPoints,w=Dt(c.series.chart.renderer.globalAnimation),T=()=>{for(let A in(c.graphic||c.graphics||c.dataLabel||c.dataLabels)&&(oi(c),c.destroyElements()),c)delete c[A]};c.legendItem&&p.legend.destroyItem(c),v&&(c.setState(),Ye(v,c),v.length||(p.hoverPoints=null)),c===p.hoverPoint&&c.onMouseOut(),x?.enabled?(this.animateBeforeDestroy(),ms(T,w.duration)):T(),p.pointCount--}this.destroyed=!0}destroyElements(c){let d=this,p=d.getGraphicalProps(c);p.singular.forEach(function(x){d[x]=d[x].destroy()}),p.plural.forEach(function(x){d[x].forEach(function(v){v?.element&&v.destroy()}),delete d[x]})}firePointEvent(c,d,p){let x=this,v=this.series.options;x.manageEvent(c),c==="click"&&v.allowPointSelect&&(p=function(w){!x.destroyed&&x.select&&x.select(null,w.ctrlKey||w.metaKey||w.shiftKey)}),dn(x,c,d,p)}getClassName(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(this.colorIndex!==void 0?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone?.className?" "+this.zone.className.replace("highcharts-negative",""):"")}getGraphicalProps(c){let d,p,x=this,v=[],w={singular:[],plural:[]};for((c=c||{graphic:1,dataLabel:1}).graphic&&v.push("graphic","connector"),c.dataLabel&&v.push("dataLabel","dataLabelPath","dataLabelUpper"),p=v.length;p--;)x[d=v[p]]&&w.singular.push(d);return["graphic","dataLabel"].forEach(function(T){let A=T+"s";c[T]&&x[A]&&w.plural.push(A)}),w}getNestedProperty(c){if(c)return c.indexOf("custom.")===0?Xn(c,this.options):this[c]}getZone(){let c=this.series,d=c.zones,p=c.zoneAxis||"y",x,v=0;for(x=d[0];this[p]>=x.value;)x=d[++v];return this.nonZonedColor||(this.nonZonedColor=this.color),x?.color&&!this.options.color?this.color=x.color:this.color=this.nonZonedColor,x}hasNewShapeType(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType}isValid(){return(pn(this.x)||this.x instanceof Date)&&pn(this.y)}optionsToObject(c){let d=this.series,p=d.options.keys,x=p||d.pointArrayMap||["y"],v=x.length,w={},T,A=0,M=0;if(pn(c)||c===null)w[x[0]]=c;else if(Jn(c))for(!p&&c.length>v&&((T=typeof c[0])=="string"?d.xAxis?.dateTime?w.x=d.chart.time.parse(c[0]):w.name=c[0]:T==="number"&&(w.x=c[0]),A++);M<v;)p&&c[A]===void 0||(x[M].indexOf(".")>0?Nr.prototype.setNestedProperty(w,c[A],x[M]):w[x[M]]=c[A]),A++,M++;else typeof c=="object"&&(w=c,c.dataLabels&&(d.hasDataLabels=()=>!0),c.marker&&(d._hasPointMarkers=!0));return w}pos(c,d=this.plotY){if(!this.destroyed){let{plotX:p,series:x}=this,{chart:v,xAxis:w,yAxis:T}=x,A=0,M=0;if(pn(p)&&pn(d))return c&&(A=w?w.pos:v.plotLeft,M=T?T.pos:v.plotTop),v.inverted&&w&&T?[T.len-d+M,w.len-p+A]:[p+A,d+M]}}resolveColor(){let c=this.series,d=c.chart.options.chart,p=c.chart.styledMode,x,v,w=d.colorCount,T;delete this.nonZonedColor,c.options.colorByPoint?(p||(x=(v=c.options.colors||c.chart.options.colors)[c.colorCounter],w=v.length),T=c.colorCounter,c.colorCounter++,c.colorCounter===w&&(c.colorCounter=0)):(p||(x=c.color),T=c.colorIndex),this.colorIndex=ks(this.options.colorIndex,T),this.color=ks(this.options.color,x)}setNestedProperty(c,d,p){return p.split(".").reduce(function(x,v,w,T){let A=T.length-1===w;return x[v]=A?d:us(x[v],!0)?x[v]:{},x[v]},c),c}shouldDraw(){return!this.isNull}tooltipFormatter(c){let{chart:d,pointArrayMap:p=["y"],tooltipOptions:x}=this.series,{valueDecimals:v="",valuePrefix:w="",valueSuffix:T=""}=x;return d.styledMode&&(c=d.tooltip?.styledModeFormat(c)||c),p.forEach(A=>{A="{point."+A,(w||T)&&(c=c.replace(RegExp(A+"}","g"),w+A+"}"+T)),c=c.replace(RegExp(A+"}","g"),A+":,."+v+"f}")}),ue(c,this,d)}update(c,d,p,x){let v,w=this,T=w.series,A=w.graphic,M=T.chart,z=T.options;function P(){w.applyOptions(c);let G=A&&w.hasMockGraphic,Z=w.y===null?!G:G;A&&Z&&(w.graphic=A.destroy(),delete w.hasMockGraphic),us(c,!0)&&(A?.element&&c&&c.marker&&c.marker.symbol!==void 0&&(w.graphic=A.destroy()),c?.dataLabels&&w.dataLabel&&(w.dataLabel=w.dataLabel.destroy())),v=w.index;let st={};for(let rt of T.dataColumnKeys())st[rt]=w[rt];T.dataTable.setRow(st,v),z.data[v]=us(z.data[v],!0)||us(c,!0)?w.options:ks(c,z.data[v]),T.isDirty=T.isDirtyData=!0,!T.fixedBox&&T.hasCartesianSeries&&(M.isDirtyBox=!0),z.legendType==="point"&&(M.isDirtyLegend=!0),d&&M.redraw(p)}d=ks(d,!0),x===!1?P():w.firePointEvent("update",{options:c},P)}remove(c,d){this.series.removePoint(this.series.data.indexOf(this),c,d)}select(c,d){let p=this,x=p.series,v=x.chart;c=ks(c,!p.selected),this.selectedStaging=c,p.firePointEvent(c?"select":"unselect",{accumulate:d},function(){p.selected=p.options.selected=c,x.options.data[x.data.indexOf(p)]=p.options,p.setState(c&&"select"),d||v.getSelectedPoints().forEach(function(w){let T=w.series;w.selected&&w!==p&&(w.selected=w.options.selected=!1,T.options.data[T.data.indexOf(w)]=w.options,w.setState(v.hoverPoints&&T.options.inactiveOtherPoints?"inactive":""),w.firePointEvent("unselect"))})}),delete this.selectedStaging}onMouseOver(c){let{inverted:d,pointer:p}=this.series.chart;p&&(c=c?p.normalize(c):p.getChartCoordinatesFromPoint(this,d),p.runPointActions(c,this))}onMouseOut(){let c=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||(c.hoverPoints||[]).forEach(function(d){d.setState()}),c.hoverPoints=c.hoverPoint=null}manageEvent(c){let d=Ts(this.series.options.point,this.options),p=d.events?.[c];Bn(p)&&(!this.hcEvents?.[c]||this.hcEvents?.[c]?.map(x=>x.fn).indexOf(p)===-1)?(this.importedUserEvent?.(),this.importedUserEvent=fe(this,c,p),this.hcEvents&&(this.hcEvents[c].userEvent=!0)):this.importedUserEvent&&!p&&this.hcEvents?.[c]&&this.hcEvents?.[c].userEvent&&(oi(this,c),delete this.hcEvents[c],Object.keys(this.hcEvents)||delete this.importedUserEvent)}setState(c,d){let p=this.series,x=this.state,v=p.options.states[c||"normal"]||{},w=ee.plotOptions[p.type].marker&&p.options.marker,T=w&&w.enabled===!1,A=w?.states?.[c||"normal"]||{},M=A.enabled===!1,z=this.marker||{},P=p.chart,G=w&&p.markerAttribs,Z=p.halo,st,rt,nt,it=p.stateMarkerGraphic,gt;if((c=c||"")===this.state&&!d||this.selected&&c!=="select"||v.enabled===!1||c&&(M||T&&A.enabled===!1)||c&&z.states&&z.states[c]&&z.states[c].enabled===!1)return;if(this.state=c,G&&(st=p.markerAttribs(this,c)),this.graphic&&!this.hasMockGraphic){if(x&&this.graphic.removeClass("highcharts-point-"+x),c&&this.graphic.addClass("highcharts-point-"+c),!P.styledMode){rt=p.pointAttribs(this,c),nt=ks(P.options.chart.animation,v.animation);let qt=rt.opacity;p.options.inactiveOtherPoints&&pn(qt)&&(this.dataLabels||[]).forEach(function(Kt){Kt&&!Kt.hasClass("highcharts-data-label-hidden")&&(Kt.animate({opacity:qt},nt),Kt.connector&&Kt.connector.animate({opacity:qt},nt))}),this.graphic.animate(rt,nt)}st&&this.graphic.animate(st,ks(P.options.chart.animation,A.animation,w.animation)),it&&it.hide()}else c&&A&&(gt=z.symbol||p.symbol,it&&it.currentSymbol!==gt&&(it=it.destroy()),st&&(it?it[d?"animate":"attr"]({x:st.x,y:st.y}):gt&&(p.stateMarkerGraphic=it=P.renderer.symbol(gt,st.x,st.y,st.width,st.height,Ts(w,A)).add(p.markerGroup),it.currentSymbol=gt)),!P.styledMode&&it&&this.state!=="inactive"&&it.attr(p.pointAttribs(this,c))),it&&(it[c&&this.isInside?"show":"hide"](),it.element.point=this,it.addClass(this.getClassName(),!0));let _t=v.halo,Wt=this.graphic||it,Vt=Wt?.visibility||"inherit";_t?.size&&Wt&&Vt!=="hidden"&&!this.isCluster?(Z||(p.halo=Z=P.renderer.path().add(Wt.parentGroup)),Z.show()[d?"animate":"attr"]({d:this.haloPath(_t.size)}),Z.attr({class:"highcharts-halo highcharts-color-"+ks(this.colorIndex,p.colorIndex)+(this.className?" "+this.className:""),visibility:Vt,zIndex:-1}),Z.point=this,P.styledMode||Z.attr(Je({fill:this.color||p.color,"fill-opacity":_t.opacity},Vs.filterUserAttributes(_t.attributes||{})))):Z?.point?.haloPath&&!Z.point.destroyed&&Z.animate({d:Z.point.haloPath(0)},null,Z.hide),dn(this,"afterSetState",{state:c})}haloPath(c){let d=this.pos();return d?this.series.chart.renderer.symbols.circle(ke(d[0],1)-c,d[1]-c,2*c,2*c):[]}}let Dr=Nr,{parse:Vl}=In,{charts:Ul,composed:mo,isTouchDevice:Fo}=at,{addEvent:nr,attr:Tx,css:Gl,extend:Ix,find:R3,fireEvent:Dc,isNumber:Eg,isObject:_g,objectEach:$$,offset:N$,pick:ol,pushUnique:D$,splat:M3}=Ae;class Xi{applyInactiveState(c=[]){let d=[];for(let p of(c.forEach(x=>{let v=x.series;d.push(v),v.linkedParent&&d.push(v.linkedParent),v.linkedSeries&&d.push.apply(d,v.linkedSeries),v.navigatorSeries&&d.push(v.navigatorSeries),v.boosted&&v.markerGroup&&d.push.apply(d,this.chart.series.filter(w=>w.markerGroup===v.markerGroup))}),this.chart.series)){let x=p.options;x.states?.inactive?.enabled!==!1&&(d.indexOf(p)===-1?p.setState("inactive",!0):x.inactiveOtherPoints&&p.setAllPointsToState("inactive"))}}destroy(){let c=this;this.eventsToUnbind.forEach(d=>d()),this.eventsToUnbind=[],!at.chartCount&&(Xi.unbindDocumentMouseUp.forEach(d=>d.unbind()),Xi.unbindDocumentMouseUp.length=0,Xi.unbindDocumentTouchEnd&&(Xi.unbindDocumentTouchEnd=Xi.unbindDocumentTouchEnd())),$$(c,function(d,p){c[p]=void 0})}getSelectionMarkerAttrs(c,d){let p={args:{chartX:c,chartY:d},attrs:{},shapeType:"rect"};return Dc(this,"getSelectionMarkerAttrs",p,x=>{let v,{chart:w,zoomHor:T,zoomVert:A}=this,{mouseDownX:M=0,mouseDownY:z=0}=w,P=x.attrs;P.x=w.plotLeft,P.y=w.plotTop,P.width=T?1:w.plotWidth,P.height=A?1:w.plotHeight,T&&(P.width=Math.max(1,Math.abs(v=c-M)),P.x=(v>0?0:v)+M),A&&(P.height=Math.max(1,Math.abs(v=d-z)),P.y=(v>0?0:v)+z)}),p}drag(c){let{chart:d}=this,{mouseDownX:p=0,mouseDownY:x=0}=d,{panning:v,panKey:w,selectionMarkerFill:T}=d.options.chart,A=d.plotLeft,M=d.plotTop,z=d.plotWidth,P=d.plotHeight,G=_g(v)?v.enabled:v,Z=w&&c[`${w}Key`],st=c.chartX,rt=c.chartY,nt,it=this.selectionMarker;if((!it||!it.touch)&&(st<A?st=A:st>A+z&&(st=A+z),rt<M?rt=M:rt>M+P&&(rt=M+P),this.hasDragged=Math.sqrt(Math.pow(p-st,2)+Math.pow(x-rt,2)),this.hasDragged>10)){nt=d.isInsidePlot(p-A,x-M,{visiblePlotOnly:!0});let{shapeType:gt,attrs:_t}=this.getSelectionMarkerAttrs(st,rt);this.hasZoom&&nt&&!Z&&!it&&(this.selectionMarker=it=d.renderer[gt](),it.attr({class:"highcharts-selection-marker",zIndex:7}).add(),d.styledMode||it.attr({fill:T||Vl("#334eff").setOpacity(.25).get()})),it&&it.attr(_t),nt&&!it&&G&&d.pan(c,v)}}dragStart(c){let d=this.chart;d.mouseIsDown=c.type,d.cancelClick=!1,d.mouseDownX=c.chartX,d.mouseDownY=c.chartY}getSelectionBox(c){let d={args:{marker:c},result:c.getBBox()};return Dc(this,"getSelectionBox",d),d.result}drop(c){let d,{chart:p,selectionMarker:x}=this;for(let v of p.axes)v.isPanning&&(v.isPanning=!1,(v.options.startOnTick||v.options.endOnTick||v.series.some(w=>w.boosted))&&(v.forceRedraw=!0,v.setExtremes(v.userMin,v.userMax,!1),d=!0));if(d&&p.redraw(),x&&c){if(this.hasDragged){let v=this.getSelectionBox(x);p.transform({axes:p.axes.filter(w=>w.zoomEnabled&&(w.coll==="xAxis"&&this.zoomX||w.coll==="yAxis"&&this.zoomY)),selection:{originalEvent:c,xAxis:[],yAxis:[],...v},from:v})}Eg(p.index)&&(this.selectionMarker=x.destroy())}p&&Eg(p.index)&&(Gl(p.container,{cursor:p._cursor}),p.cancelClick=this.hasDragged>10,p.mouseIsDown=!1,this.hasDragged=0,this.pinchDown=[],this.hasPinchMoved=!1)}findNearestKDPoint(c,d,p){let x;return c.forEach(function(v){var w;let T,A,M,z=!(v.noSharedTooltip&&d)&&0>v.options.findNearestPointBy.indexOf("y"),P=v.searchPoint(p,z);_g(P,!0)&&P.series&&(!_g(x,!0)||(T=(w=x).distX-P.distX,A=w.dist-P.dist,M=P.series.group?.zIndex-w.series.group?.zIndex,(T!==0&&d?T:A!==0?A:M!==0?M:w.series.index>P.series.index?-1:1)>0))&&(x=P)}),x}getChartCoordinatesFromPoint(c,d){let{xAxis:p,yAxis:x}=c.series,v=c.shapeArgs;if(p&&x){let w=c.clientX??c.plotX??0,T=c.plotY||0;return c.isNode&&v&&Eg(v.x)&&Eg(v.y)&&(w=v.x,T=v.y),d?{chartX:x.len+x.pos-T,chartY:p.len+p.pos-w}:{chartX:w+p.pos,chartY:T+x.pos}}if(v?.x&&v.y)return{chartX:v.x,chartY:v.y}}getChartPosition(){if(this.chartPosition)return this.chartPosition;let{container:c}=this.chart,d=N$(c);this.chartPosition={left:d.left,top:d.top,scaleX:1,scaleY:1};let{offsetHeight:p,offsetWidth:x}=c;return x>2&&p>2&&(this.chartPosition.scaleX=d.width/x,this.chartPosition.scaleY=d.height/p),this.chartPosition}getCoordinates(c){let d={xAxis:[],yAxis:[]};for(let p of this.chart.axes)d[p.isXAxis?"xAxis":"yAxis"].push({axis:p,value:p.toValue(c[p.horiz?"chartX":"chartY"])});return d}getHoverData(c,d,p,x,v,w){let T=[],A=function(Z){return Z.visible&&!(!v&&Z.directTouch)&&ol(Z.options.enableMouseTracking,!0)},M=d,z,P={chartX:w?w.chartX:void 0,chartY:w?w.chartY:void 0,shared:v};Dc(this,"beforeGetHoverData",P),z=M&&!M.stickyTracking?[M]:p.filter(Z=>Z.stickyTracking&&(P.filter||A)(Z));let G=x&&c||!w?c:this.findNearestKDPoint(z,v,w);return M=G?.series,G&&(v&&!M.noSharedTooltip?(z=p.filter(function(Z){return P.filter?P.filter(Z):A(Z)&&!Z.noSharedTooltip})).forEach(function(Z){let st=Z.options?.nullInteraction,rt=R3(Z.points,function(nt){return nt.x===G.x&&(!nt.isNull||!!st)});_g(rt)&&(Z.boosted&&Z.boost&&(rt=Z.boost.getPoint(rt)),T.push(rt))}):T.push(G)),Dc(this,"afterGetHoverData",P={hoverPoint:G}),{hoverPoint:P.hoverPoint,hoverSeries:M,hoverPoints:T}}getPointFromEvent(c){let d=c.target,p;for(;d&&!p;)p=d.point,d=d.parentNode;return p}onTrackerMouseOut(c){let d=this.chart,p=c.relatedTarget,x=d.hoverSeries;this.isDirectTouch=!1,!x||!p||x.stickyTracking||this.inClass(p,"highcharts-tooltip")||this.inClass(p,"highcharts-series-"+x.index)&&this.inClass(p,"highcharts-tracker")||x.onMouseOut()}inClass(c,d){let p=c,x;for(;p;){if(x=Tx(p,"class")){if(x.indexOf(d)!==-1)return!0;if(x.indexOf("highcharts-container")!==-1)return!1}p=p.parentElement}}constructor(c,d){this.hasDragged=0,this.pointerCaptureEventsToUnbind=[],this.eventsToUnbind=[],this.options=d,this.chart=c,this.runChartClick=!!d.chart.events?.click,this.pinchDown=[],this.setDOMEvents(),Dc(this,"afterInit")}normalize(c,d){let p=c.touches,x=p?p.length?p.item(0):ol(p.changedTouches,c.changedTouches)[0]:c;d||(d=this.getChartPosition());let v=x.pageX-d.left,w=x.pageY-d.top;return Ix(c,{chartX:Math.round(v/=d.scaleX),chartY:Math.round(w/=d.scaleY)})}onContainerClick(c){let d=this.chart,p=d.hoverPoint,x=this.normalize(c),v=d.plotLeft,w=d.plotTop;!d.cancelClick&&(p&&this.inClass(x.target,"highcharts-tracker")?(Dc(p.series,"click",Ix(x,{point:p})),d.hoverPoint&&p.firePointEvent("click",x)):(Ix(x,this.getCoordinates(x)),d.isInsidePlot(x.chartX-v,x.chartY-w,{visiblePlotOnly:!0})&&Dc(d,"click",x)))}onContainerMouseDown(c){let d=(1&(c.buttons||c.button))==1;c=this.normalize(c),at.isFirefox&&c.button!==0&&this.onContainerMouseMove(c),(c.button===void 0||d)&&(this.zoomOption(c),d&&c.preventDefault?.(),this.dragStart(c))}onContainerMouseLeave(c){let{pointer:d}=Ul[ol(Xi.hoverChartIndex,-1)]||{};c=this.normalize(c),this.onContainerMouseMove(c),d&&!this.inClass(c.relatedTarget,"highcharts-tooltip")&&(d.reset(),d.chartPosition=void 0)}onContainerMouseEnter(){delete this.chartPosition}onContainerMouseMove(c){let d=this.chart,p=d.tooltip,x=this.normalize(c);this.setHoverChartIndex(c),(d.mouseIsDown==="mousedown"||this.touchSelect(x))&&this.drag(x),!d.exporting?.openMenu&&(this.inClass(x.target,"highcharts-tracker")||d.isInsidePlot(x.chartX-d.plotLeft,x.chartY-d.plotTop,{visiblePlotOnly:!0}))&&!p?.shouldStickOnContact(x)&&(this.inClass(x.target,"highcharts-no-tooltip")?this.reset(!1,0):this.runPointActions(x))}onDocumentTouchEnd(c){this.onDocumentMouseUp(c)}onContainerTouchMove(c){this.touchSelect(c)?this.onContainerMouseMove(c):this.touch(c)}onContainerTouchStart(c){this.touchSelect(c)?this.onContainerMouseDown(c):(this.zoomOption(c),this.touch(c,!0))}onDocumentMouseMove(c){let d=this.chart,p=d.tooltip,x=this.chartPosition,v=this.normalize(c,x);!x||d.isInsidePlot(v.chartX-d.plotLeft,v.chartY-d.plotTop,{visiblePlotOnly:!0})||p?.shouldStickOnContact(v)||v.target!==d.container.ownerDocument&&this.inClass(v.target,"highcharts-tracker")||this.reset()}onDocumentMouseUp(c){c?.touches&&this.hasPinchMoved&&c?.preventDefault?.(),Ul[ol(Xi.hoverChartIndex,-1)]?.pointer?.drop(c)}pinch(c){let d=this,{chart:p,hasZoom:x,lastTouches:v}=d,w=[].map.call(c.touches||[],P=>d.normalize(P)),T=w.length,A=T===1&&(d.inClass(c.target,"highcharts-tracker")&&p.runTrackerClick||d.runChartClick),M=p.tooltip,z=T===1&&ol(M?.options.followTouchMove,!0);T>1?d.initiated=!0:z&&(d.initiated=!1),x&&d.initiated&&!A&&c.cancelable!==!1&&c.preventDefault(),c.type==="touchstart"?(d.pinchDown=w,d.res=!0,p.mouseDownX=c.chartX):z?this.runPointActions(d.normalize(c)):v&&(Dc(p,"touchpan",{originalEvent:c,touches:w},()=>{let P=G=>{let Z=G[0],st=G[1]||Z;return{x:Z.chartX,y:Z.chartY,width:st.chartX-Z.chartX,height:st.chartY-Z.chartY}};p.transform({axes:p.axes.filter(G=>G.zoomEnabled&&(this.zoomHor&&G.horiz||this.zoomVert&&!G.horiz)),to:P(w),from:P(v),trigger:c.type})}),d.res&&(d.res=!1,this.reset(!1,0))),d.lastTouches=w}reset(c,d){let p=this.chart,x=p.hoverSeries,v=p.hoverPoint,w=p.hoverPoints,T=p.tooltip,A=T?.shared?w:v;c&&A&&M3(A).forEach(function(M){M.series.isCartesian&&M.plotX===void 0&&(c=!1)}),c?T&&A&&M3(A).length&&(T.refresh(A),T.shared&&w?w.forEach(function(M){M.setState(M.state,!0),M.series.isCartesian&&(M.series.xAxis.crosshair&&M.series.xAxis.drawCrosshair(null,M),M.series.yAxis.crosshair&&M.series.yAxis.drawCrosshair(null,M))}):v&&(v.setState(v.state,!0),p.axes.forEach(function(M){M.crosshair&&v.series[M.coll]===M&&M.drawCrosshair(null,v)}))):(v&&v.onMouseOut(),w&&w.forEach(function(M){M.setState()}),x&&x.onMouseOut(),T&&T.hide(d),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),p.axes.forEach(function(M){M.hideCrosshair()}),p.hoverPoints=p.hoverPoint=void 0)}runPointActions(c,d,p){let x=this.chart,v=x.series,w=x.tooltip?.options.enabled?x.tooltip:void 0,T=!!w&&w.shared,A=d||x.hoverPoint,M=A?.series||x.hoverSeries,z=(!c||c.type!=="touchmove")&&(!!d||M?.directTouch&&this.isDirectTouch),P=this.getHoverData(A,M,v,z,T,c);A=P.hoverPoint,M=P.hoverSeries;let G=P.hoverPoints,Z=M?.tooltipOptions.followPointer&&!M.tooltipOptions.split,st=T&&M&&!M.noSharedTooltip;if(A&&(p||A!==x.hoverPoint||w?.isHidden)){if((x.hoverPoints||[]).forEach(function(rt){G.indexOf(rt)===-1&&rt.setState()}),x.hoverSeries!==M&&M.onMouseOver(),this.applyInactiveState(G),(G||[]).forEach(function(rt){rt.setState("hover")}),x.hoverPoint&&x.hoverPoint.firePointEvent("mouseOut"),!A.series)return;x.hoverPoints=G,x.hoverPoint=A,A.firePointEvent("mouseOver",void 0,()=>{w&&A&&w.refresh(st?G:A,c)})}else if(Z&&w&&!w.isHidden){let rt=w.getAnchor([{}],c);x.isInsidePlot(rt[0],rt[1],{visiblePlotOnly:!0})&&w.updatePosition({plotX:rt[0],plotY:rt[1]})}this.unDocMouseMove||(this.unDocMouseMove=nr(x.container.ownerDocument,"mousemove",rt=>Ul[Xi.hoverChartIndex??-1]?.pointer?.onDocumentMouseMove(rt)),this.eventsToUnbind.push(this.unDocMouseMove)),x.axes.forEach(function(rt){let nt,it=rt.crosshair?.snap??!0;it&&((nt=x.hoverPoint)&&nt.series[rt.coll]===rt||(nt=R3(G,gt=>gt.series?.[rt.coll]===rt))),nt||!it?rt.drawCrosshair(c,nt):rt.hideCrosshair()})}setDOMEvents(){let c=this.chart.container,d=c.ownerDocument,p=v=>v.parentElement||v.getRootNode()?.host?.parentElement;c.onmousedown=this.onContainerMouseDown.bind(this),c.onmousemove=this.onContainerMouseMove.bind(this),c.onclick=this.onContainerClick.bind(this),this.eventsToUnbind.push(nr(c,"mouseenter",this.onContainerMouseEnter.bind(this)),nr(c,"mouseleave",this.onContainerMouseLeave.bind(this))),Xi.unbindDocumentMouseUp.some(v=>v.doc===d)||Xi.unbindDocumentMouseUp.push({doc:d,unbind:nr(d,"mouseup",this.onDocumentMouseUp.bind(this))});let x=p(this.chart.renderTo);for(;x&&x.tagName!=="BODY";)this.eventsToUnbind.push(nr(x,"scroll",()=>{delete this.chartPosition})),x=p(x);this.eventsToUnbind.push(nr(c,"touchstart",this.onContainerTouchStart.bind(this),{passive:!1}),nr(c,"touchmove",this.onContainerTouchMove.bind(this),{passive:!1})),Xi.unbindDocumentTouchEnd||(Xi.unbindDocumentTouchEnd=nr(d,"touchend",this.onDocumentTouchEnd.bind(this),{passive:!1})),this.setPointerCapture(),nr(this.chart,"redraw",this.setPointerCapture.bind(this))}setPointerCapture(){if(!Fo)return;let c=this.pointerCaptureEventsToUnbind,d=this.chart,p=d.container,x=ol(d.options.tooltip?.followTouchMove,!0)&&d.series.some(v=>v.options.findNearestPointBy.indexOf("y")>-1);!this.hasPointerCapture&&x?(c.push(nr(p,"pointerdown",v=>{v.target?.hasPointerCapture(v.pointerId)&&v.target?.releasePointerCapture(v.pointerId)}),nr(p,"pointermove",v=>{d.pointer?.getPointFromEvent(v)?.onMouseOver(v)})),d.styledMode||Gl(p,{"touch-action":"none"}),p.className+=" highcharts-no-touch-action",this.hasPointerCapture=!0):this.hasPointerCapture&&!x&&(c.forEach(v=>v()),c.length=0,d.styledMode||Gl(p,{"touch-action":ol(d.options.chart.style?.["touch-action"],"manipulation")}),p.className=p.className.replace(" highcharts-no-touch-action",""),this.hasPointerCapture=!1)}setHoverChartIndex(c){let d=this.chart,p=at.charts[ol(Xi.hoverChartIndex,-1)];if(p&&p!==d){let x={relatedTarget:d.container};c&&!c?.relatedTarget&&Object.assign({},c,x),p.pointer?.onContainerMouseLeave(c||x)}p?.mouseIsDown||(Xi.hoverChartIndex=d.index)}touch(c,d){let p,{chart:x,pinchDown:v=[]}=this;this.setHoverChartIndex(),(c=this.normalize(c)).touches.length===1?x.isInsidePlot(c.chartX-x.plotLeft,c.chartY-x.plotTop,{visiblePlotOnly:!0})&&!x.exporting?.openMenu?(d&&this.runPointActions(c),c.type==="touchmove"&&(this.hasPinchMoved=p=!!v[0]&&Math.pow(v[0].chartX-c.chartX,2)+Math.pow(v[0].chartY-c.chartY,2)>=16),ol(p,!0)&&this.pinch(c)):d&&this.reset():c.touches.length===2&&this.pinch(c)}touchSelect(c){return!!(this.chart.zooming.singleTouch&&c.touches&&c.touches.length===1)}zoomOption(c){let d=this.chart,p=d.inverted,x=d.zooming.type||"",v,w;/touch/.test(c.type)&&(x=ol(d.zooming.pinchType,x)),this.zoomX=v=/x/.test(x),this.zoomY=w=/y/.test(x),this.zoomHor=v&&!p||w&&p,this.zoomVert=w&&!p||v&&p,this.hasZoom=v||w}}Xi.unbindDocumentMouseUp=[],(g=Xi||(Xi={})).compose=function(N){D$(mo,"Core.Pointer")&&nr(N,"beforeRender",function(){this.pointer=new g(this,this.options)})};let O3=Xi;(m=U||(U={})).setLength=function(N,c,d){return Array.isArray(N)?(N.length=c,N):N[d?"subarray":"slice"](0,c)},m.splice=function(N,c,d,p,x=[]){if(Array.isArray(N))return Array.isArray(x)||(x=Array.from(x)),{removed:N.splice(c,d,...x),array:N};let v=Object.getPrototypeOf(N).constructor,w=N[p?"subarray":"slice"](c,c+d),T=new v(N.length-d+x.length);return T.set(N.subarray(0,c),0),T.set(x,c),T.set(N.subarray(c+d),c+x.length),{removed:w,array:T}},m.convertToNumber=function(N,c){switch(typeof N){case"boolean":return+!!N;case"number":return isNaN(N)&&!c?null:N;default:return isNaN(N=parseFloat(`${N??""}`))&&!c?null:N}};let{setLength:R$,splice:F3}=U,{fireEvent:Ex,objectEach:Wf,uniqueKey:Vf}=Ae,Ag=class{constructor(N={}){this.autoId=!N.id,this.columns={},this.id=N.id||Vf(),this.rowCount=0,this.versionTag=Vf();let c=0;Wf(N.columns||{},(d,p)=>{this.columns[p]=d.slice(),c=Math.max(c,d.length)}),this.applyRowCount(c)}applyRowCount(N){this.rowCount=N,Wf(this.columns,(c,d)=>{c.length!==N&&(this.columns[d]=R$(c,N))})}deleteRows(N,c=1){if(c>0&&N<this.rowCount){let d=0;Wf(this.columns,(p,x)=>{this.columns[x]=F3(p,N,c).array,d=p.length}),this.rowCount=d}Ex(this,"afterDeleteRows",{rowIndex:N,rowCount:c}),this.versionTag=Vf()}getColumn(N,c){return this.columns[N]}getColumns(N,c){return(N||Object.keys(this.columns)).reduce((d,p)=>(d[p]=this.columns[p],d),{})}getRow(N,c){return(c||Object.keys(this.columns)).map(d=>this.columns[d]?.[N])}setColumn(N,c=[],d=0,p){this.setColumns({[N]:c},d,p)}setColumns(N,c,d){let p=this.rowCount;Wf(N,(x,v)=>{this.columns[v]=x.slice(),p=x.length}),this.applyRowCount(p),d?.silent||(Ex(this,"afterSetColumns"),this.versionTag=Vf())}setRow(N,c=this.rowCount,d,p){let{columns:x}=this,v=d?this.rowCount+1:c+1,w=Object.keys(N);if(p?.addColumns!==!1)for(let T=0,A=w.length;T<A;T++){let M=w[T];x[M]||(x[M]=[])}Wf(x,(T,A)=>{T||p?.addColumns===!1||(T=Array(v)),T&&(d?T=F3(T,c,0,!0,[N[A]??null]).array:T[c]=N[A]??null,x[A]=T)}),v>this.rowCount&&this.applyRowCount(v),p?.silent||(Ex(this,"afterSetRows"),this.versionTag=Vf())}getModified(){return this.modified||this}},{extend:M$,merge:O$,pick:P3}=Ae;var _x=K||(K={});function L3(N,c,d){let p=this.legendItem=this.legendItem||{},{chart:x,options:v}=this,{baseline:w=0,symbolWidth:T,symbolHeight:A}=N,M=this.symbol||"circle",z=A/2,P=x.renderer,G=p.group,Z=w-Math.round((N.fontMetrics?.b||A)*(d?.4:.3)),st={},rt,nt=v.marker,it=0;if(x.styledMode||(st["stroke-width"]=Math.min(v.lineWidth||0,24),v.dashStyle?st.dashstyle=v.dashStyle:v.linecap!=="square"&&(st["stroke-linecap"]="round")),p.line=P.path().addClass("highcharts-graph").attr(st).add(G),d&&(p.area=P.path().addClass("highcharts-area").add(G)),st["stroke-linecap"]&&(it=Math.min(p.line.strokeWidth(),T)/2),T){let gt=[["M",it,Z],["L",T-it,Z]];p.line.attr({d:gt}),p.area?.attr({d:[...gt,["L",T-it,w],["L",it,w]]})}if(nt&&nt.enabled!==!1&&T){let gt=Math.min(P3(nt.radius,z),z);M.indexOf("url")===0&&(nt=O$(nt,{width:A,height:A}),gt=0),p.symbol=rt=P.symbol(M,T/2-gt,Z-gt,2*gt,2*gt,M$({context:"legend"},nt)).addClass("highcharts-point").add(G),rt.isMarker=!0}}_x.areaMarker=function(N,c){L3.call(this,N,c,!0)},_x.lineMarker=L3,_x.rectangle=function(N,c){let d=c.legendItem||{},p=N.options,x=N.symbolHeight,v=p.squareSymbol,w=v?x:N.symbolWidth;d.symbol=this.chart.renderer.rect(v?(N.symbolWidth-x)/2:0,N.baseline-x+1,w,x,P3(N.options.symbolRadius,x/2)).addClass("highcharts-point").attr({zIndex:3}).add(d.group)};let B3=K,{defaultOptions:z3}=Xe,{extend:F$,extendClass:P$,merge:L$}=Ae;var al=Y||(Y={});function W3(N,c){let d=z3.plotOptions||{},p=c.defaultOptions,x=c.prototype;return x.type=N,x.pointClass||(x.pointClass=Dr),!al.seriesTypes[N]&&(p&&(d[N]=p),al.seriesTypes[N]=c,!0)}al.seriesTypes=at.seriesTypes,al.registerSeriesType=W3,al.seriesType=function(N,c,d,p,x){let v=z3.plotOptions||{};if(c=c||"",v[N]=L$(v[c],d),delete al.seriesTypes[N],W3(N,P$(al.seriesTypes[c]||at.Series,p)),al.seriesTypes[N].prototype.type=N,x){class w extends Dr{}F$(w.prototype,x),al.seriesTypes[N].prototype.pointClass=w}return al.seriesTypes[N]};let wi=Y,{animObject:V3,setAnimation:B$}=Un,{defaultOptions:$g}=Xe,{registerEventOptions:z$}=nd,{svg:W$,win:V$}=at,{seriesTypes:pd}=wi,{format:U$}=dr,{arrayMax:Ax,arrayMin:U3,clamp:G3,correctFloat:H3,crisp:G$,defined:Bi,destroyObjectProperties:H$,diffObjects:j$,erase:j3,error:Ng,extend:gd,find:X$,fireEvent:ui,getClosestDistance:q$,getNestedProperty:X3,insertItem:q3,isArray:K3,isNumber:qi,isString:K$,merge:Uf,objectEach:$x,pick:gi,removeEvent:Y$,syncTimeout:Y3}=Ae;class _a{constructor(){this.zoneAxis="y"}init(c,d){let p;ui(this,"init",{options:d}),this.dataTable??(this.dataTable=new Ag);let x=c.series;this.eventsToUnbind=[],this.chart=c,this.options=this.setOptions(d);let v=this.options,w=v.visible!==!1;this.linkedSeries=[],this.bindAxes(),gd(this,{name:v.name,state:"",visible:w,selected:v.selected===!0}),z$(this,v),(v.events?.click||v.point?.events?.click||v.allowPointSelect)&&(c.runTrackerClick=!0),this.getColor(),this.getSymbol(),this.isCartesian&&(c.hasCartesianSeries=!0),x.length&&(p=x[x.length-1]),this._i=gi(p?._i,-1)+1,this.opacity=this.options.opacity,c.orderItems("series",q3(this,x)),v.dataSorting?.enabled?this.setDataSortingOptions():this.points||this.data||this.setData(v.data,!1),ui(this,"afterInit")}is(c){return pd[c]&&this instanceof pd[c]}bindAxes(){let c,d=this,p=d.options,x=d.chart;ui(this,"bindAxes",null,function(){(d.axisTypes||[]).forEach(function(v){(x[v]||[]).forEach(function(w){c=w.options,(gi(p[v],0)===w.index||p[v]!==void 0&&p[v]===c.id)&&(q3(d,w.series),d[v]=w,w.isDirty=!0)}),d[v]||d.optionalAxis===v||Ng(18,!0,x)})}),ui(this,"afterBindAxes")}hasData(){return this.visible&&this.dataMax!==void 0&&this.dataMin!==void 0||this.visible&&this.dataTable.rowCount>0}hasMarkerChanged(c,d){let p=c.marker,x=d.marker||{};return p&&(x.enabled&&!p.enabled||x.symbol!==p.symbol||x.height!==p.height||x.width!==p.width)}autoIncrement(c){let d,p=this.options,{pointIntervalUnit:x,relativeXValue:v}=this.options,w=this.chart.time,T=this.xIncrement??w.parse(p.pointStart)??0;if(this.pointInterval=d=gi(this.pointInterval,p.pointInterval,1),v&&qi(c)&&(d*=c),x){let A=w.toParts(T);x==="day"?A[2]+=d:x==="month"?A[1]+=d:x==="year"&&(A[0]+=d),d=w.makeTime.apply(w,A)-T}return v&&qi(c)?T+d:(this.xIncrement=T+d,T)}setDataSortingOptions(){let c=this.options;gd(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1}),Bi(c.pointRange)||(c.pointRange=1)}setOptions(c){let d,p=this.chart,x=p.options.plotOptions,v=p.userOptions||{},w=Uf(c),T=p.styledMode,A={plotOptions:x,userOptions:w};ui(this,"setOptions",A);let M=A.plotOptions[this.type],z=v.plotOptions||{},P=z.series||{},G=$g.plotOptions[this.type]||{},Z=z[this.type]||{};M.dataLabels=this.mergeArrays(G.dataLabels,M.dataLabels),this.userOptions=A.userOptions;let st=Uf(M,x.series,Z,w);this.tooltipOptions=Uf($g.tooltip,$g.plotOptions.series?.tooltip,G?.tooltip,p.userOptions.tooltip,z.series?.tooltip,Z.tooltip,w.tooltip),this.stickyTracking=gi(w.stickyTracking,Z.stickyTracking,P.stickyTracking,!!this.tooltipOptions.shared&&!this.noSharedTooltip||st.stickyTracking),M.marker===null&&delete st.marker,this.zoneAxis=st.zoneAxis||"y";let rt=this.zones=(st.zones||[]).map(nt=>({...nt}));return(st.negativeColor||st.negativeFillColor)&&!st.zones&&(d={value:st[this.zoneAxis+"Threshold"]||st.threshold||0,className:"highcharts-negative"},T||(d.color=st.negativeColor,d.fillColor=st.negativeFillColor),rt.push(d)),rt.length&&Bi(rt[rt.length-1].value)&&rt.push(T?{}:{color:this.color,fillColor:this.fillColor}),ui(this,"afterSetOptions",{options:st}),st}getName(){return this.options.name??U$(this.chart.options.lang.seriesName,this,this.chart)}getCyclic(c,d,p){let x,v,w=this.chart,T=`${c}Index`,A=`${c}Counter`,M=p?.length||w.options.chart.colorCount;!d&&(Bi(v=gi(c==="color"?this.options.colorIndex:void 0,this[T]))?x=v:(w.series.length||(w[A]=0),x=w[A]%M,w[A]+=1),p&&(d=p[x])),x!==void 0&&(this[T]=x),this[c]=d}getColor(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.color="#cccccc":this.getCyclic("color",this.options.color||$g.plotOptions[this.type].color,this.chart.options.colors)}getPointsCollection(){return(this.hasGroupedData?this.points:this.data)||[]}getSymbol(){let c=this.options.marker;this.getCyclic("symbol",c.symbol,this.chart.options.symbols)}getColumn(c,d){return(d?this.dataTable.getModified():this.dataTable).getColumn(c,!0)||[]}findPointIndex(c,d){let p,x,v,{id:w,x:T}=c,A=this.points,M=this.options.dataSorting,z=this.cropStart||0;if(w){let P=this.chart.get(w);P instanceof Dr&&(p=P)}else if(this.linkedParent||this.enabledDataSorting||this.options.relativeXValue){let P=G=>!G.touched&&G.index===c.index;if(M?.matchByName?P=G=>!G.touched&&G.name===c.name:this.options.relativeXValue&&(P=G=>!G.touched&&G.options.x===c.x),!(p=X$(A,P)))return}return p&&(v=p?.index)!==void 0&&(x=!0),v===void 0&&qi(T)&&(v=this.getColumn("x").indexOf(T,d)),v!==-1&&v!==void 0&&this.cropped&&(v=v>=z?v-z:v),!x&&qi(v)&&A[v]?.touched&&(v=void 0),v}updateData(c,d){let{options:p,requireSorting:x}=this,v=p.dataSorting,w=this.points,T=[],A=c.length===w.length,M=this.xIncrement,z,P,G,Z,st=!0;if(this.xIncrement=null,c.forEach((nt,it)=>{let gt,_t=Bi(nt)&&this.pointClass.prototype.optionsToObject.call({series:this},nt)||{},{id:Wt,x:Vt}=_t;Wt||qi(Vt)?((gt=this.findPointIndex(_t,Z))===-1||gt===void 0?T.push(nt):w[gt]&&nt!==p.data?.[gt]?(w[gt].update(nt,!1,void 0,!1),w[gt].touched=!0,x&&(Z=gt+1)):w[gt]&&(w[gt].touched=!0),(!A||it!==gt||v?.enabled||this.hasDerivedData)&&(z=!0)):T.push(nt)},this),z)for(P=w.length;P--;)(G=w[P])&&!G.touched&&G.remove?.(!1,d);else A&&!v?.enabled?(c.forEach((nt,it)=>{nt===w[it].y||w[it].destroyed||w[it].update(nt,!1,void 0,!1)}),T.length=0):st=!1;if(w.forEach(nt=>{nt&&(nt.touched=!1)}),!st)return!1;T.forEach(nt=>{this.addPoint(nt,!1,void 0,void 0,!1)},this);let rt=this.getColumn("x");return M!==null&&this.xIncrement===null&&rt.length&&(this.xIncrement=Ax(rt),this.autoIncrement()),!0}dataColumnKeys(){return["x",...this.pointArrayMap||["y"]]}setData(c,d=!0,p,x){let v=this.points,w=v?.length||0,T=this.options,A=this.chart,M=T.dataSorting,z=this.xAxis,P=T.turboThreshold,G=this.dataTable,Z=this.dataColumnKeys(),st=this.pointValKey||"y",rt=(this.pointArrayMap||[]).length,nt=T.keys,it,gt,_t=0,Wt=1,Vt;A.options.chart.allowMutatingData||(T.data&&delete this.options.data,this.userOptions.data&&delete this.userOptions.data,Vt=Uf(!0,c));let qt=(c=Vt||c||[]).length;if(M?.enabled&&(c=this.sortData(c)),A.options.chart.allowMutatingData&&x!==!1&&qt&&w&&!this.cropped&&!this.hasGroupedData&&this.visible&&!this.boosted&&(gt=this.updateData(c,p)),!gt){this.xIncrement=null,this.colorCounter=0;let Kt=P&&!T.relativeXValue&&qt>P;if(Kt){let Zt=this.getFirstValidPoint(c),Se=this.getFirstValidPoint(c,qt-1,-1),Ne=we=>!!(K3(we)&&(nt||qi(we[0])));if(qi(Zt)&&qi(Se)){let we=[],je=[];for(let Qe of c)we.push(this.autoIncrement()),je.push(Qe);G.setColumns({x:we,[st]:je})}else if(Ne(Zt)&&Ne(Se))if(rt){let we=+(Zt.length===rt),je=Array(Z.length).fill(0).map(()=>[]);for(let Qe of c){we&&je[0].push(this.autoIncrement());for(let cn=we;cn<=rt;cn++)je[cn]?.push(Qe[cn-we])}G.setColumns(Z.reduce((Qe,cn,Tn)=>(Qe[cn]=je[Tn],Qe),{}))}else{nt&&(_t=nt.indexOf("x"),Wt=nt.indexOf("y"),_t=_t>=0?_t:0,Wt=Wt>=0?Wt:1),Zt.length===1&&(Wt=0);let we=[],je=[];if(_t===Wt)for(let Qe of c)we.push(this.autoIncrement()),je.push(Qe[Wt]);else for(let Qe of c)we.push(Qe[_t]),je.push(Qe[Wt]);G.setColumns({x:we,[st]:je})}else Kt=!1}if(!Kt){let Zt=Z.reduce((Se,Ne)=>(Se[Ne]=[],Se),{});for(it=0;it<qt;it++){let Se=this.pointClass.prototype.applyOptions.apply({series:this},[c[it]]);for(let Ne of Z)Zt[Ne][it]=Se[Ne]}G.setColumns(Zt)}for(K$(this.getColumn("y")[0])&&Ng(14,!0,A),this.data=[],this.options.data=this.userOptions.data=c,it=w;it--;)v[it]?.destroy();z&&(z.minRange=z.userMinRange),this.isDirty=A.isDirtyBox=!0,this.isDirtyData=!!v,p=!1}T.legendType==="point"&&(this.processData(),this.generatePoints()),d&&A.redraw(p)}sortData(c){let d=this,p=d.options.dataSorting.sortKey||"y",x=function(v,w){return Bi(w)&&v.pointClass.prototype.optionsToObject.call({series:v},w)||{}};return c.forEach(function(v,w){c[w]=x(d,v),c[w].index=w},this),c.concat().sort((v,w)=>{let T=X3(p,v),A=X3(p,w);return A<T?-1:+(A>T)}).forEach(function(v,w){v.x=w},this),d.linkedSeries&&d.linkedSeries.forEach(function(v){let w=v.options,T=w.data;!w.dataSorting?.enabled&&T&&(T.forEach(function(A,M){T[M]=x(v,A),c[M]&&(T[M].x=c[M].x,T[M].index=M)}),v.setData(T,!1))}),c}getProcessedData(c){let d=this,{dataTable:p,isCartesian:x,options:v,xAxis:w}=d,T=v.cropThreshold,A=c||d.getExtremesFromAll,M=w?.logarithmic,z=p.rowCount,P,G,Z=0,st,rt,nt,it=d.getColumn("x"),gt=p,_t=!1;return w&&(rt=(st=w.getExtremes()).min,nt=st.max,_t=!!(w.categories&&!w.names.length),x&&d.sorted&&!A&&(!T||z>T||d.forceCrop)&&(it[z-1]<rt||it[0]>nt?gt=new Ag:d.getColumn(d.pointValKey||"y").length&&(it[0]<rt||it[z-1]>nt)&&(gt=(P=this.cropData(p,rt,nt)).modified,Z=P.start,G=!0))),it=gt.getColumn("x")||[],{modified:gt,cropped:G,cropStart:Z,closestPointRange:q$([M?it.map(M.log2lin):it],()=>d.requireSorting&&!_t&&Ng(15,!1,d.chart))}}processData(c){let d=this.xAxis,p=this.dataTable;if(this.isCartesian&&!this.isDirty&&!d.isDirty&&!this.yAxis.isDirty&&!c)return!1;let x=this.getProcessedData();p.modified=x.modified,this.cropped=x.cropped,this.cropStart=x.cropStart,this.closestPointRange=this.basePointRange=x.closestPointRange,ui(this,"afterProcessData")}cropData(c,d,p){let x=c.getColumn("x",!0)||[],v=x.length,w={},T,A,M=0,z=v;for(T=0;T<v;T++)if(x[T]>=d){M=Math.max(0,T-1);break}for(A=T;A<v;A++)if(x[A]>p){z=A+1;break}for(let P of this.dataColumnKeys()){let G=c.getColumn(P,!0);G&&(w[P]=G.slice(M,z))}return{modified:new Ag({columns:w}),start:M,end:z}}generatePoints(){let c=this.options,d=this.processedData||c.data,p=this.dataTable.getModified(),x=this.getColumn("x",!0),v=this.pointClass,w=p.rowCount,T=this.cropStart||0,A=this.hasGroupedData,M=c.keys,z=[],P=c.dataGrouping?.groupAll?T:0,G=this.pointArrayMap||["y"],Z=this.dataColumnKeys(),st,rt,nt,it,gt=this.data,_t;if(!gt&&!A){let Wt=[];Wt.length=d?.length||0,gt=this.data=Wt}for(M&&A&&(this.options.keys=!1),it=0;it<w;it++)rt=T+it,A?((nt=new v(this,p.getRow(it,Z)||[])).dataGroup=this.groupMap?.[P+it],nt.dataGroup?.options&&(nt.options=nt.dataGroup.options,gd(nt,nt.dataGroup.options),delete nt.dataLabels,nt.key=nt.name??nt.category)):(nt=gt[rt],_t=d?d[rt]:p.getRow(it,G),nt||_t===void 0?nt&&(nt.category=this.xAxis?.categories?.[nt.x]??nt.x,nt.key=nt.name??nt.category):gt[rt]=nt=new v(this,_t,x[it])),nt&&(nt.index=A?P+it:rt,z[it]=nt);if(this.options.keys=M,gt&&(w!==(st=gt.length)||A))for(it=0;it<st;it++)it!==T||A||(it+=w),gt[it]&&(gt[it].destroyElements(),gt[it].plotX=void 0);this.data=gt,this.points=z,ui(this,"afterGeneratePoints")}getXExtremes(c){return{min:U3(c),max:Ax(c)}}getExtremes(c,d){let{xAxis:p,yAxis:x}=this,v=d||this.getExtremesFromAll||this.options.getExtremesFromAll,w=v&&this.cropped?this.dataTable:this.dataTable.getModified(),T=w.rowCount,A=c||this.stackedYData,M=A?[A]:(this.keysAffectYAxis||this.pointArrayMap||["y"])?.map(Vt=>w.getColumn(Vt,!0)||[])||[],z=this.getColumn("x",!0),P=[],G=this.requireSorting&&!this.is("column")?1:0,Z=!!x&&x.positiveValuesOnly,st=v||this.cropped||!p,rt,nt,it,gt=0,_t=0;for(p&&(gt=(rt=p.getExtremes()).min,_t=rt.max),it=0;it<T;it++)if(nt=z[it],st||(z[it+G]||nt)>=gt&&(z[it-G]||nt)<=_t)for(let Vt of M){let qt=Vt[it];qi(qt)&&(qt>0||!Z)&&P.push(qt)}let Wt={activeYData:P,dataMin:U3(P),dataMax:Ax(P)};return ui(this,"afterGetExtremes",{dataExtremes:Wt}),Wt}applyExtremes(){let c=this.getExtremes();return this.dataMin=c.dataMin,this.dataMax=c.dataMax,c}getFirstValidPoint(c,d=0,p=1){let x=c.length,v=d;for(;v>=0&&v<x;){if(Bi(c[v]))return c[v];v+=p}}translate(){this.generatePoints();let c=this.options,d=c.stacking,p=this.xAxis,x=this.enabledDataSorting,v=this.yAxis,w=this.points,T=w.length,A=this.pointPlacementToXValue(),M=!!A,z=c.threshold,P=c.startFromThreshold?z:0,G=c?.nullInteraction&&v.len,Z,st,rt,nt,it=Number.MAX_VALUE;function gt(_t){return G3(_t,-1e9,1e9)}for(Z=0;Z<T;Z++){let _t,Wt=w[Z],Vt=Wt.x,qt,Kt,Zt=Wt.y,Se=Wt.low,Ne=d&&v.stacking?.stacks[(this.negStacks&&Zt<(P?0:z)?"-":"")+this.stackKey];Wt.plotX=qi(st=p.translate(Vt,!1,!1,!1,!0,A))?H3(gt(st)):void 0,d&&this.visible&&Ne&&Ne[Vt]&&(nt=this.getStackIndicator(nt,Vt,this.index),!Wt.isNull&&nt.key&&(Kt=(qt=Ne[Vt]).points[nt.key]),qt&&K3(Kt)&&(Se=Kt[0],Zt=Kt[1],Se===P&&nt.key===Ne[Vt].base&&(Se=gi(qi(z)?z:v.min)),v.positiveValuesOnly&&Bi(Se)&&Se<=0&&(Se=void 0),Wt.total=Wt.stackTotal=gi(qt.total),Wt.percentage=Bi(Wt.y)&&qt.total?Wt.y/qt.total*100:void 0,Wt.stackY=Zt,this.irregularWidths||qt.setOffset(this.pointXOffset||0,this.barW||0,void 0,void 0,void 0,this.xAxis))),Wt.yBottom=Bi(Se)?gt(v.translate(Se,!1,!0,!1,!0)):void 0,this.dataModify&&(Zt=this.dataModify.modifyValue(Zt,Z)),qi(Zt)&&Wt.plotX!==void 0?_t=qi(_t=v.translate(Zt,!1,!0,!1,!0))?gt(_t):void 0:!qi(Zt)&&G&&(_t=G),Wt.plotY=_t,Wt.isInside=this.isPointInside(Wt),Wt.clientX=M?H3(p.translate(Vt,!1,!1,!1,!0,A)):st,Wt.negative=(Wt.y||0)<(z||0),Wt.isNull||Wt.visible===!1||(rt!==void 0&&(it=Math.min(it,Math.abs(st-rt))),rt=st),Wt.zone=this.zones.length?Wt.getZone():void 0,!Wt.graphic&&this.group&&x&&(Wt.isNew=!0)}this.closestPointRangePx=it,ui(this,"afterTranslate")}getValidPoints(c,d,p){let x=this.chart;return(c||this.points||[]).filter(function(v){let{plotX:w,plotY:T}=v;return(!!p||!v.isNull&&!!qi(T))&&(!d||!!x.isInsidePlot(w,T,{inverted:x.inverted}))&&v.visible!==!1})}getSharedClipKey(){return this.sharedClipKey=(this.options.xAxis||0)+","+(this.options.yAxis||0),this.sharedClipKey}setClip(){let{chart:c,group:d,markerGroup:p}=this,x=c.sharedClips,v=c.renderer,w=c.getClipBox(this),T=this.getSharedClipKey(),A=x[T];ui(this,"setClip",{clipBox:w}),A?A.animate(w):x[T]=A=v.clipRect(w),d&&d.clip(this.options.clip===!1?void 0:A),p&&p.clip()}animate(c){let{chart:d,group:p,markerGroup:x}=this,v=d.inverted,w=V3(this.options.animation),T=[this.getSharedClipKey(),w.duration,w.easing,w.defer].join(","),A=d.sharedClips[T],M=d.sharedClips[T+"m"];if(c&&p){let z=d.getClipBox(this);if(A)A.attr("height",z.height);else{z.width=0,v&&(z.x=d.plotHeight),A=d.renderer.clipRect(z),d.sharedClips[T]=A;let P={x:-99,y:-99,width:v?d.plotWidth+199:99,height:v?99:d.plotHeight+199};M=d.renderer.clipRect(P),d.sharedClips[T+"m"]=M}p.clip(A),x?.clip(M)}else if(A&&!A.hasClass("highcharts-animating")){let z=d.getClipBox(this),P=w.step;(x?.element.childNodes.length||d.series.length>1)&&(w.step=function(G,Z){P&&P.apply(Z,arguments),Z.prop==="width"&&M?.element&&M.attr(v?"height":"width",G+99)}),A.addClass("highcharts-animating").animate(z,w)}}afterAnimate(){this.setClip(),$x(this.chart.sharedClips,(c,d,p)=>{c&&!this.chart.container.querySelector(`[clip-path="url(#${c.id})"]`)&&(c.destroy(),delete p[d])}),this.finishedAnimating=!0,ui(this,"afterAnimate")}drawPoints(c=this.points){let d,p,x,v,w,T,A,M=this.chart,z=M.styledMode,{colorAxis:P,options:G}=this,Z=G.marker,st=G.nullInteraction,rt=this[this.specialGroup||"markerGroup"],nt=this.xAxis,it=gi(Z.enabled,!nt||!!nt.isRadial||null,this.closestPointRangePx>=Z.enabledThreshold*Z.radius);if(Z.enabled!==!1||this._hasPointMarkers)for(d=0;d<c.length;d++){v=(x=(p=c[d]).graphic)?"animate":"attr",w=p.marker||{},T=!!p.marker;let gt=p.isNull;if((it&&!Bi(w.enabled)||w.enabled)&&(!gt||st)&&p.visible!==!1){let _t=gi(w.symbol,this.symbol,"rect");A=this.markerAttribs(p,p.selected&&"select"),this.enabledDataSorting&&(p.startXPos=nt.reversed?-(A.width||0):nt.width);let Wt=p.isInside!==!1;if(!x&&Wt&&((A.width||0)>0||p.hasImage)&&(p.graphic=x=M.renderer.symbol(_t,A.x,A.y,A.width,A.height,T?w:Z).add(rt),this.enabledDataSorting&&M.hasRendered&&(x.attr({x:p.startXPos}),v="animate")),x&&v==="animate"&&x[Wt?"show":"hide"](Wt).animate(A),x){let Vt=this.pointAttribs(p,z||!p.selected?void 0:"select");z?P&&x.css({fill:Vt.fill}):x[v](Vt)}x&&x.addClass(p.getClassName(),!0)}else x&&(p.graphic=x.destroy())}}markerAttribs(c,d){let p=this.options,x=p.marker,v=c.marker||{},w=v.symbol||x.symbol,T={},A,M,z=gi(v.radius,x?.radius);d&&(A=x.states[d],M=v.states&&v.states[d],z=gi(M?.radius,A?.radius,z&&z+(A?.radiusPlus||0))),c.hasImage=w&&w.indexOf("url")===0,c.hasImage&&(z=0);let P=c.pos();return qi(z)&&P&&(p.crisp&&(P[0]=G$(P[0],c.hasImage?0:w==="rect"?x?.lineWidth||0:1)),T.x=P[0]-z,T.y=P[1]-z),z&&(T.width=T.height=2*z),T}pointAttribs(c,d){let p=this.options,x=p.marker,v=c?.options,w=v?.marker||{},T=v?.color,A=c?.color,M=c?.zone?.color,z,P,G=this.color,Z,st,rt=gi(w.lineWidth,x.lineWidth),nt=c?.isNull&&p.nullInteraction?0:1;return G=T||M||A||G,Z=w.fillColor||x.fillColor||G,st=w.lineColor||x.lineColor||G,d=d||"normal",z=x.states[d]||{},rt=gi((P=w.states&&w.states[d]||{}).lineWidth,z.lineWidth,rt+gi(P.lineWidthPlus,z.lineWidthPlus,0)),Z=P.fillColor||z.fillColor||Z,st=P.lineColor||z.lineColor||st,{stroke:st,"stroke-width":rt,fill:Z,opacity:nt=gi(P.opacity,z.opacity,nt)}}destroy(c){let d,p,x=this,v=x.chart,w=/AppleWebKit\/533/.test(V$.navigator.userAgent),T=x.data||[];for(ui(x,"destroy",{keepEventsForUpdate:c}),this.removeEvents(c),(x.axisTypes||[]).forEach(function(A){p=x[A],p?.series&&(j3(p.series,x),p.isDirty=p.forceRedraw=!0)}),x.legendItem&&x.chart.legend.destroyItem(x),d=T.length;d--;)T[d]?.destroy?.();for(let A of x.zones)H$(A,void 0,!0);Ae.clearTimeout(x.animationTimeout),$x(x,function(A,M){A instanceof _r&&!A.survive&&A[w&&M==="group"?"hide":"destroy"]()}),v.hoverSeries===x&&(v.hoverSeries=void 0),j3(v.series,x),v.orderItems("series"),$x(x,function(A,M){c&&M==="hcEvents"||delete x[M]})}applyZones(){let{area:c,chart:d,graph:p,zones:x,points:v,xAxis:w,yAxis:T,zoneAxis:A}=this,{inverted:M,renderer:z}=d,P=this[`${A}Axis`],{isXAxis:G,len:Z=0,minPointOffset:st=0}=P||{},rt=(p?.strokeWidth()||0)/2+1,nt=(it,gt=0,_t=0)=>{M&&(_t=Z-_t);let{translated:Wt=0,lineClip:Vt}=it,qt=_t-Wt;Vt?.push(["L",gt,Math.abs(qt)<rt?_t-rt*(qt<=0?-1:1):Wt])};if(x.length&&(p||c)&&P&&qi(P.min)){let it=P.getExtremes().max+st,gt=Vt=>{Vt.forEach((qt,Kt)=>{(qt[0]==="M"||qt[0]==="L")&&(Vt[Kt]=[qt[0],G?Z-qt[1]:qt[1],G?qt[2]:Z-qt[2]])})};if(x.forEach(Vt=>{Vt.lineClip=[],Vt.translated=G3(P.toPixels(gi(Vt.value,it),!0)||0,0,Z)}),p&&!this.showLine&&p.hide(),c&&c.hide(),A==="y"&&v.length<w.len)for(let Vt of v){let{plotX:qt,plotY:Kt,zone:Zt}=Vt,Se=Zt&&x[x.indexOf(Zt)-1];Zt&&nt(Zt,qt,Kt),Se&&nt(Se,qt,Kt)}let _t=[],Wt=P.toPixels(P.getExtremes().min-st,!0);x.forEach(Vt=>{let qt=Vt.lineClip||[],Kt=Math.round(Vt.translated||0);w.reversed&&qt.reverse();let{clip:Zt,simpleClip:Se}=Vt,Ne=0,we=0,je=w.len,Qe=T.len;G?(Ne=Kt,je=Wt):(we=Kt,Qe=Wt);let cn=[["M",Ne,we],["L",je,we],["L",je,Qe],["L",Ne,Qe],["Z"]],Tn=[cn[0],...qt,cn[1],cn[2],..._t,cn[3],cn[4]];_t=qt.reverse(),Wt=Kt,M&&(gt(Tn),c&&gt(cn)),Zt?(Zt.animate({d:Tn}),Se?.animate({d:cn})):(Zt=Vt.clip=z.path(Tn),c&&(Se=Vt.simpleClip=z.path(cn))),p&&Vt.graph?.clip(Zt),c&&Vt.area?.clip(Se)})}else this.visible&&(p&&p.show(),c&&c.show())}plotGroup(c,d,p,x,v){let w=this[c],T=!w,A={visibility:p,zIndex:x||.1};return Bi(this.opacity)&&!this.chart.styledMode&&this.state!=="inactive"&&(A.opacity=this.opacity),w||(this[c]=w=this.chart.renderer.g().add(v)),w.addClass("highcharts-"+d+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(Bi(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(w.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),w.attr(A)[T?"attr":"animate"](this.getPlotBox(d)),w}getPlotBox(c){let d=this.xAxis,p=this.yAxis,x=this.chart,v=x.inverted&&!x.polar&&d&&this.invertible&&c==="series";x.inverted&&(d=p,p=this.xAxis);let w={scale:1,translateX:d?d.left:x.plotLeft,translateY:p?p.top:x.plotTop,name:c};ui(this,"getPlotBox",w);let{scale:T,translateX:A,translateY:M}=w;return{translateX:A,translateY:M,rotation:90*!!v,rotationOriginX:v?T*(d.len-p.len)/2:0,rotationOriginY:v?T*(d.len+p.len)/2:0,scaleX:v?-T:T,scaleY:T}}removeEvents(c){let{eventsToUnbind:d}=this;c||Y$(this),d.length&&(d.forEach(p=>{p()}),d.length=0)}render(){let c=this,{chart:d,options:p,hasRendered:x}=c,v=V3(p.animation),w=c.visible?"inherit":"hidden",T=p.zIndex,A=d.seriesGroup,M=c.finishedAnimating?0:v.duration;ui(this,"render"),c.plotGroup("group","series",w,T,A),c.markerGroup=c.plotGroup("markerGroup","markers",w,T,A),p.clip!==!1&&c.setClip(),M&&c.animate?.(!0),c.drawGraph&&(c.drawGraph(),c.applyZones()),c.visible&&c.drawPoints(),c.drawDataLabels?.(),c.redrawPoints?.(),p.enableMouseTracking&&c.drawTracker?.(),M&&c.animate?.(),x||(M&&v.defer&&(M+=v.defer),c.animationTimeout=Y3(()=>{c.afterAnimate()},M||0)),c.isDirty=!1,c.hasRendered=!0,ui(c,"afterRender")}redraw(){let c=this.isDirty||this.isDirtyData;this.translate(),this.render(),c&&delete this.kdTree}reserveSpace(){return this.visible||!this.chart.options.chart.ignoreHiddenSeries}searchPoint(c,d){let{xAxis:p,yAxis:x}=this,v=this.chart.inverted;return this.searchKDTree({clientX:v?p.len-c.chartY+p.pos:c.chartX-p.pos,plotY:v?x.len-c.chartX+x.pos:c.chartY-x.pos},d,c)}buildKDTree(c){this.buildingKdTree=!0;let d=this,p=d.options,x=p.findNearestPointBy.indexOf("y")>-1?2:1;delete d.kdTree,Y3(function(){d.kdTree=(function v(w,T,A){let M,z,P=w?.length;if(P)return M=d.kdAxisArray[T%A],w.sort((G,Z)=>(G[M]||0)-(Z[M]||0)),{point:w[z=Math.floor(P/2)],left:v(w.slice(0,z),T+1,A),right:v(w.slice(z+1),T+1,A)}})(d.getValidPoints(void 0,!d.directTouch,p?.nullInteraction),x,x),d.buildingKdTree=!1},p.kdNow||c?.type==="touchstart"?0:1)}searchKDTree(c,d,p,x,v){let w=this,[T,A]=this.kdAxisArray,M=d?"distX":"dist",z=(w.options.findNearestPointBy||"").indexOf("y")>-1?2:1,P=!!w.isBubble,G=x||((st,rt,nt)=>{let it=st[nt]||0,gt=rt[nt]||0;return[it===gt&&st.index>rt.index||it<gt?st:rt,!1]}),Z=v||((st,rt)=>st<rt);if(this.kdTree||this.buildingKdTree||this.buildKDTree(p),this.kdTree)return(function st(rt,nt,it,gt){let _t,Wt,Vt,qt,Kt,Zt,Se,Ne=nt.point,we=w.kdAxisArray[it%gt],je=Ne,Qe=!1;_t=rt[T],Wt=Ne[T],Vt=Bi(_t)&&Bi(Wt)?_t-Wt:null,qt=rt[A],Kt=Ne[A],Zt=Bi(qt)&&Bi(Kt)?qt-Kt:0,Se=P&&Ne.marker?.radius||0,Ne.dist=Math.sqrt((Vt&&Vt*Vt||0)+Zt*Zt)-Se,Ne.distX=Bi(Vt)?Math.abs(Vt)-Se:Number.MAX_VALUE;let cn=(rt[we]||0)-(Ne[we]||0)+(P&&Ne.marker?.radius||0),Tn=cn<0?"left":"right",yn=cn<0?"right":"left";return nt[Tn]&&([je,Qe]=G(Ne,st(rt,nt[Tn],it+1,gt),M)),nt[yn]&&Z(Math.sqrt(cn*cn),je[M],Qe)&&(je=G(je,st(rt,nt[yn],it+1,gt),M)[0]),je})(c,this.kdTree,z,z)}pointPlacementToXValue(){let{options:c,xAxis:d}=this,p=c.pointPlacement;return p==="between"&&(p=d.reversed?-.5:.5),qi(p)?p*(c.pointRange||d.pointRange):0}isPointInside(c){let{chart:d,xAxis:p,yAxis:x}=this,{plotX:v=-1,plotY:w=-1}=c;return w>=0&&w<=(x?x.len:d.plotHeight)&&v>=0&&v<=(p?p.len:d.plotWidth)}drawTracker(){let c=this,d=c.options,p=d.trackByArea,x=[].concat((p?c.areaPath:c.graphPath)||[]),v=c.chart,w=v.pointer,T=v.renderer,A=v.options.tooltip?.snap||0,M=()=>{d.enableMouseTracking&&v.hoverSeries!==c&&c.onMouseOver()},z="rgba(192,192,192,"+(W$?1e-4:.002)+")",P=c.tracker;P?P.attr({d:x}):c.graph&&(c.tracker=P=T.path(x).attr({visibility:c.visible?"inherit":"hidden",zIndex:2}).addClass(p?"highcharts-tracker-area":"highcharts-tracker-line").add(c.group),v.styledMode||P.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:z,fill:p?z:"none","stroke-width":c.graph.strokeWidth()+(p?0:2*A)}),[c.tracker,c.markerGroup,...c.dataLabelsGroups||[]].forEach(G=>{G&&(G.addClass("highcharts-tracker").on("mouseover",M).on("mouseout",Z=>{w?.onTrackerMouseOut(Z)}),d.cursor&&!v.styledMode&&G.css({cursor:d.cursor}),G.on("touchstart",M))})),ui(this,"afterDrawTracker")}addPoint(c,d,p,x,v){let w,T,A=this.options,{chart:M,data:z,dataTable:P,xAxis:G}=this,Z=G?.hasNames&&G.names,st=A.data,rt=this.getColumn("x");d=gi(d,!0);let nt={series:this};this.pointClass.prototype.applyOptions.apply(nt,[c]);let it=nt.x;if(T=rt.length,this.requireSorting&&it<rt[T-1])for(w=!0;T&&rt[T-1]>it;)T--;P.setRow(nt,T,!0,{addColumns:!1}),Z&&nt.name&&(Z[it]=nt.name),st?.splice(T,0,c),(w||this.processedData)&&(this.data.splice(T,0,null),this.processData()),A.legendType==="point"&&this.generatePoints(),p&&(z[0]&&z[0].remove?z[0].remove(!1):([z,st].filter(Bi).forEach(gt=>{gt.shift()}),P.deleteRows(0))),v!==!1&&ui(this,"addPoint",{point:nt}),this.isDirty=!0,this.isDirtyData=!0,d&&M.redraw(x)}removePoint(c,d,p){let x=this,{chart:v,data:w,points:T,dataTable:A}=x,M=w[c],z=function(){[T?.length===w.length?T:void 0,w,x.options.data].filter(Bi).forEach(P=>{P.splice(c,1)}),A.deleteRows(c),M?.destroy(),x.isDirty=!0,x.isDirtyData=!0,d&&v.redraw()};B$(p,v),d=gi(d,!0),M?M.firePointEvent("remove",null,z):z()}remove(c,d,p,x){let v=this,w=v.chart;function T(){v.destroy(x),w.isDirtyLegend=w.isDirtyBox=!0,w.linkSeries(x),gi(c,!0)&&w.redraw(d)}p!==!1?ui(v,"remove",null,T):T()}update(c,d){ui(this,"update",{options:c=j$(c,this.userOptions)});let p=this,x=p.chart,v=p.userOptions,w=p.initialType||p.type,T=x.options.plotOptions,A=pd[w].prototype,M=p.finishedAnimating&&{animation:!1},z={},P,G,Z=_a.keepProps.slice(),st=c.type||v.type||x.options.chart.type,rt=!(this.hasDerivedData||st&&st!==this.type||c.keys!==void 0||c.pointStart!==void 0||c.pointInterval!==void 0||c.relativeXValue!==void 0||c.joinBy||c.mapData||["dataGrouping","pointStart","pointInterval","pointIntervalUnit","keys"].some(it=>p.hasOptionChanged(it)));st=st||w,rt?(Z.push.apply(Z,_a.keepPropsForPoints),c.visible!==!1&&Z.push("area","graph"),p.parallelArrays.forEach(function(it){Z.push(it+"Data")}),c.data&&(c.dataSorting&&gd(p.options.dataSorting,c.dataSorting),this.setData(c.data,!1))):this.dataTable.modified=this.dataTable,c.dataLabels&&v.dataLabels&&(c.dataLabels=this.mergeArrays(v.dataLabels,c.dataLabels)),c=Uf(v,{index:v.index===void 0?p.index:v.index,pointStart:T?.series?.pointStart??v.pointStart??p.getColumn("x")[0]},!rt&&{data:p.options.data},c,M),rt&&c.data&&(c.data=p.options.data),(Z=["dataLabelsGroup","dataLabelsGroups","dataLabelsParentGroups","group","markerGroup","transformGroup"].concat(Z)).forEach(function(it){Z[it]=p[it],delete p[it]});let nt=!1;if(pd[st]){if(nt=st!==p.type,p.remove(!1,!1,!1,!0),nt)if(x.propFromSeries(),Object.setPrototypeOf)Object.setPrototypeOf(p,pd[st].prototype);else{let it=Object.hasOwnProperty.call(p,"hcEvents")&&p.hcEvents;for(G in A)p[G]=void 0;gd(p,pd[st].prototype),it?p.hcEvents=it:delete p.hcEvents}}else Ng(17,!0,x,{missingModuleFor:st});if(Z.forEach(function(it){p[it]=Z[it]}),p.init(x,c),rt&&this.points)for(let it of((P=p.options).visible===!1?(z.graphic=1,z.dataLabel=1):(this.hasMarkerChanged(P,v)&&(z.graphic=1),p.hasDataLabels?.()||(z.dataLabel=1)),this.points))it?.series&&(it.resolveColor(),Object.keys(z).length&&it.destroyElements(z),P.showInLegend===!1&&it.legendItem&&x.legend.destroyItem(it));p.initialType=w,x.linkSeries(),x.setSortedData(),nt&&p.linkedSeries.length&&(p.isDirtyData=!0),ui(this,"afterUpdate"),gi(d,!0)&&x.redraw(!!rt&&void 0)}setName(c){this.name=this.options.name=this.userOptions.name=c,this.chart.isDirtyLegend=!0}hasOptionChanged(c){let d=this.chart,p=this.options[c],x=d.options.plotOptions,v=this.userOptions[c],w=gi(x?.[this.type]?.[c],x?.series?.[c]);return v&&!Bi(w)?p!==v:p!==gi(w,p)}onMouseOver(){let c=this.chart,d=c.hoverSeries;c.pointer?.setHoverChartIndex(),d&&d!==this&&d.onMouseOut(),this.options.events.mouseOver&&ui(this,"mouseOver"),this.setState("hover"),c.hoverSeries=this}onMouseOut(){let c=this.options,d=this.chart,p=d.tooltip,x=d.hoverPoint;d.hoverSeries=null,x&&x.onMouseOut(),this&&c.events.mouseOut&&ui(this,"mouseOut"),p&&!this.stickyTracking&&(!p.shared||this.noSharedTooltip)&&p.hide(),d.series.forEach(function(v){v.setState("",!0)})}setState(c,d){let p=this,{graph:x,options:v}=p,{inactiveOtherPoints:w,states:T}=v,A=gi(T?.[c||"normal"]?.animation,p.chart.options.chart.animation),{lineWidth:M,opacity:z}=v;if(c=c||"",p.state!==c&&([p.group,p.markerGroup,...p.dataLabelsGroups||[]].forEach(function(P){P&&(p.state&&P.removeClass("highcharts-series-"+p.state),c&&P.addClass("highcharts-series-"+c))}),p.state=c,!p.chart.styledMode)){if(T[c]?.enabled===!1)return;if(c&&(M=T[c].lineWidth||M+(T[c].lineWidthPlus||0),z=gi(T[c].opacity,z)),x&&!x.dashstyle&&qi(M))for(let P of[x,...this.zones.map(G=>G.graph)])P?.animate({"stroke-width":M},A);w||[p.group,p.markerGroup,...p.dataLabelsGroups||[],p.labelBySeries].forEach(function(P){P?.animate({opacity:z},A)})}d&&w&&p.points&&p.setAllPointsToState(c||void 0)}setAllPointsToState(c){this.points.forEach(function(d){d.setState&&d.setState(c)})}setVisible(c,d){let p=this,x=p.chart,v=x.options.chart.ignoreHiddenSeries,w=p.visible;p.visible=c=p.options.visible=p.userOptions.visible=c===void 0?!w:c;let T=c?"show":"hide";["group","markerGroup","tracker","tt"].forEach(A=>{p[A]?.[T]()}),p.dataLabelsGroups?.forEach(A=>{A?.[T]()}),(x.hoverSeries===p||x.hoverPoint?.series===p)&&p.onMouseOut(),p.legendItem&&x.legend.colorizeItem(p,c),p.isDirty=!0,p.options.stacking&&x.series.forEach(A=>{A.options.stacking&&A.visible&&(A.isDirty=!0)}),p.linkedSeries.forEach(A=>{A.setVisible(c,!1)}),v&&(x.isDirtyBox=!0),ui(p,T),d!==!1&&x.redraw()}show(){this.setVisible(!0)}hide(){this.setVisible(!1)}select(c){this.selected=c=this.options.selected=c===void 0?!this.selected:c,this.checkbox&&(this.checkbox.checked=c),ui(this,c?"select":"unselect")}shouldShowTooltip(c,d,p={}){return p.series=this,p.visiblePlotOnly=!0,this.chart.isInsidePlot(c,d,p)}drawLegendSymbol(c,d){B3[this.options.legendSymbol||"rectangle"]?.call(this,c,d)}}_a.defaultOptions={lineWidth:2,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1e3},enableMouseTracking:!0,events:{},marker:{enabledThreshold:2,lineColor:"#ffffff",lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:150},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:"center",borderWidth:0,defer:!0,formatter:function(){let{numberFormatter:N}=this.series.chart;return typeof this.y!="number"?"":N(this.y,-1)},padding:5,style:{fontSize:"0.7em",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:150},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:150},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"},_a.types=wi.seriesTypes,_a.registerType=wi.registerSeriesType,_a.keepProps=["colorIndex","eventOptions","navigatorSeries","symbolIndex","baseSeries"],_a.keepPropsForPoints=["data","isDirtyData","isDirtyCanvas","points","dataTable","processedData","xIncrement","cropped","_hasPointMarkers","hasDataLabels","nodes","layout","level","mapMap","mapData","minY","maxY","minX","maxX","transformGroups"],gd(_a.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,directTouch:!1,invertible:!0,isCartesian:!0,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:Dr,requireSorting:!0,sorted:!0}),wi.series=_a;let Po=_a,{animObject:Z$,setAnimation:J$}=Un,{registerEventOptions:Z3}=nd,{composed:Q$,marginNames:J3}=at,{distribute:tN}=lo,{format:eN}=dr,{addEvent:Dg,createElement:nN,css:sN,defined:Nx,discardElement:iN,find:rN,fireEvent:Hl,isNumber:Q3,merge:Xu,pick:Aa,pushUnique:oN,relativeLength:Dx,stableSort:aN,syncTimeout:lN}=Ae;class Rx{constructor(c,d){this.allItems=[],this.initialItemY=0,this.itemHeight=0,this.itemMarginBottom=0,this.itemMarginTop=0,this.itemX=0,this.itemY=0,this.lastItemY=0,this.lastLineHeight=0,this.legendHeight=0,this.legendWidth=0,this.maxItemWidth=0,this.maxLegendWidth=0,this.offsetWidth=0,this.padding=0,this.pages=[],this.symbolHeight=0,this.symbolWidth=0,this.titleHeight=0,this.totalItemWidth=0,this.widthOption=0,this.chart=c,this.setOptions(d),d.enabled&&(this.render(),Z3(this,d),Dg(this.chart,"endResize",function(){this.legend.positionCheckboxes()})),Dg(this.chart,"render",()=>{this.options.enabled&&this.proximate&&(this.proximatePositions(),this.positionItems())})}setOptions(c){let d=Aa(c.padding,8);this.options=c,this.chart.styledMode||(this.itemStyle=c.itemStyle,this.itemHiddenStyle=Xu(this.itemStyle,c.itemHiddenStyle)),this.itemMarginTop=c.itemMarginTop,this.itemMarginBottom=c.itemMarginBottom,this.padding=d,this.initialItemY=d-5,this.symbolWidth=Aa(c.symbolWidth,16),this.pages=[],this.proximate=c.layout==="proximate"&&!this.chart.inverted,this.baseline=void 0}update(c,d){let p=this.chart;this.setOptions(Xu(!0,this.options,c)),"events"in this.options&&Z3(this,this.options),this.destroy(),p.isDirtyLegend=p.isDirtyBox=!0,Aa(d,!0)&&p.redraw(),Hl(this,"afterUpdate",{redraw:d})}colorizeItem(c,d){let p=c.color,{area:x,group:v,label:w,line:T,symbol:A}=c.legendItem||{};if((c instanceof Po||c instanceof Dr)&&(c.color=c.options?.legendSymbolColor||p),v?.[d?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){let{itemHiddenStyle:M={}}=this,z=M.color,{fillColor:P,fillOpacity:G,lineColor:Z,marker:st}=c.options,rt=nt=>(!d&&(nt.fill&&(nt.fill=z),nt.stroke&&(nt.stroke=z)),nt);w?.css(Xu(d?this.itemStyle:M)),T?.attr(rt({stroke:Z||c.color})),A&&A.attr(rt(st&&A.isMarker?c.pointAttribs():{fill:c.color})),x?.attr(rt({fill:P||c.color,"fill-opacity":P?1:G??.75}))}c.color=p,Hl(this,"afterColorizeItem",{item:c,visible:d})}positionItems(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()}positionItem(c){let{group:d,x:p=0,y:x=0}=c.legendItem||{},v=this.options,w=v.symbolPadding,T=!v.rtl,A=c.checkbox;if(d?.element){let M={translateX:T?p:this.legendWidth-p-2*w-4,translateY:x},z=()=>{Hl(this,"afterPositionItem",{item:c})};d[Nx(d.translateY)?"animate":"attr"](M,void 0,z)}A&&(A.x=p,A.y=x)}destroyItem(c){let d=c.legendItem||{};for(let p of["group","label","line","symbol"])d[p]&&(d[p]=d[p].destroy());c.checkbox=iN(c.checkbox),c.legendItem=void 0}destroy(){for(let c of this.getAllItems())this.destroyItem(c);for(let c of["clipRect","up","down","pager","nav","box","title","group"])this[c]&&(this[c]=this[c].destroy());this.display=null}positionCheckboxes(){let c,d=this.group?.alignAttr,p=this.clipHeight||this.legendHeight,x=this.titleHeight;d&&(c=d.translateY,this.allItems.forEach(function(v){let w,T=v.checkbox;T&&(w=c+x+T.y+(this.scrollOffset||0)+3,sN(T,{left:d.translateX+v.checkboxOffset+T.x-20+"px",top:w+"px",display:this.proximate||w>c-6&&w<c+p-6?"":"none"}))},this))}renderTitle(){let c=this.options,d=this.padding,p=c.title,x,v=0;p.text&&(this.title||(this.title=this.chart.renderer.label(p.text,d-3,d-4,void 0,void 0,void 0,c.useHTML,void 0,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(p.style),this.title.add(this.group)),p.width||this.title.css({width:this.maxLegendWidth+"px"}),v=(x=this.title.getBBox()).height,this.offsetWidth=x.width,this.contentGroup.attr({translateY:v})),this.titleHeight=v}setText(c){let d=this.options;c.legendItem.label.attr({text:d.labelFormat?eN(d.labelFormat,c,this.chart):d.labelFormatter.call(c)})}renderItem(c){let d=c.legendItem=c.legendItem||{},p=this.chart,x=p.renderer,v=this.options,w=v.layout==="horizontal",T=this.symbolWidth,A=v.symbolPadding||0,M=this.itemStyle,z=this.itemHiddenStyle,P=w?Aa(v.itemDistance,20):0,G=!v.rtl,Z=!c.series,st=!Z&&c.series.drawLegendSymbol?c.series:c,rt=st.options,nt=!!this.createCheckboxForItem&&rt&&rt.showCheckbox,it=v.useHTML,gt=c.options.className,_t=d.label,Wt=T+A+P+20*!!nt;!_t&&(d.group=x.g("legend-item").addClass("highcharts-"+st.type+"-series highcharts-color-"+c.colorIndex+(gt?" "+gt:"")+(Z?" highcharts-series-"+c.index:"")).attr({zIndex:1}).add(this.scrollGroup),d.label=_t=x.text("",G?T+A:-A,this.baseline||0,it),p.styledMode||_t.css(Xu(c.visible?M:z)),_t.attr({align:G?"left":"right",zIndex:2}).add(d.group),!this.baseline&&(this.fontMetrics=x.fontMetrics(_t),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,_t.attr("y",this.baseline),this.symbolHeight=Aa(v.symbolHeight,this.fontMetrics.f),v.squareSymbol&&(this.symbolWidth=Aa(v.symbolWidth,Math.max(this.symbolHeight,16)),Wt=this.symbolWidth+A+P+20*!!nt,G&&_t.attr("x",this.symbolWidth+A))),st.drawLegendSymbol(this,c),this.setItemEvents&&this.setItemEvents(c,_t,it)),nt&&!c.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(c),this.colorizeItem(c,c.visible),(p.styledMode||!M.width)&&_t.css({width:Math.min(v.itemWidth||this.widthOption||p.spacingBox.width,v.maxWidth?Dx(v.maxWidth,p.chartWidth):1/0)-Wt+"px"}),this.setText(c);let Vt=_t.getBBox(),qt=this.fontMetrics?.h||0;c.itemWidth=c.checkboxOffset=v.itemWidth||d.labelWidth||Vt.width+Wt,this.maxItemWidth=Math.max(this.maxItemWidth,c.itemWidth),this.totalItemWidth+=c.itemWidth,this.itemHeight=c.itemHeight=Math.round(d.labelHeight||(Vt.height>1.5*qt?Vt.height:qt))}layoutItem(c){let d=this.options,p=this.padding,x=d.layout==="horizontal",v=c.itemHeight,w=this.itemMarginBottom,T=this.itemMarginTop,A=x?Aa(d.itemDistance,20):0,M=this.maxLegendWidth,z=d.alignColumns&&this.totalItemWidth>M?this.maxItemWidth:c.itemWidth,P=c.legendItem||{};x&&this.itemX-p+z>M&&(this.itemX=p,this.lastLineHeight&&(this.itemY+=T+this.lastLineHeight+w),this.lastLineHeight=0),this.lastItemY=T+this.itemY+w,this.lastLineHeight=Math.max(v,this.lastLineHeight),P.x=this.itemX,P.y=this.itemY,x?this.itemX+=z:(this.itemY+=T+v+w,this.lastLineHeight=v),this.offsetWidth=this.widthOption||Math.max((x?this.itemX-p-(c.checkbox?0:A):z)+p,this.offsetWidth)}getAllItems(){let c=[];return this.chart.series.forEach(function(d){let p=d?.options;d&&Aa(p.showInLegend,!Nx(p.linkedTo)&&void 0,!0)&&(c=c.concat(d.legendItem?.labels||(p.legendType==="point"?d.data:d)))}),Hl(this,"afterGetAllItems",{allItems:c}),c}getAlignment(){let c=this.options;return this.proximate?c.align.charAt(0)+"tv":c.floating?"":c.align.charAt(0)+c.verticalAlign.charAt(0)+c.layout.charAt(0)}adjustMargins(c,d){let p=this.chart,x=this.options,v=this.getAlignment();v&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach((w,T)=>{w.test(v)&&!Nx(c[T])&&(p[J3[T]]=Math.max(p[J3[T]],p.legend[(T+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][T]*x[T%2?"x":"y"]+(x.margin??12)+d[T]+(p.titleOffset[T]||0)))})}proximatePositions(){let c,d=this.chart,p=[],x=this.options.align==="left";for(let v of(this.allItems.forEach(function(w){let T,A,M=x,z,P;w.yAxis&&(w.xAxis.options.reversed&&(M=!M),w.points&&(T=rN(M?w.points:w.points.slice(0).reverse(),function(G){return Q3(G.plotY)})),A=this.itemMarginTop+w.legendItem.label.getBBox().height+this.itemMarginBottom,P=w.yAxis.top-d.plotTop,z=w.visible?(T?T.plotY:w.yAxis.height)+(P-.3*A):P+w.yAxis.height,p.push({target:z,size:A,item:w}))},this),tN(p,d.plotHeight)))c=v.item.legendItem||{},Q3(v.pos)&&(c.y=d.plotTop-d.spacing[0]+v.pos)}render(){let c=this.chart,d=c.spacingBox.width,p=c.renderer,x=this.options,v=this.padding,w=this.getAllItems(),T,A,M,z=this.group,P,G=this.box;this.itemX=v,this.itemY=this.initialItemY,this.offsetWidth=0,this.lastItemY=0,this.widthOption=Dx(x.width,d-v),P=d-2*v-x.x,["rm","lm"].indexOf(this.getAlignment().substring(0,2))>-1&&(P/=2),this.maxLegendWidth=this.widthOption||P,z||(this.group=z=p.g("legend").addClass(x.className||"").attr({zIndex:7}).add(),this.contentGroup=p.g().attr({zIndex:1}).add(z),this.scrollGroup=p.g().add(this.contentGroup)),this.renderTitle(),aN(w,(Z,st)=>(Z.options?.legendIndex||0)-(st.options?.legendIndex||0)),x.reversed&&w.reverse(),this.allItems=w,this.display=T=!!w.length,this.lastLineHeight=0,this.maxItemWidth=0,this.totalItemWidth=0,this.itemHeight=0,w.forEach(this.renderItem,this),w.forEach(this.layoutItem,this),A=(x.maxWidth?Math.min(this.widthOption||this.offsetWidth,P,Dx(x.maxWidth,c.chartWidth)||1/0):this.widthOption||this.offsetWidth)+v,M=this.lastItemY+this.lastLineHeight+this.titleHeight,M=this.handleOverflow(M)+v,G||(this.box=G=p.rect().addClass("highcharts-legend-box").attr({r:x.borderRadius}).add(z)),c.styledMode||G.attr({stroke:x.borderColor,"stroke-width":x.borderWidth||0,fill:x.backgroundColor||"none"}).shadow(x.shadow),A>0&&M>0&&G[G.placed?"animate":"attr"](G.crisp.call({},{x:0,y:0,width:A,height:M},G.strokeWidth())),z[T?"show":"hide"](),c.styledMode&&z.getStyle("display")==="none"&&(A=M=0),this.legendWidth=A,this.legendHeight=M,T&&this.align(),this.proximate||this.positionItems(),Hl(this,"afterRender")}align(c=this.chart.spacingBox){let d=this.chart,p=this.options,x=c.y;/(lth|ct|rth)/.test(this.getAlignment())&&d.titleOffset[0]>0?x+=d.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&d.titleOffset[2]>0&&(x-=d.titleOffset[2]),x!==c.y&&(c=Xu(c,{y:x})),d.hasRendered||(this.group.placed=!1),this.group.align(Xu(p,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?"top":p.verticalAlign}),!0,c)}handleOverflow(c){let d=this,p=this.chart,x=p.renderer,v=this.options,w=v.y,T=v.verticalAlign==="top",A=this.padding,M=v.maxHeight,z=v.navigation,P=Aa(z.animation,!0),G=z.arrowSize||12,Z=this.pages,st=this.allItems,rt=function(Zt){typeof Zt=="number"?Kt.attr({height:Zt}):Kt&&(d.clipRect=Kt.destroy(),d.contentGroup.clip()),d.contentGroup.div&&(d.contentGroup.div.style.clip=Zt?"rect("+A+"px,9999px,"+(A+Zt)+"px,0)":"auto")},nt=function(Zt){return d[Zt]=x.circle(0,0,1.3*G).translate(G/2,G/2).add(qt),p.styledMode||d[Zt].attr("fill","rgba(0,0,0,0.0001)"),d[Zt]},it,gt,_t,Wt,Vt=p.spacingBox.height+(T?-w:w)-A,qt=this.nav,Kt=this.clipRect;return v.layout!=="horizontal"||v.verticalAlign==="middle"||v.floating||(Vt/=2),M&&(Vt=Math.min(Vt,M)),Z.length=0,c&&Vt>0&&c>Vt&&z.enabled!==!1?(this.clipHeight=it=Math.max(Vt-20-this.titleHeight-A,0),this.currentPage=Aa(this.currentPage,1),this.fullHeight=c,st.forEach((Zt,Se)=>{let Ne=(_t=Zt.legendItem||{}).y||0,we=Math.round(_t.label.getBBox().height),je=Z.length;(!je||Ne-Z[je-1]>it&&(gt||Ne)!==Z[je-1])&&(Z.push(gt||Ne),je++),_t.pageIx=je-1,gt&&Wt&&(Wt.pageIx=je-1),Se===st.length-1&&Ne+we-Z[je-1]>it&&Ne>Z[je-1]&&(Z.push(Ne),_t.pageIx=je),Ne!==gt&&(gt=Ne),Wt=_t}),Kt||(Kt=d.clipRect=x.clipRect(0,A-2,9999,0),d.contentGroup.clip(Kt)),rt(it),qt||(this.nav=qt=x.g().attr({zIndex:1}).add(this.group),this.up=x.symbol("triangle",0,0,G,G).add(qt),nt("upTracker").on("click",function(){d.scroll(-1,P)}),this.pager=x.text("",15,10).addClass("highcharts-legend-navigation"),!p.styledMode&&z.style&&this.pager.css(z.style),this.pager.add(qt),this.down=x.symbol("triangle-down",0,0,G,G).add(qt),nt("downTracker").on("click",function(){d.scroll(1,P)})),d.scroll(0),c=Vt):qt&&(rt(),this.nav=qt.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),c}scroll(c,d){let p=this.chart,x=this.pages,v=x.length,w=this.clipHeight,T=this.options.navigation,A=this.pager,M=this.padding,z=this.currentPage+c;z>v&&(z=v),z>0&&(d!==void 0&&J$(d,p),this.nav.attr({translateX:M,translateY:w+this.padding+7+this.titleHeight,visibility:"inherit"}),[this.up,this.upTracker].forEach(function(P){P.attr({class:z===1?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),A.attr({text:z+"/"+v}),[this.down,this.downTracker].forEach(function(P){P.attr({x:18+this.pager.getBBox().width,class:z===v?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})},this),p.styledMode||(this.up.attr({fill:z===1?T.inactiveColor:T.activeColor}),this.upTracker.css({cursor:z===1?"default":"pointer"}),this.down.attr({fill:z===v?T.inactiveColor:T.activeColor}),this.downTracker.css({cursor:z===v?"default":"pointer"})),this.scrollOffset=-x[z-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=z,this.positionCheckboxes(),lN(()=>{Hl(this,"afterScroll",{currentPage:z})},Z$(Aa(d,p.renderer.globalAnimation,!0)).duration))}setItemEvents(c,d,p){let x=this,v=c.legendItem||{},w=x.chart.renderer.boxWrapper,T=c instanceof Dr,A=c instanceof Po,M="highcharts-legend-"+(T?"point":"series")+"-active",z=x.chart.styledMode,P=p?[d,v.symbol]:[v.group],G=Z=>{x.allItems.forEach(st=>{c!==st&&[st].concat(st.linkedSeries||[]).forEach(rt=>{rt.setState(Z,!T)})})};for(let Z of P)Z&&Z.on("mouseover",function(){c.visible&&G("inactive"),c.setState("hover"),c.visible&&w.addClass(M),z||d.css(x.options.itemHoverStyle)}).on("mouseout",function(){x.chart.styledMode||d.css(Xu(c.visible?x.itemStyle:x.itemHiddenStyle)),G(""),w.removeClass(M),c.setState()}).on("click",function(st){let rt=function(){c.setVisible&&c.setVisible(),G(c.visible?"inactive":"")};w.removeClass(M),Hl(x,"itemClick",{browserEvent:st,legendItem:c},rt),T?c.firePointEvent("legendItemClick",{browserEvent:st}):A&&Hl(c,"legendItemClick",{browserEvent:st})})}createCheckboxForItem(c){c.checkbox=nN("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:c.selected,defaultChecked:c.selected},this.options.itemCheckboxStyle,this.chart.container),Dg(c.checkbox,"click",function(d){let p=d.target;Hl(c.series||c,"checkboxClick",{checked:p.checked,item:c},function(){c.select()})})}}(y=Rx||(Rx={})).compose=function(N){oN(Q$,"Core.Legend")&&Dg(N,"beforeMargins",function(){this.legend=new y(this,this.options.legend)})};let tk=Rx,{animate:Mx,animObject:cN,setAnimation:Ox}=Un,{defaultOptions:Fx}=Xe,{numberFormat:uN}=dr,{registerEventOptions:ek}=nd,{charts:qu,doc:Gf,marginNames:nk,svg:hN,win:Px}=at,{seriesTypes:Lx}=wi,{addEvent:Bx,attr:sk,createElement:zx,css:$a,defined:Rc,diffObjects:ik,discardElement:dN,erase:fN,error:Rg,extend:Mc,find:Wx,fireEvent:Cs,getAlignFactor:pN,getStyle:Vx,isArray:gN,isNumber:md,isObject:mN,isString:Mg,merge:ll,objectEach:Ux,pick:xo,pInt:xN,relativeLength:rk,removeEvent:ok,splat:Og,syncTimeout:bN,uniqueKey:vN}=Ae;class Oc{static chart(c,d,p){return new Oc(c,d,p)}constructor(c,d,p){this.sharedClips={};const x=[...arguments];(Mg(c)||c.nodeName)&&(this.renderTo=x.shift()),this.init(x[0],x[1])}setZoomOptions(){let c=this.options.chart,d=c.zooming;this.zooming={...d,type:xo(c.zoomType,d.type),key:xo(c.zoomKey,d.key),pinchType:xo(c.pinchType,d.pinchType),singleTouch:xo(c.zoomBySingleTouch,d.singleTouch,!1),resetButton:ll(d.resetButton,c.resetZoomButton)}}init(c,d){Cs(this,"init",{args:arguments},function(){let p=ll(Fx,c),x=p.chart,v=this.renderTo||x.renderTo;this.userOptions=Mc({},c),(this.renderTo=Mg(v)?Gf.getElementById(v):v)||Rg(13,!0,this),this.margin=[],this.spacing=[],this.labelCollectors=[],this.callback=d,this.isResizing=0,this.options=p,this.axes=[],this.series=[],this.locale=p.lang.locale??this.renderTo.closest("[lang]")?.lang,this.time=new fn(Mc(p.time||{},{locale:this.locale}),p.lang),p.time=this.time.options,this.numberFormatter=(x.numberFormatter||uN).bind(this),this.styledMode=x.styledMode,this.hasCartesianSeries=x.showAxes,this.index=qu.length,qu.push(this),at.chartCount++,ek(this,x),this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,this.setZoomOptions(),Cs(this,"afterInit"),this.firstRender()})}initSeries(c){let d=this.options.chart,p=c.type||d.type,x=Lx[p];x||Rg(17,!0,this,{missingModuleFor:p});let v=new x;return typeof v.init=="function"&&v.init(this,c),v}setSortedData(){this.getSeriesOrderByLinks().forEach(function(c){c.points||c.data||!c.enabledDataSorting||c.setData(c.options.data,!1)})}getSeriesOrderByLinks(){return this.series.concat().sort(function(c,d){return c.linkedSeries.length||d.linkedSeries.length?d.linkedSeries.length-c.linkedSeries.length:0})}orderItems(c,d=0){let p=this[c],x=this.options[c]=Og(this.options[c]).slice(),v=this.userOptions[c]=this.userOptions[c]?Og(this.userOptions[c]).slice():[];if(this.hasRendered&&(x.splice(d),v.splice(d)),p)for(let w=d,T=p.length;w<T;++w){let A=p[w];A&&(A.index=w,A instanceof Po&&(A.name=A.getName()),A.options.isInternal||(x[w]=A.options,v[w]=A.userOptions))}}getClipBox(c,d){let p=this.inverted,{xAxis:x,yAxis:v}=c||{},{x:w,y:T,width:A,height:M}=ll(this.clipBox);return c&&(x&&x.len!==this.plotSizeX&&(A=x.len),v&&v.len!==this.plotSizeY&&(M=v.len),p&&!c.invertible&&([A,M]=[M,A])),d&&(w+=(p?v:x)?.pos??this.plotLeft,T+=(p?x:v)?.pos??this.plotTop),{x:w,y:T,width:A,height:M}}isInsidePlot(c,d,p={}){let{inverted:x,plotBox:v,plotLeft:w,plotTop:T,scrollablePlotBox:A}=this,{scrollLeft:M=0,scrollTop:z=0}=p.visiblePlotOnly&&this.scrollablePlotArea?.scrollingContainer||{},P=p.series,G=p.visiblePlotOnly&&A||v,Z=p.inverted?d:c,st=p.inverted?c:d,rt={x:Z,y:st,isInsidePlot:!0,options:p};if(!p.ignoreX){let nt=P&&(x&&!this.polar?P.yAxis:P.xAxis)||{pos:w,len:1/0},it=p.paneCoordinates?nt.pos+Z:w+Z;it>=Math.max(M+w,nt.pos)&&it<=Math.min(M+w+G.width,nt.pos+nt.len)||(rt.isInsidePlot=!1)}if(!p.ignoreY&&rt.isInsidePlot){let nt=!x&&p.axis&&!p.axis.isXAxis&&p.axis||P&&(x?P.xAxis:P.yAxis)||{pos:T,len:1/0},it=p.paneCoordinates?nt.pos+st:T+st;it>=Math.max(z+T,nt.pos)&&it<=Math.min(z+T+G.height,nt.pos+nt.len)||(rt.isInsidePlot=!1)}return Cs(this,"afterIsInsidePlot",rt),rt.isInsidePlot}redraw(c){Cs(this,"beforeRedraw");let d=this.hasCartesianSeries?this.axes:this.colorAxis||[],p=this.series,x=this.pointer,v=this.legend,w=this.userOptions.legend,T=this.renderer,A=T.isHidden(),M=[],z,P,G,Z=this.isDirtyBox,st=this.isDirtyLegend,rt;for(T.rootFontSize=T.boxWrapper.getStyle("font-size"),this.setResponsive&&this.setResponsive(!1),Ox(!!this.hasRendered&&c,this),A&&this.temporaryDisplay(),this.layOutTitles(!1),G=p.length;G--;)if(((rt=p[G]).options.stacking||rt.options.centerInCategory)&&(P=!0,rt.isDirty)){z=!0;break}if(z)for(G=p.length;G--;)(rt=p[G]).options.stacking&&(rt.isDirty=!0);p.forEach(function(nt){nt.isDirty&&(nt.options.legendType==="point"?(typeof nt.updateTotals=="function"&&nt.updateTotals(),st=!0):w&&(w.labelFormatter||w.labelFormat)&&(st=!0)),nt.isDirtyData&&Cs(nt,"updatedData")}),st&&v&&v.options.enabled&&(v.render(),this.isDirtyLegend=!1),P&&this.getStacks(),d.forEach(function(nt){nt.updateNames(),nt.setScale()}),this.getMargins(),d.forEach(function(nt){nt.isDirty&&(Z=!0)}),d.forEach(function(nt){let it=nt.min+","+nt.max;nt.extKey!==it&&(nt.extKey=it,M.push(function(){Cs(nt,"afterSetExtremes",Mc(nt.eventArgs,nt.getExtremes())),delete nt.eventArgs})),(Z||P)&&nt.redraw()}),Z&&this.drawChartBox(),Cs(this,"predraw"),p.forEach(function(nt){(Z||nt.isDirty)&&nt.visible&&nt.redraw(),nt.isDirtyData=!1}),x&&x.reset(!0),T.draw(),Cs(this,"redraw"),Cs(this,"render"),A&&this.temporaryDisplay(!0),M.forEach(function(nt){nt.call()})}get(c){let d=this.series;function p(v){return v.id===c||v.options&&v.options.id===c}let x=Wx(this.axes,p)||Wx(this.series,p);for(let v=0;!x&&v<d.length;v++)x=Wx(d[v].points||[],p);return x}createAxes(){let c=this.userOptions;for(let d of(Cs(this,"createAxes"),["xAxis","yAxis"]))for(let p of c[d]=Og(c[d]||{}))new Ac(this,p,d);Cs(this,"afterCreateAxes")}getSelectedPoints(){return this.series.reduce((c,d)=>(d.getPointsCollection().forEach(p=>{xo(p.selectedStaging,p.selected)&&c.push(p)}),c),[])}getSelectedSeries(){return this.series.filter(c=>c.selected)}setTitle(c,d,p){this.applyDescription("title",c),this.applyDescription("subtitle",d),this.applyDescription("caption",void 0),this.layOutTitles(p)}applyDescription(c,d){let p=this,x=this.options[c]=ll(this.options[c],d),v=this[c];v&&d&&(this[c]=v=v.destroy()),x&&!v&&((v=this.renderer.text(x.text,0,0,x.useHTML).attr({align:x.align,class:"highcharts-"+c,zIndex:x.zIndex||4}).css({textOverflow:"ellipsis",whiteSpace:"nowrap"}).add()).update=function(w,T){p.applyDescription(c,w),p.layOutTitles(T)},this.styledMode||v.css(Mc(c==="title"?{fontSize:this.options.isStock?"1em":"1.2em"}:{},x.style)),v.textPxLength=v.getBBox().width,v.css({whiteSpace:x.style?.whiteSpace}),this[c]=v)}layOutTitles(c=!0){let d=[0,0,0],{options:p,renderer:x,spacingBox:v}=this;["title","subtitle","caption"].forEach(T=>{let A=this[T],M=this.options[T],z=ll(v),P=A?.textPxLength||0;if(A&&M){Cs(this,"layOutTitle",{alignTo:z,key:T,textPxLength:P});let G=x.fontMetrics(A),Z=G.b,st=G.h,rt=M.verticalAlign||"top",nt=rt==="top",it=nt&&M.minScale||1,gt=T==="title"?nt?-3:0:nt?d[0]+2:0,_t=Math.min(z.width/P,1),Wt=Math.max(it,_t),Vt=ll({y:rt==="bottom"?Z:gt+Z},{align:T==="title"?_t<it?"left":"center":this.title?.alignValue},M),qt=(M.width||(_t>it?this.chartWidth:z.width)/Wt)+"px";A.alignValue!==Vt.align&&(A.placed=!1);let Kt=Math.round(A.css({width:qt}).getBBox(M.useHTML).height);if(Vt.height=Kt,A.align(Vt,!1,z).attr({align:Vt.align,scaleX:Wt,scaleY:Wt,"transform-origin":`${z.x+P*Wt*pN(Vt.align)} ${st}`}),!M.floating){let Zt=Kt*(Kt<1.2*st?1:Wt);rt==="top"?d[0]=Math.ceil(d[0]+Zt):rt==="bottom"&&(d[2]=Math.ceil(d[2]+Zt))}}},this),d[0]&&(p.title?.verticalAlign||"top")==="top"&&(d[0]+=p.title?.margin||0),d[2]&&p.caption?.verticalAlign==="bottom"&&(d[2]+=p.caption?.margin||0);let w=!this.titleOffset||this.titleOffset.join(",")!==d.join(",");this.titleOffset=d,Cs(this,"afterLayOutTitles"),!this.isDirtyBox&&w&&(this.isDirtyBox=this.isDirtyLegend=w,this.hasRendered&&c&&this.isDirtyBox&&this.redraw())}getContainerBox(){let c=[].map.call(this.renderTo.children,p=>{if(p!==this.container){let x=p.style.display;return p.style.display="none",[p,x]}}),d={width:Vx(this.renderTo,"width",!0)||0,height:Vx(this.renderTo,"height",!0)||0};return c.filter(Boolean).forEach(([p,x])=>{p.style.display=x}),d}getChartSize(){let c=this.options.chart,d=c.width,p=c.height,x=this.getContainerBox(),v=x.height<=1||!this.renderTo.parentElement?.style.height&&this.renderTo.style.height==="100%";this.chartWidth=Math.max(0,d||x.width||600),this.chartHeight=Math.max(0,rk(p,this.chartWidth)||(v?400:x.height)),this.containerBox=x}temporaryDisplay(c){let d=this.renderTo,p;if(c)for(;d?.style;)d.hcOrigStyle&&($a(d,d.hcOrigStyle),delete d.hcOrigStyle),d.hcOrigDetached&&(Gf.body.removeChild(d),d.hcOrigDetached=!1),d=d.parentNode;else for(;d?.style&&(Gf.body.contains(d)||d.parentNode||(d.hcOrigDetached=!0,Gf.body.appendChild(d)),(Vx(d,"display",!1)==="none"||d.hcOricDetached)&&(d.hcOrigStyle={display:d.style.display,height:d.style.height,overflow:d.style.overflow},p={display:"block",overflow:"hidden"},d!==this.renderTo&&(p.height=0),$a(d,p),d.offsetWidth||d.style.setProperty("display","block","important")),(d=d.parentNode)!==Gf.body););}setClassName(c){this.container.className="highcharts-container "+(c||"")}getContainer(){let c,d=this.options,p=d.chart,x="data-highcharts-chart",v=vN(),w=this.renderTo,T=xN(sk(w,x));md(T)&&qu[T]&&qu[T].hasRendered&&qu[T].destroy(),sk(w,x,this.index),w.innerHTML=Vs.emptyHTML,p.skipClone||w.offsetWidth||this.temporaryDisplay(),this.getChartSize();let A=this.chartHeight,M=this.chartWidth;$a(w,{overflow:"hidden"}),this.styledMode||(c=Mc({position:"relative",overflow:"hidden",width:M+"px",height:A+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)",userSelect:"none","touch-action":"manipulation",outline:"none",padding:"0px"},p.style||{}));let z=zx("div",{id:v},c,w);this.container=z,this.getChartSize(),M!==this.chartWidth&&(M=this.chartWidth,this.styledMode||$a(z,{width:xo(p.style?.width,M+"px")})),this.containerBox=this.getContainerBox(),this._cursor=z.style.cursor;let P=p.renderer||!hN?Ml.getRendererType(p.renderer):en;if(this.renderer=new P(z,M,A,void 0,p.forExport,d.exporting?.allowHTML,this.styledMode),Ox(void 0,this),this.setClassName(p.className),this.styledMode)for(let G in d.defs)this.renderer.definition(d.defs[G]);else this.renderer.setStyle(p.style);this.renderer.chartIndex=this.index,Cs(this,"afterGetContainer")}getMargins(c){let{spacing:d,margin:p,titleOffset:x}=this;this.resetMargins(),x[0]&&!Rc(p[0])&&(this.plotTop=Math.max(this.plotTop,x[0]+d[0])),x[2]&&!Rc(p[2])&&(this.marginBottom=Math.max(this.marginBottom,x[2]+d[2])),this.legend?.display&&this.legend.adjustMargins(p,d),Cs(this,"getMargins"),c||this.getAxisMargins()}getAxisMargins(){let c=this,d=c.axisOffset=[0,0,0,0],p=c.colorAxis,x=c.margin,v=w=>{w.forEach(T=>{T.visible&&T.getOffset()})};c.hasCartesianSeries?v(c.axes):p?.length&&v(p),nk.forEach((w,T)=>{Rc(x[T])||(c[w]+=d[T])}),c.setChartSize()}getOptions(){return ik(this.userOptions,Fx)}reflow(c){let d=this,p=d.containerBox,x=d.getContainerBox();delete d.pointer?.chartPosition,!d.exporting?.isPrinting&&!d.isResizing&&p&&x.width&&((x.width!==p.width||x.height!==p.height)&&(Ae.clearTimeout(d.reflowTimeout),d.reflowTimeout=bN(function(){d.container&&d.setSize(void 0,void 0,!1)},100*!!c)),d.containerBox=x)}setReflow(){let c=this,d=p=>{c.options?.chart.reflow&&c.hasLoaded&&c.reflow(p)};if(typeof ResizeObserver=="function")new ResizeObserver(d).observe(c.renderTo);else{let p=Bx(Px,"resize",d);Bx(this,"destroy",p)}}setSize(c,d,p){let x=this,v=x.renderer;x.isResizing+=1,Ox(p,x);let w=v.globalAnimation;x.oldChartHeight=x.chartHeight,x.oldChartWidth=x.chartWidth,c!==void 0&&(x.options.chart.width=c),d!==void 0&&(x.options.chart.height=d),x.getChartSize();let{chartWidth:T,chartHeight:A,scrollablePixelsX:M=0,scrollablePixelsY:z=0}=x;(x.isDirtyBox||T!==x.oldChartWidth||A!==x.oldChartHeight)&&(x.styledMode||(w?Mx:$a)(x.container,{width:`${T+M}px`,height:`${A+z}px`},w),x.setChartSize(!0),v.setSize(T,A,w),x.axes.forEach(function(P){P.isDirty=!0,P.setScale()}),x.isDirtyLegend=!0,x.isDirtyBox=!0,x.layOutTitles(),x.getMargins(),x.redraw(w),x.oldChartHeight=void 0,Cs(x,"resize"),setTimeout(()=>{x&&Cs(x,"endResize")},cN(w).duration)),x.isResizing-=1}setChartSize(c){let d,p,x,v,{chartHeight:w,chartWidth:T,inverted:A,spacing:M,renderer:z}=this,P=this.clipOffset,G=Math[A?"floor":"round"];this.plotLeft=d=Math.round(this.plotLeft),this.plotTop=p=Math.round(this.plotTop),this.plotWidth=x=Math.max(0,Math.round(T-d-(this.marginRight??0))),this.plotHeight=v=Math.max(0,Math.round(w-p-(this.marginBottom??0))),this.plotSizeX=A?v:x,this.plotSizeY=A?x:v,this.spacingBox=z.spacingBox={x:M[3],y:M[0],width:T-M[3]-M[1],height:w-M[0]-M[2]},this.plotBox=z.plotBox={x:d,y:p,width:x,height:v},P&&(this.clipBox={x:G(P[3]),y:G(P[0]),width:G(this.plotSizeX-P[1]-P[3]),height:G(this.plotSizeY-P[0]-P[2])}),c||(this.axes.forEach(function(Z){Z.setAxisSize(),Z.setAxisTranslation()}),z.alignElements()),Cs(this,"afterSetChartSize",{skipAxes:c})}resetMargins(){Cs(this,"resetMargins");let c=this,d=c.options.chart,p=d.plotBorderWidth||0,x=Math.round(p)/2;["margin","spacing"].forEach(v=>{let w=d[v],T=mN(w)?w:[w,w,w,w];["Top","Right","Bottom","Left"].forEach((A,M)=>{c[v][M]=d[`${v}${A}`]??T[M]})}),nk.forEach((v,w)=>{c[v]=c.margin[w]??c.spacing[w]}),c.axisOffset=[0,0,0,0],c.clipOffset=[x,x,x,x],c.plotBorderWidth=p}drawChartBox(){let c=this.options.chart,d=this.renderer,p=this.chartWidth,x=this.chartHeight,v=this.styledMode,w=this.plotBGImage,T=c.backgroundColor,A=c.plotBackgroundColor,M=c.plotBackgroundImage,z=this.plotLeft,P=this.plotTop,G=this.plotWidth,Z=this.plotHeight,st=this.plotBox,rt=this.clipRect,nt=this.clipBox,it=this.chartBackground,gt=this.plotBackground,_t=this.plotBorder,Wt,Vt,qt,Kt="animate";it||(this.chartBackground=it=d.rect().addClass("highcharts-background").add(),Kt="attr"),v?Wt=Vt=it.strokeWidth():(Vt=(Wt=c.borderWidth||0)+8*!!c.shadow,qt={fill:T||"none"},(Wt||it["stroke-width"])&&(qt.stroke=c.borderColor,qt["stroke-width"]=Wt),it.attr(qt).shadow(c.shadow)),it[Kt]({x:Vt/2,y:Vt/2,width:p-Vt-Wt%2,height:x-Vt-Wt%2,r:c.borderRadius}),Kt="animate",gt||(Kt="attr",this.plotBackground=gt=d.rect().addClass("highcharts-plot-background").add()),gt[Kt](st),!v&&(gt.attr({fill:A||"none"}).shadow(c.plotShadow),M&&(w?(M!==w.attr("href")&&w.attr("href",M),w.animate(st)):this.plotBGImage=d.image(M,z,P,G,Z).add())),rt?rt.animate({width:nt.width,height:nt.height}):this.clipRect=d.clipRect(nt),Kt="animate",_t||(Kt="attr",this.plotBorder=_t=d.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),v||_t.attr({stroke:c.plotBorderColor,"stroke-width":c.plotBorderWidth||0,fill:"none"}),_t[Kt](_t.crisp(st,-_t.strokeWidth())),this.isDirtyBox=!1,Cs(this,"afterDrawChartBox")}propFromSeries(){let c,d,p,x=this,v=x.options.chart,w=x.options.series;["inverted","angular","polar"].forEach(function(T){for(d=Lx[v.type],p=v[T]||d&&d.prototype[T],c=w?.length;!p&&c--;)(d=Lx[w[c].type])&&d.prototype[T]&&(p=!0);x[T]=p})}linkSeries(c){let d=this,p=d.series;p.forEach(function(x){x.linkedSeries.length=0}),p.forEach(function(x){let{linkedTo:v}=x.options,w=Mg(v)&&(v===":previous"?p[x.index-1]:d.get(v));w&&w.linkedParent!==x&&(w.linkedSeries.push(x),x.linkedParent=w,w.enabledDataSorting&&x.setDataSortingOptions(),x.visible=x.options.visible??w.options.visible??x.visible)}),Cs(this,"afterLinkSeries",{isUpdating:c})}renderSeries(){this.series.forEach(function(c){c.translate(),c.render()})}render(){let c=this.axes,d=this.colorAxis,p=this.renderer,x=this.options.chart.axisLayoutRuns||2,v=z=>{z.forEach(P=>{P.visible&&P.render()})},w=0,T=!0,A,M=0;for(let z of(this.setTitle(),Cs(this,"beforeMargins"),this.getStacks?.(),this.getMargins(!0),this.setChartSize(),c)){let{options:P}=z,{labels:G}=P;if(this.hasCartesianSeries&&z.horiz&&z.visible&&G.enabled&&z.series.length&&z.coll!=="colorAxis"&&!this.polar){w=P.tickLength,z.createGroups();let Z=new Ec(z,0,"",!0),st=Z.createLabel("x",G);if(Z.destroy(),st&&xo(G.reserveSpace,!md(P.crossing))&&(w=st.getBBox().height+G.distance+Math.max(P.offset||0,0)),w){st?.destroy();break}}}for(this.plotHeight=Math.max(this.plotHeight-w,0);(T||A||x>1)&&M<x;){let z=this.plotWidth,P=this.plotHeight;for(let G of c)M===0?G.setScale():(G.horiz&&T||!G.horiz&&A)&&G.setTickInterval(!0);M===0?this.getAxisMargins():this.getMargins(),T=z/this.plotWidth>(M?1:1.1),A=P/this.plotHeight>(M?1:1.05),M++}this.drawChartBox(),this.hasCartesianSeries?v(c):d?.length&&v(d),this.seriesGroup||(this.seriesGroup=p.g("series-group").attr({zIndex:3}).shadow(this.options.chart.seriesGroupShadow).add()),this.renderSeries(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0}addCredits(c){let d=this,p=ll(!0,this.options.credits,c);p.enabled&&!this.credits&&(this.credits=this.renderer.text(p.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",function(){p.href&&(Px.location.href=p.href)}).attr({align:p.position.align,zIndex:8}),d.styledMode||this.credits.css(p.style),this.credits.add().align(p.position),this.credits.update=function(x){d.credits=d.credits.destroy(),d.addCredits(x)})}destroy(){let c,d=this,p=d.axes,x=d.series,v=d.container,w=v?.parentNode;for(Cs(d,"destroy"),d.renderer.forExport?fN(qu,d):qu[d.index]=void 0,at.chartCount--,d.renderTo.removeAttribute("data-highcharts-chart"),ok(d),c=p.length;c--;)p[c]=p[c].destroy();for(this.scroller?.destroy?.(),c=x.length;c--;)x[c]=x[c].destroy();["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","rangeSelector","legend","resetZoomButton","tooltip","renderer"].forEach(T=>{d[T]=d[T]?.destroy?.()}),v&&(v.innerHTML=Vs.emptyHTML,ok(v),w&&dN(v)),Ux(d,function(T,A){delete d[A]})}firstRender(){let c=this,d=c.options;c.getContainer(),c.resetMargins(),c.setChartSize(),c.propFromSeries(),c.createAxes();let p=gN(d.series)?d.series:[];d.series=[],p.forEach(function(x){c.initSeries(x)}),c.linkSeries(),c.setSortedData(),Cs(c,"beforeRender"),c.render(),c.pointer?.getChartPosition(),c.renderer.imgCount||c.hasLoaded||c.onload(),c.temporaryDisplay(!0)}onload(){this.callbacks.concat([this.callback]).forEach(function(c){c&&this.index!==void 0&&c.apply(this,[this])},this),Cs(this,"load"),Cs(this,"render"),Rc(this.index)&&this.setReflow(),this.warnIfA11yModuleNotLoaded(),this.warnIfCSSNotLoaded(),this.hasLoaded=!0}warnIfA11yModuleNotLoaded(){let{options:c,title:d}=this;c&&!this.accessibility&&(this.renderer.boxWrapper.attr({role:"img","aria-label":(d?.element.textContent||"").replace(/</g,"&lt;")}),c.accessibility&&c.accessibility.enabled===!1||Rg('Highcharts warning: Consider including the "accessibility.js" module to make your chart more usable for people with disabilities. Set the "accessibility.enabled" option to false to remove this warning. See https://www.highcharts.com/docs/accessibility/accessibility-module.',!1,this))}warnIfCSSNotLoaded(){this.styledMode&&Px.getComputedStyle(this.container).zIndex!=="0"&&Rg(35,!1,this)}addSeries(c,d,p){let x,v=this;return c&&(d=xo(d,!0),Cs(v,"addSeries",{options:c},function(){x=v.initSeries(c),v.isDirtyLegend=!0,v.linkSeries(),x.enabledDataSorting&&x.setData(c.data,!1),Cs(v,"afterAddSeries",{series:x}),d&&v.redraw(p)})),x}addAxis(c,d,p,x){return this.createAxis(d?"xAxis":"yAxis",{axis:c,redraw:p,animation:x})}addColorAxis(c,d,p){return this.createAxis("colorAxis",{axis:c,redraw:d,animation:p})}createAxis(c,d){let p=new Ac(this,d.axis,c);return xo(d.redraw,!0)&&this.redraw(d.animation),p}showLoading(c){let d=this,p=d.options,x=p.loading,v=function(){w&&$a(w,{left:d.plotLeft+"px",top:d.plotTop+"px",width:d.plotWidth+"px",height:d.plotHeight+"px"})},w=d.loadingDiv,T=d.loadingSpan;w||(d.loadingDiv=w=zx("div",{className:"highcharts-loading highcharts-loading-hidden"},null,d.container)),T||(d.loadingSpan=T=zx("span",{className:"highcharts-loading-inner"},null,w),Bx(d,"redraw",v)),w.className="highcharts-loading",Vs.setElementHTML(T,xo(c,p.lang.loading,"")),!d.styledMode&&($a(w,Mc(x.style,{zIndex:10})),$a(T,x.labelStyle),d.loadingShown||($a(w,{opacity:0,display:""}),Mx(w,{opacity:x.style.opacity||.5},{duration:x.showDuration||0}))),d.loadingShown=!0,v()}hideLoading(){let c=this.options,d=this.loadingDiv;d&&(d.className="highcharts-loading highcharts-loading-hidden",this.styledMode||Mx(d,{opacity:0},{duration:c.loading.hideDuration||100,complete:function(){$a(d,{display:"none"})}})),this.loadingShown=!1}update(c,d,p,x){let v,w,T,A=this,M={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},z=c.isResponsiveOptions,P=[];Cs(A,"update",{options:c}),z||A.setResponsive(!1,!0),c=ik(c,A.options),A.userOptions=ll(A.userOptions,c);let G=c.chart;G&&(ll(!0,A.options.chart,G),this.setZoomOptions(),"className"in G&&A.setClassName(G.className),("inverted"in G||"polar"in G||"type"in G)&&(A.propFromSeries(),v=!0),"alignTicks"in G&&(v=!0),"events"in G&&ek(this,G),Ux(G,function(rt,nt){A.propsRequireUpdateSeries.indexOf("chart."+nt)!==-1&&(w=!0),A.propsRequireDirtyBox.indexOf(nt)!==-1&&(A.isDirtyBox=!0),A.propsRequireReflow.indexOf(nt)!==-1&&(A.isDirtyBox=!0,z||(T=!0))}),!A.styledMode&&G.style&&A.renderer.setStyle(A.options.chart.style||{})),!A.styledMode&&c.colors&&(this.options.colors=c.colors),Ux(c,function(rt,nt){A[nt]&&typeof A[nt].update=="function"?A[nt].update(rt,!1):typeof A[M[nt]]=="function"?A[M[nt]](rt):nt!=="colors"&&A.collectionsWithUpdate.indexOf(nt)===-1&&ll(!0,A.options[nt],c[nt]),nt!=="chart"&&A.propsRequireUpdateSeries.indexOf(nt)!==-1&&(w=!0)}),this.collectionsWithUpdate.forEach(function(rt){c[rt]&&(Og(c[rt]).forEach(function(nt,it){let gt,_t=Rc(nt.id);_t&&(gt=A.get(nt.id)),!gt&&A[rt]&&(gt=A[rt][xo(nt.index,it)])&&(_t&&Rc(gt.options.id)||gt.options.isInternal)&&(gt=void 0),gt&&gt.coll===rt&&(gt.update(nt,!1),p&&(gt.touched=!0)),!gt&&p&&A.collectionsWithInit[rt]&&(A.collectionsWithInit[rt][0].apply(A,[nt].concat(A.collectionsWithInit[rt][1]||[]).concat([!1])).touched=!0)}),p&&A[rt].forEach(function(nt){nt.touched||nt.options.isInternal?delete nt.touched:P.push(nt)}))}),P.forEach(function(rt){rt.chart&&rt.remove&&rt.remove(!1)}),v&&A.axes.forEach(function(rt){rt.update({},!1)}),w&&A.getSeriesOrderByLinks().forEach(function(rt){rt.chart&&rt.update({},!1)},this);let Z=G?.width,st=G&&(Mg(G.height)?rk(G.height,Z||A.chartWidth):G.height);T||md(Z)&&Z!==A.chartWidth||md(st)&&st!==A.chartHeight?A.setSize(Z,st,x):xo(d,!0)&&A.redraw(x),Cs(A,"afterUpdate",{options:c,redraw:d,animation:x})}setSubtitle(c,d){this.applyDescription("subtitle",c),this.layOutTitles(d)}setCaption(c,d){this.applyDescription("caption",c),this.layOutTitles(d)}showResetZoom(){let c=this,d=Fx.lang,p=c.zooming.resetButton,x=p.theme,v=p.relativeTo==="chart"||p.relativeTo==="spacingBox"?null:"plotBox";function w(){c.zoomOut()}Cs(this,"beforeShowResetZoom",null,function(){c.resetZoomButton=c.renderer.button(d.resetZoom,null,null,w,x).attr({align:p.position.align,title:d.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(p.position,!1,v)}),Cs(this,"afterShowResetZoom")}zoomOut(){Cs(this,"selection",{resetSelection:!0},()=>this.transform({reset:!0,trigger:"zoom"}))}pan(c,d){let p=this,x=typeof d=="object"?d:{enabled:d,type:"x"},v=x.type,w=v&&p[{x:"xAxis",xy:"axes",y:"yAxis"}[v]].filter(A=>A.options.panningEnabled&&!A.options.isInternal),T=p.options.chart;T?.panning&&(T.panning=x),Cs(this,"pan",{originalEvent:c},()=>{p.transform({axes:w,event:c,to:{x:c.chartX-(p.mouseDownX||0),y:c.chartY-(p.mouseDownY||0)},trigger:"pan"}),$a(p.container,{cursor:"move"})})}transform(c){let{axes:d=this.axes,event:p,from:x={},reset:v,selection:w,to:T={},trigger:A,allowResetButton:M=!0}=c,{inverted:z,time:P}=this;this.hoverPoints?.forEach(rt=>rt.setState()),Cs(this,"transform",c);let G=c.hasZoomed||!1,Z,st;for(let rt of d){let{horiz:nt,len:it,minPointOffset:gt=0,options:_t,reversed:Wt}=rt,Vt=nt?"width":"height",qt=nt?"x":"y",Kt=xo(T[Vt],rt.len),Zt=xo(x[Vt],rt.len),Se=10>Math.abs(Kt)?1:Kt/Zt,Ne=(x[qt]||0)+Zt/2-rt.pos,we=Ne-((T[qt]??rt.pos)+Kt/2-rt.pos)/Se,je=Wt&&!z||!Wt&&z?-1:1;if(!v&&(Ne<0||Ne>rt.len))continue;let Qe=rt.chart.polar||rt.isOrdinal?0:gt*je||0,cn=rt.toValue(we,!0),Tn=rt.toValue(we+it/Se,!0),yn=cn+Qe,mn=Tn-Qe,Qs=rt.allExtremes;if(w&&w[rt.coll].push({axis:rt,min:Math.min(cn,Tn),max:Math.max(cn,Tn)}),yn>mn&&([yn,mn]=[mn,yn]),Se===1&&!v&&rt.coll==="yAxis"&&!Qs){for(let jl of rt.series){let Lo=jl.getExtremes(jl.getProcessedData(!0).modified.getColumn(jl.pointValKey||"y")||[],!0);Qs??(Qs={dataMin:Number.MAX_VALUE,dataMax:-Number.MAX_VALUE}),md(Lo.dataMin)&&md(Lo.dataMax)&&(Qs.dataMin=Math.min(Lo.dataMin,Qs.dataMin),Qs.dataMax=Math.max(Lo.dataMax,Qs.dataMax))}rt.allExtremes=Qs}let{dataMin:Us,dataMax:Yr,min:Wn,max:Gn}=Mc(rt.getExtremes(),Qs||{}),Is=P.parse(_t.min),Qn=P.parse(_t.max),Gs=Us??Is,Si=Yr??Qn,Hs=mn-yn,ki=rt.categories?0:Math.min(Hs,Si-Gs),Zr=Gs-ki*(Rc(Is)?0:_t.minPadding),Jr=Si+ki*(Rc(Qn)?0:_t.maxPadding),xd=rt.allowZoomOutside||Se===1||A!=="zoom"&&Se>1,Na=Math.min(Is??Zr,Zr,xd?Wn:Zr),pr=Math.max(Qn??Jr,Jr,xd?Gn:Jr);(!rt.isOrdinal||Se!==1||v)&&(yn<Na&&(yn=Na,Se>=1&&(mn=yn+Hs)),mn>pr&&(mn=pr,Se>=1&&(yn=mn-Hs)),(v||rt.series.length&&(yn!==Wn||mn!==Gn)&&yn>=Na&&mn<=pr)&&(w?w[rt.coll].push({axis:rt,min:yn,max:mn}):(rt.isPanning=A!=="zoom",rt.isPanning&&A!=="mousewheel"&&(st=!0),rt.setExtremes(v?void 0:yn,v?void 0:mn,!1,!1,{move:we,trigger:A,scale:Se}),!v&&(yn>Na||mn<pr)&&(Z=M)),G=!0),this.hasCartesianSeries||v||(Z=M),p&&(this[nt?"mouseDownX":"mouseDownY"]=p[nt?"chartX":"chartY"]))}return G&&(w?Cs(this,"selection",w,()=>{delete c.selection,c.trigger="zoom",this.transform(c)}):(!Z||st||this.resetZoomButton?!Z&&this.resetZoomButton&&(this.resetZoomButton=this.resetZoomButton.destroy()):this.showResetZoom(),this.redraw(A==="zoom"&&(this.options.chart.animation??this.pointCount<100)))),G}}Mc(Oc.prototype,{callbacks:[],collectionsWithInit:{xAxis:[Oc.prototype.addAxis,[!0]],yAxis:[Oc.prototype.addAxis,[!1]],series:[Oc.prototype.addSeries]},collectionsWithUpdate:["xAxis","yAxis","series"],propsRequireDirtyBox:["backgroundColor","borderColor","borderWidth","borderRadius","plotBackgroundColor","plotBackgroundImage","plotBorderColor","plotBorderWidth","plotShadow","shadow"],propsRequireReflow:["margin","marginTop","marginRight","marginBottom","marginLeft","spacing","spacingTop","spacingRight","spacingBottom","spacingLeft"],propsRequireUpdateSeries:["chart.inverted","chart.polar","chart.ignoreHiddenSeries","chart.type","colors","plotOptions","time","tooltip"]});let{stop:yN}=Un,{composed:wN}=at,{addEvent:Fc,createElement:Fg,css:Gx,defined:Hx,erase:kN,merge:ak,pushUnique:lk}=Ae;function CN(){let N=this.scrollablePlotArea;(this.scrollablePixelsX||this.scrollablePixelsY)&&!N&&(this.scrollablePlotArea=N=new Hf(this)),N?.applyFixed()}function ck(){this.chart.scrollablePlotArea&&(this.chart.scrollablePlotArea.isDirty=!0)}class Hf{static compose(c,d,p){lk(wN,this.compose)&&(Fc(c,"afterInit",ck),Fc(d,"afterSetChartSize",x=>this.afterSetSize(x.target,x)),Fc(d,"render",CN),Fc(p,"show",ck))}static afterSetSize(c,d){let p,x,v,{minWidth:w,minHeight:T}=c.options.chart.scrollablePlotArea||{},{clipBox:A,plotBox:M,inverted:z,renderer:P}=c;if(!P.forExport)if(w?(c.scrollablePixelsX=p=Math.max(0,w-c.chartWidth),p&&(c.scrollablePlotBox=ak(c.plotBox),M.width=c.plotWidth+=p,A[z?"height":"width"]+=p,v=!0)):T&&(c.scrollablePixelsY=x=Math.max(0,T-c.chartHeight),Hx(x)&&(c.scrollablePlotBox=ak(c.plotBox),M.height=c.plotHeight+=x,A[z?"width":"height"]+=x,v=!1)),Hx(v)){if(!d.skipAxes)for(let G of c.axes)(G.horiz===v||c.hasParallelCoordinates&&G.coll==="yAxis")&&(G.setAxisSize(),G.setAxisTranslation())}else delete c.scrollablePlotBox}constructor(c){let d;const p=c.options.chart,x=Ml.getRendererType(),v=p.scrollablePlotArea||{},w=this.moveFixedElements.bind(this),T={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};c.scrollablePixelsX&&(T.overflowX="auto"),c.scrollablePixelsY&&(T.overflowY="auto"),this.chart=c;const A=this.parentDiv=Fg("div",{className:"highcharts-scrolling-parent"},{position:"relative"},c.renderTo),M=this.scrollingContainer=Fg("div",{className:"highcharts-scrolling"},T,A),z=this.innerContainer=Fg("div",{className:"highcharts-inner-container"},void 0,M),P=this.fixedDiv=Fg("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:(p.style?.zIndex||0)+2,top:0},void 0,!0),G=this.fixedRenderer=new x(P,c.chartWidth,c.chartHeight,p.style);this.mask=G.path().attr({fill:p.backgroundColor||"#fff","fill-opacity":v.opacity??.85,zIndex:-1}).addClass("highcharts-scrollable-mask").add(),M.parentNode.insertBefore(P,M),Gx(c.renderTo,{overflow:"visible"}),Fc(c,"afterShowResetZoom",w),Fc(c,"afterApplyDrilldown",w),Fc(c,"afterLayOutTitles",w),Fc(M,"scroll",()=>{let{pointer:Z,hoverPoint:st}=c;Z&&(delete Z.chartPosition,st&&(d=st),Z.runPointActions(void 0,d,!0))}),z.appendChild(c.container)}applyFixed(){let{chart:c,fixedRenderer:d,isDirty:p,scrollingContainer:x}=this,{axisOffset:v,chartWidth:w,chartHeight:T,container:A,plotHeight:M,plotLeft:z,plotTop:P,plotWidth:G,scrollablePixelsX:Z=0,scrollablePixelsY:st=0}=c,{scrollPositionX:rt=0,scrollPositionY:nt=0}=c.options.chart.scrollablePlotArea||{},it=w+Z,gt=T+st;d.setSize(w,T),(p??!0)&&(this.isDirty=!1,this.moveFixedElements()),yN(c.container),Gx(A,{width:`${it}px`,height:`${gt}px`}),c.renderer.boxWrapper.attr({width:it,height:gt,viewBox:["0 0",it,gt].join(" ")}),c.chartBackground?.attr({width:it,height:gt}),Gx(x,{width:`${w}px`,height:`${T}px`}),Hx(p)||(x.scrollLeft=Z*rt,x.scrollTop=st*nt);let _t=P-v[0]-1,Wt=z-v[3]-1,Vt=P+M+v[2]+1,qt=z+G+v[1]+1,Kt=z+G-Z,Zt=P+M-st,Se=[["M",0,0]];Z?Se=[["M",0,_t],["L",z-1,_t],["L",z-1,Vt],["L",0,Vt],["Z"],["M",Kt,_t],["L",w,_t],["L",w,Vt],["L",Kt,Vt],["Z"]]:st&&(Se=[["M",Wt,0],["L",Wt,P-1],["L",qt,P-1],["L",qt,0],["Z"],["M",Wt,Zt],["L",Wt,T],["L",qt,T],["L",qt,Zt],["Z"]]),c.redrawTrigger!=="adjustHeight"&&this.mask.attr({d:Se})}moveFixedElements(){let c,{container:d,inverted:p,scrollablePixelsX:x,scrollablePixelsY:v}=this.chart,w=this.fixedRenderer,T=Hf.fixedSelectors;if(x&&!p?c=".highcharts-yaxis":x&&p||v&&!p?c=".highcharts-xaxis":v&&p&&(c=".highcharts-yaxis"),c&&!(this.chart.hasParallelCoordinates&&c===".highcharts-yaxis"))for(let A of[`${c}:not(.highcharts-radial-axis)`,`${c}-labels:not(.highcharts-radial-axis-labels)`])lk(T,A);else for(let A of[".highcharts-xaxis",".highcharts-yaxis"])for(let M of[`${A}:not(.highcharts-radial-axis)`,`${A}-labels:not(.highcharts-radial-axis-labels)`])kN(T,M);for(let A of T)[].forEach.call(d.querySelectorAll(A),M=>{(M.namespaceURI===w.SVG_NS?w.box:w.box.parentNode).appendChild(M),M.style.pointerEvents="auto"})}}Hf.fixedSelectors=[".highcharts-breadcrumbs-group",".highcharts-contextbutton",".highcharts-caption",".highcharts-credits",".highcharts-drillup-button",".highcharts-legend",".highcharts-legend-checkbox",".highcharts-navigator-series",".highcharts-navigator-xaxis",".highcharts-navigator-yaxis",".highcharts-navigator",".highcharts-range-selector-group",".highcharts-reset-zoom",".highcharts-scrollbar",".highcharts-subtitle",".highcharts-title"];let{format:SN}=dr,{series:TN}=wi,{destroyObjectProperties:IN,fireEvent:uk,getAlignFactor:jx,isNumber:Xx,pick:jf}=Ae,hk=class{constructor(N,c,d,p,x){const v=N.chart.inverted,w=N.reversed;this.axis=N;const T=this.isNegative=!!d!=!!w;this.options=c=c||{},this.x=p,this.total=null,this.cumulative=null,this.points={},this.hasValidPoints=!1,this.stack=x,this.leftCliff=0,this.rightCliff=0,this.alignOptions={align:c.align||(v?T?"left":"right":"center"),verticalAlign:c.verticalAlign||(v?"middle":T?"bottom":"top"),y:c.y,x:c.x},this.textAlign=c.textAlign||(v?T?"right":"left":"center")}destroy(){IN(this,this.axis)}render(N){let c=this.axis.chart,d=this.options,p=d.format,x=p?SN(p,this,c):d.formatter.call(this);if(this.label)this.label.attr({text:x,visibility:"hidden"});else{this.label=c.renderer.label(x,null,void 0,d.shape,void 0,void 0,d.useHTML,!1,"stack-labels");let v={r:d.borderRadius||0,text:x,padding:jf(d.padding,5),visibility:"hidden"};c.styledMode||(v.fill=d.backgroundColor,v.stroke=d.borderColor,v["stroke-width"]=d.borderWidth,this.label.css(d.style||{})),this.label.attr(v),this.label.added||this.label.add(N)}this.label.labelrank=c.plotSizeY,uk(this,"afterRender")}setOffset(N,c,d,p,x,v){let{alignOptions:w,axis:T,label:A,options:M,textAlign:z}=this,P=T.chart,G=this.getStackBox({xOffset:N,width:c,boxBottom:d,boxTop:p,defaultX:x,xAxis:v}),{verticalAlign:Z}=w;if(A&&G){let st=A.getBBox(void 0,0),rt=A.padding,nt=jf(M.overflow,"justify")==="justify",it;w.x=M.x||0,w.y=M.y||0;let{x:gt,y:_t}=this.adjustStackPosition({labelBox:st,verticalAlign:Z,textAlign:z});G.x-=gt,G.y-=_t,A.align(w,!1,G),(it=P.isInsidePlot(A.alignAttr.x+w.x+gt,A.alignAttr.y+w.y+_t))||(nt=!1),nt&&TN.prototype.justifyDataLabel.call(T,A,w,A.alignAttr,st,G),A.attr({x:A.alignAttr.x,y:A.alignAttr.y,rotation:M.rotation,rotationOriginX:st.width*jx(M.textAlign||"center"),rotationOriginY:st.height/2}),jf(!nt&&M.crop,!0)&&(it=Xx(A.x)&&Xx(A.y)&&P.isInsidePlot(A.x-rt+(A.width||0),A.y)&&P.isInsidePlot(A.x+rt,A.y)),A[it?"show":"hide"]()}uk(this,"afterSetOffset",{xOffset:N,width:c})}adjustStackPosition({labelBox:N,verticalAlign:c,textAlign:d}){return{x:N.width/2+N.width/2*(2*jx(d)-1),y:N.height/2*2*(1-jx(c))}}getStackBox(N){let c=this.axis,d=c.chart,{boxTop:p,defaultX:x,xOffset:v,width:w,boxBottom:T}=N,A=c.stacking.usePercentage?100:jf(p,this.total,0),M=c.toPixels(A),z=N.xAxis||d.xAxis[0],P=jf(x,z.translate(this.x))+v,G=Math.abs(M-c.toPixels(T||Xx(c.min)&&c.logarithmic&&c.logarithmic.lin2log(c.min)||0)),Z=d.inverted,st=this.isNegative;return Z?{x:(st?M:M-G)-d.plotLeft,y:z.height-P-w+z.top-d.plotTop,width:G,height:w}:{x:P+z.transB-d.plotLeft,y:(st?M-G:M)-d.plotTop,width:w,height:G}}},{getDeferredAnimation:EN}=Un,{series:{prototype:_N}}=wi,{addEvent:dk,correctFloat:Xf,defined:fk,destroyObjectProperties:AN,fireEvent:$N,isNumber:qx,objectEach:Ku,pick:Kx}=Ae;function NN(){let N=this.inverted;this.axes.forEach(c=>{c.stacking?.stacks&&c.hasVisibleSeries&&(c.stacking.oldStacks=c.stacking.stacks)}),this.series.forEach(c=>{let d=c.xAxis?.options||{};c.options.stacking&&c.reserveSpace()&&(c.stackKey=[c.type,Kx(c.options.stack,""),N?d.top:d.left,N?d.height:d.width].join(","))})}function DN(){let N=this.stacking;if(N){let c=N.stacks;Ku(c,(d,p)=>{AN(d),delete c[p]}),N.stackTotalGroup?.destroy()}}function RN(){this.stacking||(this.stacking=new BN(this))}function MN(N,c,d,p){return!fk(N)||N.x!==c||p&&N.stackKey!==p?N={x:c,index:0,key:p,stackKey:p}:N.index++,N.key=[d,c,N.index].join(","),N}function ON(){let N,c=this,d=c.yAxis,p=c.stackKey||"",x=d.stacking.stacks,v=c.getColumn("x",!0),w=c.options.stacking,T=c[w+"Stacker"];T&&[p,"-"+p].forEach(A=>{let M=v.length,z,P,G;for(;M--;)z=v[M],N=c.getStackIndicator(N,z,c.index,A),P=x[A]?.[z],(G=P?.points[N.key||""])&&T.call(c,G,P,M)})}function FN(N,c,d){let p=c.total?100/c.total:0;N[0]=Xf(N[0]*p),N[1]=Xf(N[1]*p),this.stackedYData[d]=N[1]}function PN(N){(this.is("column")||this.is("columnrange"))&&(this.options.centerInCategory&&this.chart.series.length>1?_N.setStackedPoints.call(this,N,"group"):N.stacking.resetStacks())}function LN(N,c){let d,p,x,v,w,T,A,M=c||this.options.stacking;if(!M||!this.reserveSpace()||({group:"xAxis"}[M]||"yAxis")!==N.coll)return;let z=this.getColumn("x",!0),P=this.getColumn(this.pointValKey||"y",!0),G=[],Z=P.length,st=this.options,rt=st.threshold||0,nt=st.startFromThreshold?rt:0,it=st.stack,gt=c?`${this.type},${M}`:this.stackKey||"",_t="-"+gt,Wt=this.negStacks,Vt=N.stacking,qt=Vt.stacks,Kt=Vt.oldStacks;for(Vt.stacksTouched+=1,A=0;A<Z;A++){let Zt=z[A]||0,Se=P[A],Ne=qx(Se)&&Se||0;T=(d=this.getStackIndicator(d,Zt,this.index)).key||"",qt[w=(p=Wt&&Ne<(nt?0:rt))?_t:gt]||(qt[w]={}),qt[w][Zt]||(Kt[w]?.[Zt]?(qt[w][Zt]=Kt[w][Zt],qt[w][Zt].total=null):qt[w][Zt]=new hk(N,N.options.stackLabels,!!p,Zt,it)),x=qt[w][Zt],Se!==null?(x.points[T]=x.points[this.index]=[Kx(x.cumulative,nt)],fk(x.cumulative)||(x.base=T),x.touched=Vt.stacksTouched,d.index>0&&this.singleStacks===!1&&(x.points[T][0]=x.points[this.index+","+Zt+",0"][0])):(delete x.points[T],delete x.points[this.index]);let we=x.total||0;M==="percent"?(v=p?gt:_t,we=Wt&&qt[v]?.[Zt]?(v=qt[v][Zt]).total=Math.max(v.total||0,we)+Math.abs(Ne):Xf(we+Math.abs(Ne))):M==="group"?qx(Se)&&we++:we=Xf(we+Ne),M==="group"?x.cumulative=(we||1)-1:x.cumulative=Xf(Kx(x.cumulative,nt)+Ne),x.total=we,Se!==null&&(x.points[T].push(x.cumulative),G[A]=x.cumulative,x.hasValidPoints=!0)}M==="percent"&&(Vt.usePercentage=!0),M!=="group"&&(this.stackedYData=G),Vt.oldStacks={}}class BN{constructor(c){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=c}buildStacks(){let c,d,p=this.axis,x=p.series,v=p.coll==="xAxis",w=p.options.reversedStacks,T=x.length;for(this.resetStacks(),this.usePercentage=!1,d=T;d--;)c=x[w?d:T-d-1],v&&c.setGroupedPoints(p),c.setStackedPoints(p);if(!v)for(d=0;d<T;d++)x[d].modifyStacks();$N(p,"afterBuildStacks")}cleanStacks(){this.oldStacks&&(this.stacks=this.oldStacks,Ku(this.stacks,c=>{Ku(c,d=>{d.cumulative=d.total})}))}resetStacks(){Ku(this.stacks,c=>{Ku(c,(d,p)=>{qx(d.touched)&&d.touched<this.stacksTouched?(d.destroy(),delete c[p]):(d.total=null,d.cumulative=null)})})}renderStackTotals(){let c=this.axis,d=c.chart,p=d.renderer,x=this.stacks,v=EN(d,c.options.stackLabels?.animation||!1),w=this.stackTotalGroup=this.stackTotalGroup||p.g("stack-labels").attr({zIndex:6,opacity:0}).add();w.translate(d.plotLeft,d.plotTop),Ku(x,T=>{Ku(T,A=>{A.render(w)})}),w.animate({opacity:1},v)}}(ct||(ct={})).compose=function(N,c,d){let p=c.prototype,x=d.prototype;p.getStacks||(dk(N,"init",RN),dk(N,"destroy",DN),p.getStacks=NN,x.getStackIndicator=MN,x.modifyStacks=ON,x.percentStacker=FN,x.setGroupedPoints=PN,x.setStackedPoints=LN)};let zN=ct,{defined:WN,merge:pk,isObject:VN}=Ae;class gk extends Po{drawGraph(){let c=this.options,d=(this.gappedPath||this.getGraphPath).call(this),p=this.chart.styledMode;[this,...this.zones].forEach((x,v)=>{let w,T=x.graph,A=T?"animate":"attr",M=x.dashStyle||c.dashStyle;T?(T.endX=this.preventGraphAnimation?null:d.xMap,T.animate({d})):d.length&&(x.graph=T=this.chart.renderer.path(d).addClass("highcharts-graph"+(v?` highcharts-zone-graph-${v-1} `:" ")+(v&&x.className||"")).attr({zIndex:1}).add(this.group)),T&&!p&&(w={stroke:!v&&c.lineColor||x.color||this.color||"#cccccc","stroke-width":c.lineWidth||0,fill:this.fillGraph&&this.color||"none"},M?w.dashstyle=M:c.linecap!=="square"&&(w["stroke-linecap"]=w["stroke-linejoin"]="round"),T[A](w).shadow(c.shadow&&pk({filterUnits:"userSpaceOnUse"},VN(c.shadow)?c.shadow:{}))),T&&(T.startX=d.xMap,T.isArea=d.isArea)})}getGraphPath(c,d,p){let x=this,v=x.options,w=[],T=[],A,M=v.step,z=(c=c||x.points).reversed;return z&&c.reverse(),(M={right:1,center:2}[M]||M&&3)&&z&&(M=4-M),(c=this.getValidPoints(c,!1,v.nullInteraction||!(v.connectNulls&&!d&&!p))).forEach(function(P,G){let Z,st=P.plotX,rt=P.plotY,nt=c[G-1],it=P.isNull||typeof rt!="number";(P.leftCliff||nt?.rightCliff)&&!p&&(A=!0),it&&!WN(d)&&G>0?A=!v.connectNulls:it&&!d?A=!0:(G===0||A?Z=[["M",P.plotX,P.plotY]]:x.getPointSpline?Z=[x.getPointSpline(c,P,G)]:M?(Z=M===1?[["L",nt.plotX,rt]]:M===2?[["L",(nt.plotX+st)/2,nt.plotY],["L",(nt.plotX+st)/2,rt]]:[["L",st,nt.plotY]]).push(["L",st,rt]):Z=[["L",st,rt]],T.push(P.x),M&&(T.push(P.x),M===2&&T.push(P.x)),w.push.apply(w,Z),A=!1)}),w.xMap=T,x.graphPath=w,w}}gk.defaultOptions=pk(Po.defaultOptions,{legendSymbol:"lineMarker"}),wi.registerSeriesType("line",gk);let{seriesTypes:{line:Yx}}=wi,{extend:UN,merge:GN,objectEach:HN,pick:Pg}=Ae;class Zx extends Yx{drawGraph(){this.areaPath=[],super.drawGraph.apply(this);let{areaPath:c,options:d}=this;[this,...this.zones].forEach((p,x)=>{let v={},w=p.fillColor||d.fillColor,T=p.area,A=T?"animate":"attr";T?(T.endX=this.preventGraphAnimation?null:c.xMap,T.animate({d:c})):(v.zIndex=0,(T=p.area=this.chart.renderer.path(c).addClass("highcharts-area"+(x?` highcharts-zone-area-${x-1} `:" ")+(x&&p.className||"")).add(this.group)).isArea=!0),this.chart.styledMode||(v.fill=w||p.color||this.color,v["fill-opacity"]=w?1:d.fillOpacity??.75,T.css({pointerEvents:this.stickyTracking?"none":"auto"})),T[A](v),T.startX=c.xMap,T.shiftUnit=d.step?2:1})}getGraphPath(c){let d,p,x,v=Yx.prototype.getGraphPath,w=this.options,T=w.stacking,A=this.yAxis,M=[],z=[],P=this.index,G=A.stacking.stacks[this.stackKey],Z=w.threshold,st=Math.round(A.getThreshold(w.threshold)),rt=Pg(w.connectNulls,T==="percent"),nt=function(qt,Kt,Zt){let Se=c[qt],Ne=T&&G[Se.x].points[P],we=Se[Zt+"Null"]||0,je=Se[Zt+"Cliff"]||0,Qe,cn,Tn=!0;je||we?(Qe=(we?Ne[0]:Ne[1])+je,cn=Ne[0]+je,Tn=!!we):!T&&c[Kt]&&c[Kt].isNull&&(Qe=cn=Z),Qe!==void 0&&(z.push({plotX:d,plotY:Qe===null?st:A.getThreshold(Qe),isNull:Tn,isCliff:!0}),M.push({plotX:d,plotY:cn===null?st:A.getThreshold(cn),doCurve:!1}))};c=c||this.points,T&&(c=this.getStackPoints(c));for(let qt=0,Kt=c.length;qt<Kt;++qt)T||(c[qt].leftCliff=c[qt].rightCliff=c[qt].leftNull=c[qt].rightNull=void 0),p=c[qt].isNull,d=Pg(c[qt].rectPlotX,c[qt].plotX),x=T?Pg(c[qt].yBottom,st):st,(!p||rt)&&(rt||nt(qt,qt-1,"left"),p&&!T&&rt||(z.push(c[qt]),M.push({x:qt,plotX:d,plotY:x})),rt||nt(qt,qt+1,"right"));let it=v.call(this,z,!0,!0);M.reversed=!0;let gt=v.call(this,M,!0,!0),_t=gt[0];_t&&_t[0]==="M"&&(gt[0]=["L",_t[1],_t[2]]);let Wt=it.concat(gt);Wt.length&&Wt.push(["Z"]);let Vt=v.call(this,z,!1,rt);return this.chart.series.length>1&&T&&z.some(qt=>qt.isCliff)&&(Wt.hasStackedCliffs=Vt.hasStackedCliffs=!0),Wt.xMap=it.xMap,this.areaPath=Wt,Vt}getStackPoints(c){let d=this,p=[],x=[],v=this.xAxis,w=this.yAxis,T=w.stacking.stacks[this.stackKey],A={},M=w.series,z=M.length,P=w.options.reversedStacks?1:-1,G=M.indexOf(d);if(c=c||this.points,this.options.stacking){for(let st=0;st<c.length;st++)c[st].leftNull=c[st].rightNull=void 0,A[c[st].x]=c[st];HN(T,function(st,rt){st.total!==null&&x.push(rt)}),x.sort(function(st,rt){return st-rt});let Z=M.map(st=>st.visible);x.forEach(function(st,rt){let nt=0,it,gt;if(A[st]&&!A[st].isNull)p.push(A[st]),[-1,1].forEach(function(_t){let Wt=_t===1?"rightNull":"leftNull",Vt=T[x[rt+_t]],qt=0;if(Vt){let Kt=G;for(;Kt>=0&&Kt<z;){let Zt=M[Kt].index;!(it=Vt.points[Zt])&&(Zt===d.index?A[st][Wt]=!0:Z[Kt]&&(gt=T[st].points[Zt])&&(qt-=gt[1]-gt[0])),Kt+=P}}A[st][_t===1?"rightCliff":"leftCliff"]=qt});else{let _t=G;for(;_t>=0&&_t<z;){let Wt=M[_t].index;if(it=T[st].points[Wt]){nt=it[1];break}_t+=P}nt=Pg(nt,0),nt=w.translate(nt,0,1,0,1),p.push({isNull:!0,plotX:v.translate(st,0,0,0,1),x:st,plotY:nt,yBottom:nt})}})}return p}}Zx.defaultOptions=GN(Yx.defaultOptions,{threshold:0,legendSymbol:"areaMarker"}),UN(Zx.prototype,{singleStacks:!1}),wi.registerSeriesType("area",Zx);let{line:mk}=wi.seriesTypes,{merge:jN,pick:Lg}=Ae;class Jx extends mk{getPointSpline(c,d,p){let x,v,w,T,A=d.plotX||0,M=d.plotY||0,z=c[p-1],P=c[p+1];function G(st){return st&&!st.isNull&&st.doCurve!==!1&&!d.isCliff}if(G(z)&&G(P)){let st=z.plotX||0,rt=z.plotY||0,nt=P.plotX||0,it=P.plotY||0,gt=0;x=(1.5*A+st)/2.5,v=(1.5*M+rt)/2.5,w=(1.5*A+nt)/2.5,T=(1.5*M+it)/2.5,w!==x&&(gt=(T-v)*(w-A)/(w-x)+M-T),v+=gt,T+=gt,v>rt&&v>M?(v=Math.max(rt,M),T=2*M-v):v<rt&&v<M&&(v=Math.min(rt,M),T=2*M-v),T>it&&T>M?(T=Math.max(it,M),v=2*M-T):T<it&&T<M&&(T=Math.min(it,M),v=2*M-T),d.rightContX=w,d.rightContY=T,d.controlPoints={low:[x,v],high:[w,T]}}let Z=["C",Lg(z.rightContX,z.plotX,0),Lg(z.rightContY,z.plotY,0),Lg(x,A,0),Lg(v,M,0),A,M];return z.rightContX=z.rightContY=void 0,Z}}Jx.defaultOptions=jN(mk.defaultOptions),wi.registerSeriesType("spline",Jx);let xk=Jx,{area:XN,area:{prototype:Qx}}=wi.seriesTypes,{extend:qN,merge:KN}=Ae;class tb extends xk{}tb.defaultOptions=KN(xk.defaultOptions,XN.defaultOptions),qN(tb.prototype,{getGraphPath:Qx.getGraphPath,getStackPoints:Qx.getStackPoints,drawGraph:Qx.drawGraph}),wi.registerSeriesType("areaspline",tb);let{animObject:YN}=Un,{parse:ZN}=In,{noop:JN}=at,{clamp:Bg,crisp:zg,defined:bk,extend:vk,fireEvent:yk,isArray:wk,isNumber:Wg,merge:eb,pick:qf,objectEach:QN}=Ae;class Vg extends Po{animate(c){let d,p,x=this,v=this.yAxis,w=v.pos,T=v.reversed,A=x.options,{clipOffset:M,inverted:z}=this.chart,P={},G=z?"translateX":"translateY";c&&M?(P.scaleY=.001,p=Bg(v.toPixels(A.threshold||0),w,w+v.len),z?P.translateX=(p+=T?-Math.floor(M[0]):Math.ceil(M[2]))-v.len:P.translateY=p+=T?Math.ceil(M[0]):-Math.floor(M[2]),x.clipBox&&x.setClip(),x.group.attr(P)):(d=Number(x.group.attr(G)),x.group.animate({scaleY:1},vk(YN(x.options.animation),{step:function(Z,st){x.group&&(P[G]=d+st.pos*(w-d),x.group.attr(P))}})))}init(c,d){super.init.apply(this,arguments);let p=this;(c=p.chart).hasRendered&&c.series.forEach(function(x){x.type===p.type&&(x.isDirty=!0)})}getColumnMetrics(){let c=this,d=c.options,p=c.xAxis,x=c.yAxis,v=p.options.reversedStacks,w=p.reversed&&!v||!p.reversed&&v,T={},A,M=0;d.grouping===!1?M=1:c.chart.series.forEach(function(rt){let nt,it=rt.yAxis,gt=rt.options;rt.type===c.type&&rt.reserveSpace()&&x.len===it.len&&x.pos===it.pos&&(gt.stacking&&gt.stacking!=="group"?(T[A=rt.stackKey]===void 0&&(T[A]=M++),nt=T[A]):gt.grouping!==!1&&(nt=M++),rt.columnIndex=nt)});let z=Math.min(Math.abs(p.transA)*(!p.brokenAxis?.hasBreaks&&p.ordinal?.slope||d.pointRange||p.closestPointRange||p.tickInterval||1),p.len),P=z*d.groupPadding,G=(z-2*P)/(M||1),Z=Math.min(d.maxPointWidth||p.len,qf(d.pointWidth,G*(1-2*d.pointPadding))),st=(c.columnIndex||0)+ +!!w;return c.columnMetrics={width:Z,offset:(G-Z)/2+(P+st*G-z/2)*(w?-1:1),paddedWidth:G,columnCount:M},c.columnMetrics}crispCol(c,d,p,x){let v=this.borderWidth,w=this.chart.inverted;return x=zg(d+x,v,w)-(d=zg(d,v,w)),this.options.crisp&&(p=zg(c+p,v)-(c=zg(c,v))),{x:c,y:d,width:p,height:x}}adjustForMissingColumns(c,d,p,x){if(!p.isNull&&x.columnCount>1){let v=this.xAxis.series.filter(M=>M.visible).map(M=>M.index),w=0,T=0;QN(this.xAxis.stacking?.stacks,M=>{let z=typeof p.x=="number"?M[p.x.toString()]?.points:void 0,P=z?.[this.index],G={};if(z&&wk(P)){let Z=this.index,st=Object.keys(z).filter(rt=>!rt.match(",")&&z[rt]&&z[rt].length>1).map(parseFloat).filter(rt=>v.indexOf(rt)!==-1).filter(rt=>{let nt=this.chart.series[rt].options,it=nt.stacking&&nt.stack;if(bk(it)){if(Wg(G[it]))return Z===rt&&(Z=G[it]),!1;G[it]=rt}return!0}).sort((rt,nt)=>nt-rt);w=st.indexOf(Z),T=st.length}}),w=this.xAxis.reversed?T-1-w:w;let A=(T-1)*x.paddedWidth+d;c=(p.plotX||0)+A/2-d-w*x.paddedWidth}return c}translate(){let c=this,d=c.chart,p=c.options,x=c.dense=c.closestPointRange*c.xAxis.transA<2,v=c.borderWidth=qf(p.borderWidth,+!x),w=c.xAxis,T=c.yAxis,A=p.threshold,M=qf(p.minPointLength,5),z=c.getColumnMetrics(),P=z.width,G=c.pointXOffset=z.offset,Z=c.dataMin,st=c.dataMax,rt=c.translatedThreshold=T.getThreshold(A),nt=c.barW=Math.max(P,1+2*v);p.pointPadding&&p.crisp&&(nt=Math.ceil(nt)),Po.prototype.translate.apply(c),c.points.forEach(function(it){let gt=qf(it.yBottom,rt),_t=999+Math.abs(gt),Wt=it.plotX||0,Vt=Bg(it.plotY,-_t,T.len+_t),qt,Kt=Math.min(Vt,gt),Zt=Math.max(Vt,gt)-Kt,Se=P,Ne=Wt+G,we=nt;M&&Math.abs(Zt)<M&&(Zt=M,qt=!T.reversed&&!it.negative||T.reversed&&it.negative,Wg(A)&&Wg(st)&&it.y===A&&st<=A&&(T.min||0)<A&&(Z!==st||(T.max||0)<=A)&&(qt=!qt,it.negative=!it.negative),Kt=Math.abs(Kt-rt)>M?gt-M:rt-(qt?M:0)),bk(it.options.pointWidth)&&(Ne-=Math.round(((Se=we=Math.ceil(it.options.pointWidth))-P)/2)),p.centerInCategory&&(Ne=c.adjustForMissingColumns(Ne,Se,it,z)),it.barX=Ne,it.pointWidth=Se,it.tooltipPos=d.inverted?[Bg(T.len+T.pos-d.plotLeft-Vt,T.pos-d.plotLeft,T.len+T.pos-d.plotLeft),w.len+w.pos-d.plotTop-Ne-we/2,Zt]:[w.left-d.plotLeft+Ne+we/2,Bg(Vt+T.pos-d.plotTop,T.pos-d.plotTop,T.len+T.pos-d.plotTop),Zt],it.shapeType=c.pointClass.prototype.shapeType||"roundedRect",it.shapeArgs=c.crispCol(Ne,Kt,we,it.isNull?0:Zt)}),yk(this,"afterColumnTranslate")}drawGraph(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")}pointAttribs(c,d){let p=this.options,x=this.pointAttrToOptions||{},v=x.stroke||"borderColor",w=x["stroke-width"]||"borderWidth",T,A,M,z=c&&c.color||this.color,P=c&&c[v]||p[v]||z,G=c&&c.options.dashStyle||p.dashStyle,Z=c&&c[w]||p[w]||this[w]||0,st=c?.isNull&&p.nullInteraction?0:c?.opacity??p.opacity??1;c&&this.zones.length&&(A=c.getZone(),z=c.options.color||A&&(A.color||c.nonZonedColor)||this.color,A&&(P=A.borderColor||P,G=A.dashStyle||G,Z=A.borderWidth||Z)),d&&c&&(M=(T=eb(p.states[d],c.options.states?.[d]||{})).brightness,z=T.color||M!==void 0&&ZN(z).brighten(T.brightness).get()||z,P=T[v]||P,Z=T[w]||Z,G=T.dashStyle||G,st=qf(T.opacity,st));let rt={fill:z,stroke:P,"stroke-width":Z,opacity:st};return G&&(rt.dashstyle=G),rt}drawPoints(c=this.points){let d,p=this,x=this.chart,v=p.options,w=v.nullInteraction,T=x.renderer,A=v.animationLimit||250;c.forEach(function(M){let z=M.plotY,P=M.graphic,G=!!P,Z=P&&x.pointCount<A?"animate":"attr";Wg(z)&&(M.y!==null||w)?(d=M.shapeArgs,P&&M.hasNewShapeType()&&(P=P.destroy()),p.enabledDataSorting&&(M.startXPos=p.xAxis.reversed?-(d&&d.width||0):p.xAxis.width),!P&&(M.graphic=P=T[M.shapeType](d).add(M.group||p.group),P&&p.enabledDataSorting&&x.hasRendered&&x.pointCount<A&&(P.attr({x:M.startXPos}),G=!0,Z="animate")),P&&G&&P[Z](eb(d)),x.styledMode||P[Z](p.pointAttribs(M,M.selected&&"select")).shadow(M.allowShadow!==!1&&v.shadow),P&&(P.addClass(M.getClassName(),!0),P.attr({visibility:M.visible?"inherit":"hidden"}))):P&&(M.graphic=P.destroy())})}drawTracker(c=this.points){let d,p=this,x=p.chart,v=x.pointer,w=function(T){v?.normalize(T);let A=v?.getPointFromEvent(T);v&&A&&p.options.enableMouseTracking&&(x.isInsidePlot(T.chartX-x.plotLeft,T.chartY-x.plotTop,{visiblePlotOnly:!0})||v?.inClass(T.target,"highcharts-data-label"))&&(v.isDirectTouch=!0,A.onMouseOver(T))};c.forEach(function(T){d=wk(T.dataLabels)?T.dataLabels:T.dataLabel?[T.dataLabel]:[],T.graphic&&(T.graphic.element.point=T),d.forEach(function(A){(A.div||A.element).point=T})}),p._hasTracking||(p.trackerGroups?.reduce((T,A)=>(A==="dataLabelsGroup"?T.push(...p.dataLabelsGroups||[]):T.push(p[A]),T),[]).forEach(T=>{T&&(T.addClass("highcharts-tracker").on("mouseover",w).on("mouseout",function(A){v?.onTrackerMouseOut(A)}).on("touchstart",w),!x.styledMode&&p.options.cursor&&T.css({cursor:p.options.cursor}))}),p._hasTracking=!0),yk(this,"afterDrawTracker")}remove(){let c=this,d=c.chart;d.hasRendered&&d.series.forEach(function(p){p.type===c.type&&(p.isDirty=!0)}),Po.prototype.remove.apply(c,arguments)}}Vg.defaultOptions=eb(Po.defaultOptions,{borderRadius:3,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"}),vk(Vg.prototype,{directTouch:!0,getSymbol:JN,negStacks:!0,trackerGroups:["group","dataLabelsGroup"]}),wi.registerSeriesType("column",Vg);let Ug=Vg,{getDeferredAnimation:t8}=Un,{format:e8}=dr,{defined:Yu,extend:kk,fireEvent:Gg,getAlignFactor:Ck,isArray:Pc,isString:Kf,merge:Yf,objectEach:n8,pick:Zf,pInt:s8,splat:Sk}=Ae;(function(N){function c(){return A(this).some(z=>z?.enabled)}function d(z,P,G,Z,st){let{chart:rt,enabledDataSorting:nt}=this,it=this.isCartesian&&rt.inverted,gt=z.plotX,_t=z.plotY,Wt=G.rotation||0,Vt=Yu(gt)&&Yu(_t)&&rt.isInsidePlot(gt,Math.round(_t),{inverted:it,paneCoordinates:!0,series:this}),qt=Wt===0&&Zf(G.overflow,nt?"none":"justify")==="justify",Kt=this.visible&&z.visible!==!1&&Yu(gt)&&(z.series.forceDL||nt&&!qt||Vt||Zf(G.inside,!!this.options.stacking)&&Z&&rt.isInsidePlot(gt,it?Z.x+1:Z.y+Z.height-1,{inverted:it,paneCoordinates:!0,series:this})),Zt=z.pos();if(Kt&&Zt){var Se;let Ne=P.getBBox(),we=P.getBBox(void 0,0);if(Z=kk({x:Zt[0],y:Math.round(Zt[1]),width:0,height:0},Z||{}),G.alignTo==="plotEdges"&&this.isCartesian&&(Z[it?"x":"y"]=0,Z[it?"width":"height"]=this.yAxis?.len||0),kk(G,{width:Ne.width,height:Ne.height}),Se=Z,nt&&this.xAxis&&!qt&&this.setDataLabelStartPos(z,P,st,Vt,Se),P.align(Yf(G,{width:we.width,height:we.height}),!1,Z,!1),P.alignAttr.x+=Ck(G.align)*(we.width-Ne.width),P.alignAttr.y+=Ck(G.verticalAlign)*(we.height-Ne.height),P[P.placed?"animate":"attr"]({"text-align":P.alignAttr["text-align"]||"center",x:P.alignAttr.x+(Ne.width-we.width)/2,y:P.alignAttr.y+(Ne.height-we.height)/2,rotationOriginX:(P.width||0)/2,rotationOriginY:(P.height||0)/2}),qt&&Z.height>=0)this.justifyDataLabel(P,G,P.alignAttr,Ne,Z,st);else if(Zf(G.crop,!0)){let{x:je,y:Qe}=P.alignAttr;Kt=rt.isInsidePlot(je,Qe,{paneCoordinates:!0,series:this})&&rt.isInsidePlot(je+Ne.width-1,Qe+Ne.height-1,{paneCoordinates:!0,series:this})}G.shape&&!Wt&&P[st?"attr":"animate"]({anchorX:Zt[0],anchorY:Zt[1]})}st&&nt&&(P.placed=!1),Kt||nt&&!qt?(P.show(),P.placed=!0):(P.hide(),P.placed=!1)}function p(z,P){Gg(this,"initDataLabelsGroup",{index:z,zIndex:P?.zIndex??6}),this.dataLabelsGroup=this.dataLabelsGroups?.[z];let G=this.plotGroup("dataLabelsGroup","data-labels",this.hasRendered?"inherit":"hidden",P?.zIndex??6,this.dataLabelsParentGroups?.[z]);return this.dataLabelsGroups||(this.dataLabelsGroups=[]),this.dataLabelsGroups[z]=G,this.dataLabelsGroup=this.dataLabelsGroups[0],G}function x(z,P,G){let Z=!!this.hasRendered,st=this.initDataLabelsGroup(z,G).attr({opacity:+Z});return!Z&&st&&(this.visible&&st.show(),this.options.animation?st.animate({opacity:1},P):st.attr({opacity:1})),st}function v(z){let P;z=z||this.points;let G=this,Z=G.chart,st=G.options,rt=Z.renderer,{backgroundColor:nt,plotBackgroundColor:it}=Z.options.chart,gt=rt.getContrast(Kf(it)&&it||Kf(nt)&&nt||"#000000"),_t=A(G),{animation:Wt,defer:Vt}=_t[0],qt=Vt?t8(Z,Wt,G):{defer:0,duration:0};Gg(this,"drawDataLabels"),G.hasDataLabels?.()&&z.forEach(Kt=>{let Zt=Kt.dataLabels||[],Se=Kt.color||G.color;Sk(T(_t,Kt.dlOptions||Kt.options?.dataLabels)).forEach((we,je)=>{P=this.initDataLabels(je,qt,we);let Qe=we.enabled&&(Kt.visible||Kt.dataLabelOnHidden)&&(!Kt.isNull||Kt.dataLabelOnNull)&&(function(Gs,Si){let Hs=Si.filter;if(Hs){let ki=Hs.operator,Zr=Gs[Hs.property],Jr=Hs.value;return ki===">"&&Zr>Jr||ki==="<"&&Zr<Jr||ki===">="&&Zr>=Jr||ki==="<="&&Zr<=Jr||ki==="=="&&Zr==Jr||ki==="==="&&Zr===Jr||ki==="!="&&Zr!=Jr||ki==="!=="&&Zr!==Jr||!1}return!0})(Kt,we),{backgroundColor:cn,borderColor:Tn,distance:yn,style:mn={}}=we,Qs,Us,Yr,Wn={},Gn=Zt[je],Is=!Gn,Qn;Qe&&(Us=Yu(Qs=Zf(we[Kt.formatPrefix+"Format"],we.format))?e8(Qs,Kt,Z):(we[Kt.formatPrefix+"Formatter"]||we.formatter).call(Kt,we),Yr=we.rotation,!Z.styledMode&&(mn.color=Zf(we.color,mn.color,Kf(G.color)?G.color:void 0,"#000000"),mn.color==="contrast"?(cn!=="none"&&(Qn=cn),Kt.contrastColor=rt.getContrast(Qn!=="auto"&&Kf(Qn)&&Qn||(Kf(Se)?Se:"")),mn.color=Qn||!Yu(yn)&&we.inside||0>s8(yn||0)||st.stacking?Kt.contrastColor:gt):delete Kt.contrastColor,st.cursor&&(mn.cursor=st.cursor)),Wn={r:we.borderRadius||0,rotation:Yr,padding:we.padding,zIndex:1},Z.styledMode||(Wn.fill=cn==="auto"?Kt.color:cn,Wn.stroke=Tn==="auto"?Kt.color:Tn,Wn["stroke-width"]=we.borderWidth),n8(Wn,(Gs,Si)=>{Gs===void 0&&delete Wn[Si]})),!Gn||Qe&&Yu(Us)&&!!(Gn.div||Gn.text?.foreignObject)==!!we.useHTML&&(Gn.rotation&&we.rotation||Gn.rotation===we.rotation)||(Gn=void 0,Is=!0),Qe&&Yu(Us)&&Us!==""&&(Gn?Wn.text=Us:(Gn=rt.label(Us,0,0,we.shape,void 0,void 0,we.useHTML,void 0,"data-label")).addClass(" highcharts-data-label-color-"+Kt.colorIndex+" "+(we.className||"")+(we.useHTML?" highcharts-tracker":"")),Gn&&(Gn.options=we,Gn.attr(Wn),Z.styledMode?mn.width&&Gn.css({width:mn.width,textOverflow:mn.textOverflow,whiteSpace:mn.whiteSpace}):Gn.css(mn).shadow(we.shadow),Gg(Gn,"beforeAddingDataLabel",{labelOptions:we,point:Kt}),Gn.added||Gn.add(P),G.alignDataLabel(Kt,Gn,we,void 0,Is),Gn.isActive=!0,Zt[je]&&Zt[je]!==Gn&&Zt[je].destroy(),Zt[je]=Gn))});let Ne=Zt.length;for(;Ne--;)Zt[Ne]?.isActive?Zt[Ne].isActive=!1:(Zt[Ne]?.destroy(),Zt.splice(Ne,1));Kt.dataLabel=Zt[0],Kt.dataLabels=Zt}),Gg(this,"afterDrawDataLabels")}function w(z,P,G,Z,st,rt){let nt=this.chart,it=P.align,gt=P.verticalAlign,_t=z.box?0:z.padding||0,Wt=nt.inverted?this.yAxis:this.xAxis,Vt=Wt?Wt.left-nt.plotLeft:0,qt=nt.inverted?this.xAxis:this.yAxis,Kt=qt?qt.top-nt.plotTop:0,{x:Zt=0,y:Se=0}=P,Ne,we;return(Ne=(G.x||0)+_t+Vt)<0&&(it==="right"&&Zt>=0?(P.align="left",P.inside=!0):Zt-=Ne,we=!0),(Ne=(G.x||0)+Z.width-_t+Vt)>nt.plotWidth&&(it==="left"&&Zt<=0?(P.align="right",P.inside=!0):Zt+=nt.plotWidth-Ne,we=!0),(Ne=G.y+_t+Kt)<0&&(gt==="bottom"&&Se>=0?(P.verticalAlign="top",P.inside=!0):Se-=Ne,we=!0),(Ne=(G.y||0)+Z.height-_t+Kt)>nt.plotHeight&&(gt==="top"&&Se<=0?(P.verticalAlign="bottom",P.inside=!0):Se+=nt.plotHeight-Ne,we=!0),we&&(P.x=Zt,P.y=Se,z.placed=!rt,z.align(P,void 0,st)),we}function T(z,P){let G=[],Z;if(Pc(z)&&!Pc(P))G=z.map(function(st){return Yf(st,P)});else if(Pc(P)&&!Pc(z))G=P.map(function(st){return Yf(z,st)});else if(Pc(z)||Pc(P)){if(Pc(z)&&Pc(P))for(Z=Math.max(z.length,P.length);Z--;)G[Z]=Yf(z[Z],P[Z])}else G=Yf(z,P);return G}function A(z){let P=z.chart.options.plotOptions;return Sk(T(T(P?.series?.dataLabels,P?.[z.type]?.dataLabels),z.options.dataLabels))}function M(z,P,G,Z,st){let rt=this.chart,nt=rt.inverted,it=this.xAxis,gt=it.reversed,_t=((nt?P.height:P.width)||0)/2,Wt=z.pointWidth,Vt=Wt?Wt/2:0;P.startXPos=nt?st.x:gt?-_t-Vt:it.width-_t+Vt,P.startYPos=nt?gt?this.yAxis.height-_t+Vt:-_t-Vt:st.y,Z?P.visibility==="hidden"&&(P.show(),P.attr({opacity:0}).animate({opacity:1})):P.attr({opacity:1}).animate({opacity:0},void 0,P.hide),rt.hasRendered&&(G&&P.attr({x:P.startXPos,y:P.startYPos}),P.placed=!0)}N.compose=function(z){let P=z.prototype;P.initDataLabels||(P.initDataLabels=x,P.initDataLabelsGroup=p,P.alignDataLabel=d,P.drawDataLabels=v,P.justifyDataLabel=w,P.mergeArrays=T,P.setDataLabelStartPos=M,P.hasDataLabels=c)}})(j||(j={}));let Hg=j,{composed:i8}=at,{series:Tk}=wi,{merge:r8,pushUnique:o8}=Ae;function a8(N,c,d,p,x){let{chart:v,options:w}=this,T=v.inverted,A=this.xAxis?.len||v.plotSizeX||0,M=this.yAxis?.len||v.plotSizeY||0,z=N.dlBox||N.shapeArgs,P=N.below??(N.plotY||0)>(this.translatedThreshold??M),G=d.inside??!!w.stacking;if(z){if(p=r8(z),d.overflow!=="allow"||d.crop!==!1||w.clip!==!1){p.y<0&&(p.height+=p.y,p.y=0);let Z=p.y+p.height-M;Z>0&&Z<p.height-1&&(p.height-=Z)}T&&(p={x:M-p.y-p.height,y:A-p.x-p.width,width:p.height,height:p.width}),G||(T?(p.x+=P?0:p.width,p.width=0):(p.y+=P?p.height:0,p.height=0))}d.align??(d.align=!T||G?"center":P?"right":"left"),d.verticalAlign??(d.verticalAlign=T||G?"middle":P?"top":"bottom"),Tk.prototype.alignDataLabel.call(this,N,c,d,p,x),d.inside&&N.contrastColor&&c.css({color:N.contrastColor})}(ht||(ht={})).compose=function(N){Hg.compose(Tk),o8(i8,"ColumnDataLabel")&&(N.prototype.alignDataLabel=a8)};let l8=ht,{extend:c8,merge:u8}=Ae;class nb extends Ug{}nb.defaultOptions=u8(Ug.defaultOptions,{}),c8(nb.prototype,{inverted:!0}),wi.registerSeriesType("bar",nb);let{column:h8,line:Ik}=wi.seriesTypes,{addEvent:d8,extend:f8,merge:p8}=Ae;class jg extends Ik{applyJitter(){let c=this,d=this.options.jitter,p=this.points.length;d&&this.points.forEach(function(x,v){["x","y"].forEach(function(w,T){if(d[w]&&!x.isNull){let A=`plot${w.toUpperCase()}`,M=c[`${w}Axis`],z=d[w]*M.transA;if(M&&!M.logarithmic){let P,G=Math.max(0,(x[A]||0)-z),Z=Math.min(M.len,(x[A]||0)+z);x[A]=G+(Z-G)*((P=1e4*Math.sin(v+T*p))-Math.floor(P)),w==="x"&&(x.clientX=x.plotX)}}})})}drawGraph(){this.options.lineWidth?super.drawGraph():this.graph&&(this.graph=this.graph.destroy())}}jg.defaultOptions=p8(Ik.defaultOptions,{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">●</span> <span style="font-size: 0.8em"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}),f8(jg.prototype,{drawTracker:h8.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"]}),d8(jg,"afterTranslate",function(){this.applyJitter()}),wi.registerSeriesType("scatter",jg);let{deg2rad:Ek}=at,{fireEvent:g8,isNumber:sb,pick:Xg,relativeLength:m8}=Ae;(k=It||(It={})).getCenter=function(){let N=this.options,c=this.chart,d=2*(N.slicedOffset||0),p=c.plotWidth-2*d,x=c.plotHeight-2*d,v=N.center,w=Math.min(p,x),T=N.thickness,A,M=N.size,z=N.innerSize||0,P,G;typeof M=="string"&&(M=parseFloat(M)),typeof z=="string"&&(z=parseFloat(z));let Z=[Xg(v?.[0],"50%"),Xg(v?.[1],"50%"),Xg(M&&M<0?void 0:N.size,"100%"),Xg(z&&z<0?void 0:N.innerSize||0,"0%")];for(!c.angular||this instanceof Po||(Z[3]=0),P=0;P<4;++P)G=Z[P],A=P<2||P===2&&/%$/.test(G),Z[P]=m8(G,[p,x,w,Z[2]][P])+(A?d:0);return Z[3]>Z[2]&&(Z[3]=Z[2]),sb(T)&&2*T<Z[2]&&T>0&&(Z[3]=Z[2]-2*T),g8(this,"afterGetCenter",{positions:Z}),Z},k.getStartAndEndRadians=function(N,c){let d=sb(N)?N:0,p=sb(c)&&c>d&&c-d<360?c:d+360;return{start:Ek*(d+-90),end:Ek*(p+-90)}};let _k=It,{setAnimation:x8}=Un,{addEvent:Ak,defined:b8,extend:v8,isNumber:y8,pick:w8,relativeLength:k8}=Ae;class $k extends Dr{getConnectorPath(c){let d=c.dataLabelPosition,p=c.options||{},x=p.connectorShape,v=this.connectorShapes[x]||x;return d&&v.call(this,{...d.computed,alignment:d.alignment},d.connectorPosition,p)||[]}getTranslate(){return this.sliced&&this.slicedTranslation||{translateX:0,translateY:0}}haloPath(c){let d=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(d.x,d.y,d.r+c,d.r+c,{innerR:d.r-1,start:d.start,end:d.end,borderRadius:d.borderRadius})}constructor(c,d,p){super(c,d,p),this.half=0,this.name??(this.name=c.chart.options.lang.pieSliceName);const x=v=>{this.slice(v.type==="select")};Ak(this,"select",x),Ak(this,"unselect",x)}isValid(){return y8(this.y)&&this.y>=0}setVisible(c,d=!0){c!==this.visible&&this.update({visible:c??!this.visible},d,void 0,!1)}slice(c,d,p){let x=this.series;x8(p,x.chart),d=w8(d,!0),this.sliced=this.options.sliced=c=b8(c)?c:!this.sliced,x.options.data[x.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate())}}v8($k.prototype,{connectorShapes:{fixedOffset:function(N,c,d){let p=c.breakAt,x=c.touchingSliceAt,v=d.softConnector?["C",N.x+(N.alignment==="left"?-5:5),N.y,2*p.x-x.x,2*p.y-x.y,p.x,p.y]:["L",p.x,p.y];return[["M",N.x,N.y],v,["L",x.x,x.y]]},straight:function(N,c){let d=c.touchingSliceAt;return[["M",N.x,N.y],["L",d.x,d.y]]},crookedLine:function(N,c,d){let{angle:p=this.angle||0,breakAt:x,touchingSliceAt:v}=c,{series:w}=this,[T,A,M]=w.center,z=M/2,{plotLeft:P,plotWidth:G}=w.chart,Z=N.alignment==="left",{x:st,y:rt}=N,nt=x.x;if(d.crookDistance){let gt=k8(d.crookDistance,1);nt=Z?T+z+(G+P-T-z)*(1-gt):P+(T-z)*gt}else nt=T+(A-rt)*Math.tan(p-Math.PI/2);let it=[["M",st,rt]];return(Z?nt<=st&&nt>=x.x:nt>=st&&nt<=x.x)&&it.push(["L",nt,rt]),it.push(["L",x.x,x.y],["L",v.x,v.y]),it}}});let{getStartAndEndRadians:C8}=_k,{noop:Nk}=at,{clamp:S8,extend:T8,fireEvent:Dk,merge:ib,pick:I8}=Ae;class rb extends Po{animate(c){let d=this,p=d.points,x=d.startAngleRad;c||p.forEach(function(v){let w=v.graphic,T=v.shapeArgs;w&&T&&(w.attr({r:I8(v.startR,d.center&&d.center[3]/2),start:x,end:x}),w.animate({r:T.r,start:T.start,end:T.end},d.options.animation))})}drawEmpty(){let c,d,p=this.startAngleRad,x=this.endAngleRad,v=this.options;this.total===0&&this.center?(c=this.center[0],d=this.center[1],this.graph||(this.graph=this.chart.renderer.arc(c,d,this.center[1]/2,0,p,x).addClass("highcharts-empty-series").add(this.group)),this.graph.attr({d:wc.arc(c,d,this.center[2]/2,0,{start:p,end:x,innerR:this.center[3]/2})}),this.chart.styledMode||this.graph.attr({"stroke-width":v.borderWidth,fill:v.fillColor||"none",stroke:v.color||"#cccccc"})):this.graph&&(this.graph=this.graph.destroy())}drawPoints(){let c=this.chart.renderer;this.points.forEach(function(d){d.graphic&&d.hasNewShapeType()&&(d.graphic=d.graphic.destroy()),d.graphic||(d.graphic=c[d.shapeType](d.shapeArgs).add(d.series.group),d.delayedRendering=!0)})}generatePoints(){super.generatePoints(),this.updateTotals()}getX(c,d,p,x){let v=this.center,w=this.radii?this.radii[p.index]||0:v[2]/2,T=x.dataLabelPosition,A=T?.distance||0,M=Math.asin(S8((c-v[1])/(w+A),-1,1));return v[0]+Math.cos(M)*(w+A)*(d?-1:1)+(A>0?(d?-1:1)*(x.padding||0):0)}hasData(){return this.points.some(c=>c.visible)}redrawPoints(){let c,d,p,x,v=this,w=v.chart;this.drawEmpty(),v.group&&!w.styledMode&&v.group.shadow(v.options.shadow),v.points.forEach(function(T){let A={};d=T.graphic,!T.isNull&&d?(x=T.shapeArgs,c=T.getTranslate(),w.styledMode||(p=v.pointAttribs(T,T.selected&&"select")),T.delayedRendering?(d.setRadialReference(v.center).attr(x).attr(c),w.styledMode||d.attr(p).attr({"stroke-linejoin":"round"}),T.delayedRendering=!1):(d.setRadialReference(v.center),w.styledMode||ib(!0,A,p),ib(!0,A,x,c),d.animate(A)),d.attr({visibility:T.visible?"inherit":"hidden"}),d.addClass(T.getClassName(),!0)):d&&(T.graphic=d.destroy())})}sortByAngle(c,d){c.sort(function(p,x){return p.angle!==void 0&&(x.angle-p.angle)*d})}translate(c){Dk(this,"translate"),this.generatePoints();let d=this.options,p=d.slicedOffset,x=C8(d.startAngle,d.endAngle),v=this.startAngleRad=x.start,w=(this.endAngleRad=x.end)-v,T=this.points,A=d.ignoreHiddenPoint,M=T.length,z,P,G,Z,st,rt,nt,it=0;for(c||(this.center=c=this.getCenter()),rt=0;rt<M;rt++){nt=T[rt],z=v+it*w,nt.isValid()&&(!A||nt.visible)&&(it+=nt.percentage/100),P=v+it*w;let gt={x:c[0],y:c[1],r:c[2]/2,innerR:c[3]/2,start:Math.round(1e3*z)/1e3,end:Math.round(1e3*P)/1e3};nt.shapeType="arc",nt.shapeArgs=gt,(G=(P+z)/2)>1.5*Math.PI?G-=2*Math.PI:G<-Math.PI/2&&(G+=2*Math.PI),nt.slicedTranslation={translateX:Math.round(Math.cos(G)*p),translateY:Math.round(Math.sin(G)*p)},Z=Math.cos(G)*c[2]/2,st=Math.sin(G)*c[2]/2,nt.tooltipPos=[c[0]+.7*Z,c[1]+.7*st],nt.half=+(G<-Math.PI/2||G>Math.PI/2),nt.angle=G}Dk(this,"afterTranslate")}updateTotals(){let c=this.points,d=c.length,p=this.options.ignoreHiddenPoint,x,v,w=0;for(x=0;x<d;x++)(v=c[x]).isValid()&&(!p||v.visible)&&(w+=v.y);for(x=0,this.total=w;x<d;x++)(v=c[x]).percentage=w>0&&(v.visible||!p)?v.y/w*100:0,v.total=w}}rb.defaultOptions=ib(Po.defaultOptions,{borderRadius:3,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{connectorPadding:5,connectorShape:"crookedLine",crookDistance:void 0,distance:30,enabled:!0,formatter:function(){return this.isNull?void 0:this.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}}),T8(rb.prototype,{axisTypes:[],directTouch:!0,drawGraph:void 0,drawTracker:Ug.prototype.drawTracker,getCenter:_k.getCenter,getSymbol:Nk,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointAttribs:Ug.prototype.pointAttribs,pointClass:$k,requireSorting:!1,searchPoint:Nk,trackerGroups:["group","dataLabelsGroup"]}),wi.registerSeriesType("pie",rb);let{composed:E8,noop:_8}=at,{distribute:A8}=lo,{series:Rk}=wi,{arrayMax:$8,clamp:Mk,defined:Ok,isNumber:N8,pick:D8,pushUnique:R8,relativeLength:Fk}=Ae;(function(N){let c={radialDistributionY:function(w,T){return(T.dataLabelPosition?.top||0)+w.distributeBox.pos},radialDistributionX:function(w,T,A,M,z){let P=z.dataLabelPosition;return w.getX(A<(P?.top||0)+2||A>(P?.bottom||0)-2?M:A,T.half,T,z)},justify:function(w,T,A,M){return M[0]+(w.half?-1:1)*(A+(T.dataLabelPosition?.distance||0))},alignToPlotEdges:function(w,T,A,M){let z=w.getBBox().width;return T?z+M:A-z-M},alignToConnectors:function(w,T,A,M){let z=0,P;return w.forEach(function(G){(P=G.dataLabel.getBBox().width)>z&&(z=P)}),T?z+M:A-z-M}};function d(w,T){let A=Math.PI/2,{start:M=0,end:z=0}=w.shapeArgs||{},P=w.angle||0;T>0&&M<A&&z>A&&P>A/2&&P<1.5*A&&(P=P<=A?Math.max(A/2,(M+A)/2):Math.min(1.5*A,(A+z)/2));let{center:G,options:Z}=this,st=G[2]/2,rt=Math.cos(P),nt=Math.sin(P),it=G[0]+rt*st,gt=G[1]+nt*st,_t=Math.min((Z.slicedOffset||0)+(Z.borderWidth||0),T/5);return{natural:{x:it+rt*T,y:gt+nt*T},computed:{},alignment:T<0?"center":w.half?"right":"left",connectorPosition:{angle:P,breakAt:{x:it+rt*_t,y:gt+nt*_t},touchingSliceAt:{x:it,y:gt}},distance:T}}function p(){let w=this,T=w.points,A=w.chart,M=A.plotWidth,z=A.plotHeight,P=A.plotLeft,G=Math.round(A.chartWidth/3),Z=w.center,st=Z[2]/2,rt=Z[1],nt=[[],[]],it=[0,0,0,0],gt=w.dataLabelPositioners,_t,Wt,Vt,qt=0;w.visible&&w.hasDataLabels?.()&&(T.forEach(Kt=>{(Kt.dataLabels||[]).forEach(Zt=>{Zt.shortened&&(Zt.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),Zt.shortened=!1)})}),Rk.prototype.drawDataLabels.apply(w),T.forEach(Kt=>{(Kt.dataLabels||[]).forEach((Zt,Se)=>{let Ne=Z[2]/2,we=Zt.options,je=Fk(we?.distance||0,Ne);Se===0&&nt[Kt.half].push(Kt),!Ok(we?.style?.width)&&Zt.getBBox().width>G&&(Zt.css({width:Math.round(.7*G)+"px"}),Zt.shortened=!0),Zt.dataLabelPosition=this.getDataLabelPosition(Kt,je),qt=Math.max(qt,je)})}),nt.forEach((Kt,Zt)=>{let Se=Kt.length,Ne=[],we,je,Qe=0,cn;Se&&(w.sortByAngle(Kt,Zt-.5),qt>0&&(we=Math.max(0,rt-st-qt),je=Math.min(rt+st+qt,A.plotHeight),Kt.forEach(Tn=>{(Tn.dataLabels||[]).forEach(yn=>{let mn=yn.dataLabelPosition;mn&&mn.distance>0&&(mn.top=Math.max(0,rt-st-mn.distance),mn.bottom=Math.min(rt+st+mn.distance,A.plotHeight),Qe=yn.getBBox().height||21,yn.lineHeight=A.renderer.fontMetrics(yn.text||yn).h+2*yn.padding,Tn.distributeBox={target:(yn.dataLabelPosition?.natural.y||0)-mn.top+yn.lineHeight/2,size:Qe,rank:Tn.y},Ne.push(Tn.distributeBox))})}),A8(Ne,cn=je+Qe-we,cn/5)),Kt.forEach(Tn=>{(Tn.dataLabels||[]).forEach(yn=>{let mn=yn.options||{},Qs=Tn.distributeBox,Us=yn.dataLabelPosition,Yr=Us?.natural.y||0,Wn=mn.connectorPadding||0,Gn=yn.lineHeight||21,Is=(Gn-yn.getBBox().height)/2,Qn=0,Gs=Yr,Si="inherit";if(Us){if(Ne&&Ok(Qs)&&Us.distance>0&&(Qs.pos===void 0?Si="hidden":(Vt=Qs.size,Gs=gt.radialDistributionY(Tn,yn))),mn.justify)Qn=gt.justify(Tn,yn,st,Z);else switch(mn.alignTo){case"connectors":Qn=gt.alignToConnectors(Kt,Zt,M,P);break;case"plotEdges":Qn=gt.alignToPlotEdges(yn,Zt,M,P);break;default:Qn=gt.radialDistributionX(w,Tn,Gs-Is,Yr,yn)}if(Us.attribs={visibility:Si,align:Us.alignment},Us.posAttribs={x:Qn+(mn.x||0)+({left:Wn,right:-Wn}[Us.alignment]||0),y:Gs+(mn.y||0)-Gn/2},Us.computed.x=Qn,Us.computed.y=Gs-Is,D8(mn.crop,!0)){let Hs;Qn-(Wt=yn.getBBox().width)<Wn&&Zt===1?(Hs=Math.round(Wt-Qn+Wn),it[3]=Math.max(Hs,it[3])):Qn+Wt>M-Wn&&Zt===0&&(Hs=Math.round(Qn+Wt-M+Wn),it[1]=Math.max(Hs,it[1])),Gs-Vt/2<0?it[0]=Math.max(Math.round(-Gs+Vt/2),it[0]):Gs+Vt/2>z&&(it[2]=Math.max(Math.round(Gs+Vt/2-z),it[2])),Us.sideOverflow=Hs}}})}))}),($8(it)===0||this.verifyDataLabelOverflow(it))&&(this.placeDataLabels(),this.points.forEach(Kt=>{Kt.dataLabels?.forEach((Zt,Se)=>{let{connectorColor:Ne,connectorWidth:we=1}=Zt.options||{},je=Zt.dataLabelPosition;if(N8(we)){let Qe;_t=Zt.connector,je&&je.distance>0?(Qe=!_t,_t||(Zt.connector=_t=A.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+Kt.colorIndex+(Kt.className?" "+Kt.className:"")).add(w.dataLabelsGroups?.[Se])),A.styledMode||_t.attr({"stroke-width":we,stroke:Ne||Kt.color||"#666666"}),_t[Qe?"attr":"animate"]({d:Kt.getConnectorPath(Zt)}),_t.attr({visibility:je.attribs?.visibility})):_t&&(Zt.connector=_t.destroy())}})})))}function x(){this.points.forEach(w=>{(w.dataLabels||[]).forEach(T=>{let A=T.dataLabelPosition;A?(A.sideOverflow&&(T.css({width:Math.max(T.getBBox().width-A.sideOverflow,0)+"px",textOverflow:T.options?.style?.textOverflow||"ellipsis"}),T.shortened=!0),T.attr(A.attribs),T[T.moved?"animate":"attr"](A.posAttribs),T.moved=!0):T&&T.attr({y:-9999})}),delete w.distributeBox},this)}function v(w){let T=this.center,A=this.options,M=A.center,z=A.minSize||80,P=z,G=A.size!==null;return!G&&(M[0]!==null?P=Math.max(T[2]-Math.max(w[1],w[3]),z):(P=Math.max(T[2]-w[1]-w[3],z),T[0]+=(w[3]-w[1])/2),M[1]!==null?P=Mk(P,z,T[2]-Math.max(w[0],w[2])):(P=Mk(P,z,T[2]-w[0]-w[2]),T[1]+=(w[0]-w[2])/2),P<T[2]?(T[2]=P,T[3]=Math.min(A.thickness?Math.max(0,P-2*A.thickness):Math.max(0,Fk(A.innerSize||0,P)),P),this.translate(T),this.drawDataLabels&&this.drawDataLabels()):G=!0),G}N.compose=function(w){if(Hg.compose(Rk),R8(E8,"PieDataLabel")){let T=w.prototype;T.dataLabelPositioners=c,T.alignDataLabel=_8,T.drawDataLabels=p,T.getDataLabelPosition=d,T.placeDataLabels=x,T.verifyDataLabelOverflow=v}}})(yt||(yt={}));let M8=yt;(C=Ot||(Ot={})).getCenterOfPoints=function(N){let c=N.reduce((d,p)=>(d.x+=p.x,d.y+=p.y,d),{x:0,y:0});return{x:c.x/N.length,y:c.y/N.length}},C.getDistanceBetweenPoints=function(N,c){return Math.sqrt(Math.pow(c.x-N.x,2)+Math.pow(c.y-N.y,2))},C.getAngleBetweenPoints=function(N,c){return Math.atan2(c.x-N.x,c.y-N.y)},C.pointInPolygon=function({x:N,y:c},d){let p=d.length,x,v,w=!1;for(x=0,v=p-1;x<p;v=x++){let[T,A]=d[x],[M,z]=d[v];A>c!=z>c&&N<(M-T)*(c-A)/(z-A)+T&&(w=!w)}return w};let{pointInPolygon:O8}=Ot,{addEvent:F8,getAlignFactor:P8,fireEvent:Pk,objectEach:Lk,pick:L8}=Ae;function Bk(N,c){let d,p=!1;return N&&(d=N.newOpacity,N.oldOpacity!==d&&(N.hasClass("highcharts-data-label")?(N[d?"removeClass":"addClass"]("highcharts-data-label-hidden"),p=!0,N[N.isOld?"animate":"attr"]({opacity:d},void 0,function(){c.styledMode||N.css({pointerEvents:d?"auto":"none"})}),Pk(c,"afterHideOverlappingLabel")):N.attr({opacity:d})),N.isOld=!0),p}let{defaultOptions:B8}=Xe,{noop:zk}=at,{addEvent:Wk,extend:z8,isObject:Vk,merge:W8,relativeLength:ob}=Ae,V8={radius:0,scope:"stack",where:void 0},Uk=zk,Gk=zk;function U8(N,c,d,p,x={}){let v=Uk(N,c,d,p,x),{brStart:w=!0,brEnd:T=!0,innerR:A=0,r:M=d,start:z=0,end:P=0}=x;if(x.open||!x.borderRadius)return v;let G=P-z,Z=Math.sin(G/2),st=Math.max(Math.min(ob(x.borderRadius||0,M-A),(M-A)/2,M*Z/(1+Z)),0),rt=Math.min(st,G/Math.PI*2*A),nt=v.length-1;for(;nt--;)(w||nt!==0&&nt!==3)&&(T||nt!==1&&nt!==2)&&(function(it,gt,_t){let Wt,Vt,qt,Kt=it[gt],Zt=it[gt+1];if(Zt[0]==="Z"&&(Zt=it[0]),(Kt[0]==="M"||Kt[0]==="L")&&Zt[0]==="A"?(Wt=Kt,Vt=Zt,qt=!0):Kt[0]==="A"&&(Zt[0]==="M"||Zt[0]==="L")&&(Wt=Zt,Vt=Kt),Wt&&Vt&&Vt.params){let Se=Vt[1],Ne=Vt[5],we=Vt.params,{start:je,end:Qe,cx:cn,cy:Tn}=we,yn=Ne?Se-_t:Se+_t,mn=yn?Math.asin(_t/yn):0,Qs=Ne?mn:-mn,Us=Math.cos(mn)*yn;qt?(we.start=je+Qs,Wt[1]=cn+Us*Math.cos(je),Wt[2]=Tn+Us*Math.sin(je),it.splice(gt+1,0,["A",_t,_t,0,0,1,cn+Se*Math.cos(we.start),Tn+Se*Math.sin(we.start)])):(we.end=Qe-Qs,Vt[6]=cn+Se*Math.cos(we.end),Vt[7]=Tn+Se*Math.sin(we.end),it.splice(gt+1,0,["A",_t,_t,0,0,1,cn+Us*Math.cos(Qe),Tn+Us*Math.sin(Qe)])),Vt[4]=Math.abs(we.end-we.start)<Math.PI?0:1}})(v,nt,nt>1?rt:st);return v}function G8(){if(this.options.borderRadius&&!(this.chart.is3d&&this.chart.is3d())){let{options:N,yAxis:c}=this,d=N.stacking==="percent",p=B8.plotOptions?.[this.type]?.borderRadius,x=ab(N.borderRadius,Vk(p)?p:{}),v=c.options.reversed;for(let w of this.points){let{shapeArgs:T}=w;if(w.shapeType==="roundedRect"&&T){let{width:A=0,height:M=0,y:z=0}=T,P=z,G=M;if(x.scope==="stack"&&w.stackTotal){let nt=c.translate(d?100:w.stackTotal,!1,!0,!1,!0),it=c.translate(N.threshold||0,!1,!0,!1,!0),gt=this.crispCol(0,Math.min(nt,it),0,Math.abs(nt-it));P=gt.y,G=gt.height}let Z=(w.negative?-1:1)*(v?-1:1)==-1,st=x.where;!st&&this.is("waterfall")&&Math.abs((w.yBottom||0)-(this.translatedThreshold||0))>this.borderWidth&&(st="all"),st||(st="end");let rt=Math.min(ob(x.radius,A),A/2,st==="all"?M/2:1/0)||0;st==="end"&&(Z&&(P-=rt),G+=rt),z8(T,{brBoxHeight:G,brBoxY:P,r:rt})}}}}function ab(N,c){return Vk(N)||(N={radius:N||0}),W8(V8,c,N)}function H8(){let N=ab(this.options.borderRadius);for(let c of this.points){let d=c.shapeArgs;d&&(d.borderRadius=ob(N.radius,(d.r||0)-(d.innerR||0)))}}function j8(N,c,d,p,x={}){let v=Gk(N,c,d,p,x),{r:w=0,brBoxHeight:T=p,brBoxY:A=c}=x,M=c-A,z=A+T-(c+p),P=M-w>-.1?0:w,G=z-w>-.1?0:w,Z=Math.max(P&&M,0),st=Math.max(G&&z,0),rt=[N+P,c],nt=[N+d-P,c],it=[N+d,c+P],gt=[N+d,c+p-G],_t=[N+d-G,c+p],Wt=[N+G,c+p],Vt=[N,c+p-G],qt=[N,c+P],Kt=(Zt,Se)=>Math.sqrt(Math.pow(Zt,2)-Math.pow(Se,2));if(Z){let Zt=Kt(P,P-Z);rt[0]-=Zt,nt[0]+=Zt,it[1]=qt[1]=c+P-Z}if(p<P-Z){let Zt=Kt(P,P-Z-p);it[0]=gt[0]=N+d-P+Zt,_t[0]=Math.min(it[0],_t[0]),Wt[0]=Math.max(gt[0],Wt[0]),Vt[0]=qt[0]=N+P-Zt,it[1]=qt[1]=c+p}if(st){let Zt=Kt(G,G-st);_t[0]+=Zt,Wt[0]-=Zt,gt[1]=Vt[1]=c+p-G+st}if(p<G-st){let Zt=Kt(G,G-st-p);it[0]=gt[0]=N+d-G+Zt,nt[0]=Math.min(it[0],nt[0]),rt[0]=Math.max(gt[0],rt[0]),Vt[0]=qt[0]=N+G-Zt,gt[1]=Vt[1]=c}return v.length=0,v.push(["M",...rt],["L",...nt],["A",P,P,0,0,1,...it],["L",...gt],["A",G,G,0,0,1,..._t],["L",...Wt],["A",G,G,0,0,1,...Vt],["L",...qt],["A",P,P,0,0,1,...rt],["Z"]),v}let{diffObjects:X8,extend:q8,find:K8,merge:Y8,pick:qg,uniqueKey:Z8}=Ae;function J8(N,c){let d=N.condition;(d.callback||function(){return this.chartWidth<=qg(d.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=qg(d.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=qg(d.minWidth,0)&&this.chartHeight>=qg(d.minHeight,0)}).call(this)&&c.push(N._id)}function Q8(N,c){let d=this.options.responsive,p=this.currentResponsive,x=[],v;!c&&d&&d.rules&&d.rules.forEach(A=>{A._id===void 0&&(A._id=Z8()),this.matchResponsiveRule(A,x)},this);let w=Y8(...x.map(A=>K8(d?.rules||[],M=>M._id===A)).map(A=>A?.chartOptions));w.isResponsiveOptions=!0,x=x.toString()||void 0;let T=p?.ruleIds;x!==T&&(p&&(this.currentResponsive=void 0,this.updatingResponsive=!0,this.update(p.undoOptions,N,!0),this.updatingResponsive=!1),x?((v=X8(w,this.options,!0,this.collectionsWithUpdate)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:x,mergedOptions:w,undoOptions:v},this.updatingResponsive||this.update(w,N,!0)):this.currentResponsive=void 0)}(Ct||(Ct={})).compose=function(N){let c=N.prototype;return c.matchResponsiveRule||q8(c,{matchResponsiveRule:J8,setResponsive:Q8}),N};let tD=Ct;at.AST=Vs,at.Axis=Ac,at.Chart=Oc,at.Color=In,at.DataLabel=Hg,at.DataTableCore=Ag,at.Fx=ut,at.HTMLElement=Mo,at.Legend=tk,at.LegendSymbol=B3,at.PlotLineOrBand=dd,at.Point=Dr,at.Pointer=O3,at.RendererRegistry=Ml,at.Series=Po,at.SeriesRegistry=wi,at.StackItem=hk,at.SVGElement=_r,at.SVGRenderer=en,at.Templating=dr,at.Tick=Ec,at.Time=fn,at.Tooltip=Nt,at.animate=Un.animate,at.animObject=Un.animObject,at.chart=Oc.chart,at.color=In.parse,at.dateFormat=dr.dateFormat,at.defaultOptions=Xe.defaultOptions,at.distribute=lo.distribute,at.format=dr.format,at.getDeferredAnimation=Un.getDeferredAnimation,at.getOptions=Xe.getOptions,at.numberFormat=dr.numberFormat,at.seriesType=wi.seriesType,at.setAnimation=Un.setAnimation,at.setOptions=Xe.setOptions,at.stop=Un.stop,at.time=Xe.defaultTime,at.timers=ut.timers,{compose:function(N,c,d){let p=N.types.pie;if(!c.symbolCustomAttribs.includes("borderRadius")){let x=d.prototype.symbols;Wk(N,"afterColumnTranslate",G8,{order:9}),Wk(p,"afterTranslate",H8),c.symbolCustomAttribs.push("borderRadius","brBoxHeight","brBoxY","brEnd","brStart"),Uk=x.arc,Gk=x.roundedRect,x.arc=U8,x.roundedRect=j8}},optionsToObject:ab}.compose(at.Series,at.SVGElement,at.SVGRenderer),l8.compose(at.Series.types.column),Hg.compose(at.Series),Gu.compose(at.Axis),Mo.compose(at.SVGRenderer),tk.compose(at.Chart),Pf.compose(at.Axis),(a=(S=at.Chart).prototype).hideOverlappingLabels||(a.hideOverlappingLabels=function(N){let c=N.length,d=(z,P)=>!(P.x>=z.x+z.width||P.x+P.width<=z.x||P.y>=z.y+z.height||P.y+P.height<=z.y),p=(z,P)=>{for(let G of z)if(O8({x:G[0],y:G[1]},P))return!0;return!1},x,v,w,T,A,M=!1;for(let z=0;z<c;z++)(x=N[z])&&(x.oldOpacity=x.opacity,x.newOpacity=1,x.absoluteBox=(function(P){if(P&&(!P.alignAttr||P.placed)){let G=P.box?0:P.padding||0,Z=P.alignAttr||{x:P.attr("x"),y:P.attr("y")},{height:st,polygon:rt,width:nt}=P.getBBox(),it=P8(P.alignValue)*nt;return P.width=nt,P.height=st,{x:Z.x+(P.parentGroup?.translateX||0)+G-it,y:Z.y+(P.parentGroup?.translateY||0)+G,width:nt-2*G,height:st-2*G,polygon:rt}}})(x));N.sort((z,P)=>(P?.labelrank||0)-(z?.labelrank||0));for(let z=0;z<c;++z){T=(v=N[z])&&v.absoluteBox;let P=T?.polygon;for(let G=z+1;G<c;++G){A=(w=N[G])&&w.absoluteBox;let Z=!1;if(T&&A&&v!==w&&v?.newOpacity!==0&&w?.newOpacity!==0&&v?.visibility!=="hidden"&&w?.visibility!=="hidden"){let st=A.polygon;if(P&&st&&P!==st?p(P,st)&&(Z=!0):d(T,A)&&(Z=!0),Z){let rt=v?.labelrank<w?.labelrank?v:w,nt=rt?.text;rt&&(rt.newOpacity=0),nt?.element.querySelector("textPath")&&nt.hide()}}}}for(let z of N)z&&Bk(z,this)&&(M=!0);M&&Pk(this,"afterHideAllOverlappingLabels")},F8(S,"render",function(){let N=this,c=[];for(let d of N.labelCollectors||[])c=c.concat(d());for(let d of N.yAxis||[])d.stacking&&d.options.stackLabels&&!d.options.stackLabels.allowOverlap&&Lk(d.stacking.stacks,p=>{Lk(p,x=>{x.label&&c.push(x.label)})});for(let d of N.series||[])if(d.visible&&d.hasDataLabels?.()){let p=x=>{for(let v of x)v.visible&&(v.dataLabels||[]).forEach(w=>{let T=w.options||{};w.labelrank=L8(T.labelrank,v.labelrank,v.shapeArgs?.height),T.allowOverlap??Number(T.distance)>0?(w.oldOpacity=w.opacity,w.newOpacity=1,Bk(w,N)):c.push(w)})};p(d.nodes||[]),p(d.points)}this.hideOverlappingLabels(c)})),M8.compose(at.Series.types.pie),dd.compose(at.Chart,at.Axis),O3.compose(at.Chart),tD.compose(at.Chart),Hf.compose(at.Axis,at.Chart,at.Series),zN.compose(at.Axis,at.Chart,at.Series),Nt.compose(at.Pointer),Ae.extend(at,Ae);let eD=at;return vt.default})())})(xm)),xm.exports}var eR=tR();const nR=Vp(eR);var bm={exports:{}},sR=bm.exports,d4;function iR(){return d4||(d4=1,(function(n,t){(function(e,s){n.exports=s(e._Highcharts,e._Highcharts.Templating,e._Highcharts.AST,e._Highcharts.Legend,e._Highcharts.Axis,e._Highcharts.Color,e._Highcharts.SeriesRegistry,e._Highcharts.RendererRegistry,e._Highcharts.SVGRenderer,e._Highcharts.Point,e._Highcharts.Series)})("u"<typeof window?sR:window,(e,s,i,r,o,a,l,u,h,f,g)=>(()=>{let m;var y,k,C,S,$={260:L=>{L.exports=f},512:L=>{L.exports=l},532:L=>{L.exports=o},540:L=>{L.exports=h},608:L=>{L.exports=u},620:L=>{L.exports=a},632:L=>{L.exports=r},660:L=>{L.exports=i},820:L=>{L.exports=g},944:L=>{L.exports=e},984:L=>{L.exports=s}},D={};function R(L){var I=D[L];if(I!==void 0)return I.exports;var F=D[L]={exports:{}};return $[L](F,F.exports,R),F.exports}R.n=L=>{var I=L&&L.__esModule?()=>L.default:()=>L;return R.d(I,{a:I}),I},R.d=(L,I)=>{for(var F in I)R.o(I,F)&&!R.o(L,F)&&Object.defineProperty(L,F,{enumerable:!0,get:I[F]})},R.o=(L,I)=>Object.prototype.hasOwnProperty.call(L,I);var V={};R.d(V,{default:()=>Sx});var E=R(944),q=R.n(E);let{doc:X,win:B}=q(),{css:U}=q(),K=B.EventTarget&&new B.EventTarget||"none";function Y(L){if(typeof B.MouseEvent=="function")return new B.MouseEvent(L.type,L);if(X?.createEvent){let I=X.createEvent("MouseEvent");if(I.initMouseEvent)return I.initMouseEvent(L.type,L.bubbles,L.cancelable,L.view||B,L.detail,L.screenX,L.screenY,L.clientX,L.clientY,L.ctrlKey,L.altKey,L.shiftKey,L.metaKey,L.button,L.relatedTarget),I}return ct(L.type)}function ct(L,I,F){let W=I||{x:0,y:0};if(typeof B.MouseEvent=="function")return new B.MouseEvent(L,{bubbles:!0,cancelable:!0,composed:!0,button:0,buttons:1,relatedTarget:F||K,view:B,detail:+(L==="click"),screenX:W.x,screenY:W.y,clientX:W.x,clientY:W.y});if(X?.createEvent){let et=X.createEvent("MouseEvent");if(et.initMouseEvent)return et.initMouseEvent(L,!0,!0,B,+(L==="click"),W.x,W.y,W.x,W.y,!1,!1,!1,!1,0,null),et}return{type:L}}let j={addClass:function(L,I){L.classList?L.classList.add(I):0>L.className.indexOf(I)&&(L.className+=" "+I)},cloneMouseEvent:Y,cloneTouchEvent:function(L){let I=W=>{let et=[];for(let lt=0;lt<W.length;++lt){let ot=W.item(lt);ot&&et.push(ot)}return et};if(typeof B.TouchEvent=="function"){let W=new B.TouchEvent(L.type,{touches:I(L.touches),targetTouches:I(L.targetTouches),changedTouches:I(L.changedTouches),ctrlKey:L.ctrlKey,shiftKey:L.shiftKey,altKey:L.altKey,metaKey:L.metaKey,bubbles:L.bubbles,cancelable:L.cancelable,composed:L.composed,detail:L.detail,view:L.view});return L.defaultPrevented&&W.preventDefault(),W}let F=Y(L);return F.touches=L.touches,F.changedTouches=L.changedTouches,F.targetTouches=L.targetTouches,F},escapeStringForHTML:function(L){return L.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},getElement:function(L){return X.getElementById(L)},getFakeMouseEvent:ct,getHeadingTagNameForElement:function(L){let I=et=>"h"+Math.min(6,parseInt(et.slice(1),10)+1),F=et=>/^H[1-6]$/i.test(et),W=et=>{let lt=(Nt=>{let Dt=Nt;for(;Dt=Dt.previousSibling;){let ee=Dt.tagName||"";if(F(ee))return ee}return""})(et);if(lt)return I(lt);let ot=et.parentElement;if(!ot)return"h6";let xt=ot.tagName;return F(xt)?I(xt):W(ot)};return W(L)},removeChildNodes:function(L){for(;L.lastChild;)L.removeChild(L.lastChild)},removeClass:function(L,I){L.classList?L.classList.remove(I):L.className=L.className.replace(RegExp(I,"g"),"")},removeElement:function(L){L&&L.parentNode&&L.parentNode.removeChild(L)},reverseChildNodes:function(L){let I=L.childNodes.length;for(;I--;)L.appendChild(L.childNodes[I])},simulatedEventTarget:K,stripHTMLTagsFromString:function(L,I=!1){return typeof L=="string"?I?L.replace(/<\/?[^>]+(>|$)/g,""):L.replace(/<\/?(?!\s)[^>]+(>|$)/g,""):L},visuallyHideElement:function(L){U(L,{position:"absolute",width:"1px",height:"1px",overflow:"hidden",whiteSpace:"nowrap",clip:"rect(1px, 1px, 1px, 1px)",marginTop:"-3px","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)",filter:"alpha(opacity=1)",opacity:.01})}};var ht=R(984),It=R.n(ht);let{format:yt}=It(),{getNestedProperty:Ot,pick:Ct}=q();var Gt=y||(y={});function vt(L,I,F){let W=(Nt,Dt)=>{let ee=Nt.slice(Dt||0),ue=ee.indexOf("{"),fe=ee.indexOf("}");if(ue>-1&&fe>ue)return{statement:ee.substring(ue+1,fe),begin:Dt+ue+1,end:Dt+fe}},et=[],lt,ot,xt=0;do lt=W(L,xt),(ot=L.substring(xt,lt&&lt.begin-1)).length&&et.push({value:ot,type:"constant"}),lt&&et.push({value:lt.statement,type:"statement"}),xt=lt?lt.end+1:xt+1;while(lt);return et.forEach(Nt=>{Nt.type==="statement"&&(Nt.value=(function(Dt,ee){let ue,fe,ke=Dt.indexOf("#each("),Ye=Dt.indexOf("#plural("),Je=Dt.indexOf("["),dn=Dt.indexOf("]");if(ke>-1){let Jn=Dt.slice(ke).indexOf(")")+ke,Bn=Dt.substring(0,ke),pn=Dt.substring(Jn+1),us=Dt.substring(ke+6,Jn).split(","),Ts=Number(us[1]),ks;if(fe="",ue=Ot(us[0],ee)){ks=(Ts=isNaN(Ts)?ue.length:Ts)<0?ue.length+Ts:Math.min(Ts,ue.length);for(let ms=0;ms<ks;++ms)fe+=Bn+ue[ms]+pn}return fe.length?fe:""}if(Ye>-1){var Xn;let Jn=Dt.slice(Ye).indexOf(")")+Ye,Bn=Dt.substring(Ye+8,Jn).split(",");switch(Number(Ot(Bn[0],ee))){case 0:fe=Ct(Bn[4],Bn[1]);break;case 1:fe=Ct(Bn[2],Bn[1]);break;case 2:fe=Ct(Bn[3],Bn[1]);break;default:fe=Bn[1]}return fe?(Xn=fe).trim&&Xn.trim()||Xn.replace(/^\s+|\s+$/g,""):""}if(Je>-1){let Jn,Bn=Dt.substring(0,Je),pn=Number(Dt.substring(Je+1,dn));return ue=Ot(Bn,ee),!isNaN(pn)&&ue&&(pn<0?(Jn=ue[ue.length+pn])===void 0&&(Jn=ue[0]):(Jn=ue[pn])===void 0&&(Jn=ue[ue.length-1])),Jn!==void 0?Jn:""}return"{"+Dt+"}"})(Nt.value,I))}),yt(et.reduce((Nt,Dt)=>Nt+Dt.value,""),I,F)}function at(L,I){let F=L.split("."),W=this.options.lang,et=0;for(;et<F.length;++et)W=W&&W[F[et]];return typeof W=="string"?vt(W,I,this):""}Gt.compose=function(L){let I=L.prototype;I.langFormat||(I.langFormat=at)},Gt.i18nFormat=vt;let Pt=y,{doc:jt}=q(),{stripHTMLTagsFromString:Ut}=j,{defined:me,find:Ee,fireEvent:le}=q();function ce(L){if(L.points&&L.points.length){let I=Ee(L.points,F=>!!F.graphic);return I&&I.graphic&&I.graphic.element}}function De(L){let I=ce(L);return I&&I.parentNode||L.graph&&L.graph.element||L.group&&L.group.element}let ae={fireEventOnWrappedOrUnwrappedElement:function L(I,F){let W=F.type,et=I.hcEvents;jt?.createEvent&&(I.dispatchEvent||I.fireEvent)?I.dispatchEvent?I.dispatchEvent(F):I.fireEvent(W,F):et&&et[W]?le(I,W,F):I.element&&L(I.element,F)},getChartTitle:function(L){return Ut(L.options.title.text||L.langFormat("accessibility.defaultChartTitle",{chart:L}),L.renderer.forExport)},getAxisDescription:function(L){return L&&(L.options.accessibility?.description||L.axisTitle?.textStr||L.options.id||L.categories&&L.chart.langFormat("accessibility.axis.defaultAxisNames.categories",{})||L.dateTime&&L.chart.langFormat("accessibility.axis.defaultAxisNames.time",{})||L.chart.langFormat("accessibility.axis.defaultAxisNames.values",{}))},getAxisRangeDescription:function(L){var I,F,W;let et,lt,ot,xt,Nt,Dt,ee,ue,fe,ke,Ye,Je,dn=L.options||{};return dn.accessibility&&dn.accessibility.rangeDescription!==void 0?dn.accessibility.rangeDescription:L.categories?(et=(I=L).chart,I.dataMax&&I.dataMin?et.langFormat("accessibility.axis.rangeCategories",{chart:et,axis:I,numCategories:I.dataMax-I.dataMin+1}):""):L.dateTime&&(L.min===0||L.dataMin===0)?(lt=(F=L).chart,ot={},xt=F.dataMin||F.min||0,Nt=F.dataMax||F.max||0,Dt="Seconds",ot.Seconds=(Nt-xt)/1e3,ot.Minutes=ot.Seconds/60,ot.Hours=ot.Minutes/60,ot.Days=ot.Hours/24,["Minutes","Hours","Days"].forEach(function(Xn){ot[Xn]>2&&(Dt=Xn)}),ee=ot[Dt].toFixed(+(Dt!=="Seconds"&&Dt!=="Minutes")),lt.langFormat("accessibility.axis.timeRange"+Dt,{chart:lt,axis:F,range:ee.replace(".0","")})):(ke=(fe=(ue=(W=L).chart).options)&&fe.accessibility&&fe.accessibility.screenReaderSection.axisRangeDateFormat||"",Ye={min:W.dataMin||W.min||0,max:W.dataMax||W.max||0},Je=function(Xn){return W.dateTime?ue.time.dateFormat(ke,Ye[Xn]):Ye[Xn].toString()},ue.langFormat("accessibility.axis.rangeFromTo",{chart:ue,axis:W,rangeFrom:Je("min"),rangeTo:Je("max")}))},getPointFromXY:function(L,I,F){let W=L.length,et;for(;W--;)if(et=Ee(L[W].points||[],function(lt){return lt.x===I&&lt.y===F}))return et},getSeriesFirstPointElement:ce,getSeriesFromName:function(L,I){return I?(L.series||[]).filter(function(F){return F.name===I}):L.series},getSeriesA11yElement:De,unhideChartElementFromAT:function L(I,F){F.setAttribute("aria-hidden",!1),F!==I.renderTo&&F.parentNode&&F.parentNode!==jt.body&&(Array.prototype.forEach.call(F.parentNode.childNodes,function(W){W.hasAttribute("aria-hidden")||W.setAttribute("aria-hidden",!0)}),L(I,F.parentNode))},hideSeriesFromAT:function(L){let I=De(L);I&&I.setAttribute("aria-hidden",!0)},scrollAxisToPoint:function(L){let I=L.series.xAxis,F=L.series.yAxis,W=I&&I.scrollbar?I:F,et=W&&W.scrollbar;if(et&&me(et.to)&&me(et.from)){let lt=et.to-et.from,ot=(function(xt,Nt){if(!me(xt.dataMin)||!me(xt.dataMax))return 0;let Dt=xt.toPixels(xt.dataMin),ee=xt.toPixels(xt.dataMax),ue=xt.coll==="xAxis"?"x":"y";return(xt.toPixels(Nt[ue]||0)-Dt)/(ee-Dt)})(W,L);et.updatePosition(ot-lt/2,ot+lt/2),le(et,"changed",{from:et.from,to:et.to,trigger:"scrollbar",DOMEvent:null})}}},{doc:Oe}=q(),{removeElement:Le}=j,J=class{constructor(){this.elements=[]}createElement(){let L=Oe.createElement.apply(Oe,arguments);return this.elements.push(L),L}removeElement(L){Le(L),this.elements.splice(this.elements.indexOf(L),1)}destroyCreatedElements(){this.elements.forEach(function(L){Le(L)}),this.elements=[]}},{addEvent:Mt}=q(),Ft=class{constructor(){this.eventRemovers=[]}addEvent(){let L=Mt.apply(q(),arguments);return this.eventRemovers.push({element:arguments[0],remover:L}),L}removeEvent(L){let I=this.eventRemovers.map(F=>F.remover).indexOf(L);this.eventRemovers[I].remover(),this.eventRemovers.splice(I,1)}removeAddedEvents(){this.eventRemovers.map(L=>L.remover).forEach(L=>L()),this.eventRemovers=[]}},{fireEventOnWrappedOrUnwrappedElement:St}=ae,{getFakeMouseEvent:ft}=j,zt=class{destroy(){}getKeyboardNavigation(){return[]}init(){}onChartRender(){}onChartUpdate(){}initBase(L,I){this.chart=L,this.eventProvider=new Ft,this.domElementProvider=new J,this.proxyProvider=I,this.keyCodes={left:37,right:39,up:38,down:40,enter:13,space:32,esc:27,tab:9,pageUp:33,pageDown:34,end:35,home:36}}addEvent(L,I,F,W){return this.eventProvider.addEvent(L,I,F,W)}createElement(L,I){return this.domElementProvider.createElement(L,I)}fakeClickEvent(L){St(L,ft("click"))}destroyBase(){this.domElementProvider.destroyCreatedElements(),this.eventProvider.removeAddedEvents()}},{find:Et}=q(),de=class{constructor(L,I){this.chart=L,this.keyCodeMap=I.keyCodeMap||[],this.validate=I.validate,this.init=I.init,this.terminate=I.terminate,this.response={success:1,prev:2,next:3,noHandler:4,fail:5}}run(L){let I=L.which||L.keyCode,F=this.response.noHandler,W=Et(this.keyCodeMap,function(et){return et[0].indexOf(I)>-1});return W?F=W[1].call(this,I,L):I===9&&(F=this.response[L.shiftKey?"prev":"next"]),F}},{unhideChartElementFromAT:Xt,getChartTitle:be}=ae,{doc:Te}=q(),{stripHTMLTagsFromString:$e}=j,Pe=class extends zt{onChartUpdate(){this.handleSVGTitleElement(),this.setSVGContainerLabel(),this.setGraphicContainerAttrs(),this.setRenderToAttrs(),this.makeCreditsAccessible()}handleSVGTitleElement(){let L=this.chart,I="highcharts-title-"+L.index,F=$e(L.langFormat("accessibility.svgContainerTitle",{chartTitle:be(L)}));if(F.length){let W=this.svgTitleElement=this.svgTitleElement||Te.createElementNS("http://www.w3.org/2000/svg","title");W.textContent=F,W.id=I,L.renderTo.insertBefore(W,L.renderTo.firstChild)}}setSVGContainerLabel(){let L=this.chart,I=L.langFormat("accessibility.svgContainerLabel",{chartTitle:be(L)});L.renderer.box&&I.length&&L.renderer.box.setAttribute("aria-label",I)}setGraphicContainerAttrs(){let L=this.chart,I=L.langFormat("accessibility.graphicContainerLabel",{chartTitle:be(L)});I.length&&L.container.setAttribute("aria-label",I)}setRenderToAttrs(){let L=this.chart,I=L.options.accessibility.landmarkVerbosity!=="disabled",F=L.langFormat("accessibility.chartContainerLabel",{title:be(L),chart:L});F&&(L.renderTo.setAttribute("role",I?"region":"group"),L.renderTo.setAttribute("aria-label",F))}makeCreditsAccessible(){let L=this.chart,I=L.credits;I&&(I.textStr&&I.element.setAttribute("aria-label",L.langFormat("accessibility.credits",{creditsStr:$e(I.textStr,L.renderer.forExport)})),Xt(L,I.element))}getKeyboardNavigation(){let L=this.chart;return new de(L,{keyCodeMap:[],validate:function(){return!0},init:function(){let I=L.accessibility;I&&I.keyboardNavigation.tabindexContainer.focus()}})}destroy(){this.chart.renderTo.setAttribute("aria-hidden",!0)}},{addEvent:Ae,pick:vn}=q();(function(L){let I=["x","y","transform","width","height","r","d","stroke-width"];function F(){let ot=this.focusElement,xt=this.options.accessibility.keyboardNavigation.focusBorder;ot&&(ot.removeFocusBorder(),xt.enabled&&ot.addFocusBorder(xt.margin,{stroke:xt.style.color,strokeWidth:xt.style.lineWidth,r:xt.style.borderRadius}))}function W(ot,xt){let Nt=this.options.accessibility.keyboardNavigation.focusBorder,Dt=xt||ot.element;Dt&&Dt.focus&&(Dt.hcEvents&&Dt.hcEvents.focusin||Ae(Dt,"focusin",function(){}),Dt.focus(),Nt.hideBrowserFocusOutline&&(Dt.style.outline="none")),this.focusElement&&this.focusElement.removeFocusBorder(),this.focusElement=ot,Ae(this,"endResize",function(){this.renderFocusBorder()}),this.renderFocusBorder()}function et(ot,xt){this.focusBorder&&this.removeFocusBorder();let Nt=this.getBBox(),Dt=vn(ot,3),ee=this.parentGroup,ue=this.scaleX||ee&&ee.scaleX,fe=this.scaleY||ee&&ee.scaleY,ke=(ue?!fe:fe)?Math.abs(ue||fe||1):(Math.abs(ue||1)+Math.abs(fe||1))/2,Ye=this.renderer.fontMetrics(this).h;Nt.x+=this.translateX?this.translateX:0,Nt.y+=this.translateY?this.translateY:0;let Je=Nt.x-Dt,dn=Nt.y-Dt,Xn=Nt.width+2*Dt,Jn=Nt.height+2*Dt,Bn=!!this.text;if(this.element.nodeName==="text"||Bn){let pn,us,Ts=!!this.rotation,ks=Bn?{x:+!!Ts,y:0}:(pn=0,us=0,this.attr("text-anchor")==="middle"?pn=us=.5:this.rotation?pn=.25:us=.75,{x:pn,y:us}),ms=+this.attr("x"),oi=+this.attr("y");if(isNaN(ms)||(Je=ms-Nt.width*ks.x-Dt),isNaN(oi)||(dn=oi-(this.attr("text-anchor")==="start"?Ye:Nt.height)*ks.y-Dt),Bn&&Ts){let Kr=Xn;Xn=Jn,Jn=Kr,isNaN(ms)||(Je=ms-Nt.height*ks.x-Dt),isNaN(oi)||(dn=oi-Nt.width*ks.y-Dt)}}this.focusBorder=this.renderer.rect(Je,dn,Xn,Jn,parseInt((xt&&xt.r||0).toString(),10)/ke).addClass("highcharts-focus-border").attr({zIndex:99}).add(ee),this.renderer.styledMode||this.focusBorder.attr({stroke:xt&&xt.stroke,"stroke-width":(xt&&xt.strokeWidth||0)/ke}),(function(pn,...us){pn.focusBorderUpdateHooks||(pn.focusBorderUpdateHooks={},I.forEach(Ts=>{let ks=Ts+"Setter",ms=pn[ks]||pn._defaultSetter;pn.focusBorderUpdateHooks[ks]=ms,pn[ks]=function(){let oi=ms.apply(pn,arguments);return pn.addFocusBorder.apply(pn,us),oi}}))})(this,ot,xt),(function(pn){if(pn.focusBorderDestroyHook)return;let us=pn.destroy;pn.destroy=function(){return pn.focusBorder&&pn.focusBorder.destroy&&pn.focusBorder.destroy(),us.apply(pn,arguments)},pn.focusBorderDestroyHook=us})(this)}function lt(){var ot;ot=this,ot.focusBorderUpdateHooks&&(Object.keys(ot.focusBorderUpdateHooks).forEach(xt=>{let Nt=ot.focusBorderUpdateHooks[xt];Nt===ot._defaultSetter?delete ot[xt]:ot[xt]=Nt}),delete ot.focusBorderUpdateHooks),this.focusBorderDestroyHook&&(this.destroy=this.focusBorderDestroyHook,delete this.focusBorderDestroyHook),this.focusBorder&&(this.focusBorder.destroy(),delete this.focusBorder)}L.compose=function(ot,xt){let Nt=ot.prototype,Dt=xt.prototype;Nt.renderFocusBorder||(Nt.renderFocusBorder=F,Nt.setFocusToElement=W),Dt.addFocusBorder||(Dt.addFocusBorder=et,Dt.removeFocusBorder=lt)}})(k||(k={}));let vs=k;var ei=R(660),ps=R.n(ei);let{doc:Ws}=q(),{addClass:ns,visuallyHideElement:bi}=j,{attr:Pi}=q(),vi=class{constructor(L,I){this.chart=L,this.domElementProvider=new J,this.announceRegion=this.addAnnounceRegion(I)}destroy(){this.domElementProvider.destroyCreatedElements()}announce(L){ps().setElementHTML(this.announceRegion,L),this.clearAnnouncementRegionTimer&&clearTimeout(this.clearAnnouncementRegionTimer),this.clearAnnouncementRegionTimer=setTimeout(()=>{this.announceRegion.innerHTML=ps().emptyHTML,delete this.clearAnnouncementRegionTimer},3e3)}addAnnounceRegion(L){let I=this.chart.announcerContainer||this.createAnnouncerContainer(),F=this.domElementProvider.createElement("div");return Pi(F,{"aria-hidden":!1,"aria-live":L,"aria-atomic":!0}),this.chart.styledMode?ns(F,"highcharts-visually-hidden"):bi(F),I.appendChild(F),F}createAnnouncerContainer(){let L=this.chart,I=Ws.createElement("div");return Pi(I,{"aria-hidden":!1,class:"highcharts-announcer-container"}),I.style.position="relative",L.renderTo.insertBefore(I,L.renderTo.firstChild),L.announcerContainer=I,I}},{escapeStringForHTML:Ur,stripHTMLTagsFromString:Me}=j;function ze(L){return(L.annotations||[]).reduce((I,F)=>(F.options&&F.options.visible!==!1&&(I=I.concat(F.labels)),I),[])}function Ue(L){return L.options&&L.options.accessibility&&L.options.accessibility.description||L.graphic&&L.graphic.text&&L.graphic.text.textStr||""}function Ge(L){let I=L.options&&L.options.accessibility&&L.options.accessibility.description;if(I)return I;let F=L.chart,W=Ue(L),et=L.points.filter(Nt=>!!Nt.graphic).map(Nt=>{let Dt=Nt.accessibility&&Nt.accessibility.valueDescription||Nt.graphic&&Nt.graphic.element&&Nt.graphic.element.getAttribute("aria-label")||"",ee=Nt&&Nt.series.name||"";return(ee?ee+", ":"")+"data point "+Dt}).filter(Nt=>!!Nt),lt=et.length,ot=lt>1?"MultiplePoints":lt?"SinglePoint":"NoPoints",xt={annotationText:W,annotation:L,numPoints:lt,annotationPoint:et[0],additionalAnnotationPoints:et.slice(1)};return F.langFormat("accessibility.screenReaderSection.annotations.description"+ot,xt)}function Ze(L){return ze(L).map(I=>{let F=Ur(Me(Ge(I),L.renderer.forExport));return F?`<li>${F}</li>`:""})}let tn={getAnnotationsInfoHTML:function(L){let I=L.annotations;return I&&I.length?`<ul style="list-style-type: none">${Ze(L).join(" ")}</ul>`:""},getPointAnnotationTexts:function(L){let I=ze(L.series.chart).filter(F=>F.points.indexOf(L)>-1);return I.length?I.map(F=>`${Ue(F)}`):[]}},{getAnnotationsInfoHTML:an}=tn,{getAxisDescription:ln,getAxisRangeDescription:We,getChartTitle:fn,unhideChartElementFromAT:Yn}=ae,{format:On}=It(),{doc:xn}=q(),{addClass:hn,getElement:Nn,getHeadingTagNameForElement:Xe,stripHTMLTagsFromString:on,visuallyHideElement:Sn}=j,{attr:jn,pick:zn,replaceNested:gn}=q();function Zn(L){return gn(L,[/<([\w\-.:!]+)\b[^<>]*>\s*<\/\1>/g,""])}let as=class extends zt{constructor(){super(...arguments),this.screenReaderSections={}}init(){let L=this.chart,I=this;this.initRegionsDefinitions(),this.addEvent(L,"afterGetTableAST",function(F){I.onDataTableCreated(F)}),this.addEvent(L,"afterViewData",function(F){F.wasHidden&&(I.dataTableDiv=F.element,setTimeout(function(){I.focusDataTable()},300))}),this.addEvent(L,"afterHideData",function(){I.viewDataTableButton&&I.viewDataTableButton.setAttribute("aria-expanded","false")}),L.exporting&&this.addEvent(L,"afterPrint",function(){I.updateAllScreenReaderSections()}),this.announcer=new vi(L,"assertive")}initRegionsDefinitions(){let L=this,I=this.chart.options.accessibility;this.screenReaderSections={before:{element:null,buildContent:function(F){let W=I.screenReaderSection.beforeChartFormatter;return W?W(F):L.defaultBeforeChartFormatter(F)},insertIntoDOM:function(F,W){W.renderTo.insertBefore(F,W.renderTo.firstChild)},afterInserted:function(){L.sonifyButtonId!==void 0&&L.initSonifyButton(L.sonifyButtonId),L.dataTableButtonId!==void 0&&L.initDataTableButton(L.dataTableButtonId)}},after:{element:null,buildContent:function(F){let W=I.screenReaderSection.afterChartFormatter;return W?W(F):L.defaultAfterChartFormatter()},insertIntoDOM:function(F,W){W.renderTo.insertBefore(F,W.container.nextSibling)},afterInserted:function(){L.chart.accessibility&&I.keyboardNavigation.enabled&&L.chart.accessibility.keyboardNavigation.updateExitAnchor()}}}}onChartRender(){this.linkedDescriptionElement=this.getLinkedDescriptionElement(),this.setLinkedDescriptionAttrs(),this.updateAllScreenReaderSections()}updateAllScreenReaderSections(){let L=this;Object.keys(this.screenReaderSections).forEach(function(I){L.updateScreenReaderSection(I)})}getLinkedDescriptionElement(){let L=this.chart.options.accessibility.linkedDescription;if(!L)return;if(typeof L!="string")return L;let I=On(L,this.chart),F=xn.querySelectorAll(I);if(F.length===1)return F[0]}setLinkedDescriptionAttrs(){let L=this.linkedDescriptionElement;L&&(L.setAttribute("aria-hidden","true"),hn(L,"highcharts-linked-description"))}updateScreenReaderSection(L){let I=this.chart,F=this.screenReaderSections[L],W=F.buildContent(I),et=F.element=F.element||this.createElement("div"),lt=et.firstChild||this.createElement("div");W?(this.setScreenReaderSectionAttribs(et,L),ps().setElementHTML(lt,W),et.appendChild(lt),F.insertIntoDOM(et,I),I.styledMode?hn(lt,"highcharts-visually-hidden"):Sn(lt),Yn(I,lt),F.afterInserted&&F.afterInserted()):(et.parentNode&&et.parentNode.removeChild(et),F.element=null)}setScreenReaderSectionAttribs(L,I){let F=this.chart,W=F.langFormat("accessibility.screenReaderSection."+I+"RegionLabel",{chart:F,chartTitle:fn(F)});jn(L,{id:`highcharts-screen-reader-region-${I}-${F.index}`,"aria-label":W||void 0}),L.style.position="relative",W&&L.setAttribute("role",F.options.accessibility.landmarkVerbosity==="all"?"region":"group")}defaultBeforeChartFormatter(){let L=this.chart,I=L.options.accessibility.screenReaderSection.beforeChartFormat;if(!I)return"";let F=this.getAxesDescription(),W=L.sonify&&L.options.sonification&&L.options.sonification.enabled,et="highcharts-a11y-sonify-data-btn-"+L.index,lt="hc-linkto-highcharts-data-table-"+L.index,ot=an(L),xt=L.langFormat("accessibility.screenReaderSection.annotations.heading",{chart:L}),Nt={headingTagName:Xe(L.renderTo),chartTitle:fn(L),typeDescription:this.getTypeDescriptionText(),chartSubtitle:this.getSubtitleText(),chartLongdesc:this.getLongdescText(),xAxisDescription:F.xAxis,yAxisDescription:F.yAxis,playAsSoundButton:W?this.getSonifyButtonText(et):"",viewTableButton:L.exporting?.getCSV?this.getDataTableButtonText(lt):"",annotationsTitle:ot?xt:"",annotationsList:ot},Dt=Pt.i18nFormat(I,Nt,L);return this.dataTableButtonId=lt,this.sonifyButtonId=et,Zn(Dt)}defaultAfterChartFormatter(){let L=this.chart,I=L.options.accessibility.screenReaderSection.afterChartFormat;if(!I)return"";let F={endOfChartMarker:this.getEndOfChartMarkerText()};return Zn(Pt.i18nFormat(I,F,L))}getLinkedDescription(){let L=this.linkedDescriptionElement;return on(L&&L.innerHTML||"",this.chart.renderer.forExport)}getLongdescText(){let L=this.chart.options,I=L.caption,F=I&&I.text,W=this.getLinkedDescription();return L.accessibility.description||W||F||""}getTypeDescriptionText(){let L=this.chart;return L.types?L.options.accessibility.typeDescription||(function(I,F){let W,et,lt,ot=F[0],xt=I.series&&I.series[0]||{},Nt=I.mapView&&I.mapView.geoMap&&I.mapView.geoMap.title,Dt={numSeries:I.series.length,numPoints:xt.points&&xt.points.length,chart:I,mapTitle:Nt};return ot?ot==="map"||ot==="tiledwebmap"?Dt.mapTitle?I.langFormat("accessibility.chartTypes.mapTypeDescription",Dt):I.langFormat("accessibility.chartTypes.unknownMap",Dt):I.types.length>1?I.langFormat("accessibility.chartTypes.combinationChart",Dt):(W=F[0],et=I.langFormat("accessibility.seriesTypeDescriptions."+W,Dt),lt=I.series&&I.series.length<2?"Single":"Multiple",(I.langFormat("accessibility.chartTypes."+W+lt,Dt)||I.langFormat("accessibility.chartTypes.default"+lt,Dt))+(et?" "+et:"")):I.langFormat("accessibility.chartTypes.emptyChart",Dt)})(L,L.types):""}getDataTableButtonText(L){let I=this.chart;return'<button id="'+L+'">'+I.langFormat("accessibility.table.viewAsDataTableButtonText",{chart:I,chartTitle:fn(I)})+"</button>"}getSonifyButtonText(L){let I=this.chart;return I.options.sonification&&I.options.sonification.enabled===!1?"":'<button id="'+L+'">'+I.langFormat("accessibility.sonification.playAsSoundButtonText",{chart:I,chartTitle:fn(I)})+"</button>"}getSubtitleText(){let L=this.chart.options.subtitle;return on(L&&L.text||"",this.chart.renderer.forExport)}getEndOfChartMarkerText(){let L=Nn(`highcharts-end-of-chart-marker-${this.chart.index}`);if(L)return L.outerHTML;let I=this.chart,F=I.langFormat("accessibility.screenReaderSection.endOfChartMarker",{chart:I});return'<div id="highcharts-end-of-chart-marker-'+I.index+'">'+F+"</div>"}onDataTableCreated(L){let I=this.chart;if(I.options.accessibility.enabled){this.viewDataTableButton&&this.viewDataTableButton.setAttribute("aria-expanded","true");let F=L.tree.attributes||{};F.tabindex=-1,F.summary=I.langFormat("accessibility.table.tableSummary",{chart:I}),L.tree.attributes=F}}focusDataTable(){let L=this.dataTableDiv,I=L&&L.getElementsByTagName("table")[0];I&&I.focus&&I.focus()}initSonifyButton(L){let I=this.sonifyButton=Nn(L),F=this.chart,W=et=>{I&&(I.setAttribute("aria-hidden","true"),I.setAttribute("aria-label","")),et.preventDefault(),et.stopPropagation();let lt=F.langFormat("accessibility.sonification.playAsSoundClickAnnouncement",{chart:F});this.announcer.announce(lt),setTimeout(()=>{I&&(I.removeAttribute("aria-hidden"),I.removeAttribute("aria-label")),F.sonify&&F.sonify()},1e3)};I&&F&&(I.setAttribute("tabindex",-1),I.onclick=function(et){(F.options.accessibility&&F.options.accessibility.screenReaderSection.onPlayAsSoundClick||W).call(this,et,F)})}initDataTableButton(L){let I=this.viewDataTableButton=Nn(L),F=this.chart,W=L.replace("hc-linkto-","");I&&(jn(I,{tabindex:-1,"aria-expanded":!!Nn(W)}),I.onclick=F.options.accessibility.screenReaderSection.onViewDataTableClick||function(){F.exporting?.viewData()})}getAxesDescription(){let L=this.chart,I=function(xt,Nt){let Dt=L[xt];return Dt.length>1||Dt[0]&&zn(Dt[0].options.accessibility&&Dt[0].options.accessibility.enabled,Nt)},F=!!L.types&&0>L.types.indexOf("map")&&0>L.types.indexOf("treemap")&&0>L.types.indexOf("tilemap"),W=!!L.hasCartesianSeries,et=I("xAxis",!L.angular&&W&&F),lt=I("yAxis",W&&F),ot={};return et&&(ot.xAxis=this.getAxisDescriptionText("xAxis")),lt&&(ot.yAxis=this.getAxisDescriptionText("yAxis")),ot}getAxisDescriptionText(L){let I=this.chart,F=I[L];return I.langFormat("accessibility.axis."+L+"Description"+(F.length>1?"Plural":"Singular"),{chart:I,names:F.map(function(W){return ln(W)}),ranges:F.map(function(W){return We(W)}),numAxes:F.length})}destroy(){this.announcer&&this.announcer.destroy()}},{attr:ls}=q(),{getChartTitle:In,unhideChartElementFromAT:gs}=ae,{getFakeMouseEvent:pt}=j;function kt(L){return L.exporting?.svgElements?.[0]}class mt extends zt{init(){let I=this.chart,F=this;this.addEvent(I,"exportMenuShown",function(){F.onMenuShown()}),this.addEvent(I,"exportMenuHidden",function(){F.onMenuHidden()}),this.createProxyGroup()}onMenuHidden(){let I=this.chart.exporting?.contextMenuEl;I&&I.setAttribute("aria-hidden","true"),this.setExportButtonExpandedState("false")}onMenuShown(){let I=this.chart,F=I.exporting?.contextMenuEl;F&&(this.addAccessibleContextMenuAttribs(),gs(I,F)),this.setExportButtonExpandedState("true")}setExportButtonExpandedState(I){this.exportButtonProxy&&this.exportButtonProxy.innerElement.setAttribute("aria-expanded",I)}onChartRender(){let I=this.chart,F=I.focusElement,W=I.accessibility;this.proxyProvider.clearGroup("chartMenu"),this.proxyMenuButton(),this.exportButtonProxy&&F&&F===I.exporting?.group&&(F.focusBorder?I.setFocusToElement(F,this.exportButtonProxy.innerElement):W&&W.keyboardNavigation.tabindexContainer.focus())}proxyMenuButton(){let I,F,W=this.chart,et=this.proxyProvider,lt=kt(W);I=W.options.exporting,F=kt(W),I&&I.enabled!==!1&&I.accessibility&&I.accessibility.enabled&&F&&F.element&&lt&&(this.exportButtonProxy=et.addProxyElement("chartMenu",{click:lt},"button",{"aria-label":W.langFormat("accessibility.exporting.menuButtonLabel",{chart:W,chartTitle:In(W)}),"aria-expanded":!1,title:W.options.lang.contextButtonTitle||null}))}createProxyGroup(){this.chart&&this.proxyProvider&&this.proxyProvider.addGroup("chartMenu")}addAccessibleContextMenuAttribs(){let I=this.chart,F=I.exporting?.divElements;if(F&&F.length){F.forEach(et=>{et&&(et.tagName!=="LI"||et.children&&et.children.length?et.setAttribute("aria-hidden","true"):et.setAttribute("tabindex",-1))});let W=F[0]&&F[0].parentNode;W&&ls(W,{"aria-hidden":void 0,"aria-label":I.langFormat("accessibility.exporting.chartMenuLabel",{chart:I}),role:"list"})}}getKeyboardNavigation(){let I=this.keyCodes,F=this.chart,W=this;return new de(F,{keyCodeMap:[[[I.left,I.up],function(){return W.onKbdPrevious(this)}],[[I.right,I.down],function(){return W.onKbdNext(this)}],[[I.enter,I.space],function(){return W.onKbdClick(this)}]],validate:function(){return!!F.exporting&&F.options.exporting?.buttons?.contextButton.enabled!==!1&&F.options.exporting.enabled!==!1&&(F.options.exporting.accessibility?.enabled||!1)!==!1},init:function(){let et=W.exportButtonProxy,lt=W.chart.exporting?.group;et&&lt&&F.setFocusToElement(lt,et.innerElement)},terminate:function(){F.hideExportMenu()}})}onKbdPrevious(I){let F=this.chart,W=F.options.accessibility,et=I.response,lt=F.highlightedExportItemIx||0;for(;lt--;)if(F.highlightExportItem(lt))return et.success;return W.keyboardNavigation.wrapAround?(F.highlightLastExportItem(),et.success):et.prev}onKbdNext(I){let F=this.chart,W=F.options.accessibility,et=I.response;for(let lt=(F.highlightedExportItemIx||0)+1;lt<(F.exporting?.divElements?.length||0);++lt)if(F.highlightExportItem(lt))return et.success;return W.keyboardNavigation.wrapAround?(F.highlightExportItem(0),et.success):et.next}onKbdClick(I){let F=this.chart,W=F.highlightedExportItemIx!==void 0&&F.exporting?.divElements?.[F.highlightedExportItemIx],et=kt(F)?.element;return F.exporting?.openMenu?W&&this.fakeClickEvent(W):(et&&this.fakeClickEvent(et),F.highlightExportItem(0)),I.response.success}}(function(L){function I(){let lt=kt(this);if(lt){let ot=lt.element;ot.onclick&&(ot.onclick=function(){pt("click")})}}function F(){let lt=this.exporting?.divElements;lt&&this.exporting?.contextMenuEl&&this.exporting?.openMenu&&(lt.forEach(ot=>{ot&&ot.className==="highcharts-menu-item"&&ot.onmouseout&&ot.onmouseout(pt("mouseout"))}),this.highlightedExportItemIx=0,this.exporting.contextMenuEl.hideMenu(),this.container.focus())}function W(lt){let ot=this.exporting?.divElements?.[lt],xt=this.highlightedExportItemIx!==void 0&&this.exporting?.divElements?.[this.highlightedExportItemIx];if(ot&&ot.tagName==="LI"&&!(ot.children&&ot.children.length)){let Nt=!!(this.renderTo.getElementsByTagName("g")[0]||{}).focus;return ot.focus&&Nt&&ot.focus(),xt&&xt.onmouseout&&xt.onmouseout(pt("mouseout")),ot.onmouseover&&ot.onmouseover(pt("mouseover")),this.highlightedExportItemIx=lt,!0}return!1}function et(){if(this.exporting?.divElements){let lt=this.exporting?.divElements.length;for(;lt--;)if(this.highlightExportItem(lt))return!0}return!1}L.compose=function(lt){let ot=lt.prototype;ot.hideExportMenu||(ot.hideExportMenu=F,ot.highlightExportItem=W,ot.highlightLastExportItem=et,ot.showExportMenu=I)}})(mt||(mt={}));let ut=mt,{doc:bt,win:At}=q(),{addEvent:re,defined:_e,fireEvent:He}=q(),{getElement:Fn,simulatedEventTarget:bn}=j;class Ke{constructor(I,F){this.currentModuleIx=NaN,this.modules=[],this.init(I,F)}init(I,F){let W=this.eventProvider=new Ft;this.chart=I,this.components=F,this.modules=[],this.currentModuleIx=0,this.update(),W.addEvent(this.tabindexContainer,"keydown",et=>this.onKeydown(et)),W.addEvent(this.tabindexContainer,"focus",et=>this.onFocus(et)),["mouseup","touchend"].forEach(et=>W.addEvent(bt,et,lt=>this.onMouseUp(lt))),["mousedown","touchstart"].forEach(et=>W.addEvent(I.renderTo,et,()=>{this.isClickingChart=!0}))}update(I){let F=this.chart.options.accessibility,W=F&&F.keyboardNavigation,et=this.components;this.updateContainerTabindex(),W&&W.enabled&&I&&I.length?(this.modules=I.reduce(function(lt,ot){let xt=et[ot].getKeyboardNavigation();return lt.concat(xt)},[]),this.updateExitAnchor()):(this.modules=[],this.currentModuleIx=0,this.removeExitAnchor())}updateExitAnchor(){let I=Fn(`highcharts-end-of-chart-marker-${this.chart.index}`);this.removeExitAnchor(),I?(this.makeElementAnExitAnchor(I),this.exitAnchor=I):this.createExitAnchor()}move(I){let F=this.modules&&this.modules[this.currentModuleIx];F&&F.terminate&&F.terminate(I),this.chart.focusElement&&this.chart.focusElement.removeFocusBorder(),this.currentModuleIx+=I;let W=this.modules&&this.modules[this.currentModuleIx];if(W){if(W.validate&&!W.validate())return this.move(I);if(W.init)return W.init(I),!0}return this.currentModuleIx=0,this.exiting=!0,I>0?this.exitAnchor&&this.exitAnchor.focus():this.tabindexContainer.focus(),!1}onFocus(I){let F=this.chart,W=I.relatedTarget&&F.container.contains(I.relatedTarget),et=F.options.accessibility,lt=et&&et.keyboardNavigation;if(lt&&lt.enabled&&!this.exiting&&!this.tabbingInBackwards&&!this.isClickingChart&&!W){let ot=this.getFirstValidModuleIx();ot!==null&&(this.currentModuleIx=ot,this.modules[ot].init(1))}this.keyboardReset=!1,this.exiting=!1}onMouseUp(I){if(delete this.isClickingChart,!this.keyboardReset&&I.relatedTarget!==bn){let F=this.chart;if(!I.target||!F.container.contains(I.target)){let W=this.modules&&this.modules[this.currentModuleIx||0];W&&W.terminate&&W.terminate(),this.currentModuleIx=0}F.focusElement&&(F.focusElement.removeFocusBorder(),delete F.focusElement),this.keyboardReset=!0}}onKeydown(I){let F,W=I||At.event,et=this.modules&&this.modules.length&&this.modules[this.currentModuleIx],lt=W.target;if((!lt||lt.nodeName!=="INPUT"||lt.classList.contains("highcharts-a11y-proxy-element"))&&(this.keyboardReset=!1,this.exiting=!1,et)){let ot=et.run(W);ot===et.response.success?F=!0:ot===et.response.prev?F=this.move(-1):ot===et.response.next&&(F=this.move(1)),F&&(W.preventDefault(),W.stopPropagation())}}updateContainerTabindex(){let I,F=this.chart.options.accessibility,W=F&&F.keyboardNavigation,et=!(W&&W.enabled===!1),lt=this.chart,ot=lt.container;lt.renderTo.hasAttribute("tabindex")?(ot.removeAttribute("tabindex"),I=lt.renderTo):I=ot,this.tabindexContainer=I;let xt=I.getAttribute("tabindex");et&&!xt?I.setAttribute("tabindex","0"):et||lt.container.removeAttribute("tabindex")}createExitAnchor(){let I=this.chart,F=this.exitAnchor=bt.createElement("div");I.renderTo.appendChild(F),this.makeElementAnExitAnchor(F)}makeElementAnExitAnchor(I){let F=this.tabindexContainer.getAttribute("tabindex")||0;I.setAttribute("class","highcharts-exit-anchor"),I.setAttribute("tabindex",F),I.setAttribute("aria-hidden",!1),this.addExitAnchorEventsToEl(I)}removeExitAnchor(){if(this.exitAnchor){let I=this.eventProvider.eventRemovers.find(F=>F.element===this.exitAnchor);I&&_e(I.remover)&&this.eventProvider.removeEvent(I.remover),this.exitAnchor.parentNode&&this.exitAnchor.parentNode.removeChild(this.exitAnchor),delete this.exitAnchor}}addExitAnchorEventsToEl(I){let F=this.chart,W=this;this.eventProvider.addEvent(I,"focus",function(et){let lt=et||At.event,ot=!(lt.relatedTarget&&F.container.contains(lt.relatedTarget)||W.exiting);if(F.focusElement&&delete F.focusElement,ot){if(W.tabbingInBackwards=!0,W.tabindexContainer.focus(),delete W.tabbingInBackwards,lt.preventDefault(),W.modules&&W.modules.length){W.currentModuleIx=W.modules.length-1;let xt=W.modules[W.currentModuleIx];xt&&xt.validate&&!xt.validate()?W.move(-1):xt&&xt.init(-1)}}else W.exiting=!1})}getFirstValidModuleIx(){let I=this.modules.length;for(let F=0;F<I;++F){let W=this.modules[F];if(!W.validate||W.validate())return F}return null}destroy(){this.removeExitAnchor(),this.eventProvider.removeAddedEvents(),this.chart.container.removeAttribute("tabindex")}}function Kn(){let L=this;He(this,"dismissPopupContent",{},function(){L.tooltip&&L.tooltip.hide(0),L.hideExportMenu()})}function ss(L){(L.which||L.keyCode)===27&&q().charts&&q().charts.forEach(I=>{I&&I.dismissPopupContent&&I.dismissPopupContent()})}(Ke||(Ke={})).compose=function(L){ut.compose(L);let I=L.prototype;return!I.dismissPopupContent&&(I.dismissPopupContent=Kn,bt&&re(bt,"keydown",ss)),L};let Un=Ke;var pi=R(632),qs=R.n(pi);let{animObject:kn}=q(),{doc:li}=q(),{addEvent:yf,fireEvent:jh,isNumber:wf,pick:bu,syncTimeout:vu}=q(),{getChartTitle:Dl}=ae,{stripHTMLTagsFromString:Gr,addClass:ba,removeClass:kf}=j;function Vs(L){let I=L.legend&&L.legend.allItems,F=L.options.legend.accessibility||{},W=L.colorAxis&&L.colorAxis.some(et=>!et.dataClasses||!et.dataClasses.length);return!!(I&&I.length&&!W&&F.enabled!==!1)}function va(L,I){let F=I.legendItem||{};for(let W of(I.setState(L?"hover":"",!0),["group","label","symbol"])){let et=F[W],lt=et&&et.element||et;lt&&jh(lt,L?"mouseover":"mouseout")}}class Rl extends zt{constructor(){super(...arguments),this.highlightedLegendItemIx=NaN,this.proxyGroup=null}init(){let I=this;this.recreateProxies(),this.addEvent(qs(),"afterScroll",function(){this.chart===I.chart&&(I.proxyProvider.updateGroupProxyElementPositions("legend"),I.updateLegendItemProxyVisibility(),I.highlightedLegendItemIx>-1&&this.chart.highlightLegendItem(I.highlightedLegendItemIx))}),this.addEvent(qs(),"afterPositionItem",function(F){this.chart===I.chart&&this.chart.renderer&&I.updateProxyPositionForItem(F.item)}),this.addEvent(qs(),"afterRender",function(){this.chart===I.chart&&this.chart.renderer&&I.recreateProxies()&&vu(()=>I.proxyProvider.updateGroupProxyElementPositions("legend"),kn(bu(this.chart.renderer.globalAnimation,!0)).duration)})}updateLegendItemProxyVisibility(){let I,F=this.chart,W=F.legend,et=W.allItems||[],lt=W.currentPage||1,ot=W.clipHeight||0;et.forEach(xt=>{if(xt.a11yProxyElement){let Nt=W.pages&&W.pages.length,Dt=xt.a11yProxyElement.element,ee=!1;if(I=xt.legendItem||{},Nt){let ue=I.pageIx||0;ee=(I.y||0)+(I.label?Math.round(I.label.getBBox().height):0)-W.pages[ue]>ot||ue!==lt-1}ee?F.styledMode?ba(Dt,"highcharts-a11y-invisible"):Dt.style.visibility="hidden":(kf(Dt,"highcharts-a11y-invisible"),Dt.style.visibility="")}})}onChartRender(){Vs(this.chart)||this.removeProxies()}highlightAdjacentLegendPage(I){let F=this.chart,W=F.legend,et=(W.currentPage||1)+I,lt=W.pages||[];if(et>0&&et<=lt.length){let ot=0;for(let xt of W.allItems)((xt.legendItem||{}).pageIx||0)+1===et&&F.highlightLegendItem(ot)&&(this.highlightedLegendItemIx=ot),++ot}}updateProxyPositionForItem(I){I.a11yProxyElement&&I.a11yProxyElement.refreshPosition()}recreateProxies(){let I=li.activeElement,F=this.proxyGroup,W=I&&F&&F.contains(I);return this.removeProxies(),!!Vs(this.chart)&&(this.addLegendProxyGroup(),this.proxyLegendItems(),this.updateLegendItemProxyVisibility(),this.updateLegendTitle(),W&&this.chart.highlightLegendItem(this.highlightedLegendItemIx),!0)}removeProxies(){this.proxyProvider.removeGroup("legend")}updateLegendTitle(){let I=this.chart,F=Gr((I.legend&&I.legend.options.title&&I.legend.options.title.text||"").replace(/<br ?\/?>/g," "),I.renderer.forExport),W=I.langFormat("accessibility.legend.legendLabel"+(F?"":"NoTitle"),{chart:I,legendTitle:F,chartTitle:Dl(I)});this.proxyProvider.updateGroupAttrs("legend",{"aria-label":W})}addLegendProxyGroup(){let I=this.chart.options.accessibility.landmarkVerbosity==="all"?"region":null;this.proxyGroup=this.proxyProvider.addGroup("legend","ul",{"aria-label":"_placeholder_",role:I})}proxyLegendItems(){let I,F=this;((this.chart.legend||{}).allItems||[]).forEach(W=>{(I=W.legendItem||{}).label&&I.label.element&&F.proxyLegendItem(W)})}proxyLegendItem(I){let F=I.legendItem||{},W=I.legendItem?.label,et=W?.element,lt=F.label?.styles?.textOverflow==="ellipsis";if(!F.label||!F.group)return;let ot=this.chart.langFormat("accessibility.legend.legendItem",{chart:this.chart,itemName:Gr(I.name,this.chart.renderer.forExport),item:I}),xt={tabindex:-1,"aria-pressed":I.visible,"aria-label":ot,title:""};lt&&(et.textContent||"").indexOf("…")!==-1&&(xt.title=W?.textStr);let Nt=F.group.div?F.label:F.group;I.a11yProxyElement=this.proxyProvider.addProxyElement("legend",{click:F.label,visual:Nt.element},"button",xt)}getKeyboardNavigation(){let I=this.keyCodes,F=this,W=this.chart;return new de(W,{keyCodeMap:[[[I.left,I.right,I.up,I.down],function(et){return F.onKbdArrowKey(this,et)}],[[I.enter,I.space],function(){return F.onKbdClick(this)}],[[I.pageDown,I.pageUp],function(et){let lt=et===I.pageDown?1:-1;return F.highlightAdjacentLegendPage(lt),this.response.success}]],validate:function(){return F.shouldHaveLegendNavigation()},init:function(){W.highlightLegendItem(0),F.highlightedLegendItemIx=0},terminate:function(){F.highlightedLegendItemIx=-1,W.legend.allItems.forEach(et=>va(!1,et))}})}onKbdArrowKey(I,F){let{keyCodes:{left:W,up:et},highlightedLegendItemIx:lt,chart:ot}=this,xt=ot.legend.allItems.length,Nt=ot.options.accessibility.keyboardNavigation.wrapAround,Dt=F===W||F===et?-1:1;return ot.highlightLegendItem(lt+Dt)?this.highlightedLegendItemIx+=Dt:Nt&&xt>1&&(this.highlightedLegendItemIx=Dt>0?0:xt-1,ot.highlightLegendItem(this.highlightedLegendItemIx)),I.response.success}onKbdClick(I){let F=this.chart.legend.allItems[this.highlightedLegendItemIx];return F&&F.a11yProxyElement&&F.a11yProxyElement.click(),I.response.success}shouldHaveLegendNavigation(){if(!Vs(this.chart))return!1;let I=this.chart,F=(I.options.legend||{}).accessibility||{};return!!(I.legend.display&&F.keyboardNavigation&&F.keyboardNavigation.enabled)}destroy(){this.removeProxies()}}function Cf(L){let I=this.legend.allItems,F=this.accessibility&&this.accessibility.components.legend.highlightedLegendItemIx,W=I[L],et=W?.legendItem||{};if(W){var lt;let ot,xt;wf(F)&&I[F]&&va(!1,I[F]),lt=this.legend,ot=(lt.allItems[L].legendItem||{}).pageIx,xt=lt.currentPage,ot!==void 0&&ot+1!==xt&&lt.scroll(1+ot-xt);let Nt=et.label,Dt=W.a11yProxyElement&&W.a11yProxyElement.innerElement;return Nt&&Nt.element&&Dt&&this.setFocusToElement(Nt,Dt),va(!0,W),!0}return!1}function yu(L){let I=this.chart.options.accessibility,F=L.item;I.enabled&&F&&F.a11yProxyElement&&F.a11yProxyElement.innerElement.setAttribute("aria-pressed",L.visible?"true":"false")}(Rl||(Rl={})).compose=function(L,I){let F=L.prototype;F.highlightLegendItem||(F.highlightLegendItem=Cf,yf(I,"afterColorizeItem",yu))};let wu=Rl;var Sf=R(532),Yo=R.n(Sf);let{isTouchDevice:Qa}=q(),{addEvent:tl,merge:ku,pick:Hr}=q(),Ni=[];function Cu(){this.navigator&&this.navigator.setBaseSeries(null,!1)}function el(){let L,I,F,W=this.legend,et=this.navigator;if(et){L=W&&W.options,I=et.xAxis,F=et.yAxis;let{scrollbarHeight:lt,scrollButtonSize:ot}=et;this.inverted?(et.left=et.opposite?this.chartWidth-lt-et.height:this.spacing[3]+lt,et.top=this.plotTop+ot):(et.left=Hr(I.left,this.plotLeft+ot),et.top=et.navigatorOptions.top||this.chartHeight-et.height-lt-(this.scrollbar?.options.margin||0)-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(L&&L.verticalAlign==="bottom"&&L.layout!=="proximate"&&L.enabled&&!L.floating?W.legendHeight+Hr(L.margin,10):0)-(this.titleOffset?this.titleOffset[2]:0)),I&&F&&(this.inverted?I.options.left=F.options.left=et.left:I.options.top=F.options.top=et.top,I.setAxisSize(),F.setAxisSize())}}function Xh(L){!this.navigator&&!this.scroller&&(this.options.navigator.enabled||this.options.scrollbar.enabled)&&(this.scroller=this.navigator=new m(this),Hr(L.redraw,!0)&&this.redraw(L.animation))}function dr(){let L=this.options;(L.navigator.enabled||L.scrollbar.enabled)&&(this.scroller=this.navigator=new m(this))}function Ml(){let L=this.options,I=L.navigator,F=L.rangeSelector;if((I&&I.enabled||F&&F.enabled)&&(!Qa&&this.zooming.type==="x"||Qa&&this.zooming.pinchType==="x"))return!1}function Tf(L){let I=L.navigator;if(I&&L.xAxis[0]){let F=L.xAxis[0].getExtremes();I.render(F.min,F.max)}}function nl(L){let I=L.options.navigator||{},F=L.options.scrollbar||{};!this.navigator&&!this.scroller&&(I.enabled||F.enabled)&&(ku(!0,this.options.navigator,I),ku(!0,this.options.scrollbar,F),delete L.options.navigator,delete L.options.scrollbar)}let pc=function(L,I){if(q().pushUnique(Ni,L)){let F=L.prototype;m=I,F.callbacks.push(Tf),tl(L,"afterAddSeries",Cu),tl(L,"afterSetChartSize",el),tl(L,"afterUpdate",Xh),tl(L,"beforeRender",dr),tl(L,"beforeShowResetZoom",Ml),tl(L,"update",nl)}},{isTouchDevice:gc}=q(),{addEvent:lo,correctFloat:ya,defined:Ol,isNumber:sl,pick:Su}=q();function wa(){this.navigatorAxis||(this.navigatorAxis=new ka(this))}function qh(L){let I,F=this.chart,W=F.options,et=W.navigator,lt=this.navigatorAxis,ot=F.zooming.pinchType,xt=W.rangeSelector,Nt=F.zooming.type;if(this.isXAxis&&(et?.enabled||xt?.enabled)){if(Nt==="y"&&L.trigger==="zoom")I=!1;else if((L.trigger==="zoom"&&Nt==="xy"||gc&&ot==="xy")&&this.options.range){let Dt=lt.previousZoom;Ol(L.min)?lt.previousZoom=[this.min,this.max]:Dt&&(L.min=Dt[0],L.max=Dt[1],lt.previousZoom=void 0)}}I!==void 0&&L.preventDefault()}class ka{static compose(I){I.keepProps.includes("navigatorAxis")||(I.keepProps.push("navigatorAxis"),lo(I,"init",wa),lo(I,"setExtremes",qh))}constructor(I){this.axis=I}destroy(){this.axis=void 0}toFixedRange(I,F,W,et){let lt=this.axis,ot=(lt.pointRange||0)/2,xt=Su(W,lt.translate(I,!0,!lt.horiz)),Nt=Su(et,lt.translate(F,!0,!lt.horiz));return Ol(W)||(xt=ya(xt+ot)),Ol(et)||(Nt=ya(Nt-ot)),sl(xt)&&sl(Nt)||(xt=Nt=void 0),{min:xt,max:Nt}}}var If=R(620),Tu=R.n(If),mc=R(512),xc=R.n(mc);let{parse:Kh}=Tu(),{seriesTypes:Fl}=xc(),Iu={height:40,margin:22,maskInside:!0,handles:{width:7,borderRadius:0,height:15,symbols:["navigator-handle","navigator-handle"],enabled:!0,lineWidth:1,backgroundColor:"#f2f2f2",borderColor:"#999999"},maskFill:Kh("#667aff").setOpacity(.3).get(),outlineColor:"#999999",outlineWidth:1,series:{type:Fl.areaspline===void 0?"line":"areaspline",fillOpacity:.05,lineWidth:1,compare:null,sonification:{enabled:!1},dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,firstAnchor:"firstPoint",anchor:"middle",lastAnchor:"lastPoint",units:[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2,3,4]],["week",[1,2,3]],["month",[1,3,6]],["year",null]]},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",className:"highcharts-navigator-series",lineColor:null,marker:{enabled:!1},threshold:null},xAxis:{className:"highcharts-navigator-xaxis",tickLength:0,lineWidth:0,gridLineColor:"#e6e6e6",id:"navigator-x-axis",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#000000",fontSize:"0.7em",opacity:.6,textOutline:"2px contrast"},x:3,y:-4},crosshair:!1},yAxis:{className:"highcharts-navigator-yaxis",gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,id:"navigator-y-axis",maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:void 0},tickLength:0,tickWidth:0}},{defined:_o,isNumber:Yh,pick:Pl}=q(),{relativeLength:bc}=q(),co={"navigator-handle":function(L,I,F,W,et={}){var lt,ot,xt,Nt;let Dt=et.width?et.width/2:F,ee=bc(et.borderRadius||0,Math.min(2*Dt,W));return[["M",-1.5,(W=et.height||W)/2-3.5],["L",-1.5,W/2+4.5],["M",.5,W/2-3.5],["L",.5,W/2+4.5],...(lt=-Dt-1,ot=2*Dt+1,xt=W,Nt={r:ee},Nt?.r?(function(ue,fe,ke,Ye,Je){let dn=Je?.r||0;return[["M",ue+dn,fe],["L",ue+ke-dn,fe],["A",dn,dn,0,0,1,ue+ke,fe+dn],["L",ue+ke,fe+Ye-dn],["A",dn,dn,0,0,1,ue+ke-dn,fe+Ye],["L",ue+dn,fe+Ye],["A",dn,dn,0,0,1,ue,fe+Ye-dn],["L",ue,fe+dn],["A",dn,dn,0,0,1,ue+dn,fe],["Z"]]})(lt,.5,ot,xt,Nt):[["M",lt,.5],["L",lt+ot,.5],["L",lt+ot,.5+xt],["L",lt,.5+xt],["Z"]])]}};var Eu=R(608),Zh=R.n(Eu);let{defined:_u}=q(),{defaultOptions:Jh}=q(),{composed:Au}=q(),{getRendererType:vc}=Zh(),{setFixedRange:Di}={setFixedRange:function(L){let I=this.xAxis[0];_u(I.dataMax)&&_u(I.dataMin)&&L?this.fixedRange=Math.min(L,I.dataMax-I.dataMin):this.fixedRange=L}},{addEvent:Er,extend:Zo,pushUnique:Ef}=q();function _f(){this.chart.navigator&&!this.options.isInternal&&this.chart.navigator.setBaseSeries(null,!1)}let $u=function(L,I,F){ka.compose(I),Ef(Au,"Navigator")&&(L.prototype.setFixedRange=Di,Zo(vc().prototype.symbols,co),Zo(Jh,{navigator:Iu}),Er(F,"afterUpdate",_f))},{composed:Nu}=q(),{addEvent:Ks,correctFloat:_r,defined:Jo,pick:Qh,pushUnique:Ar}=q();(function(L){let I;function F(ot){let xt=Qh(ot.options?.min,ot.min),Nt=Qh(ot.options?.max,ot.max);return{axisMin:xt,axisMax:Nt,scrollMin:Jo(ot.dataMin)?Math.min(xt,ot.min??1/0,ot.dataMin,ot.threshold??1/0):xt,scrollMax:ot.treeGrid?.adjustedMax??(Jo(ot.dataMax)?Math.max(Nt,ot.max??-1/0,ot.dataMax,ot.threshold??-1/0):Nt)}}function W(){let ot=this.scrollbar,xt=ot&&!ot.options.opposite,Nt=this.horiz?2:xt?3:1;ot&&(this.chart.scrollbarsOffsets=[0,0],this.chart.axisOffset[Nt]+=ot.size+(ot.options.margin||0))}function et(){let ot=this;ot.options?.scrollbar?.enabled&&(ot.options.scrollbar.vertical=!ot.horiz,ot.options.startOnTick=ot.options.endOnTick=!1,ot.scrollbar=new I(ot.chart.renderer,ot.options.scrollbar,ot.chart),Ks(ot.scrollbar,"changed",function(xt){let Nt,Dt,{axisMin:ee,axisMax:ue,scrollMin:fe,scrollMax:ke}=F(ot),Ye=ot.toPixels(fe),Je=ot.toPixels(ke)-Ye;if(Jo(ee)&&Jo(ue))if(ot.horiz&&!ot.reversed||!ot.horiz&&ot.reversed?(Nt=Math.min(ke,ot.toValue(Ye+Je*this.to)),Dt=Math.max(fe,ot.toValue(Ye+Je*this.from))):(Nt=Math.min(ke,ot.toValue(Ye+Je*(1-this.from))),Dt=Math.max(fe,ot.toValue(Ye+Je*(1-this.to)))),this.shouldUpdateExtremes(xt.DOMType)){let dn=xt.DOMType!=="mousemove"&&xt.DOMType!=="touchmove"&&void 0;ot.setExtremes(_r(Dt),_r(Nt),!0,dn,xt)}else this.setRange(this.from,this.to)}))}function lt(){let ot,xt,Nt,{scrollMin:Dt,scrollMax:ee}=F(this),ue=this.scrollbar,fe=(this.axisTitleMargin||0)+(this.titleOffset||0),ke=this.chart.scrollbarsOffsets,Ye=this.options.margin||0;if(ue&&ke){if(this.horiz)this.opposite||(ke[1]+=fe),ue.position(this.left,this.top+this.height+2+ke[1]-(this.opposite?Ye:0),this.width,this.height),this.opposite||(ke[1]+=Ye),ot=1;else{let Je;this.opposite&&(ke[0]+=fe),Je=ue.options.opposite?this.left+this.width+2+ke[0]-(this.opposite?0:Ye):this.opposite?0:Ye,ue.position(Je,this.top,this.width,this.height),this.opposite&&(ke[0]+=Ye),ot=0}if(ke[ot]+=ue.size+(ue.options.margin||0),isNaN(Dt)||isNaN(ee)||!Jo(this.min)||!Jo(this.max)||Jo(this.dataMin)&&this.dataMin===this.dataMax)ue.setRange(0,1);else if(this.min===this.max){let Je=this.pointRange/(this.dataMax+1);xt=Je*this.min,Nt=Je*(this.max+1),ue.setRange(xt,Nt)}else xt=(this.toPixels(this.min)-this.toPixels(Dt))/(this.toPixels(ee)-this.toPixels(Dt)),Nt=(this.toPixels(this.max)-this.toPixels(Dt))/(this.toPixels(ee)-this.toPixels(Dt)),this.horiz&&!this.reversed||!this.horiz&&this.reversed?ue.setRange(xt,Nt):ue.setRange(1-Nt,1-xt)}}L.compose=function(ot,xt){Ar(Nu,"Axis.Scrollbar")&&(I=xt,Ks(ot,"afterGetOffset",W),Ks(ot,"afterInit",et),Ks(ot,"afterRender",lt))}})(C||(C={}));let Ll=C,Du={height:10,barBorderRadius:5,buttonBorderRadius:0,buttonsEnabled:!1,liveRedraw:void 0,margin:void 0,minWidth:6,opposite:!0,step:.2,zIndex:3,barBackgroundColor:"#cccccc",barBorderWidth:0,barBorderColor:"#cccccc",buttonArrowColor:"#333333",buttonBackgroundColor:"#e6e6e6",buttonBorderColor:"#cccccc",buttonBorderWidth:1,rifleColor:"none",trackBackgroundColor:"rgba(255, 255, 255, 0.001)",trackBorderColor:"#cccccc",trackBorderRadius:5,trackBorderWidth:1},{defaultOptions:jr}=q(),{composed:Ca}=q(),{addEvent:Ao,correctFloat:$o,crisp:Bl,defined:uo,destroyObjectProperties:Ru,extend:yc,fireEvent:Sa,merge:wc,pick:Ta,pushUnique:Af,removeEvent:kc}=q();class Qo{static compose(I){Ll.compose(I,Qo),Af(Ca,"Scrollbar")&&yc(jr,{scrollbar:Du})}static swapXY(I,F){return F&&I.forEach(W=>{let et,lt=W.length;for(let ot=0;ot<lt;ot+=2)typeof(et=W[ot+1])=="number"&&(W[ot+1]=W[ot+2],W[ot+2]=et)}),I}constructor(I,F,W){this._events=[],this.chartX=0,this.chartY=0,this.from=0,this.scrollbarButtons=[],this.scrollbarLeft=0,this.scrollbarStrokeWidth=1,this.scrollbarTop=0,this.size=0,this.to=0,this.trackBorderWidth=1,this.x=0,this.y=0,this.init(I,F,W)}addEvents(){let I=this.options.inverted?[1,0]:[0,1],F=this.scrollbarButtons,W=this.scrollbarGroup.element,et=this.track.element,lt=this.mouseDownHandler.bind(this),ot=this.mouseMoveHandler.bind(this),xt=this.mouseUpHandler.bind(this),Nt=[[F[I[0]].element,"click",this.buttonToMinClick.bind(this)],[F[I[1]].element,"click",this.buttonToMaxClick.bind(this)],[et,"click",this.trackClick.bind(this)],[W,"mousedown",lt],[W.ownerDocument,"mousemove",ot],[W.ownerDocument,"mouseup",xt],[W,"touchstart",lt],[W.ownerDocument,"touchmove",ot],[W.ownerDocument,"touchend",xt]];Nt.forEach(function(Dt){Ao.apply(null,Dt)}),this._events=Nt}buttonToMaxClick(I){let F=(this.to-this.from)*Ta(this.options.step,.2);this.updatePosition(this.from+F,this.to+F),Sa(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:I})}buttonToMinClick(I){let F=$o(this.to-this.from)*Ta(this.options.step,.2);this.updatePosition($o(this.from-F),$o(this.to-F)),Sa(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:I})}cursorToScrollbarPosition(I){let F=this.options,W=F.minWidth>this.calculatedWidth?F.minWidth:0;return{chartX:(I.chartX-this.x-this.xOffset)/(this.barWidth-W),chartY:(I.chartY-this.y-this.yOffset)/(this.barWidth-W)}}destroy(){let I=this,F=I.chart.scroller;I.removeEvents(),["track","scrollbarRifles","scrollbar","scrollbarGroup","group"].forEach(function(W){I[W]&&I[W].destroy&&(I[W]=I[W].destroy())}),F&&I===F.scrollbar&&(F.scrollbar=null,Ru(F.scrollbarButtons))}drawScrollbarButton(I){let F=this.renderer,W=this.scrollbarButtons,et=this.options,lt=this.size,ot=F.g().add(this.group);if(W.push(ot),et.buttonsEnabled){let xt=F.rect().addClass("highcharts-scrollbar-button").add(ot);this.chart.styledMode||xt.attr({stroke:et.buttonBorderColor,"stroke-width":et.buttonBorderWidth,fill:et.buttonBackgroundColor}),xt.attr(xt.crisp({x:-.5,y:-.5,width:lt,height:lt,r:et.buttonBorderRadius},xt.strokeWidth()));let Nt=F.path(Qo.swapXY([["M",lt/2+(I?-1:1),lt/2-3],["L",lt/2+(I?-1:1),lt/2+3],["L",lt/2+(I?2:-2),lt/2]],et.vertical)).addClass("highcharts-scrollbar-arrow").add(W[I]);this.chart.styledMode||Nt.attr({fill:et.buttonArrowColor})}}init(I,F,W){this.scrollbarButtons=[],this.renderer=I,this.userOptions=F,this.options=wc(Du,jr.scrollbar,F),this.options.margin=Ta(this.options.margin,10),this.chart=W,this.size=Ta(this.options.size,this.options.height),F.enabled&&(this.render(),this.addEvents())}mouseDownHandler(I){let F=this.chart.pointer?.normalize(I)||I,W=this.cursorToScrollbarPosition(F);this.chartX=W.chartX,this.chartY=W.chartY,this.initPositions=[this.from,this.to],this.grabbedCenter=!0}mouseMoveHandler(I){let F,W=this.chart.pointer?.normalize(I)||I,et=this.options.vertical?"chartY":"chartX",lt=this.initPositions||[];this.grabbedCenter&&(!I.touches||I.touches[0][et]!==0)&&(F=this.cursorToScrollbarPosition(W)[et]-this[et],this.hasDragged=!0,this.updatePosition(lt[0]+F,lt[1]+F),this.hasDragged&&Sa(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:I.type,DOMEvent:I}))}mouseUpHandler(I){this.hasDragged&&Sa(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMType:I.type,DOMEvent:I}),this.grabbedCenter=this.hasDragged=this.chartX=this.chartY=null}position(I,F,W,et){let{buttonsEnabled:lt,margin:ot=0,vertical:xt}=this.options,Nt=this.rendered?"animate":"attr",Dt=et,ee=0;this.group.show(),this.x=I,this.y=F+this.trackBorderWidth,this.width=W,this.height=et,this.xOffset=Dt,this.yOffset=ee,xt?(this.width=this.yOffset=W=ee=this.size,this.xOffset=Dt=0,this.yOffset=ee=lt?this.size:0,this.barWidth=et-(lt?2*W:0),this.x=I+=ot):(this.height=et=this.size,this.xOffset=Dt=lt?this.size:0,this.barWidth=W-(lt?2*et:0),this.y=this.y+ot),this.group[Nt]({translateX:I,translateY:this.y}),this.track[Nt]({width:W,height:et}),this.scrollbarButtons[1][Nt]({translateX:xt?0:W-Dt,translateY:xt?et-ee:0})}removeEvents(){this._events.forEach(function(I){kc.apply(null,I)}),this._events.length=0}render(){let I=this.renderer,F=this.options,W=this.size,et=this.chart.styledMode,lt=I.g("scrollbar").attr({zIndex:F.zIndex}).hide().add();this.group=lt,this.track=I.rect().addClass("highcharts-scrollbar-track").attr({r:F.trackBorderRadius||0,height:W,width:W}).add(lt),et||this.track.attr({fill:F.trackBackgroundColor,stroke:F.trackBorderColor,"stroke-width":F.trackBorderWidth});let ot=this.trackBorderWidth=this.track.strokeWidth();this.track.attr({x:-Bl(0,ot),y:-Bl(0,ot)}),this.scrollbarGroup=I.g().add(lt),this.scrollbar=I.rect().addClass("highcharts-scrollbar-thumb").attr({height:W-ot,width:W-ot,r:F.barBorderRadius||0}).add(this.scrollbarGroup),this.scrollbarRifles=I.path(Qo.swapXY([["M",-3,W/4],["L",-3,2*W/3],["M",0,W/4],["L",0,2*W/3],["M",3,W/4],["L",3,2*W/3]],F.vertical)).addClass("highcharts-scrollbar-rifles").add(this.scrollbarGroup),et||(this.scrollbar.attr({fill:F.barBackgroundColor,stroke:F.barBorderColor,"stroke-width":F.barBorderWidth}),this.scrollbarRifles.attr({stroke:F.rifleColor,"stroke-width":1})),this.scrollbarStrokeWidth=this.scrollbar.strokeWidth(),this.scrollbarGroup.translate(-Bl(0,this.scrollbarStrokeWidth),-Bl(0,this.scrollbarStrokeWidth)),this.drawScrollbarButton(0),this.drawScrollbarButton(1)}setRange(I,F){let W,et,lt=this.options,ot=lt.vertical,xt=lt.minWidth,Nt=this.barWidth,Dt=!this.rendered||this.hasDragged||this.chart.navigator&&this.chart.navigator.hasDragged?"attr":"animate";if(!uo(Nt))return;let ee=Nt*Math.min(F,1);W=Math.ceil(Nt*(I=Math.max(I,0))),this.calculatedWidth=et=$o(ee-W),et<xt&&(W=(Nt-xt+et)*I,et=xt);let ue=Math.floor(W+this.xOffset+this.yOffset),fe=et/2-.5;this.from=I,this.to=F,ot?(this.scrollbarGroup[Dt]({translateY:ue}),this.scrollbar[Dt]({height:et}),this.scrollbarRifles[Dt]({translateY:fe}),this.scrollbarTop=ue,this.scrollbarLeft=0):(this.scrollbarGroup[Dt]({translateX:ue}),this.scrollbar[Dt]({width:et}),this.scrollbarRifles[Dt]({translateX:fe}),this.scrollbarLeft=ue,this.scrollbarTop=0),et<=12?this.scrollbarRifles.hide():this.scrollbarRifles.show(),lt.showFull===!1&&(I<=0&&F>=1?this.group.hide():this.group.show()),this.rendered=!0}shouldUpdateExtremes(I){return Ta(this.options.liveRedraw,q().svg&&!q().isTouchDevice&&!this.chart.boosted)||I==="mouseup"||I==="touchend"||!uo(I)}trackClick(I){let F=this.chart.pointer?.normalize(I)||I,W=this.to-this.from,et=this.y+this.scrollbarTop,lt=this.x+this.scrollbarLeft;this.options.vertical&&F.chartY>et||!this.options.vertical&&F.chartX>lt?this.updatePosition(this.from+W,this.to+W):this.updatePosition(this.from-W,this.to-W),Sa(this,"changed",{from:this.from,to:this.to,trigger:"scrollbar",DOMEvent:I})}update(I){this.destroy(),this.init(this.chart.renderer,wc(!0,this.options,I),this.chart)}updatePosition(I,F){F>1&&(I=$o(1-$o(F-I)),F=1),I<0&&(F=$o(F-I),I=0),this.from=I,this.to=F}}Qo.defaultOptions=Du;var $f=R(540),Nf=R.n($f);let{defaultOptions:Mu}=q(),{isTouchDevice:Df}=q(),{prototype:{symbols:td}}=Nf(),{addEvent:yi,clamp:Ou,correctFloat:il,defined:Ia,destroyObjectProperties:Cc,erase:$r,extend:Fu,find:Sc,fireEvent:Pu,isArray:ed,isNumber:ho,merge:No,pick:Li,removeEvent:Do,splat:zl}=q();function Tc(L,...I){let F=[].filter.call(I,ho);if(F.length)return Math[L].apply(0,F)}class b{static compose(I,F,W){pc(I,b),$u(I,F,W)}constructor(I){this.isDirty=!1,this.scrollbarHeight=0,this.init(I)}drawHandle(I,F,W,et){let lt=this.navigatorOptions.handles.height;this.handles[F][et](W?{translateX:Math.round(this.left+this.height/2),translateY:Math.round(this.top+parseInt(I,10)+.5-lt)}:{translateX:Math.round(this.left+parseInt(I,10)),translateY:Math.round(this.top+this.height/2-lt/2-1)})}drawOutline(I,F,W,et){let lt=this.navigatorOptions.maskInside,ot=this.outline.strokeWidth(),xt=ot/2,Nt=ot%2/2,Dt=this.scrollButtonSize,ee=this.size,ue=this.top,fe=this.height,ke=ue-xt,Ye=ue+fe,Je=this.left,dn,Xn;W?(dn=ue+F+Nt,F=ue+I+Nt,Xn=[["M",Je+fe,ue-Dt-Nt],["L",Je+fe,dn],["L",Je,dn],["M",Je,F],["L",Je+fe,F],["L",Je+fe,ue+ee+Dt]],lt&&Xn.push(["M",Je+fe,dn-xt],["L",Je+fe,F+xt])):(Je-=Dt,I+=Je+Dt-Nt,F+=Je+Dt-Nt,Xn=[["M",Je,ke],["L",I,ke],["L",I,Ye],["M",F,Ye],["L",F,ke],["L",Je+ee+2*Dt,ke]],lt&&Xn.push(["M",I-xt,ke],["L",F+xt,ke])),this.outline[et]({d:Xn})}drawMasks(I,F,W,et){let lt,ot,xt,Nt,Dt=this.left,ee=this.top,ue=this.height;W?(xt=[Dt,Dt,Dt],Nt=[ee,ee+I,ee+F],ot=[ue,ue,ue],lt=[I,F-I,this.size-F]):(xt=[Dt,Dt+I,Dt+F],Nt=[ee,ee,ee],ot=[I,F-I,this.size-F],lt=[ue,ue,ue]),this.shades.forEach((fe,ke)=>{fe[et]({x:xt[ke],y:Nt[ke],width:ot[ke],height:lt[ke]})})}renderElements(){let I=this,F=I.navigatorOptions,W=F.maskInside,et=I.chart,lt=et.inverted,ot=et.renderer,xt={cursor:lt?"ns-resize":"ew-resize"},Nt=I.navigatorGroup??(I.navigatorGroup=ot.g("navigator").attr({zIndex:8,visibility:"hidden"}).add());if([!W,W,!W].forEach((Dt,ee)=>{let ue=I.shades[ee]??(I.shades[ee]=ot.rect().addClass("highcharts-navigator-mask"+(ee===1?"-inside":"-outside")).add(Nt));et.styledMode||(ue.attr({fill:Dt?F.maskFill:"rgba(0,0,0,0)"}),ee===1&&ue.css(xt))}),I.outline||(I.outline=ot.path().addClass("highcharts-navigator-outline").add(Nt)),et.styledMode||I.outline.attr({"stroke-width":F.outlineWidth,stroke:F.outlineColor}),F.handles?.enabled){let Dt=F.handles,{height:ee,width:ue}=Dt;[0,1].forEach(fe=>{let ke=Dt.symbols[fe];if(I.handles[fe]&&I.handles[fe].symbolUrl===ke){if(!I.handles[fe].isImg&&I.handles[fe].symbolName!==ke){let Ye=td[ke].call(td,-ue/2-1,0,ue,ee);I.handles[fe].attr({d:Ye}),I.handles[fe].symbolName=ke}}else I.handles[fe]?.destroy(),I.handles[fe]=ot.symbol(ke,-ue/2-1,0,ue,ee,Dt),I.handles[fe].attr({zIndex:7-fe}).addClass("highcharts-navigator-handle highcharts-navigator-handle-"+["left","right"][fe]).add(Nt),I.addMouseEvents();et.inverted&&I.handles[fe].attr({rotation:90,rotationOriginX:Math.floor(-ue/2),rotationOriginY:(ee+ue)/2}),et.styledMode||I.handles[fe].attr({fill:Dt.backgroundColor,stroke:Dt.borderColor,"stroke-width":Dt.lineWidth,width:Dt.width,height:Dt.height,x:-ue/2-1,y:0}).css(xt)})}}update(I,F=!1){let W=this.chart,et=W.options.chart.inverted!==W.scrollbar?.options.vertical;if(No(!0,W.options.navigator,I),this.navigatorOptions=W.options.navigator||{},this.setOpposite(),Ia(I.enabled)||et)return this.destroy(),this.navigatorEnabled=I.enabled||this.navigatorEnabled,this.init(W);if(this.navigatorEnabled&&(this.isDirty=!0,I.adaptToUpdatedData===!1&&this.baseSeries.forEach(lt=>{Do(lt,"updatedData",this.updatedDataHandler)},this),I.adaptToUpdatedData&&this.baseSeries.forEach(lt=>{lt.eventsToUnbind.push(yi(lt,"updatedData",this.updatedDataHandler))},this),(I.series||I.baseSeries)&&this.setBaseSeries(void 0,!1),I.height||I.xAxis||I.yAxis)){this.height=I.height??this.height;let lt=this.getXAxisOffsets();this.xAxis.update({...I.xAxis,offsets:lt,[W.inverted?"width":"height"]:this.height,[W.inverted?"height":"width"]:void 0},!1),this.yAxis.update({...I.yAxis,[W.inverted?"width":"height"]:this.height},!1)}F&&W.redraw()}render(I,F,W,et){let lt=this.chart,ot=this.xAxis,xt=ot.pointRange||0,Nt=ot.navigatorAxis.fake?lt.xAxis[0]:ot,Dt=this.navigatorEnabled,ee=this.rendered,ue=lt.inverted,fe=lt.xAxis[0].minRange,ke=lt.xAxis[0].options.maxRange,Ye=this.scrollButtonSize,Je,dn,Xn,Jn=this.scrollbarHeight,Bn,pn;if(this.hasDragged&&!Ia(W))return;if(this.isDirty&&this.renderElements(),I=il(I-xt/2),F=il(F+xt/2),!ho(I)||!ho(F))if(ee)W=0,et=Li(ot.width,Nt.width);else return;this.left=Li(ot.left,lt.plotLeft+Ye+(ue?lt.plotWidth:0));let us=this.size=Bn=Li(ot.len,(ue?lt.plotHeight:lt.plotWidth)-2*Ye);Je=ue?Jn:Bn+2*Ye,W=Li(W,ot.toPixels(I,!0)),et=Li(et,ot.toPixels(F,!0)),ho(W)&&Math.abs(W)!==1/0||(W=0,et=Je);let Ts=ot.toValue(W,!0),ks=ot.toValue(et,!0),ms=Math.abs(il(ks-Ts));ms<fe?this.grabbedLeft?W=ot.toPixels(ks-fe-xt,!0):this.grabbedRight&&(et=ot.toPixels(Ts+fe+xt,!0)):Ia(ke)&&il(ms-xt)>ke&&(this.grabbedLeft?W=ot.toPixels(ks-ke-xt,!0):this.grabbedRight&&(et=ot.toPixels(Ts+ke+xt,!0))),this.zoomedMax=Ou(Math.max(W,et),0,us),this.zoomedMin=Ou(this.fixedWidth?this.zoomedMax-this.fixedWidth:Math.min(W,et),0,us),this.range=this.zoomedMax-this.zoomedMin,us=Math.round(this.zoomedMax);let oi=Math.round(this.zoomedMin);Dt&&(this.navigatorGroup.attr({visibility:"inherit"}),pn=ee&&!this.hasDragged?"animate":"attr",this.drawMasks(oi,us,ue,pn),this.drawOutline(oi,us,ue,pn),this.navigatorOptions.handles.enabled&&(this.drawHandle(oi,0,ue,pn),this.drawHandle(us,1,ue,pn))),this.scrollbar&&(ue?(Xn=this.top-Ye,dn=this.left-Jn+(Dt||!Nt.opposite?0:(Nt.titleOffset||0)+Nt.axisTitleMargin),Jn=Bn+2*Ye):(Xn=this.top+(Dt?this.height:-Jn),dn=this.left-Ye),this.scrollbar.position(dn,Xn,Je,Jn),this.scrollbar.setRange(this.zoomedMin/(Bn||1),this.zoomedMax/(Bn||1))),this.rendered=!0,this.isDirty=!1,Pu(this,"afterRender")}addMouseEvents(){let I=this,F=I.chart,W=F.container,et=[],lt,ot;I.mouseMoveHandler=lt=function(xt){I.onMouseMove(xt)},I.mouseUpHandler=ot=function(xt){I.onMouseUp(xt)},(et=I.getPartsEvents("mousedown")).push(yi(F.renderTo,"mousemove",lt),yi(W.ownerDocument,"mouseup",ot),yi(F.renderTo,"touchmove",lt),yi(W.ownerDocument,"touchend",ot)),et.concat(I.getPartsEvents("touchstart")),I.eventsToUnbind=et,I.series&&I.series[0]&&et.push(yi(I.series[0].xAxis,"foundExtremes",function(){F.navigator.modifyNavigatorAxisExtremes()}))}getPartsEvents(I){let F=this,W=[];return["shades","handles"].forEach(function(et){F[et].forEach(function(lt,ot){W.push(yi(lt.element,I,function(xt){F[et+"Mousedown"](xt,ot)}))})}),W}shadesMousedown(I,F){I=this.chart.pointer?.normalize(I)||I;let W=this.chart,et=this.xAxis,lt=this.zoomedMin,ot=this.size,xt=this.range,Nt=this.left,Dt=I.chartX,ee,ue,fe,ke;W.inverted&&(Dt=I.chartY,Nt=this.top),F===1?(this.grabbedCenter=Dt,this.fixedWidth=xt,this.dragOffset=Dt-lt):(ke=Dt-Nt-xt/2,F===0?ke=Math.max(0,ke):F===2&&ke+xt>=ot&&(ke=ot-xt,this.reversedExtremes?(ke-=xt,ue=this.getUnionExtremes().dataMin):ee=this.getUnionExtremes().dataMax),ke!==lt&&(this.fixedWidth=xt,Ia((fe=et.navigatorAxis.toFixedRange(ke,ke+xt,ue,ee)).min)&&Pu(this,"setRange",{min:Math.min(fe.min,fe.max),max:Math.max(fe.min,fe.max),redraw:!0,eventArguments:{trigger:"navigator"}})))}handlesMousedown(I,F){I=this.chart.pointer?.normalize(I)||I;let W=this.chart,et=W.xAxis[0],lt=this.reversedExtremes;F===0?(this.grabbedLeft=!0,this.otherHandlePos=this.zoomedMax,this.fixedExtreme=lt?et.min:et.max):(this.grabbedRight=!0,this.otherHandlePos=this.zoomedMin,this.fixedExtreme=lt?et.max:et.min),W.setFixedRange(void 0)}onMouseMove(I){let F=this,W=F.chart,et=F.navigatorSize,lt=F.range,ot=F.dragOffset,xt=W.inverted,Nt=F.left,Dt;(!I.touches||I.touches[0].pageX!==0)&&(Dt=(I=W.pointer?.normalize(I)||I).chartX,xt&&(Nt=F.top,Dt=I.chartY),F.grabbedLeft?(F.hasDragged=!0,F.render(0,0,Dt-Nt,F.otherHandlePos)):F.grabbedRight?(F.hasDragged=!0,F.render(0,0,F.otherHandlePos,Dt-Nt)):F.grabbedCenter&&(F.hasDragged=!0,Dt<ot?Dt=ot:Dt>et+ot-lt&&(Dt=et+ot-lt),F.render(0,0,Dt-ot,Dt-ot+lt)),F.hasDragged&&F.scrollbar&&Li(F.scrollbar.options.liveRedraw,!Df&&!this.chart.boosted)&&(I.DOMType=I.type,setTimeout(function(){F.onMouseUp(I)},0)))}onMouseUp(I){let F,W,et,lt,ot,xt,Nt=this.chart,Dt=this.xAxis,ee=this.scrollbar,ue=I.DOMEvent||I,fe=Nt.inverted,ke=this.rendered&&!this.hasDragged?"animate":"attr";(this.hasDragged&&(!ee||!ee.hasDragged)||I.trigger==="scrollbar")&&(et=this.getUnionExtremes(),this.zoomedMin===this.otherHandlePos?lt=this.fixedExtreme:this.zoomedMax===this.otherHandlePos&&(ot=this.fixedExtreme),this.zoomedMax===this.size&&(ot=this.reversedExtremes?et.dataMin:et.dataMax),this.zoomedMin===0&&(lt=this.reversedExtremes?et.dataMax:et.dataMin),Ia((xt=Dt.navigatorAxis.toFixedRange(this.zoomedMin,this.zoomedMax,lt,ot)).min)&&Pu(this,"setRange",{min:Math.min(xt.min,xt.max),max:Math.max(xt.min,xt.max),redraw:!0,animation:!this.hasDragged&&null,eventArguments:{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:ue}})),I.DOMType!=="mousemove"&&I.DOMType!=="touchmove"&&(this.grabbedLeft=this.grabbedRight=this.grabbedCenter=this.fixedWidth=this.fixedExtreme=this.otherHandlePos=this.hasDragged=this.dragOffset=null),this.navigatorEnabled&&ho(this.zoomedMin)&&ho(this.zoomedMax)&&(W=Math.round(this.zoomedMin),F=Math.round(this.zoomedMax),this.shades&&this.drawMasks(W,F,fe,ke),this.outline&&this.drawOutline(W,F,fe,ke),this.navigatorOptions.handles.enabled&&Object.keys(this.handles).length===this.handles.length&&(this.drawHandle(W,0,fe,ke),this.drawHandle(F,1,fe,ke)))}removeEvents(){this.eventsToUnbind&&(this.eventsToUnbind.forEach(function(I){I()}),this.eventsToUnbind=void 0),this.removeBaseSeriesEvents()}removeBaseSeriesEvents(){let I=this.baseSeries||[];this.navigatorEnabled&&I[0]&&(this.navigatorOptions.adaptToUpdatedData!==!1&&I.forEach(function(F){Do(F,"updatedData",this.updatedDataHandler)},this),I[0].xAxis&&Do(I[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes))}getXAxisOffsets(){return this.chart.inverted?[this.scrollButtonSize,0,-this.scrollButtonSize,0]:[0,-this.scrollButtonSize,0,this.scrollButtonSize]}init(I){let F=I.options,W=F.navigator||{},et=W.enabled,lt=F.scrollbar||{},ot=lt.enabled,xt=et&&W.height||0,Nt=ot&&lt.height||0,Dt=lt.buttonsEnabled&&Nt||0;this.handles=[],this.shades=[],this.chart=I,this.setBaseSeries(),this.height=xt,this.scrollbarHeight=Nt,this.scrollButtonSize=Dt,this.scrollbarEnabled=ot,this.navigatorEnabled=et,this.navigatorOptions=W,this.scrollbarOptions=lt,this.setOpposite();let ee=this,ue=ee.baseSeries,fe=I.xAxis.length,ke=I.yAxis.length,Ye=ue&&ue[0]&&ue[0].xAxis||I.xAxis[0]||{options:{}};if(I.isDirtyBox=!0,ee.navigatorEnabled){let Je=this.getXAxisOffsets();ee.xAxis=new(Yo())(I,No({breaks:Ye.options.breaks,ordinal:Ye.options.ordinal,overscroll:Ye.options.overscroll},W.xAxis,{type:"datetime",yAxis:W.yAxis?.id,index:fe,isInternal:!0,offset:0,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:Ye.options.ordinal?0:Ye.options.minPadding,maxPadding:Ye.options.ordinal?0:Ye.options.maxPadding,zoomEnabled:!1},I.inverted?{offsets:Je,width:xt}:{offsets:Je,height:xt}),"xAxis"),ee.yAxis=new(Yo())(I,No(W.yAxis,{alignTicks:!1,offset:0,index:ke,isInternal:!0,reversed:Li(W.yAxis&&W.yAxis.reversed,I.yAxis[0]&&I.yAxis[0].reversed,!1),zoomEnabled:!1},I.inverted?{width:xt}:{height:xt}),"yAxis"),ue||W.series.data?ee.updateNavigatorSeries(!1):I.series.length===0&&(ee.unbindRedraw=yi(I,"beforeRedraw",function(){I.series.length>0&&!ee.series&&(ee.setBaseSeries(),ee.unbindRedraw())})),ee.reversedExtremes=I.inverted&&!ee.xAxis.reversed||!I.inverted&&ee.xAxis.reversed,ee.renderElements(),ee.addMouseEvents()}else ee.xAxis={chart:I,navigatorAxis:{fake:!0},translate:function(Je,dn){let Xn=I.xAxis[0],Jn=Xn.getExtremes(),Bn=Xn.len-2*Dt,pn=Tc("min",Xn.options.min,Jn.dataMin),us=Tc("max",Xn.options.max,Jn.dataMax)-pn;return dn?Je*us/Bn+pn:Bn*(Je-pn)/us},toPixels:function(Je){return this.translate(Je)},toValue:function(Je){return this.translate(Je,!0)}},ee.xAxis.navigatorAxis.axis=ee.xAxis,ee.xAxis.navigatorAxis.toFixedRange=ka.prototype.toFixedRange.bind(ee.xAxis.navigatorAxis);if(I.options.scrollbar?.enabled){let Je=No(I.options.scrollbar,{vertical:I.inverted});ho(Je.margin)||(Je.margin=I.inverted?-3:3),I.scrollbar=ee.scrollbar=new Qo(I.renderer,Je,I),yi(ee.scrollbar,"changed",function(dn){let Xn=ee.size,Jn=Xn*this.to,Bn=Xn*this.from;ee.hasDragged=ee.scrollbar.hasDragged,ee.render(0,0,Bn,Jn),this.shouldUpdateExtremes(dn.DOMType)&&setTimeout(function(){ee.onMouseUp(dn)})})}ee.addBaseSeriesEvents(),ee.addChartEvents()}setOpposite(){let I=this.navigatorOptions,F=this.navigatorEnabled,W=this.chart;this.opposite=Li(I.opposite,!!(!F&&W.inverted))}getUnionExtremes(I){let F,W=this.chart.xAxis[0],et=this.chart.time,lt=this.xAxis,ot=lt.options,xt=W.options;return I&&W.dataMin===null||(F={dataMin:Li(et.parse(ot?.min),Tc("min",et.parse(xt.min),W.dataMin,lt.dataMin,lt.min)),dataMax:Li(et.parse(ot?.max),Tc("max",et.parse(xt.max),W.dataMax,lt.dataMax,lt.max))}),F}setBaseSeries(I,F){let W=this.chart,et=this.baseSeries=[];I=I||W.options&&W.options.navigator.baseSeries||(W.series.length?Sc(W.series,lt=>!lt.options.isInternal).index:0),(W.series||[]).forEach((lt,ot)=>{!lt.options.isInternal&&(lt.options.showInNavigator||(ot===I||lt.options.id===I)&&lt.options.showInNavigator!==!1)&&et.push(lt)}),this.xAxis&&!this.xAxis.navigatorAxis.fake&&this.updateNavigatorSeries(!0,F)}updateNavigatorSeries(I,F){let W=this,et=W.chart,lt=W.baseSeries,ot={enableMouseTracking:!1,index:null,linkedTo:null,group:"nav",padXAxis:!1,xAxis:this.navigatorOptions.xAxis?.id,yAxis:this.navigatorOptions.yAxis?.id,showInLegend:!1,stacking:void 0,isInternal:!0,states:{inactive:{opacity:1}}},xt=W.series=(W.series||[]).filter(fe=>{let ke=fe.baseSeries;return!(0>lt.indexOf(ke))||(ke&&(Do(ke,"updatedData",W.updatedDataHandler),delete ke.navigatorSeries),fe.chart&&fe.destroy(),!1)}),Nt,Dt,ee=W.navigatorOptions.series,ue;lt&&lt.length&&lt.forEach(fe=>{let ke=fe.navigatorSeries,Ye=Fu({color:fe.color,visible:fe.visible},ed(ee)?Mu.navigator.series:ee);if(ke&&W.navigatorOptions.adaptToUpdatedData===!1)return;ot.name="Navigator "+lt.length,ue=(Nt=fe.options||{}).navigatorOptions||{},Ye.dataLabels=zl(Ye.dataLabels),(Dt=No(Nt,ot,Ye,ue)).pointRange=Li(Ye.pointRange,ue.pointRange,Mu.plotOptions[Dt.type||"line"].pointRange);let Je=ue.data||Ye.data;W.hasNavigatorData=W.hasNavigatorData||!!Je,Dt.data=Je||Nt.data?.slice(0),ke&&ke.options?ke.update(Dt,F):(fe.navigatorSeries=et.initSeries(Dt),et.setSortedData(),fe.navigatorSeries.baseSeries=fe,xt.push(fe.navigatorSeries))}),(ee.data&&!(lt&&lt.length)||ed(ee))&&(W.hasNavigatorData=!1,(ee=zl(ee)).forEach((fe,ke)=>{ot.name="Navigator "+(xt.length+1),(Dt=No(Mu.navigator.series,{color:et.series[ke]&&!et.series[ke].options.isInternal&&et.series[ke].color||et.options.colors[ke]||et.options.colors[0]},ot,fe)).data=fe.data,Dt.data&&(W.hasNavigatorData=!0,xt.push(et.initSeries(Dt)))})),I&&this.addBaseSeriesEvents()}addBaseSeriesEvents(){let I=this,F=I.baseSeries||[];F[0]&&F[0].xAxis&&F[0].eventsToUnbind.push(yi(F[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes)),F.forEach(W=>{W.eventsToUnbind.push(yi(W,"show",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!0,!1)})),W.eventsToUnbind.push(yi(W,"hide",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!1,!1)})),this.navigatorOptions.adaptToUpdatedData!==!1&&W.xAxis&&W.eventsToUnbind.push(yi(W,"updatedData",this.updatedDataHandler)),W.eventsToUnbind.push(yi(W,"remove",function(){F&&$r(F,W),this.navigatorSeries&&I.series&&($r(I.series,this.navigatorSeries),Ia(this.navigatorSeries.options)&&this.navigatorSeries.remove(!1),delete this.navigatorSeries)}))})}getBaseSeriesMin(I){return this.baseSeries.reduce(function(F,W){return Math.min(F,W.getColumn("x")[0]??F)},I)}modifyNavigatorAxisExtremes(){let I=this.xAxis;if(I.getExtremes!==void 0){let F=this.getUnionExtremes(!0);F&&(F.dataMin!==I.min||F.dataMax!==I.max)&&(I.min=F.dataMin,I.max=F.dataMax)}}modifyBaseAxisExtremes(){let I,F,W=this.chart.navigator,et=this.getExtremes(),lt=et.min,ot=et.max,xt=et.dataMin,Nt=et.dataMax,Dt=ot-lt,ee=W.stickToMin,ue=W.stickToMax,fe=Li(this.ordinal?.convertOverscroll(this.options.overscroll),0),ke=W.series&&W.series[0],Ye=!!this.setExtremes;!(this.eventArgs&&this.eventArgs.trigger==="rangeSelectorButton")&&(ee&&(I=(F=xt)+Dt),ue&&(I=Nt+fe,ee||(F=Math.max(xt,I-Dt,W.getBaseSeriesMin(ke&&ke.xData?ke.xData[0]:-Number.MAX_VALUE)))),Ye&&(ee||ue)&&ho(F)&&(this.min=this.userMin=F,this.max=this.userMax=I)),W.stickToMin=W.stickToMax=null}updatedDataHandler(){let I=this.chart.navigator,F=this.navigatorSeries,W=I.reversedExtremes?Math.round(I.zoomedMin)===0:Math.round(I.zoomedMax)>=Math.round(I.size);I.stickToMax=Li(this.chart.options.navigator&&this.chart.options.navigator.stickToMax,W),I.stickToMin=I.shouldStickToMin(this,I),F&&!I.hasNavigatorData&&(F.options.pointStart=this.getColumn("x")[0],F.setData(this.options.data,!1,null,!1))}shouldStickToMin(I,F){let W=F.getBaseSeriesMin(I.getColumn("x")[0]),et=I.xAxis,lt=et.max,ot=et.min,xt=et.options.range;return!!(ho(lt)&&ho(ot))&&(xt&&lt-W>0?lt-W<xt:ot<=W)}addChartEvents(){this.eventsToUnbind||(this.eventsToUnbind=[]),this.eventsToUnbind.push(yi(this.chart,"redraw",function(){let I=this.navigator,F=I&&(I.baseSeries&&I.baseSeries[0]&&I.baseSeries[0].xAxis||this.xAxis[0]);F&&I.render(F.min,F.max)}),yi(this.chart,"getMargins",function(){let I=this.navigator,F=I.opposite?"plotTop":"marginBottom";this.inverted&&(F=I.opposite?"marginRight":"plotLeft"),this[F]=(this[F]||0)+(I.navigatorEnabled||!this.inverted?I.height+(this.scrollbar?.options.margin||0)+I.scrollbarHeight:0)+(I.navigatorOptions.margin||0)}),yi(b,"setRange",function(I){this.chart.xAxis[0].setExtremes(I.min,I.max,I.redraw,I.animation,I.eventArguments)}))}destroy(){this.removeEvents(),this.xAxis&&($r(this.chart.xAxis,this.xAxis),$r(this.chart.axes,this.xAxis)),this.yAxis&&($r(this.chart.yAxis,this.yAxis),$r(this.chart.axes,this.yAxis)),(this.series||[]).forEach(I=>{I.destroy&&I.destroy()}),["series","xAxis","yAxis","shades","outline","scrollbarTrack","scrollbarRifles","scrollbarGroup","scrollbar","navigatorGroup","rendered"].forEach(I=>{this[I]&&this[I].destroy&&this[I].destroy(),this[I]=null}),[this.handles].forEach(I=>{Cc(I)}),this.baseSeries.forEach(I=>{I.navigatorSeries=void 0}),this.navigatorEnabled=!1}}let{animObject:_}=q(),{format:O}=It(),{clamp:H,pick:Q,syncTimeout:tt}=q(),{getFakeMouseEvent:dt}=j,{getAxisRangeDescription:Rt,fireEventOnWrappedOrUnwrappedElement:$t}=ae,Qt=class extends zt{init(){let L=this.chart,I=this;this.announcer=new vi(L,"polite"),this.addEvent(b,"afterRender",function(){this.chart===I.chart&&this.chart.renderer&&tt(()=>{I.proxyProvider.updateGroupProxyElementPositions("navigator"),I.updateHandleValues()},_(Q(this.chart.renderer.globalAnimation,!0)).duration)})}onChartUpdate(){let L=this.chart,I=L.options,F=I.navigator;if(F.enabled&&F.accessibility?.enabled){let W=I.accessibility.landmarkVerbosity,et=I.lang.accessibility?.navigator.groupLabel;this.proxyProvider.removeGroup("navigator"),this.proxyProvider.addGroup("navigator","div",{role:W==="all"?"region":"group","aria-label":O(et,{chart:L},L)});let lt=I.lang.accessibility?.navigator.handleLabel;[0,1].forEach(ot=>{let xt=this.getHandleByIx(ot);if(xt){let Nt=this.proxyProvider.addProxyElement("navigator",{click:xt},"input",{type:"range","aria-label":O(lt,{handleIx:ot,chart:L},L)});this[ot?"maxHandleProxy":"minHandleProxy"]=Nt.innerElement,Nt.innerElement.style.pointerEvents="none",Nt.innerElement.oninput=()=>this.updateNavigator()}}),this.updateHandleValues()}else this.proxyProvider.removeGroup("navigator")}getNavigatorHandleNavigation(L){let I=this,F=this.chart,W=L?this.maxHandleProxy:this.minHandleProxy,et=this.keyCodes;return new de(F,{keyCodeMap:[[[et.left,et.right,et.up,et.down],function(lt){if(W){let ot=lt===et.left||lt===et.up?-1:1;W.value=""+H(parseFloat(W.value)+ot,0,100),I.updateNavigator(()=>{let xt=I.getHandleByIx(L);xt&&F.setFocusToElement(xt,W)})}return this.response.success}]],init:()=>{F.setFocusToElement(this.getHandleByIx(L),W)},validate:()=>!!(this.getHandleByIx(L)&&W&&F.options.navigator.accessibility?.enabled)})}getKeyboardNavigation(){return[this.getNavigatorHandleNavigation(0),this.getNavigatorHandleNavigation(1)]}destroy(){this.updateNavigatorThrottleTimer&&clearTimeout(this.updateNavigatorThrottleTimer),this.proxyProvider.removeGroup("navigator"),this.announcer&&this.announcer.destroy()}updateHandleValues(){let L=this.chart.navigator;if(L&&this.minHandleProxy&&this.maxHandleProxy){let I=L.size;this.minHandleProxy.value=""+Math.round(L.zoomedMin/I*100),this.maxHandleProxy.value=""+Math.round(L.zoomedMax/I*100)}}getHandleByIx(L){let I=this.chart.navigator;return I&&I.handles&&I.handles[L]}updateNavigator(L){let I=F=>{let W=this.chart,{navigator:et,pointer:lt}=W,ot=this.chart.accessibility?.keyboardNavigation;if(et&&lt&&this.minHandleProxy&&this.maxHandleProxy){let xt=lt.getChartPosition(),Nt=parseFloat(this.minHandleProxy.value)/100*et.size,Dt=parseFloat(this.maxHandleProxy.value)/100*et.size;[[0,"mousedown",et.zoomedMin],[0,"mousemove",Nt],[0,"mouseup",Nt],[1,"mousedown",et.zoomedMax],[1,"mousemove",Dt],[1,"mouseup",Dt]].forEach(([fe,ke,Ye])=>{let Je=this.getHandleByIx(fe)?.element;Je&&$t(Je,dt(ke,{x:xt.left+et.left+Ye,y:xt.top+et.top},Je))}),ot&&(ot.keyboardReset=!1),F&&F();let ee=W.options.lang.accessibility?.navigator.changeAnnouncement,ue=Rt(W.xAxis[0]);this.announcer.announce(O(ee,{axisRangeDescription:ue,chart:W},W))}};this.updateNavigatorThrottleTimer&&clearTimeout(this.updateNavigatorThrottleTimer),this.updateNavigatorThrottleTimer=setTimeout(I.bind(this,L),20)}},{getPointAnnotationTexts:oe}=tn,{getAxisDescription:ye,getSeriesFirstPointElement:se,getSeriesA11yElement:xe,unhideChartElementFromAT:en}=ae,{format:Ln,numberFormat:Pn}=It(),{reverseChildNodes:Js,stripHTMLTagsFromString:ws}=j,{find:er,isNumber:Ri,isString:ys,pick:fo,defined:cs}=q();function ci(L){let I=L.chart.options.accessibility.series.pointDescriptionEnabledThreshold;return!!(I!==!1&&L.points&&L.points.length>=+I)}function Lu(L,I){let F=L.series,W=F.chart,et=W.options.accessibility.point||{},lt=F.options.accessibility&&F.options.accessibility.point||{},ot=F.tooltipOptions||{},xt=W.options.lang;return Ri(I)?Pn(I,lt.valueDecimals||et.valueDecimals||ot.valueDecimals||-1,xt.decimalPoint,xt.accessibility.thousandsSep||xt.thousandsSep):I}function Bu(L,I){let F=L[I];return L.chart.langFormat("accessibility.series."+I+"Description",{name:ye(F),series:L})}function Ro(L){let I,F,W,et,lt,ot,xt,Nt,Dt,ee,ue,fe,ke=L.series,Ye=ke.chart.series.length>1||ke.options.name,Je=(ot=(lt=L.series).chart,Nt=(xt=lt.options.accessibility)&&xt.point&&xt.point.valueDescriptionFormat||ot.options.accessibility.point.valueDescriptionFormat,ee=(Dt=fo(lt.xAxis&&lt.xAxis.options.accessibility&&lt.xAxis.options.accessibility.enabled,!ot.angular&&lt.type!=="flowmap"))?(I=(function(Bn){let pn=Bn.series,us=pn.chart,Ts=pn.options.accessibility&&pn.options.accessibility.point||{},ks=us.options.accessibility.point||{},ms=pn.xAxis&&pn.xAxis.dateTime;if(ms){let oi=ms.getXDateFormat(Bn.x||0,us.options.tooltip.dateTimeLabelFormats),Kr=Ts.dateFormatter&&Ts.dateFormatter(Bn)||ks.dateFormatter&&ks.dateFormatter(Bn)||Ts.dateFormat||ks.dateFormat||oi;return us.time.dateFormat(Kr,Bn.x||0,void 0)}})(L),F=(L.series.xAxis||{}).categories&&cs(L.category)&&(""+L.category).replace("<br/>"," "),W=cs(L.id)&&0>(""+L.id).indexOf("highcharts-"),et="x, "+L.x,L.name||I||F||(W?L.id:et)):"",Ln(Nt,{point:L,index:cs(L.index)?L.index+1:"",xDescription:ee,value:(function(Bn){let pn=Bn.series,us=pn.chart.options.accessibility.point||{},Ts=pn.chart.options.accessibility&&pn.chart.options.accessibility.point||{},ks=pn.tooltipOptions||{},ms=Ts.valuePrefix||us.valuePrefix||ks.valuePrefix||"",oi=Ts.valueSuffix||us.valueSuffix||ks.valueSuffix||"",Kr=Bn.value!==void 0?"value":"y",Nr=Lu(Bn,Bn[Kr]);if(Bn.isNull)return pn.chart.langFormat("accessibility.series.nullPointValue",{point:Bn});if(pn.pointArrayMap){let Dr,Vl,Ul;return Dr=ms||"",Vl=oi||"",Ul=function(mo){let Fo=Lu(Bn,fo(Bn[mo],Bn.options[mo]));return Fo!==void 0?mo+": "+Dr+Fo+Vl:Fo},Bn.series.pointArrayMap.reduce(function(mo,Fo){let nr=Ul(Fo);return nr?mo+(mo.length?", ":"")+nr:mo},"")}return ms+Nr+oi})(L),separator:Dt?", ":""},ot)),dn=L.options&&L.options.accessibility&&L.options.accessibility.description,Xn=Ye?" "+ke.name+".":"",Jn=(ue=L.series.chart,(fe=oe(L)).length?ue.langFormat("accessibility.series.pointAnnotationsDescription",{point:L,annotations:fe}):"");return L.accessibility=L.accessibility||{},L.accessibility.valueDescription=Je,Je+(dn?" "+dn:"")+Xn+(Jn?" "+Jn:"")}function Mo(L){let I,F=L.chart,W=F.types||[],et=(I=(L.options.accessibility||{}).description)&&L.chart.langFormat("accessibility.series.description",{description:I,series:L})||"",lt=function(ke){return F[ke]&&F[ke].length>1&&L[ke]},ot=L.index+1,xt=Bu(L,"xAxis"),Nt=Bu(L,"yAxis"),Dt={seriesNumber:ot,series:L,chart:F},ee=W.length>1?"Combination":"",ue=F.langFormat("accessibility.series.summary."+L.type+ee,Dt)||F.langFormat("accessibility.series.summary.default"+ee,Dt),fe=(lt("yAxis")?" "+Nt+".":"")+(lt("xAxis")?" "+xt+".":"");return Ln(fo(L.options.accessibility&&L.options.accessibility.descriptionFormat,F.options.accessibility.series.descriptionFormat,""),{seriesDescription:ue,authorDescription:et?" "+et:"",axisDescription:fe,series:L,chart:F,seriesNumber:ot},void 0)}let fr={defaultPointDescriptionFormatter:Ro,defaultSeriesDescriptionFormatter:Mo,describeSeries:function(L){let I=L.chart,F=se(L),W=xe(L),et=I.is3d&&I.is3d();if(W){let lt,ot,xt,Nt,Dt,ee,ue,fe,ke,Ye,Je;if(W.lastChild!==F||et||Js(W),lt=L.options.accessibility||{},xt=!ci(L)&&!lt.exposeAsGroupOnly,ot=L.chart.options.accessibility.keyboardNavigation.seriesNavigation,Nt=!!(L.points&&(L.points.length<+ot.pointNavigationEnabledThreshold||ot.pointNavigationEnabledThreshold===!1)),Dt=L.chart.options.accessibility.point.describeNull,(xt||Nt)&&L.points.forEach(dn=>{let Xn,Jn,Bn,pn,us,Ts=dn.graphic&&dn.graphic.element||(Jn=(Xn=dn.series)&&Xn.chart,Bn=Xn&&Xn.is("sunburst"),pn=dn.isNull,us=Jn&&Jn.options.accessibility.point.describeNull,pn&&!Bn&&us&&(function(ms){let oi,Kr=ms.series,Nr=(function(Fo){let nr=Fo.index;if(!Fo.series||!Fo.series.data||!cs(nr))return null;let Tx=Fo.series.options?.nullInteraction;return er(Fo.series.data,function(Gl){return!!(Gl&&Gl.index!==void 0&&(Tx||Gl.index>nr)&&Gl.graphic&&Gl.graphic.element)})||null})(ms),Dr=Nr&&Nr.graphic,Vl=Dr?Dr.parentGroup:Kr.graph||Kr.group,Ul=Nr?{x:fo(ms.plotX,Nr.plotX,0),y:fo(ms.plotY,Nr.plotY,0)}:{x:fo(ms.plotX,0),y:fo(ms.plotY,0)},mo=((oi=ms.series.chart.renderer.rect(Ul.x,Ul.y,1,1)).attr({class:"highcharts-a11y-mock-point",fill:"none",opacity:0,"fill-opacity":0,"stroke-opacity":0}),oi);if(Vl&&Vl.element)return ms.graphic=mo,ms.hasMockGraphic=!0,mo.add(Vl),Vl.element.insertBefore(mo.element,Dr?Dr.element:null),mo.element})(dn)),ks=dn.options&&dn.options.accessibility&&dn.options.accessibility.enabled===!1;if(Ts){if(dn.isNull&&!Dt)return void Ts.setAttribute("aria-hidden",!0);if(Ts.setAttribute("tabindex","-1"),L.chart.styledMode||(Ts.style.outline="none"),xt&&!ks){let ms,oi,Kr,Nr;ms=dn.series,oi=ms.options.accessibility?.point||{},Kr=ms.chart.options.accessibility.point||{},Nr=ws(ys(oi.descriptionFormat)&&Ln(oi.descriptionFormat,dn,ms.chart)||oi.descriptionFormatter?.(dn)||ys(Kr.descriptionFormat)&&Ln(Kr.descriptionFormat,dn,ms.chart)||Kr.descriptionFormatter?.(dn)||Ro(dn),ms.chart.renderer.forExport),Ts.setAttribute("role","img"),Ts.setAttribute("aria-label",Nr)}else Ts.setAttribute("aria-hidden",!0)}}),en(I,W),fe=(ue=(ee=L.chart).options.chart).options3d&&ue.options3d.enabled,ke=ee.series.length>1,Ye=ee.options.accessibility.series.describeSingleSeries,Je=(L.options.accessibility||{}).exposeAsGroupOnly,!(fe&&ke)&&(ke||Ye||Je||ci(L))){let dn,Xn,Jn;dn=L.options.accessibility||{},Jn=(Xn=L.chart.options.accessibility).landmarkVerbosity,dn.exposeAsGroupOnly?W.setAttribute("role","img"):Jn==="all"?W.setAttribute("role","region"):W.setAttribute("role","group"),W.setAttribute("tabindex","-1"),L.chart.styledMode||(W.style.outline="none"),W.setAttribute("aria-label",ws(Xn.series.descriptionFormatter&&Xn.series.descriptionFormatter(L)||Mo(L),L.chart.renderer.forExport))}else W.removeAttribute("aria-label")}}},{composed:rl}=q(),{addEvent:Ea,defined:Xr,pushUnique:tx}=q(),{getChartTitle:ex}=ae,{defaultPointDescriptionFormatter:nd,defaultSeriesDescriptionFormatter:Rf}=fr;function Mf(L){return!!L.options.accessibility.announceNewData.enabled}class Ic{constructor(I){this.dirty={allSeries:{}},this.lastAnnouncementTime=0,this.chart=I}init(){let I=this.chart,F=I.options.accessibility.announceNewData.interruptUser?"assertive":"polite";this.lastAnnouncementTime=0,this.dirty={allSeries:{}},this.eventProvider=new Ft,this.announcer=new vi(I,F),this.addEventListeners()}destroy(){this.eventProvider.removeAddedEvents(),this.announcer.destroy()}addEventListeners(){let I=this,F=this.chart,W=this.eventProvider;W.addEvent(F,"afterApplyDrilldown",function(){I.lastAnnouncementTime=0}),W.addEvent(F,"afterAddSeries",function(et){I.onSeriesAdded(et.series)}),W.addEvent(F,"redraw",function(){I.announceDirtyData()})}onSeriesAdded(I){Mf(this.chart)&&(this.dirty.hasDirty=!0,this.dirty.allSeries[I.name+I.index]=I,this.dirty.newSeries=Xr(this.dirty.newSeries)?void 0:I)}announceDirtyData(){let I=this.chart,F=this;if(I.options.accessibility.announceNewData&&this.dirty.hasDirty){var W;let et,lt=this.dirty.newPoint;lt&&(lt=(et=(W=lt).series.data.filter(ot=>W.x===ot.x&&W.y===ot.y)).length===1?et[0]:W),this.queueAnnouncement(Object.keys(this.dirty.allSeries).map(ot=>F.dirty.allSeries[ot]),this.dirty.newSeries,lt),this.dirty={allSeries:{}}}}queueAnnouncement(I,F,W){let et=this.chart.options.accessibility.announceNewData;if(et.enabled){var lt;let ot,xt=+new Date,Nt=xt-this.lastAnnouncementTime,Dt=Math.max(0,et.minAnnounceInterval-Nt),ee=(lt=this.queuedAnnouncement&&this.queuedAnnouncement.series,Object.keys(ot=(lt||[]).concat(I||[]).reduce((fe,ke)=>(fe[ke.name+ke.index]=ke,fe),{})).map(fe=>ot[fe])),ue=this.buildAnnouncementMessage(ee,F,W);ue&&(this.queuedAnnouncement&&clearTimeout(this.queuedAnnouncementTimer),this.queuedAnnouncement={time:xt,message:ue,series:ee},this.queuedAnnouncementTimer=setTimeout(()=>{this&&this.announcer&&(this.lastAnnouncementTime=+new Date,this.announcer.announce(this.queuedAnnouncement.message),delete this.queuedAnnouncement,delete this.queuedAnnouncementTimer)},Dt))}}buildAnnouncementMessage(I,F,W){let et=this.chart,lt=et.options.accessibility.announceNewData;if(lt.announcementFormatter){let Dt=lt.announcementFormatter(I,F,W);if(Dt!==!1)return Dt.length?Dt:null}let ot=q().charts&&q().charts.length>1?"Multiple":"Single",xt=F?"newSeriesAnnounce"+ot:W?"newPointAnnounce"+ot:"newDataAnnounce",Nt=ex(et);return et.langFormat("accessibility.announceNewData."+xt,{chartTitle:Nt,seriesDesc:F?Rf(F):null,pointDesc:W?nd(W):null,point:W,series:F})}}function Of(L){let I=this.chart,F=I.accessibility?.components.series.newDataAnnouncer;F&&F.chart===I&&Mf(I)&&(F.dirty.newPoint=Xr(F.dirty.newPoint)?void 0:L.point)}function nx(){let L=this.chart,I=L.accessibility?.components.series.newDataAnnouncer;I&&I.chart===L&&Mf(L)&&(I.dirty.hasDirty=!0,I.dirty.allSeries[this.name+this.index]=this)}(Ic||(Ic={})).compose=function(L){tx(rl,"A11y.NDA")&&(Ea(L,"addPoint",Of),Ea(L,"updatedData",nx))};let sd=Ic,{doc:Wl,win:sx}=q(),{attr:id,css:lg,merge:ix}=q(),{fireEventOnWrappedOrUnwrappedElement:Oo}=ae,{cloneMouseEvent:Ec,cloneTouchEvent:rx,getFakeMouseEvent:cg,removeElement:ox}=j,Ff=class{constructor(L,I,F="button",W,et){this.chart=L,this.target=I,this.eventProvider=new Ft;const lt=this.innerElement=Wl.createElement(F),ot=this.element=W?Wl.createElement(W):lt;L.styledMode||this.hideElementVisually(lt),W&&(W!=="li"||L.styledMode||(ot.style.listStyle="none"),ot.appendChild(lt),this.element=ot),this.updateTarget(I,et)}click(){let L=this.getTargetPosition();L.x+=L.width/2,L.y+=L.height/2;let I=cg("click",L);Oo(this.target.click,I)}updateTarget(L,I){this.target=L,this.updateCSSClassName();let F=I||{};Object.keys(F).forEach(et=>{F[et]===null&&delete F[et]});let W=this.getTargetAttr(L.click,"aria-label");id(this.innerElement,ix(W?{"aria-label":W}:{},F)),this.eventProvider.removeAddedEvents(),this.addProxyEventsToElement(this.innerElement,L.click),this.refreshPosition()}refreshPosition(){let L=this.getTargetPosition();lg(this.innerElement,{width:(L.width||1)+"px",height:(L.height||1)+"px",left:(Math.round(L.x)||0)+"px",top:(Math.round(L.y)||0)+"px"})}remove(){this.eventProvider.removeAddedEvents(),ox(this.element)}updateCSSClassName(){let L=lt=>lt.indexOf("highcharts-no-tooltip")>-1,I=this.chart.legend,F=I.group&&I.group.div,W=L(F&&F.className||""),et=L(this.getTargetAttr(this.target.click,"class")||"");this.innerElement.className=W||et?"highcharts-a11y-proxy-element highcharts-no-tooltip":"highcharts-a11y-proxy-element"}addProxyEventsToElement(L,I){["click","touchstart","touchend","touchcancel","touchmove","mouseover","mouseenter","mouseleave","mouseout"].forEach(F=>{let W=F.indexOf("touch")===0;this.eventProvider.addEvent(L,F,et=>{let lt=W?rx(et):Ec(et);I&&Oo(I,lt),et.stopPropagation(),W||et.preventDefault()},{passive:!1})})}hideElementVisually(L){lg(L,{borderWidth:0,backgroundColor:"transparent",cursor:"pointer",outline:"none",opacity:.001,filter:"alpha(opacity=1)",zIndex:999,overflow:"hidden",padding:0,margin:0,display:"block",position:"absolute","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)"})}getTargetPosition(){let L=this.target.click,I=L.element?L.element:L,F=this.target.visual||I,W=this.chart.renderTo,et=this.chart.pointer;if(W&&F?.getBoundingClientRect&&et){let lt=sx.scrollY||Wl.documentElement.scrollTop,ot=F.getBoundingClientRect(),xt=et.getChartPosition();return{x:(ot.left-xt.left)/xt.scaleX,y:(ot.top+lt-xt.top)/xt.scaleY,width:ot.right/xt.scaleX-ot.left/xt.scaleX,height:ot.bottom/xt.scaleY-ot.top/xt.scaleY}}return{x:0,y:0,width:1,height:1}}getTargetAttr(L,I){return L.element?L.element.getAttribute(I):L.getAttribute(I)}},{doc:ax}=q(),{attr:ug,css:hg}=q(),{unhideChartElementFromAT:dg}=ae,{removeChildNodes:zu}=j,qr=class{constructor(L){this.chart=L,this.domElementProvider=new J,this.groups={},this.groupOrder=[],this.beforeChartProxyPosContainer=this.createProxyPosContainer("before"),this.afterChartProxyPosContainer=this.createProxyPosContainer("after"),this.update()}addProxyElement(L,I,F="button",W){let et=this.groups[L];if(!et)throw Error("ProxyProvider.addProxyElement: Invalid group key "+L);let lt=et.type==="ul"||et.type==="ol"?"li":void 0,ot=new Ff(this.chart,I,F,lt,W);return et.proxyContainerElement.appendChild(ot.element),et.proxyElements.push(ot),ot}addGroup(L,I="div",F){let W,et=this.groups[L];if(et)return et.groupElement;let lt=this.domElementProvider.createElement(I);return F&&F.role&&I!=="div"?(W=this.domElementProvider.createElement("div")).appendChild(lt):W=lt,W.className="highcharts-a11y-proxy-group highcharts-a11y-proxy-group-"+L.replace(/\W/g,"-"),this.groups[L]={proxyContainerElement:lt,groupElement:W,type:I,proxyElements:[]},ug(W,F||{}),I==="ul"&&lt.setAttribute("role","list"),this.afterChartProxyPosContainer.appendChild(W),this.updateGroupOrder(this.groupOrder),W}updateGroupAttrs(L,I){let F=this.groups[L];if(!F)throw Error("ProxyProvider.updateGroupAttrs: Invalid group key "+L);ug(F.groupElement,I)}updateGroupOrder(L){if(this.groupOrder=L.slice(),this.isDOMOrderGroupOrder())return;let I=L.indexOf("series"),F=I>-1?L.slice(0,I):L,W=I>-1?L.slice(I+1):[],et=ax.activeElement;["before","after"].forEach(lt=>{let ot=this[lt==="before"?"beforeChartProxyPosContainer":"afterChartProxyPosContainer"];zu(ot),(lt==="before"?F:W).forEach(xt=>{let Nt=this.groups[xt];Nt&&ot.appendChild(Nt.groupElement)})}),(this.beforeChartProxyPosContainer.contains(et)||this.afterChartProxyPosContainer.contains(et))&&et&&et.focus&&et.focus()}clearGroup(L){let I=this.groups[L];if(!I)throw Error("ProxyProvider.clearGroup: Invalid group key "+L);zu(I.proxyContainerElement)}removeGroup(L){let I=this.groups[L];I&&(this.domElementProvider.removeElement(I.groupElement),I.groupElement!==I.proxyContainerElement&&this.domElementProvider.removeElement(I.proxyContainerElement),delete this.groups[L])}update(){this.updatePosContainerPositions(),this.updateGroupOrder(this.groupOrder),this.updateProxyElementPositions()}updateProxyElementPositions(){Object.keys(this.groups).forEach(this.updateGroupProxyElementPositions.bind(this))}updateGroupProxyElementPositions(L){let I=this.groups[L];I&&I.proxyElements.forEach(F=>F.refreshPosition())}destroy(){this.domElementProvider.destroyCreatedElements()}createProxyPosContainer(L){let I=this.domElementProvider.createElement("div");return I.setAttribute("aria-hidden","false"),I.className="highcharts-a11y-proxy-container"+(L?"-"+L:""),hg(I,{top:"0",left:"0"}),this.chart.styledMode||(I.style.whiteSpace="nowrap",I.style.position="absolute"),I}getCurrentGroupOrderInDOM(){let L=et=>{let lt=Object.keys(this.groups),ot=lt.length;for(;ot--;){let xt=lt[ot],Nt=this.groups[xt];if(Nt&&et===Nt.groupElement)return xt}},I=et=>{let lt=[],ot=et.children;for(let xt=0;xt<ot.length;++xt){let Nt=L(ot[xt]);Nt&&lt.push(Nt)}return lt},F=I(this.beforeChartProxyPosContainer),W=I(this.afterChartProxyPosContainer);return F.push("series"),F.concat(W)}isDOMOrderGroupOrder(){let L=this.getCurrentGroupOrderInDOM(),I=this.groupOrder.filter(W=>W==="series"||!!this.groups[W]),F=L.length;if(F!==I.length)return!1;for(;F--;)if(L[F]!==I[F])return!1;return!0}updatePosContainerPositions(){let L=this.chart;if(L.renderer.forExport)return;let I=L.renderer.box;L.container.insertBefore(this.afterChartProxyPosContainer,I.nextSibling),L.container.insertBefore(this.beforeChartProxyPosContainer,I),dg(this.chart,this.afterChartProxyPosContainer),dg(this.chart,this.beforeChartProxyPosContainer)}},{unhideChartElementFromAT:Ms,getAxisRangeDescription:lx}=ae,{addEvent:Wu,attr:rd}=q();class _c extends zt{init(){let I=this.chart;this.announcer=new vi(I,"polite")}onChartUpdate(){let I=this.chart,F=this,W=I.rangeSelector;W&&(this.updateSelectorVisibility(),this.setDropdownAttrs(),W.buttons&&W.buttons.length&&W.buttons.forEach(et=>{F.setRangeButtonAttrs(et)}),W.maxInput&&W.minInput&&["minInput","maxInput"].forEach(function(et,lt){let ot=W[et];ot&&(Ms(I,ot),F.setRangeInputAttrs(ot,"accessibility.rangeSelector."+(lt?"max":"min")+"InputLabel"))}))}updateSelectorVisibility(){let I=this.chart,F=I.rangeSelector,W=F&&F.dropdown,et=F&&F.buttons||[];F&&F.hasVisibleDropdown&&W?(Ms(I,W),et.forEach(lt=>lt.element.setAttribute("aria-hidden",!0))):(W&&W.setAttribute("aria-hidden",!0),et.forEach(lt=>Ms(I,lt.element)))}setDropdownAttrs(){let I=this.chart,F=I.rangeSelector&&I.rangeSelector.dropdown;if(F){let W=I.langFormat("accessibility.rangeSelector.dropdownLabel",{rangeTitle:I.options.lang.rangeSelectorZoom});F.setAttribute("aria-label",W),F.setAttribute("tabindex",-1)}}setRangeButtonAttrs(I){rd(I.element,{tabindex:-1,role:"button"})}setRangeInputAttrs(I,F){let W=this.chart;rd(I,{tabindex:-1,"aria-label":W.langFormat(F,{chart:W})})}onButtonNavKbdArrowKey(I,F){let W=I.response,et=this.keyCodes,lt=this.chart,ot=lt.options.accessibility.keyboardNavigation.wrapAround,xt=F===et.left||F===et.up?-1:1;return lt.highlightRangeSelectorButton(lt.highlightedRangeSelectorItemIx+xt)?W.success:ot?(I.init(xt),W.success):W[xt>0?"next":"prev"]}onButtonNavKbdClick(I){let F=I.response,W=this.chart;return W.oldRangeSelectorItemState!==3&&this.fakeClickEvent(W.rangeSelector.buttons[W.highlightedRangeSelectorItemIx].element),F.success}onAfterBtnClick(){let I=this.chart,F=lx(I.xAxis[0]),W=I.langFormat("accessibility.rangeSelector.clickButtonAnnouncement",{chart:I,axisRangeDescription:F});W&&this.announcer.announce(W)}onInputKbdMove(I){let F=this.chart,W=F.rangeSelector,et=F.highlightedInputRangeIx=(F.highlightedInputRangeIx||0)+I;if(et>1||et<0){if(F.accessibility)return F.accessibility.keyboardNavigation.exiting=!0,F.accessibility.keyboardNavigation.tabindexContainer.focus(),F.accessibility.keyboardNavigation.move(I)}else if(W){let lt=W[et?"maxDateBox":"minDateBox"],ot=W[et?"maxInput":"minInput"];lt&&ot&&F.setFocusToElement(lt,ot)}return!0}onInputNavInit(I){let F=this,W=this.chart,et=I>0?0:1,lt=W.rangeSelector,ot=lt&&lt[et?"maxDateBox":"minDateBox"],xt=lt&&lt.minInput,Nt=lt&&lt.maxInput;if(W.highlightedInputRangeIx=et,ot&&xt&&Nt){W.setFocusToElement(ot,et?Nt:xt),this.removeInputKeydownHandler&&this.removeInputKeydownHandler();let Dt=fe=>{(fe.which||fe.keyCode)===this.keyCodes.tab&&F.onInputKbdMove(fe.shiftKey?-1:1)&&(fe.preventDefault(),fe.stopPropagation())},ee=Wu(xt,"keydown",Dt),ue=Wu(Nt,"keydown",Dt);this.removeInputKeydownHandler=()=>{ee(),ue()}}}onInputNavTerminate(){let I=this.chart.rangeSelector||{};I.maxInput&&I.hideInput("max"),I.minInput&&I.hideInput("min"),this.removeInputKeydownHandler&&(this.removeInputKeydownHandler(),delete this.removeInputKeydownHandler)}initDropdownNav(){let I=this.chart,F=I.rangeSelector,W=F&&F.dropdown;F&&W&&(I.setFocusToElement(F.buttonGroup,W),this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeDropdownKeydownHandler=Wu(W,"keydown",et=>{let lt=(et.which||et.keyCode)===this.keyCodes.tab,ot=I.accessibility;lt&&(et.preventDefault(),et.stopPropagation(),ot&&ot.keyboardNavigation.move(et.shiftKey?-1:1))}))}getRangeSelectorButtonNavigation(){let I=this.chart,F=this.keyCodes,W=this;return new de(I,{keyCodeMap:[[[F.left,F.right,F.up,F.down],function(et){return W.onButtonNavKbdArrowKey(this,et)}],[[F.enter,F.space],function(){return W.onButtonNavKbdClick(this)}]],validate:function(){return!!(I.rangeSelector&&I.rangeSelector.buttons&&I.rangeSelector.buttons.length)},init:function(et){let lt=I.rangeSelector;if(lt&&lt.hasVisibleDropdown)W.initDropdownNav();else if(lt){let ot=lt.buttons.length-1;I.highlightRangeSelectorButton(et>0?0:ot)}},terminate:function(){W.removeDropdownKeydownHandler&&(W.removeDropdownKeydownHandler(),delete W.removeDropdownKeydownHandler)}})}getRangeSelectorInputNavigation(){let I=this.chart,F=this;return new de(I,{keyCodeMap:[],validate:function(){return!!(I.rangeSelector&&I.rangeSelector.inputGroup&&I.rangeSelector.inputGroup.element.style.visibility!=="hidden"&&I.options.rangeSelector.inputEnabled!==!1&&I.rangeSelector.minInput&&I.rangeSelector.maxInput)},init:function(W){F.onInputNavInit(W)},terminate:function(){F.onInputNavTerminate()}})}getKeyboardNavigation(){return[this.getRangeSelectorButtonNavigation(),this.getRangeSelectorInputNavigation()]}destroy(){this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeInputKeydownHandler&&this.removeInputKeydownHandler(),this.announcer&&this.announcer.destroy()}}function ri(L){let I=this.rangeSelector&&this.rangeSelector.buttons||[],F=this.highlightedRangeSelectorItemIx,W=this.rangeSelector&&this.rangeSelector.selected;return F!==void 0&&I[F]&&F!==W&&I[F].setState(this.oldRangeSelectorItemState||0),this.highlightedRangeSelectorItemIx=L,!!I[L]&&(this.setFocusToElement(I[L].box,I[L].element),L!==W&&(this.oldRangeSelectorItemState=I[L].state,I[L].setState(1)),!0)}function fg(){let L=this.chart.accessibility;if(L&&L.components.rangeSelector)return L.components.rangeSelector.onAfterBtnClick()}(_c||(_c={})).compose=function(L,I){let F=L.prototype;F.highlightRangeSelectorButton||(F.highlightRangeSelectorButton=ri,Wu(I,"afterBtnClick",fg))};let pg=_c,{composed:gg}=q(),{addEvent:$n,merge:Vu,pushUnique:od}=q();(function(L){function I(Nt){Vu(!0,Nt,{marker:{enabled:!0,states:{normal:{opacity:0}}}})}function F(Nt){return Nt.marker.states&&Nt.marker.states.normal&&Nt.marker.states.normal.opacity}function W(Nt){return!!(Nt._hasPointMarkers&&Nt.points&&Nt.points.length)}function et(){this.chart.styledMode&&(this.markerGroup&&this.markerGroup[this.a11yMarkersForced?"addClass":"removeClass"]("highcharts-a11y-markers-hidden"),W(this)&&this.points.forEach(Nt=>{Nt.graphic&&(Nt.graphic[Nt.hasForcedA11yMarker?"addClass":"removeClass"]("highcharts-a11y-marker-hidden"),Nt.graphic[Nt.hasForcedA11yMarker===!1?"addClass":"removeClass"]("highcharts-a11y-marker-visible"))}))}function lt(Nt){this.resetA11yMarkerOptions=Vu(Nt.options.marker||{},this.userOptions.marker||{})}function ot(){let Nt=this.options;(function(Dt){let ee,ue=Dt.chart.options.accessibility.enabled,fe=(Dt.options.accessibility&&Dt.options.accessibility.enabled)!==!1;return ue&&fe&&(ee=Dt.chart.options.accessibility,Dt.points.length<ee.series.pointDescriptionEnabledThreshold||ee.series.pointDescriptionEnabledThreshold===!1)})(this)?(Nt.marker&&Nt.marker.enabled===!1&&(this.a11yMarkersForced=!0,I(this.options)),W(this)&&(function(Dt){let ee=Dt.points.length;for(;ee--;){let fe=Dt.points[ee],ke=fe.options,Ye=fe.hasForcedA11yMarker;if(delete fe.hasForcedA11yMarker,ke.marker){var ue;let Je=Ye&&F(ke)===0;ke.marker.enabled&&!Je?(Vu(!0,(ue=ke).marker,{states:{normal:{opacity:F(ue)||1}}}),fe.hasForcedA11yMarker=!1):ke.marker.enabled===!1&&(I(ke),fe.hasForcedA11yMarker=!0)}}})(this)):this.a11yMarkersForced&&(delete this.a11yMarkersForced,this.isDirty=!0,(function(Dt){let ee=Dt.resetA11yMarkerOptions;if(ee){let ue=ee.states&&ee.states.normal&&ee.states.normal.opacity;Dt.chart.styledMode&&ee.enabled===!1&&Dt.points&&Dt.points.forEach(fe=>{fe.graphic&&(fe.graphic=fe.graphic.destroy())}),Dt.userOptions&&Dt.userOptions.marker&&(Dt.userOptions.marker.enabled=!0),Dt.update({marker:{enabled:ee.enabled,states:{normal:{opacity:ue}}}})}})(this),Nt.marker&&Nt.marker.enabled===!1&&delete this.resetA11yMarkerOptions)}function xt(){this.boosted&&this.a11yMarkersForced&&(Vu(!0,this.options,{marker:{enabled:!1}}),delete this.a11yMarkersForced)}L.compose=function(Nt){od(gg,"A11y.FM")&&($n(Nt,"afterSetOptions",lt),$n(Nt,"render",ot),$n(Nt,"afterRender",et),$n(Nt,"renderCanvas",xt))}})(S||(S={}));let cx=S;var ad=R(260),is=R.n(ad),ld=R(820),ux=R.n(ld);let{seriesTypes:mg}=xc(),{doc:hx}=q(),{defined:ta,fireEvent:Ac}=q(),{getPointFromXY:dx,getSeriesFromName:fx,scrollAxisToPoint:px}=ae;function Uu(L){let I=L.index,F=L.series.points,W=F.length;if(F[I]===L)return I;for(;W--;)if(F[W]===L)return W}function Gu(L){let I=L.chart.options.accessibility.keyboardNavigation.seriesNavigation,F=L.options.accessibility||{},W=F.keyboardNavigation;return W&&W.enabled===!1||F.enabled===!1||L.options.enableMouseTracking===!1||!L.visible||I.pointNavigationEnabledThreshold&&+I.pointNavigationEnabledThreshold<=L.points.length}function $c(L){let I=L.series,F=I.options.nullInteraction,W=L.options.accessibility,et=I.chart.options.accessibility,lt=W?.enabled===!1;return et.keyboardNavigation.seriesNavigation.skipNullPoints??(!(!L.isNull||F)&&L.visible===!1||L.isInside===!1||lt||Gu(I))}function cd(L){let I=L.series||[],F=I.length;for(let W=0;W<F;++W)if(!Gu(I[W])){let et=(function(lt){let ot=lt.points||[],xt=ot.length;for(let Nt=0;Nt<xt;++Nt)if(!$c(ot[Nt]))return ot[Nt];return null})(I[W]);if(et)return et}return null}function xg(L){let I=L.series.length,F=!1;for(;I--&&(L.highlightedPoint=L.series[I].points[L.series[I].points.length-1],!(F=L.series[I].highlightNextValidPoint())););return F}function Pf(L){delete L.highlightedPoint;let I=cd(L);return!!I&&I.highlight()}class Lf{constructor(I,F){this.keyCodes=F,this.chart=I}init(){let I=this,F=this.chart,W=this.eventProvider=new Ft;W.addEvent(ux(),"destroy",function(){return I.onSeriesDestroy(this)}),W.addEvent(F,"afterApplyDrilldown",function(){let et;(et=cd(this))&&et.highlight(!1)}),W.addEvent(F,"drilldown",function(et){let lt=et.point,ot=lt.series;I.lastDrilledDownPoint={x:lt.x,y:lt.y,seriesName:ot?ot.name:""}}),W.addEvent(F,"drillupall",function(){setTimeout(function(){I.onDrillupAll()},10)}),W.addEvent(is(),"afterSetState",function(){let et=this.graphic&&this.graphic.element,lt=hx.activeElement,ot=lt&&lt.getAttribute("class"),xt=ot&&ot.indexOf("highcharts-a11y-proxy-element")>-1;F.highlightedPoint===this&&lt!==et&&!xt&&et&&et.focus&&et.focus()})}onDrillupAll(){let I,F=this.lastDrilledDownPoint,W=this.chart,et=F&&fx(W,F.seriesName);F&&et&&ta(F.x)&&ta(F.y)&&(I=dx(et,F.x,F.y)),I=I||cd(W),W.container&&W.container.focus(),I&&I.highlight&&I.highlight(!1)}getKeyboardNavigationHandler(){let I=this,F=this.keyCodes,W=this.chart,et=W.inverted;return new de(W,{keyCodeMap:[[et?[F.up,F.down]:[F.left,F.right],function(lt){return I.onKbdSideways(this,lt)}],[et?[F.left,F.right]:[F.up,F.down],function(lt){return I.onKbdVertical(this,lt)}],[[F.enter,F.space],function(lt,ot){let xt=W.highlightedPoint;if(xt){let{plotLeft:Nt,plotTop:Dt}=this.chart,{plotX:ee=0,plotY:ue=0}=xt;ot={...ot,chartX:Nt+ee,chartY:Dt+ue,point:xt,target:xt.graphic?.element||ot.target},Ac(xt.series,"click",ot),xt.firePointEvent("click",ot)}return this.response.success}],[[F.home],function(){return Pf(W),this.response.success}],[[F.end],function(){return xg(W),this.response.success}],[[F.pageDown,F.pageUp],function(lt){return W.highlightAdjacentSeries(lt===F.pageDown),this.response.success}]],init:function(){return I.onHandlerInit(this)},validate:function(){return!!cd(W)},terminate:function(){return I.onHandlerTerminate()}})}onKbdSideways(I,F){let W=this.keyCodes,et=F===W.right||F===W.down;return this.attemptHighlightAdjacentPoint(I,et)}onHandlerInit(I){let F=this.chart;return F.options.accessibility.keyboardNavigation.seriesNavigation.rememberPointFocus&&F.highlightedPoint?F.highlightedPoint.highlight():Pf(F),I.response.success}onKbdVertical(I,F){let W=this.chart,et=this.keyCodes,lt=F===et.down||F===et.right,ot=W.options.accessibility.keyboardNavigation.seriesNavigation;if(ot.mode&&ot.mode==="serialize")return this.attemptHighlightAdjacentPoint(I,lt);let xt=W.highlightedPoint&&W.highlightedPoint.series.keyboardMoveVertical?"highlightAdjacentPointVertical":"highlightAdjacentSeries";return W[xt](lt),I.response.success}onHandlerTerminate(){let I=this.chart,F=I.options.accessibility.keyboardNavigation;I.tooltip&&I.tooltip.hide(0);let W=I.highlightedPoint&&I.highlightedPoint.series;W&&W.onMouseOut&&W.onMouseOut(),I.highlightedPoint&&I.highlightedPoint.onMouseOut&&I.highlightedPoint.onMouseOut(),F.seriesNavigation.rememberPointFocus||delete I.highlightedPoint}attemptHighlightAdjacentPoint(I,F){let W=this.chart,et=W.options.accessibility.keyboardNavigation.wrapAround;return W.highlightAdjacentPoint(F)||et&&(F?Pf(W):xg(W))?I.response.success:I.response[F?"next":"prev"]}onSeriesDestroy(I){let F=this.chart;F.highlightedPoint&&F.highlightedPoint.series===I&&(delete F.highlightedPoint,F.focusElement&&F.focusElement.removeFocusBorder())}destroy(){this.eventProvider.removeAddedEvents()}}(function(L){function I(ot){let xt,Nt,Dt=this.series,ee=this.highlightedPoint,ue=ee&&Uu(ee)||0,fe=ee&&ee.series.points||[],ke=this.series&&this.series[this.series.length-1],Ye=ke&&ke.points&&ke.points[ke.points.length-1];if(!Dt[0]||!Dt[0].points)return!1;if(ee){if(xt=Dt[ee.series.index+(ot?1:-1)],(Nt=fe[ue+(ot?1:-1)])||!xt||(Nt=xt.points[ot?0:xt.points.length-1]),!Nt)return!1}else Nt=ot?Dt[0].points[0]:Ye;return $c(Nt)?(Gu(xt=Nt.series)?this.highlightedPoint=ot?xt.points[xt.points.length-1]:xt.points[0]:this.highlightedPoint=Nt,this.highlightAdjacentPoint(ot)):Nt.highlight()}function F(ot){let xt=this.highlightedPoint,Nt=1/0,Dt;return!!ta(xt.plotX)&&!!ta(xt.plotY)&&(this.series.forEach(ee=>{Gu(ee)||ee.points.forEach(ue=>{if(!ta(ue.plotY)||!ta(ue.plotX)||ue===xt)return;let fe=ue.plotY-xt.plotY,ke=Math.abs(ue.plotX-xt.plotX),Ye=Math.abs(fe)*Math.abs(fe)+ke*ke*4;ee.yAxis&&ee.yAxis.reversed&&(fe*=-1),!(fe<=0&&ot||fe>=0&&!ot||Ye<5||$c(ue))&&Ye<Nt&&(Nt=Ye,Dt=ue)})}),!!Dt&&Dt.highlight())}function W(ot){let xt,Nt,Dt,ee=this.highlightedPoint,ue=this.series&&this.series[this.series.length-1],fe=ue&&ue.points&&ue.points[ue.points.length-1];return this.highlightedPoint?!!(xt=this.series[ee.series.index+(ot?-1:1)])&&!!(Nt=(function(ke,Ye,Je,dn){let Xn=1/0,Jn,Bn,pn,us=Ye.points.length,Ts=ks=>!(ta(ks.plotX)&&ta(ks.plotY));if(!Ts(ke)){for(;us--;)!Ts(Jn=Ye.points[us])&&(pn=(ke.plotX-Jn.plotX)*(ke.plotX-Jn.plotX)*4+(ke.plotY-Jn.plotY)*(ke.plotY-Jn.plotY)*1)<Xn&&(Xn=pn,Bn=us);return ta(Bn)?Ye.points[Bn]:void 0}})(ee,xt))&&(Gu(xt)?(Nt.highlight(),(Dt=this.highlightAdjacentSeries(ot))?Dt:(ee.highlight(),!1)):(Nt.highlight(),Nt.series.highlightNextValidPoint())):(xt=ot?this.series&&this.series[0]:ue,!!(Nt=ot?xt&&xt.points&&xt.points[0]:fe)&&Nt.highlight())}function et(ot=!0){let xt=this.series.chart,Nt=xt.tooltip?.label?.element;(!this.isNull||this.series.options?.nullInteraction)&&ot?this.onMouseOver():xt.tooltip&&xt.tooltip.hide(0),px(this),this.graphic&&(xt.setFocusToElement(this.graphic),!ot&&xt.focusElement&&xt.focusElement.removeFocusBorder()),xt.highlightedPoint=this;let Dt=Nt?.getBoundingClientRect().top;if(Nt&&Dt&&Dt<0){let ee=window.scrollY;window.scrollTo({behavior:"smooth",top:ee+Dt})}return this}function lt(){let ot=this.chart.highlightedPoint,xt=(ot&&ot.series)===this?Uu(ot):0,Nt=this.points,Dt=Nt.length;if(Nt&&Dt){for(let ee=xt;ee<Dt;++ee)if(!$c(Nt[ee]))return Nt[ee].highlight();for(let ee=xt;ee>=0;--ee)if(!$c(Nt[ee]))return Nt[ee].highlight()}return!1}L.compose=function(ot,xt,Nt){let Dt=ot.prototype,ee=xt.prototype,ue=Nt.prototype;Dt.highlightAdjacentPoint||(Dt.highlightAdjacentPoint=I,Dt.highlightAdjacentPointVertical=F,Dt.highlightAdjacentSeries=W,ee.highlight=et,ue.keyboardMoveVertical=!0,["column","gantt","pie"].forEach(fe=>{mg[fe]&&(mg[fe].prototype.keyboardMoveVertical=!1)}),ue.highlightNextValidPoint=lt)}})(Lf||(Lf={}));let bg=Lf,{hideSeriesFromAT:vg}=ae,{describeSeries:gx}=fr,yg=class extends zt{static compose(L,I,F){sd.compose(F),cx.compose(F),bg.compose(L,I,F)}init(){this.newDataAnnouncer=new sd(this.chart),this.newDataAnnouncer.init(),this.keyboardNavigation=new bg(this.chart,this.keyCodes),this.keyboardNavigation.init(),this.hideTooltipFromATWhenShown(),this.hideSeriesLabelsFromATWhenShown()}hideTooltipFromATWhenShown(){let L=this;this.chart.tooltip&&this.addEvent(this.chart.tooltip.constructor,"refresh",function(){this.chart===L.chart&&this.label&&this.label.element&&this.label.element.setAttribute("aria-hidden",!0)})}hideSeriesLabelsFromATWhenShown(){this.addEvent(this.chart,"afterDrawSeriesLabels",function(){this.series.forEach(function(L){L.labelBySeries&&L.labelBySeries.attr("aria-hidden",!0)})})}onChartRender(){this.chart.series.forEach(function(L){(L.options.accessibility&&L.options.accessibility.enabled)!==!1&&L.visible&&L.getPointsCollection().length!==0?gx(L):vg(L)})}getKeyboardNavigation(){return this.keyboardNavigation.getKeyboardNavigationHandler()}destroy(){this.newDataAnnouncer.destroy(),this.keyboardNavigation.destroy()}},{unhideChartElementFromAT:wg}=ae,{getFakeMouseEvent:ud}=j,{attr:ea,pick:mx}=q(),xx=class extends zt{constructor(){super(...arguments),this.focusedMapNavButtonIx=-1}init(){let L=this,I=this.chart;this.proxyProvider.addGroup("zoom","div"),["afterShowResetZoom","afterApplyDrilldown","drillupall"].forEach(F=>{L.addEvent(I,F,function(){L.updateProxyOverlays()})})}onChartUpdate(){let L=this.chart,I=this;L.mapNavigation&&L.mapNavigation.navButtons.forEach((F,W)=>{wg(L,F.element),I.setMapNavButtonAttrs(F.element,"accessibility.zoom.mapZoom"+(W?"Out":"In"))})}setMapNavButtonAttrs(L,I){let F=this.chart;ea(L,{tabindex:-1,role:"button","aria-label":F.langFormat(I,{chart:F})})}onChartRender(){this.updateProxyOverlays()}updateProxyOverlays(){let L=this.chart;if(this.proxyProvider.clearGroup("zoom"),L.resetZoomButton&&this.createZoomProxyButton(L.resetZoomButton,"resetZoomProxyButton",L.langFormat("accessibility.zoom.resetZoomButton",{chart:L})),L.drillUpButton&&L.breadcrumbs&&L.breadcrumbs.list){let I=L.breadcrumbs.list[L.breadcrumbs.list.length-1];this.createZoomProxyButton(L.drillUpButton,"drillUpProxyButton",L.langFormat("accessibility.drillUpButton",{chart:L,buttonText:L.breadcrumbs.getButtonText(I)}))}}createZoomProxyButton(L,I,F){this[I]=this.proxyProvider.addProxyElement("zoom",{click:L},"button",{"aria-label":F,tabindex:-1})}getMapZoomNavigation(){let L=this.keyCodes,I=this.chart,F=this;return new de(I,{keyCodeMap:[[[L.up,L.down,L.left,L.right],function(W){return F.onMapKbdArrow(this,W)}],[[L.tab],function(W,et){return F.onMapKbdTab(this,et)}],[[L.space,L.enter],function(){return F.onMapKbdClick(this)}]],validate:function(){return!!(I.mapView&&I.mapNavigation&&I.mapNavigation.navButtons.length)},init:function(W){return F.onMapNavInit(W)}})}onMapKbdArrow(L,I){let F=this.chart,W=this.keyCodes,et=F.container,lt=I===W.up||I===W.down,ot=I===W.left||I===W.up?1:-1,xt=(lt?F.plotHeight:F.plotWidth)/10*ot,Nt=10*Math.random(),Dt={x:et.offsetLeft+F.plotLeft+F.plotWidth/2+Nt,y:et.offsetTop+F.plotTop+F.plotHeight/2+Nt},ee=lt?{x:Dt.x,y:Dt.y+xt}:{x:Dt.x+xt,y:Dt.y};return[ud("mousedown",Dt),ud("mousemove",ee),ud("mouseup",ee)].forEach(ue=>et.dispatchEvent(ue)),L.response.success}onMapKbdTab(L,I){let F=this.chart,W=L.response,et=I.shiftKey,lt=et&&!this.focusedMapNavButtonIx||!et&&this.focusedMapNavButtonIx;if(F.mapNavigation.navButtons[this.focusedMapNavButtonIx].setState(0),lt)return F.mapView&&F.mapView.zoomBy(),W[et?"prev":"next"];this.focusedMapNavButtonIx+=et?-1:1;let ot=F.mapNavigation.navButtons[this.focusedMapNavButtonIx];return F.setFocusToElement(ot.box,ot.element),ot.setState(2),W.success}onMapKbdClick(L){let I=this.chart.mapNavigation.navButtons[this.focusedMapNavButtonIx].element;return this.fakeClickEvent(I),L.response.success}onMapNavInit(L){let I=this.chart,F=I.mapNavigation.navButtons[0],W=I.mapNavigation.navButtons[1],et=L>0?F:W;I.setFocusToElement(et.box,et.element),et.setState(2),this.focusedMapNavButtonIx=L>0?0:1}simpleButtonNavigation(L,I,F){let W=this.keyCodes,et=this,lt=this.chart;return new de(lt,{keyCodeMap:[[[W.tab,W.up,W.down,W.left,W.right],function(ot,xt){let Nt=ot===W.tab&&xt.shiftKey||ot===W.left||ot===W.up;return this.response[Nt?"prev":"next"]}],[[W.space,W.enter],function(){return mx(F(this,lt),this.response.success)}]],validate:function(){return lt[L]&&lt[L].box&&et[I].innerElement},init:function(){lt.setFocusToElement(lt[L].box,et[I].innerElement)}})}getKeyboardNavigation(){return[this.simpleButtonNavigation("resetZoomButton","resetZoomProxyButton",function(L,I){I.zoomOut()}),this.simpleButtonNavigation("drillUpButton","drillUpProxyButton",function(L,I){return I.drillUp(),L.response.prev}),this.getMapZoomNavigation()]}},{doc:Bf,isMS:kg,win:hd}=q(),bx=function(){if(kg&&hd.getComputedStyle){let L=Bf.createElement("div");L.style.backgroundImage="url(data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==)",Bf.body.appendChild(L);let I=(L.currentStyle||hd.getComputedStyle(L)).backgroundImage;return Bf.body.removeChild(L),I==="none"}return hd.matchMedia&&hd.matchMedia("(forced-colors: active)").matches},dd=function(L){L.highContrastModeActive=!0;let I=L.options.accessibility.highContrastTheme;L.update(I,!1);let F=I.colors?.length>1;L.series.forEach(function(W){let et=I.plotOptions[W.type]||{},lt=F&&W.colorIndex!==void 0?I.colors[W.colorIndex]:et.color||"window",ot={color:et.color||"windowText",colors:F?I.colors:[et.color||"windowText"],borderColor:et.borderColor||"window",fillColor:lt};W.update(ot,!1),W.points&&W.points.forEach(function(xt){xt.options&&xt.options.color&&xt.update({color:et.color||"windowText",borderColor:et.borderColor||"window"},!1)})}),L.redraw()},vx={chart:{backgroundColor:"window"},title:{style:{color:"windowText"}},subtitle:{style:{color:"windowText"}},colorAxis:{minColor:"windowText",maxColor:"windowText",stops:[],dataClasses:[]},colors:["windowText"],xAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},yAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},tooltip:{backgroundColor:"window",borderColor:"windowText",style:{color:"windowText"}},plotOptions:{series:{lineColor:"windowText",fillColor:"window",borderColor:"windowText",edgeColor:"windowText",borderWidth:1,dataLabels:{connectorColor:"windowText",color:"windowText",style:{color:"windowText",textOutline:"none"}},marker:{lineColor:"windowText",fillColor:"windowText"}},pie:{color:"window",colors:["window"],borderColor:"windowText",borderWidth:1},boxplot:{fillColor:"window"},candlestick:{lineColor:"windowText",fillColor:"window"},errorbar:{fillColor:"window"}},legend:{backgroundColor:"window",itemStyle:{color:"windowText"},itemHoverStyle:{color:"windowText"},itemHiddenStyle:{color:"#555"},title:{style:{color:"windowText"}}},credits:{style:{color:"windowText"}},drilldown:{activeAxisLabelStyle:{color:"windowText"},activeDataLabelStyle:{color:"windowText"}},navigation:{buttonOptions:{symbolStroke:"windowText",theme:{fill:"window"}}},rangeSelector:{buttonTheme:{fill:"window",stroke:"windowText",style:{color:"windowText"},states:{hover:{fill:"window",stroke:"windowText",style:{color:"windowText"}},select:{fill:"#444",stroke:"windowText",style:{color:"windowText"}}}},inputBoxBorderColor:"windowText",inputStyle:{backgroundColor:"window",color:"windowText"},labelStyle:{color:"windowText"}},navigator:{handles:{backgroundColor:"window",borderColor:"windowText"},outlineColor:"windowText",maskFill:"transparent",series:{color:"windowText",lineColor:"windowText"},xAxis:{gridLineColor:"windowText"}},scrollbar:{barBackgroundColor:"#444",barBorderColor:"windowText",buttonArrowColor:"windowText",buttonBackgroundColor:"window",buttonBorderColor:"windowText",rifleColor:"windowText",trackBackgroundColor:"window",trackBorderColor:"windowText"}},{error:Hu,pick:yx}=q();function Cg(L,I,F){let W=L,et,lt=0;for(;lt<I.length-1;++lt)W=W[et=I[lt]]=yx(W[et],{});W[I[I.length-1]]=F}function fd(L,I,F,W){function et(xt,Nt){return Nt.reduce(function(Dt,ee){return Dt[ee]},xt)}let lt=et(L.options,I),ot=et(L.options,F);Object.keys(W).forEach(function(xt){let Nt=lt[xt];Nt!==void 0&&(Cg(ot,W[xt],Nt),Hu(32,!1,L,{[I.join(".")+"."+xt]:F.join(".")+"."+W[xt].join(".")}))})}let wx=function(L){let I,F,W;I=L.options.chart,F=L.options.accessibility||{},["description","typeDescription"].forEach(function(et){I[et]&&(F[et]=I[et],Hu(32,!1,L,{[`chart.${et}`]:`use accessibility.${et}`}))}),L.axes.forEach(function(et){let lt=et.options;lt&&lt.description&&(lt.accessibility=lt.accessibility||{},lt.accessibility.description=lt.description,Hu(32,!1,L,{"axis.description":"use axis.accessibility.description"}))}),L.series&&(W={description:["accessibility","description"],exposeElementToA11y:["accessibility","exposeAsGroupOnly"],pointDescriptionFormatter:["accessibility","point","descriptionFormatter"],skipKeyboardNavigation:["accessibility","keyboardNavigation","enabled"],"accessibility.pointDescriptionFormatter":["accessibility","point","descriptionFormatter"]},L.series.forEach(function(et){Object.keys(W).forEach(function(lt){let ot=et.options[lt];lt==="accessibility.pointDescriptionFormatter"&&(ot=et.options.accessibility&&et.options.accessibility.pointDescriptionFormatter),ot!==void 0&&(Cg(et.options,W[lt],lt==="skipKeyboardNavigation"?!ot:ot),Hu(32,!1,L,{[`series.${lt}`]:"series."+W[lt].join(".")}))})})),fd(L,["accessibility"],["accessibility"],{pointDateFormat:["point","dateFormat"],pointDateFormatter:["point","dateFormatter"],pointDescriptionFormatter:["point","descriptionFormatter"],pointDescriptionThreshold:["series","pointDescriptionEnabledThreshold"],pointNavigationThreshold:["keyboardNavigation","seriesNavigation","pointNavigationEnabledThreshold"],pointValueDecimals:["point","valueDecimals"],pointValuePrefix:["point","valuePrefix"],pointValueSuffix:["point","valueSuffix"],screenReaderSectionFormatter:["screenReaderSection","beforeChartFormatter"],describeSingleSeries:["series","describeSingleSeries"],seriesDescriptionFormatter:["series","descriptionFormatter"],onTableAnchorClick:["screenReaderSection","onViewDataTableClick"],axisRangeDateFormat:["screenReaderSection","axisRangeDateFormat"]}),fd(L,["accessibility","keyboardNavigation"],["accessibility","keyboardNavigation","seriesNavigation"],{skipNullPoints:["skipNullPoints"],mode:["mode"]}),fd(L,["lang","accessibility"],["lang","accessibility"],{legendItem:["legend","legendItem"],legendLabel:["legend","legendLabel"],mapZoomIn:["zoom","mapZoomIn"],mapZoomOut:["zoom","mapZoomOut"],resetZoomButton:["zoom","resetZoomButton"],screenReaderRegionLabel:["screenReaderSection","beforeRegionLabel"],rangeSelectorButton:["rangeSelector","buttonText"],rangeSelectorMaxInput:["rangeSelector","maxInputLabel"],rangeSelectorMinInput:["rangeSelector","minInputLabel"],svgContainerEnd:["screenReaderSection","endOfChartMarker"],viewAsDataTable:["table","viewAsDataTableButtonText"],tableSummary:["table","tableSummary"]})},{defaultOptions:kx}=q(),{doc:Sg}=q(),{addEvent:po,extend:Tg,fireEvent:Nc,merge:Ig}=q(),{removeElement:Cx}=j;class ju{constructor(I){this.init(I)}init(I){if(this.chart=I,!Sg?.addEventListener){this.zombie=!0,this.components={},I.renderTo.setAttribute("aria-hidden",!0);return}wx(I),this.proxyProvider=new qr(this.chart),this.initComponents(),this.keyboardNavigation=new Un(I,this.components)}initComponents(){let I=this.chart,F=this.proxyProvider,W=I.options.accessibility;this.components={container:new Pe,infoRegions:new as,legend:new wu,chartMenu:new ut,rangeSelector:new pg,series:new yg,zoom:new xx,navigator:new Qt},W.customComponents&&Tg(this.components,W.customComponents);let et=this.components;this.getComponentOrder().forEach(function(lt){et[lt].initBase(I,F),et[lt].init()})}getComponentOrder(){return this.components?this.components.series?["series"].concat(Object.keys(this.components).filter(I=>I!=="series")):Object.keys(this.components):[]}update(){let I=this.components,F=this.chart,W=F.options.accessibility;Nc(F,"beforeA11yUpdate"),F.types=this.getChartTypes();let et=W.keyboardNavigation.order;this.proxyProvider.updateGroupOrder(et),this.getComponentOrder().forEach(function(lt){I[lt].onChartUpdate(),Nc(F,"afterA11yComponentUpdate",{name:lt,component:I[lt]})}),this.keyboardNavigation.update(et),!F.highContrastModeActive&&W.highContrastMode!==!1&&(bx()||W.highContrastMode===!0)&&dd(F),Nc(F,"afterA11yUpdate",{accessibility:this})}destroy(){let I=this.chart||{},F=this.components;Object.keys(F).forEach(function(W){F[W].destroy(),F[W].destroyBase()}),this.proxyProvider&&this.proxyProvider.destroy(),I.announcerContainer&&Cx(I.announcerContainer),this.keyboardNavigation&&this.keyboardNavigation.destroy(),I.renderTo&&I.renderTo.setAttribute("aria-hidden",!0),I.focusElement&&I.focusElement.removeFocusBorder()}getChartTypes(){let I={};return this.chart.series.forEach(function(F){I[F.type]=1}),Object.keys(I)}}(function(L){function I(){this.accessibility&&this.accessibility.destroy()}function F(){this.a11yDirty&&this.renderTo&&(delete this.a11yDirty,this.updateA11yEnabled());let ot=this.accessibility;ot&&!ot.zombie&&(ot.proxyProvider.updateProxyElementPositions(),ot.getComponentOrder().forEach(function(xt){ot.components[xt].onChartRender()}))}function W(ot){let xt=ot.options.accessibility;xt&&(xt.customComponents&&(this.options.accessibility.customComponents=xt.customComponents,delete xt.customComponents),Ig(!0,this.options.accessibility,xt),this.accessibility&&this.accessibility.destroy&&(this.accessibility.destroy(),delete this.accessibility)),this.a11yDirty=!0}function et(){let ot=this.accessibility,xt=this.options.accessibility,Nt=this.renderer.boxWrapper.element,Dt=this.title;if(xt&&xt.enabled)ot&&!ot.zombie?ot.update():(this.accessibility=ot=new L(this),ot&&!ot.zombie&&ot.update(),Nt.getAttribute("role")==="img"&&Nt.removeAttribute("role"));else if(ot)ot.destroy&&ot.destroy(),delete this.accessibility;else{this.renderTo.setAttribute("role","img"),this.renderTo.setAttribute("aria-hidden",!1),this.renderTo.setAttribute("aria-label",(Dt&&Dt.element.textContent||"").replace(/</g,"&lt;")),Nt.setAttribute("aria-hidden",!0);let ee=document.getElementsByClassName("highcharts-description")[0];ee&&(ee.setAttribute("aria-hidden",!1),ee.classList.remove("highcharts-linked-description"))}}function lt(){this.series.chart.accessibility&&(this.series.chart.a11yDirty=!0)}L.i18nFormat=Pt.i18nFormat,L.compose=function(ot,xt,Nt,Dt,ee,ue){Un.compose(ot),sd.compose(Dt),wu.compose(ot,xt),ut.compose(ot),yg.compose(ot,Nt,Dt),Pt.compose(ot),vs.compose(ot,ee),ue&&pg.compose(ot,ue);let fe=ot.prototype;fe.updateA11yEnabled||(fe.updateA11yEnabled=et,po(ot,"destroy",I),po(ot,"render",F),po(ot,"update",W),["addSeries","init"].forEach(ke=>{po(ot,ke,function(){this.a11yDirty=!0})}),["afterApplyDrilldown","drillupall"].forEach(ke=>{po(ot,ke,function(){let Ye=this.accessibility;Ye&&!Ye.zombie&&Ye.update()})}),po(Nt,"update",lt),["update","updatedData","remove"].forEach(ke=>{po(Dt,ke,function(){this.chart.accessibility&&(this.chart.a11yDirty=!0)})}))}})(ju||(ju={})),Ig(!0,kx,{accessibility:{enabled:!0,screenReaderSection:{beforeChartFormat:"<{headingTagName}>{chartTitle}</{headingTagName}><div>{typeDescription}</div><div>{chartSubtitle}</div><div>{chartLongdesc}</div><div>{playAsSoundButton}</div><div>{viewTableButton}</div><div>{xAxisDescription}</div><div>{yAxisDescription}</div><div>{annotationsTitle}{annotationsList}</div>",afterChartFormat:"{endOfChartMarker}",axisRangeDateFormat:"%Y-%m-%d %H:%M:%S"},series:{descriptionFormat:"{seriesDescription}{authorDescription}{axisDescription}",describeSingleSeries:!1,pointDescriptionEnabledThreshold:200},point:{valueDescriptionFormat:"{xDescription}{separator}{value}.",describeNull:!0},landmarkVerbosity:"all",linkedDescription:'*[data-highcharts-chart="{index}"] + .highcharts-description',highContrastMode:"auto",keyboardNavigation:{enabled:!0,focusBorder:{enabled:!0,hideBrowserFocusOutline:!0,style:{color:"#334eff",lineWidth:2,borderRadius:3},margin:2},order:["series","zoom","rangeSelector","navigator","legend","chartMenu"],wrapAround:!0,seriesNavigation:{skipNullPoints:void 0,pointNavigationEnabledThreshold:!1,rememberPointFocus:!1}},announceNewData:{enabled:!1,minAnnounceInterval:5e3,interruptUser:!1}},legend:{accessibility:{enabled:!0,keyboardNavigation:{enabled:!0}}},exporting:{accessibility:{enabled:!0}},navigator:{accessibility:{enabled:!0}}},{accessibility:{highContrastTheme:vx},lang:{accessibility:{defaultChartTitle:"Chart",chartContainerLabel:"{title}. Highcharts interactive chart.",svgContainerLabel:"Interactive chart",drillUpButton:"{buttonText}",credits:"Chart credits: {creditsStr}",thousandsSep:",",svgContainerTitle:"",graphicContainerLabel:"",screenReaderSection:{beforeRegionLabel:"",afterRegionLabel:"",annotations:{heading:"Chart annotations summary",descriptionSinglePoint:"{annotationText}. Related to {annotationPoint}",descriptionMultiplePoints:"{annotationText}. Related to {annotationPoint}{#each additionalAnnotationPoints}, also related to {this}{/each}",descriptionNoPoints:"{annotationText}"},endOfChartMarker:"End of interactive chart."},sonification:{playAsSoundButtonText:"Play as sound, {chartTitle}",playAsSoundClickAnnouncement:"Play"},legend:{legendLabelNoTitle:"Toggle series visibility, {chartTitle}",legendLabel:"Chart legend: {legendTitle}",legendItem:"Show {itemName}"},zoom:{mapZoomIn:"Zoom chart",mapZoomOut:"Zoom out chart",resetZoomButton:"Reset zoom"},rangeSelector:{dropdownLabel:"{rangeTitle}",minInputLabel:"Select start date.",maxInputLabel:"Select end date.",clickButtonAnnouncement:"Viewing {axisRangeDescription}"},navigator:{handleLabel:"{#eq handleIx 0}Start, percent{else}End, percent{/eq}",groupLabel:"Axis zoom",changeAnnouncement:"{axisRangeDescription}"},table:{viewAsDataTableButtonText:"View as data table, {chartTitle}",tableSummary:"Table representation of chart."},announceNewData:{newDataAnnounce:"Updated data for chart {chartTitle}",newSeriesAnnounceSingle:"New data series: {seriesDesc}",newPointAnnounceSingle:"New data point: {pointDesc}",newSeriesAnnounceMultiple:"New data series in chart {chartTitle}: {seriesDesc}",newPointAnnounceMultiple:"New data point in chart {chartTitle}: {pointDesc}"},seriesTypeDescriptions:{boxplot:"Box plot charts are typically used to display groups of statistical data. Each data point in the chart can have up to 5 values: minimum, lower quartile, median, upper quartile, and maximum.",arearange:"Arearange charts are line charts displaying a range between a lower and higher value for each point.",areasplinerange:"These charts are line charts displaying a range between a lower and higher value for each point.",bubble:"Bubble charts are scatter charts where each data point also has a size value.",columnrange:"Columnrange charts are column charts displaying a range between a lower and higher value for each point.",errorbar:"Errorbar series are used to display the variability of the data.",funnel:"Funnel charts are used to display reduction of data in stages.",pyramid:"Pyramid charts consist of a single pyramid with item heights corresponding to each point value.",waterfall:"A waterfall chart is a column chart where each column contributes towards a total end value."},chartTypes:{emptyChart:"Empty chart",mapTypeDescription:"Map of {mapTitle} with {numSeries} data series.",unknownMap:"Map of unspecified region with {numSeries} data series.",combinationChart:"Combination chart with {numSeries} data series.",defaultSingle:"Chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",defaultMultiple:"Chart with {numSeries} data series.",splineSingle:"Line chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",splineMultiple:"Line chart with {numSeries} lines.",lineSingle:"Line chart with {numPoints} data {#eq numPoints 1}point{else}points{/eq}.",lineMultiple:"Line chart with {numSeries} lines.",columnSingle:"Bar chart with {numPoints} {#eq numPoints 1}bar{else}bars{/eq}.",columnMultiple:"Bar chart with {numSeries} data series.",barSingle:"Bar chart with {numPoints} {#eq numPoints 1}bar{else}bars{/eq}.",barMultiple:"Bar chart with {numSeries} data series.",pieSingle:"Pie chart with {numPoints} {#eq numPoints 1}slice{else}slices{/eq}.",pieMultiple:"Pie chart with {numSeries} pies.",scatterSingle:"Scatter chart with {numPoints} {#eq numPoints 1}point{else}points{/eq}.",scatterMultiple:"Scatter chart with {numSeries} data series.",boxplotSingle:"Boxplot with {numPoints} {#eq numPoints 1}box{else}boxes{/eq}.",boxplotMultiple:"Boxplot with {numSeries} data series.",bubbleSingle:"Bubble chart with {numPoints} {#eq numPoints 1}bubbles{else}bubble{/eq}.",bubbleMultiple:"Bubble chart with {numSeries} data series."},axis:{xAxisDescriptionSingular:"The chart has 1 X axis displaying {names[0]}. {ranges[0]}",xAxisDescriptionPlural:"The chart has {numAxes} X axes displaying {#each names}{#unless @first},{/unless}{#if @last} and{/if} {this}{/each}.",yAxisDescriptionSingular:"The chart has 1 Y axis displaying {names[0]}. {ranges[0]}",yAxisDescriptionPlural:"The chart has {numAxes} Y axes displaying {#each names}{#unless @first},{/unless}{#if @last} and{/if} {this}{/each}.",timeRangeDays:"Data range: {range} days.",timeRangeHours:"Data range: {range} hours.",timeRangeMinutes:"Data range: {range} minutes.",timeRangeSeconds:"Data range: {range} seconds.",rangeFromTo:"Data ranges from {rangeFrom} to {rangeTo}.",rangeCategories:"Data range: {numCategories} categories.",defaultAxisNames:{categories:"categories",time:"Time",values:"values"}},exporting:{chartMenuLabel:"Chart menu",menuButtonLabel:"View chart menu, {chartTitle}"},series:{summary:{default:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",defaultCombination:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",line:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",lineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",spline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",splineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",column:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",columnCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",bar:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",barCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#eq series.points.length 1}bar{else}bars{/eq}.",pie:"{series.name}, pie {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}slice{else}slices{/eq}.",pieCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Pie with {series.points.length} {#eq series.points.length 1}slice{else}slices{/eq}.",scatter:"{series.name}, scatter plot {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}point{else}points{/eq}.",scatterCombination:"{series.name}, series {seriesNumber} of {chart.series.length}, scatter plot with {series.points.length} {#eq series.points.length 1}point{else}points{/eq}.",boxplot:"{series.name}, boxplot {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}box{else}boxes{/eq}.",boxplotCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Boxplot with {series.points.length} {#eq series.points.length 1}box{else}boxes{/eq}.",bubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",bubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",map:"{series.name}, map {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}area{else}areas{/eq}.",mapCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Map with {series.points.length} {#eq series.points.length 1}area{else}areas{/eq}.",mapline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",maplineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#eq series.points.length 1}point{else}points{/eq}.",mapbubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}.",mapbubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#eq series.points.length 1}bubble{else}bubbles{/eq}."},description:"{description}",xAxisDescription:"X axis, {name}",yAxisDescription:"Y axis, {name}",nullPointValue:"No value",pointAnnotationsDescription:"{#each annotations}Annotation: {this}{/each}"}}}});let zf=ju,go=q();go.i18nFormat=zf.i18nFormat,go.A11yChartUtilities=ae,go.A11yHTMLUtilities=j,go.AccessibilityComponent=zt,go.KeyboardNavigationHandler=de,go.SeriesAccessibilityDescriber=fr,zf.compose(go.Chart,go.Legend,go.Point,go.Series,go.SVGElement,go.RangeSelector);let Sx=q();return V.default})())})(bm)),bm.exports}iR();var rR=Re('<div class="yearChart svelte-1ukwd8"></div>');function NT(n,t){if(new.target)return wr({component:NT,...n});ar(t,!0);let e=An(t,"data",7),s=An(t,"type",7,"releaseYear"),i=qn(void 0),r=qn(0);kp(()=>{Tt(i)&&Tt(r)>0&&o(s())});function o(u){let h=[],f=[[0,"#00e054"],[1,"#3fbcf2"]],g=function(){};u==="releaseYear"?(h=e().years.map(y=>({name:y._id,y:y.sum+1,color:y.sum===0?"#445566":void 0})),g=function(){return`<div class="ttYear"><span class="ttTitle">${this.y-1} films</span><span class="ttSubtitle">Year ${this.points[0].key}</span></div>`}):u==="ratingYear"?(h=e().ru.map(y=>({name:y._id,y:y.avg+1})),g=function(){return`<div class="ttYear"><span class="ttTitle">Rating ${this.y-1}</span><span class="ttSubtitle">Year ${this.points[0].key}</span></div>`}):u==="diaryYear"&&(h=e().logsPerYear.map(y=>({name:y._id,y:y.sum+1})),g=function(){return`<div class="ttYear"><span class="ttTitle">${this.y-1} films</span><span class="ttSubtitle">Year ${this.points[0].key}</span></div>`});const m={chart:{type:"column",backgroundColor:"transparent",margin:0,border:0},xAxis:{labels:{enabled:!1},title:!1,lineColor:"transparent",visible:!1},yAxis:{min:-1,labels:{enabled:!1},title:!1,lineColor:"transparent",visible:!1},legend:{enabled:!1},title:{text:null},plotOptions:{column:{pointPadding:.2,borderWidth:0,borderRadius:3,groupPadding:0}},tooltip:{formatter:g,shared:!0,useHTML:!0,shape:"square",borderWidth:0,shadow:!1,backgroundColor:null},series:[{data:h,label:{enabled:!1},color:{linearGradient:[0,0,Tt(r),0],stops:f},point:{events:{click(){let y="/films/year/"+this.options.name+"/";u==="ratingYear"&&(y+="by/entry-rating/"),u==="diaryYear"&&(y="/films/diary/for/"+this.options.name+"/"),location.href="https://letterboxd.com/"+e().username+y}}}}]};nR.chart(Tt(i),m)}var a={get data(){return e()},set data(u){e(u),_n()},get type(){return s()},set type(u="releaseYear"){s(u),_n()},$set:Cr,$on:(u,h)=>kr(t,u,h)},l=rR();return Rm(l,u=>Ve(i,u),()=>Tt(i)),F7(l,"clientWidth",u=>Ve(r,u)),Ie(n,l),lr(a)}var vm={exports:{}},oR=vm.exports,f4;function aR(){return f4||(f4=1,(function(n,t){(function(e,s){n.exports=s()})(oR,(function(){var e=function(kt){return s(kt)&&!i(kt)};function s(pt){return!!pt&&typeof pt=="object"}function i(pt){var kt=Object.prototype.toString.call(pt);return kt==="[object RegExp]"||kt==="[object Date]"||l(pt)||a(pt)}var r=typeof Symbol=="function"&&Symbol.for,o=r?Symbol.for("react.element"):60103;function a(pt){return pt.$$typeof===o}function l(pt){return pt instanceof Node}function u(pt){return Array.isArray(pt)?[]:{}}function h(pt,kt){return kt.clone!==!1&&kt.isMergeableObject(pt)?$(u(pt),pt,kt):pt}function f(pt,kt,mt){return pt.concat(kt).map(function(ut){return h(ut,mt)})}function g(pt,kt){if(!kt.customMerge)return $;var mt=kt.customMerge(pt);return typeof mt=="function"?mt:$}function m(pt){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(pt).filter(function(kt){return pt.propertyIsEnumerable(kt)}):[]}function y(pt){return Object.keys(pt).concat(m(pt))}function k(pt,kt){try{return kt in pt}catch{return!1}}function C(pt,kt){return k(pt,kt)&&!(Object.hasOwnProperty.call(pt,kt)&&Object.propertyIsEnumerable.call(pt,kt))}function S(pt,kt,mt){var ut={};return mt.isMergeableObject(pt)&&y(pt).forEach(function(bt){ut[bt]=h(pt[bt],mt)}),y(kt).forEach(function(bt){C(pt,bt)||(k(pt,bt)&&mt.isMergeableObject(kt[bt])?ut[bt]=g(bt,mt)(pt[bt],kt[bt],mt):ut[bt]=h(kt[bt],mt))}),ut}var $=function(kt,mt,ut){ut=ut||{},ut.arrayMerge=ut.arrayMerge||f,ut.isMergeableObject=ut.isMergeableObject||e,ut.cloneUnlessOtherwiseSpecified=h;var bt=Array.isArray(mt),At=Array.isArray(kt),re=bt===At;return re?bt?ut.arrayMerge(kt,mt,ut):S(kt,mt,ut):h(mt,ut)},D=function(kt){return typeof kt=="object"&&typeof kt.nodeType<"u"?kt:typeof kt=="string"?document.querySelector(kt):null},R=function(kt,mt,ut,bt){bt===void 0&&(bt=!1);var At=document.createElement(kt);return ut&&(At[bt?"innerHTML":"textContent"]=ut),mt&&(At.className=mt),At},V=function(kt,mt){return Element.prototype.querySelector.call(kt,mt)},E=function(kt){kt.parentNode.removeChild(kt)},q=function(kt){return/\.(jpg|gif|png)$/.test(kt)},X=function(kt){return kt.replace(/[\w]([A-Z])/g,function(mt){return mt[0]+"-"+mt[1]}).toLowerCase()},B=function(kt,mt,ut){return ut===void 0&&(ut=!1),ut?$(kt,mt):Object.assign(kt,mt)},U=function(kt,mt){return kt.toLowerCase()+":to:"+mt.toLowerCase()},K=function(kt,mt){Object.assign(kt.prototype,mt)},Y={},ct=1,j={on:function(kt,mt,ut,bt){bt===void 0&&(bt={});var At="jvm:"+mt+"::"+ct++;Y[At]={selector:kt,handler:ut},ut._uid=At,kt.addEventListener(mt,ut,bt)},delegate:function(kt,mt,ut,bt){mt=mt.split(" "),mt.forEach(function(At){j.on(kt,At,function(re){var _e=re.target;_e.matches(ut)&&bt.call(_e,re)})})},off:function(kt,mt,ut){var bt=mt.split(":")[1];kt.removeEventListener(bt,ut),delete Y[ut._uid]},flush:function(){Object.keys(Y).forEach(function(kt){j.off(Y[kt].selector,kt,Y[kt].handler)})},getEventRegistry:function(){return Y}};function ht(){var pt=this,kt=this,mt=!1,ut,bt;this.params.draggable&&(j.on(this.container,"mousemove",function(At){if(!mt)return!1;kt.transX-=(ut-At.pageX)/kt.scale,kt.transY-=(bt-At.pageY)/kt.scale,kt._applyTransform(),ut=At.pageX,bt=At.pageY}),j.on(this.container,"mousedown",function(At){return mt=!0,ut=At.pageX,bt=At.pageY,!1}),j.on(document.body,"mouseup",function(){mt=!1})),this.params.zoomOnScroll&&j.on(this.container,"wheel",function(At){var re=((At.deltaY||-At.wheelDelta||At.detail)>>10||1)*75,_e=pt.container.getBoundingClientRect(),He=At.pageX-_e.left-window.scrollX,Fn=At.pageY-_e.top-window.scrollY,bn=Math.pow(1+kt.params.zoomOnScrollSpeed/1e3,-1.5*re);kt.tooltip&&kt._tooltip.hide(),kt._setScale(kt.scale*bn,He,Fn),At.preventDefault()})}var It={onLoaded:"map:loaded",onViewportChange:"viewport:changed",onRegionClick:"region:clicked",onMarkerClick:"marker:clicked",onRegionSelected:"region:selected",onMarkerSelected:"marker:selected",onRegionTooltipShow:"region.tooltip:show",onMarkerTooltipShow:"marker.tooltip:show",onDestroyed:"map:destroyed"},yt=function(kt,mt,ut){var bt=D(mt),At=bt.getAttribute("class").indexOf("jvm-region")===-1?"marker":"region",re=At==="region",_e=re?bt.getAttribute("data-code"):bt.getAttribute("data-index"),He=re?It.onRegionSelected:It.onMarkerSelected;return ut&&(He=re?It.onRegionTooltipShow:It.onMarkerTooltipShow),{type:At,code:_e,event:He,element:re?kt.regions[_e].element:kt._markers[_e].element,tooltipText:re?kt._mapData.paths[_e].name||"":kt._markers[_e].config.name||""}};function Ot(){var pt=this,kt=this.container,mt,ut,bt;j.on(kt,"mousemove",function(At){Math.abs(mt-At.pageX)+Math.abs(ut-At.pageY)>2&&(bt=!0)}),j.delegate(kt,"mousedown",".jvm-element",function(At){mt=At.pageX,ut=At.pageY,bt=!1}),j.delegate(kt,"mouseover mouseout",".jvm-element",function(At){var re=yt(pt,this,!0),_e=pt.params.showTooltip;At.type==="mouseover"?(re.element.hover(!0),_e&&(pt._tooltip.text(re.tooltipText),pt._emit(re.event,[At,pt._tooltip,re.code]),At.defaultPrevented||pt._tooltip.show())):(re.element.hover(!1),_e&&pt._tooltip.hide())}),j.delegate(kt,"mouseup",".jvm-element",function(At){var re=yt(pt,this);if(!bt&&(re.type==="region"&&pt.params.regionsSelectable||re.type==="marker"&&pt.params.markersSelectable)){var _e=re.element;pt.params[re.type+"sSelectableOne"]&&(re.type==="region"?pt.clearSelectedRegions():pt.clearSelectedMarkers()),re.element.isSelected?_e.select(!1):_e.select(!0),pt._emit(re.event,[re.code,_e.isSelected,re.type==="region"?pt.getSelectedRegions():pt.getSelectedMarkers()])}}),j.delegate(kt,"click",".jvm-element",function(At){var re=yt(pt,this),_e=re.type,He=re.code;pt._emit(_e==="region"?It.onRegionClick:It.onMarkerClick,[At,He])})}function Ct(){var pt=this,kt=this.params.zoomInButton,mt=this.params.zoomOutButton,ut=function(He){return typeof He=="string"?document.querySelector(He):He},bt=kt?ut(kt):R("div","jvm-zoom-btn jvm-zoomin","&#43;",!0),At=mt?ut(mt):R("div","jvm-zoom-btn jvm-zoomout","&#x2212",!0);kt||this.container.appendChild(bt),mt||this.container.appendChild(At);var re=function(He){return He===void 0&&(He=!0),function(){return pt._setScale(He?pt.scale*pt.params.zoomStep:pt.scale/pt.params.zoomStep,pt._width/2,pt._height/2,!1,pt.params.zoomAnimate)}};j.on(bt,"click",re()),j.on(At,"click",re(!1))}function Gt(){var pt=this,kt,mt,ut,bt,At,re,_e,He=function(bn){var Ke=bn.touches,Kn,ss,Un,pi;if(bn.type=="touchstart"&&(_e=0),Ke.length==1){if(_e==1){var qs;Un=pt.transX,pi=pt.transY,pt.transX-=(ut-Ke[0].pageX)/pt.scale,pt.transY-=(bt-Ke[0].pageY)/pt.scale,(qs=pt._tooltip)==null||qs.hide(),pt._applyTransform(),(Un!=pt.transX||pi!=pt.transY)&&bn.preventDefault()}ut=Ke[0].pageX,bt=Ke[0].pageY}else if(Ke.length==2)if(_e==2){var kn;ss=Math.sqrt(Math.pow(Ke[0].pageX-Ke[1].pageX,2)+Math.pow(Ke[0].pageY-Ke[1].pageY,2))/mt,pt._setScale(kt*ss,At,re),(kn=pt._tooltip)==null||kn.hide(),bn.preventDefault()}else{var li=pt.container.getBoundingClientRect();Kn={top:li.top+window.scrollY,left:li.left+window.scrollX},Ke[0].pageX>Ke[1].pageX?At=Ke[1].pageX+(Ke[0].pageX-Ke[1].pageX)/2:At=Ke[0].pageX+(Ke[1].pageX-Ke[0].pageX)/2,Ke[0].pageY>Ke[1].pageY?re=Ke[1].pageY+(Ke[0].pageY-Ke[1].pageY)/2:re=Ke[0].pageY+(Ke[1].pageY-Ke[0].pageY)/2,At-=Kn.left,re-=Kn.top,kt=pt.scale,mt=Math.sqrt(Math.pow(Ke[0].pageX-Ke[1].pageX,2)+Math.pow(Ke[0].pageY-Ke[1].pageY,2))}_e=Ke.length};j.on(pt.container,"touchstart",He),j.on(pt.container,"touchmove",He)}function vt(pt,kt){(kt==null||kt>pt.length)&&(kt=pt.length);for(var mt=0,ut=Array(kt);mt<kt;mt++)ut[mt]=pt[mt];return ut}function at(pt){if(pt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pt}function Pt(pt,kt){for(var mt=0;mt<kt.length;mt++){var ut=kt[mt];ut.enumerable=ut.enumerable||!1,ut.configurable=!0,"value"in ut&&(ut.writable=!0),Object.defineProperty(pt,ae(ut.key),ut)}}function jt(pt,kt,mt){return mt&&Pt(pt,mt),Object.defineProperty(pt,"prototype",{writable:!1}),pt}function Ut(pt,kt){var mt=typeof Symbol<"u"&&pt[Symbol.iterator]||pt["@@iterator"];if(mt)return(mt=mt.call(pt)).next.bind(mt);if(Array.isArray(pt)||(mt=Oe(pt))||kt){mt&&(pt=mt);var ut=0;return function(){return ut>=pt.length?{done:!0}:{done:!1,value:pt[ut++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function me(){return me=Object.assign?Object.assign.bind():function(pt){for(var kt=1;kt<arguments.length;kt++){var mt=arguments[kt];for(var ut in mt)({}).hasOwnProperty.call(mt,ut)&&(pt[ut]=mt[ut])}return pt},me.apply(null,arguments)}function Ee(pt,kt){pt.prototype=Object.create(kt.prototype),pt.prototype.constructor=pt,ce(pt,kt)}function le(pt,kt){if(pt==null)return{};var mt={};for(var ut in pt)if({}.hasOwnProperty.call(pt,ut)){if(kt.indexOf(ut)!==-1)continue;mt[ut]=pt[ut]}return mt}function ce(pt,kt){return ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(mt,ut){return mt.__proto__=ut,mt},ce(pt,kt)}function De(pt,kt){if(typeof pt!="object"||!pt)return pt;var mt=pt[Symbol.toPrimitive];if(mt!==void 0){var ut=mt.call(pt,kt);if(typeof ut!="object")return ut;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(pt)}function ae(pt){var kt=De(pt,"string");return typeof kt=="symbol"?kt:kt+""}function Oe(pt,kt){if(pt){if(typeof pt=="string")return vt(pt,kt);var mt={}.toString.call(pt).slice(8,-1);return mt==="Object"&&pt.constructor&&(mt=pt.constructor.name),mt==="Map"||mt==="Set"?Array.from(pt):mt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(mt)?vt(pt,kt):void 0}}var Le=(function(){function pt(){}var kt=pt.prototype;return kt.dispose=function(){this._tooltip?E(this._tooltip):this.shape.remove();for(var ut=Ut(Object.getOwnPropertyNames(this)),bt;!(bt=ut()).done;){var At=bt.value;this[At]=null}},pt})(),J={getLabelText:function(kt,mt){if(mt){if(typeof mt.render=="function"){var ut=[];return this.constructor.Name==="marker"&&ut.push(this.getConfig()),ut.push(kt),mt.render.apply(this,ut)}return kt}},getLabelOffsets:function(kt,mt){return typeof mt.offsets=="function"?mt.offsets(kt):Array.isArray(mt.offsets)?mt.offsets[kt]:[0,0]},setStyle:function(kt,mt){this.shape.setStyle(kt,mt)},remove:function(){this.shape.remove(),this.label&&this.label.remove()},hover:function(kt){this._setStatus("isHovered",kt)},select:function(kt){this._setStatus("isSelected",kt)},_setStatus:function(kt,mt){this.shape[kt]=mt,this.shape.updateStyle(),this[kt]=mt,this.label&&(this.label[kt]=mt,this.label.updateStyle())}},Mt=(function(pt){function kt(ut){var bt,At=ut.map,re=ut.code,_e=ut.path,He=ut.style,Fn=ut.label,bn=ut.labelStyle,Ke=ut.labelsGroup;bt=pt.call(this)||this,bt._map=At,bt.shape=bt._createRegion(_e,re,He);var Kn=bt.getLabelText(re,Fn);if(Fn&&Kn){var ss=bt.shape.getBBox(),Un=bt.getLabelOffsets(re,Fn);bt.labelX=ss.x+ss.width/2+Un[0],bt.labelY=ss.y+ss.height/2+Un[1],bt.label=bt._map.canvas.createText({text:Kn,textAnchor:"middle",alignmentBaseline:"central",dataCode:re,x:bt.labelX,y:bt.labelY},bn,Ke),bt.label.addClass("jvm-region jvm-element")}return bt}Ee(kt,pt);var mt=kt.prototype;return mt._createRegion=function(bt,At,re){return bt=this._map.canvas.createPath({d:bt,dataCode:At},re),bt.addClass("jvm-region jvm-element"),bt},mt.updateLabelPosition=function(){this.label&&this.label.set({x:this.labelX*this._map.scale+this._map.transX*this._map.scale,y:this.labelY*this._map.scale+this._map.transY*this._map.scale})},kt})(Le);K(Mt,J);function Ft(){this._regionLabelsGroup=this._regionLabelsGroup||this.canvas.createGroup("jvm-regions-labels-group");for(var pt in this._mapData.paths){var kt=new Mt({map:this,code:pt,path:this._mapData.paths[pt].path,style:B({},this.params.regionStyle),labelStyle:this.params.regionLabelStyle,labelsGroup:this._regionLabelsGroup,label:this.params.labels&&this.params.labels.regions});this.regions[pt]={config:this._mapData.paths[pt],element:kt}}}var St="jvm-line",ft=(function(pt){function kt(ut,bt){var At;return At=pt.call(this)||this,At._options=ut,At._style={initial:bt},At._draw(),At}Ee(kt,pt);var mt=kt.prototype;return mt.setStyle=function(bt,At){this.shape.setStyle(bt,At)},mt.getConfig=function(){return this._options.config},mt._draw=function(){var bt=this._options,At=bt.index,re=bt.group,_e=bt.map,He={d:this._getDAttribute(),fill:"none",dataIndex:At};this.shape=_e.canvas.createPath(He,this._style,re),this.shape.addClass(St)},mt._getDAttribute=function(){var bt=this._options,At=bt.x1,re=bt.y1,_e=bt.x2,He=bt.y2,Fn=bt.curvature;return"M"+At+","+re+this._getQCommand(At,re,_e,He,Fn)+_e+","+He},mt._getQCommand=function(bt,At,re,_e,He){if(!He)return" ";var Fn=(bt+re)/2+He*(_e-At),bn=(At+_e)/2-He*(re-bt);return" Q"+Fn+","+bn+" "},kt})(Le),zt=["curvature"],Et=["curvature"];function de(pt){var kt=!1,mt=!1,ut=this.params.lineStyle,bt=ut.curvature,At=le(ut,zt);for(var re in pt){for(var _e=pt[re],He=0,Fn=Object.values(this._markers);He<Fn.length;He++){var bn=Fn[He].config;bn.name===_e.from&&(kt=this.getMarkerPosition(bn)),bn.name===_e.to&&(mt=this.getMarkerPosition(bn))}if(kt!==!1&&mt!==!1){var Ke=_e.style||{},Kn=Ke.curvature,ss=le(Ke,Et);this._lines[U(_e.from,_e.to)]=new ft({index:re,map:this,group:this._linesGroup,config:_e,x1:kt.x,y1:kt.y,x2:mt.x,y2:mt.y,curvature:Kn==0?0:Kn||bt},B(At,ss,!0))}}}var Xt="marker",be="jvm-",Te=be+"element "+be+"marker",$e=be+"element "+be+"label",Pe=(function(pt){function kt(ut,bt){var At;return At=pt.call(this)||this,At._options=ut,At._style=bt,At._labelX=null,At._labelY=null,At._offsets=null,At._isImage=!!bt.initial.image,At._draw(),At._options.label&&At._drawLabel(),At._isImage&&At.updateLabelPosition(),At}Ee(kt,pt);var mt=kt.prototype;return mt.getConfig=function(){return this._options.config},mt.updateLabelPosition=function(){var bt=this._options.map;this.label&&this.label.set({x:this._labelX*bt.scale+this._offsets[0]+bt.transX*bt.scale+5+(this._isImage?(this.shape.width||0)/2:this.shape.node.r.baseVal.value),y:this._labelY*bt.scale+bt.transY*this._options.map.scale+this._offsets[1]})},mt._draw=function(){var bt=this._options,At=bt.index,re=bt.map,_e=bt.group,He=bt.cx,Fn=bt.cy,bn=this._isImage?"createImage":"createCircle";this.shape=re.canvas[bn]({dataIndex:At,cx:He,cy:Fn},this._style,_e),this.shape.addClass(Te)},mt._drawLabel=function(){var bt=this._options,At=bt.index,re=bt.map,_e=bt.label,He=bt.labelsGroup,Fn=bt.cx,bn=bt.cy,Ke=bt.config,Kn=bt.isRecentlyCreated,ss=this.getLabelText(At,_e);this._labelX=Fn/re.scale-re.transX,this._labelY=bn/re.scale-re.transY,this._offsets=Kn&&Ke.offsets?Ke.offsets:this.getLabelOffsets(At,_e),this.label=re.canvas.createText({text:ss,dataIndex:At,x:this._labelX,y:this._labelY,dy:"0.6ex"},re.params.markerLabelStyle,He),this.label.addClass($e),Kn&&this.updateLabelPosition()},jt(kt,null,[{key:"Name",get:function(){return Xt}}])})(Le);K(Pe,J);function Ae(pt,kt){var mt=this;pt===void 0&&(pt={}),kt===void 0&&(kt=!1);var ut=function(){var _e=pt[At],He=mt.getMarkerPosition(_e),Fn=_e.coords.join(":");if(!He)return 0;if(kt){if(Object.keys(mt._markers).filter(function(Ke){return mt._markers[Ke]._uid===Fn}).length)return 0;At=Object.keys(mt._markers).length}var bn=new Pe({index:At,map:mt,label:mt.params.labels&&mt.params.labels.markers,labelsGroup:mt._markerLabelsGroup,cx:He.x,cy:He.y,group:mt._markersGroup,config:_e,isRecentlyCreated:kt},B(mt.params.markerStyle,me({},_e.style||{}),!0));mt._markers[At]&&mt.removeMarkers([At]),mt._markers[At]={_uid:Fn,config:_e,element:bn}},bt;for(var At in pt)bt=ut()}var vn=(function(){function pt(mt){mt===void 0&&(mt={}),this._options=mt,this._map=this._options.map,this._series=this._options.series,this._body=R("div","jvm-legend"),this._options.cssClass&&this._body.setAttribute("class",this._options.cssClass),mt.vertical?this._map.legendVertical.appendChild(this._body):this._map.legendHorizontal.appendChild(this._body),this.render()}var kt=pt.prototype;return kt.render=function(){var ut=this._series.scale.getTicks();if(this._body.innderHTML="",this._options.title){var bt=R("div","jvm-legend-title",this._options.title);this._body.appendChild(bt)}for(var At=0;At<ut.length;At++){var re=R("div","jvm-legend-tick"),_e=R("div","jvm-legend-tick-sample");switch(this._series.config.attribute){case"fill":q(ut[At].value)?_e.style.background="url("+ut[At].value+")":_e.style.background=ut[At].value;break;case"stroke":_e.style.background=ut[At].value;break;case"image":_e.style.background="url("+(typeof ut[At].value=="object"?ut[At].value.url:ut[At].value)+") no-repeat center center",_e.style.backgroundSize="cover";break}re.appendChild(_e);var He=ut[At].label;this._options.labelRender&&(He=this._options.labelRender(He));var Fn=R("div","jvm-legend-tick-text",He);re.appendChild(Fn),this._body.appendChild(re)}},pt})(),vs=(function(){function pt(mt){this._scale=mt}var kt=pt.prototype;return kt.getValue=function(ut){return this._scale[ut]},kt.getTicks=function(){var ut=[];for(var bt in this._scale)ut.push({label:bt,value:this._scale[bt]});return ut},pt})(),ei=(function(){function pt(mt,ut,bt){mt===void 0&&(mt={}),this._map=bt,this._elements=ut,this._values=mt.values||{},this.config=mt,this.config.attribute=mt.attribute||"fill",mt.attributes&&this.setAttributes(mt.attributes),typeof mt.scale=="object"&&(this.scale=new vs(mt.scale)),this.config.legend&&(this.legend=new vn(B({map:this._map,series:this},this.config.legend))),this.setValues(this._values)}var kt=pt.prototype;return kt.setValues=function(ut){var bt={};for(var At in ut)ut[At]&&(bt[At]=this.scale.getValue(ut[At]));this.setAttributes(bt)},kt.setAttributes=function(ut){for(var bt in ut)this._elements[bt]&&this._elements[bt].element.setStyle(this.config.attribute,ut[bt])},kt.clear=function(){var ut,bt={};for(ut in this._values)this._elements[ut]&&(bt[ut]=this._elements[ut].element.shape.style.initial[this.config.attribute]);this.setAttributes(bt),this._values={}},pt})();function ps(){this.series={markers:[],regions:[]};for(var pt in this.params.series)for(var kt=0;kt<this.params.series[pt].length;kt++)this.series[pt][kt]=new ei(this.params.series[pt][kt],pt==="markers"?this._markers:this.regions,this)}function Ws(){var pt,kt,mt,ut;this._defaultWidth*this.scale<=this._width?(pt=(this._width-this._defaultWidth*this.scale)/(2*this.scale),mt=(this._width-this._defaultWidth*this.scale)/(2*this.scale)):(pt=0,mt=(this._width-this._defaultWidth*this.scale)/this.scale),this._defaultHeight*this.scale<=this._height?(kt=(this._height-this._defaultHeight*this.scale)/(2*this.scale),ut=(this._height-this._defaultHeight*this.scale)/(2*this.scale)):(kt=0,ut=(this._height-this._defaultHeight*this.scale)/this.scale),this.transY>kt?this.transY=kt:this.transY<ut&&(this.transY=ut),this.transX>pt?this.transX=pt:this.transX<mt&&(this.transX=mt),this.canvas.applyTransformParams(this.scale,this.transX,this.transY),this._markers&&this._repositionMarkers(),this._lines&&this._repositionLines(),this._repositionLabels()}function ns(){var pt=this._baseScale;this._width/this._height>this._defaultWidth/this._defaultHeight?(this._baseScale=this._height/this._defaultHeight,this._baseTransX=Math.abs(this._width-this._defaultWidth*this._baseScale)/(2*this._baseScale)):(this._baseScale=this._width/this._defaultWidth,this._baseTransY=Math.abs(this._height-this._defaultHeight*this._baseScale)/(2*this._baseScale)),this.scale*=this._baseScale/pt,this.transX*=this._baseScale/pt,this.transY*=this._baseScale/pt}function bi(pt,kt,mt,ut,bt){var At=this,re,_e,He=0,Fn=Math.abs(Math.round((pt-this.scale)*60/Math.max(pt,this.scale))),bn,Ke,Kn,ss,Un,pi,qs,kn;pt>this.params.zoomMax*this._baseScale?pt=this.params.zoomMax*this._baseScale:pt<this.params.zoomMin*this._baseScale&&(pt=this.params.zoomMin*this._baseScale),typeof kt<"u"&&typeof mt<"u"&&(re=pt/this.scale,ut?(qs=kt+this._defaultWidth*(this._width/(this._defaultWidth*pt))/2,kn=mt+this._defaultHeight*(this._height/(this._defaultHeight*pt))/2):(qs=this.transX-(re-1)/pt*kt,kn=this.transY-(re-1)/pt*mt)),bt&&Fn>0?(bn=this.scale,Ke=(pt-bn)/Fn,Kn=this.transX*this.scale,Un=this.transY*this.scale,ss=(qs*pt-Kn)/Fn,pi=(kn*pt-Un)/Fn,_e=setInterval(function(){He+=1,At.scale=bn+Ke*He,At.transX=(Kn+ss*He)/At.scale,At.transY=(Un+pi*He)/At.scale,At._applyTransform(),He==Fn&&(clearInterval(_e),At._emit(It.onViewportChange,[At.scale,At.transX,At.transY]))},10)):(this.transX=qs,this.transY=kn,this.scale=pt,this._applyTransform(),this._emit(It.onViewportChange,[this.scale,this.transX,this.transY]))}function Pi(pt){var kt=this;pt===void 0&&(pt={});var mt,ut=[];if(pt.region?ut.push(pt.region):pt.regions&&(ut=pt.regions),ut.length)return ut.forEach(function(_e){if(kt.regions[_e]){var He=kt.regions[_e].element.shape.getBBox();He&&(typeof mt>"u"?mt=He:mt={x:Math.min(mt.x,He.x),y:Math.min(mt.y,He.y),width:Math.max(mt.x+mt.width,He.x+He.width)-Math.min(mt.x,He.x),height:Math.max(mt.y+mt.height,He.y+He.height)-Math.min(mt.y,He.y)})}}),this._setScale(Math.min(this._width/mt.width,this._height/mt.height),-(mt.x+mt.width/2),-(mt.y+mt.height/2),!0,pt.animate);if(pt.coords){var bt=this.coordsToPoint(pt.coords[0],pt.coords[1]),At=this.transX-bt.x/this.scale,re=this.transY-bt.y/this.scale;return this._setScale(pt.scale*this._baseScale,At,re,!0,pt.animate)}}function vi(){this._width=this.container.offsetWidth,this._height=this.container.offsetHeight,this._resize(),this.canvas.setSize(this._width,this._height),this._applyTransform()}var Ur={mill:function(kt,mt,ut){return{x:this.radius*(mt-ut)*this.radDeg,y:-this.radius*Math.log(Math.tan((45+.4*kt)*this.radDeg))/.8}},merc:function(kt,mt,ut){return{x:this.radius*(mt-ut)*this.radDeg,y:-this.radius*Math.log(Math.tan(Math.PI/4+kt*Math.PI/360))}},aea:function(kt,mt,ut){var bt=0,At=ut*this.radDeg,re=29.5*this.radDeg,_e=45.5*this.radDeg,He=kt*this.radDeg,Fn=mt*this.radDeg,bn=(Math.sin(re)+Math.sin(_e))/2,Ke=Math.cos(re)*Math.cos(re)+2*bn*Math.sin(re),Kn=bn*(Fn-At),ss=Math.sqrt(Ke-2*bn*Math.sin(He))/bn,Un=Math.sqrt(Ke-2*bn*Math.sin(bt))/bn;return{x:ss*Math.sin(Kn)*this.radius,y:-(Un-ss*Math.cos(Kn))*this.radius}},lcc:function(kt,mt,ut){var bt=0,At=ut*this.radDeg,re=mt*this.radDeg,_e=33*this.radDeg,He=45*this.radDeg,Fn=kt*this.radDeg,bn=Math.log(Math.cos(_e)*(1/Math.cos(He)))/Math.log(Math.tan(Math.PI/4+He/2)*(1/Math.tan(Math.PI/4+_e/2))),Ke=Math.cos(_e)*Math.pow(Math.tan(Math.PI/4+_e/2),bn)/bn,Kn=Ke*Math.pow(1/Math.tan(Math.PI/4+Fn/2),bn),ss=Ke*Math.pow(1/Math.tan(Math.PI/4+bt/2),bn);return{x:Kn*Math.sin(bn*(re-At))*this.radius,y:-(ss-Kn*Math.cos(bn*(re-At)))*this.radius}}};Ur.degRad=180/Math.PI,Ur.radDeg=Math.PI/180,Ur.radius=6381372;function Me(pt,kt){var mt=ls.maps[this.params.map].projection,ut=Ur[mt.type](pt,kt,mt.centralMeridian),bt=ut.x,At=ut.y,re=this.getInsetForPoint(bt,At);if(!re)return!1;var _e=re.bbox;return bt=(bt-_e[0].x)/(_e[1].x-_e[0].x)*re.width*this.scale,At=(At-_e[0].y)/(_e[1].y-_e[0].y)*re.height*this.scale,{x:bt+this.transX*this.scale+re.left*this.scale,y:At+this.transY*this.scale+re.top*this.scale}}function ze(pt,kt){for(var mt=ls.maps[this.params.map].insets,ut=0;ut<mt.length;ut++){var bt=mt[ut].bbox,At=bt[0],re=bt[1];if(pt>At.x&&pt<re.x&&kt>At.y&&kt<re.y)return mt[ut]}}function Ue(pt){var kt=pt.coords;return ls.maps[this.params.map].projection?this.coordsToPoint.apply(this,kt):{x:kt[0]*this.scale+this.transX*this.scale,y:kt[1]*this.scale+this.transY*this.scale}}function Ge(){var pt=this,kt=this.params.lineStyle.curvature;Object.values(this._lines).forEach(function(mt){var ut=Object.values(pt._markers).find(function(qs){var kn=qs.config;return kn.name===mt.getConfig().from}),bt=Object.values(pt._markers).find(function(qs){var kn=qs.config;return kn.name===mt.getConfig().to});if(ut&&bt){var At=pt.getMarkerPosition(ut.config),re=At.x,_e=At.y,He=pt.getMarkerPosition(bt.config),Fn=He.x,bn=He.y,Ke=mt._options.curvature==0?0:mt._options.curvature||kt,Kn=(re+Fn)/2,ss=(_e+bn)/2,Un=Kn+Ke*(bn-_e),pi=ss-Ke*(Fn-re);mt.setStyle({d:"M"+re+","+_e+" Q"+Un+","+pi+" "+Fn+","+bn})}})}function Ze(){for(var pt in this._markers){var kt=this.getMarkerPosition(this._markers[pt].config);kt!==!1&&this._markers[pt].element.setStyle({cx:kt.x,cy:kt.y})}}function tn(){var pt=this.params.labels;if(pt){if(pt.regions)for(var kt in this.regions)this.regions[kt].element.updateLabelPosition();if(pt.markers)for(var mt in this._markers)this._markers[mt].element.updateLabelPosition()}}var an={_setupContainerEvents:ht,_setupElementEvents:Ot,_setupZoomButtons:Ct,_setupContainerTouchEvents:Gt,_createRegions:Ft,_createLines:de,_createMarkers:Ae,_createSeries:ps,_applyTransform:Ws,_resize:ns,_setScale:bi,setFocus:Pi,updateSize:vi,coordsToPoint:Me,getInsetForPoint:ze,getMarkerPosition:Ue,_repositionLines:Ge,_repositionMarkers:Ze,_repositionLabels:tn},ln={map:"world",backgroundColor:"transparent",draggable:!0,zoomButtons:!0,zoomOnScroll:!0,zoomOnScrollSpeed:3,zoomMax:12,zoomMin:1,zoomAnimate:!0,showTooltip:!0,zoomStep:1.5,bindTouchEvents:!0,lineStyle:{curvature:0,stroke:"#808080",strokeWidth:1,strokeLinecap:"round"},markersSelectable:!1,markersSelectableOne:!1,markerStyle:{initial:{r:7,fill:"#374151",fillOpacity:1,stroke:"#FFF",strokeWidth:5,strokeOpacity:.5},hover:{fill:"#3cc0ff",cursor:"pointer"},selected:{fill:"blue"},selectedHover:{}},markerLabelStyle:{initial:{fontFamily:"Verdana",fontSize:12,fontWeight:500,cursor:"default",fill:"#374151"},hover:{cursor:"pointer"},selected:{},selectedHover:{}},regionsSelectable:!1,regionsSelectableOne:!1,regionStyle:{initial:{fill:"#dee2e8",fillOpacity:1,stroke:"none",strokeWidth:0},hover:{fillOpacity:.7,cursor:"pointer"},selected:{fill:"#9ca3af"},selectedHover:{}},regionLabelStyle:{initial:{fontFamily:"Verdana",fontSize:"12",fontWeight:"bold",cursor:"default",fill:"#35373e"},hover:{cursor:"pointer"}}},We=(function(){function pt(mt,ut){this.node=this._createElement(mt),ut&&this.set(ut)}var kt=pt.prototype;return kt._createElement=function(ut){return document.createElementNS("http://www.w3.org/2000/svg",ut)},kt.addClass=function(ut){this.node.setAttribute("class",ut)},kt.getBBox=function(){return this.node.getBBox()},kt.set=function(ut,bt){if(typeof ut=="object")for(var At in ut)this.applyAttr(At,ut[At]);else this.applyAttr(ut,bt)},kt.get=function(ut){return this.style.initial[ut]},kt.applyAttr=function(ut,bt){this.node.setAttribute(X(ut),bt)},kt.remove=function(){E(this.node)},pt})(),fn=(function(pt){function kt(ut,bt,At){var re;return At===void 0&&(At={}),re=pt.call(this,ut,bt)||this,re.isHovered=!1,re.isSelected=!1,re.style=At,re.style.current={},re.updateStyle(),re}Ee(kt,pt);var mt=kt.prototype;return mt.setStyle=function(bt,At){if(typeof bt=="object")B(this.style.current,bt);else{var re;B(this.style.current,(re={},re[bt]=At,re))}this.updateStyle()},mt.updateStyle=function(){var bt={};B(bt,this.style.initial),B(bt,this.style.current),this.isHovered&&B(bt,this.style.hover),this.isSelected&&(B(bt,this.style.selected),this.isHovered&&B(bt,this.style.selectedHover)),this.set(bt)},kt})(We),Yn=(function(pt){function kt(ut,bt){return pt.call(this,"text",ut,bt)||this}Ee(kt,pt);var mt=kt.prototype;return mt.applyAttr=function(bt,At){bt==="text"?this.node.textContent=At:pt.prototype.applyAttr.call(this,bt,At)},kt})(fn),On=(function(pt){function kt(ut,bt){return pt.call(this,"image",ut,bt)||this}Ee(kt,pt);var mt=kt.prototype;return mt.applyAttr=function(bt,At){var re;bt==="image"?(typeof At=="object"?(re=At.url,this.offset=At.offset||[0,0]):(re=At,this.offset=[0,0]),this.node.setAttributeNS("http://www.w3.org/1999/xlink","href",re),this.width=23,this.height=23,this.applyAttr("width",this.width),this.applyAttr("height",this.height),this.applyAttr("x",this.cx-this.width/2+this.offset[0]),this.applyAttr("y",this.cy-this.height/2+this.offset[1])):bt=="cx"?(this.cx=At,this.width&&this.applyAttr("x",At-this.width/2+this.offset[0])):bt=="cy"?(this.cy=At,this.height&&this.applyAttr("y",At-this.height/2+this.offset[1])):pt.prototype.applyAttr.apply(this,arguments)},kt})(fn),xn=(function(pt){function kt(ut){var bt;return bt=pt.call(this,"svg")||this,bt._container=ut,bt._defsElement=new We("defs"),bt._rootElement=new We("g",{id:"jvm-regions-group"}),bt.node.appendChild(bt._defsElement.node),bt.node.appendChild(bt._rootElement.node),bt._container.appendChild(bt.node),bt}Ee(kt,pt);var mt=kt.prototype;return mt.setSize=function(bt,At){this.node.setAttribute("width",bt),this.node.setAttribute("height",At)},mt.applyTransformParams=function(bt,At,re){this._rootElement.node.setAttribute("transform","scale("+bt+") translate("+At+", "+re+")")},mt.createPath=function(bt,At,re){var _e=new fn("path",bt,At);return _e.node.setAttribute("fill-rule","evenodd"),this._add(_e,re)},mt.createCircle=function(bt,At,re){var _e=new fn("circle",bt,At);return this._add(_e,re)},mt.createLine=function(bt,At,re){var _e=new fn("line",bt,At);return this._add(_e,re)},mt.createText=function(bt,At,re){var _e=new Yn(bt,At);return this._add(_e,re)},mt.createImage=function(bt,At,re){var _e=new On(bt,At);return this._add(_e,re)},mt.createGroup=function(bt){var At=new We("g");return this.node.appendChild(At.node),bt&&(At.node.id=bt),At.canvas=this,At},mt._add=function(bt,At){return At=At||this._rootElement,At.node.appendChild(bt.node),bt},kt})(We),hn=(function(pt){function kt(ut){var bt;bt=pt.call(this)||this;var At=R("div","jvm-tooltip");return bt._map=ut,bt._tooltip=document.body.appendChild(At),bt._bindEventListeners(),bt||at(bt)}Ee(kt,pt);var mt=kt.prototype;return mt._bindEventListeners=function(){var bt=this;j.on(this._map.container,"mousemove",function(At){if(bt._tooltip.classList.contains("active")){var re=V(bt._map.container,"#jvm-regions-group").getBoundingClientRect(),_e=5,He=bt._tooltip.getBoundingClientRect(),Fn=He.height,bn=He.width,Ke=At.clientY<=re.top+Fn+_e,Kn=At.pageY-Fn-_e,ss=At.pageX-bn-_e;Ke&&(Kn+=Fn+_e,ss-=_e*2),At.clientX<re.left+bn+_e&&(ss=At.pageX+_e+2,Ke&&(ss+=_e*2)),bt.css({top:Kn+"px",left:ss+"px"})}})},mt.getElement=function(){return this._tooltip},mt.show=function(){this._tooltip.classList.add("active")},mt.hide=function(){this._tooltip.classList.remove("active")},mt.text=function(bt,At){At===void 0&&(At=!1);var re=At?"innerHTML":"textContent";if(!bt)return this._tooltip[re];this._tooltip[re]=bt},mt.css=function(bt){for(var At in bt)this._tooltip.style[At]=bt[At];return this},kt})(Le),Nn=(function(){function pt(mt,ut){var bt=mt.scale,At=mt.values;this._scale=bt,this._values=At,this._fromColor=this.hexToRgb(bt[0]),this._toColor=this.hexToRgb(bt[1]),this._map=ut,this.setMinMaxValues(At),this.visualize()}var kt=pt.prototype;return kt.setMinMaxValues=function(ut){this.min=Number.MAX_VALUE,this.max=0;for(var bt in ut)bt=parseFloat(ut[bt]),bt>this.max&&(this.max=bt),bt<this.min&&(this.min=bt)},kt.visualize=function(){var ut={},bt;for(var At in this._values)bt=parseFloat(this._values[At]),isNaN(bt)||(ut[At]=this.getValue(bt));this.setAttributes(ut)},kt.setAttributes=function(ut){for(var bt in ut)this._map.regions[bt]&&this._map.regions[bt].element.setStyle("fill",ut[bt])},kt.getValue=function(ut){if(this.min===this.max)return"#"+this._toColor.join("");for(var bt,At="#",re=0;re<3;re++)bt=Math.round(this._fromColor[re]+(this._toColor[re]-this._fromColor[re])*((ut-this.min)/(this.max-this.min))).toString(16),At+=(bt.length===1?"0":"")+bt;return At},kt.hexToRgb=function(ut){var bt=0,At=0,re=0;return ut.length==4?(bt="0x"+ut[1]+ut[1],At="0x"+ut[2]+ut[2],re="0x"+ut[3]+ut[3]):ut.length==7&&(bt="0x"+ut[1]+ut[2],At="0x"+ut[3]+ut[4],re="0x"+ut[5]+ut[6]),[parseInt(bt),parseInt(At),parseInt(re)]},pt})(),Xe="jvm-",on=Xe+"container",Sn=Xe+"markers-group",jn=Xe+"markers-labels-group",zn=Xe+"lines-group",gn=Xe+"series-container",Zn=gn+" "+Xe+"series-h",as=gn+" "+Xe+"series-v",ls=(function(){function pt(mt){var ut=this;if(mt===void 0&&(mt={}),this.params=B(pt.defaults,mt,!0),!pt.maps[this.params.map])throw new Error("Attempt to use map which was not loaded: "+mt.map);this.regions={},this.scale=1,this.transX=0,this.transY=0,this._mapData=pt.maps[this.params.map],this._markers={},this._lines={},this._defaultWidth=this._mapData.width,this._defaultHeight=this._mapData.height,this._height=0,this._width=0,this._baseScale=1,this._baseTransX=0,this._baseTransY=0,document.readyState!=="loading"?this._init():window.addEventListener("DOMContentLoaded",function(){return ut._init()})}var kt=pt.prototype;return kt._init=function(){var ut=this.params;this.container=D(ut.selector),this.container.classList.add(on),this.canvas=new xn(this.container),this.setBackgroundColor(ut.backgroundColor),this._createRegions(),this.updateSize(),ut.lines&&(this._linesGroup=this.canvas.createGroup(zn)),ut.markers&&(this._markersGroup=this.canvas.createGroup(Sn),this._markerLabelsGroup=this.canvas.createGroup(jn)),this._createMarkers(ut.markers),this._createLines(ut.lines||{}),this._repositionLabels(),this._setupContainerEvents(),this._setupElementEvents(),ut.zoomButtons&&this._setupZoomButtons(),ut.showTooltip&&(this._tooltip=new hn(this)),ut.selectedRegions&&this._setSelected("regions",ut.selectedRegions),ut.selectedMarkers&&this._setSelected("_markers",ut.selectedMarkers),ut.focusOn&&this.setFocus(ut.focusOn),ut.visualizeData&&(this.dataVisualization=new Nn(ut.visualizeData,this)),ut.bindTouchEvents&&("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&this._setupContainerTouchEvents(),ut.series&&(this.container.appendChild(this.legendHorizontal=R("div",Zn)),this.container.appendChild(this.legendVertical=R("div",as)),this._createSeries()),this._emit(It.onLoaded,[this])},kt.setBackgroundColor=function(ut){this.container.style.backgroundColor=ut},kt.getSelectedRegions=function(){return this._getSelected("regions")},kt.clearSelectedRegions=function(ut){var bt=this;ut===void 0&&(ut=void 0),ut=this._normalizeRegions(ut)||this._getSelected("regions"),ut.forEach(function(At){bt.regions[At].element.select(!1)})},kt.setSelectedRegions=function(ut){this.clearSelectedRegions(),this._setSelected("regions",this._normalizeRegions(ut))},kt.getSelectedMarkers=function(){return this._getSelected("_markers")},kt.clearSelectedMarkers=function(){this._clearSelected("_markers")},kt.setSelectedMarkers=function(ut){this._setSelected("_markers",ut)},kt.addMarkers=function(ut){ut=Array.isArray(ut)?ut:[ut],this._createMarkers(ut,!0)},kt.removeMarkers=function(ut){var bt=this;ut||(ut=Object.keys(this._markers)),ut.forEach(function(At){bt._markers[At].element.remove(),delete bt._markers[At]})},kt.addLine=function(ut,bt,At){At===void 0&&(At={}),console.warn("`addLine` method is deprecated, please use `addLines` instead."),this._createLines([{from:ut,to:bt,style:At}],this._markers,!0)},kt.addLines=function(ut){var bt=this._getLinesAsUids();Array.isArray(ut)||(ut=[ut]),this._createLines(ut.filter(function(At){return!(bt.indexOf(U(At.from,At.to))>-1)}),!0)},kt.removeLines=function(ut){var bt=this;Array.isArray(ut)?ut=ut.map(function(At){return U(At.from,At.to)}):ut=this._getLinesAsUids(),ut.forEach(function(At){bt._lines[At].dispose(),delete bt._lines[At]})},kt.removeLine=function(ut,bt){console.warn("`removeLine` method is deprecated, please use `removeLines` instead.");var At=U(ut,bt);this._lines.hasOwnProperty(At)&&(this._lines[At].element.remove(),delete this._lines[At])},kt.reset=function(){for(var ut in this.series)for(var bt=0;bt<this.series[ut].length;bt++)this.series[ut][bt].clear();this.legendHorizontal&&(E(this.legendHorizontal),this.legendHorizontal=null),this.legendVertical&&(E(this.legendVertical),this.legendVertical=null),this.scale=this._baseScale,this.transX=this._baseTransX,this.transY=this._baseTransY,this._applyTransform(),this.clearSelectedMarkers(),this.clearSelectedRegions(),this.removeMarkers()},kt.destroy=function(ut){var bt=this;ut===void 0&&(ut=!0),j.flush(),this._tooltip.dispose(),this._emit(It.onDestroyed),ut&&Object.keys(this).forEach(function(At){try{delete bt[At]}catch{}})},kt.extend=function(ut,bt){if(typeof this[ut]=="function")throw new Error("The method ["+ut+"] does already exist, please use another name.");pt.prototype[ut]=bt},kt._emit=function(ut,bt){for(var At in It)It[At]===ut&&typeof this.params[At]=="function"&&this.params[At].apply(this,bt)},kt._getSelected=function(ut){var bt=[];for(var At in this[ut])this[ut][At].element.isSelected&&bt.push(At);return bt},kt._setSelected=function(ut,bt){var At=this;bt.forEach(function(re){At[ut][re]&&At[ut][re].element.select(!0)})},kt._clearSelected=function(ut){var bt=this;this._getSelected(ut).forEach(function(At){bt[ut][At].element.select(!1)})},kt._getLinesAsUids=function(){return Object.keys(this._lines)},kt._normalizeRegions=function(ut){return typeof ut=="string"?[ut]:ut},pt})();ls.maps={},ls.defaults=ln,Object.assign(ls.prototype,an);var In=(function(){function pt(kt){if(kt===void 0&&(kt={}),!kt.selector)throw new Error("Selector is not given.");return new ls(kt)}return pt.addMap=function(mt,ut){ls.maps[mt]=ut},pt})(),gs=window.jsVectorMap=In;return gs}))})(vm)),vm.exports}var lR=aR();const cR=Vp(lR);jsVectorMap.addMap("world",{insets:[{width:900,top:0,left:0,height:440.70631074413296,bbox:[{y:-12671671123330014e-9,x:-20004297151525836e-9},{y:6930392025135122e-9,x:2002657239474939e-8}]}],paths:{BD:{path:"M651.84,230.21l-0.6,-2.0l-1.36,-1.71l-2.31,-0.11l-0.41,0.48l0.2,0.94l-0.53,0.99l-0.72,-0.36l-0.68,0.35l-1.2,-0.36l-0.37,-2.0l-0.81,-1.86l0.39,-1.46l-0.22,-0.47l-1.14,-0.53l0.29,-0.5l1.48,-0.94l0.03,-0.65l-1.55,-1.22l0.55,-1.14l1.61,0.94l1.04,0.15l0.18,1.54l0.34,0.35l5.64,0.63l-0.84,1.64l-1.22,0.34l-0.77,1.51l0.07,0.47l1.37,1.37l0.67,-0.19l0.42,-1.39l1.21,3.84l-0.03,1.21l-0.33,-0.15l-0.4,0.28Z",name:"Bangladesh"},BE:{path:"M429.29,144.05l1.91,0.24l2.1,-0.63l2.63,1.99l-0.21,1.66l-0.69,0.4l-0.18,1.2l-1.66,-1.13l-1.39,0.15l-2.73,-2.7l-1.17,-0.18l-0.16,-0.52l1.54,-0.5Z",name:"Belgium"},BF:{path:"M421.42,247.64l-0.11,0.95l0.34,1.16l1.4,1.71l0.07,1.1l0.32,0.37l2.55,0.51l-0.04,1.28l-0.38,0.53l-1.07,0.21l-0.72,1.18l-0.63,0.21l-3.22,-0.25l-0.94,0.39l-5.4,-0.05l-0.39,0.38l0.16,2.73l-1.23,-0.43l-1.17,0.1l-0.89,0.57l-2.27,-1.72l-0.13,-1.11l0.61,-0.96l0.02,-0.93l1.87,-1.98l0.44,-1.81l0.43,-0.39l1.28,0.26l1.05,-0.52l0.47,-0.73l1.84,-1.09l0.55,-0.83l2.2,-1.0l1.15,-0.3l0.72,0.45l1.13,-0.01Z",name:"Burkina Faso"},BG:{path:"M491.65,168.18l-0.86,0.88l-0.91,2.17l0.48,1.34l-1.6,-0.24l-2.55,0.95l-0.28,1.51l-1.8,0.22l-2.0,-1.0l-1.92,0.79l-1.42,-0.07l-0.15,-1.63l-1.05,-0.97l0.0,-0.8l1.2,-1.57l0.01,-0.56l-1.14,-1.23l-0.05,-0.94l0.88,0.97l0.88,-0.2l1.91,0.47l3.68,0.16l1.42,-0.81l2.72,-0.66l2.55,1.24Z",name:"Bulgaria"},BA:{path:"M463.49,163.65l2.1,0.5l1.72,-0.03l1.52,0.68l-0.36,0.78l0.08,0.45l1.04,1.02l-0.25,0.98l-1.81,1.15l-0.38,1.38l-1.67,-0.87l-0.89,-1.2l-2.11,-1.83l-1.63,-2.22l0.23,-0.57l0.48,0.38l0.55,-0.06l0.43,-0.51l0.94,-0.06Z",name:"Bosnia and Herz."},BN:{path:"M707.48,273.58l0.68,-0.65l1.41,-0.91l-0.15,1.63l-0.81,-0.05l-0.61,0.58l-0.53,-0.6Z",name:"Brunei"},BO:{path:"M263.83,340.69l-3.09,-0.23l-0.38,0.23l-0.7,1.52l-1.31,-1.53l-3.28,-0.64l-2.37,2.4l-1.31,0.26l-0.88,-3.26l-1.3,-2.86l0.74,-2.37l-0.13,-0.43l-1.2,-1.01l-0.37,-1.89l-1.08,-1.55l1.45,-2.56l-0.96,-2.33l0.47,-1.06l-0.34,-0.73l0.91,-1.32l0.16,-3.84l0.5,-1.18l-1.81,-3.41l2.46,0.07l0.8,-0.85l3.4,-1.91l2.66,-0.35l-0.19,1.38l0.3,1.07l-0.05,1.97l2.72,2.27l2.88,0.49l0.89,0.86l1.79,0.58l0.98,0.7l1.71,0.05l1.17,0.61l0.6,2.7l-0.7,0.54l0.96,2.99l0.37,0.28l4.3,0.1l-0.25,1.2l0.27,1.02l1.43,0.9l0.5,1.35l-0.41,1.86l-0.65,1.08l0.12,1.35l-2.69,-1.65l-2.4,-0.03l-4.36,0.76l-1.49,2.5l-0.11,1.52l-0.75,2.37Z",name:"Bolivia"},JP:{path:"M781.12,166.87l1.81,0.68l1.62,-0.97l0.39,2.42l-3.35,0.75l-2.23,2.88l-3.63,-1.9l-0.56,0.2l-1.26,3.05l-2.16,0.03l-0.29,-2.51l1.08,-2.03l2.45,-0.16l0.37,-0.33l1.25,-5.94l2.47,2.71l2.03,1.12ZM773.56,187.34l-0.91,2.22l0.37,1.52l-1.14,1.75l-3.02,1.26l-4.58,0.27l-3.34,3.01l-1.25,-0.8l-0.09,-1.9l-0.46,-0.38l-4.35,0.62l-3.0,1.32l-2.85,0.05l-0.37,0.27l0.13,0.44l2.32,1.89l-1.54,4.34l-1.26,0.9l-0.79,-0.7l0.56,-2.27l-0.21,-0.45l-1.47,-0.75l-0.74,-1.4l2.12,-0.84l1.26,-1.7l2.45,-1.42l1.83,-1.91l4.78,-0.81l2.6,0.57l0.44,-0.21l2.39,-4.66l1.29,1.06l0.5,0.01l5.1,-4.02l1.69,-3.73l-0.38,-3.4l0.9,-1.61l2.14,-0.44l1.23,3.72l-0.07,2.18l-2.23,2.84l-0.04,3.16ZM757.78,196.26l0.19,0.56l-1.01,1.21l-1.16,-0.68l-1.28,0.65l-0.69,1.45l-1.02,-0.5l0.01,-0.93l1.14,-1.38l1.57,0.14l0.85,-0.98l1.4,0.46Z",name:"Japan"},BI:{path:"M495.45,295.49l-1.08,-2.99l1.14,-0.11l0.64,-1.19l0.76,0.09l0.65,1.83l-2.1,2.36Z",name:"Burundi"},BJ:{path:"M429.57,255.75l-0.05,0.8l0.5,1.34l-0.42,0.86l0.17,0.79l-1.81,2.12l-0.57,1.76l-0.08,5.42l-1.41,0.2l-0.48,-1.36l0.11,-5.71l-0.52,-0.7l-0.2,-1.35l-1.48,-1.48l0.21,-0.9l0.89,-0.43l0.42,-0.92l1.27,-0.36l1.22,-1.34l0.61,-0.0l1.62,1.24Z",name:"Benin"},BT:{path:"M650.32,213.86l0.84,0.71l-0.12,1.1l-3.76,-0.11l-1.57,0.4l-1.93,-0.87l1.48,-1.96l1.13,-0.57l1.63,0.57l1.33,0.08l0.99,0.65Z",name:"Bhutan"},JM:{path:"M228.38,239.28l-0.8,0.4l-2.26,-1.06l0.84,-0.23l2.14,0.3l1.17,0.56l-1.08,0.03Z",name:"Jamaica"},BW:{path:"M483.92,330.07l2.27,4.01l2.83,2.86l0.96,0.31l0.78,2.43l2.13,0.61l1.02,0.76l-3.0,1.64l-2.32,2.02l-1.54,2.69l-1.52,0.45l-0.64,1.94l-1.34,0.52l-1.85,-0.12l-1.21,-0.74l-1.35,-0.3l-1.22,0.62l-0.75,1.37l-2.31,1.9l-1.4,0.21l-0.35,-0.59l0.16,-1.75l-1.48,-2.54l-0.62,-0.43l-0.0,-7.1l2.08,-0.08l0.39,-0.4l0.07,-8.9l5.19,-0.93l0.8,0.89l0.51,0.07l1.5,-0.95l2.21,-0.49Z",name:"Botswana"},BR:{path:"M259.98,275.05l3.24,0.7l0.65,-0.53l4.55,-1.32l1.08,-1.06l-0.02,-0.63l0.55,-0.05l0.28,0.28l-0.26,0.87l0.22,0.48l0.73,0.32l0.4,0.81l-0.62,0.86l-0.4,2.13l0.82,2.56l1.69,1.43l1.43,0.2l3.17,-1.68l3.18,0.3l0.65,-0.75l-0.27,-0.92l1.9,-0.09l2.39,0.99l1.06,-0.61l0.84,0.78l1.2,-0.18l1.18,-1.06l0.84,-1.94l1.36,-2.11l0.37,-0.05l1.89,5.45l1.33,0.59l0.05,1.28l-1.77,1.94l0.02,0.56l1.02,0.87l4.07,0.36l0.08,2.16l0.66,0.29l1.74,-1.5l6.97,2.32l1.02,1.22l-0.35,1.18l0.49,0.5l2.81,-0.74l4.77,1.3l3.75,-0.08l3.57,2.0l3.29,2.86l1.93,0.72l2.12,0.12l0.71,0.62l1.21,4.51l-0.95,3.98l-4.72,5.06l-1.64,2.92l-1.72,2.05l-0.8,0.3l-0.72,2.03l0.18,4.75l-0.94,5.53l-0.81,1.13l-0.43,3.36l-2.55,3.5l-0.4,2.51l-1.86,1.04l-0.67,1.53l-2.54,0.01l-3.94,1.01l-1.83,1.2l-2.87,0.82l-3.03,2.19l-2.2,2.83l-0.36,2.0l0.4,1.58l-0.44,2.6l-0.51,1.2l-1.77,1.54l-2.75,4.78l-3.83,3.42l-1.24,2.74l-1.18,1.15l-0.36,-0.83l0.95,-1.14l0.01,-0.5l-1.52,-1.97l-4.56,-3.32l-1.03,-0.0l-2.38,-2.02l-0.81,-0.0l5.34,-5.45l3.77,-2.58l0.22,-2.46l-1.35,-1.81l-0.91,0.07l0.58,-2.33l0.01,-1.54l-1.11,-0.83l-1.75,0.3l-0.44,-3.11l-0.52,-0.95l-1.88,-0.88l-1.24,0.47l-2.17,-0.41l0.15,-3.21l-0.62,-1.34l0.66,-0.73l-0.22,-1.34l0.66,-1.13l0.44,-2.04l-0.61,-1.83l-1.4,-0.86l-0.2,-0.75l0.34,-1.39l-0.38,-0.5l-4.52,-0.1l-0.72,-2.22l0.59,-0.42l-0.03,-1.1l-0.5,-0.87l-0.32,-1.7l-1.45,-0.76l-1.63,-0.02l-1.05,-0.72l-1.6,-0.48l-1.13,-0.99l-2.69,-0.4l-2.47,-2.06l0.13,-4.35l-0.45,-0.45l-3.46,0.5l-3.44,1.94l-0.6,0.74l-2.9,-0.17l-1.47,0.42l-0.72,-0.18l0.15,-3.52l-0.63,-0.34l-1.94,1.41l-1.87,-0.06l-0.83,-1.18l-1.37,-0.26l0.21,-1.01l-1.35,-1.49l-0.88,-1.91l0.56,-0.6l-0.0,-0.81l1.29,-0.62l0.22,-0.43l-0.22,-1.19l0.61,-0.91l0.15,-0.99l2.65,-1.58l1.99,-0.47l0.42,-0.36l2.06,0.11l0.42,-0.33l1.19,-8.0l-0.41,-1.56l-1.1,-1.0l0.01,-1.33l1.91,-0.42l0.08,-0.96l-0.33,-0.43l-1.14,-0.2l-0.02,-0.83l4.47,0.05l0.82,-0.67l0.82,1.81l0.8,0.07l1.15,1.1l2.26,-0.05l0.71,-0.83l2.78,-0.96l0.48,-1.13l1.6,-0.64l0.24,-0.47l-0.48,-0.82l-1.83,-0.19l-0.36,-3.22Z",name:"Brazil"},BS:{path:"M226.4,223.87l-0.48,-1.15l-0.84,-0.75l0.36,-1.11l0.95,1.95l0.01,1.06ZM225.56,216.43l-1.87,0.29l-0.04,-0.22l0.74,-0.14l1.17,0.06Z",name:"Bahamas"},BY:{path:"M493.84,128.32l0.29,0.7l0.49,0.23l1.19,-0.38l2.09,0.72l0.19,1.26l-0.45,1.24l1.57,2.26l0.89,0.59l0.17,0.81l1.58,0.56l0.4,0.5l-0.53,0.41l-1.87,-0.11l-0.73,0.38l-0.13,0.52l1.04,2.74l-1.91,0.26l-0.89,0.99l-0.11,1.18l-2.73,-0.04l-0.53,-0.62l-0.52,-0.08l-0.75,0.46l-0.91,-0.42l-1.92,-0.07l-2.75,-0.79l-2.6,-0.28l-2.0,0.07l-1.5,0.92l-0.67,0.07l-0.08,-1.22l-0.59,-1.19l1.36,-0.88l0.01,-1.35l-0.7,-1.41l-0.07,-1.0l2.16,-0.02l2.72,-1.3l0.75,-2.04l1.91,-1.04l0.2,-0.41l-0.19,-1.25l3.8,-1.78l2.3,0.77Z",name:"Belarus"},BZ:{path:"M198.03,244.38l0.1,-4.49l0.69,-0.06l0.74,-1.3l0.34,0.28l-0.4,1.3l0.17,0.58l-0.34,2.25l-1.3,1.42Z",name:"Belize"},RU:{path:"M491.55,115.25l2.55,-1.85l-0.01,-0.65l-2.2,-1.5l7.32,-6.76l1.03,-2.11l-0.13,-0.49l-3.46,-2.52l0.86,-2.7l-2.11,-2.81l1.56,-3.67l-2.77,-4.52l2.15,-2.99l-0.08,-0.55l-3.65,-2.73l0.3,-2.54l1.81,-0.37l4.26,-1.77l2.42,-1.45l4.06,2.61l6.79,1.04l9.34,4.85l1.78,1.88l0.14,2.46l-2.55,2.02l-3.9,1.06l-11.07,-3.14l-2.06,0.53l-0.13,0.7l3.94,2.94l0.31,5.86l0.26,0.36l5.14,2.24l0.58,-0.29l0.32,-1.94l-1.35,-1.78l1.13,-1.09l6.13,2.42l2.11,-0.98l0.18,-0.56l-1.51,-2.67l5.41,-3.76l2.07,0.22l2.26,1.41l0.57,-0.16l1.46,-2.87l-0.05,-0.44l-1.92,-2.32l1.12,-2.32l-1.32,-2.27l5.87,1.16l1.04,1.75l-2.59,0.43l-0.33,0.4l0.02,2.36l2.46,1.83l3.87,-0.91l0.86,-2.8l13.69,-5.65l0.99,0.11l-1.92,2.06l0.23,0.67l3.11,0.45l2.0,-1.48l4.56,-0.12l3.64,-1.73l2.65,2.44l0.56,-0.01l2.85,-2.88l-0.01,-0.57l-2.35,-2.29l0.9,-1.01l7.14,1.3l3.41,1.36l9.05,4.97l0.51,-0.11l1.67,-2.27l-0.05,-0.53l-2.43,-2.21l-0.06,-0.78l-0.34,-0.36l-2.52,-0.36l0.64,-1.93l-1.32,-3.46l-0.06,-1.21l4.48,-4.06l1.69,-4.29l1.6,-0.81l6.23,1.18l0.44,2.21l-2.29,3.64l0.06,0.5l1.47,1.39l0.76,3.0l-0.56,6.03l2.69,2.82l-0.96,2.57l-4.86,5.95l0.23,0.64l2.86,0.61l0.42,-0.17l0.93,-1.4l2.64,-1.03l0.87,-2.24l2.09,-1.96l0.07,-0.5l-1.36,-2.28l1.09,-2.69l-0.32,-0.55l-2.47,-0.33l-0.5,-2.06l1.94,-4.38l-0.06,-0.42l-2.96,-3.4l4.12,-2.88l0.16,-0.4l-0.51,-2.93l0.54,-0.05l1.13,2.25l-0.96,4.35l0.27,0.47l2.68,0.84l0.5,-0.51l-1.02,-2.99l3.79,-1.66l5.01,-0.24l4.53,2.61l0.48,-0.06l0.07,-0.48l-2.18,-3.82l-0.23,-4.67l3.98,-0.9l5.97,0.21l5.49,-0.64l0.27,-0.65l-1.83,-2.31l2.56,-2.9l2.87,-0.17l4.8,-2.47l6.54,-0.67l1.03,-1.42l6.25,-0.45l2.32,1.11l5.53,-2.7l4.5,0.08l0.39,-0.28l0.66,-2.15l2.26,-2.12l5.69,-2.11l3.21,1.29l-2.46,0.94l-0.25,0.42l0.34,0.35l5.41,0.77l0.61,2.33l0.58,0.25l2.2,-1.22l7.13,0.07l5.51,2.47l1.79,1.72l-0.53,2.24l-9.16,4.15l-1.97,1.52l0.16,0.71l6.77,1.91l2.16,-0.78l1.13,2.74l0.67,0.11l1.01,-1.15l3.81,-0.73l7.7,0.77l0.54,1.99l0.36,0.29l10.47,0.71l0.43,-0.38l0.13,-3.23l4.87,0.78l3.95,-0.02l3.83,2.4l1.03,2.71l-1.35,1.79l0.02,0.5l3.15,3.64l4.07,1.96l0.53,-0.18l2.23,-4.47l3.95,1.93l4.16,-1.21l4.73,1.39l2.05,-1.26l3.94,0.62l0.43,-0.55l-1.68,-4.02l2.89,-1.8l22.31,3.03l2.16,2.75l6.55,3.51l10.29,-0.81l4.82,0.73l1.85,1.66l-0.29,3.08l0.25,0.41l3.08,1.26l3.56,-0.88l4.35,-0.11l4.8,0.87l4.57,-0.47l4.23,3.79l0.43,0.07l3.1,-1.4l0.16,-0.6l-1.88,-2.62l0.85,-1.52l7.71,1.21l5.22,-0.26l7.09,2.09l9.59,5.22l6.35,4.11l-0.2,2.38l1.88,1.41l0.6,-0.42l-0.48,-2.53l6.15,0.57l4.4,3.51l-1.97,1.43l-4.0,0.41l-0.36,0.39l-0.06,3.79l-0.74,0.62l-2.07,-0.11l-1.91,-1.39l-3.14,-1.11l-0.78,-1.85l-2.72,-0.68l-2.63,0.49l-1.04,-1.1l0.46,-1.31l-0.5,-0.51l-3.0,0.98l-0.22,0.58l0.99,1.7l-1.21,1.48l-3.04,1.68l-3.12,-0.28l-0.4,0.23l0.09,0.46l2.2,2.09l1.46,3.2l1.15,1.1l0.24,1.33l-0.42,0.67l-4.63,-0.77l-6.96,2.9l-2.19,0.44l-7.6,5.06l-0.84,1.45l-3.61,-2.37l-6.24,2.82l-0.94,-1.15l-0.53,-0.08l-2.28,1.52l-3.2,-0.49l-0.44,0.27l-0.78,2.37l-3.05,3.78l0.09,1.47l0.29,0.36l2.54,0.72l-0.29,4.53l-1.97,0.11l-0.35,0.26l-1.07,2.94l0.8,1.45l-3.91,1.58l-1.05,3.95l-3.48,0.77l-0.3,0.3l-0.72,3.29l-3.09,2.65l-0.7,-1.74l-2.44,-12.44l1.16,-4.71l2.04,-2.06l0.22,-1.64l3.8,-0.86l4.46,-4.61l4.28,-3.81l4.48,-3.01l2.17,-5.63l-0.42,-0.54l-3.04,0.33l-1.77,3.31l-5.86,3.86l-1.86,-4.25l-0.45,-0.23l-6.46,1.3l-6.47,6.44l-0.01,0.55l1.58,1.74l-8.24,1.17l0.15,-2.2l-0.34,-0.42l-3.89,-0.56l-3.25,1.81l-7.62,-0.62l-8.45,1.19l-17.71,15.41l0.22,0.7l3.74,0.41l1.36,2.17l2.43,0.76l1.88,-1.68l2.4,0.2l3.4,3.54l0.08,2.6l-1.95,3.42l-0.21,3.9l-1.1,5.06l-3.71,4.54l-0.87,2.21l-8.29,8.89l-3.19,1.7l-1.32,0.03l-1.45,-1.36l-0.49,-0.04l-2.27,1.5l0.41,-3.65l-0.59,-2.47l1.75,-0.89l2.91,0.53l0.42,-0.2l1.68,-3.03l0.87,-3.46l0.97,-1.18l1.32,-2.88l-0.45,-0.56l-4.14,0.95l-2.19,1.25l-3.41,-0.0l-1.06,-2.93l-2.97,-2.3l-4.28,-1.06l-1.75,-5.07l-2.66,-5.01l-2.29,-1.29l-3.75,-1.01l-3.44,0.08l-3.18,0.62l-2.24,1.77l0.05,0.66l1.18,0.69l0.02,1.43l-1.33,1.05l-2.26,3.51l-0.04,1.43l-3.16,1.84l-2.82,-1.16l-3.01,0.23l-1.35,-1.07l-1.5,-0.35l-3.9,2.31l-3.22,0.52l-2.27,0.79l-3.05,-0.51l-2.21,0.03l-1.48,-1.6l-2.6,-1.63l-2.63,-0.43l-5.46,1.01l-3.23,-1.25l-0.72,-2.57l-5.2,-1.24l-2.75,-1.36l-0.5,0.12l-2.59,3.45l0.84,2.1l-2.06,1.93l-3.41,-0.77l-2.42,-0.12l-1.83,-1.54l-2.53,-0.05l-2.42,-0.98l-3.86,1.57l-4.72,2.78l-3.3,0.75l-1.55,-1.92l-3.0,0.41l-1.11,-1.33l-1.62,-0.59l-1.31,-1.94l-1.38,-0.6l-3.7,0.79l-3.31,-1.83l-0.51,0.11l-0.99,1.29l-5.29,-8.05l-2.96,-2.48l0.65,-0.77l0.01,-0.51l-0.5,-0.11l-6.2,3.21l-1.84,0.15l0.15,-1.39l-0.26,-0.42l-3.22,-1.17l-2.46,0.7l-0.69,-3.16l-0.32,-0.31l-4.5,-0.75l-2.47,1.47l-6.19,1.27l-1.29,0.86l-9.51,1.3l-1.15,1.17l-0.03,0.53l1.47,1.9l-1.89,0.69l-0.22,0.56l0.31,0.6l-2.11,1.44l0.03,0.68l3.75,2.12l-0.39,0.98l-3.23,-0.13l-0.86,0.86l-3.09,-1.59l-3.97,0.07l-2.66,1.35l-8.32,-3.56l-4.07,0.06l-5.39,3.68l-0.39,2.0l-2.03,-1.5l-0.59,0.13l-2.0,3.59l0.57,0.93l-1.28,2.16l0.06,0.48l2.13,2.17l1.95,0.04l1.37,1.82l-0.23,1.46l0.25,0.43l0.83,0.33l-0.8,1.31l-2.49,0.62l-2.49,3.2l0.0,0.49l2.17,2.78l-0.15,2.18l2.5,3.24l-1.58,1.59l-0.7,-0.13l-1.63,-1.72l-2.29,-0.84l-0.94,-1.31l-2.34,-0.63l-1.48,0.4l-0.43,-0.47l-3.51,-1.48l-5.76,-1.01l-0.45,0.19l-2.89,-2.34l-2.9,-1.2l-1.53,-1.29l1.29,-0.43l2.08,-2.61l-0.05,-0.55l-0.89,-0.79l3.05,-1.06l0.27,-0.42l-0.07,-0.69l-0.49,-0.35l-1.73,0.39l0.04,-0.68l1.04,-0.72l2.66,-0.48l0.4,-1.32l-0.5,-1.6l0.92,-1.54l0.03,-1.17l-0.29,-0.37l-3.69,-1.06l-1.41,0.02l-1.42,-1.41l-2.19,0.38l-2.77,-1.01l-0.03,-0.59l-0.89,-1.43l-2.0,-0.32l-0.11,-0.54l0.49,-0.53l0.01,-0.53l-1.6,-1.9l-3.58,0.02l-0.88,0.73l-0.46,-0.07l-1.0,-2.79l2.22,-0.02l0.97,-0.74l0.07,-0.57l-0.9,-1.04l-1.35,-0.48l-0.11,-0.7l-0.95,-0.58l-1.38,-1.99l0.46,-0.98l-0.51,-1.96l-2.45,-0.84l-1.21,0.3l-0.46,-0.76l-2.46,-0.83l-0.72,-1.87l-0.21,-1.69l-0.99,-0.85l0.85,-1.17l-0.7,-3.21l1.66,-1.97l-0.16,-0.79ZM749.2,170.72l-0.6,0.4l-0.13,0.16l-0.01,-0.51l0.74,-0.05ZM874.85,67.94l-5.63,0.48l-0.26,-0.84l3.15,-1.89l1.94,0.01l3.19,1.16l-2.39,1.09ZM797.39,48.49l-2.0,1.36l-3.8,-0.42l-4.25,-1.8l0.35,-0.97l9.69,1.83ZM783.67,46.12l-1.63,3.09l-8.98,-0.13l-4.09,1.14l-4.54,-2.97l1.16,-3.01l3.05,-0.89l6.5,0.22l8.54,2.56ZM778.2,134.98l-0.56,-0.9l0.27,-0.12l0.29,1.01ZM778.34,135.48l0.94,3.53l-0.05,3.38l1.05,3.39l2.18,5.0l-2.89,-0.83l-0.49,0.26l-1.54,4.65l2.42,3.5l-0.04,1.13l-1.24,-1.24l-0.61,0.06l-1.09,1.61l-0.28,-1.61l0.27,-3.1l-0.28,-3.4l0.58,-2.47l0.11,-4.39l-1.46,-3.36l0.21,-4.32l2.15,-1.46l0.07,-0.34ZM771.95,56.61l1.76,-1.42l2.89,-0.42l3.28,1.71l0.14,0.6l-3.27,0.03l-4.81,-0.5ZM683.76,31.09l-13.01,1.93l4.03,-6.35l1.82,-0.56l1.73,0.34l5.99,2.98l-0.56,1.66ZM670.85,27.93l-5.08,0.64l-6.86,-1.57l-3.99,-2.05l-2.1,-4.16l-2.6,-0.87l5.72,-3.5l5.2,-1.28l4.69,2.85l5.59,5.4l-0.56,4.53ZM564.15,68.94l-0.64,0.17l-7.85,-0.57l-0.86,-2.04l-4.28,-1.17l-0.28,-1.94l2.27,-0.89l0.25,-0.39l-0.08,-2.38l4.81,-3.97l-0.15,-0.7l-1.47,-0.38l5.3,-3.81l0.15,-0.44l-0.58,-1.94l5.28,-2.51l8.21,-3.27l8.28,-0.96l4.35,-1.94l4.6,-0.64l1.36,1.61l-1.34,1.28l-16.43,4.94l-7.97,4.88l-7.74,9.63l0.66,4.14l4.16,3.27ZM548.81,18.48l-5.5,1.18l-0.58,1.02l-2.59,0.84l-2.13,-1.07l1.12,-1.42l-0.3,-0.65l-2.33,-0.07l1.68,-0.36l3.47,-0.06l0.42,1.29l0.66,0.16l1.38,-1.34l2.15,-0.88l2.94,1.01l-0.39,0.36ZM477.37,133.15l-4.08,0.05l-2.56,-0.32l0.33,-0.87l3.17,-1.03l3.24,0.96l-0.09,1.23Z",name:"Russia"},RW:{path:"M497.0,288.25l0.71,1.01l-0.11,1.09l-1.63,0.03l-1.04,1.39l-0.83,-0.11l0.51,-1.2l0.08,-1.34l0.42,-0.41l0.7,0.14l1.19,-0.61Z",name:"Rwanda"},RS:{path:"M469.4,163.99l0.42,-0.5l-0.01,-0.52l-1.15,-1.63l1.43,-0.62l1.33,0.12l1.17,1.06l0.46,1.13l1.34,0.64l0.35,1.35l1.46,0.9l0.76,-0.29l0.2,0.69l-0.48,0.78l0.22,1.12l1.05,1.22l-0.77,0.8l-0.37,1.52l-1.21,0.08l0.24,-0.64l-0.39,-0.54l-2.08,-1.64l-0.9,0.05l-0.48,0.94l-2.12,-1.37l0.53,-1.6l-1.11,-1.37l0.51,-1.1l-0.41,-0.57Z",name:"Serbia"},LT:{path:"M486.93,129.3l0.17,1.12l-1.81,0.98l-0.72,2.02l-2.47,1.18l-2.1,-0.02l-0.73,-1.05l-1.06,-0.3l-0.09,-1.87l-3.56,-1.13l-0.43,-2.36l2.48,-0.94l4.12,0.22l2.25,-0.31l0.52,0.69l1.24,0.21l2.19,1.56Z",name:"Lithuania"},LU:{path:"M436.08,149.45l-0.48,-0.07l0.3,-1.28l0.27,0.4l-0.09,0.96Z",name:"Luxembourg"},LR:{path:"M399.36,265.97l0.18,1.54l-0.48,0.99l0.08,0.47l2.47,1.8l-0.33,2.8l-2.65,-1.13l-5.78,-4.61l0.58,-1.32l2.1,-2.33l0.86,-0.22l0.77,1.14l-0.14,0.85l0.59,0.87l1.0,0.14l0.76,-0.99Z",name:"Liberia"},RO:{path:"M487.53,154.23l0.6,0.24l2.87,3.98l-0.17,2.69l0.45,1.42l1.32,0.81l1.35,-0.42l0.76,0.36l0.02,0.31l-0.83,0.45l-0.59,-0.22l-0.54,0.3l-0.62,3.3l-1.0,-0.22l-2.07,-1.13l-2.95,0.71l-1.25,0.76l-3.51,-0.15l-1.89,-0.47l-0.87,0.16l-0.82,-1.3l0.29,-0.26l-0.06,-0.64l-1.09,-0.34l-0.56,0.5l-1.05,-0.64l-0.39,-1.39l-1.36,-0.65l-0.35,-1.0l-0.83,-0.75l1.54,-0.54l2.66,-4.21l2.4,-1.24l2.96,0.34l1.48,0.73l0.79,-0.45l1.78,-0.3l0.75,-0.74l0.79,0.0Z",name:"Romania"},GW:{path:"M386.23,253.6l-0.29,0.84l0.15,0.6l-2.21,0.59l-0.86,0.96l-1.04,-0.83l-1.09,-0.23l-0.54,-1.06l-0.66,-0.49l2.41,-0.48l4.13,0.1Z",name:"Guinea-Bissau"},GT:{path:"M195.08,249.77l-2.48,-0.37l-1.03,-0.45l-1.14,-0.89l0.3,-0.99l-0.24,-0.68l0.96,-1.66l2.98,-0.01l0.4,-0.37l-0.19,-1.28l-1.67,-1.4l0.51,-0.4l0.0,-1.05l3.85,0.02l-0.21,4.53l0.4,0.43l1.46,0.38l-1.48,0.98l-0.35,0.7l0.12,0.57l-2.2,1.96Z",name:"Guatemala"},GR:{path:"M487.07,174.59l-0.59,1.43l-0.37,0.21l-2.84,-0.35l-3.03,0.77l-0.18,0.68l1.28,1.23l-0.61,0.23l-1.14,0.0l-1.2,-1.39l-0.63,0.03l-0.53,1.01l0.56,1.76l1.03,1.19l-0.56,0.38l-0.05,0.62l2.52,2.12l0.02,0.87l-1.78,-0.59l-0.48,0.56l0.5,1.0l-1.07,0.2l-0.3,0.53l0.75,2.01l-0.98,0.02l-1.84,-1.12l-1.37,-4.2l-2.21,-2.95l-0.11,-0.56l1.04,-1.28l0.2,-0.95l0.85,-0.66l0.03,-0.46l1.32,-0.21l1.01,-0.64l1.22,0.05l0.65,-0.56l2.26,-0.0l1.82,-0.75l1.85,1.0l2.28,-0.28l0.35,-0.39l0.01,-0.77l0.34,0.22ZM480.49,192.16l0.58,0.4l-0.68,-0.12l0.11,-0.28ZM482.52,192.82l2.51,0.06l0.24,0.32l-1.99,0.13l-0.77,-0.51Z",name:"Greece"},GQ:{path:"M448.79,279.62l0.02,2.22l-4.09,0.0l0.69,-2.27l3.38,0.05Z",name:"Eq. Guinea"},GY:{path:"M277.42,270.07l-0.32,1.83l-1.32,0.57l-0.23,0.46l-0.28,2.0l1.11,1.82l0.83,0.19l0.32,1.25l1.13,1.62l-1.21,-0.19l-1.08,0.71l-1.77,0.5l-0.44,0.46l-0.86,-0.09l-1.32,-1.01l-0.77,-2.27l0.36,-1.9l0.68,-1.23l-0.57,-1.17l-0.74,-0.43l0.12,-1.16l-0.9,-0.69l-1.1,0.09l-1.31,-1.48l0.53,-0.72l-0.04,-0.84l1.99,-0.86l0.05,-0.59l-0.71,-0.78l0.14,-0.57l1.66,-1.24l1.36,0.77l1.41,1.49l0.06,1.15l0.37,0.38l0.8,0.05l2.06,1.86Z",name:"Guyana"},GE:{path:"M521.71,168.93l5.29,0.89l4.07,2.01l1.41,-0.44l2.07,0.56l0.68,1.1l1.07,0.55l-0.12,0.59l0.98,1.29l-1.01,-0.13l-1.81,-0.83l-0.94,0.47l-3.23,0.43l-2.29,-1.39l-2.33,0.05l0.21,-0.97l-0.76,-2.26l-1.45,-1.12l-1.43,-0.39l-0.41,-0.42Z",name:"Georgia"},GB:{path:"M412.61,118.72l-2.19,3.22l-0.0,0.45l5.13,-0.3l-0.53,2.37l-2.2,3.12l0.29,0.63l2.37,0.21l2.33,4.3l1.76,0.69l2.2,5.12l2.94,0.77l-0.23,1.62l-1.15,0.88l-0.1,0.52l0.82,1.42l-1.86,1.43l-3.3,-0.02l-4.12,0.87l-1.04,-0.58l-0.47,0.06l-1.51,1.41l-2.12,-0.34l-1.86,1.18l-0.6,-0.29l3.19,-3.0l2.16,-0.69l0.28,-0.41l-0.34,-0.36l-3.73,-0.53l-0.4,-0.76l2.2,-0.87l0.17,-0.61l-1.26,-1.67l0.36,-1.7l3.38,0.28l0.43,-0.33l0.37,-1.99l-1.79,-2.49l-3.11,-0.72l-0.38,-0.59l0.79,-1.35l-0.04,-0.46l-0.82,-0.97l-0.61,0.01l-0.68,0.84l-0.1,-2.34l-1.23,-1.88l0.85,-3.47l1.77,-2.68l1.85,0.26l2.17,-0.22ZM406.26,132.86l-1.01,1.77l-1.57,-0.59l-1.16,0.01l0.37,-1.54l-0.39,-1.39l1.45,-0.1l2.3,1.84Z",name:"United Kingdom"},GA:{path:"M453.24,279.52l-0.08,0.98l0.7,1.29l2.36,0.24l-0.98,2.63l1.18,1.79l0.25,1.78l-0.29,1.52l-0.6,0.93l-1.84,-0.09l-1.23,-1.11l-0.66,0.23l-0.15,0.84l-1.42,0.26l-1.02,0.7l-0.11,0.52l0.77,1.35l-1.34,0.97l-3.94,-4.3l-1.44,-2.45l0.06,-0.6l0.54,-0.81l1.05,-3.46l4.17,-0.07l0.4,-0.4l-0.02,-2.66l2.39,0.21l1.25,-0.27Z",name:"Gabon"},GN:{path:"M391.8,254.11l0.47,0.8l1.11,-0.32l0.98,0.7l1.07,0.2l2.26,-1.22l0.64,0.44l1.13,1.56l-0.48,1.4l0.8,0.3l-0.08,0.48l0.46,0.68l-0.35,1.36l1.05,2.61l-1.0,0.69l0.03,1.41l-0.72,-0.06l-1.08,1.0l-0.24,-0.27l0.07,-1.11l-1.05,-1.54l-1.79,0.21l-0.35,-2.01l-1.6,-2.18l-2.0,-0.0l-1.31,0.54l-1.95,2.18l-1.86,-2.19l-1.2,-0.78l-0.3,-1.11l-0.8,-0.85l0.65,-0.72l0.81,-0.03l1.64,-0.8l0.23,-1.87l2.67,0.64l0.89,-0.3l1.21,0.15Z",name:"Guinea"},GM:{path:"M379.31,251.39l0.1,-0.35l2.43,-0.07l0.74,-0.61l0.51,-0.03l0.77,0.49l-1.03,-0.3l-1.87,0.9l-1.65,-0.04ZM384.03,250.91l0.91,0.05l0.75,-0.24l-0.59,0.31l-1.08,-0.13Z",name:"Gambia"},GL:{path:"M353.02,1.2l14.69,4.67l-3.68,1.89l-22.97,0.86l-0.36,0.27l0.12,0.43l1.55,1.18l8.79,-0.66l7.48,2.07l4.86,-1.77l1.66,1.73l-2.53,3.19l-0.01,0.48l0.46,0.15l6.35,-2.2l12.06,-2.31l7.24,1.13l1.09,1.99l-9.79,4.01l-1.44,1.32l-7.87,0.98l-0.35,0.41l0.38,0.38l5.07,0.24l-2.53,3.58l-2.07,3.81l0.08,6.05l2.57,3.11l-3.22,0.2l-4.12,1.66l-0.05,0.72l4.45,2.65l0.51,3.75l-2.3,0.4l-0.25,0.64l2.79,3.69l-4.82,0.31l-0.36,0.29l0.16,0.44l2.62,1.8l-0.59,1.22l-3.3,0.7l-3.45,0.01l-0.29,0.68l3.03,3.12l0.02,1.34l-4.4,-1.73l-1.72,1.35l0.15,0.66l3.31,1.15l3.13,2.71l0.81,3.16l-3.85,0.75l-4.89,-4.26l-0.47,-0.03l-0.17,0.44l0.79,2.86l-2.71,2.21l-0.13,0.44l0.37,0.27l8.73,0.34l-12.32,6.64l-7.24,1.48l-2.94,0.08l-2.69,1.75l-3.43,4.41l-5.24,2.84l-1.73,0.18l-7.12,2.1l-2.15,2.52l-0.13,2.99l-1.19,2.45l-4.01,3.09l-0.14,0.44l0.97,2.9l-2.28,6.48l-3.1,0.2l-3.83,-3.07l-4.86,-0.02l-2.25,-1.93l-1.7,-3.79l-4.3,-4.84l-1.21,-2.49l-0.44,-3.8l-3.32,-3.63l0.84,-2.86l-1.56,-1.7l2.28,-4.6l3.83,-1.74l1.03,-1.96l0.52,-3.47l-0.59,-0.41l-4.17,2.21l-2.07,0.58l-2.72,-1.28l-0.15,-2.71l0.85,-2.09l2.01,-0.06l5.06,1.2l0.46,-0.23l-0.14,-0.49l-6.54,-4.47l-2.67,0.55l-1.58,-0.86l2.56,-4.01l-0.03,-0.48l-1.5,-1.74l-4.98,-8.5l-3.13,-1.96l0.03,-1.88l-0.24,-0.37l-6.85,-3.02l-5.36,-0.38l-12.7,0.58l-2.78,-1.57l-3.66,-2.77l5.73,-1.45l5.0,-0.28l0.38,-0.38l-0.35,-0.41l-10.67,-1.38l-5.3,-2.06l0.25,-1.54l18.41,-5.26l1.22,-2.27l-0.25,-0.55l-6.14,-1.86l1.68,-1.77l8.55,-4.03l3.59,-0.63l0.3,-0.54l-0.88,-2.27l5.47,-1.47l7.65,-0.95l7.55,-0.05l3.04,1.85l6.48,-3.27l5.81,2.22l3.56,0.5l5.16,1.94l0.5,-0.21l-0.17,-0.52l-5.71,-3.13l0.28,-2.13l8.12,-3.6l8.7,0.28l3.35,-2.34l8.71,-0.6l19.93,0.8Z",name:"Greenland"},KW:{path:"M540.81,207.91l0.37,0.86l-0.17,0.76l0.6,1.53l-0.95,0.04l-0.82,-1.28l-1.57,-0.18l1.31,-1.88l1.22,0.17Z",name:"Kuwait"},GH:{path:"M420.53,257.51l-0.01,0.72l0.96,1.2l0.24,3.73l0.59,0.95l-0.51,2.1l0.19,1.41l1.02,2.21l-6.97,2.84l-1.8,-0.57l0.04,-0.89l-1.02,-2.04l0.61,-2.65l1.07,-2.32l-0.96,-6.47l5.01,0.07l0.94,-0.39l0.61,0.11Z",name:"Ghana"},OM:{path:"M568.09,230.93l-0.91,1.67l-1.22,0.04l-0.6,0.76l-0.41,1.51l0.27,1.58l-1.16,0.05l-1.56,0.97l-0.76,1.74l-1.62,0.05l-0.98,0.65l-0.17,1.15l-0.89,0.52l-1.49,-0.18l-2.4,0.94l-2.47,-5.4l7.35,-2.71l1.67,-5.23l-1.12,-2.09l0.05,-0.83l0.67,-1.0l0.07,-1.05l0.9,-0.42l-0.05,-2.07l0.7,-0.01l1.0,1.62l1.51,1.08l3.3,0.84l1.73,2.29l0.81,0.37l-1.23,2.35l-0.99,0.79Z",name:"Oman"},_2:{path:"M531.15,258.94l1.51,0.12l5.13,-0.95l5.3,-1.48l-0.01,4.4l-2.67,3.39l-1.85,0.01l-8.04,-2.94l-2.55,-3.17l1.12,-1.71l2.04,2.34Z",name:"Somaliland"},_1:{path:"M472.77,172.64l-1.08,-1.29l0.96,-0.77l0.29,-0.83l1.98,1.64l-0.36,0.67l-1.79,0.58Z",name:"Kosovo"},_0:{path:"M504.91,192.87l0.34,0.01l0.27,-0.07l-0.29,0.26l-0.31,-0.2Z",name:"N. Cyprus"},JO:{path:"M518.64,201.38l-5.14,1.56l-0.19,0.65l2.16,2.39l-0.89,1.14l-1.71,0.34l-1.71,1.8l-2.34,-0.37l1.21,-4.32l0.56,-4.07l2.8,0.94l4.46,-2.71l0.79,2.66Z",name:"Jordan"},HR:{path:"M455.59,162.84l1.09,0.07l-0.82,0.94l-0.27,-1.01ZM456.96,162.92l0.62,-0.41l1.73,0.45l0.42,-0.4l-0.01,-0.59l0.86,-0.52l0.2,-1.05l1.63,-0.68l2.57,1.68l2.07,0.6l0.87,-0.31l1.05,1.57l-0.52,0.63l-1.05,-0.56l-1.68,0.04l-2.1,-0.5l-1.29,0.06l-0.57,0.49l-0.59,-0.47l-0.62,0.16l-0.46,1.7l1.79,2.42l2.79,2.75l-1.18,-0.87l-2.21,-0.87l-1.67,-1.78l0.13,-0.63l-1.05,-1.19l-0.32,-1.27l-1.42,-0.43Z",name:"Croatia"},HT:{path:"M237.05,238.38l-1.16,0.43l-0.91,-0.55l0.05,-0.2l2.02,0.31ZM237.53,238.43l1.06,0.12l-0.05,0.01l-1.01,-0.12ZM239.25,238.45l0.79,-0.51l0.06,-0.62l-1.02,-1.0l0.02,-0.82l-0.3,-0.4l-0.93,-0.32l3.16,0.45l0.02,1.84l-0.48,0.34l-0.08,0.58l0.54,0.72l-1.78,-0.26Z",name:"Haiti"},HU:{path:"M462.08,157.89l0.65,-1.59l-0.09,-0.44l0.64,-0.0l0.39,-0.34l0.1,-0.69l1.75,0.87l2.32,-0.37l0.43,-0.66l3.49,-0.78l0.69,-0.78l0.57,-0.14l2.57,0.93l0.67,-0.23l1.03,0.65l0.08,0.37l-1.42,0.71l-2.59,4.14l-1.8,0.53l-1.68,-0.1l-2.74,1.23l-1.85,-0.54l-2.54,-1.66l-0.66,-1.1Z",name:"Hungary"},HN:{path:"M199.6,249.52l-1.7,-1.21l0.06,-0.94l3.04,-2.14l2.37,0.28l1.27,-0.09l1.1,-0.52l1.3,0.28l1.14,-0.25l1.38,0.37l2.23,1.37l-2.36,0.93l-1.23,-0.39l-0.88,1.3l-1.28,0.99l-0.98,-0.22l-0.42,0.52l-0.96,0.05l-0.36,0.41l0.04,0.88l-0.52,0.6l-0.3,0.04l-0.3,-0.55l-0.66,-0.31l0.11,-0.67l-0.48,-0.65l-0.87,-0.26l-0.73,0.2Z",name:"Honduras"},PR:{path:"M256.17,238.73l-0.26,0.27l-2.83,0.05l-0.07,-0.55l1.95,-0.1l1.22,0.33Z",name:"Puerto Rico"},PS:{path:"M509.21,203.07l0.1,-0.06l-0.02,0.03l-0.09,0.03ZM509.36,202.91l-0.02,-0.63l-0.33,-0.16l0.31,-1.09l0.24,0.1l-0.2,1.78Z",name:"Palestine"},PT:{path:"M401.84,187.38l-0.64,0.47l-1.13,-0.35l-0.91,0.17l0.28,-1.78l-0.24,-1.78l-1.25,-0.56l-0.45,-0.84l0.17,-1.66l1.01,-1.18l0.69,-2.92l-0.04,-1.39l-0.59,-1.9l1.3,-0.85l0.84,1.35l3.1,-0.3l0.46,0.99l-1.05,0.94l-0.03,2.16l-0.41,0.57l-0.08,1.1l-0.79,0.18l-0.26,0.59l0.91,1.6l-0.63,1.75l0.76,1.09l-1.1,1.52l0.07,1.05Z",name:"Portugal"},PY:{path:"M274.9,336.12l0.74,1.52l-0.16,3.45l0.32,0.41l2.64,0.5l1.11,-0.47l1.4,0.59l0.36,0.6l0.53,3.42l1.27,0.4l0.98,-0.38l0.51,0.27l-0.0,1.18l-1.21,5.32l-2.09,1.9l-1.8,0.4l-4.71,-0.98l2.2,-3.63l-0.32,-1.5l-2.78,-1.28l-3.03,-1.94l-2.07,-0.44l-4.34,-4.06l0.91,-2.9l0.08,-1.42l1.07,-2.04l4.13,-0.72l2.18,0.03l2.05,1.17l0.03,0.59Z",name:"Paraguay"},PA:{path:"M213.8,263.68l0.26,-1.52l-0.36,-0.26l-0.01,-0.49l0.44,-0.1l0.93,1.4l1.26,0.03l0.77,0.49l1.38,-0.23l2.51,-1.11l0.86,-0.72l3.45,0.85l1.4,1.18l0.41,1.74l-0.21,0.34l-0.53,-0.12l-0.47,0.29l-0.16,0.6l-0.68,-1.28l0.45,-0.49l-0.19,-0.66l-0.47,-0.13l-0.54,-0.84l-1.5,-0.75l-1.1,0.16l-0.75,0.99l-1.62,0.84l-0.18,0.96l0.85,0.97l-0.58,0.45l-0.69,0.08l-0.34,-1.18l-1.27,0.03l-0.71,-1.05l-2.59,-0.46Z",name:"Panama"},PG:{path:"M808.58,298.86l2.54,2.56l-0.13,0.26l-0.33,0.12l-0.87,-0.78l-1.22,-2.16ZM801.41,293.04l0.5,0.29l0.26,0.27l-0.49,-0.35l-0.27,-0.21ZM803.17,294.58l0.59,0.5l0.08,1.06l-0.29,-0.91l-0.38,-0.65ZM796.68,298.41l0.52,0.75l1.43,-0.19l2.27,-1.81l-0.01,-1.43l1.12,0.16l-0.04,1.1l-0.7,1.28l-1.12,0.18l-0.62,0.79l-2.46,1.11l-1.17,-0.0l-3.08,-1.25l3.41,0.0l0.45,-0.68ZM789.15,303.55l2.31,1.8l1.59,2.61l1.34,0.13l-0.06,0.66l0.31,0.43l1.06,0.24l0.06,0.65l2.25,1.05l-1.22,0.13l-0.72,-0.63l-4.56,-0.65l-3.22,-2.87l-1.49,-2.34l-3.27,-1.1l-2.38,0.72l-1.59,0.86l-0.2,0.42l0.27,1.55l-1.55,0.68l-1.36,-0.4l-2.21,-0.09l-0.08,-15.41l8.39,2.93l2.95,2.4l0.6,1.64l4.02,1.49l0.31,0.68l-1.76,0.21l-0.33,0.52l0.55,1.68Z",name:"Papua New Guinea"},PE:{path:"M244.96,295.21l-1.26,-0.07l-0.57,0.42l-1.93,0.45l-2.98,1.75l-0.36,1.36l-0.58,0.8l0.12,1.37l-1.24,0.59l-0.22,1.22l-0.62,0.84l1.04,2.27l1.28,1.44l-0.41,0.84l0.32,0.57l1.48,0.13l1.16,1.37l2.21,0.07l1.63,-1.08l-0.13,3.02l0.3,0.4l1.14,0.29l1.31,-0.34l1.9,3.59l-0.48,0.85l-0.17,3.85l-0.94,1.59l0.35,0.75l-0.47,1.07l0.98,1.97l-2.1,3.82l-0.98,0.5l-2.17,-1.28l-0.39,-1.16l-4.95,-2.58l-4.46,-2.79l-1.84,-1.51l-0.91,-1.84l0.3,-0.96l-2.11,-3.33l-4.82,-9.68l-1.04,-1.2l-0.87,-1.94l-3.4,-2.48l0.58,-1.18l-1.13,-2.23l0.66,-1.49l1.45,-1.15l-0.6,0.98l0.07,0.92l0.47,0.36l1.74,0.03l0.97,1.17l0.54,0.07l1.42,-1.03l0.6,-1.84l1.42,-2.02l3.04,-1.04l2.73,-2.62l0.86,-1.74l-0.1,-1.87l1.44,1.02l0.9,1.25l1.06,0.59l1.7,2.73l1.86,0.31l1.45,-0.61l0.96,0.39l1.36,-0.19l1.45,0.89l-1.4,2.21l0.31,0.61l0.59,0.05l0.47,0.5Z",name:"Peru"},PK:{path:"M615.09,192.34l-1.83,1.81l-2.6,0.39l-3.73,-0.68l-1.58,1.33l-0.09,0.42l1.77,4.39l1.7,1.23l-1.69,1.27l-0.12,2.14l-2.33,2.64l-1.6,2.8l-2.46,2.67l-3.03,-0.07l-2.76,2.83l0.05,0.6l1.5,1.11l0.26,1.9l1.44,1.5l0.37,1.68l-5.01,-0.01l-1.78,1.7l-1.42,-0.52l-0.76,-1.87l-2.27,-2.15l-11.61,0.86l0.71,-2.34l3.43,-1.32l0.25,-0.44l-0.21,-1.24l-1.2,-0.65l-0.28,-2.46l-2.29,-1.14l-1.28,-1.94l2.82,0.94l2.62,-0.38l1.42,0.33l0.76,-0.56l1.71,0.19l3.25,-1.14l0.27,-0.36l0.08,-2.19l1.18,-1.32l1.68,0.0l0.58,-0.82l1.6,-0.3l1.19,0.16l0.98,-0.78l0.02,-1.88l0.93,-1.47l1.48,-0.66l0.19,-0.55l-0.66,-1.25l2.04,-0.11l0.69,-1.01l-0.02,-1.16l1.11,-1.06l-0.17,-1.78l-0.49,-1.03l1.15,-0.98l5.42,-0.91l2.6,-0.82l1.6,1.16l0.97,2.34l3.45,0.97Z",name:"Pakistan"},PH:{path:"M737.01,263.84l0.39,2.97l-0.44,1.18l-0.55,-1.53l-0.67,-0.14l-1.17,1.28l0.65,2.09l-0.42,0.69l-2.48,-1.23l-0.57,-1.49l0.65,-1.03l-0.1,-0.54l-1.59,-1.19l-0.56,0.08l-0.65,0.87l-1.23,0.0l-1.58,0.97l0.83,-1.8l2.56,-1.42l0.65,0.84l0.45,0.13l1.9,-0.69l0.56,-1.11l1.5,-0.06l0.38,-0.43l-0.09,-1.19l1.21,0.71l0.36,2.02ZM733.59,256.58l0.05,0.75l0.08,0.26l-0.8,-0.42l-0.18,-0.71l0.85,0.12ZM734.08,256.1l-0.12,-1.12l-1.0,-1.27l1.36,0.03l0.53,0.73l0.51,2.04l-1.27,-0.4ZM733.76,257.68l0.38,0.98l-0.32,0.15l-0.07,-1.13ZM724.65,238.43l1.46,0.7l0.72,-0.31l-0.32,1.17l0.79,1.71l-0.57,1.84l-1.53,1.04l-0.39,2.25l0.56,2.04l1.63,0.57l1.16,-0.27l2.71,1.23l-0.19,1.08l0.76,0.84l-0.08,0.36l-1.4,-0.9l-0.88,-1.27l-0.66,0.0l-0.38,0.55l-1.6,-1.31l-2.15,0.36l-0.87,-0.39l0.07,-0.61l0.66,-0.55l-0.01,-0.62l-0.75,-0.59l-0.72,0.44l-0.74,-0.87l-0.39,-2.49l0.32,0.27l0.66,-0.28l0.26,-3.97l0.7,-2.02l1.14,0.0ZM731.03,258.87l-0.88,0.85l-1.19,1.94l-1.05,-1.19l0.93,-1.1l0.32,-1.47l0.52,-0.06l-0.27,1.15l0.22,0.45l0.49,-0.12l1.0,-1.32l-0.08,0.85ZM726.83,255.78l0.83,0.38l1.17,-0.0l-0.02,0.48l-2.0,1.4l0.03,-2.26ZM724.81,252.09l-0.38,1.27l-1.42,-1.95l1.2,0.05l0.6,0.63ZM716.55,261.82l1.1,-0.95l0.03,-0.03l-0.28,0.36l-0.85,0.61ZM719.22,259.06l0.04,-0.06l0.8,-1.53l0.16,0.75l-1.0,0.84Z",name:"Philippines"},PL:{path:"M468.44,149.42l-1.11,-1.54l-1.86,-0.33l-0.48,-1.05l-1.72,-0.37l-0.65,0.69l-0.72,-0.36l0.11,-0.61l-0.33,-0.46l-1.75,-0.27l-1.04,-0.93l-0.94,-1.94l0.16,-1.22l-0.62,-1.8l-0.78,-1.07l0.57,-1.04l-0.48,-1.43l1.41,-0.83l6.91,-2.71l2.14,0.5l0.52,0.91l5.51,0.44l4.55,-0.05l1.07,0.31l0.48,0.84l0.15,1.58l0.65,1.2l-0.01,0.99l-1.27,0.58l-0.19,0.54l0.73,1.48l0.08,1.55l1.2,2.76l-0.17,0.58l-1.23,0.44l-2.27,2.72l0.18,0.95l-1.97,-1.03l-1.98,0.4l-1.36,-0.28l-1.24,0.58l-1.07,-0.97l-1.16,0.24Z",name:"Poland"},ZM:{path:"M481.47,313.3l0.39,0.31l2.52,0.14l0.99,1.17l2.01,0.35l1.4,-0.64l0.69,1.17l1.78,0.33l1.84,2.35l2.23,0.18l0.4,-0.43l-0.21,-2.74l-0.62,-0.3l-0.48,0.32l-1.98,-1.17l0.72,-5.29l-0.51,-1.18l0.57,-1.3l3.68,-0.62l0.26,0.63l1.21,0.63l0.9,-0.22l2.16,0.67l1.33,0.71l1.07,1.02l0.56,1.87l-0.88,2.7l0.43,2.09l-0.73,0.87l-0.76,2.37l0.59,0.68l-6.6,1.83l-0.29,0.44l0.19,1.45l-1.68,0.35l-1.43,1.02l-0.38,0.87l-0.87,0.26l-3.48,3.69l-4.16,-0.53l-1.52,-1.0l-1.77,-0.13l-1.83,0.52l-3.04,-3.4l0.11,-7.59l4.82,0.03l0.39,-0.49l-0.18,-0.76l0.33,-0.83l-0.4,-1.36l0.24,-1.05Z",name:"Zambia"},EH:{path:"M384.42,230.28l0.25,-0.79l1.06,-1.29l0.8,-3.51l3.38,-2.78l0.7,-1.81l0.06,4.84l-1.98,0.2l-0.94,1.59l0.39,3.56l-3.7,-0.01ZM392.01,218.1l0.7,-1.8l1.77,-0.24l2.09,0.34l0.95,-0.62l1.28,-0.07l-0.0,2.51l-6.79,-0.12Z",name:"W. Sahara"},EE:{path:"M485.71,115.04l2.64,0.6l2.56,0.11l-1.6,1.91l0.61,3.54l-0.81,0.87l-1.78,-0.01l-3.22,-1.76l-1.8,0.45l0.21,-1.53l-0.58,-0.41l-0.69,0.34l-1.26,-1.03l-0.17,-1.63l2.83,-0.92l3.05,-0.52Z",name:"Estonia"},EG:{path:"M492.06,205.03l1.46,0.42l2.95,-1.64l2.04,-0.21l1.53,0.3l0.59,1.19l0.69,0.04l0.41,-0.64l1.81,0.58l1.95,0.16l1.04,-0.51l1.42,4.08l-2.03,4.54l-1.66,-1.77l-1.76,-3.85l-0.64,-0.12l-0.36,0.67l1.04,2.88l3.44,6.95l1.78,3.04l2.03,2.65l-0.36,0.53l0.23,2.01l2.7,2.19l-28.41,0.0l0.0,-18.96l-0.73,-2.2l0.59,-1.56l-0.32,-1.26l0.68,-0.99l3.06,-0.04l4.82,1.52Z",name:"Egypt"},ZA:{path:"M467.14,373.21l-0.13,-1.96l-0.68,-1.56l0.7,-0.68l-0.13,-2.33l-4.56,-8.19l0.77,-0.86l0.6,0.45l0.69,1.31l2.83,0.72l1.5,-0.26l2.24,-1.39l0.19,-9.55l1.35,2.3l-0.21,1.5l0.61,1.2l0.4,0.19l1.79,-0.27l2.6,-2.07l0.69,-1.32l0.96,-0.48l2.19,1.04l2.04,0.13l1.77,-0.65l0.85,-2.12l1.38,-0.33l1.59,-2.76l2.15,-1.89l3.41,-1.87l2.0,0.45l1.02,-0.28l0.99,0.2l1.75,5.29l-0.38,3.25l-0.81,-0.23l-1.0,0.46l-0.87,1.68l-0.05,1.16l1.97,1.84l1.47,-0.29l0.69,-1.18l1.09,0.01l-0.76,3.69l-0.58,1.09l-2.2,1.79l-3.17,4.76l-2.8,2.83l-3.57,2.88l-2.53,1.05l-1.22,0.14l-0.51,0.7l-1.18,-0.32l-1.39,0.5l-2.59,-0.52l-1.61,0.33l-1.18,-0.11l-2.55,1.1l-2.1,0.44l-1.6,1.07l-0.85,0.05l-0.93,-0.89l-0.93,-0.15l-0.97,-1.13l-0.25,0.05ZM491.45,364.19l0.62,-0.93l1.48,-0.59l1.18,-2.19l-0.07,-0.49l-1.99,-1.69l-1.66,0.56l-1.43,1.14l-1.34,1.73l0.02,0.51l1.88,2.11l1.31,-0.16Z",name:"South Africa"},EC:{path:"M231.86,285.53l0.29,1.59l-0.69,1.45l-2.61,2.51l-3.13,1.11l-1.53,2.18l-0.49,1.68l-1.0,0.73l-1.02,-1.11l-1.78,-0.16l0.67,-1.15l-0.24,-0.86l1.25,-2.13l-0.54,-1.09l-0.67,-0.08l-0.72,0.87l-0.87,-0.64l0.35,-0.69l-0.36,-1.96l0.81,-0.51l0.45,-1.51l0.92,-1.57l-0.07,-0.97l2.65,-1.33l2.75,1.35l0.77,1.05l2.12,0.35l0.76,-0.32l1.96,1.21Z",name:"Ecuador"},AL:{path:"M470.32,171.8l0.74,0.03l0.92,0.89l-0.17,1.95l0.36,1.28l1.01,0.82l-1.82,2.83l-0.19,-0.61l-1.25,-0.89l-0.18,-1.2l0.53,-2.82l-0.54,-1.47l0.6,-0.83Z",name:"Albania"},AO:{path:"M461.55,300.03l1.26,3.15l1.94,2.36l2.47,-0.53l1.25,0.32l0.44,-0.18l0.93,-1.92l1.31,-0.08l0.41,-0.44l0.47,-0.0l-0.1,0.41l0.39,0.49l2.65,-0.02l0.03,1.19l0.48,1.01l-0.34,1.52l0.18,1.55l0.83,1.04l-0.13,2.85l0.54,0.39l3.96,-0.41l-0.1,1.79l0.39,1.05l-0.24,1.43l-4.7,-0.03l-0.4,0.39l-0.12,8.13l2.92,3.49l-3.83,0.88l-5.89,-0.36l-1.88,-1.24l-10.47,0.22l-1.3,-1.01l-1.85,-0.16l-2.4,0.77l-0.15,-1.06l0.33,-2.16l1.0,-3.45l1.35,-3.2l2.24,-2.8l0.33,-2.06l-0.13,-1.53l-0.8,-1.08l-1.21,-2.87l0.87,-1.62l-1.27,-4.12l-1.17,-1.53l2.47,-0.63l7.03,0.03ZM451.71,298.87l-0.47,-1.25l1.25,-1.11l0.32,0.3l-0.99,1.03l-0.12,1.03Z",name:"Angola"},KZ:{path:"M552.8,172.89l0.46,-1.27l-0.48,-1.05l-2.96,-1.19l-1.06,-2.58l-1.37,-0.87l-0.03,-0.3l1.95,0.23l0.45,-0.38l0.08,-1.96l1.75,-0.41l2.1,0.45l0.48,-0.33l0.45,-3.04l-0.45,-2.09l-0.41,-0.31l-2.42,0.15l-2.36,-0.73l-2.87,1.37l-2.17,0.61l-0.85,-0.34l0.13,-1.61l-1.6,-2.12l-2.02,-0.08l-1.78,-1.82l1.29,-2.18l-0.57,-0.95l1.62,-2.91l2.21,1.63l0.63,-0.27l0.29,-2.22l4.92,-3.43l3.71,-0.08l8.4,3.6l2.92,-1.36l3.77,-0.06l3.11,1.66l0.51,-0.11l0.6,-0.81l3.31,0.13l0.39,-0.25l0.63,-1.57l-0.17,-0.5l-3.5,-1.98l1.87,-1.27l-0.13,-1.03l1.98,-0.72l0.18,-0.62l-1.59,-2.06l0.81,-0.82l9.23,-1.18l1.33,-0.88l6.18,-1.26l2.26,-1.42l4.08,0.68l0.73,3.33l0.51,0.3l2.48,-0.8l2.79,1.02l-0.17,1.56l0.43,0.44l2.55,-0.24l4.89,-2.53l0.03,0.32l3.15,2.61l5.56,8.47l0.65,0.02l1.12,-1.46l3.15,1.74l3.76,-0.78l1.15,0.49l1.14,1.8l1.84,0.76l0.99,1.29l3.35,-0.25l1.02,1.52l-1.6,1.81l-1.93,0.28l-0.34,0.38l-0.11,3.05l-1.13,1.16l-4.75,-1.0l-0.46,0.27l-1.76,5.47l-1.1,0.59l-4.91,1.23l-0.27,0.54l2.1,4.97l-1.37,0.63l-0.23,0.41l0.13,1.13l-0.88,-0.25l-1.42,-1.13l-7.89,-0.4l-0.92,0.31l-3.73,-1.22l-1.42,0.63l-0.53,1.66l-3.72,-0.94l-1.85,0.43l-0.76,1.4l-4.65,2.62l-1.13,2.08l-0.44,0.01l-0.92,-1.4l-2.87,-0.09l-0.45,-2.14l-0.38,-0.32l-0.8,-0.01l0.0,-2.96l-3.0,-2.22l-7.31,0.58l-2.35,-2.68l-6.71,-3.69l-6.45,1.83l-0.29,0.39l0.1,10.85l-0.7,0.08l-1.62,-2.17l-1.83,-0.96l-3.11,0.59l-0.64,0.51Z",name:"Kazakhstan"},ET:{path:"M516.04,247.79l1.1,0.84l1.63,-0.45l0.68,0.47l1.63,0.03l2.01,0.94l1.73,1.66l1.64,2.07l-1.52,2.04l0.16,1.72l0.39,0.38l2.05,0.0l-0.36,1.03l2.86,3.58l8.32,3.08l1.31,0.02l-6.32,6.75l-3.1,0.11l-2.36,1.77l-1.47,0.04l-0.86,0.79l-1.38,-0.0l-1.32,-0.81l-2.29,1.05l-0.76,0.98l-3.29,-0.41l-3.07,-2.07l-1.8,-0.07l-0.62,-0.6l0.0,-1.24l-0.28,-0.38l-1.15,-0.37l-1.4,-2.59l-1.19,-0.68l-0.47,-1.0l-1.27,-1.23l-1.16,-0.22l0.43,-0.72l1.45,-0.28l0.41,-0.95l-0.03,-2.21l0.68,-2.44l1.05,-0.63l1.43,-3.06l1.57,-1.37l1.02,-2.51l0.35,-1.88l2.52,0.46l0.44,-0.24l0.58,-1.43Z",name:"Ethiopia"},ZW:{path:"M498.91,341.09l-1.11,-0.22l-0.92,0.28l-2.09,-0.44l-1.5,-1.11l-1.89,-0.43l-0.62,-1.4l-0.01,-0.84l-0.3,-0.38l-0.97,-0.25l-2.71,-2.74l-1.92,-3.32l3.83,0.45l3.73,-3.82l1.08,-0.44l0.26,-0.77l1.25,-0.9l1.41,-0.26l0.5,0.89l1.99,-0.05l1.72,1.17l1.11,0.17l1.05,0.66l0.01,2.99l-0.59,3.76l0.38,0.86l-0.23,1.23l-0.39,0.35l-0.63,1.81l-2.43,2.75Z",name:"Zimbabwe"},ES:{path:"M416.0,169.21l1.07,1.17l4.61,1.38l1.06,-0.57l2.6,1.26l2.71,-0.3l0.09,1.12l-2.14,1.8l-3.11,0.61l-0.31,0.31l-0.2,0.89l-1.54,1.69l-0.97,2.4l0.84,1.74l-1.32,1.27l-0.48,1.68l-1.88,0.65l-1.66,2.07l-5.36,-0.01l-1.79,1.08l-0.89,0.98l-0.88,-0.17l-0.79,-0.82l-0.68,-1.59l-2.37,-0.63l-0.11,-0.5l1.21,-1.82l-0.77,-1.13l0.61,-1.68l-0.76,-1.62l0.87,-0.49l0.09,-1.25l0.42,-0.6l0.03,-2.11l0.99,-0.69l0.13,-0.5l-1.03,-1.73l-1.46,-0.11l-0.61,0.38l-1.06,0.0l-0.52,-1.23l-0.53,-0.21l-1.32,0.67l-0.01,-1.49l-0.75,-0.96l3.03,-1.88l2.99,0.53l3.32,-0.02l2.63,0.51l6.01,-0.06Z",name:"Spain"},ER:{path:"M520.38,246.23l3.42,2.43l3.5,3.77l0.84,0.54l-0.95,-0.01l-3.51,-3.89l-2.33,-1.15l-1.73,-0.07l-0.91,-0.51l-1.26,0.51l-1.34,-1.02l-0.61,0.17l-0.66,1.61l-2.35,-0.43l-0.17,-0.67l1.29,-5.29l0.61,-0.61l1.95,-0.53l0.87,-1.01l1.17,2.41l0.68,2.33l1.49,1.43Z",name:"Eritrea"},ME:{path:"M468.91,172.53l-1.22,-1.02l0.47,-1.81l0.89,-0.72l2.26,1.51l-0.5,0.57l-0.75,-0.27l-1.14,1.73Z",name:"Montenegro"},MD:{path:"M488.41,153.73l1.4,-0.27l1.72,0.93l1.07,0.15l0.85,0.65l-0.14,0.84l0.96,0.85l1.12,2.47l-1.15,-0.07l-0.66,-0.41l-0.52,0.25l-0.09,0.86l-1.08,1.89l-0.27,-0.86l0.25,-1.34l-0.16,-1.6l-3.29,-4.34Z",name:"Moldova"},MG:{path:"M545.91,319.14l0.4,3.03l0.62,1.21l-0.21,1.02l-0.57,-0.8l-0.69,-0.01l-0.47,0.76l0.41,2.12l-0.18,0.87l-0.73,0.78l-0.15,2.14l-4.71,15.2l-1.06,2.88l-3.92,1.64l-3.12,-1.49l-0.6,-1.21l-0.19,-2.4l-0.86,-2.05l-0.21,-1.77l0.38,-1.62l1.21,-0.75l0.01,-0.76l1.19,-2.04l0.23,-1.66l-1.06,-2.99l-0.19,-2.21l0.81,-1.33l0.32,-1.46l4.63,-1.22l3.44,-3.0l0.85,-1.4l-0.08,-0.7l0.78,-0.04l1.38,-1.77l0.13,-1.64l0.45,-0.61l1.16,1.69l0.59,1.6Z",name:"Madagascar"},MA:{path:"M378.78,230.02l0.06,-0.59l0.92,-0.73l0.82,-1.37l-0.09,-1.04l0.79,-1.7l1.31,-1.58l0.96,-0.59l0.66,-1.55l0.09,-1.47l0.81,-1.48l1.72,-1.07l1.55,-2.69l1.16,-0.96l2.44,-0.39l1.94,-1.82l1.31,-0.78l2.09,-2.28l-0.51,-3.65l1.24,-3.7l1.5,-1.75l4.46,-2.57l2.37,-4.47l1.44,0.01l1.68,1.21l2.32,-0.19l3.47,0.65l0.8,1.54l0.16,1.71l0.86,2.96l0.56,0.59l-0.26,0.61l-3.05,0.44l-1.26,1.05l-1.33,0.22l-0.33,0.37l-0.09,1.78l-2.68,1.0l-1.07,1.42l-4.47,1.13l-4.04,2.01l-0.54,4.64l-1.15,0.06l-0.92,0.61l-1.96,-0.35l-2.42,0.54l-0.74,1.9l-0.86,0.4l-1.14,3.26l-3.53,3.01l-0.8,3.55l-0.96,1.1l-0.29,0.82l-4.95,0.18Z",name:"Morocco"},UZ:{path:"M598.64,172.75l-1.63,1.52l0.06,0.64l1.85,1.12l1.97,-0.64l2.21,1.17l-2.52,1.68l-2.59,-0.22l-0.18,-0.41l0.46,-1.23l-0.45,-0.53l-3.35,0.69l-2.1,3.51l-1.87,-0.12l-1.03,1.51l0.22,0.55l1.64,0.62l0.46,1.83l-1.19,2.49l-2.66,-0.53l0.05,-1.36l-0.26,-0.39l-3.3,-1.23l-2.56,-1.4l-4.4,-3.34l-1.34,-3.14l-1.08,-0.6l-2.58,0.13l-0.69,-0.44l-0.47,-2.52l-3.37,-1.6l-0.43,0.05l-2.07,1.72l-2.1,1.01l-0.21,0.47l0.28,1.01l-1.91,0.03l-0.09,-10.5l5.99,-1.7l6.19,3.54l2.71,2.84l7.05,-0.67l2.71,2.01l-0.17,2.81l0.39,0.42l0.9,0.02l0.44,2.14l0.38,0.32l2.94,0.09l0.95,1.42l1.28,-0.24l1.05,-2.04l4.43,-2.5Z",name:"Uzbekistan"},MM:{path:"M673.9,230.21l-1.97,1.57l-0.57,0.96l-1.4,0.6l-1.36,1.05l-1.99,0.36l-1.08,2.66l-0.91,0.4l-0.19,0.55l1.21,2.27l2.52,3.43l-0.79,1.91l-0.74,0.41l-0.17,0.52l0.65,1.37l1.61,1.95l0.25,2.58l0.9,2.13l-1.92,3.57l0.68,-2.25l-0.81,-1.74l0.19,-2.65l-1.05,-1.53l-1.24,-6.17l-1.12,-2.26l-0.6,-0.13l-4.34,3.02l-2.39,-0.65l0.77,-2.84l-0.52,-2.61l-1.91,-2.96l0.25,-0.75l-0.29,-0.51l-1.33,-0.3l-1.61,-1.93l-0.1,-1.3l0.82,-0.24l0.04,-1.64l1.02,-0.52l0.21,-0.45l-0.23,-0.95l0.54,-0.96l0.08,-2.22l1.46,0.45l0.47,-0.2l1.12,-2.19l0.16,-1.35l1.33,-2.16l-0.0,-1.52l2.89,-1.66l1.63,0.44l0.5,-0.44l-0.17,-1.4l0.64,-0.36l0.08,-1.04l0.77,-0.11l0.71,1.35l1.06,0.69l-0.03,3.86l-2.38,2.37l-0.3,3.15l0.46,0.43l2.28,-0.38l0.51,2.08l1.47,0.67l-0.6,1.8l0.19,0.48l2.97,1.48l1.64,-0.55l0.02,0.32Z",name:"Myanmar"},ML:{path:"M392.61,254.08l-0.19,-2.37l-0.99,-0.87l-0.44,-1.3l-0.09,-1.28l0.81,-0.58l0.35,-1.24l2.37,0.65l1.31,-0.47l0.86,0.15l0.66,-0.56l9.83,-0.04l0.38,-0.28l0.56,-1.8l-0.44,-0.65l-2.35,-21.95l3.27,-0.04l16.7,11.38l0.74,1.31l2.5,1.09l0.02,1.38l0.44,0.39l2.34,-0.21l0.01,5.38l-1.28,1.61l-0.26,1.49l-5.31,0.57l-1.07,0.92l-2.9,0.1l-0.86,-0.48l-1.38,0.36l-2.4,1.08l-0.6,0.87l-1.85,1.09l-0.43,0.7l-0.79,0.39l-1.44,-0.21l-0.81,0.84l-0.34,1.64l-1.91,2.02l-0.06,1.03l-0.67,1.22l0.13,1.16l-0.97,0.39l-0.23,-0.64l-0.52,-0.24l-1.35,0.4l-0.34,0.55l-2.69,-0.28l-0.37,-0.35l-0.02,-0.9l-0.65,-0.35l0.45,-0.64l-0.03,-0.53l-2.12,-2.44l-0.76,-0.01l-2.0,1.16l-0.78,-0.15l-0.8,-0.67l-1.21,0.23Z",name:"Mali"},MN:{path:"M676.61,146.48l3.81,1.68l5.67,-1.0l2.37,0.41l2.34,1.5l1.79,1.75l2.29,-0.03l3.12,0.52l2.47,-0.81l3.41,-0.59l3.53,-2.21l1.25,0.29l1.53,1.13l2.27,-0.21l-2.66,5.01l0.64,1.68l0.47,0.21l1.32,-0.38l2.38,0.48l2.02,-1.11l1.76,0.89l2.06,2.02l-0.13,0.53l-1.72,-0.29l-3.77,0.46l-1.88,0.99l-1.76,1.99l-3.71,1.17l-2.45,1.6l-3.83,-0.87l-0.41,0.17l-1.31,1.99l1.04,2.24l-1.52,0.9l-1.74,1.57l-2.79,1.02l-3.78,0.13l-4.05,1.05l-2.77,1.52l-1.16,-0.85l-2.94,0.0l-3.62,-1.79l-2.58,-0.49l-3.4,0.41l-5.12,-0.67l-2.63,0.06l-1.31,-1.6l-1.4,-3.0l-1.48,-0.33l-3.13,-1.94l-6.16,-0.93l-0.71,-1.06l0.86,-3.82l-1.93,-2.71l-3.5,-1.18l-1.95,-1.58l-0.5,-1.72l2.34,-0.52l4.75,-2.8l3.62,-1.47l2.18,0.97l2.46,0.05l1.81,1.53l2.46,0.12l3.95,0.71l2.43,-2.28l0.08,-0.48l-0.9,-1.72l2.24,-2.98l2.62,1.27l4.94,1.17l0.43,2.24Z",name:"Mongolia"},MK:{path:"M472.8,173.98l0.49,-0.71l3.57,-0.71l1.0,0.77l0.13,1.45l-0.65,0.53l-1.15,-0.05l-1.12,0.67l-1.39,0.22l-0.79,-0.55l-0.29,-1.03l0.19,-0.6Z",name:"Macedonia"},MW:{path:"M505.5,309.31l0.85,1.95l0.15,2.86l-0.69,1.65l0.71,1.8l0.06,1.28l0.49,0.64l0.07,1.06l0.4,0.55l0.8,-0.23l0.55,0.61l0.69,-0.21l0.34,0.6l0.19,2.94l-1.04,0.62l-0.54,1.25l-1.11,-1.08l-0.16,-1.56l0.51,-1.31l-0.32,-1.3l-0.99,-0.65l-0.82,0.12l-2.36,-1.64l0.63,-1.96l0.82,-1.18l-0.46,-2.01l0.9,-2.86l-0.94,-2.51l0.96,0.18l0.29,0.4Z",name:"Malawi"},MR:{path:"M407.36,220.66l-2.58,0.03l-0.39,0.44l2.42,22.56l0.36,0.43l-0.39,1.24l-9.75,0.04l-0.56,0.53l-0.91,-0.11l-1.27,0.45l-1.61,-0.66l-0.97,0.03l-0.36,0.29l-0.38,1.35l-0.42,0.23l-2.93,-3.4l-2.96,-1.52l-1.62,-0.03l-1.27,0.54l-1.12,-0.2l-0.65,0.4l-0.08,-0.49l0.68,-1.29l0.31,-2.43l-0.57,-3.91l0.23,-1.21l-0.69,-1.5l-1.15,-1.02l0.25,-0.39l9.58,0.02l0.4,-0.45l-0.46,-3.68l0.47,-1.04l2.12,-0.21l0.36,-0.4l-0.08,-6.4l7.81,0.13l0.41,-0.4l0.01,-3.31l7.76,5.35Z",name:"Mauritania"},UG:{path:"M498.55,276.32l0.7,-0.46l1.65,0.5l1.96,-0.57l1.7,0.01l1.45,-0.98l0.91,1.33l1.33,3.95l-2.57,4.03l-1.46,-0.4l-2.54,0.91l-1.37,1.61l-0.01,0.81l-2.42,-0.01l-2.26,1.01l-0.17,-1.59l0.58,-1.04l0.14,-1.94l1.37,-2.28l1.78,-1.58l-0.17,-0.65l-0.72,-0.24l0.13,-2.43Z",name:"Uganda"},MY:{path:"M717.47,273.46l-1.39,0.65l-2.12,-0.41l-2.88,-0.0l-0.38,0.28l-0.84,2.75l-0.99,0.96l-1.21,3.29l-1.73,0.45l-2.45,-0.68l-1.39,0.31l-1.33,1.15l-1.59,-0.14l-1.41,0.44l-1.44,-1.19l-0.18,-0.73l1.34,0.53l1.93,-0.47l0.75,-2.22l4.02,-1.03l2.75,-3.21l0.82,0.94l0.64,-0.05l0.4,-0.65l0.96,0.06l0.42,-0.36l0.24,-2.68l1.81,-1.64l1.21,-1.86l0.63,-0.01l1.07,1.05l0.34,1.28l3.44,1.35l-0.06,0.35l-1.37,0.1l-0.35,0.54l0.32,0.88ZM673.68,269.59l0.17,1.09l0.47,0.33l1.65,-0.3l0.87,-0.94l1.61,1.52l0.98,1.56l-0.12,2.81l0.41,2.29l0.95,0.9l0.88,2.44l-1.27,0.12l-5.1,-3.67l-0.34,-1.29l-1.37,-1.59l-0.33,-1.97l-0.88,-1.4l0.25,-1.68l-0.46,-1.05l1.63,0.84Z",name:"Malaysia"},MX:{path:"M133.12,200.41l0.2,0.47l9.63,3.33l6.96,-0.02l0.4,-0.4l0.0,-0.74l3.77,0.0l3.55,2.93l1.39,2.83l1.52,1.04l2.08,0.82l0.47,-0.14l1.46,-2.0l1.73,-0.04l1.59,0.98l2.05,3.35l1.47,1.56l1.26,3.14l2.18,1.02l2.26,0.58l-1.18,3.72l-0.42,5.04l1.79,4.89l1.62,1.89l0.61,1.52l1.2,1.42l2.55,0.66l1.37,1.1l7.54,-1.89l1.86,-1.3l1.14,-4.3l4.1,-1.21l3.57,-0.11l0.32,0.3l-0.06,0.94l-1.26,1.45l-0.67,1.71l0.38,0.7l-0.72,2.27l-0.49,-0.3l-1.0,0.08l-1.0,1.39l-0.47,-0.11l-0.53,0.47l-4.26,-0.02l-0.4,0.4l-0.0,1.06l-1.1,0.26l0.1,0.44l1.82,1.44l0.56,0.91l-3.19,0.21l-1.21,2.09l0.24,0.72l-0.2,0.44l-2.24,-2.18l-1.45,-0.93l-2.22,-0.69l-1.52,0.22l-3.07,1.16l-10.55,-3.85l-2.86,-1.96l-3.78,-0.92l-1.08,-1.19l-2.62,-1.43l-1.18,-1.54l-0.38,-0.81l0.66,-0.63l-0.18,-0.53l0.52,-0.76l0.01,-0.91l-2.0,-3.82l-2.21,-2.63l-2.53,-2.09l-1.19,-1.62l-2.2,-1.17l-0.3,-0.43l0.34,-1.48l-0.21,-0.45l-1.23,-0.6l-1.36,-1.2l-0.59,-1.78l-1.54,-0.47l-2.44,-2.55l-0.16,-0.9l-1.33,-2.03l-0.84,-1.99l-0.16,-1.33l-1.81,-1.1l-0.97,0.05l-1.31,-0.7l-0.57,0.22l-0.4,1.12l0.72,3.77l3.51,3.89l0.28,0.78l0.53,0.26l0.41,1.43l1.33,1.73l1.58,1.41l0.8,2.39l1.43,2.41l0.13,1.32l0.37,0.36l1.04,0.08l1.67,2.28l-0.85,0.76l-0.66,-1.51l-1.68,-1.54l-2.91,-1.87l0.06,-1.82l-0.54,-1.68l-2.91,-2.03l-0.55,0.09l-1.95,-1.1l-0.88,-0.94l0.68,-0.08l0.93,-1.01l0.08,-1.78l-1.93,-1.94l-1.46,-0.77l-3.75,-7.56l4.88,-0.42Z",name:"Mexico"},VU:{path:"M839.04,322.8l0.22,1.14l-0.44,0.03l-0.2,-1.45l0.42,0.27Z",name:"Vanuatu"},FR:{path:"M444.48,172.62l-0.64,1.78l-0.58,-0.31l-0.49,-1.72l0.4,-0.89l1.0,-0.72l0.3,1.85ZM429.64,147.1l1.78,1.58l1.46,-0.13l2.1,1.42l1.35,0.27l1.23,0.83l3.04,0.5l-1.03,1.85l-0.3,2.12l-0.41,0.32l-0.95,-0.24l-0.5,0.43l0.06,0.61l-1.81,1.92l-0.04,1.42l0.55,0.38l0.88,-0.36l0.61,0.97l-0.03,1.0l0.57,0.91l-0.75,1.09l0.65,2.39l1.27,0.57l-0.18,0.82l-2.01,1.53l-4.77,-0.8l-3.82,1.0l-0.53,1.85l-2.49,0.34l-2.71,-1.31l-1.16,0.57l-4.31,-1.29l-0.72,-0.86l1.19,-1.78l0.39,-6.45l-2.58,-3.3l-1.9,-1.66l-3.72,-1.23l-0.19,-1.72l2.81,-0.61l4.12,0.81l0.47,-0.48l-0.6,-2.77l1.94,0.95l5.83,-2.54l0.92,-2.74l1.6,-0.49l0.24,0.78l1.36,0.33l1.05,1.19ZM289.01,278.39l-0.81,0.8l-0.78,0.12l-0.5,-0.66l-0.56,-0.1l-0.91,0.6l-0.46,-0.22l1.09,-2.96l-0.96,-1.77l-0.17,-1.49l1.07,-1.77l2.32,0.75l2.51,2.01l0.3,0.74l-2.14,3.96Z",name:"France"},FI:{path:"M492.17,76.39l-0.23,3.5l3.52,2.63l-2.08,2.88l-0.02,0.44l2.8,4.56l-1.59,3.31l2.16,3.24l-0.94,2.39l0.14,0.47l3.44,2.51l-0.77,1.62l-7.52,6.95l-4.5,0.31l-4.38,1.37l-3.8,0.74l-1.44,-1.96l-2.17,-1.11l0.5,-3.66l-1.16,-3.33l1.09,-2.08l2.21,-2.42l5.67,-4.32l1.64,-0.83l0.21,-0.42l-0.46,-2.02l-3.38,-1.89l-0.75,-1.43l-0.22,-6.74l-6.79,-4.8l0.8,-0.62l2.54,2.12l3.46,-0.12l3.0,0.96l2.51,-2.11l1.17,-3.08l3.55,-1.38l2.76,1.53l-0.95,2.79Z",name:"Finland"},FJ:{path:"M871.53,326.34l-2.8,1.05l-0.08,-0.23l2.97,-1.21l-0.1,0.39ZM867.58,329.25l0.43,0.37l-0.27,0.88l-1.24,0.28l-1.04,-0.24l-0.14,-0.66l0.63,-0.58l0.92,0.26l0.7,-0.31Z",name:"Fiji"},FK:{path:"M274.36,425.85l1.44,1.08l-0.47,0.73l-3.0,0.89l-0.96,-1.0l-0.52,-0.05l-1.83,1.29l-0.73,-0.88l2.46,-1.64l1.93,0.76l1.67,-1.19Z",name:"Falkland Is."},NI:{path:"M202.33,252.67l0.81,-0.18l1.03,-1.02l-0.04,-0.88l0.68,-0.0l0.63,-0.54l0.97,0.22l1.53,-1.26l0.58,-0.99l1.17,0.34l2.41,-0.94l0.13,1.32l-0.81,1.94l0.1,2.74l-0.36,0.37l-0.11,1.75l-0.47,0.81l0.18,1.14l-1.73,-0.85l-0.71,0.27l-1.47,-0.6l-0.52,0.16l-4.01,-3.81Z",name:"Nicaragua"},NL:{path:"M430.31,143.39l0.6,-0.5l2.13,-4.8l3.2,-1.33l1.74,0.08l0.33,0.8l-0.59,2.92l-0.5,0.99l-1.26,0.0l-0.4,0.45l0.33,2.7l-2.2,-1.78l-2.62,0.58l-0.75,-0.11Z",name:"Netherlands"},NO:{path:"M491.44,67.41l6.8,2.89l-2.29,0.86l-0.15,0.65l2.33,2.38l-4.98,1.79l0.84,-2.45l-0.18,-0.48l-3.55,-1.8l-3.89,1.52l-1.42,3.38l-2.12,1.72l-2.64,-1.0l-3.11,0.21l-2.66,-2.22l-0.5,-0.01l-1.41,1.1l-1.44,0.17l-0.35,0.35l-0.32,2.47l-4.32,-0.64l-0.44,0.29l-0.58,2.11l-2.45,0.2l-4.15,7.68l-3.88,5.76l0.78,1.62l-0.64,1.16l-2.24,-0.06l-0.38,0.24l-1.66,3.89l0.15,5.17l1.57,2.04l-0.78,4.16l-2.02,2.48l-0.85,1.63l-1.3,-1.75l-0.58,-0.07l-4.87,4.19l-3.1,0.79l-3.16,-1.7l-0.85,-3.77l-0.77,-8.55l2.14,-2.31l6.55,-3.27l5.02,-4.17l10.63,-13.84l10.98,-8.7l5.35,-1.91l4.34,0.12l3.69,-3.64l4.49,0.19l4.37,-0.89ZM484.55,20.04l4.26,1.75l-3.1,2.55l-7.1,0.65l-7.08,-0.9l-0.37,-1.31l-0.37,-0.29l-3.44,-0.1l-2.08,-2.0l6.87,-1.44l3.9,1.31l2.39,-1.64l6.13,1.4ZM481.69,33.93l-4.45,1.74l-3.54,-0.99l1.12,-0.9l0.05,-0.58l-1.06,-1.22l4.22,-0.89l1.09,1.97l2.57,0.87ZM466.44,24.04l7.43,3.77l-5.41,1.86l-1.58,4.08l-2.26,1.2l-1.12,4.11l-2.61,0.18l-4.79,-2.86l1.84,-1.54l-0.1,-0.68l-3.69,-1.53l-4.77,-4.51l-1.73,-3.89l6.11,-1.82l1.54,1.92l3.57,-0.08l1.2,-1.96l3.32,-0.18l3.05,1.92Z",name:"Norway"},NA:{path:"M474.26,330.66l-0.97,0.04l-0.38,0.4l-0.07,8.9l-2.09,0.08l-0.39,0.4l-0.0,17.42l-1.98,1.23l-1.17,0.17l-2.44,-0.66l-0.48,-1.13l-0.99,-0.74l-0.54,0.05l-0.9,1.01l-1.53,-1.68l-0.93,-1.88l-1.99,-8.56l-0.06,-3.12l-0.33,-1.52l-2.3,-3.34l-1.91,-4.83l-1.96,-2.43l-0.12,-1.57l2.33,-0.79l1.43,0.07l1.81,1.13l10.23,-0.25l1.84,1.23l5.87,0.35ZM474.66,330.64l6.51,-1.6l1.9,0.39l-1.69,0.4l-1.31,0.83l-1.12,-0.94l-4.29,0.92Z",name:"Namibia"},NC:{path:"M838.78,341.24l-0.33,0.22l-2.9,-1.75l-3.26,-3.37l1.65,0.83l4.85,4.07Z",name:"New Caledonia"},NE:{path:"M454.75,226.53l1.33,1.37l0.48,0.07l1.27,-0.7l0.53,3.52l0.94,0.83l0.17,0.92l0.81,0.69l-0.44,0.95l-0.96,5.26l-0.13,3.22l-3.04,2.31l-1.22,3.57l1.02,1.24l-0.0,1.46l0.39,0.4l1.13,0.04l-0.9,1.25l-1.47,-2.42l-0.86,-0.29l-2.09,1.37l-1.74,-0.67l-1.45,-0.17l-0.85,0.35l-1.36,-0.07l-1.64,1.09l-1.06,0.05l-2.94,-1.28l-1.44,0.59l-1.01,-0.03l-0.97,-0.94l-2.7,-0.98l-2.69,0.3l-0.87,0.64l-0.47,1.6l-0.75,1.16l-0.12,1.53l-1.57,-1.1l-1.31,0.24l0.03,-0.81l-0.32,-0.41l-2.59,-0.52l-0.15,-1.16l-1.35,-1.6l-0.29,-1.0l0.13,-0.84l1.29,-0.08l1.08,-0.92l3.31,-0.22l2.22,-0.41l0.32,-0.34l0.2,-1.47l1.39,-1.88l-0.01,-5.66l3.36,-1.12l7.24,-5.12l8.42,-4.92l3.69,1.06Z",name:"Niger"},NG:{path:"M456.32,253.89l0.64,0.65l-0.28,1.04l-2.11,2.01l-2.03,5.18l-1.37,1.16l-1.15,3.18l-1.33,0.66l-1.46,-0.97l-1.21,0.16l-1.38,1.36l-0.91,0.24l-1.79,4.06l-2.33,0.81l-1.11,-0.07l-0.86,0.5l-1.71,-0.05l-1.19,-1.39l-0.89,-1.89l-1.77,-1.66l-3.95,-0.08l0.07,-5.21l0.42,-1.43l1.95,-2.3l-0.14,-0.91l0.43,-1.18l-0.53,-1.41l0.25,-2.92l0.72,-1.07l0.32,-1.34l0.46,-0.39l2.47,-0.28l2.34,0.89l1.15,1.02l1.28,0.04l1.22,-0.58l3.03,1.27l1.49,-0.14l1.36,-1.0l1.33,0.07l0.82,-0.35l3.45,0.8l1.82,-1.32l1.84,2.67l0.66,0.16Z",name:"Nigeria"},NZ:{path:"M857.8,379.65l1.86,3.12l0.44,0.18l0.3,-0.38l0.03,-1.23l0.38,0.27l0.57,2.31l2.02,0.94l1.81,0.27l1.57,-1.06l0.7,0.18l-1.15,3.59l-1.98,0.11l-0.74,1.2l0.2,1.11l-2.42,3.98l-1.49,0.92l-1.04,-0.85l1.21,-2.05l-0.81,-2.01l-2.63,-1.25l0.04,-0.57l1.82,-1.19l0.43,-2.34l-0.16,-2.03l-0.95,-1.82l-0.06,-0.72l-3.11,-3.64l-0.79,-1.52l1.56,1.45l1.76,0.66l0.65,2.34ZM853.83,393.59l0.57,1.24l0.59,0.16l1.42,-0.97l0.46,0.79l0.0,1.03l-2.47,3.48l-1.26,1.2l-0.06,0.5l0.55,0.87l-1.41,0.07l-2.33,1.38l-2.03,5.02l-3.02,2.16l-2.06,-0.06l-1.71,-1.04l-2.47,-0.2l-0.27,-0.73l1.22,-2.1l3.05,-2.94l1.62,-0.59l4.02,-2.82l1.57,-1.67l1.07,-2.16l0.88,-0.7l0.48,-1.75l1.24,-0.97l0.35,0.79Z",name:"New Zealand"},NP:{path:"M641.14,213.62l0.01,3.19l-1.74,0.04l-4.8,-0.86l-1.58,-1.39l-3.37,-0.34l-7.65,-3.7l0.8,-2.09l2.33,-1.7l1.77,0.75l2.49,1.76l1.38,0.41l0.99,1.35l1.9,0.52l1.99,1.17l5.49,0.9Z",name:"Nepal"},CI:{path:"M407.4,259.27l0.86,0.42l0.56,0.9l1.13,0.53l1.19,-0.61l0.97,-0.08l1.42,0.54l0.6,3.24l-1.03,2.08l-0.65,2.84l1.06,2.33l-0.06,0.53l-2.54,-0.47l-1.66,0.03l-3.06,0.46l-4.11,1.6l0.32,-3.06l-1.18,-1.31l-1.32,-0.66l0.42,-0.85l-0.2,-1.4l0.5,-0.67l0.01,-1.59l0.84,-0.32l0.26,-0.5l-1.15,-3.01l0.12,-0.5l0.51,-0.25l0.66,0.31l1.93,0.02l0.67,-0.71l0.71,-0.14l0.25,0.69l0.57,0.22l1.4,-0.61Z",name:"Côte d'Ivoire"},CH:{path:"M444.62,156.35l-0.29,0.87l0.18,0.53l1.13,0.58l1.0,0.1l-0.1,0.65l-0.79,0.38l-1.72,-0.37l-0.45,0.23l-0.45,1.04l-0.75,0.06l-0.84,-0.4l-1.32,1.0l-0.96,0.12l-0.88,-0.55l-0.81,-1.3l-0.49,-0.16l-0.63,0.26l0.02,-0.65l1.71,-1.66l0.1,-0.56l0.93,0.08l0.58,-0.46l1.99,0.02l0.66,-0.61l2.19,0.79Z",name:"Switzerland"},CO:{path:"M242.07,254.93l-1.7,0.59l-0.59,1.18l-1.7,1.69l-0.38,1.93l-0.67,1.43l0.31,0.57l1.03,0.13l0.25,0.9l0.57,0.64l-0.04,2.34l1.64,1.42l3.16,-0.24l1.26,0.28l1.67,2.06l0.41,0.13l4.09,-0.39l0.45,0.22l-0.92,1.95l-0.2,1.8l0.52,1.83l0.75,1.05l-1.12,1.1l0.07,0.63l0.84,0.51l0.74,1.29l-0.39,-0.45l-0.59,-0.01l-0.71,0.74l-4.71,-0.05l-0.4,0.41l0.03,1.57l0.33,0.39l1.11,0.2l-1.68,0.4l-0.29,0.38l-0.01,1.82l1.16,1.14l0.34,1.25l-1.05,7.05l-1.04,-0.87l1.26,-1.99l-0.13,-0.56l-2.18,-1.23l-1.38,0.2l-1.14,-0.38l-1.27,0.61l-1.55,-0.26l-1.38,-2.46l-1.23,-0.75l-0.85,-1.2l-1.67,-1.19l-0.86,0.13l-2.11,-1.32l-1.01,0.31l-1.8,-0.29l-0.52,-0.91l-3.09,-1.68l0.77,-0.52l-0.1,-1.12l0.41,-0.64l1.34,-0.32l2.0,-2.88l-0.11,-0.57l-0.66,-0.43l0.39,-1.38l-0.52,-2.1l0.49,-0.83l-0.4,-2.13l-0.97,-1.35l0.17,-0.66l0.86,-0.08l0.47,-0.75l-0.46,-1.63l1.41,-0.07l1.8,-1.69l0.93,-0.24l0.3,-0.38l0.45,-2.76l1.22,-1.0l1.44,-0.04l0.45,-0.5l1.91,0.12l2.93,-1.84l1.15,-1.14l0.91,0.46l-0.25,0.45Z",name:"Colombia"},CN:{path:"M740.23,148.97l4.57,1.3l2.8,2.17l0.98,2.9l0.38,0.27l3.8,0.0l2.32,-1.28l3.29,-0.75l-0.96,2.09l-1.02,1.28l-0.85,3.4l-1.52,2.73l-2.76,-0.5l-2.4,1.13l-0.21,0.45l0.64,2.57l-0.32,3.2l-0.94,0.06l-0.37,0.89l-0.91,-1.01l-0.64,0.07l-0.92,1.57l-3.73,1.25l-0.26,0.48l0.26,1.06l-1.5,-0.08l-1.09,-0.86l-0.56,0.06l-1.67,2.06l-2.7,1.56l-2.03,1.88l-3.4,0.83l-1.93,1.4l-1.15,0.34l0.33,-0.7l-0.41,-0.89l1.79,-1.79l0.02,-0.54l-1.32,-1.56l-0.48,-0.1l-2.24,1.09l-2.83,2.06l-1.51,1.83l-2.28,0.13l-1.55,1.49l-0.04,0.5l1.32,1.97l2.0,0.58l0.31,1.35l1.98,0.84l3.0,-1.96l2.0,1.02l1.49,0.11l0.22,0.83l-3.37,0.86l-1.12,1.48l-2.5,1.52l-1.29,1.99l0.14,0.56l2.57,1.48l0.97,2.7l3.17,4.63l-0.03,1.66l-1.35,0.65l-0.2,0.51l0.6,1.47l1.4,0.91l-0.89,3.82l-1.43,0.38l-3.85,6.44l-2.27,3.11l-6.78,4.57l-2.73,0.29l-1.45,1.04l-0.62,-0.61l-0.55,-0.01l-1.36,1.25l-3.39,1.27l-2.61,0.4l-1.1,2.79l-0.81,0.09l-0.49,-1.42l0.5,-0.85l-0.25,-0.59l-3.36,-0.84l-1.3,0.4l-2.31,-0.62l-0.94,-0.84l0.33,-1.28l-0.3,-0.49l-2.19,-0.46l-1.13,-0.93l-0.47,-0.02l-2.06,1.36l-4.29,0.28l-2.76,1.05l-0.28,0.43l0.32,2.53l-0.59,-0.03l-0.19,-1.34l-0.55,-0.34l-1.68,0.7l-2.46,-1.23l0.62,-1.87l-0.26,-0.51l-1.37,-0.44l-0.54,-2.22l-0.45,-0.3l-2.13,0.35l0.24,-2.48l2.39,-2.4l0.03,-4.31l-1.19,-0.92l-0.78,-1.49l-0.41,-0.21l-1.41,0.19l-1.98,-0.3l0.46,-1.07l-1.17,-1.7l-0.55,-0.11l-1.63,1.05l-2.25,-0.57l-2.89,1.73l-2.25,1.98l-1.75,0.29l-1.17,-0.71l-3.31,-0.65l-1.48,0.79l-1.04,1.27l-0.12,-1.17l-0.54,-0.34l-1.44,0.54l-5.55,-0.86l-1.98,-1.16l-1.89,-0.54l-0.99,-1.35l-1.34,-0.37l-2.55,-1.79l-2.01,-0.84l-1.21,0.56l-5.57,-3.45l-0.53,-2.31l1.19,0.25l0.48,-0.37l0.08,-1.42l-0.98,-1.56l0.15,-2.44l-2.69,-3.32l-4.12,-1.23l-0.67,-2.0l-1.92,-1.48l-0.38,-0.7l-0.51,-3.01l-1.52,-0.66l-0.7,0.13l-0.48,-2.05l0.55,-0.51l-0.09,-0.82l2.03,-1.19l1.6,-0.54l2.56,0.38l0.42,-0.22l0.85,-1.7l3.0,-0.33l1.1,-1.26l4.05,-1.77l0.39,-0.91l-0.17,-1.44l1.45,-0.67l0.2,-0.52l-2.07,-4.9l4.51,-1.12l1.37,-0.73l1.89,-5.51l4.98,0.86l1.51,-1.7l0.11,-2.87l1.99,-0.38l1.83,-2.06l0.49,-0.13l0.68,2.08l2.23,1.77l3.44,1.16l1.55,2.29l-0.92,3.49l0.96,1.67l6.54,1.13l2.95,1.87l1.47,0.35l1.06,2.62l1.53,1.91l3.05,0.08l5.14,0.67l3.37,-0.41l2.36,0.43l3.65,1.8l3.06,0.04l1.45,0.88l2.87,-1.59l3.95,-1.02l3.83,-0.14l3.06,-1.14l1.77,-1.6l1.72,-1.01l0.17,-0.49l-1.1,-2.05l1.02,-1.54l4.02,0.8l2.45,-1.61l3.76,-1.19l1.96,-2.13l1.63,-0.83l3.51,-0.4l1.92,0.34l0.46,-0.3l0.17,-1.5l-2.27,-2.22l-2.11,-1.09l-2.18,1.11l-2.32,-0.47l-1.29,0.32l-0.4,-0.82l2.73,-5.16l3.02,1.06l3.53,-2.06l0.18,-1.68l2.16,-3.35l1.49,-1.35l-0.03,-1.85l-1.07,-0.85l1.54,-1.26l2.98,-0.59l3.23,-0.09l3.64,0.99l2.04,1.16l3.29,6.71l0.92,3.19ZM696.92,237.31l-1.87,1.08l-1.63,-0.64l-0.06,-1.79l1.03,-0.98l2.58,-0.69l1.16,0.05l0.3,0.54l-0.98,1.06l-0.53,1.37Z",name:"China"},CM:{path:"M457.92,257.49l1.05,1.91l-1.4,0.16l-1.05,-0.23l-0.45,0.22l-0.54,1.19l0.08,0.45l1.48,1.47l1.05,0.45l1.01,2.46l-1.52,2.99l-0.68,0.68l-0.13,3.69l2.38,3.84l1.09,0.8l0.24,2.48l-3.67,-1.14l-11.27,-0.13l0.23,-1.79l-0.98,-1.66l-1.19,-0.54l-0.44,-0.97l-0.6,-0.42l1.71,-4.27l0.75,-0.13l1.38,-1.36l0.65,-0.03l1.71,0.99l1.93,-1.12l1.14,-3.18l1.38,-1.17l2.0,-5.14l2.17,-2.13l0.3,-1.64l-0.86,-0.88l0.03,-0.33l0.94,1.28l0.07,3.22Z",name:"Cameroon"},CL:{path:"M246.5,429.18l-3.14,1.83l-0.57,3.16l-0.64,0.05l-2.68,-1.06l-2.82,-2.33l-3.04,-1.89l-0.69,-1.85l0.63,-2.14l-1.21,-2.11l-0.31,-5.37l1.01,-2.91l2.57,-2.38l-0.18,-0.68l-3.16,-0.77l2.05,-2.47l0.77,-4.65l2.32,0.9l0.54,-0.29l1.31,-6.31l-0.22,-0.44l-1.68,-0.8l-0.56,0.28l-0.7,3.36l-0.81,-0.22l1.56,-9.41l1.15,-2.24l-0.71,-2.82l-0.18,-2.84l1.01,-0.33l3.26,-9.14l1.07,-4.22l-0.56,-4.21l0.74,-2.34l-0.29,-3.27l1.46,-3.34l2.04,-16.59l-0.66,-7.76l1.03,-0.53l0.54,-0.9l0.79,1.14l0.32,1.78l1.25,1.16l-0.69,2.55l1.33,2.9l0.97,3.59l0.46,0.29l1.5,-0.3l0.11,0.23l-0.76,2.44l-2.57,1.23l-0.23,0.37l0.08,4.33l-0.46,0.77l0.56,1.21l-1.58,1.51l-1.68,2.62l-0.89,2.47l0.2,2.7l-1.48,2.73l1.12,5.09l0.64,0.61l-0.01,2.29l-1.38,2.68l0.01,2.4l-1.89,2.04l0.02,2.75l0.69,2.57l-1.43,1.13l-1.26,5.68l0.39,3.51l-0.97,0.89l0.58,3.5l1.02,1.14l-0.65,1.02l0.15,0.57l1.0,0.53l0.16,0.69l-1.03,0.85l0.26,1.75l-0.89,4.03l-1.31,2.66l0.24,1.75l-0.71,1.83l-1.99,1.7l0.3,3.67l0.88,1.19l1.58,0.01l0.01,2.21l1.04,1.95l5.98,0.63ZM248.69,430.79l0.0,7.33l0.4,0.4l3.52,0.05l-0.44,0.75l-1.94,0.98l-2.49,-0.37l-1.88,-1.06l-2.55,-0.49l-5.59,-3.71l-2.38,-2.63l4.1,2.48l3.32,1.23l0.45,-0.12l1.29,-1.57l0.83,-2.32l2.05,-1.24l1.31,0.29Z",name:"Chile"},CA:{path:"M280.06,145.6l-1.67,2.88l0.07,0.49l0.5,0.04l1.46,-0.98l1.0,0.42l-0.56,0.72l0.17,0.62l2.22,0.89l1.35,-0.71l1.95,0.78l-0.66,2.01l0.5,0.51l1.32,-0.42l0.98,3.17l-0.91,2.41l-0.8,0.08l-1.23,-0.45l0.47,-2.25l-0.89,-0.83l-0.48,0.06l-2.78,2.63l-0.34,-0.02l1.02,-0.85l-0.14,-0.69l-2.4,-0.77l-7.4,0.08l-0.17,-0.41l1.3,-0.94l0.02,-0.64l-0.73,-0.58l1.85,-1.74l2.57,-5.16l1.47,-1.79l1.99,-1.05l0.46,0.06l-1.53,2.45ZM68.32,74.16l4.13,0.95l4.02,2.14l2.61,0.4l2.47,-1.89l2.88,-1.31l3.85,0.48l3.71,-1.94l3.82,-1.04l1.56,1.68l0.49,0.08l1.87,-1.04l0.65,-1.98l1.24,0.35l4.16,3.94l0.54,0.01l2.75,-2.49l0.26,2.59l0.49,0.35l3.08,-0.73l1.04,-1.27l2.73,0.23l3.83,1.86l5.86,1.61l3.47,0.75l2.44,-0.26l2.73,1.78l-2.98,1.81l-0.19,0.41l0.31,0.32l4.53,0.92l6.87,-0.5l2.0,-0.69l2.49,2.39l0.53,0.02l2.72,-2.16l-0.02,-0.64l-2.16,-1.54l1.15,-1.06l4.83,-0.61l1.84,0.95l2.48,2.31l3.01,-0.23l4.55,1.92l3.85,-0.67l3.61,0.1l0.41,-0.44l-0.25,-2.36l1.79,-0.61l3.49,1.32l-0.01,3.77l0.31,0.39l0.45,-0.22l1.48,-3.16l1.74,0.1l0.41,-0.3l1.13,-4.37l-2.78,-3.11l-2.8,-1.74l0.19,-4.64l2.71,-3.07l2.98,0.67l2.41,1.95l3.19,4.8l-1.99,1.97l0.21,0.68l4.33,0.84l-0.01,4.15l0.25,0.37l0.44,-0.09l3.07,-3.15l2.54,2.39l-0.61,3.33l2.42,2.88l0.61,0.0l2.61,-3.08l1.88,-3.82l0.17,-4.58l6.72,0.94l3.13,2.04l0.13,1.82l-1.76,2.19l-0.01,0.49l1.66,2.16l-0.26,1.71l-4.68,2.8l-3.28,0.61l-2.47,-1.2l-0.55,0.23l-0.73,2.04l-2.38,3.43l-0.74,1.77l-2.74,2.57l-3.44,0.25l-2.21,1.78l-0.28,2.53l-2.82,0.55l-3.12,3.22l-2.72,4.31l-1.03,3.17l-0.14,4.31l0.33,0.41l3.44,0.57l2.24,5.95l0.45,0.23l3.4,-0.69l4.52,1.51l2.43,1.31l1.91,1.73l3.1,0.96l2.62,1.46l6.6,0.54l-0.35,2.74l0.81,3.53l1.81,3.78l3.83,3.3l0.45,0.04l2.1,-1.28l1.37,-3.69l-1.31,-5.38l-1.45,-1.58l3.57,-1.47l2.84,-2.46l1.52,-2.8l-0.25,-2.55l-1.7,-3.07l-2.85,-2.61l2.8,-3.95l-1.08,-3.37l-0.79,-5.67l1.36,-0.7l6.76,1.41l2.12,-0.96l5.12,3.36l1.05,1.61l4.08,0.26l-0.06,2.87l0.83,4.7l0.3,0.32l2.16,0.54l1.73,2.06l0.5,0.09l3.63,-2.03l2.52,-4.19l1.26,-1.32l7.6,11.72l-0.92,2.04l0.16,0.51l3.3,1.97l2.22,1.98l4.1,0.98l1.43,0.99l0.95,2.79l2.1,0.68l0.84,1.08l0.17,3.45l-3.37,2.26l-4.22,1.24l-3.06,2.63l-4.06,0.51l-5.35,-0.69l-6.39,0.2l-2.3,2.41l-3.26,1.51l-6.47,7.15l-0.06,0.48l0.44,0.19l2.13,-0.52l4.17,-4.24l5.12,-2.62l3.52,-0.3l1.69,1.21l-2.12,2.21l0.81,3.47l1.02,2.61l3.47,1.6l4.14,-0.45l2.15,-2.8l0.26,1.48l1.14,0.8l-2.56,1.69l-5.5,1.82l-2.54,1.27l-2.74,2.15l-1.4,-0.16l-0.07,-2.01l4.14,-2.44l0.18,-0.45l-0.39,-0.29l-6.63,0.45l-1.39,-1.49l-0.14,-4.43l-1.11,-0.91l-1.82,0.39l-0.66,-0.66l-0.6,0.03l-1.91,2.39l-0.82,2.52l-0.8,1.27l-1.67,0.56l-0.46,0.76l-8.31,0.07l-1.21,0.62l-2.35,1.97l-0.71,-0.14l-1.37,0.96l-1.12,-0.48l-4.74,1.26l-0.9,1.17l0.21,0.62l1.73,0.3l-1.81,0.31l-1.85,0.81l-2.11,-0.13l-2.95,1.78l-0.69,-0.09l1.39,-2.1l1.73,-1.21l0.1,-2.29l1.16,-1.99l0.49,0.53l2.03,0.42l1.2,-1.16l0.02,-0.47l-2.66,-3.51l-2.28,-0.61l-5.64,-0.71l-0.4,-0.57l-0.79,0.13l0.2,-0.41l-0.22,-0.55l-0.68,-0.26l0.19,-1.26l-0.78,-0.73l0.31,-0.64l-0.29,-0.57l-2.6,-0.44l-0.75,-1.63l-0.94,-0.66l-4.31,-0.65l-1.13,1.19l-1.48,0.59l-0.85,1.06l-2.83,-0.76l-2.09,0.39l-2.39,-0.97l-4.24,-0.7l-0.57,-0.4l-0.41,-1.63l-0.4,-0.3l-0.85,0.02l-0.39,0.4l-0.01,0.85l-69.13,-0.01l-6.51,-4.52l-4.5,-1.38l-1.26,-2.66l0.33,-1.93l-0.23,-0.43l-3.01,-1.35l-0.55,-2.77l-2.89,-2.38l-0.04,-1.45l1.39,-1.83l-0.28,-2.55l-4.16,-2.2l-4.07,-6.6l-4.02,-3.22l-1.3,-1.88l-0.5,-0.13l-2.51,1.21l-2.23,1.87l-3.85,-3.88l-2.44,-1.04l-2.22,-0.13l0.03,-37.49ZM260.37,148.65l3.04,0.76l2.26,1.2l-3.78,-0.95l-1.53,-1.01ZM249.4,3.81l6.68,0.49l5.32,0.79l4.26,1.57l-0.07,1.1l-5.85,2.53l-6.02,1.21l-2.39,1.39l-0.18,0.45l0.39,0.29l4.01,-0.02l-4.65,2.82l-4.2,1.74l-4.19,4.59l-5.03,0.92l-1.67,1.15l-7.47,0.59l-0.37,0.37l0.32,0.42l2.41,0.49l-0.81,0.47l-0.12,0.59l1.83,2.41l-2.02,1.59l-3.81,1.51l-1.32,2.16l-3.38,1.53l-0.22,0.48l0.35,1.19l0.4,0.29l3.88,-0.18l0.03,0.61l-6.33,2.95l-6.41,-1.4l-7.43,0.79l-3.72,-0.62l-4.4,-0.25l-0.23,-1.83l4.29,-1.11l0.28,-0.51l-1.1,-3.45l1.0,-0.25l6.58,2.28l0.47,-0.16l-0.05,-0.49l-3.41,-3.45l-3.58,-0.98l1.48,-1.55l4.34,-1.29l0.97,-2.19l-0.16,-0.48l-3.42,-2.13l-0.81,-2.26l6.2,0.22l2.24,0.58l3.91,-2.1l0.2,-0.43l-0.35,-0.32l-5.64,-0.67l-8.73,0.36l-4.26,-1.9l-2.12,-2.4l-2.78,-1.66l-0.41,-1.52l3.31,-1.03l2.93,-0.2l4.91,-0.99l3.7,-2.27l2.87,0.3l2.62,1.67l0.56,-0.14l1.82,-3.2l3.13,-0.94l4.44,-0.69l7.53,-0.26l1.48,0.67l7.19,-1.06l10.8,0.79ZM203.85,57.54l0.01,0.42l1.97,2.97l0.68,-0.02l2.24,-3.72l5.95,-1.86l4.01,4.64l-0.35,2.91l0.5,0.43l4.95,-1.36l2.32,-1.8l5.31,2.28l3.27,2.11l0.3,1.84l0.48,0.33l4.42,-0.99l2.64,2.87l5.97,1.77l2.06,1.72l2.11,3.71l-4.19,1.86l-0.01,0.73l5.9,2.83l3.94,0.94l3.78,3.95l3.46,0.25l-0.63,2.37l-4.11,4.47l-2.76,-1.56l-3.9,-3.94l-3.59,0.41l-0.33,0.34l-0.19,2.72l2.63,2.38l3.42,1.89l0.94,0.97l1.55,3.75l-0.7,2.29l-2.74,-0.92l-6.25,-3.15l-0.51,0.13l0.05,0.52l6.07,5.69l0.18,0.59l-6.09,-1.39l-5.31,-2.24l-2.63,-1.66l0.6,-0.77l-0.12,-0.6l-7.39,-4.01l-0.59,0.37l0.03,0.79l-6.73,0.6l-1.69,-1.1l1.36,-2.46l4.51,-0.07l5.15,-0.52l0.31,-0.6l-0.74,-1.3l0.78,-1.84l3.21,-4.05l-0.67,-2.35l-1.11,-1.6l-3.84,-2.1l-4.35,-1.28l0.91,-0.63l0.06,-0.61l-2.65,-2.75l-2.34,-0.36l-1.89,-1.46l-0.53,0.03l-1.24,1.23l-4.36,0.55l-9.04,-0.99l-9.26,-1.98l-1.6,-1.22l2.22,-1.77l0.13,-0.44l-0.38,-0.27l-3.22,-0.02l-0.72,-4.25l1.83,-4.04l2.42,-1.85l5.5,-1.1l-1.39,2.35ZM261.19,159.33l2.07,0.61l1.44,-0.04l-1.15,0.63l-2.94,-1.23l-0.4,-0.68l0.36,-0.37l0.61,1.07ZM230.83,84.39l-2.37,0.18l-0.49,-1.63l0.93,-2.09l1.94,-0.51l1.62,0.99l0.02,1.52l-1.66,1.54ZM229.43,58.25l0.11,0.65l-4.87,-0.21l-2.72,0.62l-3.1,-2.57l0.08,-1.26l0.86,-0.23l5.57,0.51l4.08,2.5ZM222.0,105.02l-0.72,1.49l-0.63,-0.19l-0.48,-0.84l0.81,-0.99l0.65,0.05l0.37,0.46ZM183.74,38.32l2.9,1.7l4.79,-0.01l1.84,1.46l-0.49,1.68l0.23,0.48l2.82,1.14l1.76,1.26l7.01,0.65l4.1,-1.1l5.03,-0.43l3.93,0.35l2.48,1.77l0.46,1.7l-1.3,1.1l-3.56,1.01l-3.23,-0.59l-7.17,0.76l-5.09,0.09l-3.99,-0.6l-6.42,-1.54l-0.79,-2.51l-0.3,-2.49l-2.64,-2.5l-5.32,-0.72l-2.52,-1.4l0.68,-1.57l4.78,0.31ZM207.38,91.35l0.4,1.56l0.56,0.26l1.06,-0.52l1.32,0.96l5.42,2.57l0.2,1.68l0.46,0.35l1.68,-0.28l1.15,0.85l-1.55,0.87l-3.61,-0.88l-1.32,-1.69l-0.57,-0.06l-2.45,2.1l-3.12,1.79l-0.7,-1.87l-0.42,-0.26l-2.16,0.24l1.39,-1.39l0.32,-3.14l0.76,-3.35l1.18,0.22ZM215.49,102.6l-2.67,1.95l-1.4,-0.07l-0.3,-0.58l1.53,-1.48l2.84,0.18ZM202.7,24.12l2.53,1.59l-2.87,1.4l-4.53,4.05l-4.25,0.38l-5.03,-0.68l-2.45,-2.04l0.03,-1.62l1.82,-1.37l0.14,-0.45l-0.38,-0.27l-4.45,0.04l-2.59,-1.76l-1.41,-2.29l1.57,-2.32l1.62,-1.66l2.44,-0.39l0.25,-0.65l-0.6,-0.74l4.86,-0.25l3.24,3.11l8.16,2.3l1.9,3.61ZM187.47,59.2l-2.76,3.49l-2.38,-0.15l-1.44,-3.84l0.04,-2.2l1.19,-1.88l2.3,-1.23l5.07,0.17l4.11,1.02l-3.24,3.72l-2.88,0.89ZM186.07,48.79l-1.08,1.53l-3.34,-0.34l-2.56,-1.1l1.03,-1.75l3.25,-1.23l1.95,1.58l0.75,1.3ZM185.71,35.32l-5.3,-0.2l-0.32,-0.71l4.31,0.07l1.3,0.84ZM180.68,32.48l-3.34,1.0l-1.79,-1.1l-0.98,-1.87l-0.15,-1.73l4.1,0.53l2.67,1.7l-0.51,1.47ZM180.9,76.31l-1.1,1.08l-3.13,-1.23l-2.12,0.43l-2.71,-1.57l1.72,-1.09l1.55,-1.72l3.81,1.9l1.98,2.2ZM169.74,54.87l2.96,0.97l4.17,-0.57l0.41,0.88l-2.14,2.11l0.09,0.64l3.55,1.92l-0.4,3.72l-3.79,1.65l-2.17,-0.35l-1.72,-1.74l-6.02,-3.5l0.03,-0.85l4.68,0.54l0.4,-0.21l-0.05,-0.45l-2.48,-2.81l2.46,-1.95ZM174.45,40.74l1.37,1.73l0.07,2.44l-1.05,3.45l-3.79,0.47l-2.32,-0.69l0.05,-2.64l-0.44,-0.41l-3.68,0.35l-0.12,-3.1l2.45,0.1l3.67,-1.73l3.41,0.29l0.37,-0.26ZM170.05,31.55l0.67,1.56l-3.33,-0.49l-4.22,-1.77l-4.35,-0.16l1.4,-0.94l-0.06,-0.7l-2.81,-1.23l-0.12,-1.39l4.39,0.68l6.62,1.98l1.81,2.47ZM134.5,58.13l-1.02,1.82l0.45,0.58l5.4,-1.39l3.33,2.29l0.49,-0.03l2.6,-2.23l1.94,1.32l2.0,4.5l0.7,0.06l1.3,-2.29l-1.63,-4.46l1.69,-0.54l2.31,0.71l2.65,1.81l2.49,7.92l8.48,4.27l-0.19,1.35l-3.79,0.33l-0.26,0.67l1.4,1.49l-0.58,1.1l-4.23,-0.64l-4.43,-1.19l-3.0,0.28l-4.66,1.47l-10.52,1.04l-1.43,-2.02l-3.42,-1.2l-2.21,0.43l-2.51,-2.86l4.84,-1.05l3.6,0.19l3.27,-0.78l0.31,-0.39l-0.31,-0.39l-4.84,-1.06l-8.79,0.27l-0.85,-1.07l5.26,-1.66l0.27,-0.45l-0.4,-0.34l-3.8,0.06l-3.81,-1.06l1.81,-3.01l1.66,-1.79l6.48,-2.81l1.97,0.71ZM158.7,56.61l-1.7,2.44l-3.2,-2.75l0.37,-0.3l3.11,-0.18l1.42,0.79ZM149.61,42.73l1.01,1.89l0.5,0.18l2.14,-0.82l2.23,0.19l0.36,2.04l-1.33,2.09l-8.28,0.76l-6.35,2.15l-3.41,0.1l-0.19,-0.96l4.9,-2.08l0.23,-0.46l-0.41,-0.31l-11.25,0.59l-2.89,-0.74l3.04,-4.44l2.14,-1.32l6.81,1.69l4.58,3.06l4.37,0.39l0.36,-0.63l-3.36,-4.6l1.85,-1.53l2.18,0.51l0.77,2.26ZM144.76,34.41l-4.36,1.44l-3.0,-1.4l1.46,-1.24l3.47,-0.52l2.96,0.71l-0.52,1.01ZM145.13,29.83l-1.9,0.66l-3.67,-0.0l2.27,-1.61l3.3,0.95ZM118.92,65.79l-6.03,2.02l-1.33,-1.9l-5.38,-2.28l2.59,-5.05l2.16,-3.14l-0.02,-0.48l-1.97,-2.41l7.64,-0.7l3.6,1.02l6.3,0.27l4.42,2.95l-2.53,0.98l-6.24,3.43l-3.1,3.28l-0.11,2.01ZM129.54,35.53l-0.28,3.37l-1.72,1.62l-2.33,0.28l-4.61,2.19l-3.86,0.76l-2.64,-0.87l3.72,-3.4l5.01,-3.34l3.72,0.07l3.0,-0.67ZM111.09,152.69l-0.67,0.24l-3.85,-1.37l-0.83,-1.17l-2.12,-1.07l-0.66,-1.02l-2.4,-0.55l-0.74,-1.71l6.02,1.45l2.0,2.55l2.52,1.39l0.73,1.27ZM87.8,134.64l0.89,0.29l1.86,-0.21l-0.65,3.34l1.69,2.33l-1.31,-1.33l-0.99,-1.62l-1.17,-0.98l-0.33,-1.82Z",name:"Canada"},CG:{path:"M466.72,276.48l-0.1,1.03l-1.25,2.97l-0.19,3.62l-0.46,1.78l-0.23,0.63l-1.61,1.19l-1.21,1.39l-1.09,2.43l0.04,2.09l-3.25,3.24l-0.5,-0.24l-0.5,-0.83l-1.36,-0.02l-0.98,0.89l-1.68,-0.99l-1.54,1.24l-1.52,-1.96l1.57,-1.14l0.11,-0.52l-0.77,-1.35l2.1,-0.66l0.39,-0.73l1.05,0.82l2.21,0.11l1.12,-1.37l0.37,-1.81l-0.27,-2.09l-1.13,-1.5l1.0,-2.69l-0.13,-0.45l-0.92,-0.58l-1.6,0.17l-0.51,-0.94l0.1,-0.61l2.75,0.09l3.97,1.24l0.51,-0.33l0.17,-1.28l1.24,-2.21l1.28,-1.14l2.76,0.49Z",name:"Congo"},CF:{path:"M461.16,278.2l-0.26,-1.19l-1.09,-0.77l-0.84,-1.17l-0.29,-1.0l-1.04,-1.15l0.08,-3.43l0.58,-0.49l1.16,-2.35l1.85,-0.17l0.61,-0.62l0.97,0.58l3.15,-0.96l2.48,-1.92l0.02,-0.96l2.81,0.02l2.36,-1.17l1.93,-2.85l1.16,-0.93l1.11,-0.3l0.27,0.86l1.34,1.47l-0.39,2.01l0.3,1.01l4.01,2.75l0.17,0.93l2.63,2.31l0.6,1.44l2.08,1.4l-3.84,-0.21l-1.94,0.88l-1.23,-0.49l-2.67,1.2l-1.29,-0.18l-0.51,0.36l-0.6,1.22l-3.35,-0.65l-1.57,-0.91l-2.42,-0.83l-1.45,0.91l-0.97,1.27l-0.26,1.56l-3.22,-0.43l-1.49,1.33l-0.94,1.62Z",name:"Central African Rep."},CD:{path:"M487.01,272.38l2.34,-0.14l1.35,1.84l1.34,0.45l0.86,-0.39l1.21,0.12l1.07,-0.41l0.54,0.89l2.04,1.54l-0.14,2.72l0.7,0.54l-1.38,1.13l-1.53,2.54l-0.17,2.05l-0.59,1.08l-0.02,1.72l-0.72,0.84l-0.66,3.01l0.63,1.32l-0.44,4.26l0.64,1.47l-0.37,1.22l0.86,1.8l1.53,1.41l0.3,1.26l0.44,0.5l-4.08,0.75l-0.92,1.81l0.51,1.34l-0.74,5.43l0.17,0.38l2.45,1.46l0.54,-0.1l0.12,1.62l-1.28,-0.01l-1.85,-2.35l-1.94,-0.45l-0.48,-1.13l-0.55,-0.2l-1.41,0.74l-1.71,-0.3l-1.01,-1.18l-2.49,-0.19l-0.44,-0.77l-1.98,-0.21l-2.88,0.36l0.11,-2.41l-0.85,-1.13l-0.16,-1.36l0.32,-1.73l-0.46,-0.89l-0.04,-1.49l-0.4,-0.39l-2.53,0.02l0.1,-0.41l-0.39,-0.49l-1.28,0.01l-0.43,0.45l-1.62,0.32l-0.83,1.79l-1.09,-0.28l-2.4,0.52l-1.37,-1.91l-1.3,-3.3l-0.38,-0.27l-7.39,-0.03l-2.46,0.42l0.5,-0.45l0.37,-1.47l0.66,-0.38l0.92,0.08l0.73,-0.82l0.87,0.02l0.31,0.68l1.4,0.36l3.59,-3.63l0.01,-2.23l1.02,-2.29l2.69,-2.39l0.43,-0.99l0.49,-1.96l0.17,-3.51l1.25,-2.95l0.36,-3.14l0.86,-1.13l1.1,-0.66l3.57,1.73l3.65,0.73l0.46,-0.21l0.8,-1.46l1.24,0.19l2.61,-1.17l0.81,0.44l1.04,-0.03l0.59,-0.66l0.7,-0.16l1.81,0.25Z",name:"Dem. Rep. Congo"},CZ:{path:"M458.46,144.88l1.22,1.01l1.47,0.23l0.13,0.93l1.36,0.68l0.54,-0.2l0.24,-0.55l1.15,0.25l0.53,1.09l1.68,0.18l0.6,0.84l-1.04,0.73l-0.96,1.28l-1.6,0.17l-0.55,0.56l-1.04,-0.46l-1.05,0.15l-2.12,-0.96l-1.05,0.34l-1.2,1.12l-1.56,-0.87l-2.57,-2.1l-0.53,-1.88l4.7,-2.52l0.71,0.26l0.9,-0.28Z",name:"Czech Rep."},CY:{path:"M504.36,193.47l0.43,0.28l-1.28,0.57l-0.92,-0.28l-0.24,-0.46l2.01,-0.13Z",name:"Cyprus"},CR:{path:"M211.34,258.05l0.48,0.99l1.6,1.6l-0.54,0.45l0.29,1.42l-0.25,1.19l-1.09,-0.59l-0.05,-1.25l-2.46,-1.42l-0.28,-0.77l-0.66,-0.45l-0.45,-0.0l-0.11,1.04l-1.32,-0.95l0.31,-1.3l-0.36,-0.6l0.31,-0.27l1.42,0.58l1.29,-0.14l0.56,0.56l0.74,0.17l0.55,-0.27Z",name:"Costa Rica"},CU:{path:"M221.21,227.25l1.27,1.02l2.19,-0.28l4.43,3.33l2.08,0.43l-0.1,0.38l0.36,0.5l1.75,0.1l1.48,0.84l-3.11,0.51l-4.15,-0.03l0.77,-0.67l-0.04,-0.64l-1.2,-0.74l-1.49,-0.16l-0.7,-0.61l-0.56,-1.4l-0.4,-0.25l-1.34,0.1l-2.2,-0.66l-0.88,-0.58l-3.18,-0.4l-0.27,-0.16l0.58,-0.74l-0.36,-0.29l-2.72,-0.05l-1.7,1.29l-0.91,0.03l-0.61,0.69l-1.01,0.22l1.11,-1.29l1.01,-0.52l3.69,-1.01l3.98,0.21l2.21,0.84Z",name:"Cuba"},SZ:{path:"M500.35,351.36l0.5,2.04l-0.38,0.89l-1.05,0.21l-1.23,-1.2l-0.02,-0.64l0.83,-1.57l1.34,0.27Z",name:"Swaziland"},SY:{path:"M511.0,199.79l0.05,-1.33l0.54,-1.36l1.28,-0.99l0.13,-0.45l-0.41,-1.11l-1.14,-0.36l-0.19,-1.74l0.52,-1.0l1.29,-1.21l0.2,-1.18l0.59,0.23l2.62,-0.76l1.36,0.52l2.06,-0.01l2.95,-1.08l3.25,-0.26l-0.67,0.94l-1.28,0.66l-0.21,0.4l0.23,2.01l-0.88,3.19l-10.15,5.73l-2.15,-0.85Z",name:"Syria"},KG:{path:"M621.35,172.32l-3.87,1.69l-0.96,1.18l-3.04,0.34l-1.13,1.86l-2.36,-0.35l-1.99,0.63l-2.39,1.4l0.06,0.95l-0.4,0.37l-4.52,0.43l-3.02,-0.93l-2.37,0.17l0.11,-0.79l2.32,0.42l1.13,-0.88l1.99,0.2l3.21,-2.14l-0.03,-0.69l-2.97,-1.57l-1.94,0.65l-1.22,-0.74l1.71,-1.58l-0.12,-0.67l-0.36,-0.15l0.32,-0.77l1.36,-0.35l4.02,1.02l0.49,-0.3l0.35,-1.59l1.09,-0.48l3.42,1.22l1.11,-0.31l7.64,0.39l1.16,1.0l1.23,0.39Z",name:"Kyrgyzstan"},KE:{path:"M506.26,284.69l1.87,-2.56l0.93,-2.15l-1.38,-4.08l-1.06,-1.6l2.82,-2.75l0.79,0.26l0.12,1.41l0.86,0.83l1.9,0.11l3.28,2.13l3.57,0.44l1.05,-1.12l1.96,-0.9l0.82,0.68l1.16,0.09l-1.78,2.45l0.03,9.12l1.3,1.94l-1.37,0.78l-0.67,1.03l-1.08,0.46l-0.34,1.67l-0.81,1.07l-0.45,1.55l-0.68,0.56l-3.2,-2.23l-0.35,-1.58l-8.86,-4.98l0.14,-1.6l-0.57,-1.04Z",name:"Kenya"},SS:{path:"M481.71,263.34l1.07,-0.72l1.2,-3.18l1.36,-0.26l1.61,1.99l0.87,0.34l1.1,-0.41l1.5,0.07l0.57,0.53l2.49,0.0l0.44,-0.63l1.07,-0.4l0.45,-0.84l0.59,-0.33l1.9,1.33l1.6,-0.2l2.83,-3.33l-0.32,-2.21l1.59,-0.52l-0.24,1.6l0.3,1.83l1.35,1.18l0.2,1.87l0.35,0.41l0.02,1.53l-0.23,0.47l-1.42,0.25l-0.85,1.44l0.3,0.6l1.4,0.16l1.11,1.08l0.59,1.13l1.03,0.53l1.28,2.36l-4.41,3.98l-1.74,0.01l-1.89,0.55l-1.47,-0.52l-1.15,0.57l-2.96,-2.62l-1.3,0.49l-1.06,-0.15l-0.79,0.39l-0.82,-0.22l-1.8,-2.7l-1.91,-1.1l-0.66,-1.5l-2.62,-2.32l-0.18,-0.94l-2.37,-1.6Z",name:"S. Sudan"},SR:{path:"M283.12,270.19l2.1,0.53l-1.08,1.95l0.2,1.72l0.93,1.49l-0.59,2.03l-0.43,0.71l-1.12,-0.42l-1.32,0.22l-0.93,-0.2l-0.46,0.26l-0.25,0.73l0.33,0.7l-0.89,-0.13l-1.39,-1.97l-0.31,-1.34l-0.97,-0.31l-0.89,-1.47l0.35,-1.61l1.45,-0.82l0.33,-1.87l2.61,0.44l0.57,-0.47l1.75,-0.16Z",name:"Suriname"},KH:{path:"M689.52,249.39l0.49,1.45l-0.28,2.74l-4.0,1.86l-0.16,0.6l0.68,0.95l-2.06,0.17l-2.05,0.97l-1.82,-0.32l-2.12,-3.7l-0.55,-2.85l1.4,-1.85l3.02,-0.45l2.23,0.35l2.01,0.98l0.51,-0.14l0.95,-1.48l1.74,0.74Z",name:"Cambodia"},SV:{path:"M195.8,250.13l1.4,-1.19l2.24,1.45l0.98,-0.27l0.44,0.2l-0.27,1.05l-1.14,-0.03l-3.64,-1.21Z",name:"El Salvador"},SK:{path:"M476.82,151.17l-1.14,1.9l-2.73,-0.92l-0.82,0.2l-0.74,0.8l-3.46,0.73l-0.47,0.69l-1.76,0.33l-1.88,-1.0l-0.18,-0.81l0.38,-0.75l1.87,-0.32l1.74,-1.89l0.83,0.16l0.79,-0.34l1.51,1.04l1.34,-0.63l1.25,0.3l1.65,-0.42l1.81,0.95Z",name:"Slovakia"},KR:{path:"M737.51,185.84l0.98,-0.1l0.87,-1.17l2.69,-0.32l0.33,-0.29l1.76,2.79l0.58,1.76l0.02,3.12l-0.8,1.32l-2.21,0.55l-1.93,1.13l-1.8,0.19l-0.2,-1.1l0.43,-2.28l-0.95,-2.56l1.43,-0.37l0.23,-0.62l-1.43,-2.06Z",name:"Korea"},SI:{path:"M456.18,162.07l-0.51,-1.32l0.18,-1.05l1.69,0.2l1.42,-0.71l2.09,-0.07l0.62,-0.51l0.21,0.47l-1.61,0.67l-0.44,1.34l-0.66,0.24l-0.26,0.82l-1.22,-0.49l-0.84,0.46l-0.69,-0.04Z",name:"Slovenia"},KP:{path:"M736.77,185.16l-0.92,-0.42l-0.88,0.62l-1.21,-0.88l0.96,-1.15l0.59,-2.59l-0.46,-0.74l-2.09,-0.77l1.64,-1.52l2.72,-1.58l1.58,-1.91l1.11,0.78l2.17,0.11l0.41,-0.5l-0.3,-1.22l3.52,-1.18l0.94,-1.4l0.98,1.08l-2.19,2.18l0.01,2.14l-1.06,0.54l-1.41,1.4l-1.7,0.52l-1.25,1.09l-0.14,1.98l0.94,0.45l1.15,1.04l-0.13,0.26l-2.6,0.29l-1.13,1.29l-1.22,0.08Z",name:"Dem. Rep. Korea"},SO:{path:"M525.13,288.48l-1.13,-1.57l-0.03,-8.86l2.66,-3.38l1.67,-0.13l2.13,-1.69l3.41,-0.23l7.08,-7.55l2.91,-3.69l0.08,-4.82l2.98,-0.67l1.24,-0.86l0.45,-0.0l-0.2,3.0l-1.21,3.62l-2.73,5.97l-2.13,3.65l-5.03,6.16l-8.56,6.4l-2.78,3.08l-0.8,1.56Z",name:"Somalia"},SN:{path:"M390.09,248.21l0.12,1.55l0.49,1.46l0.96,0.82l0.05,1.28l-1.26,-0.19l-0.75,0.33l-1.84,-0.61l-5.84,-0.13l-2.54,0.51l-0.22,-1.03l1.77,0.04l2.01,-0.91l1.03,0.48l1.09,0.04l1.29,-0.62l0.14,-0.58l-0.51,-0.74l-1.81,0.25l-1.13,-0.63l-0.79,0.04l-0.72,0.61l-2.31,0.06l-0.92,-1.77l-0.81,-0.64l0.64,-0.35l2.46,-3.74l1.04,0.19l1.38,-0.56l1.19,-0.02l2.72,1.37l3.03,3.48Z",name:"Senegal"},SL:{path:"M394.46,264.11l-1.73,1.98l-0.58,1.33l-2.07,-1.06l-1.22,-1.26l-0.65,-2.39l1.16,-0.96l0.67,-1.17l1.21,-0.52l1.66,0.0l1.03,1.64l0.52,2.41Z",name:"Sierra Leone"},SB:{path:"M826.69,311.6l-0.61,0.09l-0.2,-0.33l0.37,0.15l0.44,0.09ZM824.18,307.38l-0.26,-0.3l-0.31,-0.91l0.03,0.0l0.54,1.21ZM823.04,309.33l-1.66,-0.22l-0.2,-0.52l1.16,0.28l0.69,0.46ZM819.28,304.68l1.14,0.65l0.02,0.03l-0.81,-0.44l-0.35,-0.23Z",name:"Solomon Is."},SA:{path:"M537.53,210.34l2.0,0.24l0.9,1.32l1.49,-0.06l0.87,2.08l1.29,0.76l0.51,0.99l1.56,1.03l-0.1,1.9l0.32,0.9l1.58,2.47l0.76,0.53l0.7,-0.04l1.68,4.23l7.53,1.33l0.51,-0.29l0.77,1.25l-1.55,4.87l-7.29,2.52l-7.3,1.03l-2.34,1.17l-1.88,2.74l-0.76,0.28l-0.82,-0.78l-0.91,0.12l-2.88,-0.51l-3.51,0.25l-0.86,-0.56l-0.57,0.15l-0.66,1.27l0.16,1.11l-0.43,0.32l-0.93,-1.4l-0.33,-1.16l-1.23,-0.88l-1.27,-2.06l-0.78,-2.22l-1.73,-1.79l-1.14,-0.48l-1.54,-2.31l-0.21,-3.41l-1.44,-2.93l-1.27,-1.16l-1.33,-0.57l-1.31,-3.37l-0.77,-0.67l-0.97,-1.97l-2.8,-4.03l-1.06,-0.17l0.37,-1.96l0.2,-0.72l2.74,0.3l1.08,-0.84l0.6,-0.94l1.74,-0.35l0.65,-1.03l0.71,-0.4l0.1,-0.62l-2.06,-2.28l4.39,-1.22l0.48,-0.37l2.77,0.69l3.66,1.9l7.03,5.5l4.87,0.3Z",name:"Saudi Arabia"},SE:{path:"M480.22,89.3l-4.03,1.17l-2.43,2.86l0.26,2.57l-8.77,6.64l-1.78,5.79l1.78,2.68l2.22,1.96l-2.07,3.77l-2.72,1.13l-0.95,6.04l-1.29,3.01l-2.74,-0.31l-0.4,0.22l-1.31,2.59l-2.34,0.13l-0.75,-3.09l-2.08,-4.03l-1.83,-4.96l1.0,-1.93l2.14,-2.7l0.83,-4.45l-1.6,-2.17l-0.15,-4.94l1.48,-3.39l2.58,-0.15l0.87,-1.59l-0.78,-1.57l3.76,-5.59l4.04,-7.48l2.17,0.01l0.39,-0.29l0.57,-2.07l4.37,0.64l0.46,-0.34l0.33,-2.56l1.1,-0.13l6.94,4.87l0.06,6.32l0.66,1.36Z",name:"Sweden"},SD:{path:"M505.98,259.4l-0.34,-0.77l-1.17,-0.9l-0.26,-1.61l0.29,-1.81l-0.34,-0.46l-1.16,-0.17l-0.54,0.59l-1.23,0.11l-0.28,0.65l0.53,0.65l0.17,1.22l-2.44,3.0l-0.96,0.19l-2.39,-1.4l-0.95,0.52l-0.38,0.78l-1.11,0.41l-0.29,0.5l-1.94,0.0l-0.54,-0.52l-1.81,-0.09l-0.95,0.4l-2.45,-2.35l-2.07,0.54l-0.73,1.26l-0.6,2.1l-1.25,0.58l-0.75,-0.62l0.27,-2.65l-1.48,-1.78l-0.22,-1.48l-0.92,-0.96l-0.02,-1.29l-0.57,-1.16l-0.68,-0.16l0.69,-1.29l-0.18,-1.14l0.65,-0.62l0.03,-0.55l-0.36,-0.41l1.55,-2.97l1.91,0.16l0.43,-0.4l-0.1,-10.94l2.49,-0.01l0.4,-0.4l-0.0,-4.82l29.02,0.0l0.64,2.04l-0.49,0.66l0.36,2.69l0.93,3.16l2.12,1.55l-0.89,1.04l-1.72,0.39l-0.98,0.9l-1.43,5.65l0.24,1.15l-0.38,2.06l-0.96,2.38l-1.53,1.31l-1.32,2.91l-1.22,0.86l-0.37,1.34Z",name:"Sudan"},DO:{path:"M241.8,239.2l0.05,-0.65l-0.46,-0.73l0.42,-0.44l0.19,-1.0l-0.09,-1.53l1.66,0.01l1.99,0.63l0.33,0.67l1.28,0.19l0.33,0.76l1.0,0.08l0.8,0.62l-0.45,0.51l-1.13,-0.47l-1.88,-0.01l-1.27,0.59l-0.75,-0.55l-1.01,0.54l-0.79,1.4l-0.23,-0.61Z",name:"Dominican Rep."},DJ:{path:"M528.43,256.18l-0.45,0.66l-0.58,-0.25l-1.51,0.13l-0.18,-1.01l1.45,-1.95l0.83,0.17l0.77,-0.44l0.2,1.0l-1.2,0.51l-0.06,0.7l0.73,0.47Z",name:"Djibouti"},DK:{path:"M452.28,129.07l-1.19,2.24l-2.13,-1.6l-0.23,-0.95l2.98,-0.95l0.57,1.26ZM447.74,126.31l-0.26,0.57l-0.88,-0.07l-1.8,2.53l0.48,1.69l-1.09,0.36l-1.61,-0.39l-0.89,-1.69l-0.07,-3.43l0.96,-1.73l2.02,-0.2l1.09,-1.07l1.33,-0.67l-0.05,1.06l-0.73,1.41l0.3,1.0l1.2,0.64Z",name:"Denmark"},DE:{path:"M453.14,155.55l-0.55,-0.36l-1.2,-0.1l-1.87,0.57l-2.13,-0.13l-0.56,0.63l-0.86,-0.6l-0.96,0.09l-2.57,-0.93l-0.85,0.67l-1.47,-0.02l0.24,-1.75l1.23,-2.14l-0.28,-0.59l-3.52,-0.58l-0.92,-0.66l0.12,-1.2l-0.48,-0.88l0.27,-2.17l-0.37,-3.03l1.41,-0.22l0.63,-1.26l0.66,-3.19l-0.41,-1.18l0.26,-0.39l1.66,-0.15l0.33,0.54l0.62,0.07l1.7,-1.69l-0.54,-3.02l1.37,0.33l1.31,-0.37l0.31,1.18l2.25,0.71l-0.02,0.92l0.5,0.4l2.55,-0.65l1.34,-0.87l2.57,1.24l1.06,0.98l0.48,1.44l-0.57,0.74l-0.0,0.48l0.87,1.15l0.57,1.64l-0.14,1.29l0.82,1.7l-1.5,-0.07l-0.56,0.57l-4.47,2.15l-0.22,0.54l0.68,2.26l2.58,2.16l-0.66,1.11l-0.79,0.36l-0.23,0.43l0.32,1.87Z",name:"Germany"},YE:{path:"M528.27,246.72l0.26,-0.42l-0.22,-1.01l0.19,-1.5l0.92,-0.69l-0.07,-1.35l0.39,-0.75l1.01,0.47l3.34,-0.27l3.76,0.41l0.95,0.81l1.36,-0.58l1.74,-2.62l2.18,-1.09l6.86,-0.94l2.48,5.41l-1.64,0.76l-0.56,1.9l-6.23,2.16l-2.29,1.8l-1.93,0.05l-1.41,1.02l-4.24,0.74l-1.72,1.49l-3.28,0.19l-0.52,-1.18l0.02,-1.51l-1.34,-3.29Z",name:"Yemen"},AT:{path:"M462.89,152.8l0.04,2.25l-1.07,0.0l-0.33,0.63l0.36,0.51l-1.04,2.13l-2.02,0.07l-1.33,0.7l-5.29,-0.99l-0.47,-0.93l-0.44,-0.21l-2.47,0.55l-0.42,0.51l-3.18,-0.81l0.43,-0.91l1.12,0.78l0.6,-0.17l0.25,-0.58l1.93,0.12l1.86,-0.56l1.0,0.08l0.68,0.57l0.62,-0.15l0.26,-0.77l-0.3,-1.78l0.8,-0.44l0.68,-1.15l1.52,0.85l0.47,-0.06l1.34,-1.25l0.64,-0.17l1.81,0.92l1.28,-0.11l0.7,0.37Z",name:"Austria"},DZ:{path:"M441.46,188.44l-0.32,1.07l0.39,2.64l-0.54,2.16l-1.58,1.82l0.37,2.39l1.91,1.55l0.18,0.8l1.42,1.03l1.84,7.23l0.12,1.16l-0.57,5.0l0.2,1.51l-0.87,0.99l-0.02,0.51l1.41,1.86l0.14,1.2l0.89,1.48l0.5,0.16l0.98,-0.41l1.73,1.08l0.82,1.23l-8.22,4.81l-7.23,5.11l-3.43,1.13l-2.3,0.21l-0.28,-1.59l-2.56,-1.09l-0.67,-1.25l-26.12,-17.86l0.01,-3.47l3.77,-1.88l2.44,-0.41l2.12,-0.75l1.08,-1.42l2.81,-1.05l0.35,-2.08l1.33,-0.29l1.04,-0.94l3.47,-0.69l0.46,-1.08l-0.1,-0.45l-0.58,-0.52l-0.82,-2.81l-0.19,-1.83l-0.78,-1.49l2.03,-1.31l2.63,-0.48l1.7,-1.22l2.31,-0.84l8.24,-0.73l1.49,0.38l2.28,-1.1l2.46,-0.02l0.92,0.6l1.35,-0.05Z",name:"Algeria"},US:{path:"M892.72,99.2l1.31,0.53l1.41,-0.37l1.89,0.98l1.89,0.42l-1.32,0.58l-2.9,-1.53l-2.08,0.22l-0.26,-0.15l0.07,-0.67ZM183.22,150.47l0.37,1.47l1.12,0.85l4.23,0.7l2.39,0.98l2.17,-0.38l1.85,0.5l-1.55,0.65l-3.49,2.61l-0.16,0.77l0.5,0.39l2.33,-0.61l1.77,1.02l5.15,-2.4l-0.31,0.65l0.25,0.56l1.36,0.38l1.71,1.16l4.7,-0.88l0.67,0.85l1.31,0.21l0.58,0.58l-1.34,0.17l-2.18,-0.32l-3.6,0.89l-2.71,3.25l0.35,0.9l0.59,-0.0l0.55,-0.6l-1.36,4.65l0.29,3.09l0.67,1.58l0.61,0.45l1.77,-0.44l1.6,-1.96l0.14,-2.21l-0.82,-1.96l0.11,-1.13l1.19,-2.37l0.44,-0.33l0.48,0.75l0.4,-0.29l0.4,-1.37l0.6,-0.47l0.24,-0.8l1.69,0.49l1.65,1.08l-0.03,2.37l-1.27,1.13l-0.0,1.13l0.87,0.36l1.66,-1.29l0.5,0.17l0.5,2.6l-2.49,3.75l0.17,0.61l1.54,0.62l1.48,0.17l1.92,-0.44l4.72,-2.15l2.16,-1.8l-0.05,-1.24l0.75,-0.22l3.92,0.36l2.12,-1.05l0.21,-0.4l-0.28,-1.48l3.27,-2.4l8.32,-0.02l0.56,-0.82l1.9,-0.77l0.93,-1.51l0.74,-2.37l1.58,-1.98l0.92,0.62l1.47,-0.47l0.8,0.66l-0.0,4.09l1.96,2.6l-2.34,1.31l-5.37,2.09l-1.83,2.72l0.02,1.79l0.83,1.59l0.54,0.23l-6.19,0.94l-2.2,0.89l-0.23,0.48l0.45,0.29l2.99,-0.46l-2.19,0.56l-1.13,0.0l-0.15,-0.32l-0.48,0.08l-0.76,0.82l0.22,0.67l0.32,0.06l-0.41,1.62l-1.27,1.58l-1.48,-1.07l-0.49,-0.04l-0.16,0.46l0.52,1.58l0.61,0.59l0.03,0.79l-0.95,1.38l-1.21,-1.22l-0.27,-2.27l-0.35,-0.35l-0.42,0.25l-0.48,1.27l0.33,1.41l-0.97,-0.27l-0.48,0.24l0.18,0.5l1.52,0.83l0.1,2.52l0.79,0.51l0.52,3.42l-1.42,1.88l-2.47,0.8l-1.71,1.66l-1.31,0.25l-1.27,1.03l-0.43,0.99l-2.69,1.78l-2.64,3.03l-0.45,2.12l0.45,2.08l0.85,2.38l1.09,1.9l0.04,1.2l1.16,3.06l-0.18,2.69l-0.55,1.43l-0.47,0.21l-0.89,-0.23l-0.49,-1.18l-0.87,-0.56l-2.75,-5.16l0.48,-1.68l-0.72,-1.78l-2.01,-2.38l-1.12,-0.53l-2.72,1.18l-1.47,-1.35l-1.57,-0.68l-2.99,0.31l-2.17,-0.3l-2.0,0.19l-1.15,0.46l-0.19,0.58l0.39,0.63l0.14,1.34l-0.84,-0.2l-0.84,0.46l-1.58,-0.07l-2.08,-1.44l-2.09,0.33l-1.91,-0.62l-3.73,0.84l-2.39,2.07l-2.54,1.22l-1.45,1.41l-0.61,1.38l0.34,3.71l-0.29,0.02l-3.5,-1.33l-1.25,-3.11l-1.44,-1.5l-2.24,-3.56l-1.76,-1.09l-2.27,-0.01l-1.71,2.07l-1.76,-0.69l-1.16,-0.74l-1.52,-2.98l-3.93,-3.16l-4.34,-0.0l-0.4,0.4l-0.0,0.74l-6.5,0.02l-9.02,-3.14l-0.34,-0.71l-5.7,0.49l-0.43,-1.29l-1.62,-1.61l-1.14,-0.38l-0.55,-0.88l-1.28,-0.13l-1.01,-0.77l-2.22,-0.27l-0.43,-0.3l-0.36,-1.58l-2.4,-2.83l-2.01,-3.85l-0.06,-0.9l-2.92,-3.26l-0.33,-2.29l-1.3,-1.66l0.52,-2.37l-0.09,-2.57l-0.78,-2.3l0.95,-2.82l0.61,-5.68l-0.47,-4.27l-1.46,-4.08l3.19,0.79l1.26,2.83l0.69,0.08l0.69,-1.14l-1.1,-4.79l68.76,-0.0l0.4,-0.4l0.14,-0.86ZM32.44,67.52l1.73,1.97l0.55,0.05l0.99,-0.79l3.65,0.24l-0.09,0.62l0.32,0.45l3.83,0.77l2.61,-0.43l5.19,1.4l4.84,0.43l1.89,0.57l3.42,-0.7l6.14,1.87l-0.03,38.06l0.38,0.4l2.39,0.11l2.31,0.98l3.9,3.99l0.55,0.04l2.4,-2.03l2.16,-1.04l1.2,1.71l3.95,3.14l4.09,6.63l4.2,2.29l0.06,1.83l-1.02,1.23l-1.16,-1.08l-2.04,-1.03l-0.67,-2.89l-3.28,-3.03l-1.65,-3.57l-6.35,-0.32l-2.82,-1.01l-5.26,-3.85l-6.77,-2.04l-3.53,0.3l-4.81,-1.69l-3.25,-1.63l-2.78,0.8l-0.28,0.46l0.44,2.21l-3.91,0.96l-2.26,1.27l-2.3,0.65l-0.27,-1.65l1.05,-3.42l2.49,-1.09l0.16,-0.6l-0.69,-0.96l-0.55,-0.1l-3.19,2.12l-1.78,2.56l-3.55,2.61l-0.04,0.61l1.56,1.52l-2.07,2.29l-5.11,2.57l-0.77,1.66l-3.76,1.77l-0.92,1.73l-2.69,1.38l-1.81,-0.22l-6.95,3.32l-3.97,0.91l4.85,-2.5l2.59,-1.86l3.26,-0.52l1.19,-1.4l3.42,-2.1l2.59,-2.27l0.42,-2.68l1.23,-2.1l-0.04,-0.46l-0.45,-0.11l-2.68,1.03l-0.63,-0.49l-0.53,0.03l-1.05,1.04l-1.36,-1.54l-0.66,0.08l-0.32,0.62l-0.58,-1.14l-0.56,-0.16l-2.41,1.42l-1.07,-0.0l-0.17,-1.75l0.3,-1.71l-1.61,-1.33l-3.41,0.59l-1.96,-1.63l-1.57,-0.84l-0.15,-2.21l-1.7,-1.43l0.82,-1.88l1.99,-2.12l0.88,-1.92l1.71,-0.24l2.04,0.51l1.87,-1.77l1.91,0.25l1.91,-1.23l0.17,-0.43l-0.47,-1.82l-1.07,-0.7l1.39,-1.17l0.12,-0.45l-0.39,-0.26l-1.65,0.07l-2.66,0.88l-0.75,0.78l-1.92,-0.8l-3.46,0.44l-3.44,-0.91l-1.06,-1.61l-2.65,-1.99l2.91,-1.43l5.5,-2.0l1.52,0.0l-0.26,1.62l0.41,0.46l5.29,-0.16l0.3,-0.65l-2.03,-2.59l-3.14,-1.68l-1.79,-2.12l-2.4,-1.83l-3.09,-1.24l1.04,-1.69l4.23,-0.14l3.36,-2.07l0.73,-2.27l2.39,-1.99l2.42,-0.52l4.65,-1.97l2.46,0.23l3.71,-2.35l3.5,0.89ZM37.6,123.41l-2.25,1.23l-0.95,-0.69l-0.29,-1.24l3.21,-1.63l1.42,0.21l0.67,0.7l-1.8,1.42ZM31.06,234.03l0.98,0.47l0.74,0.87l-1.77,1.07l-0.44,-1.53l0.49,-0.89ZM29.34,232.07l0.18,0.05l0.08,0.05l-0.16,0.03l-0.11,-0.14ZM25.16,230.17l0.05,-0.03l0.18,0.22l-0.13,-0.01l-0.1,-0.18ZM5.89,113.26l-1.08,0.41l-2.21,-1.12l1.53,-0.4l1.62,0.28l0.14,0.83Z",name:"United States"},LV:{path:"M489.16,122.85l0.96,0.66l0.22,1.65l0.68,1.76l-3.65,1.7l-2.23,-1.58l-1.29,-0.26l-0.68,-0.77l-2.42,0.34l-4.16,-0.23l-2.47,0.9l0.06,-1.98l1.13,-2.06l1.95,-1.02l2.12,2.58l2.01,-0.07l0.38,-0.33l0.44,-2.52l1.76,-0.53l3.06,1.7l2.15,0.07Z",name:"Latvia"},UY:{path:"M286.85,372.74l-0.92,1.5l-2.59,1.44l-1.69,-0.52l-1.42,0.26l-2.39,-1.19l-1.52,0.08l-1.27,-1.3l0.16,-1.5l0.56,-0.79l-0.02,-2.73l1.21,-4.74l1.19,-0.21l2.37,2.0l1.08,0.03l4.36,3.17l1.22,1.6l-0.96,1.5l0.61,1.4Z",name:"Uruguay"},LB:{path:"M510.37,198.01l-0.88,0.51l1.82,-3.54l0.62,0.08l0.22,0.61l-1.13,0.88l-0.65,1.47Z",name:"Lebanon"},LA:{path:"M689.54,248.53l-1.76,-0.74l-0.49,0.15l-0.94,1.46l-1.32,-0.64l0.62,-0.98l0.11,-2.17l-2.04,-2.42l-0.25,-2.65l-1.9,-2.1l-2.15,-0.31l-0.78,0.91l-1.12,0.06l-1.05,-0.4l-2.06,1.2l-0.04,-1.59l0.61,-2.68l-0.36,-0.49l-1.35,-0.1l-0.11,-1.23l-0.96,-0.88l1.96,-1.89l0.39,0.36l1.33,0.07l0.42,-0.45l-0.34,-2.66l0.7,-0.21l1.28,1.81l1.11,2.35l0.36,0.23l2.82,0.02l0.71,1.67l-1.39,0.65l-0.72,0.93l0.13,0.6l2.91,1.51l3.6,5.25l1.88,1.78l0.56,1.62l-0.35,1.96Z",name:"Lao PDR"},TW:{path:"M724.01,226.68l-0.74,1.48l-0.9,-1.52l-0.25,-1.74l1.38,-2.44l1.73,-1.74l0.64,0.44l-1.85,5.52Z",name:"Taiwan"},TT:{path:"M266.64,259.32l0.28,-1.16l1.13,-0.22l-0.06,1.2l-1.35,0.18Z",name:"Trinidad and Tobago"},TR:{path:"M513.21,175.47l3.64,1.17l3.05,-0.44l2.1,0.26l3.11,-1.56l2.46,-0.13l2.19,1.33l0.33,0.82l-0.22,1.33l0.25,0.44l2.28,1.13l-1.17,0.57l-0.21,0.45l0.75,3.2l-0.41,1.16l1.13,1.92l-0.55,0.22l-0.9,-0.67l-2.91,-0.37l-1.24,0.46l-4.23,0.41l-2.81,1.05l-1.91,0.01l-1.52,-0.53l-2.58,0.75l-0.66,-0.45l-0.62,0.3l-0.12,1.45l-0.89,0.84l-0.47,-0.67l0.79,-1.3l-0.41,-0.2l-1.43,0.23l-2.0,-0.63l-2.02,1.65l-3.51,0.3l-2.13,-1.53l-2.7,-0.1l-0.86,1.24l-1.38,0.27l-2.29,-1.44l-2.71,-0.01l-1.37,-2.65l-1.68,-1.52l1.07,-1.99l-0.09,-0.49l-1.27,-1.12l2.37,-2.41l3.7,-0.11l1.28,-2.24l4.49,0.37l3.21,-1.97l2.81,-0.82l3.99,-0.06l4.29,2.07ZM488.79,176.72l-1.72,1.31l-0.5,-0.88l1.37,-2.57l-0.7,-0.85l1.7,-0.63l1.8,0.34l0.46,1.17l1.76,0.78l-2.87,0.32l-1.3,1.01Z",name:"Turkey"},LK:{path:"M624.16,268.99l-1.82,0.48l-0.99,-1.67l-0.42,-3.46l0.95,-3.43l1.21,0.98l2.26,4.19l-0.34,2.33l-0.85,0.58Z",name:"Sri Lanka"},TN:{path:"M448.1,188.24l-1.0,1.27l-0.02,1.32l0.84,0.88l-0.28,2.09l-1.53,1.32l-0.12,0.42l0.48,1.54l1.42,0.32l0.53,1.11l0.9,0.52l-0.11,1.67l-3.54,2.64l-0.1,2.38l-0.58,0.3l-0.96,-4.45l-1.54,-1.25l-0.16,-0.78l-1.92,-1.56l-0.18,-1.76l1.51,-1.62l0.59,-2.34l-0.38,-2.78l0.42,-1.21l2.45,-1.05l1.29,0.26l-0.06,1.11l0.58,0.38l1.47,-0.73Z",name:"Tunisia"},TL:{path:"M734.55,307.93l-0.1,-0.97l4.5,-0.86l-2.82,1.28l-1.59,0.55Z",name:"Timor-Leste"},TM:{path:"M553.03,173.76l-0.04,0.34l-0.09,-0.22l0.13,-0.12ZM555.87,172.66l0.45,-0.1l1.48,0.74l2.06,2.43l4.07,-0.18l0.38,-0.51l-0.32,-1.19l1.92,-0.94l1.91,-1.59l2.94,1.39l0.43,2.47l1.19,0.67l2.58,-0.13l0.62,0.4l1.32,3.12l4.54,3.44l2.67,1.45l3.06,1.14l-0.04,1.05l-1.33,-0.75l-0.59,0.19l-0.32,0.84l-2.2,0.81l-0.46,2.13l-1.21,0.74l-1.91,0.42l-0.73,1.33l-1.56,0.31l-2.22,-0.94l-0.2,-2.17l-0.38,-0.36l-1.73,-0.09l-2.76,-2.46l-2.14,-0.4l-2.84,-1.48l-1.78,-0.27l-1.24,0.53l-1.57,-0.08l-2.0,1.69l-1.7,0.43l-0.36,-1.58l0.36,-2.98l-0.22,-0.4l-1.65,-0.84l0.54,-1.69l-0.34,-0.52l-1.22,-0.13l0.36,-1.64l2.22,0.59l2.2,-0.95l0.12,-0.65l-1.77,-1.74l-0.66,-1.57Z",name:"Turkmenistan"},TJ:{path:"M597.75,178.82l-2.54,-0.44l-0.47,0.34l-0.24,1.7l0.43,0.45l2.64,-0.22l3.18,0.95l4.39,-0.41l0.56,2.37l0.52,0.29l0.67,-0.24l1.11,0.49l0.21,2.13l-3.76,-0.21l-1.8,1.32l-1.76,0.74l-0.61,-0.58l0.21,-2.23l-0.64,-0.49l-0.07,-0.93l-1.36,-0.66l-0.45,0.07l-1.08,1.01l-0.55,1.48l-1.31,-0.05l-0.95,1.16l-0.9,-0.35l-1.86,0.74l1.26,-2.83l-0.54,-2.17l-1.67,-0.82l0.33,-0.66l2.18,-0.04l1.19,-1.63l0.76,-1.79l2.43,-0.5l-0.26,1.0l0.73,1.05Z",name:"Tajikistan"},LS:{path:"M491.06,363.48l-0.49,0.15l-1.49,-1.67l1.1,-1.43l2.19,-1.44l1.51,1.27l-0.98,1.82l-1.23,0.38l-0.62,0.93Z",name:"Lesotho"},TH:{path:"M670.27,255.86l-1.41,3.87l0.15,2.0l0.38,0.36l1.38,0.07l0.9,2.04l0.55,2.34l1.4,1.44l1.61,0.38l0.96,0.97l-0.5,0.64l-1.1,0.2l-0.34,-1.18l-2.04,-1.1l-0.63,0.23l-0.63,-0.62l-0.48,-1.3l-2.56,-2.63l-0.73,0.41l0.95,-3.89l2.16,-4.22ZM670.67,254.77l-0.92,-2.18l-0.26,-2.61l-2.14,-3.06l0.71,-0.49l0.89,-2.59l-3.61,-5.45l0.87,-0.51l1.05,-2.58l1.74,-0.18l2.6,-1.59l0.76,0.56l0.13,1.39l0.37,0.36l1.23,0.09l-0.51,2.28l0.05,2.42l0.6,0.34l2.43,-1.42l0.77,0.39l1.47,-0.07l0.71,-0.88l1.48,0.14l1.71,1.88l0.25,2.65l1.92,2.11l-0.1,1.89l-0.61,0.86l-2.22,-0.33l-3.5,0.64l-1.6,2.12l0.36,2.58l-1.51,-0.79l-1.84,-0.01l0.28,-1.52l-0.4,-0.47l-2.21,0.01l-0.4,0.37l-0.19,2.74l-0.34,0.93Z",name:"Thailand"},TF:{path:"M596.68,420.38l-3.2,0.18l-0.05,-1.26l0.39,-1.41l1.3,0.78l2.08,0.35l-0.52,1.36Z",name:"Fr. S. Antarctic Lands"},TG:{path:"M422.7,257.63l-0.09,1.23l1.53,1.52l0.08,1.09l0.5,0.65l-0.11,5.62l0.49,1.47l-1.31,0.35l-1.02,-2.13l-0.18,-1.12l0.53,-2.19l-0.63,-1.16l-0.22,-3.68l-1.01,-1.4l0.07,-0.28l1.37,0.03Z",name:"Togo"},TD:{path:"M480.25,235.49l0.12,9.57l-2.1,0.05l-1.14,1.89l-0.69,1.63l0.34,0.73l-0.66,0.91l0.24,0.89l-0.86,1.95l0.45,0.5l0.6,-0.1l0.34,0.64l0.03,1.38l0.9,1.04l-1.45,0.43l-1.27,1.03l-1.83,2.76l-2.16,1.07l-2.31,-0.15l-0.86,0.25l-0.26,0.49l0.17,0.61l-2.11,1.68l-2.85,0.87l-1.09,-0.57l-0.73,0.66l-1.12,0.1l-1.1,-3.12l-1.25,-0.64l-1.22,-1.22l0.29,-0.64l3.01,0.04l0.35,-0.6l-1.3,-2.2l-0.08,-3.31l-0.97,-1.66l0.22,-1.04l-0.38,-0.48l-1.22,-0.04l0.0,-1.25l-0.98,-1.07l0.96,-3.01l3.25,-2.65l0.13,-3.33l0.95,-5.18l0.52,-1.07l-0.1,-0.48l-0.91,-0.78l-0.2,-0.96l-0.8,-0.58l-0.55,-3.65l2.1,-1.2l19.57,9.83Z",name:"Chad"},LY:{path:"M483.48,203.15l-0.75,1.1l0.29,1.39l-0.6,1.83l0.73,2.14l0.0,24.12l-2.48,0.01l-0.41,0.85l-19.41,-9.76l-4.41,2.28l-1.37,-1.33l-3.82,-1.1l-1.14,-1.65l-1.98,-1.23l-1.22,0.32l-0.66,-1.11l-0.17,-1.26l-1.28,-1.69l0.87,-1.19l-0.07,-4.34l0.43,-2.27l-0.86,-3.45l1.13,-0.76l0.22,-1.16l-0.2,-1.03l3.48,-2.61l0.29,-1.94l2.45,0.8l1.18,-0.21l1.98,0.44l3.15,1.18l1.37,2.54l5.72,1.67l2.64,1.35l1.61,-0.72l1.29,-1.34l-0.44,-2.34l0.66,-1.13l1.67,-1.21l1.57,-0.35l3.14,0.53l1.08,1.28l3.99,0.78l0.36,0.54Z",name:"Libya"},AE:{path:"M550.76,223.97l1.88,-0.4l3.84,0.02l4.78,-4.75l0.19,0.36l0.26,1.58l-0.81,0.01l-0.39,0.35l-0.08,2.04l-0.81,0.63l-0.01,0.96l-0.66,0.99l-0.39,1.41l-7.08,-1.25l-0.7,-1.96Z",name:"United Arab Emirates"},VE:{path:"M240.68,256.69l0.53,0.75l-0.02,1.06l-1.07,1.78l0.95,2.0l0.42,0.22l1.4,-0.44l0.56,-1.83l-0.77,-1.17l-0.1,-1.47l2.82,-0.93l0.26,-0.49l-0.28,-0.96l0.3,-0.28l0.66,1.31l1.96,0.26l1.4,1.22l0.08,0.68l0.39,0.35l4.81,-0.22l1.49,1.11l1.92,0.31l1.67,-0.84l0.22,-0.6l3.44,-0.14l-0.17,0.55l0.86,1.19l2.19,0.35l1.67,1.1l0.37,1.86l0.41,0.32l1.55,0.17l-1.66,1.35l-0.22,0.92l0.65,0.97l-1.67,0.54l-0.3,0.4l0.04,0.99l-0.56,0.57l-0.01,0.55l1.85,2.27l-0.66,0.69l-4.47,1.29l-0.72,0.54l-3.69,-0.9l-0.71,0.27l-0.02,0.7l0.91,0.53l-0.08,1.54l0.35,1.58l0.35,0.31l1.66,0.17l-1.3,0.52l-0.48,1.13l-2.68,0.91l-0.6,0.77l-1.57,0.13l-1.17,-1.13l-0.8,-2.52l-1.25,-1.26l1.02,-1.23l-1.29,-2.95l0.18,-1.62l1.0,-2.21l-0.2,-0.49l-1.14,-0.46l-4.02,0.36l-1.82,-2.1l-1.57,-0.33l-2.99,0.22l-1.06,-0.97l0.25,-1.23l-0.2,-1.01l-0.59,-0.69l-0.29,-1.06l-1.08,-0.39l0.78,-2.79l1.9,-2.11Z",name:"Venezuela"},AF:{path:"M600.7,188.88l-1.57,1.3l-0.1,0.48l0.8,2.31l-1.09,1.04l-0.03,1.27l-0.48,0.71l-2.16,-0.08l-0.37,0.59l0.78,1.48l-1.38,0.69l-1.06,1.69l0.06,1.7l-0.65,0.52l-0.91,-0.21l-1.91,0.36l-0.48,0.77l-1.88,0.13l-1.4,1.56l-0.18,2.32l-2.91,1.02l-1.65,-0.23l-0.71,0.55l-1.41,-0.3l-2.41,0.39l-3.52,-1.17l1.96,-2.35l-0.21,-1.78l-0.3,-0.34l-1.63,-0.4l-0.19,-1.58l-0.75,-2.03l0.95,-1.36l-0.19,-0.6l-0.73,-0.28l1.47,-4.8l2.14,0.9l2.12,-0.36l0.74,-1.34l1.77,-0.39l1.54,-0.92l0.63,-2.31l1.87,-0.5l0.49,-0.81l0.94,0.56l2.13,0.11l2.55,0.92l1.95,-0.83l0.65,0.43l0.56,-0.13l0.69,-1.12l1.57,-0.08l0.72,-1.66l0.79,-0.74l0.8,0.39l-0.17,0.56l0.71,0.58l-0.08,2.39l1.11,0.95ZM601.37,188.71l1.73,-0.71l1.43,-1.18l4.03,0.35l-2.23,0.74l-4.95,0.8Z",name:"Afghanistan"},IQ:{path:"M530.82,187.47l0.79,0.66l1.26,-0.28l1.46,3.08l1.63,0.94l0.14,1.23l-1.22,1.05l-0.53,2.52l1.73,2.67l3.12,1.62l1.15,1.88l-0.38,1.85l0.39,0.48l0.41,-0.0l0.02,1.07l0.76,0.94l-2.47,-0.1l-1.71,2.44l-4.31,-0.2l-7.02,-5.48l-3.73,-1.94l-2.88,-0.73l-0.85,-2.87l5.45,-3.02l0.95,-3.43l-0.19,-1.96l1.27,-0.7l1.22,-1.7l0.87,-0.36l2.69,0.34Z",name:"Iraq"},IS:{path:"M384.14,88.06l-0.37,2.61l2.54,2.51l-2.9,2.75l-9.19,3.4l-9.25,-1.66l1.7,-1.22l-0.1,-0.7l-4.05,-1.47l2.96,-0.53l0.33,-0.43l-0.11,-1.2l-0.33,-0.36l-4.67,-0.85l1.28,-2.04l3.45,-0.56l3.77,2.72l0.44,0.02l3.64,-2.16l3.3,1.08l3.98,-2.16l3.58,0.26Z",name:"Iceland"},IR:{path:"M533.43,187.16l-1.27,-2.15l0.42,-0.98l-0.71,-3.04l1.03,-0.5l0.33,0.83l1.26,1.35l2.05,0.51l1.11,-0.16l2.89,-2.11l0.62,-0.14l0.39,0.46l-0.72,1.2l0.06,0.49l1.56,1.53l0.65,0.04l0.67,1.81l2.56,0.83l1.87,1.48l3.69,0.49l3.91,-0.76l0.47,-0.73l2.17,-0.6l1.66,-1.54l1.51,0.08l1.18,-0.53l1.59,0.24l2.83,1.48l1.88,0.3l2.77,2.47l1.77,0.18l0.18,1.99l-1.68,5.49l0.24,0.5l0.61,0.23l-0.82,1.48l0.8,2.18l0.19,1.71l0.3,0.34l1.63,0.4l0.15,1.32l-2.15,2.35l-0.01,0.53l2.21,3.03l2.34,1.24l0.06,2.14l1.24,0.72l0.11,0.69l-3.31,1.27l-1.08,3.03l-9.68,-1.68l-0.99,-3.05l-1.43,-0.73l-2.17,0.46l-2.47,1.26l-2.83,-0.82l-2.46,-2.02l-2.41,-0.8l-3.42,-6.06l-0.48,-0.2l-1.18,0.39l-1.44,-0.82l-0.5,0.08l-0.65,0.74l-0.97,-1.01l-0.02,-1.31l-0.71,-0.39l0.26,-1.81l-1.29,-2.11l-3.13,-1.63l-1.58,-2.43l0.5,-1.9l1.31,-1.26l-0.19,-1.66l-1.74,-1.1l-1.57,-3.3Z",name:"Iran"},AM:{path:"M536.99,182.33l-0.28,0.03l-1.23,-2.13l-0.93,0.01l-0.62,-0.66l-0.69,-0.07l-0.96,-0.81l-1.56,-0.62l0.19,-1.12l-0.26,-0.79l2.72,-0.36l1.09,1.01l-0.17,0.92l1.02,0.78l-0.47,0.62l0.08,0.56l2.04,1.23l0.04,1.4Z",name:"Armenia"},IT:{path:"M451.59,158.63l3.48,0.94l-0.21,1.17l0.3,0.83l-1.49,-0.24l-2.04,1.1l-0.21,0.39l0.13,1.45l-0.25,1.12l0.82,1.57l2.39,1.63l1.31,2.54l2.79,2.43l2.05,0.08l0.21,0.23l-0.39,0.33l0.09,0.67l4.05,1.97l2.17,1.76l-0.16,0.36l-1.17,-1.08l-2.18,-0.49l-0.44,0.2l-1.05,1.91l0.14,0.54l1.57,0.95l-0.19,0.98l-1.06,0.33l-1.25,2.34l-0.37,0.08l0.0,-0.33l1.0,-2.45l-1.73,-3.17l-1.12,-0.51l-0.88,-1.33l-1.51,-0.51l-1.27,-1.25l-1.75,-0.18l-4.12,-3.21l-1.62,-1.65l-1.03,-3.19l-3.53,-1.36l-1.3,0.51l-1.69,1.41l0.16,-0.72l-0.28,-0.47l-1.14,-0.33l-0.53,-1.96l0.72,-0.78l0.04,-0.48l-0.65,-1.17l0.8,0.39l1.4,-0.23l1.11,-0.84l0.52,0.35l1.19,-0.1l0.75,-1.2l1.53,0.33l1.36,-0.56l0.35,-1.14l1.08,0.32l0.68,-0.64l1.98,-0.44l0.42,0.82ZM459.19,184.75l-0.65,1.65l0.32,1.05l-0.31,0.89l-1.5,-0.85l-4.5,-1.67l0.19,-0.82l2.67,0.23l3.78,-0.48ZM443.93,176.05l1.18,1.66l-0.3,3.32l-1.06,-0.01l-0.77,0.73l-0.53,-0.44l-0.1,-3.37l-0.39,-1.22l1.04,0.01l0.92,-0.68Z",name:"Italy"},VN:{path:"M690.56,230.25l-2.7,1.82l-2.09,2.46l-0.63,1.95l4.31,6.45l2.32,1.65l1.43,1.94l1.11,4.59l-0.32,4.24l-1.93,1.54l-2.84,1.61l-2.11,2.15l-2.73,2.06l-0.59,-1.05l0.63,-1.53l-0.13,-0.47l-1.34,-1.04l1.51,-0.71l2.55,-0.18l0.3,-0.63l-0.82,-1.14l4.0,-2.07l0.31,-3.05l-0.57,-1.77l0.42,-2.66l-0.73,-1.97l-1.86,-1.76l-3.63,-5.29l-2.72,-1.46l0.36,-0.47l1.5,-0.64l0.21,-0.52l-0.97,-2.27l-0.37,-0.24l-2.83,-0.02l-2.24,-3.9l0.83,-0.4l4.39,-0.29l2.06,-1.31l1.15,0.89l1.88,0.4l-0.17,1.51l1.35,1.16l1.67,0.45Z",name:"Vietnam"},AR:{path:"M249.29,428.93l-2.33,-0.52l-5.83,-0.43l-0.89,-1.66l0.05,-2.37l-0.45,-0.4l-1.43,0.18l-0.67,-0.91l-0.2,-3.13l1.88,-1.47l0.79,-2.04l-0.25,-1.7l1.3,-2.68l0.91,-4.15l-0.22,-1.69l0.85,-0.45l0.2,-0.44l-0.27,-1.16l-0.98,-0.68l0.59,-0.92l-0.05,-0.5l-1.04,-1.07l-0.52,-3.1l0.97,-0.86l-0.42,-3.58l1.2,-5.43l1.38,-0.98l0.16,-0.43l-0.75,-2.79l-0.01,-2.43l1.78,-1.75l0.06,-2.57l1.43,-2.85l0.01,-2.58l-0.69,-0.74l-1.09,-4.52l1.47,-2.7l-0.18,-2.79l0.85,-2.35l1.59,-2.46l1.73,-1.64l0.05,-0.52l-0.6,-0.84l0.44,-0.85l-0.07,-4.19l2.7,-1.44l0.86,-2.75l-0.21,-0.71l1.76,-2.01l2.9,0.57l1.38,1.78l0.68,-0.08l0.87,-1.87l2.39,0.09l4.95,4.77l2.17,0.49l3.0,1.92l2.47,1.0l0.25,0.82l-2.37,3.93l0.23,0.59l5.39,1.16l2.12,-0.44l2.45,-2.16l0.5,-2.38l0.76,-0.31l0.98,1.2l-0.04,1.8l-3.67,2.51l-2.85,2.66l-3.43,3.88l-1.3,5.07l0.01,2.72l-0.54,0.73l-0.36,3.28l3.14,2.64l-0.16,2.11l1.4,1.11l-0.1,1.09l-2.29,3.52l-3.55,1.49l-4.92,0.6l-2.71,-0.29l-0.43,0.51l0.5,1.65l-0.49,2.1l0.38,1.42l-1.19,0.83l-2.36,0.38l-2.3,-1.04l-1.38,0.83l0.41,3.64l1.69,0.91l1.4,-0.71l0.36,0.76l-2.04,0.86l-2.01,1.89l-0.97,4.63l-2.34,0.1l-2.09,1.78l-0.61,2.75l2.46,2.31l2.17,0.63l-0.7,2.32l-2.83,1.73l-1.73,3.86l-2.17,1.22l-1.16,1.67l0.75,3.76l1.04,1.28ZM256.71,438.88l-2.0,0.15l-1.4,-1.22l-3.82,-0.1l-0.0,-5.83l1.6,3.05l3.26,2.07l3.08,0.78l-0.71,1.1Z",name:"Argentina"},AU:{path:"M705.8,353.26l0.26,0.04l0.17,-0.47l-0.48,-1.42l0.92,1.11l0.45,0.15l0.27,-0.39l-0.1,-1.56l-1.98,-3.63l1.09,-3.31l-0.24,-1.57l0.34,-0.62l0.38,1.06l0.43,-0.19l0.99,-1.7l1.91,-0.83l1.29,-1.15l1.81,-0.91l0.96,-0.17l0.92,0.26l1.92,-0.95l1.47,-0.28l1.03,-0.8l1.43,0.04l2.78,-0.84l1.36,-1.15l0.71,-1.45l1.41,-1.26l0.3,-2.58l1.27,-1.59l0.78,1.65l0.54,0.19l1.07,-0.51l0.15,-0.6l-0.73,-1.0l0.45,-0.71l0.78,0.39l0.58,-0.3l0.28,-1.82l1.87,-2.14l1.12,-0.39l0.28,-0.58l0.62,0.17l0.53,-0.73l1.87,-0.57l1.65,1.05l1.35,1.48l3.39,0.38l0.43,-0.54l-0.46,-1.23l1.05,-1.79l1.04,-0.61l0.14,-0.55l-0.25,-0.41l0.88,-1.17l1.31,-0.77l1.3,0.27l2.1,-0.48l0.31,-0.4l-0.05,-1.3l-0.92,-0.77l1.48,0.56l1.41,1.07l2.11,0.65l0.81,-0.2l1.4,0.7l1.69,-0.66l0.8,0.19l0.64,-0.33l0.71,0.77l-1.33,1.94l-0.71,0.07l-0.35,0.51l0.24,0.86l-1.52,2.35l0.12,1.05l2.15,1.65l1.97,0.85l3.04,2.36l1.97,0.65l0.55,0.88l2.72,0.85l1.84,-1.1l2.07,-5.97l-0.42,-3.59l0.3,-1.73l0.47,-0.87l-0.31,-0.68l1.09,-3.28l0.46,-0.47l0.4,0.71l0.16,1.51l0.65,0.52l0.16,1.04l0.85,1.21l0.12,2.38l0.9,2.0l0.57,0.18l1.3,-0.78l1.69,1.7l-0.2,1.08l0.53,2.2l0.39,1.3l0.68,0.48l0.6,1.95l-0.19,1.48l0.81,1.76l6.01,3.69l-0.11,0.76l1.38,1.58l0.95,2.77l0.58,0.22l0.72,-0.41l0.8,0.9l0.61,0.01l0.46,2.41l4.81,4.71l0.66,2.02l-0.07,3.31l1.14,2.2l-0.13,2.24l-1.1,3.68l0.03,1.64l-0.47,1.89l-1.05,2.4l-1.9,1.47l-1.72,3.51l-2.38,6.09l-0.24,2.82l-1.14,0.8l-2.85,0.15l-2.31,1.19l-2.51,2.25l-3.09,-1.57l0.3,-1.15l-0.54,-0.47l-1.5,0.63l-2.01,1.94l-7.12,-2.18l-1.48,-1.63l-1.14,-3.74l-1.45,-1.26l-1.81,-0.26l0.56,-1.18l-0.61,-2.1l-0.72,-0.1l-1.14,1.82l-0.9,0.21l0.63,-0.82l0.36,-1.55l0.92,-1.31l-0.13,-2.34l-0.7,-0.22l-2.0,2.34l-1.51,0.93l-0.94,2.01l-1.35,-0.81l-0.02,-1.52l-1.57,-2.04l-1.09,-0.88l0.24,-0.33l-0.14,-0.59l-3.21,-1.69l-1.83,-0.12l-2.54,-1.35l-4.58,0.28l-6.02,1.9l-2.53,-0.13l-2.62,1.41l-2.13,0.63l-1.49,2.6l-3.49,0.31l-2.29,-0.5l-3.48,0.43l-1.6,1.47l-0.81,-0.04l-2.37,1.63l-3.26,-0.1l-3.72,-2.21l0.04,-1.05l1.19,-0.46l0.49,-0.89l0.21,-2.97l-0.28,-1.64l-1.34,-2.86l-0.38,-1.47l0.05,-1.72l-0.95,-1.7l-0.18,-0.97l-1.01,-0.99l-0.29,-1.98l-1.13,-1.75ZM784.92,393.44l2.65,1.02l3.23,-0.96l1.09,0.14l0.15,3.06l-0.85,1.13l-0.17,1.63l-0.87,-0.24l-1.57,1.91l-1.68,-0.18l-1.4,-2.36l-0.37,-2.04l-1.39,-2.51l0.04,-0.8l1.15,0.18Z",name:"Australia"},IL:{path:"M507.76,203.05l0.4,-0.78l0.18,0.4l-0.33,1.03l0.52,0.44l0.68,-0.22l-0.86,3.6l-1.16,-3.32l0.59,-0.74l-0.03,-0.41ZM508.73,200.34l0.37,-1.02l0.64,0.0l0.52,-0.51l-0.49,1.53l-0.56,-0.24l-0.48,0.23Z",name:"Israel"},IN:{path:"M623.34,207.03l-1.24,1.04l-0.97,2.55l0.22,0.51l8.04,3.87l3.42,0.37l1.57,1.38l4.92,0.88l2.18,-0.04l0.38,-0.3l0.29,-1.24l-0.32,-1.64l0.14,-0.87l0.82,-0.31l0.45,2.48l2.28,1.02l1.77,-0.38l4.14,0.1l0.38,-0.36l0.18,-1.66l-0.5,-0.65l1.37,-0.29l2.25,-1.99l2.7,-1.62l1.93,0.62l1.8,-0.98l0.79,1.14l-0.68,0.91l0.26,0.63l2.42,0.36l0.09,0.47l-0.83,0.75l0.13,1.07l-1.52,-0.29l-3.24,1.86l-0.13,1.78l-1.32,2.14l-0.18,1.39l-0.93,1.82l-1.64,-0.5l-0.52,0.37l-0.09,2.63l-0.56,1.11l0.19,0.81l-0.53,0.27l-1.18,-3.73l-1.08,-0.27l-0.38,0.31l-0.24,1.0l-0.66,-0.66l0.54,-1.06l1.22,-0.34l1.15,-2.25l-0.24,-0.56l-1.57,-0.47l-4.34,-0.28l-0.18,-1.56l-0.35,-0.35l-1.11,-0.12l-1.91,-1.12l-0.56,0.17l-0.88,1.82l0.11,0.49l1.36,1.07l-1.09,0.69l-0.69,1.11l0.18,0.56l1.24,0.57l-0.32,1.54l0.85,1.94l0.36,2.01l-0.22,0.59l-4.58,0.52l-0.33,0.42l0.13,1.8l-1.17,1.36l-3.65,1.81l-2.79,3.03l-4.32,3.28l-0.18,1.27l-4.65,1.79l-0.77,2.16l0.64,5.3l-1.06,2.49l-0.01,3.94l-1.24,0.28l-1.14,1.93l0.39,0.84l-1.68,0.53l-1.04,1.83l-0.65,0.47l-2.06,-2.05l-2.1,-6.02l-2.2,-3.64l-1.05,-4.75l-2.29,-3.57l-1.76,-8.2l0.01,-3.11l-0.49,-2.53l-0.55,-0.29l-3.53,1.52l-1.53,-0.27l-2.86,-2.77l0.85,-0.67l0.08,-0.55l-0.74,-1.03l-2.67,-2.06l1.24,-1.32l5.34,0.01l0.39,-0.49l-0.5,-2.29l-1.42,-1.46l-0.27,-1.93l-1.43,-1.2l2.31,-2.37l3.05,0.06l2.62,-2.85l1.6,-2.81l2.4,-2.73l0.07,-2.04l1.97,-1.48l-0.02,-0.65l-1.93,-1.31l-0.82,-1.78l-0.8,-2.21l0.9,-0.89l3.59,0.65l2.92,-0.42l2.33,-2.19l2.31,2.85l-0.24,2.13l0.99,1.59l-0.05,0.82l-1.34,-0.28l-0.47,0.48l0.7,3.06l2.62,1.99l2.99,1.65Z",name:"India"},TZ:{path:"M495.56,296.42l2.8,-3.12l-0.02,-0.81l-0.64,-1.3l0.68,-0.52l0.14,-1.47l-0.76,-1.25l0.31,-0.11l2.26,0.03l-0.51,2.76l0.76,1.3l0.5,0.12l1.05,-0.53l1.19,-0.12l0.61,0.24l1.43,-0.62l0.1,-0.67l-0.71,-0.62l1.57,-1.7l8.65,4.86l0.32,1.53l3.34,2.33l-1.05,2.8l0.13,1.61l1.63,1.12l-0.6,1.76l-0.01,2.33l1.89,4.03l0.57,0.43l-1.46,1.08l-2.61,0.94l-1.43,-0.04l-1.06,0.77l-2.29,0.36l-2.87,-0.68l-0.83,0.07l-0.63,-0.75l-0.31,-2.78l-1.32,-1.35l-3.25,-0.77l-3.96,-1.58l-1.18,-2.41l-0.32,-1.75l-1.76,-1.49l0.42,-1.05l-0.44,-0.89l0.08,-0.96l-0.46,-0.58l0.06,-0.56Z",name:"Tanzania"},AZ:{path:"M539.29,175.73l1.33,0.32l1.94,-1.8l2.3,3.34l1.43,0.43l-1.26,0.15l-0.35,0.32l-0.8,3.14l-0.99,0.96l0.05,1.11l-1.26,-1.13l0.7,-1.18l-0.04,-0.47l-0.74,-0.86l-1.48,0.15l-2.34,1.71l-0.03,-1.27l-2.03,-1.35l0.47,-0.62l-0.08,-0.56l-1.03,-0.79l0.29,-0.43l-0.14,-0.58l-1.13,-0.86l1.89,0.68l1.69,0.06l0.37,-0.87l-0.81,-1.37l0.42,0.06l1.63,1.72ZM533.78,180.57l0.61,0.46l0.69,-0.0l0.59,1.15l-0.68,-0.15l-1.21,-1.45Z",name:"Azerbaijan"},IE:{path:"M405.08,135.42l0.35,2.06l-1.75,2.78l-4.22,1.88l-2.84,-0.4l1.73,-3.0l-1.18,-3.53l4.6,-3.74l0.32,1.15l-0.49,1.74l0.4,0.51l1.47,-0.04l1.6,0.6Z",name:"Ireland"},ID:{path:"M756.47,287.89l0.69,4.01l2.79,1.78l0.51,-0.1l2.04,-2.59l2.71,-1.43l2.05,-0.0l3.9,1.73l2.46,0.45l0.08,15.12l-1.75,-1.54l-2.54,-0.51l-0.88,0.71l-2.32,0.06l0.69,-1.33l1.45,-0.64l0.23,-0.46l-0.65,-2.74l-1.24,-2.21l-5.04,-2.29l-2.09,-0.23l-3.68,-2.27l-0.55,0.13l-0.65,1.07l-0.52,0.12l-0.55,-1.89l-1.21,-0.78l1.84,-0.62l1.72,0.05l0.39,-0.52l-0.21,-0.66l-0.38,-0.28l-3.45,-0.0l-1.13,-1.48l-2.1,-0.43l-0.52,-0.6l2.69,-0.48l1.28,-0.78l3.66,0.94l0.3,0.71ZM757.91,300.34l-0.62,0.82l-0.1,-0.8l0.59,-1.12l0.13,1.1ZM747.38,292.98l0.34,0.72l-1.22,-0.57l-4.68,-0.1l0.27,-0.62l2.78,-0.09l2.52,0.67ZM741.05,285.25l-0.67,-2.88l0.64,-2.01l0.41,0.86l1.21,0.18l0.16,0.7l-0.1,1.68l-0.84,-0.16l-0.46,0.3l-0.34,1.34ZM739.05,293.5l-0.5,0.44l-1.34,-0.36l-0.17,-0.37l1.73,-0.08l0.27,0.36ZM721.45,284.51l-0.19,1.97l2.24,2.23l0.54,0.02l1.27,-1.07l2.75,-0.5l-0.9,1.21l-2.11,0.93l-0.16,0.6l2.22,3.01l-0.3,1.07l1.36,1.74l-2.26,0.85l-0.28,-0.31l0.12,-1.19l-1.64,-1.34l0.17,-2.23l-0.56,-0.39l-1.67,0.76l-0.23,0.39l0.3,6.17l-1.1,0.25l-0.69,-0.47l0.64,-2.21l-0.39,-2.42l-0.39,-0.34l-0.8,-0.01l-0.58,-1.29l0.98,-1.6l0.35,-1.96l1.32,-3.87ZM728.59,296.27l0.38,0.49l-0.02,1.28l-0.88,0.49l-0.53,-0.47l1.04,-1.79ZM729.04,286.98l0.27,-0.05l-0.02,0.13l-0.24,-0.08ZM721.68,284.05l0.16,-0.32l1.89,-1.65l1.83,0.68l3.16,0.35l2.94,-0.1l2.39,-1.66l-1.73,2.13l-1.66,0.43l-2.41,-0.48l-4.17,0.13l-2.39,0.51ZM730.55,310.47l1.11,-1.93l2.03,-0.82l0.08,0.62l-1.45,1.67l-1.77,0.46ZM728.12,305.88l-0.1,0.38l-3.46,0.66l-2.91,-0.27l-0.0,-0.25l1.54,-0.41l1.66,0.73l1.67,-0.19l1.61,-0.65ZM722.9,310.24l-0.64,0.03l-2.26,-1.2l1.11,-0.24l1.78,1.41ZM716.26,305.77l0.88,0.51l1.28,-0.17l0.2,0.35l-4.65,0.73l0.39,-0.67l1.15,-0.02l0.75,-0.73ZM711.66,293.84l-0.38,-0.16l-2.54,1.01l-1.12,-1.44l-1.69,-0.13l-1.16,-0.75l-3.04,0.77l-1.1,-1.15l-3.31,-0.11l-0.35,-3.05l-1.35,-0.95l-1.11,-1.98l-0.33,-2.06l0.27,-2.14l0.9,-1.01l0.37,1.15l2.09,1.49l1.53,-0.48l1.82,0.08l1.38,-1.19l1.0,-0.18l2.28,0.67l2.26,-0.53l1.52,-3.64l1.01,-0.99l0.78,-2.57l4.1,0.3l-1.11,1.77l0.02,0.46l1.7,2.2l-0.23,1.39l2.07,1.71l-2.33,0.42l-0.88,1.9l0.1,2.05l-2.4,1.9l-0.06,2.45l-0.7,2.79ZM692.58,302.03l0.35,0.26l4.8,0.25l0.78,-0.97l4.17,1.09l1.13,1.68l3.69,0.45l2.13,1.04l-1.8,0.6l-2.77,-0.99l-4.8,-0.12l-5.24,-1.41l-1.84,-0.25l-1.11,0.3l-4.26,-0.97l-0.7,-1.14l-1.59,-0.13l1.18,-1.65l2.74,0.13l2.87,1.13l0.26,0.68ZM685.53,299.17l-2.22,0.04l-2.06,-2.03l-3.15,-2.01l-2.93,-3.51l-3.11,-5.33l-2.2,-2.12l-1.64,-4.06l-2.32,-1.69l-1.27,-2.07l-1.96,-1.5l-2.51,-2.65l-0.11,-0.66l4.81,0.53l2.15,2.38l3.31,2.74l2.35,2.66l2.7,0.17l1.95,1.59l1.54,2.17l1.59,0.95l-0.84,1.71l0.15,0.52l1.44,0.87l0.79,0.1l0.4,1.58l0.87,1.4l1.96,0.39l1.0,1.31l-0.6,3.01l-0.09,3.5Z",name:"Indonesia"},UA:{path:"M492.5,162.44l1.28,-2.49l1.82,0.19l0.66,-0.23l0.09,-0.71l-0.25,-0.75l-0.79,-0.72l-0.33,-1.21l-0.86,-0.62l-0.02,-1.19l-1.13,-0.86l-1.15,-0.19l-2.04,-1.0l-1.66,0.32l-0.66,0.47l-0.92,-0.0l-0.84,0.78l-2.48,0.7l-1.18,-0.71l-3.07,-0.36l-0.89,0.43l-0.24,-0.55l-1.11,-0.7l0.35,-0.93l1.26,-1.02l-0.54,-1.23l2.04,-2.43l1.4,-0.62l0.25,-1.19l-1.04,-2.39l0.83,-0.13l1.28,-0.84l1.8,-0.07l2.47,0.26l2.86,0.81l1.88,0.06l0.86,0.44l1.04,-0.41l0.77,0.66l2.18,-0.15l0.92,0.3l0.52,-0.34l0.15,-1.53l0.56,-0.54l2.85,-0.05l0.84,-0.72l3.04,-0.18l1.23,1.46l-0.48,0.77l0.21,1.03l0.36,0.32l1.8,0.14l0.93,2.08l3.18,1.15l1.94,-0.45l1.67,1.49l1.4,-0.03l3.35,0.96l0.02,0.54l-0.96,1.59l0.47,1.97l-0.26,0.7l-2.36,0.28l-1.29,0.89l-0.23,1.38l-1.83,0.27l-1.58,0.97l-2.41,0.21l-2.16,1.17l-0.21,0.38l0.34,2.26l1.23,0.75l2.13,-0.08l-0.14,0.31l-2.65,0.53l-3.23,1.69l-0.87,-0.39l0.42,-1.1l-0.25,-0.52l-2.21,-0.73l2.35,-1.06l0.12,-0.65l-0.93,-0.82l-3.62,-0.74l-0.13,-0.89l-0.46,-0.34l-2.61,0.59l-0.91,1.69l-1.71,2.04l-0.86,-0.4l-1.62,0.27Z",name:"Ukraine"},QA:{path:"M549.33,221.64l-0.76,-0.23l-0.14,-1.64l0.84,-1.29l0.47,0.52l0.04,1.34l-0.45,1.3Z",name:"Qatar"},MZ:{path:"M508.58,318.75l-0.34,-2.57l0.51,-2.05l3.55,0.63l2.5,-0.38l1.02,-0.76l1.49,0.01l2.74,-0.98l1.66,-1.2l0.5,9.24l0.41,1.23l-0.68,1.67l-0.93,1.71l-1.5,1.5l-5.16,2.28l-2.78,2.73l-1.02,0.53l-1.71,1.8l-0.98,0.57l-0.35,2.41l1.16,1.94l0.49,2.17l0.43,0.31l-0.06,2.06l-0.39,1.17l0.5,0.72l-0.25,0.73l-0.92,0.83l-5.12,2.39l-1.22,1.36l0.21,1.13l0.58,0.39l-0.11,0.72l-1.22,-0.01l-0.73,-2.97l0.42,-3.09l-1.78,-5.37l2.49,-2.81l0.69,-1.89l0.44,-0.43l0.28,-1.53l-0.39,-0.93l0.59,-3.65l-0.01,-3.26l-1.49,-1.16l-1.2,-0.22l-1.74,-1.17l-1.92,0.01l-0.29,-2.08l7.06,-1.96l1.28,1.09l0.89,-0.1l0.67,0.44l0.1,0.73l-0.51,1.29l0.19,1.81l1.75,1.83l0.65,-0.13l0.71,-1.65l1.17,-0.86l-0.26,-3.47l-1.05,-1.85l-1.04,-0.94Z",name:"Mozambique"}},height:440.70631074413296,width:900,projection:{type:"mill",centralMeridian:11.5}});var uR=Re('<div class="worldmap noselect svelte-lo9tgu"></div>');function DT(n,t){if(new.target)return wr({component:DT,...n});ar(t,!0);let e=An(t,"data",7),s=An(t,"year",7),i=An(t,"yearnum",7),r=qn(void 0);$l(()=>{if(!Tt(r))return;let l={};e().mw_countries.forEach(g=>{l[g._id]=g.sum});let u={};e().mw_countries.forEach(g=>{u[g._id]=cp(g.name)});let h={};e().mw_countries.forEach(g=>{h[g._id]=g.name}),new cR({selector:Tt(r),map:"world",visualizeData:{values:l,scale:["#007834","#00e054"]},regionStyle:{initial:{fill:"#303c44"},hover:{fill:"#40bcf4"}},showTooltip:!0,onRegionTooltipShow(g,m,y){let k=0,C=m.text();typeof l[y]<"u"&&(k=l[y],C=h[y]),m.text('<div class="box"><span class="ttTitle">'+C+'</span><span class="ttSubtitle">Films watched: '+k+'</span></div><div class="ttPointer"></div>',!0)},onRegionClick(g,m){window.innerWidth<=768||f(m)}});function f(g){typeof u[g]<"u"&&(s()===""?window.open(ir+e().username+"/films/country/"+u[g]+"/","_blank"):window.open(ir+e().username+"/films/diary/for/"+i()+"/country/"+u[g]+"/by/rating","_blank"))}});var o={get data(){return e()},set data(l){e(l),_n()},get year(){return s()},set year(l){s(l),_n()},get yearnum(){return i()},set yearnum(l){i(l),_n()},$set:Cr,$on:(l,u)=>kr(t,l,u)},a=uR();return Rm(a,l=>Ve(r,l),()=>Tt(r)),Ie(n,a),lr(o)}const hR=6048e5,p4=Symbol.for("constructDateFrom");function Om(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&p4 in n?n[p4](t):n instanceof Date?new n.constructor(t):new Date(t)}function qv(n,t){return Om(t||n,n)}function dR(n,t){const e=t?.weekStartsOn,s=qv(n,t?.in),i=s.getDay(),r=(i<e?7:0)+i-e;return s.setDate(s.getDate()-r),s.setHours(0,0,0,0),s}function Fm(n,t){return dR(n,{...t,weekStartsOn:1})}function fR(n,t){const e=qv(n,t?.in),s=e.getFullYear(),i=Om(e,0);i.setFullYear(s+1,0,4),i.setHours(0,0,0,0);const r=Fm(i),o=Om(e,0);o.setFullYear(s,0,4),o.setHours(0,0,0,0);const a=Fm(o);return e.getTime()>=r.getTime()?s+1:e.getTime()>=a.getTime()?s:s-1}function pR(n,t){const e=fR(n,t),s=Om(n,0);return s.setFullYear(e,0,4),s.setHours(0,0,0,0),Fm(s)}function gR(n,t){const e=qv(n,t?.in),s=+Fm(e)-+pR(e);return Math.round(s/hR)+1}var mR=Re('<span class="sottotitolo bigsotto"> </span>'),xR=Re('<span class="sottotitolo stelline"> </span> <span class="sottotitolo"> </span>',1),bR=Re("<div></div>"),vR=Re('<h1 class="mainTitle">A Life in Film</h1>'),yR=Re('<h1 class="mainTitle yearTitle"> </h1>'),wR=Re('<h3 class="arrowcheck">Do you like the project? The server and domain have management costs.<br/> Consider <a target="_blank" href="//ko-fi.com/giudimax">supporting me</a>.</h3>'),kR=Re('<div class="buttonstart"><span role="button" tabindex="0" id="updatebtn" class="clickable seeallbutton updatebutton"><span class="material-symbols-rounded icon">sync</span>Update</span>  <a class="clickable seeallbutton updatebutton recbutton" target="_blank"><span class="material-symbols-rounded icon">recommend</span>Film Recommendation</a></div>'),CR=Re('<a class="mostrap1"><div class="pannello p1"><div class="testo"> </div></div> <span class="number"> </span> <span class="text">Longest Streak</span></a>'),SR=Re('<div><span class="number"> </span> <span class="text">2+ Film Days</span></div>'),TR=Re('<a><span class="number"> </span> <span class="text">Films</span></a> <div><span class="number"> </span> <span class="text">Hours</span></div> <div><span class="number"> </span> <span class="text">Directors</span></div> <div><span class="number"> </span> <span class="text">Countries</span></div> <!> <!>',1),IR=Re('<div><span class="number"> </span> <span class="text">Diary Entries</span></div>   <div><span class="number"> </span> <span class="text">Reviews</span></div> <div><span class="number"> </span> <span class="text">Hours</span></div>',1),ER=Re('<span role="button" tabindex="0">Ratings</span>'),_R=Re('<span role="button" tabindex="0">Diary</span>'),AR=Re('<span class="years1"> </span> <span class="years1"> </span>',1),$R=Re('<span class="years2"> </span> <span class="years2"> </span>',1),NR=Re('<div class="years"><!></div>'),DR=Re('<div class="decade"><div class="decadeLeft"><a class="decadeTitle"> </a> <div><img src="images/greystar.webp" alt="greystar"/><span class="decadeAverage"> </span></div></div> <div class="decPosters"></div></div>'),RR=Re('<section class="sectionStats"><div class="sepline"><span>Highest rated decades</span> <div class="line"></div></div> <!></section>'),MR=Re('<section class="sectionStats"><div class="sepline"><span>By release year</span> <div class="line"></div> <span role="button" tabindex="0">Films</span> <!> <!></div> <div class="chart-container"><!></div> <!></section> <!>',1),OR=Re('<div class="singleFilm"><!> <div><span class="sottotitolo stellineBig"> </span></div></div>'),FR=Re('<div class="singleFilm"><!> <div><span class="sottotitolo stellineBig"> </span></div></div>'),PR=Re('<section class="sectionStats"><div class="sepline"><span>Highest rated films</span> <div class="line"></div> <span role="button" tabindex="0"> </span> <span role="button" tabindex="0">Older</span></div> <div><div></div> <div></div></div></section>'),LR=Re('<span class="sottotitolo bigsotto"> </span>'),BR=Re('<span class="sottotitolo bigsotto"> <span class="sottotitolo_milestones hideMobile"> </span></span>'),zR=Re('<div class="msx msx2"><span>Diary Milestones</span> <div class="filmList mw2"></div></div>'),WR=Re('<span class="sottotitolo bigsotto"> </span>'),VR=Re('<span class="sottotitolo bigsotto"> </span>'),UR=Re('<div class="msy"><div class="msx msxfull"><span>Most Watched</span> <div class="filmList mw2"></div></div></div>'),GR=Re('<!> <section class="sectionStats"><!> <div class="chart-container weekChartcontainer"><div id="watchedWeek" class="weekChart"></div></div> <div class="years"><span>Jan</span> <span>Dec</span></div> <div class="watchedDivided"><div class="wd1"><div class="wd1x"><span class="big"> </span> <span class="small">Films watched</span></div> <img src="images/arrow.jpg" alt="arrow"/> <div class="wd1x"><span class="big"> </span> <span class="small">Average per month</span></div> <img src="images/arrow.jpg" alt="arrow"/> <div class="wd1x"><span class="big"> </span> <span class="small">Average per week</span></div></div> <div class="wd2"><div id="watchedDayWeek" class="weekDayChart"></div></div></div></section> <section class="sectionStats"><!> <div class="msy"><div class="msx msx1"><span>First Film</span> <!></div> <!> <div class="msx msx1"><span>Last Film</span> <!></div></div> <!></section>',1),HR=Re('<span role="button" tabindex="0">Most Watched</span> <span role="button" tabindex="0">Highest Rated</span>',1),jR=Re('<div><a class="clickable label1"> </a> <div><div class="genresFilms"><span> </span></div> <div class="progressBarWithVal"></div></div></div>'),XR=Re('<div class="labels2"></div>'),qR=Re('<div><a class="clickable label1"> </a> <div><div class="genresFilms"><span> </span></div> <div class="progressBarWithVal"></div></div></div>'),KR=Re('<div class="labels2"></div>'),YR=Re(`<div><!> <div class="infoavg">Themes and nanogenres with at least four rated films are
                    included.</div></div>`),ZR=Re('<span role="button" tabindex="0">Most Watched</span> <span role="button" tabindex="0">Highest Rated</span>',1),JR=Re('<a class="clickable label2"><span class="leftText"> </span> <span class="bold right"> </span> <div class="labcontainer"></div></a>'),QR=Re('<div class="labels"></div>'),tM=Re('<a class="clickable label2"><span class="leftText"> </span> <span class="bold right"> </span> <div class="labcontainer"></div></a>'),eM=Re('<div class="labels"></div>'),nM=Re(`<div><!> <div class="infoavg">Themes and nanogenres with at least three rated films are
                    included.</div></div>`),sM=Re('<div class="donut"><a class="hole"><span class="listtitle"> </span> <span class="listperc"> </span> <span class="listnum"> </span></a></div>'),iM=Re('<span role="button" tabindex="0">Complete</span> <span role="button" tabindex="0">Almost Complete</span>',1),rM=Re('<img class="lazy" src="images/poster_70.jpg" alt=""/>'),oM=Re('<div class="singleCollection"><a class="threeposters"></a> <span><a class="name"> </a> </span></div>'),aM=Re("<div></div>"),lM=Re('<section class="sectionStats"><!> <!> <div class="noflex"><a class="clickable seeallbutton">see in diary</a></div></section>'),cM=Re('<section class="sectionStats"><!> <!></section> <section class="sectionStats"><!> <!></section>',1),uM=Re('<section class="sectionStats"><!> <div class="pielists"></div></section> <section class="sectionStats"><!> <div class="collections"></div></section> <!> <!>',1),hM=Re('<div class="ratingSpreadsection"><img src="images/1stars.png" alt="1star"/> <div id="ratingSpread" class="ratingSpread"></div> <img src="images/5stars.png" alt="5stars"/></div> <span class="linetitle">Rating Spread</span>',1),dM=Re('<section class="sectionStats"><!> <div class="breakdown"><div class="piecharts"><div class="piechart"><div class="legend"><span class="green"> </span> <span>Older</span></div> <div id="currentYearpie" class="piech2"></div></div> <div class="piechart"><div class="legend"><span class="green">Watches</span> <span>Re-watches</span></div> <div id="rewatchpie" class="piech2"></div></div> <div class="piechart"><div class="legend"><span class="green">Reviewed</span> <span>Not Reviewed</span></div> <div id="reviewspie" class="piech2"></div></div></div> <!></div></section>'),fM=Re('<span role="button" tabindex="0">Highest Rated</span>'),pM=Re('<span role="button" tabindex="0">Most Watched</span> <!>',1),gM=Re('<div class="noflex"><span role="button" tabindex="0" class="clickable seeallbutton">see more</span></div>'),mM=Re("<section><div></div> <!></section>"),xM=Re('<section class="sectionStats"><!> <div></div></section>'),bM=Re('<span role="button" tabindex="0">Highest Rated</span>'),vM=Re('<span role="button" tabindex="0">Most Watched</span> <!>',1),yM=Re('<div class="crew-item"><a class="clickable"> </a> <span class="sottotitolo"> </span></div>'),wM=Re('<div class="role"><span class="titlerole"> </span> <!></div>'),kM=Re('<div class="noflex"><span role="button" tabindex="0" class="clickable seeallbutton">see more</span></div>'),CM=Re('<section class="crewbis"><!> <!></section>'),SM=Re('<img src="images/orangestar.jpg" alt="star"/> <span class="sottotitolo stellamedia"> </span>',1),TM=Re('<div class="sottofilm"><!></div>'),IM=Re('<section class="sectionStats"><!> <div class="highLow"></div></section> <section class="sectionStats"><!> <!></section> <section class="sectionStats"><!> <!></section>',1),EM=Re('<!> <div class="content" id="content"><!> <section class="mainTitlesec"><div><div class="mainT"><!></div> <svg class="pattern -left" height="390" role="presentation" viewBox="0 0 320 390" width="320" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g transform="translate(318 70)"><rect fill="#00E054" height="80" rx="2" width="4" y="86"></rect><rect fill="#40BCF4" height="77" rx="2" width="4"></rect><rect fill="#FF8000" height="32" rx="2" width="4" y="202"></rect><rect fill="#FF8000" height="4" rx="2" width="4" y="238"></rect></g><g transform="translate(298 121)"><rect fill="#00E054" height="90" rx="2" width="4" y="55"></rect><rect fill="#40BCF4" height="48" rx="2" width="4"></rect><rect fill="#FF8000" height="22" rx="2" width="4" y="169"></rect></g><g transform="translate(278 111)"><rect fill="#00E054" height="70" rx="2" width="4" y="66"></rect><rect fill="#40BCF4" height="28" rx="2" width="4"></rect><rect fill="#FF8000" height="52" rx="2" width="4" y="152"></rect></g><g transform="translate(258 84)"><rect fill="#00E054" height="90" rx="2" width="4" y="78"></rect><rect fill="#FF8000" height="52" rx="2" width="4" y="201"></rect><rect fill="#40BCF4" height="60" rx="2" width="4"></rect></g><g transform="translate(238 80)"><rect fill="#00E054" height="90" rx="2" width="4" y="96"></rect><rect fill="#00E054" height="20" rx="2" width="4" y="68"></rect><rect fill="#40BCF4" height="47" rx="2" width="4"></rect><rect fill="#FF8000" height="32" rx="2" width="4" y="212"></rect></g><g transform="translate(218 96)"><rect fill="#00E054" height="70" rx="2" width="4" y="48"></rect><rect fill="#40BCF4" height="18" rx="2" width="4" y="12"></rect><rect fill="#40BCF4" height="4" rx="2" width="4"></rect><rect fill="#FF8000" height="22" rx="2" width="4" y="144"></rect></g><g transform="translate(198 111)"><rect fill="#00E054" height="60" rx="2" width="4" y="46"></rect><rect fill="#00E054" height="4" rx="2" width="4" y="114"></rect><rect fill="#40BCF4" height="28" rx="2" width="4"></rect><rect fill="#FF8000" height="42" rx="2" width="4" y="142"></rect></g><g transform="translate(178 40)"><rect fill="#00E054" height="100" rx="2" width="4" y="102"></rect><rect fill="#FF8000" height="12" rx="2" width="4" y="210"></rect><rect fill="#40BCF4" height="70" rx="2" width="4"></rect></g><g transform="translate(158 86)"><rect fill="#00E054" height="80" rx="2" width="4" y="36"></rect><rect fill="#40BCF4" height="28" rx="2" width="4"></rect><rect fill="#FF8000" height="32" rx="2" width="4" y="132"></rect></g><g transform="translate(138 86)"><rect fill="#00E054" height="80" rx="2" width="4" y="36"></rect><rect fill="#40BCF4" height="28" rx="2" width="4"></rect><rect fill="#FF8000" height="32" rx="2" width="4" y="132"></rect></g><g transform="translate(118 111)"><rect fill="#00E054" height="80" rx="2" width="4" y="36"></rect><rect fill="#40BCF4" height="28" rx="2" width="4"></rect><rect fill="#FF8000" height="32" rx="2" width="4" y="132"></rect></g><g transform="translate(98 82)"><rect fill="#00E054" height="100" rx="2" width="4" y="102"></rect><rect fill="#FF8000" height="12" rx="2" width="4" y="210"></rect><rect fill="#40BCF4" height="70" rx="2" width="4"></rect></g><g transform="translate(78 74)"><rect fill="#00E054" height="170" rx="2" width="4" y="51"></rect><rect fill="#40BCF4" height="4" rx="2" width="4"></rect><rect fill="#40BCF4" height="20" rx="2" width="4" y="23"></rect><rect fill="#FF8000" height="34" rx="2" width="4" y="246"></rect></g><g transform="translate(58 127)"><rect fill="#00E054" height="40" rx="2" width="4" y="64"></rect><rect fill="#FF8000" height="74" rx="2" width="4" y="144"></rect><rect fill="#40BCF4" height="20" rx="2" width="4"></rect></g><g transform="translate(38 77)"><rect fill="#00E054" height="90" rx="2" width="4" y="104"></rect><rect fill="#FF8000" height="64" rx="2" width="4" y="204"></rect><rect fill="#40BCF4" height="24" rx="2" width="4"></rect><rect fill="#40BCF4" height="50" rx="2" width="4" y="32"></rect></g><g transform="translate(18 117)"><rect fill="#00E054" height="70" rx="2" width="4" y="84"></rect><rect fill="#FF8000" height="44" rx="2" width="4" y="184"></rect><rect fill="#FF8000" height="4" rx="2" width="4" y="232"></rect><rect fill="#40BCF4" height="30" rx="2" width="4"></rect></g><g transform="translate(-2 127)"><rect fill="#00E054" height="76" rx="2" width="4" y="42"></rect><rect fill="#FF8000" height="44" rx="2" width="4" y="194"></rect><rect fill="#40BCF4" height="10" rx="2" width="4"></rect></g></g></svg> <svg class="pattern -right" height="390" role="presentation" viewBox="0 0 320 390" width="320" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g transform="translate(318 63)"><rect fill="#00E054" height="80" rx="2" width="4" y="67"></rect><rect fill="#40BCF4" height="58" rx="2" width="4"></rect><rect fill="#FF8000" height="62" rx="2" width="4" y="172"></rect></g><g transform="translate(298 88)"><rect fill="#00E054" height="70" rx="2" width="4" y="59"></rect><rect fill="#40BCF4" height="28" rx="2" width="4"></rect><rect fill="#FF8000" height="42" rx="2" width="4" y="162"></rect></g><g transform="translate(278 78)"><rect fill="#00E054" height="50" rx="2" width="4" y="86"></rect><rect fill="#40BCF4" height="70" rx="2" width="4"></rect><rect fill="#FF8000" height="60" rx="2" width="4" y="174"></rect></g><g transform="translate(258 94)"><rect fill="#00E054" height="99" rx="2" width="4" y="70"></rect><rect fill="#40BCF4" height="48" rx="2" width="4"></rect><rect fill="#FF8000" height="30" rx="2" width="4" y="196"></rect></g><g transform="translate(238 83)"><rect fill="#00E054" height="80" rx="2" width="4" y="104"></rect><rect fill="#40BCF4" height="58" rx="2" width="4"></rect><rect fill="#FF8000" height="32" rx="2" width="4" y="192"></rect></g><g transform="translate(218 108)"><rect fill="#00E054" height="40" rx="2" width="4" y="79"></rect><rect fill="#40BCF4" height="48" rx="2" width="4"></rect><rect fill="#FF8000" height="62" rx="2" width="4" y="152"></rect><rect fill="#FF8000" height="4" rx="2" width="4" y="222"></rect></g><g transform="translate(198 78)"><rect fill="#00E054" height="60" rx="2" width="4" y="112"></rect><rect fill="#40BCF4" height="80" rx="2" width="4"></rect><rect fill="#FF8000" height="30" rx="2" width="4" y="184"></rect><rect fill="#FF8000" height="10" rx="2" width="4" y="222"></rect></g><g transform="translate(178 64)"><rect fill="#00E054" height="119" rx="2" width="4" y="100"></rect><rect fill="#40BCF4" height="68" rx="2" width="4"></rect><rect fill="#FF8000" height="10" rx="2" width="4" y="226"></rect></g><g transform="translate(158 91)"><rect fill="#00E054" height="80" rx="2" width="4" y="88"></rect><rect fill="#40BCF4" height="28" rx="2" width="4"></rect><rect fill="#FF8000" height="32" rx="2" width="4" y="184"></rect></g><g opacity=".8" transform="translate(138 100)"><rect fill="#00E054" height="50" rx="2" width="4" y="63"></rect><rect fill="#40BCF4" height="28" rx="2" width="4"></rect><rect fill="#FF8000" height="82" rx="2" width="4" y="138"></rect></g><g transform="translate(118 100)"><rect fill="#00E054" height="50" rx="2" width="4" y="66"></rect><rect fill="#40BCF4" height="28" rx="2" width="4"></rect><rect fill="#FF8000" height="32" rx="2" width="4" y="172"></rect></g><g transform="translate(98 110)"><rect fill="#00E054" height="30" rx="2" width="4" y="66"></rect><rect fill="#40BCF4" height="38" rx="2" width="4"></rect><rect fill="#FF8000" height="42" rx="2" width="4" y="131"></rect><rect fill="#FF8000" height="12" rx="2" width="4" y="182"></rect></g><g transform="translate(78 107)"><rect fill="#00E054" height="60" rx="2" width="4" y="46"></rect><rect fill="#40BCF4" height="10" rx="2" width="4"></rect><rect fill="#FF8000" height="32" rx="2" width="4" y="149"></rect></g><g transform="translate(58 76)"><rect fill="#00E054" height="60" rx="2" width="4" y="63"></rect><rect fill="#40BCF4" height="28" rx="2" width="4" y="18"></rect><rect fill="#40BCF4" height="10" rx="2" width="4"></rect><rect fill="#FF8000" height="36" rx="2" width="4" y="185"></rect></g><g transform="translate(38 39)"><rect fill="#00E054" height="74" rx="2" width="4" y="83"></rect><rect fill="#40BCF4" height="77" rx="2" width="4"></rect><rect fill="#FF8000" height="22" rx="2" width="4" y="214"></rect></g><g transform="translate(18 81)"><rect fill="#00E054" height="70" rx="2" width="4" y="56"></rect><rect fill="#40BCF4" height="28" rx="2" width="4"></rect><rect fill="#FF8000" height="42" rx="2" width="4" y="172"></rect></g><g transform="translate(-2 101)"><rect fill="#00E054" height="80" rx="2" width="4" y="36"></rect><rect fill="#40BCF4" height="10" rx="2" width="4"></rect><rect fill="#FF8000" height="72" rx="2" width="4" y="124"></rect></g></g></svg></div> <div class="mainTitlesecBak"></div> <div class="mainTitlesecFade"></div> <!> <div class="mainSubtitle"><span><a target="_blank" class="clickable"> </a> </span></div> <!> <div class="numbersStats"><!></div></section> <!> <section class="sectionStats"><!> <div></div> <!></section> <section class="sectionStats"><!> <div></div> <!></section> <!> <!> <section class="sectionStats"><!> <!></section> <!> <section class="wMap noselect"><span class="wmTitle">World Map</span> <!></section></div>',1);function Kv(n,t){if(new.target)return wr({component:Kv,...n});ar(t,!0);const e=(Me,ze=aD,Ue)=>{let Ge=y1(()=>cD(Ue?.(),""));var Ze=bR();Ps(Ze,21,()=>Bo(ze()),Fs,(tn,an)=>{const ln=Ki(()=>Tt(an)._id||Tt(an).uri);{let We=Ki(()=>Tt(an).img||Tt(an).poster),fn=Ki(()=>Tt(Ge)?`${Tt(Ge)}${Tt(ln)}${Tt(Ge).endsWith("activity"),""}`:`${ir}film/${Tt(ln)}`);nh(tn,{get uri(){return Tt(ln)},get poster(){return Tt(We)},get link(){return Tt(fn)},children:(Yn,On)=>{var xn=Mr(),hn=Ss(xn);{var Nn=on=>{var Sn=mR(),jn=Ht(Sn);Lt(Sn),un(()=>nn(jn,`${(Tt(an).sum||Tt(an).watches)??""} times`)),Ie(on,Sn)},Xe=on=>{var Sn=Mr(),jn=Ss(Sn);{var zn=gn=>{var Zn=xR(),as=Ss(Zn),ls=Ht(as,!0);Lt(as);var In=pe(as,2),gs=Ht(In);Lt(In),un(pt=>{nn(ls,pt),nn(gs,`vs ${Tt(an).avg??""}`)},[()=>ub(Tt(an).r)]),Ie(gn,Zn)};En(jn,gn=>{Tt(an).r!==void 0&&gn(zn)},!0)}Ie(on,Sn)};En(hn,on=>{ze()===s().mostWatched?on(Nn):on(Xe,!1)})}Ie(Yn,xn)},$$slots:{default:!0}})}}),Lt(Ze),un(()=>Os(Ze,1,`filmList ${ze()===s().mostWatched?"hideLast2":"hideLast"}`)),Ie(Me,Ze)};let s=An(t,"data",7),i=An(t,"year",7),r=An(t,"yearnum",7),o=qn(!1),a=qn(void 0),l=qn(void 0),u=qn("releaseYear"),h=qn("currentYearHRF"),f=qn("MWGCL"),g=qn("MWTN"),m=qn("complete"),y=qn("Watch"),k=qn("Watch"),C=qn("mw"),S=qn(!1),$=qn(!1),D=qn(!1);const R=new Date().getFullYear(),V=new Date;new Date(V.getFullYear(),V.getMonth()-1,1),kp(()=>{if(R===r()){const Me=new Date;Ve(l,gR(Me),!0),Ve(a,Me.getUTCMonth()+1)}else Ve(a,12),Ve(l,52)});function E(Me,ze){Me==="releaseYear"&&Ve(u,ze,!0),Me==="hrf"&&Ve(h,ze,!0),Me==="gcl"&&Ve(f,ze,!0),Me==="tn"&&Ve(g,ze,!0),Me==="collections"&&Ve(m,ze,!0),Me==="actor"&&Ve(y,ze,!0),Me==="director"&&Ve(k,ze,!0),Me==="crew"&&Ve(C,ze,!0)}async function q(Me){if(!Me)return;const ze=Me.dataset.tmdb,Ue=Me.dataset.isLoaded;if(!(!ze||Ue))try{const Ge=await fetch("https://api.themoviedb.org/3/person/"+ze+"?api_key="+Mm);if(Ge.ok){const Ze=await Ge.json();Ze.profile_path!==null&&(Me.src="https://www.themoviedb.org/t/p/w235_and_h235_face/"+Ze.profile_path)}Me.dataset.isLoaded="true"}catch(Ge){console.error("Error fetching person data:",Ge)}}function X(){const Me=document.querySelectorAll(".holeperson"),ze=new IntersectionObserver(Ue=>{Ue.forEach(Ge=>{Ge.isIntersecting&&(q(Ge.target),ze.unobserve(Ge.target))})},{root:null,rootMargin:"0px",threshold:.1});Me.forEach(Ue=>ze.observe(Ue))}function B(){localStorage.clear(),window.location.search=""}$l(()=>{Ve(o,window.innerWidth<=768),X()});var U={get data(){return s()},set data(Me){s(Me),_n()},get year(){return i()},set year(Me){i(Me),_n()},get yearnum(){return r()},set yearnum(Me){r(Me),_n()},$set:Cr,$on:(Me,ze)=>kr(t,Me,ze)},K=EM(),Y=Ss(K);_T(Y,{get data(){return s()}});var ct=pe(Y,2),j=Ht(ct);AT(j,{get data(){return s()},get year(){return i()}});var ht=pe(j,2),It=Ht(ht),yt=Ht(It),Ot=Ht(yt);{var Ct=Me=>{var ze=vR();Ie(Me,ze)},Gt=Me=>{var ze=yR(),Ue=Ht(ze,!0);Lt(ze),un(()=>nn(Ue,r())),Ie(Me,ze)};En(Ot,Me=>{i()===""?Me(Ct):Me(Gt,!1)})}Lt(yt),Ys(4),Lt(It);var vt=pe(It,6);{var at=Me=>{var ze=wR();Ie(Me,ze)};En(vt,Me=>{i()===""&&Me(at)})}var Pt=pe(vt,2),jt=Ht(Pt),Ut=Ht(jt),me=Ht(Ut,!0);Lt(Ut);var Ee=pe(Ut);Lt(jt),Lt(Pt);var le=pe(Pt,2);{var ce=Me=>{var ze=kR(),Ue=Ht(ze);Ue.__click=B,Ue.__keydown=Ze=>Ze.key==="Enter"&&B();var Ge=pe(Ue,2);Lt(ze),un(()=>rs(Ge,"href",`/?username=${s().username??""}&rec`)),Ie(Me,ze)};En(le,Me=>{i()===""&&Me(ce)})}var De=pe(le,2),ae=Ht(De);{var Oe=Me=>{var ze=TR(),Ue=Ss(ze),Ge=Ht(Ue),Ze=Ht(Ge,!0);Lt(Ge),Ys(2),Lt(Ue);var tn=pe(Ue,2),an=Ht(tn),ln=Ht(an,!0);Lt(an),Ys(2),Lt(tn);var We=pe(tn,2),fn=Ht(We),Yn=Ht(fn,!0);Lt(fn),Ys(2),Lt(We);var On=pe(We,2),xn=Ht(On),hn=Ht(xn,!0);Lt(xn),Ys(2),Lt(On);var Nn=pe(On,2);{var Xe=jn=>{var zn=CR(),gn=Ht(zn),Zn=Ht(gn),as=Ht(Zn);Lt(Zn),Lt(gn);var ls=pe(gn,2),In=Ht(ls);Lt(ls),Ys(2),Lt(zn),un(()=>{rs(zn,"href",`//letterboxd.com/${s().username??""}/films/diary/for/${s().streak.year??""}/${s().streak.month??""}/`),nn(as,`At least one film per week, starting ${s().streak.monthName??""}
                                ${s().streak.year??""}`),nn(In,`${s().streak.max??""}w`)}),Ie(jn,zn)};En(Nn,jn=>{"streak"in s()&&jn(Xe)})}var on=pe(Nn,2);{var Sn=jn=>{var zn=SR(),gn=Ht(zn),Zn=Ht(gn,!0);Lt(gn),Ys(2),Lt(zn),un(()=>nn(Zn,s()["2+filmDays"])),Ie(jn,zn)};En(on,jn=>{"2+filmDays"in s()&&jn(Sn)})}un(()=>{rs(Ue,"href",`//letterboxd.com/${s().username??""}/films`),nn(Ze,s().totalFilms),nn(ln,s().totalRuntime),nn(Yn,s().totalDirectors),nn(hn,s().totalCountries)}),Ie(Me,ze)},Le=Me=>{var ze=IR(),Ue=Ss(ze),Ge=Ht(Ue),Ze=Ht(Ge,!0);Lt(Ge),Ys(2),Lt(Ue);var tn=pe(Ue,2),an=Ht(tn),ln=Ht(an,!0);Lt(an),Ys(2),Lt(tn);var We=pe(tn,2),fn=Ht(We),Yn=Ht(fn,!0);Lt(fn),Ys(2),Lt(We),un(()=>{nn(Ze,s().total),nn(ln,s().reviews),nn(Yn,s().totalRuntime)}),Ie(Me,ze)};En(ae,Me=>{i()===""?Me(Oe):Me(Le,!1)})}Lt(De),Lt(ht);var J=pe(ht,2);{var Mt=Me=>{var ze=MR(),Ue=Ss(ze),Ge=Ht(Ue),Ze=pe(Ht(Ge),4);Ze.__click=()=>E("releaseYear","releaseYear"),Ze.__keydown=Xe=>Xe.key==="Enter"&&E("releaseYear","releaseYear");var tn=pe(Ze,2);{var an=Xe=>{var on=ER();on.__click=()=>E("releaseYear","ratingYear"),on.__keydown=Sn=>Sn.key==="Enter"&&E("releaseYear","ratingYear"),un(()=>Os(on,1,`clickable ${Tt(u)==="ratingYear"?"active":""}`)),Ie(Xe,on)};En(tn,Xe=>{s().ru&&Xe(an)})}var ln=pe(tn,2);{var We=Xe=>{var on=_R();on.__click=()=>E("releaseYear","diaryYear"),on.__keydown=Sn=>Sn.key==="Enter"&&E("releaseYear","diaryYear"),un(()=>Os(on,1,`clickable ${Tt(u)==="diaryYear"?"active":""}`)),Ie(Xe,on)};En(ln,Xe=>{Qg(s().logsPerYear)>0&&Xe(We)})}Lt(Ge);var fn=pe(Ge,2),Yn=Ht(fn);NT(Yn,{get data(){return s()},get type(){return Tt(u)}}),Lt(fn);var On=pe(fn,2);{var xn=Xe=>{var on=NR(),Sn=Ht(on);{var jn=gn=>{var Zn=AR(),as=Ss(Zn),ls=Ht(as,!0);Lt(as);var In=pe(as,2),gs=Ht(In,!0);Lt(In),un(pt=>{nn(ls,s().years[0]._id),nn(gs,pt)},[()=>u4(s().years)._id]),Ie(gn,Zn)},zn=gn=>{var Zn=Mr(),as=Ss(Zn);{var ls=In=>{var gs=$R(),pt=Ss(gs),kt=Ht(pt,!0);Lt(pt);var mt=pe(pt,2),ut=Ht(mt,!0);Lt(mt),un(bt=>{nn(kt,s().logsPerYear[0]._id),nn(ut,bt)},[()=>u4(s().logsPerYear)._id]),Ie(In,gs)};En(as,In=>{s().logsPerYear.length>0&&In(ls)},!0)}Ie(gn,Zn)};En(Sn,gn=>{Tt(u)!=="diaryYear"?gn(jn):gn(zn,!1)})}Lt(on),Ie(Xe,on)};En(On,Xe=>{"years"in s()&&Xe(xn)})}Lt(Ue);var hn=pe(Ue,2);{var Nn=Xe=>{var on=RR(),Sn=pe(Ht(on),2);Ps(Sn,17,()=>s().decades,Fs,(jn,zn)=>{var gn=DR(),Zn=Ht(gn),as=Ht(Zn),ls=Ht(as);Lt(as);var In=pe(as,2),gs=pe(Ht(In)),pt=Ht(gs);Lt(gs),Lt(In),Lt(Zn);var kt=pe(Zn,2);Ps(kt,21,()=>Tt(zn).imgs,Fs,(mt,ut)=>{vp(mt,{get uri(){return Tt(ut).uri},get poster(){return Tt(ut).img},width:105,height:70,className:"decPosterImg"})}),Lt(kt),Lt(gn),un(()=>{rs(as,"href",`//letterboxd.com/${s().username??""}/films/rated/.5-5/decade/${Tt(zn)._id??""}s/by/entry-rating/`),nn(ls,`${Tt(zn)._id??""}s`),nn(pt,`Average ${Tt(zn).avg??""}`)}),Ie(jn,gn)}),Lt(on),Ie(Xe,on)};En(hn,Xe=>{s().ru&&Xe(Nn)})}un(()=>Os(Ze,1,`clickable ${Tt(u)==="releaseYear"?"active":""}`)),Ie(Me,ze)},Ft=Me=>{var ze=GR(),Ue=Ss(ze);{var Ge=mt=>{var ut=PR(),bt=Ht(ut),At=pe(Ht(bt),4);At.__click=()=>E("hrf","currentYearHRF"),At.__keydown=Ke=>Ke.key==="Enter"&&E("hrf","currentYearHRF");var re=Ht(At,!0);Lt(At);var _e=pe(At,2);_e.__click=()=>E("hrf","pastYearHRF"),_e.__keydown=Ke=>Ke.key==="Enter"&&E("hrf","pastYearHRF"),Lt(bt);var He=pe(bt,2),Fn=Ht(He);Ps(Fn,21,()=>Bo(s().topRatedCurrentYear),Fs,(Ke,Kn)=>{var ss=OR(),Un=Ht(ss);vp(Un,{get uri(){return Tt(Kn)._id},get poster(){return Tt(Kn).poster}});var pi=pe(Un,2),qs=Ht(pi),kn=Ht(qs,!0);Lt(qs),Lt(pi),Lt(ss),un(li=>nn(kn,li),[()=>ub(Tt(Kn).r)]),Ie(Ke,ss)}),Lt(Fn);var bn=pe(Fn,2);Ps(bn,21,()=>Bo(s().topRatedOtherYears),Fs,(Ke,Kn)=>{var ss=FR(),Un=Ht(ss);vp(Un,{get uri(){return Tt(Kn)._id},get poster(){return Tt(Kn).poster}});var pi=pe(Un,2),qs=Ht(pi),kn=Ht(qs,!0);Lt(qs),Lt(pi),Lt(ss),un(li=>nn(kn,li),[()=>ub(Tt(Kn).r)]),Ie(Ke,ss)}),Lt(bn),Lt(He),Lt(ut),un(()=>{Os(At,1,`clickable ${Tt(h)==="currentYearHRF"?"active":""}`),nn(re,r()),Os(_e,1,`clickable ${Tt(h)==="pastYearHRF"?"active":""}`),Os(Fn,1,`secHRF filmList ${Tt(h)==="currentYearHRF"?"":"hide"}`),Os(bn,1,`secHRF filmList ${Tt(h)==="pastYearHRF"?"":"hide"}`)}),Ie(mt,ut)};En(Ue,mt=>{s().ru&&mt(Ge)})}var Ze=pe(Ue,2),tn=Ht(Ze);Rr(tn,{title:"By week"});var an=pe(tn,6),ln=Ht(an),We=Ht(ln),fn=Ht(We),Yn=Ht(fn,!0);Lt(fn),Ys(2),Lt(We);var On=pe(We,4),xn=Ht(On),hn=Ht(xn,!0);Lt(xn),Ys(2),Lt(On);var Nn=pe(On,4),Xe=Ht(Nn),on=Ht(Xe,!0);Lt(Xe),Ys(2),Lt(Nn),Lt(ln),Ys(2),Lt(an),Lt(Ze);var Sn=pe(Ze,2),jn=Ht(Sn);Rr(jn,{title:"Milestones"});var zn=pe(jn,2),gn=Ht(zn),Zn=pe(Ht(gn),2);nh(Zn,{get uri(){return s().first._id},get poster(){return s().first.poster},children:(mt,ut)=>{var bt=LR(),At=Ht(bt,!0);Lt(bt),un(re=>nn(At,re),[()=>hb(s().first.date)]),Ie(mt,bt)},$$slots:{default:!0}}),Lt(gn);var as=pe(gn,2);{var ls=mt=>{var ut=zR(),bt=pe(Ht(ut),2);Ps(bt,21,()=>Bo(Ju(s().milestones,0,5)),Fs,(At,re,_e)=>{nh(At,{get uri(){return Tt(re)._id},get poster(){return Tt(re).poster},get link(){return`${ir}${s().username??""}/film/${Tt(re)._id??""}/activity`},children:(He,Fn)=>{var bn=BR(),Ke=Ht(bn);Ke.nodeValue=`${(_e+1)*50}th `;var Kn=pe(Ke),ss=Ht(Kn);Lt(Kn),Lt(bn),un(Un=>nn(ss,`· ${Un??""}`),[()=>hb(Tt(re).date)]),Ie(He,bn)},$$slots:{default:!0}})}),Lt(bt),Lt(ut),Ie(mt,ut)};En(as,mt=>{s().milestones.length>0&&mt(ls)})}var In=pe(as,2),gs=pe(Ht(In),2);nh(gs,{get uri(){return s().last._id},get poster(){return s().last.poster},children:(mt,ut)=>{var bt=WR(),At=Ht(bt,!0);Lt(bt),un(re=>nn(At,re),[()=>hb(s().last.date)]),Ie(mt,bt)},$$slots:{default:!0}}),Lt(In),Lt(zn);var pt=pe(zn,2);{var kt=mt=>{var ut=UR(),bt=Ht(ut),At=pe(Ht(bt),2);Ps(At,21,()=>Bo(s().mostWatched),Fs,(re,_e)=>{nh(re,{get uri(){return Tt(_e).uri},get poster(){return Tt(_e).poster},get link(){return`${ir}${s().username??""}/film/${Tt(_e).uri??""}/activity`},children:(He,Fn)=>{var bn=VR(),Ke=Ht(bn);Lt(bn),un(()=>nn(Ke,`${Tt(_e).sum??""} times`)),Ie(He,bn)},$$slots:{default:!0}})}),Lt(At),Lt(bt),Lt(ut),Ie(mt,ut)};En(pt,mt=>{s().mostWatched.length>0&&mt(kt)})}Lt(Sn),un((mt,ut)=>{nn(Yn,s().total),nn(hn,mt),nn(on,ut)},[()=>(s().total/Tt(a)).toFixed(1),()=>(s().total/Tt(l)).toFixed(1)]),Ie(Me,ze)};En(J,Me=>{i()===""?Me(Mt):Me(Ft,!1)})}var St=pe(J,2),ft=Ht(St);Rr(ft,{title:"Genres, Countries & Languages",children:(Me,ze)=>{var Ue=Mr(),Ge=Ss(Ue);{var Ze=tn=>{var an=HR(),ln=Ss(an);ln.__click=()=>E("gcl","MWGCL"),ln.__keydown=fn=>fn.key==="Enter"&&E("gcl","MWGCL");var We=pe(ln,2);We.__click=()=>E("gcl","HRGCL"),We.__keydown=fn=>fn.key==="Enter"&&E("gcl","HRGCL"),un(()=>{Os(ln,1,`clickable ${Tt(f)==="MWGCL"?"active":""}`),Os(We,1,`clickable ${Tt(f)==="HRGCL"?"active":""}`)}),Ie(tn,an)};En(Ge,tn=>{s().ru&&tn(Ze)})}Ie(Me,Ue)},$$slots:{default:!0}});var zt=pe(ft,2);Ps(zt,20,()=>[["genres","genre","rgb(0, 224, 84)"],["countries","country","rgb(64, 188, 244)"],["originallanguage","language","rgb(255, 128, 0)"]],Fs,(Me,ze)=>{var Ue=XR();Ps(Ue,21,()=>Bo(Ju(s()["mw_"+ze[0]],0,10)),Fs,(Ge,Ze)=>{var tn=jR(),an=Ht(tn),ln=Ht(an,!0);Lt(an);var We=pe(an,2),fn=Ht(We),Yn=Ht(fn),On=Ht(Yn);Lt(Yn),Lt(fn);var xn=pe(fn,2);Lt(We),Lt(tn),un((hn,Nn)=>{rs(an,"href",`${ir}${s().username??""}/films/${hn??""}${ze[1]??""}/${Nn??""}`),nn(ln,Tt(Ze).name),Bc(fn,`width: ${Tt(Ze).sum*100/s()["mw_"+ze[0]][0].sum}%;`),nn(On,`${Tt(Ze).sum??""} films`),Bc(xn,`width:${Tt(Ze).sum*100/s()["mw_"+ze[0]][0].sum}%; background-color:${ze[2]??""};`)},[()=>i()!==""?"diary/for/"+r().toString()+"/":"",()=>cp(Tt(Ze).name)]),Ie(Ge,tn)}),Lt(Ue),Ie(Me,Ue)}),Lt(zt);var Et=pe(zt,2);{var de=Me=>{var ze=YR(),Ue=Ht(ze);Ps(Ue,16,()=>[["genres","genre","rgb(72, 255, 132)"],["countries","country","rgb(116, 240, 255)"],["originallanguage","language","rgb(255, 184, 96)"]],Fs,(Ge,Ze)=>{var tn=KR();Ps(tn,21,()=>Bo(Ju(s()["tr_"+Ze[0]],0,10)),Fs,(an,ln)=>{var We=qR(),fn=Ht(We),Yn=Ht(fn,!0);Lt(fn);var On=pe(fn,2),xn=Ht(On),hn=Ht(xn),Nn=Ht(hn);Lt(hn),Lt(xn);var Xe=pe(xn,2);Lt(On),Lt(We),un((on,Sn)=>{rs(fn,"href",`${ir}${s().username??""}/films/${on??""}/rated/.5-5/${Ze[1]??""}/${Sn??""}`),nn(Yn,Tt(ln).name),Bc(xn,`width: ${Tt(ln).avg*100/s()["tr_"+Ze[0]][0].avg}%;`),nn(Nn,`Average: ${Tt(ln).avg??""}`),Bc(Xe,`width:${Tt(ln).avg*100/s()["tr_"+Ze[0]][0].avg}%; background-color:${Ze[2]??""};`)},[()=>i()!==""?"diary/for/"+r().toString():"",()=>cp(Tt(ln).name)]),Ie(an,We)}),Lt(tn),Ie(Ge,tn)}),Ys(2),Lt(ze),un(()=>Os(ze,1,`attributes-chart threeColumns secGCL ${Tt(f)==="HRGCL"?"":"hide"}`)),Ie(Me,ze)};En(Et,Me=>{s().ru&&Me(de)})}Lt(St);var Xt=pe(St,2),be=Ht(Xt);Rr(be,{title:"Themes & Nanogenres®",children:(Me,ze)=>{var Ue=Mr(),Ge=Ss(Ue);{var Ze=tn=>{var an=ZR(),ln=Ss(an);ln.__click=()=>E("tn","MWTN"),ln.__keydown=fn=>fn.key==="Enter"&&E("tn","MWTN");var We=pe(ln,2);We.__click=()=>E("tn","HRTN"),We.__keydown=fn=>fn.key==="Enter"&&E("tn","HRTN"),un(()=>{Os(ln,1,`clickable ${Tt(g)==="MWTN"?"active":""}`),Os(We,1,`clickable ${Tt(g)==="HRTN"?"active":""}`)}),Ie(tn,an)};En(Ge,tn=>{s().ru&&tn(Ze)})}Ie(Me,Ue)},$$slots:{default:!0}});var Te=pe(be,2);Ps(Te,20,()=>["theme","nanogenre"],Fs,(Me,ze)=>{var Ue=QR();Ps(Ue,21,()=>Bo(Ju(s()["mw_"+ze+"s"],0,10)),Fs,(Ge,Ze)=>{var tn=JR(),an=Ht(tn),ln=Ht(an,!0);Lt(an);var We=pe(an,2),fn=Ht(We);Lt(We);var Yn=pe(We,2);Lt(tn),un((On,xn,hn)=>{rs(tn,"href",`${ir}${s().username??""}/films/${On??""}/${Tt(Ze).type??""}/${xn??""}`),nn(ln,Tt(Ze).name),nn(fn,`${Tt(Ze).sum??""} films`),Bc(Yn,`width:${hn??""}%;`)},[()=>i()!==""?"diary/for/"+r().toString():"",()=>cp(Tt(Ze).name,Tt(Ze).uri),()=>Tt(Ze).sum*100/Xl(s()["mw_"+ze+"s"],0).sum]),Ie(Ge,tn)}),Lt(Ue),Ie(Me,Ue)}),Lt(Te);var $e=pe(Te,2);{var Pe=Me=>{var ze=nM(),Ue=Ht(ze);Ps(Ue,16,()=>["theme","nanogenre"],Fs,(Ge,Ze)=>{var tn=eM();Ps(tn,21,()=>Bo(Ju(s()["tr_"+Ze+"s"],0,10)),Fs,(an,ln)=>{var We=tM(),fn=Ht(We),Yn=Ht(fn,!0);Lt(fn);var On=pe(fn,2),xn=Ht(On);Lt(On);var hn=pe(On,2);Lt(We),un((Nn,Xe,on)=>{rs(We,"href",`${ir}${s().username??""}/films/${Nn??""}/rated/.5-5/${Tt(ln).type??""}/${Xe??""}`),nn(Yn,Tt(ln).name),nn(xn,`Average: ${Tt(ln).avg??""}`),Bc(hn,`width:${on??""}%;`)},[()=>i()!==""?"diary/for/"+r().toString():"",()=>cp(Tt(ln).name,Tt(ln).uri),()=>Tt(ln).avg*100/Xl(s()["tr_"+Ze+"s"],0).avg]),Ie(an,We)}),Lt(tn),Ie(Ge,tn)}),Ys(2),Lt(ze),un(()=>Os(ze,1,`attributes-chart twocolumn secTN ${Tt(g)==="HRTN"?"":"hide"}`)),Ie(Me,ze)};En($e,Me=>{s().ru&&Me(Pe)})}Lt(Xt);var Ae=pe(Xt,2);{var vn=Me=>{var ze=uM(),Ue=Ss(ze),Ge=Ht(Ue);Rr(Ge,{title:"List progress"});var Ze=pe(Ge,2);Ps(Ze,21,()=>Array.from({length:Qg(s().lists)},(xn,hn)=>hn),Fs,(xn,hn)=>{var Nn=sM(),Xe=Ht(Nn),on=Ht(Xe),Sn=Ht(on,!0);Lt(on);var jn=pe(on,2),zn=Ht(jn);Lt(jn);var gn=pe(jn,2),Zn=Ht(gn);Lt(gn),Lt(Xe),Lt(Nn),un((as,ls,In,gs,pt,kt,mt)=>{Bc(Nn,`background:conic-gradient(#40bcf4 0deg ${as??""}deg,#303c44 ${ls??""}deg 360deg);`),rs(Xe,"href",`${ir}${In??""}`),nn(Sn,gs),nn(zn,`${pt??""}%`),nn(Zn,`${kt??""} of ${mt??""}`)},[()=>3.6*Xl(s().lists,Tt(hn)).perc,()=>3.6*Xl(s().lists,Tt(hn)).perc,()=>Xl(s().lists,Tt(hn))._id,()=>Xl(s().lists,Tt(hn)).name,()=>parseInt(Xl(s().lists,Tt(hn)).perc),()=>Xl(s().lists,Tt(hn)).num,()=>Xl(s().lists,Tt(hn)).tot]),Ie(xn,Nn)}),Lt(Ze),Lt(Ue);var tn=pe(Ue,2),an=Ht(tn);Rr(an,{title:"Collections",children:(xn,hn)=>{var Nn=iM(),Xe=Ss(Nn);Xe.__click=()=>E("collections","complete"),Xe.__keydown=Sn=>Sn.key==="Enter"&&E("collections","complete");var on=pe(Xe,2);on.__click=()=>E("collections","almost"),on.__keydown=Sn=>Sn.key==="Enter"&&E("collections","almost"),un(()=>{Os(Xe,1,`clickable ${Tt(m)==="complete"?"active":""}`),Os(on,1,`clickable ${Tt(m)==="almost"?"active":""}`)}),Ie(xn,Nn)},$$slots:{default:!0}});var ln=pe(an,2);Ps(ln,21,()=>Bo(s().collections),Fs,(xn,hn)=>{var Nn=aM();Ps(Nn,21,()=>Tt(hn).collections,Fs,(Xe,on)=>{var Sn=oM(),jn=Ht(Sn);Ps(jn,21,()=>Tt(on).posters,Fs,(ls,In)=>{var gs=rM();Hv(gs,pt=>Xv?.(pt)),un(pt=>rs(gs,"data-src",pt),[()=>ET(Tt(In),105,70)]),Wp(gs),Ie(ls,gs)}),Lt(jn);var zn=pe(jn,2),gn=Ht(zn),Zn=Ht(gn,!0);Lt(gn);var as=pe(gn);Lt(zn),Lt(Sn),un(()=>{rs(jn,"href",`${ir}films/in/${Tt(on).uri??""}/by/release-earliest/size/large/`),rs(gn,"href",`${ir}films/in/${Tt(on).uri??""}/by/release-earliest/size/large/`),nn(Zn,Tt(on).name),nn(as,` ${Tt(on).num??""} watched`)}),Ie(Xe,Sn)}),Lt(Nn),un(()=>Os(Nn,1,`collectionsx ${Tt(m)===Tt(hn)._id?"":"hide"}`)),Ie(xn,Nn)}),Lt(ln),Lt(tn);var We=pe(tn,2);{var fn=xn=>{var hn=lM(),Nn=Ht(hn);Rr(Nn,{title:"Most Watched"});var Xe=pe(Nn,2);e(Xe,()=>s().mostWatched);var on=pe(Xe,2),Sn=Ht(on);Lt(on),Lt(hn),un(()=>rs(Sn,"href",`${ir}${s().username??""}/films/diary/by/diary-count/`)),Ie(xn,hn)};En(We,xn=>{Qg(s().mostWatched)>0&&xn(fn)})}var Yn=pe(We,2);{var On=xn=>{var hn=cM(),Nn=Ss(hn),Xe=Ht(Nn);Rr(Xe,{title:"Rated higher than average"});var on=pe(Xe,2);e(on,()=>s().highers),Lt(Nn);var Sn=pe(Nn,2),jn=Ht(Sn);Rr(jn,{title:"Rated lower than average"});var zn=pe(jn,2);e(zn,()=>s().lowers),Lt(Sn),Ie(xn,hn)};En(Yn,xn=>{s().ru&&xn(On)})}Ie(Me,ze)},vs=Me=>{var ze=dM(),Ue=Ht(ze);Rr(Ue,{title:"Breakdown"});var Ge=pe(Ue,2),Ze=Ht(Ge),tn=Ht(Ze),an=Ht(tn),ln=Ht(an),We=Ht(ln);Lt(ln),Ys(2),Lt(an),Ys(2),Lt(tn),Ys(4),Lt(Ze);var fn=pe(Ze,2);{var Yn=On=>{var xn=hM();Ys(2),Ie(On,xn)};En(fn,On=>{s().ru&&On(Yn)})}Lt(Ge),Lt(ze),un(()=>nn(We,`${r()??""} Releases`)),Ie(Me,ze)};En(Ae,Me=>{i()===""?Me(vn):Me(vs,!1)})}var ei=pe(Ae,2);Ps(ei,16,()=>[["actor","Stars","Watch"],["director","Directors","Watch"]],Fs,(Me,ze)=>{var Ue=Ki(()=>qk(ze,3));let Ge=()=>Tt(Ue)[0],Ze=()=>Tt(Ue)[1];const tn=Ki(()=>Ge()==="actor"?Tt(y):Tt(k));var an=xM(),ln=Ht(an);Rr(ln,{get title(){return Ze()},children:(fn,Yn)=>{var On=pM(),xn=Ss(On);xn.__click=()=>E(Ge(),"Watch"),xn.__keydown=Xe=>Xe.key==="Enter"&&E(Ge(),"Watch");var hn=pe(xn,2);{var Nn=Xe=>{var on=fM();on.__click=()=>E(Ge(),"Rat"),on.__keydown=Sn=>Sn.key==="Enter"&&E(Ge(),"Rat"),un(()=>Os(on,1,`clickable ${Tt(tn)==="Rat"?"active":""}`)),Ie(Xe,on)};En(hn,Xe=>{s().ru&&Xe(Nn)})}un(()=>Os(xn,1,`clickable ${Tt(tn)==="Watch"?"active":""}`)),Ie(fn,On)},$$slots:{default:!0}});var We=pe(ln,2);Ps(We,20,()=>[["Watch","mw_","w"],["Rat","tr_","r"]],Fs,(fn,Yn)=>{var On=Ki(()=>qk(Yn,3));let xn=()=>Tt(On)[0],hn=()=>Tt(On)[1],Nn=()=>Tt(On)[2];var Xe=Mr(),on=Ss(Xe);{var Sn=jn=>{const zn=Ki(()=>Ge()==="actor"?Tt(S):Tt($));var gn=mM(),Zn=Ht(gn);Ps(Zn,21,()=>Bo(Ju(s()[hn()+(Ge()==="actor"?"actor":"director")],0,Tt(zn)?20:10)),Fs,(In,gs)=>{var pt=Mr(),kt=Ss(pt);{var mt=ut=>{$T(ut,{get roleId(){return Ge()},get element(){return Tt(gs)},get year(){return i()},get yearnum(){return r()},get username(){return s().username},get typeCode(){return Nn()},setTmdb:q})};En(kt,ut=>{Tt(gs).hasOwnProperty("name")&&ut(mt)})}Ie(In,pt)}),Lt(Zn);var as=pe(Zn,2);{var ls=In=>{var gs=gM(),pt=Ht(gs);pt.__click=()=>{Ge()==="actor"?Ve(S,!0):Ve($,!0)},pt.__keydown=kt=>{kt.key==="Enter"&&(Ge()==="actor"?Ve(S,!0):Ve($,!0))},Lt(gs),Ie(In,gs)};En(as,In=>{!Tt(zn)&&Qg(s()[hn()+(Ge()==="actor"?"actor":"director")])>10&&In(ls)})}Lt(gn),un(()=>{Os(gn,1,`${Ge()??""}sbis`),Os(Zn,1,`${Ge()??""}s people`)}),Ie(jn,gn)};En(on,jn=>{Tt(tn)===xn()&&jn(Sn)})}Ie(fn,Xe)}),Lt(We),Lt(an),un(()=>Os(We,1,`${Ge()??""}s2`)),Ie(Me,an)});var ps=pe(ei,2),Ws=Ht(ps);Rr(Ws,{title:"Crew & Studios",children:(Me,ze)=>{var Ue=vM(),Ge=Ss(Ue);Ge.__click=()=>E("crew","mw"),Ge.__keydown=an=>an.key==="Enter"&&E("crew","mw");var Ze=pe(Ge,2);{var tn=an=>{var ln=bM();ln.__click=()=>E("crew","tr"),ln.__keydown=We=>We.key==="Enter"&&E("crew","tr"),un(()=>Os(ln,1,`clickable ${Tt(C)==="tr"?"active":""}`)),Ie(an,ln)};En(Ze,an=>{s().ru&&an(tn)})}un(()=>Os(Ge,1,`clickable ${Tt(C)==="mw"?"active":""}`)),Ie(Me,Ue)},$$slots:{default:!0}});var ns=pe(Ws,2);Ps(ns,16,()=>["mw","tr"],Fs,(Me,ze)=>{var Ue=Mr(),Ge=Ss(Ue);{var Ze=tn=>{var an=CM(),ln=Ht(an);Ps(ln,17,()=>Bo(B7),Fs,(Yn,On)=>{var xn=wM(),hn=Ht(xn),Nn=Ht(hn,!0);Lt(hn);var Xe=pe(hn,2);Ps(Xe,17,()=>Bo(Ju(s()[ze+"_"+Tt(On)[0]],0,20)),Fs,(on,Sn,jn)=>{var zn=Mr(),gn=Ss(zn);{var Zn=as=>{var ls=Mr(),In=Ss(ls);{var gs=pt=>{var kt=yM(),mt=Ht(kt),ut=Ht(mt,!0);Lt(mt);var bt=pe(mt,2),At=Ht(bt,!0);Lt(bt),Lt(kt),un(re=>{rs(mt,"href",`${ir}${s().username??""}/films${re??""}/with/${Tt(On)[2]??""}/${Tt(Sn).uri??""}`),nn(ut,Tt(Sn).name||Tt(Sn).uri),nn(At,ze==="mw"?Tt(Sn).sum:Tt(Sn).avg)},[()=>i()!==""?"/diary/for/"+r().toString():""]),Ie(pt,kt)};En(In,pt=>{(jn<=5||Tt(D))&&pt(gs)})}Ie(as,ls)};En(gn,as=>{Tt(Sn).hasOwnProperty("name")&&as(Zn)})}Ie(on,zn)}),Lt(xn),un(()=>nn(Nn,Tt(On)[1])),Ie(Yn,xn)});var We=pe(ln,2);{var fn=Yn=>{var On=kM(),xn=Ht(On);xn.__click=()=>Ve(D,!0),xn.__keydown=hn=>hn.key==="Enter"&&Ve(D,!0),Lt(On),Ie(Yn,On)};En(We,Yn=>{Tt(D)||Yn(fn)})}Lt(an),Ie(tn,an)};En(Ge,tn=>{Tt(C)===ze&&tn(Ze)})}Ie(Me,Ue)}),Lt(ps);var bi=pe(ps,2);{var Pi=Me=>{var ze=IM(),Ue=Ss(ze),Ge=Ht(Ue);Rr(Ge,{title:"Highs and Lows"});var Ze=pe(Ge,2);Ps(Ze,20,()=>[["best","Highest Average"],["worst","Lowest Average"],["popular","Most Popular"],["obscure","Most Obscure"]],Fs,(On,xn)=>{{let hn=Ki(()=>s()[xn[0]].poster||"");nh(On,{get uri(){return s()[xn[0]]._id},get poster(){return Tt(hn)},get suptitle(){return xn[1]},children:(Nn,Xe)=>{var on=TM(),Sn=Ht(on);{var jn=zn=>{var gn=SM(),Zn=pe(Ss(gn),2),as=Ht(Zn,!0);Lt(Zn),un(ls=>nn(as,ls),[()=>s()[xn[0]].avg.toFixed(1)]),Ie(zn,gn)};En(Sn,zn=>{s()[xn[0]].hasOwnProperty("avg")&&zn(jn)})}Lt(on),Ie(Nn,on)},$$slots:{default:!0}})}}),Lt(Ze),Lt(Ue);var tn=pe(Ue,2),an=Ht(tn);Rr(an,{title:"Rated higher than average"});var ln=pe(an,2);e(ln,()=>s().highers),Lt(tn);var We=pe(tn,2),fn=Ht(We);Rr(fn,{title:"Rated lower than average"});var Yn=pe(fn,2);e(Yn,()=>s().lowers),Lt(We),Ie(Me,ze)};En(bi,Me=>{i()!==""&&Me(Pi)})}var vi=pe(bi,2),Ur=pe(Ht(vi),2);return DT(Ur,{get data(){return s()},get year(){return i()}}),Lt(vi),Lt(ct),un(()=>{Os(It,1,`constraint ${i()!==""?"constraint_full":"constraint_year"}`),rs(Ut,"href",`${ir}${s().username??""}`),nn(me,s().name),nn(Ee,`'s
                ${i()===""?"all-time stats":"year in review"}`),Os(zt,1,`attributes-chart threeColumns secGCL ${Tt(f)==="MWGCL"?"":"hide"}`),Os(Te,1,`attributes-chart twocolumn secTN ${Tt(g)==="MWTN"?"":"hide"}`)}),Ie(n,K),lr(U)}C1(["click","keydown"]);const g4=10;async function RT(n,t,e=0){if(e>0)await ep(n.missingCrew,"addPeople"),localStorage.setItem(t.toLowerCase()+"_"+e.toString()+"_stats",JSON.stringify(n));else{const s=n.missingRatings.filter(i=>!n.missing.some(r=>r.id===i.id));await Promise.all([ep(n.missing,"addFilms/"),ep(s,"addRatings/"),ep(n.missingCollections,"addCollections/"),ep(n.missingCrew,"addPeople/")]),n.missing=[],n.missingRatings=[],n.missingCollections=[],n.missingCrew=[],localStorage.setItem(t.toLowerCase()+"_stats",JSON.stringify(n))}}async function ep(n,t){for(let e=0;e<n.length;e+=g4){let s=await _M(n.slice(e,e+g4),t);console.log(s)}}async function _M(n,t){if(n.length!==0)return console.log(JSON.stringify(n)),await fetch(nc+t,{method:"POST",body:JSON.stringify(n)})}var AM=Re('<div class="loaderContainer2"><div class="loader2"></div></div>'),$M=Re("<p> </p>"),NM=Re("<main><!></main>");function MT(n,t){if(new.target)return wr({component:MT,...n});ar(t,!0);let e=An(t,"username",7),s=qn(!1),i=qn(no({message:"Error"}));$l(()=>{const h=localStorage.getItem(e().toLowerCase()+"_stats");h!==null&&h!=="undefined"&&(console.log("Read Storage Data"),Ve(i,JSON.parse(h),!0),RT(Tt(i),e()),Tt(i).message=void 0),Ve(s,!1)});var r={get username(){return e()},set username(h){e(h),_n()},$set:Cr,$on:(h,f)=>kr(t,h,f)},o=NM(),a=Ht(o);{var l=h=>{var f=AM();Ie(h,f)},u=h=>{var f=Mr(),g=Ss(f);{var m=k=>{var C=$M(),S=Ht(C,!0);Lt(C),un(()=>nn(S,Tt(i).message)),Ie(k,C)},y=k=>{Kv(k,{get data(){return Tt(i)},year:"",yearnum:"0"})};En(g,k=>{Tt(i).message!==void 0?k(m):k(y,!1)},!0)}Ie(h,f)};En(a,h=>{Tt(s)?h(l):h(u,!1)})}return Lt(o),Ie(n,o),lr(r)}var DM=Re('<div class="loaderContainer2"><div class="loader2"></div></div>'),RM=Re("<p> </p>"),MM=Re("<main><!> <!></main>");function OT(n,t){if(new.target)return wr({component:OT,...n});ar(t,!0);let e=An(t,"username",7),s=An(t,"year",7),i=qn(!0),r=qn(no({})),o=qn(no({})),a=qn("Error");async function l(C){return await(await fetch(nc+"yearstats",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(C)})).json()}$l(async()=>{try{let C=localStorage.getItem(e().toLowerCase()+"_"+s().toString()+"_stats");if(C!==null&&C!=="undefined"){console.log("Read Storage Stats Data"),Ve(r,await JSON.parse(C),!0),Ve(a,void 0),Ve(i,!1);return}if(C=localStorage.getItem(e().toLowerCase()),C!==null&&C!=="undefined"){console.log("Read Storage User Data"),Ve(o,JSON.parse(C),!0);const S=Tt(o).watched.map($=>{const D=$.d.filter(R=>new Date(R.date).getUTCFullYear()===s());if(D.length>0)return{...$,d:D}}).filter(Boolean);Ve(r,await l({year:s(),watched:S}),!0),Tt(r).username=Tt(o).username,Tt(r).name=Tt(o).name,Tt(r).ru=Tt(o).ru,Tt(r).update=Tt(o).update,Tt(r).yearsStats=Tt(o).yearsStats,localStorage.setItem(e().toLowerCase()+"_"+s().toString()+"_stats",JSON.stringify(Tt(r))),RT(Tt(r),e(),s()),Ve(a,void 0)}}catch(C){console.log(C),Ve(a,"There is an error, please contact me on <a href='https://t.me/giudimax' target='_blank'>telegram and send me your zip file</a><br/>")}Ve(i,!1)});var u={get username(){return e()},set username(C){e(C),_n()},get year(){return s()},set year(C){s(C),_n()},$set:Cr,$on:(C,S)=>kr(t,C,S)},h=MM(),f=Ht(h);{var g=C=>{var S=DM();Ie(C,S)};En(f,C=>{Tt(i)&&C(g)})}var m=pe(f,2);{var y=C=>{var S=RM(),$=Ht(S,!0);Lt(S),un(()=>nn($,Tt(a))),Ie(C,S)},k=C=>{{let S=Ki(()=>s().toString());Kv(C,{get data(){return Tt(r)},get year(){return Tt(S)},get yearnum(){return s()}})}};En(m,C=>{Tt(a)!==void 0?C(y):C(k,!1)})}return Lt(h),Ie(n,h),lr(u)}function em(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var db={exports:{}};var m4;function OM(){return m4||(m4=1,(function(n,t){(function(e){n.exports=e()})(function(){return(function e(s,i,r){function o(u,h){if(!i[u]){if(!s[u]){var f=typeof em=="function"&&em;if(!h&&f)return f(u,!0);if(a)return a(u,!0);var g=new Error("Cannot find module '"+u+"'");throw g.code="MODULE_NOT_FOUND",g}var m=i[u]={exports:{}};s[u][0].call(m.exports,function(y){var k=s[u][1][y];return o(k||y)},m,m.exports,e,s,i,r)}return i[u].exports}for(var a=typeof em=="function"&&em,l=0;l<r.length;l++)o(r[l]);return o})({1:[function(e,s,i){var r=e("./utils"),o=e("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var u,h,f,g,m,y,k,C=[],S=0,$=l.length,D=$,R=r.getTypeOf(l)!=="string";S<l.length;)D=$-S,f=R?(u=l[S++],h=S<$?l[S++]:0,S<$?l[S++]:0):(u=l.charCodeAt(S++),h=S<$?l.charCodeAt(S++):0,S<$?l.charCodeAt(S++):0),g=u>>2,m=(3&u)<<4|h>>4,y=1<D?(15&h)<<2|f>>6:64,k=2<D?63&f:64,C.push(a.charAt(g)+a.charAt(m)+a.charAt(y)+a.charAt(k));return C.join("")},i.decode=function(l){var u,h,f,g,m,y,k=0,C=0,S="data:";if(l.substr(0,S.length)===S)throw new Error("Invalid base64 input, it looks like a data url.");var $,D=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&D--,l.charAt(l.length-2)===a.charAt(64)&&D--,D%1!=0)throw new Error("Invalid base64 input, bad content length.");for($=o.uint8array?new Uint8Array(0|D):new Array(0|D);k<l.length;)u=a.indexOf(l.charAt(k++))<<2|(g=a.indexOf(l.charAt(k++)))>>4,h=(15&g)<<4|(m=a.indexOf(l.charAt(k++)))>>2,f=(3&m)<<6|(y=a.indexOf(l.charAt(k++))),$[C++]=u,m!==64&&($[C++]=h),y!==64&&($[C++]=f);return $}},{"./support":30,"./utils":32}],2:[function(e,s,i){var r=e("./external"),o=e("./stream/DataWorker"),a=e("./stream/Crc32Probe"),l=e("./stream/DataLengthProbe");function u(h,f,g,m,y){this.compressedSize=h,this.uncompressedSize=f,this.crc32=g,this.compression=m,this.compressedContent=y}u.prototype={getContentWorker:function(){var h=new o(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),f=this;return h.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new o(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(h,f,g){return h.pipe(new a).pipe(new l("uncompressedSize")).pipe(f.compressWorker(g)).pipe(new l("compressedSize")).withStreamInfo("compression",f)},s.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,s,i){var r=e("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},i.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,s,i){var r=e("./utils"),o=(function(){for(var a,l=[],u=0;u<256;u++){a=u;for(var h=0;h<8;h++)a=1&a?3988292384^a>>>1:a>>>1;l[u]=a}return l})();s.exports=function(a,l){return a!==void 0&&a.length?r.getTypeOf(a)!=="string"?(function(u,h,f,g){var m=o,y=g+f;u^=-1;for(var k=g;k<y;k++)u=u>>>8^m[255&(u^h[k])];return-1^u})(0|l,a,a.length,0):(function(u,h,f,g){var m=o,y=g+f;u^=-1;for(var k=g;k<y;k++)u=u>>>8^m[255&(u^h.charCodeAt(k))];return-1^u})(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(e,s,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(e,s,i){var r=null;r=typeof Promise<"u"?Promise:e("lie"),s.exports={Promise:r}},{lie:37}],7:[function(e,s,i){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=e("pako"),a=e("./utils"),l=e("./stream/GenericWorker"),u=r?"uint8array":"array";function h(f,g){l.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=g,this.meta={}}i.magic="\b\0",a.inherits(h,l),h.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,f.data),!1)},h.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(g){f.push({data:g,meta:f.meta})}},i.compressWorker=function(f){return new h("Deflate",f)},i.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,s,i){function r(m,y){var k,C="";for(k=0;k<y;k++)C+=String.fromCharCode(255&m),m>>>=8;return C}function o(m,y,k,C,S,$){var D,R,V=m.file,E=m.compression,q=$!==u.utf8encode,X=a.transformTo("string",$(V.name)),B=a.transformTo("string",u.utf8encode(V.name)),U=V.comment,K=a.transformTo("string",$(U)),Y=a.transformTo("string",u.utf8encode(U)),ct=B.length!==V.name.length,j=Y.length!==U.length,ht="",It="",yt="",Ot=V.dir,Ct=V.date,Gt={crc32:0,compressedSize:0,uncompressedSize:0};y&&!k||(Gt.crc32=m.crc32,Gt.compressedSize=m.compressedSize,Gt.uncompressedSize=m.uncompressedSize);var vt=0;y&&(vt|=8),q||!ct&&!j||(vt|=2048);var at=0,Pt=0;Ot&&(at|=16),S==="UNIX"?(Pt=798,at|=(function(Ut,me){var Ee=Ut;return Ut||(Ee=me?16893:33204),(65535&Ee)<<16})(V.unixPermissions,Ot)):(Pt=20,at|=(function(Ut){return 63&(Ut||0)})(V.dosPermissions)),D=Ct.getUTCHours(),D<<=6,D|=Ct.getUTCMinutes(),D<<=5,D|=Ct.getUTCSeconds()/2,R=Ct.getUTCFullYear()-1980,R<<=4,R|=Ct.getUTCMonth()+1,R<<=5,R|=Ct.getUTCDate(),ct&&(It=r(1,1)+r(h(X),4)+B,ht+="up"+r(It.length,2)+It),j&&(yt=r(1,1)+r(h(K),4)+Y,ht+="uc"+r(yt.length,2)+yt);var jt="";return jt+=`
\0`,jt+=r(vt,2),jt+=E.magic,jt+=r(D,2),jt+=r(R,2),jt+=r(Gt.crc32,4),jt+=r(Gt.compressedSize,4),jt+=r(Gt.uncompressedSize,4),jt+=r(X.length,2),jt+=r(ht.length,2),{fileRecord:f.LOCAL_FILE_HEADER+jt+X+ht,dirRecord:f.CENTRAL_FILE_HEADER+r(Pt,2)+jt+r(K.length,2)+"\0\0\0\0"+r(at,4)+r(C,4)+X+ht+K}}var a=e("../utils"),l=e("../stream/GenericWorker"),u=e("../utf8"),h=e("../crc32"),f=e("../signature");function g(m,y,k,C){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=k,this.encodeFileName=C,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(g,l),g.prototype.push=function(m){var y=m.meta.percent||0,k=this.entriesCount,C=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,l.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:k?(y+100*(k-C-1))/k:100}}))},g.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var y=this.streamFiles&&!m.file.dir;if(y){var k=o(m,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:k.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(m){this.accumulate=!1;var y=this.streamFiles&&!m.file.dir,k=o(m,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(k.dirRecord),y)this.push({data:(function(C){return f.DATA_DESCRIPTOR+r(C.crc32,4)+r(C.compressedSize,4)+r(C.uncompressedSize,4)})(m),meta:{percent:100}});else for(this.push({data:k.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var m=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var k=this.bytesWritten-m,C=(function(S,$,D,R,V){var E=a.transformTo("string",V(R));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(S,2)+r(S,2)+r($,4)+r(D,4)+r(E.length,2)+E})(this.dirRecords.length,k,m,this.zipComment,this.encodeFileName);this.push({data:C,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(m){this._sources.push(m);var y=this;return m.on("data",function(k){y.processChunk(k)}),m.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),m.on("error",function(k){y.error(k)}),this},g.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(m){var y=this._sources;if(!l.prototype.error.call(this,m))return!1;for(var k=0;k<y.length;k++)try{y[k].error(m)}catch{}return!0},g.prototype.lock=function(){l.prototype.lock.call(this);for(var m=this._sources,y=0;y<m.length;y++)m[y].lock()},s.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,s,i){var r=e("../compressions"),o=e("./ZipFileWorker");i.generateWorker=function(a,l,u){var h=new o(l.streamFiles,u,l.platform,l.encodeFileName),f=0;try{a.forEach(function(g,m){f++;var y=(function($,D){var R=$||D,V=r[R];if(!V)throw new Error(R+" is not a valid compression method !");return V})(m.options.compression,l.compression),k=m.options.compressionOptions||l.compressionOptions||{},C=m.dir,S=m.date;m._compressWorker(y,k).withStreamInfo("file",{name:g,dir:C,date:S,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(h)}),h.entriesCount=f}catch(g){h.error(g)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,s,i){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new r;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(o,a){return new r().loadAsync(o,a)},r.external=e("./external"),s.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,s,i){var r=e("./utils"),o=e("./external"),a=e("./utf8"),l=e("./zipEntries"),u=e("./stream/Crc32Probe"),h=e("./nodejsUtils");function f(g){return new o.Promise(function(m,y){var k=g.decompressed.getContentWorker().pipe(new u);k.on("error",function(C){y(C)}).on("end",function(){k.streamInfo.crc32!==g.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}s.exports=function(g,m){var y=this;return m=r.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),h.isNode&&h.isStream(g)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",g,!0,m.optimizedBinaryString,m.base64).then(function(k){var C=new l(m);return C.load(k),C}).then(function(k){var C=[o.Promise.resolve(k)],S=k.files;if(m.checkCRC32)for(var $=0;$<S.length;$++)C.push(f(S[$]));return o.Promise.all(C)}).then(function(k){for(var C=k.shift(),S=C.files,$=0;$<S.length;$++){var D=S[$],R=D.fileNameStr,V=r.resolve(D.fileNameStr);y.file(V,D.decompressed,{binary:!0,optimizedBinaryString:!0,date:D.date,dir:D.dir,comment:D.fileCommentStr.length?D.fileCommentStr:null,unixPermissions:D.unixPermissions,dosPermissions:D.dosPermissions,createFolders:m.createFolders}),D.dir||(y.file(V).unsafeOriginalName=R)}return C.zipComment.length&&(y.comment=C.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,s,i){var r=e("../utils"),o=e("../stream/GenericWorker");function a(l,u){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}r.inherits(a,o),a.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(h){u.push({data:h,meta:{percent:0}})}).on("error",function(h){u.isPaused?this.generatedError=h:u.error(h)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,s,i){var r=e("readable-stream").Readable;function o(a,l,u){r.call(this,l),this._helper=a;var h=this;a.on("data",function(f,g){h.push(f)||h._helper.pause(),u&&u(g)}).on("error",function(f){h.emit("error",f)}).on("end",function(){h.push(null)})}e("../utils").inherits(o,r),o.prototype._read=function(){this._helper.resume()},s.exports=o},{"../utils":32,"readable-stream":16}],14:[function(e,s,i){s.exports={isNode:typeof Buffer<"u",newBufferFrom:function(r,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,o);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,o)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var o=new Buffer(r);return o.fill(0),o},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(e,s,i){function r(V,E,q){var X,B=a.getTypeOf(E),U=a.extend(q||{},h);U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&16384&U.unixPermissions&&(U.dir=!0),U.dosPermissions&&16&U.dosPermissions&&(U.dir=!0),U.dir&&(V=S(V)),U.createFolders&&(X=C(V))&&$.call(this,X,!0);var K=B==="string"&&U.binary===!1&&U.base64===!1;q&&q.binary!==void 0||(U.binary=!K),(E instanceof f&&E.uncompressedSize===0||U.dir||!E||E.length===0)&&(U.base64=!1,U.binary=!0,E="",U.compression="STORE",B="string");var Y=null;Y=E instanceof f||E instanceof l?E:y.isNode&&y.isStream(E)?new k(V,E):a.prepareContent(V,E,U.binary,U.optimizedBinaryString,U.base64);var ct=new g(V,Y,U);this.files[V]=ct}var o=e("./utf8"),a=e("./utils"),l=e("./stream/GenericWorker"),u=e("./stream/StreamHelper"),h=e("./defaults"),f=e("./compressedObject"),g=e("./zipObject"),m=e("./generate"),y=e("./nodejsUtils"),k=e("./nodejs/NodejsStreamInputAdapter"),C=function(V){V.slice(-1)==="/"&&(V=V.substring(0,V.length-1));var E=V.lastIndexOf("/");return 0<E?V.substring(0,E):""},S=function(V){return V.slice(-1)!=="/"&&(V+="/"),V},$=function(V,E){return E=E!==void 0?E:h.createFolders,V=S(V),this.files[V]||r.call(this,V,null,{dir:!0,createFolders:E}),this.files[V]};function D(V){return Object.prototype.toString.call(V)==="[object RegExp]"}var R={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(V){var E,q,X;for(E in this.files)X=this.files[E],(q=E.slice(this.root.length,E.length))&&E.slice(0,this.root.length)===this.root&&V(q,X)},filter:function(V){var E=[];return this.forEach(function(q,X){V(q,X)&&E.push(X)}),E},file:function(V,E,q){if(arguments.length!==1)return V=this.root+V,r.call(this,V,E,q),this;if(D(V)){var X=V;return this.filter(function(U,K){return!K.dir&&X.test(U)})}var B=this.files[this.root+V];return B&&!B.dir?B:null},folder:function(V){if(!V)return this;if(D(V))return this.filter(function(B,U){return U.dir&&V.test(B)});var E=this.root+V,q=$.call(this,E),X=this.clone();return X.root=q.name,X},remove:function(V){V=this.root+V;var E=this.files[V];if(E||(V.slice(-1)!=="/"&&(V+="/"),E=this.files[V]),E&&!E.dir)delete this.files[V];else for(var q=this.filter(function(B,U){return U.name.slice(0,V.length)===V}),X=0;X<q.length;X++)delete this.files[q[X].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(V){var E,q={};try{if((q=a.extend(V||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=q.type.toLowerCase(),q.compression=q.compression.toUpperCase(),q.type==="binarystring"&&(q.type="string"),!q.type)throw new Error("No output type specified.");a.checkSupport(q.type),q.platform!=="darwin"&&q.platform!=="freebsd"&&q.platform!=="linux"&&q.platform!=="sunos"||(q.platform="UNIX"),q.platform==="win32"&&(q.platform="DOS");var X=q.comment||this.comment||"";E=m.generateWorker(this,q,X)}catch(B){(E=new l("error")).error(B)}return new u(E,q.type||"string",q.mimeType)},generateAsync:function(V,E){return this.generateInternalStream(V).accumulate(E)},generateNodeStream:function(V,E){return(V=V||{}).type||(V.type="nodebuffer"),this.generateInternalStream(V).toNodejsStream(E)}};s.exports=R},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,s,i){s.exports=e("stream")},{stream:void 0}],17:[function(e,s,i){var r=e("./DataReader");function o(a){r.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}e("../utils").inherits(o,r),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),u=a.charCodeAt(1),h=a.charCodeAt(2),f=a.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===l&&this.data[g+1]===u&&this.data[g+2]===h&&this.data[g+3]===f)return g-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),u=a.charCodeAt(1),h=a.charCodeAt(2),f=a.charCodeAt(3),g=this.readData(4);return l===g[0]&&u===g[1]&&h===g[2]&&f===g[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},s.exports=o},{"../utils":32,"./DataReader":18}],18:[function(e,s,i){var r=e("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,u=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=a,u},readString:function(a){return r.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},s.exports=o},{"../utils":32}],19:[function(e,s,i){var r=e("./Uint8ArrayReader");function o(a){r.call(this,a)}e("../utils").inherits(o,r),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},s.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,s,i){var r=e("./DataReader");function o(a){r.call(this,a)}e("../utils").inherits(o,r),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},s.exports=o},{"../utils":32,"./DataReader":18}],21:[function(e,s,i){var r=e("./ArrayReader");function o(a){r.call(this,a)}e("../utils").inherits(o,r),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},s.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(e,s,i){var r=e("../utils"),o=e("../support"),a=e("./ArrayReader"),l=e("./StringReader"),u=e("./NodeBufferReader"),h=e("./Uint8ArrayReader");s.exports=function(f){var g=r.getTypeOf(f);return r.checkSupport(g),g!=="string"||o.uint8array?g==="nodebuffer"?new u(f):o.uint8array?new h(r.transformTo("uint8array",f)):new a(r.transformTo("array",f)):new l(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,s,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,s,i){var r=e("./GenericWorker"),o=e("../utils");function a(l){r.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,r),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},s.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(e,s,i){var r=e("./GenericWorker"),o=e("../crc32");function a(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(a,r),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},s.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,s,i){var r=e("../utils"),o=e("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}r.inherits(a,o),a.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}o.prototype.processChunk.call(this,l)},s.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(e,s,i){var r=e("../utils"),o=e("./GenericWorker");function a(l){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(h){u.dataIsReady=!0,u.data=h,u.max=h&&h.length||0,u.type=r.getTypeOf(h),u.isPaused||u._tickAndRepeat()},function(h){u.error(h)})}r.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(e,s,i){function r(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},s.exports=r},{}],29:[function(e,s,i){var r=e("../utils"),o=e("./ConvertWorker"),a=e("./GenericWorker"),l=e("../base64"),u=e("../support"),h=e("../external"),f=null;if(u.nodestream)try{f=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(y,k){return new h.Promise(function(C,S){var $=[],D=y._internalType,R=y._outputType,V=y._mimeType;y.on("data",function(E,q){$.push(E),k&&k(q)}).on("error",function(E){$=[],S(E)}).on("end",function(){try{var E=(function(q,X,B){switch(q){case"blob":return r.newBlob(r.transformTo("arraybuffer",X),B);case"base64":return l.encode(X);default:return r.transformTo(q,X)}})(R,(function(q,X){var B,U=0,K=null,Y=0;for(B=0;B<X.length;B++)Y+=X[B].length;switch(q){case"string":return X.join("");case"array":return Array.prototype.concat.apply([],X);case"uint8array":for(K=new Uint8Array(Y),B=0;B<X.length;B++)K.set(X[B],U),U+=X[B].length;return K;case"nodebuffer":return Buffer.concat(X);default:throw new Error("concat : unsupported type '"+q+"'")}})(D,$),V);C(E)}catch(q){S(q)}$=[]}).resume()})}function m(y,k,C){var S=k;switch(k){case"blob":case"arraybuffer":S="uint8array";break;case"base64":S="string"}try{this._internalType=S,this._outputType=k,this._mimeType=C,r.checkSupport(S),this._worker=y.pipe(new o(S)),y.lock()}catch($){this._worker=new a("error"),this._worker.error($)}}m.prototype={accumulate:function(y){return g(this,y)},on:function(y,k){var C=this;return y==="data"?this._worker.on(y,function(S){k.call(C,S.data,S.meta)}):this._worker.on(y,function(){r.delay(k,arguments,C)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},y)}},s.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,s,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var r=new ArrayBuffer(0);try{i.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(r),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!e("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(e,s,i){for(var r=e("./utils"),o=e("./support"),a=e("./nodejsUtils"),l=e("./stream/GenericWorker"),u=new Array(256),h=0;h<256;h++)u[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;u[254]=u[254]=1;function f(){l.call(this,"utf-8 decode"),this.leftOver=null}function g(){l.call(this,"utf-8 encode")}i.utf8encode=function(m){return o.nodebuffer?a.newBufferFrom(m,"utf-8"):(function(y){var k,C,S,$,D,R=y.length,V=0;for($=0;$<R;$++)(64512&(C=y.charCodeAt($)))==55296&&$+1<R&&(64512&(S=y.charCodeAt($+1)))==56320&&(C=65536+(C-55296<<10)+(S-56320),$++),V+=C<128?1:C<2048?2:C<65536?3:4;for(k=o.uint8array?new Uint8Array(V):new Array(V),$=D=0;D<V;$++)(64512&(C=y.charCodeAt($)))==55296&&$+1<R&&(64512&(S=y.charCodeAt($+1)))==56320&&(C=65536+(C-55296<<10)+(S-56320),$++),C<128?k[D++]=C:(C<2048?k[D++]=192|C>>>6:(C<65536?k[D++]=224|C>>>12:(k[D++]=240|C>>>18,k[D++]=128|C>>>12&63),k[D++]=128|C>>>6&63),k[D++]=128|63&C);return k})(m)},i.utf8decode=function(m){return o.nodebuffer?r.transformTo("nodebuffer",m).toString("utf-8"):(function(y){var k,C,S,$,D=y.length,R=new Array(2*D);for(k=C=0;k<D;)if((S=y[k++])<128)R[C++]=S;else if(4<($=u[S]))R[C++]=65533,k+=$-1;else{for(S&=$===2?31:$===3?15:7;1<$&&k<D;)S=S<<6|63&y[k++],$--;1<$?R[C++]=65533:S<65536?R[C++]=S:(S-=65536,R[C++]=55296|S>>10&1023,R[C++]=56320|1023&S)}return R.length!==C&&(R.subarray?R=R.subarray(0,C):R.length=C),r.applyFromCharCode(R)})(m=r.transformTo(o.uint8array?"uint8array":"array",m))},r.inherits(f,l),f.prototype.processChunk=function(m){var y=r.transformTo(o.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var k=y;(y=new Uint8Array(k.length+this.leftOver.length)).set(this.leftOver,0),y.set(k,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var C=(function($,D){var R;for((D=D||$.length)>$.length&&(D=$.length),R=D-1;0<=R&&(192&$[R])==128;)R--;return R<0||R===0?D:R+u[$[R]]>D?R:D})(y),S=y;C!==y.length&&(o.uint8array?(S=y.subarray(0,C),this.leftOver=y.subarray(C,y.length)):(S=y.slice(0,C),this.leftOver=y.slice(C,y.length))),this.push({data:i.utf8decode(S),meta:m.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=f,r.inherits(g,l),g.prototype.processChunk=function(m){this.push({data:i.utf8encode(m.data),meta:m.meta})},i.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,s,i){var r=e("./support"),o=e("./base64"),a=e("./nodejsUtils"),l=e("./external");function u(k){return k}function h(k,C){for(var S=0;S<k.length;++S)C[S]=255&k.charCodeAt(S);return C}e("setimmediate"),i.newBlob=function(k,C){i.checkSupport("blob");try{return new Blob([k],{type:C})}catch{try{var S=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return S.append(k),S.getBlob(C)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(k,C,S){var $=[],D=0,R=k.length;if(R<=S)return String.fromCharCode.apply(null,k);for(;D<R;)C==="array"||C==="nodebuffer"?$.push(String.fromCharCode.apply(null,k.slice(D,Math.min(D+S,R)))):$.push(String.fromCharCode.apply(null,k.subarray(D,Math.min(D+S,R)))),D+=S;return $.join("")},stringifyByChar:function(k){for(var C="",S=0;S<k.length;S++)C+=String.fromCharCode(k[S]);return C},applyCanBeUsed:{uint8array:(function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}})()}};function g(k){var C=65536,S=i.getTypeOf(k),$=!0;if(S==="uint8array"?$=f.applyCanBeUsed.uint8array:S==="nodebuffer"&&($=f.applyCanBeUsed.nodebuffer),$)for(;1<C;)try{return f.stringifyByChunk(k,S,C)}catch{C=Math.floor(C/2)}return f.stringifyByChar(k)}function m(k,C){for(var S=0;S<k.length;S++)C[S]=k[S];return C}i.applyFromCharCode=g;var y={};y.string={string:u,array:function(k){return h(k,new Array(k.length))},arraybuffer:function(k){return y.string.uint8array(k).buffer},uint8array:function(k){return h(k,new Uint8Array(k.length))},nodebuffer:function(k){return h(k,a.allocBuffer(k.length))}},y.array={string:g,array:u,arraybuffer:function(k){return new Uint8Array(k).buffer},uint8array:function(k){return new Uint8Array(k)},nodebuffer:function(k){return a.newBufferFrom(k)}},y.arraybuffer={string:function(k){return g(new Uint8Array(k))},array:function(k){return m(new Uint8Array(k),new Array(k.byteLength))},arraybuffer:u,uint8array:function(k){return new Uint8Array(k)},nodebuffer:function(k){return a.newBufferFrom(new Uint8Array(k))}},y.uint8array={string:g,array:function(k){return m(k,new Array(k.length))},arraybuffer:function(k){return k.buffer},uint8array:u,nodebuffer:function(k){return a.newBufferFrom(k)}},y.nodebuffer={string:g,array:function(k){return m(k,new Array(k.length))},arraybuffer:function(k){return y.nodebuffer.uint8array(k).buffer},uint8array:function(k){return m(k,new Uint8Array(k.length))},nodebuffer:u},i.transformTo=function(k,C){if(C=C||"",!k)return C;i.checkSupport(k);var S=i.getTypeOf(C);return y[S][k](C)},i.resolve=function(k){for(var C=k.split("/"),S=[],$=0;$<C.length;$++){var D=C[$];D==="."||D===""&&$!==0&&$!==C.length-1||(D===".."?S.pop():S.push(D))}return S.join("/")},i.getTypeOf=function(k){return typeof k=="string"?"string":Object.prototype.toString.call(k)==="[object Array]"?"array":r.nodebuffer&&a.isBuffer(k)?"nodebuffer":r.uint8array&&k instanceof Uint8Array?"uint8array":r.arraybuffer&&k instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(k){if(!r[k.toLowerCase()])throw new Error(k+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(k){var C,S,$="";for(S=0;S<(k||"").length;S++)$+="\\x"+((C=k.charCodeAt(S))<16?"0":"")+C.toString(16).toUpperCase();return $},i.delay=function(k,C,S){setImmediate(function(){k.apply(S||null,C||[])})},i.inherits=function(k,C){function S(){}S.prototype=C.prototype,k.prototype=new S},i.extend=function(){var k,C,S={};for(k=0;k<arguments.length;k++)for(C in arguments[k])Object.prototype.hasOwnProperty.call(arguments[k],C)&&S[C]===void 0&&(S[C]=arguments[k][C]);return S},i.prepareContent=function(k,C,S,$,D){return l.Promise.resolve(C).then(function(R){return r.blob&&(R instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(R))!==-1)&&typeof FileReader<"u"?new l.Promise(function(V,E){var q=new FileReader;q.onload=function(X){V(X.target.result)},q.onerror=function(X){E(X.target.error)},q.readAsArrayBuffer(R)}):R}).then(function(R){var V=i.getTypeOf(R);return V?(V==="arraybuffer"?R=i.transformTo("uint8array",R):V==="string"&&(D?R=o.decode(R):S&&$!==!0&&(R=(function(E){return h(E,r.uint8array?new Uint8Array(E.length):new Array(E.length))})(R))),R):l.Promise.reject(new Error("Can't read the data of '"+k+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,s,i){var r=e("./reader/readerFor"),o=e("./utils"),a=e("./signature"),l=e("./zipEntry"),u=e("./support");function h(f){this.files=[],this.loadOptions=f}h.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(g)+", expected "+o.pretty(f)+")")}},isSignature:function(f,g){var m=this.reader.index;this.reader.setIndex(f);var y=this.reader.readString(4)===g;return this.reader.setIndex(m),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),g=u.uint8array?"uint8array":"array",m=o.transformTo(g,f);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,g,m,y=this.zip64EndOfCentralSize-44;0<y;)f=this.reader.readInt(2),g=this.reader.readInt(4),m=this.reader.readData(g),this.zip64ExtensibleData[f]={id:f,length:g,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,g;for(f=0;f<this.files.length;f++)g=this.files[f],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(f=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var g=f;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var y=g-m;if(0<y)this.isSignature(g,a.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(f){this.reader=r(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,s,i){var r=e("./reader/readerFor"),o=e("./utils"),a=e("./compressedObject"),l=e("./crc32"),u=e("./utf8"),h=e("./compressions"),f=e("./support");function g(m,y){this.options=m,this.loadOptions=y}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var y,k;if(m.skip(22),this.fileNameLength=m.readInt(2),k=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(k),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=(function(C){for(var S in h)if(Object.prototype.hasOwnProperty.call(h,S)&&h[S].magic===C)return h[S];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,y,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var y=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(y),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=r(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var y,k,C,S=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<S;)y=m.readInt(2),k=m.readInt(2),C=m.readData(k),this.extraFields[y]={id:y,length:k,value:C};m.setIndex(S)},handleUTF8:function(){var m=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var k=o.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(k)}var C=this.findExtraFieldUnicodeComment();if(C!==null)this.fileCommentStr=C;else{var S=o.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(S)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var y=r(m.value);return y.readInt(1)!==1||l(this.fileName)!==y.readInt(4)?null:u.utf8decode(y.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var y=r(m.value);return y.readInt(1)!==1||l(this.fileComment)!==y.readInt(4)?null:u.utf8decode(y.readData(m.length-5))}return null}},s.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,s,i){function r(y,k,C){this.name=y,this.dir=C.dir,this.date=C.date,this.comment=C.comment,this.unixPermissions=C.unixPermissions,this.dosPermissions=C.dosPermissions,this._data=k,this._dataBinary=C.binary,this.options={compression:C.compression,compressionOptions:C.compressionOptions}}var o=e("./stream/StreamHelper"),a=e("./stream/DataWorker"),l=e("./utf8"),u=e("./compressedObject"),h=e("./stream/GenericWorker");r.prototype={internalStream:function(y){var k=null,C="string";try{if(!y)throw new Error("No output type specified.");var S=(C=y.toLowerCase())==="string"||C==="text";C!=="binarystring"&&C!=="text"||(C="string"),k=this._decompressWorker();var $=!this._dataBinary;$&&!S&&(k=k.pipe(new l.Utf8EncodeWorker)),!$&&S&&(k=k.pipe(new l.Utf8DecodeWorker))}catch(D){(k=new h("error")).error(D)}return new o(k,C,"")},async:function(y,k){return this.internalStream(y).accumulate(k)},nodeStream:function(y,k){return this.internalStream(y||"nodebuffer").toNodejsStream(k)},_compressWorker:function(y,k){if(this._data instanceof u&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var C=this._decompressWorker();return this._dataBinary||(C=C.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(C,y,k)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof h?this._data:new a(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<f.length;m++)r.prototype[f[m]]=g;s.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,s,i){(function(r){var o,a,l=r.MutationObserver||r.WebKitMutationObserver;if(l){var u=0,h=new l(y),f=r.document.createTextNode("");h.observe(f,{characterData:!0}),o=function(){f.data=u=++u%2}}else if(r.setImmediate||r.MessageChannel===void 0)o="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var k=r.document.createElement("script");k.onreadystatechange=function(){y(),k.onreadystatechange=null,k.parentNode.removeChild(k),k=null},r.document.documentElement.appendChild(k)}:function(){setTimeout(y,0)};else{var g=new r.MessageChannel;g.port1.onmessage=y,o=function(){g.port2.postMessage(0)}}var m=[];function y(){var k,C;a=!0;for(var S=m.length;S;){for(C=m,m=[],k=-1;++k<S;)C[k]();S=m.length}a=!1}s.exports=function(k){m.push(k)!==1||a||o()}}).call(this,typeof tm<"u"?tm:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,s,i){var r=e("immediate");function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],h=["PENDING"];function f(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,S!==o&&k(this,S)}function g(S,$,D){this.promise=S,typeof $=="function"&&(this.onFulfilled=$,this.callFulfilled=this.otherCallFulfilled),typeof D=="function"&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}function m(S,$,D){r(function(){var R;try{R=$(D)}catch(V){return a.reject(S,V)}R===S?a.reject(S,new TypeError("Cannot resolve promise with itself")):a.resolve(S,R)})}function y(S){var $=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof $=="function")return function(){$.apply(S,arguments)}}function k(S,$){var D=!1;function R(q){D||(D=!0,a.reject(S,q))}function V(q){D||(D=!0,a.resolve(S,q))}var E=C(function(){$(V,R)});E.status==="error"&&R(E.value)}function C(S,$){var D={};try{D.value=S($),D.status="success"}catch(R){D.status="error",D.value=R}return D}(s.exports=f).prototype.finally=function(S){if(typeof S!="function")return this;var $=this.constructor;return this.then(function(D){return $.resolve(S()).then(function(){return D})},function(D){return $.resolve(S()).then(function(){throw D})})},f.prototype.catch=function(S){return this.then(null,S)},f.prototype.then=function(S,$){if(typeof S!="function"&&this.state===u||typeof $!="function"&&this.state===l)return this;var D=new this.constructor(o);return this.state!==h?m(D,this.state===u?S:$,this.outcome):this.queue.push(new g(D,S,$)),D},g.prototype.callFulfilled=function(S){a.resolve(this.promise,S)},g.prototype.otherCallFulfilled=function(S){m(this.promise,this.onFulfilled,S)},g.prototype.callRejected=function(S){a.reject(this.promise,S)},g.prototype.otherCallRejected=function(S){m(this.promise,this.onRejected,S)},a.resolve=function(S,$){var D=C(y,$);if(D.status==="error")return a.reject(S,D.value);var R=D.value;if(R)k(S,R);else{S.state=u,S.outcome=$;for(var V=-1,E=S.queue.length;++V<E;)S.queue[V].callFulfilled($)}return S},a.reject=function(S,$){S.state=l,S.outcome=$;for(var D=-1,R=S.queue.length;++D<R;)S.queue[D].callRejected($);return S},f.resolve=function(S){return S instanceof this?S:a.resolve(new this(o),S)},f.reject=function(S){var $=new this(o);return a.reject($,S)},f.all=function(S){var $=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=S.length,R=!1;if(!D)return this.resolve([]);for(var V=new Array(D),E=0,q=-1,X=new this(o);++q<D;)B(S[q],q);return X;function B(U,K){$.resolve(U).then(function(Y){V[K]=Y,++E!==D||R||(R=!0,a.resolve(X,V))},function(Y){R||(R=!0,a.reject(X,Y))})}},f.race=function(S){var $=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=S.length,R=!1;if(!D)return this.resolve([]);for(var V=-1,E=new this(o);++V<D;)q=S[V],$.resolve(q).then(function(X){R||(R=!0,a.resolve(E,X))},function(X){R||(R=!0,a.reject(E,X))});var q;return E}},{immediate:36}],38:[function(e,s,i){var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),s.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,s,i){var r=e("./zlib/deflate"),o=e("./utils/common"),a=e("./utils/strings"),l=e("./zlib/messages"),u=e("./zlib/zstream"),h=Object.prototype.toString,f=0,g=-1,m=0,y=8;function k(S){if(!(this instanceof k))return new k(S);this.options=o.assign({level:g,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},S||{});var $=this.options;$.raw&&0<$.windowBits?$.windowBits=-$.windowBits:$.gzip&&0<$.windowBits&&$.windowBits<16&&($.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var D=r.deflateInit2(this.strm,$.level,$.method,$.windowBits,$.memLevel,$.strategy);if(D!==f)throw new Error(l[D]);if($.header&&r.deflateSetHeader(this.strm,$.header),$.dictionary){var R;if(R=typeof $.dictionary=="string"?a.string2buf($.dictionary):h.call($.dictionary)==="[object ArrayBuffer]"?new Uint8Array($.dictionary):$.dictionary,(D=r.deflateSetDictionary(this.strm,R))!==f)throw new Error(l[D]);this._dict_set=!0}}function C(S,$){var D=new k($);if(D.push(S,!0),D.err)throw D.msg||l[D.err];return D.result}k.prototype.push=function(S,$){var D,R,V=this.strm,E=this.options.chunkSize;if(this.ended)return!1;R=$===~~$?$:$===!0?4:0,typeof S=="string"?V.input=a.string2buf(S):h.call(S)==="[object ArrayBuffer]"?V.input=new Uint8Array(S):V.input=S,V.next_in=0,V.avail_in=V.input.length;do{if(V.avail_out===0&&(V.output=new o.Buf8(E),V.next_out=0,V.avail_out=E),(D=r.deflate(V,R))!==1&&D!==f)return this.onEnd(D),!(this.ended=!0);V.avail_out!==0&&(V.avail_in!==0||R!==4&&R!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(V.output,V.next_out))):this.onData(o.shrinkBuf(V.output,V.next_out)))}while((0<V.avail_in||V.avail_out===0)&&D!==1);return R===4?(D=r.deflateEnd(this.strm),this.onEnd(D),this.ended=!0,D===f):R!==2||(this.onEnd(f),!(V.avail_out=0))},k.prototype.onData=function(S){this.chunks.push(S)},k.prototype.onEnd=function(S){S===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg},i.Deflate=k,i.deflate=C,i.deflateRaw=function(S,$){return($=$||{}).raw=!0,C(S,$)},i.gzip=function(S,$){return($=$||{}).gzip=!0,C(S,$)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,s,i){var r=e("./zlib/inflate"),o=e("./utils/common"),a=e("./utils/strings"),l=e("./zlib/constants"),u=e("./zlib/messages"),h=e("./zlib/zstream"),f=e("./zlib/gzheader"),g=Object.prototype.toString;function m(k){if(!(this instanceof m))return new m(k);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},k||{});var C=this.options;C.raw&&0<=C.windowBits&&C.windowBits<16&&(C.windowBits=-C.windowBits,C.windowBits===0&&(C.windowBits=-15)),!(0<=C.windowBits&&C.windowBits<16)||k&&k.windowBits||(C.windowBits+=32),15<C.windowBits&&C.windowBits<48&&(15&C.windowBits)==0&&(C.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var S=r.inflateInit2(this.strm,C.windowBits);if(S!==l.Z_OK)throw new Error(u[S]);this.header=new f,r.inflateGetHeader(this.strm,this.header)}function y(k,C){var S=new m(C);if(S.push(k,!0),S.err)throw S.msg||u[S.err];return S.result}m.prototype.push=function(k,C){var S,$,D,R,V,E,q=this.strm,X=this.options.chunkSize,B=this.options.dictionary,U=!1;if(this.ended)return!1;$=C===~~C?C:C===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof k=="string"?q.input=a.binstring2buf(k):g.call(k)==="[object ArrayBuffer]"?q.input=new Uint8Array(k):q.input=k,q.next_in=0,q.avail_in=q.input.length;do{if(q.avail_out===0&&(q.output=new o.Buf8(X),q.next_out=0,q.avail_out=X),(S=r.inflate(q,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&B&&(E=typeof B=="string"?a.string2buf(B):g.call(B)==="[object ArrayBuffer]"?new Uint8Array(B):B,S=r.inflateSetDictionary(this.strm,E)),S===l.Z_BUF_ERROR&&U===!0&&(S=l.Z_OK,U=!1),S!==l.Z_STREAM_END&&S!==l.Z_OK)return this.onEnd(S),!(this.ended=!0);q.next_out&&(q.avail_out!==0&&S!==l.Z_STREAM_END&&(q.avail_in!==0||$!==l.Z_FINISH&&$!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(D=a.utf8border(q.output,q.next_out),R=q.next_out-D,V=a.buf2string(q.output,D),q.next_out=R,q.avail_out=X-R,R&&o.arraySet(q.output,q.output,D,R,0),this.onData(V)):this.onData(o.shrinkBuf(q.output,q.next_out)))),q.avail_in===0&&q.avail_out===0&&(U=!0)}while((0<q.avail_in||q.avail_out===0)&&S!==l.Z_STREAM_END);return S===l.Z_STREAM_END&&($=l.Z_FINISH),$===l.Z_FINISH?(S=r.inflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===l.Z_OK):$!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(q.avail_out=0))},m.prototype.onData=function(k){this.chunks.push(k)},m.prototype.onEnd=function(k){k===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=k,this.msg=this.strm.msg},i.Inflate=m,i.inflate=y,i.inflateRaw=function(k,C){return(C=C||{}).raw=!0,y(k,C)},i.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,s,i){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var h=u.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f])}}return l},i.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var o={arraySet:function(l,u,h,f,g){if(u.subarray&&l.subarray)l.set(u.subarray(h,h+f),g);else for(var m=0;m<f;m++)l[g+m]=u[h+m]},flattenChunks:function(l){var u,h,f,g,m,y;for(u=f=0,h=l.length;u<h;u++)f+=l[u].length;for(y=new Uint8Array(f),u=g=0,h=l.length;u<h;u++)m=l[u],y.set(m,g),g+=m.length;return y}},a={arraySet:function(l,u,h,f,g){for(var m=0;m<f;m++)l[g+m]=u[h+m]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(r)},{}],42:[function(e,s,i){var r=e("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new r.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function h(f,g){if(g<65537&&(f.subarray&&a||!f.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(f,g));for(var m="",y=0;y<g;y++)m+=String.fromCharCode(f[y]);return m}l[254]=l[254]=1,i.string2buf=function(f){var g,m,y,k,C,S=f.length,$=0;for(k=0;k<S;k++)(64512&(m=f.charCodeAt(k)))==55296&&k+1<S&&(64512&(y=f.charCodeAt(k+1)))==56320&&(m=65536+(m-55296<<10)+(y-56320),k++),$+=m<128?1:m<2048?2:m<65536?3:4;for(g=new r.Buf8($),k=C=0;C<$;k++)(64512&(m=f.charCodeAt(k)))==55296&&k+1<S&&(64512&(y=f.charCodeAt(k+1)))==56320&&(m=65536+(m-55296<<10)+(y-56320),k++),m<128?g[C++]=m:(m<2048?g[C++]=192|m>>>6:(m<65536?g[C++]=224|m>>>12:(g[C++]=240|m>>>18,g[C++]=128|m>>>12&63),g[C++]=128|m>>>6&63),g[C++]=128|63&m);return g},i.buf2binstring=function(f){return h(f,f.length)},i.binstring2buf=function(f){for(var g=new r.Buf8(f.length),m=0,y=g.length;m<y;m++)g[m]=f.charCodeAt(m);return g},i.buf2string=function(f,g){var m,y,k,C,S=g||f.length,$=new Array(2*S);for(m=y=0;m<S;)if((k=f[m++])<128)$[y++]=k;else if(4<(C=l[k]))$[y++]=65533,m+=C-1;else{for(k&=C===2?31:C===3?15:7;1<C&&m<S;)k=k<<6|63&f[m++],C--;1<C?$[y++]=65533:k<65536?$[y++]=k:(k-=65536,$[y++]=55296|k>>10&1023,$[y++]=56320|1023&k)}return h($,y)},i.utf8border=function(f,g){var m;for((g=g||f.length)>f.length&&(g=f.length),m=g-1;0<=m&&(192&f[m])==128;)m--;return m<0||m===0?g:m+l[f[m]]>g?m:g}},{"./common":41}],43:[function(e,s,i){s.exports=function(r,o,a,l){for(var u=65535&r|0,h=r>>>16&65535|0,f=0;a!==0;){for(a-=f=2e3<a?2e3:a;h=h+(u=u+o[l++]|0)|0,--f;);u%=65521,h%=65521}return u|h<<16|0}},{}],44:[function(e,s,i){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,s,i){var r=(function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a})();s.exports=function(o,a,l,u){var h=r,f=u+l;o^=-1;for(var g=u;g<f;g++)o=o>>>8^h[255&(o^a[g])];return-1^o}},{}],46:[function(e,s,i){var r,o=e("../utils/common"),a=e("./trees"),l=e("./adler32"),u=e("./crc32"),h=e("./messages"),f=0,g=4,m=0,y=-2,k=-1,C=4,S=2,$=8,D=9,R=286,V=30,E=19,q=2*R+1,X=15,B=3,U=258,K=U+B+1,Y=42,ct=113,j=1,ht=2,It=3,yt=4;function Ot(J,Mt){return J.msg=h[Mt],Mt}function Ct(J){return(J<<1)-(4<J?9:0)}function Gt(J){for(var Mt=J.length;0<=--Mt;)J[Mt]=0}function vt(J){var Mt=J.state,Ft=Mt.pending;Ft>J.avail_out&&(Ft=J.avail_out),Ft!==0&&(o.arraySet(J.output,Mt.pending_buf,Mt.pending_out,Ft,J.next_out),J.next_out+=Ft,Mt.pending_out+=Ft,J.total_out+=Ft,J.avail_out-=Ft,Mt.pending-=Ft,Mt.pending===0&&(Mt.pending_out=0))}function at(J,Mt){a._tr_flush_block(J,0<=J.block_start?J.block_start:-1,J.strstart-J.block_start,Mt),J.block_start=J.strstart,vt(J.strm)}function Pt(J,Mt){J.pending_buf[J.pending++]=Mt}function jt(J,Mt){J.pending_buf[J.pending++]=Mt>>>8&255,J.pending_buf[J.pending++]=255&Mt}function Ut(J,Mt){var Ft,St,ft=J.max_chain_length,zt=J.strstart,Et=J.prev_length,de=J.nice_match,Xt=J.strstart>J.w_size-K?J.strstart-(J.w_size-K):0,be=J.window,Te=J.w_mask,$e=J.prev,Pe=J.strstart+U,Ae=be[zt+Et-1],vn=be[zt+Et];J.prev_length>=J.good_match&&(ft>>=2),de>J.lookahead&&(de=J.lookahead);do if(be[(Ft=Mt)+Et]===vn&&be[Ft+Et-1]===Ae&&be[Ft]===be[zt]&&be[++Ft]===be[zt+1]){zt+=2,Ft++;do;while(be[++zt]===be[++Ft]&&be[++zt]===be[++Ft]&&be[++zt]===be[++Ft]&&be[++zt]===be[++Ft]&&be[++zt]===be[++Ft]&&be[++zt]===be[++Ft]&&be[++zt]===be[++Ft]&&be[++zt]===be[++Ft]&&zt<Pe);if(St=U-(Pe-zt),zt=Pe-U,Et<St){if(J.match_start=Mt,de<=(Et=St))break;Ae=be[zt+Et-1],vn=be[zt+Et]}}while((Mt=$e[Mt&Te])>Xt&&--ft!=0);return Et<=J.lookahead?Et:J.lookahead}function me(J){var Mt,Ft,St,ft,zt,Et,de,Xt,be,Te,$e=J.w_size;do{if(ft=J.window_size-J.lookahead-J.strstart,J.strstart>=$e+($e-K)){for(o.arraySet(J.window,J.window,$e,$e,0),J.match_start-=$e,J.strstart-=$e,J.block_start-=$e,Mt=Ft=J.hash_size;St=J.head[--Mt],J.head[Mt]=$e<=St?St-$e:0,--Ft;);for(Mt=Ft=$e;St=J.prev[--Mt],J.prev[Mt]=$e<=St?St-$e:0,--Ft;);ft+=$e}if(J.strm.avail_in===0)break;if(Et=J.strm,de=J.window,Xt=J.strstart+J.lookahead,be=ft,Te=void 0,Te=Et.avail_in,be<Te&&(Te=be),Ft=Te===0?0:(Et.avail_in-=Te,o.arraySet(de,Et.input,Et.next_in,Te,Xt),Et.state.wrap===1?Et.adler=l(Et.adler,de,Te,Xt):Et.state.wrap===2&&(Et.adler=u(Et.adler,de,Te,Xt)),Et.next_in+=Te,Et.total_in+=Te,Te),J.lookahead+=Ft,J.lookahead+J.insert>=B)for(zt=J.strstart-J.insert,J.ins_h=J.window[zt],J.ins_h=(J.ins_h<<J.hash_shift^J.window[zt+1])&J.hash_mask;J.insert&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[zt+B-1])&J.hash_mask,J.prev[zt&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=zt,zt++,J.insert--,!(J.lookahead+J.insert<B)););}while(J.lookahead<K&&J.strm.avail_in!==0)}function Ee(J,Mt){for(var Ft,St;;){if(J.lookahead<K){if(me(J),J.lookahead<K&&Mt===f)return j;if(J.lookahead===0)break}if(Ft=0,J.lookahead>=B&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+B-1])&J.hash_mask,Ft=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart),Ft!==0&&J.strstart-Ft<=J.w_size-K&&(J.match_length=Ut(J,Ft)),J.match_length>=B)if(St=a._tr_tally(J,J.strstart-J.match_start,J.match_length-B),J.lookahead-=J.match_length,J.match_length<=J.max_lazy_match&&J.lookahead>=B){for(J.match_length--;J.strstart++,J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+B-1])&J.hash_mask,Ft=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart,--J.match_length!=0;);J.strstart++}else J.strstart+=J.match_length,J.match_length=0,J.ins_h=J.window[J.strstart],J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+1])&J.hash_mask;else St=a._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++;if(St&&(at(J,!1),J.strm.avail_out===0))return j}return J.insert=J.strstart<B-1?J.strstart:B-1,Mt===g?(at(J,!0),J.strm.avail_out===0?It:yt):J.last_lit&&(at(J,!1),J.strm.avail_out===0)?j:ht}function le(J,Mt){for(var Ft,St,ft;;){if(J.lookahead<K){if(me(J),J.lookahead<K&&Mt===f)return j;if(J.lookahead===0)break}if(Ft=0,J.lookahead>=B&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+B-1])&J.hash_mask,Ft=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart),J.prev_length=J.match_length,J.prev_match=J.match_start,J.match_length=B-1,Ft!==0&&J.prev_length<J.max_lazy_match&&J.strstart-Ft<=J.w_size-K&&(J.match_length=Ut(J,Ft),J.match_length<=5&&(J.strategy===1||J.match_length===B&&4096<J.strstart-J.match_start)&&(J.match_length=B-1)),J.prev_length>=B&&J.match_length<=J.prev_length){for(ft=J.strstart+J.lookahead-B,St=a._tr_tally(J,J.strstart-1-J.prev_match,J.prev_length-B),J.lookahead-=J.prev_length-1,J.prev_length-=2;++J.strstart<=ft&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+B-1])&J.hash_mask,Ft=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart),--J.prev_length!=0;);if(J.match_available=0,J.match_length=B-1,J.strstart++,St&&(at(J,!1),J.strm.avail_out===0))return j}else if(J.match_available){if((St=a._tr_tally(J,0,J.window[J.strstart-1]))&&at(J,!1),J.strstart++,J.lookahead--,J.strm.avail_out===0)return j}else J.match_available=1,J.strstart++,J.lookahead--}return J.match_available&&(St=a._tr_tally(J,0,J.window[J.strstart-1]),J.match_available=0),J.insert=J.strstart<B-1?J.strstart:B-1,Mt===g?(at(J,!0),J.strm.avail_out===0?It:yt):J.last_lit&&(at(J,!1),J.strm.avail_out===0)?j:ht}function ce(J,Mt,Ft,St,ft){this.good_length=J,this.max_lazy=Mt,this.nice_length=Ft,this.max_chain=St,this.func=ft}function De(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=$,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*q),this.dyn_dtree=new o.Buf16(2*(2*V+1)),this.bl_tree=new o.Buf16(2*(2*E+1)),Gt(this.dyn_ltree),Gt(this.dyn_dtree),Gt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(X+1),this.heap=new o.Buf16(2*R+1),Gt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*R+1),Gt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ae(J){var Mt;return J&&J.state?(J.total_in=J.total_out=0,J.data_type=S,(Mt=J.state).pending=0,Mt.pending_out=0,Mt.wrap<0&&(Mt.wrap=-Mt.wrap),Mt.status=Mt.wrap?Y:ct,J.adler=Mt.wrap===2?0:1,Mt.last_flush=f,a._tr_init(Mt),m):Ot(J,y)}function Oe(J){var Mt=ae(J);return Mt===m&&(function(Ft){Ft.window_size=2*Ft.w_size,Gt(Ft.head),Ft.max_lazy_match=r[Ft.level].max_lazy,Ft.good_match=r[Ft.level].good_length,Ft.nice_match=r[Ft.level].nice_length,Ft.max_chain_length=r[Ft.level].max_chain,Ft.strstart=0,Ft.block_start=0,Ft.lookahead=0,Ft.insert=0,Ft.match_length=Ft.prev_length=B-1,Ft.match_available=0,Ft.ins_h=0})(J.state),Mt}function Le(J,Mt,Ft,St,ft,zt){if(!J)return y;var Et=1;if(Mt===k&&(Mt=6),St<0?(Et=0,St=-St):15<St&&(Et=2,St-=16),ft<1||D<ft||Ft!==$||St<8||15<St||Mt<0||9<Mt||zt<0||C<zt)return Ot(J,y);St===8&&(St=9);var de=new De;return(J.state=de).strm=J,de.wrap=Et,de.gzhead=null,de.w_bits=St,de.w_size=1<<de.w_bits,de.w_mask=de.w_size-1,de.hash_bits=ft+7,de.hash_size=1<<de.hash_bits,de.hash_mask=de.hash_size-1,de.hash_shift=~~((de.hash_bits+B-1)/B),de.window=new o.Buf8(2*de.w_size),de.head=new o.Buf16(de.hash_size),de.prev=new o.Buf16(de.w_size),de.lit_bufsize=1<<ft+6,de.pending_buf_size=4*de.lit_bufsize,de.pending_buf=new o.Buf8(de.pending_buf_size),de.d_buf=1*de.lit_bufsize,de.l_buf=3*de.lit_bufsize,de.level=Mt,de.strategy=zt,de.method=Ft,Oe(J)}r=[new ce(0,0,0,0,function(J,Mt){var Ft=65535;for(Ft>J.pending_buf_size-5&&(Ft=J.pending_buf_size-5);;){if(J.lookahead<=1){if(me(J),J.lookahead===0&&Mt===f)return j;if(J.lookahead===0)break}J.strstart+=J.lookahead,J.lookahead=0;var St=J.block_start+Ft;if((J.strstart===0||J.strstart>=St)&&(J.lookahead=J.strstart-St,J.strstart=St,at(J,!1),J.strm.avail_out===0)||J.strstart-J.block_start>=J.w_size-K&&(at(J,!1),J.strm.avail_out===0))return j}return J.insert=0,Mt===g?(at(J,!0),J.strm.avail_out===0?It:yt):(J.strstart>J.block_start&&(at(J,!1),J.strm.avail_out),j)}),new ce(4,4,8,4,Ee),new ce(4,5,16,8,Ee),new ce(4,6,32,32,Ee),new ce(4,4,16,16,le),new ce(8,16,32,32,le),new ce(8,16,128,128,le),new ce(8,32,128,256,le),new ce(32,128,258,1024,le),new ce(32,258,258,4096,le)],i.deflateInit=function(J,Mt){return Le(J,Mt,$,15,8,0)},i.deflateInit2=Le,i.deflateReset=Oe,i.deflateResetKeep=ae,i.deflateSetHeader=function(J,Mt){return J&&J.state?J.state.wrap!==2?y:(J.state.gzhead=Mt,m):y},i.deflate=function(J,Mt){var Ft,St,ft,zt;if(!J||!J.state||5<Mt||Mt<0)return J?Ot(J,y):y;if(St=J.state,!J.output||!J.input&&J.avail_in!==0||St.status===666&&Mt!==g)return Ot(J,J.avail_out===0?-5:y);if(St.strm=J,Ft=St.last_flush,St.last_flush=Mt,St.status===Y)if(St.wrap===2)J.adler=0,Pt(St,31),Pt(St,139),Pt(St,8),St.gzhead?(Pt(St,(St.gzhead.text?1:0)+(St.gzhead.hcrc?2:0)+(St.gzhead.extra?4:0)+(St.gzhead.name?8:0)+(St.gzhead.comment?16:0)),Pt(St,255&St.gzhead.time),Pt(St,St.gzhead.time>>8&255),Pt(St,St.gzhead.time>>16&255),Pt(St,St.gzhead.time>>24&255),Pt(St,St.level===9?2:2<=St.strategy||St.level<2?4:0),Pt(St,255&St.gzhead.os),St.gzhead.extra&&St.gzhead.extra.length&&(Pt(St,255&St.gzhead.extra.length),Pt(St,St.gzhead.extra.length>>8&255)),St.gzhead.hcrc&&(J.adler=u(J.adler,St.pending_buf,St.pending,0)),St.gzindex=0,St.status=69):(Pt(St,0),Pt(St,0),Pt(St,0),Pt(St,0),Pt(St,0),Pt(St,St.level===9?2:2<=St.strategy||St.level<2?4:0),Pt(St,3),St.status=ct);else{var Et=$+(St.w_bits-8<<4)<<8;Et|=(2<=St.strategy||St.level<2?0:St.level<6?1:St.level===6?2:3)<<6,St.strstart!==0&&(Et|=32),Et+=31-Et%31,St.status=ct,jt(St,Et),St.strstart!==0&&(jt(St,J.adler>>>16),jt(St,65535&J.adler)),J.adler=1}if(St.status===69)if(St.gzhead.extra){for(ft=St.pending;St.gzindex<(65535&St.gzhead.extra.length)&&(St.pending!==St.pending_buf_size||(St.gzhead.hcrc&&St.pending>ft&&(J.adler=u(J.adler,St.pending_buf,St.pending-ft,ft)),vt(J),ft=St.pending,St.pending!==St.pending_buf_size));)Pt(St,255&St.gzhead.extra[St.gzindex]),St.gzindex++;St.gzhead.hcrc&&St.pending>ft&&(J.adler=u(J.adler,St.pending_buf,St.pending-ft,ft)),St.gzindex===St.gzhead.extra.length&&(St.gzindex=0,St.status=73)}else St.status=73;if(St.status===73)if(St.gzhead.name){ft=St.pending;do{if(St.pending===St.pending_buf_size&&(St.gzhead.hcrc&&St.pending>ft&&(J.adler=u(J.adler,St.pending_buf,St.pending-ft,ft)),vt(J),ft=St.pending,St.pending===St.pending_buf_size)){zt=1;break}zt=St.gzindex<St.gzhead.name.length?255&St.gzhead.name.charCodeAt(St.gzindex++):0,Pt(St,zt)}while(zt!==0);St.gzhead.hcrc&&St.pending>ft&&(J.adler=u(J.adler,St.pending_buf,St.pending-ft,ft)),zt===0&&(St.gzindex=0,St.status=91)}else St.status=91;if(St.status===91)if(St.gzhead.comment){ft=St.pending;do{if(St.pending===St.pending_buf_size&&(St.gzhead.hcrc&&St.pending>ft&&(J.adler=u(J.adler,St.pending_buf,St.pending-ft,ft)),vt(J),ft=St.pending,St.pending===St.pending_buf_size)){zt=1;break}zt=St.gzindex<St.gzhead.comment.length?255&St.gzhead.comment.charCodeAt(St.gzindex++):0,Pt(St,zt)}while(zt!==0);St.gzhead.hcrc&&St.pending>ft&&(J.adler=u(J.adler,St.pending_buf,St.pending-ft,ft)),zt===0&&(St.status=103)}else St.status=103;if(St.status===103&&(St.gzhead.hcrc?(St.pending+2>St.pending_buf_size&&vt(J),St.pending+2<=St.pending_buf_size&&(Pt(St,255&J.adler),Pt(St,J.adler>>8&255),J.adler=0,St.status=ct)):St.status=ct),St.pending!==0){if(vt(J),J.avail_out===0)return St.last_flush=-1,m}else if(J.avail_in===0&&Ct(Mt)<=Ct(Ft)&&Mt!==g)return Ot(J,-5);if(St.status===666&&J.avail_in!==0)return Ot(J,-5);if(J.avail_in!==0||St.lookahead!==0||Mt!==f&&St.status!==666){var de=St.strategy===2?(function(Xt,be){for(var Te;;){if(Xt.lookahead===0&&(me(Xt),Xt.lookahead===0)){if(be===f)return j;break}if(Xt.match_length=0,Te=a._tr_tally(Xt,0,Xt.window[Xt.strstart]),Xt.lookahead--,Xt.strstart++,Te&&(at(Xt,!1),Xt.strm.avail_out===0))return j}return Xt.insert=0,be===g?(at(Xt,!0),Xt.strm.avail_out===0?It:yt):Xt.last_lit&&(at(Xt,!1),Xt.strm.avail_out===0)?j:ht})(St,Mt):St.strategy===3?(function(Xt,be){for(var Te,$e,Pe,Ae,vn=Xt.window;;){if(Xt.lookahead<=U){if(me(Xt),Xt.lookahead<=U&&be===f)return j;if(Xt.lookahead===0)break}if(Xt.match_length=0,Xt.lookahead>=B&&0<Xt.strstart&&($e=vn[Pe=Xt.strstart-1])===vn[++Pe]&&$e===vn[++Pe]&&$e===vn[++Pe]){Ae=Xt.strstart+U;do;while($e===vn[++Pe]&&$e===vn[++Pe]&&$e===vn[++Pe]&&$e===vn[++Pe]&&$e===vn[++Pe]&&$e===vn[++Pe]&&$e===vn[++Pe]&&$e===vn[++Pe]&&Pe<Ae);Xt.match_length=U-(Ae-Pe),Xt.match_length>Xt.lookahead&&(Xt.match_length=Xt.lookahead)}if(Xt.match_length>=B?(Te=a._tr_tally(Xt,1,Xt.match_length-B),Xt.lookahead-=Xt.match_length,Xt.strstart+=Xt.match_length,Xt.match_length=0):(Te=a._tr_tally(Xt,0,Xt.window[Xt.strstart]),Xt.lookahead--,Xt.strstart++),Te&&(at(Xt,!1),Xt.strm.avail_out===0))return j}return Xt.insert=0,be===g?(at(Xt,!0),Xt.strm.avail_out===0?It:yt):Xt.last_lit&&(at(Xt,!1),Xt.strm.avail_out===0)?j:ht})(St,Mt):r[St.level].func(St,Mt);if(de!==It&&de!==yt||(St.status=666),de===j||de===It)return J.avail_out===0&&(St.last_flush=-1),m;if(de===ht&&(Mt===1?a._tr_align(St):Mt!==5&&(a._tr_stored_block(St,0,0,!1),Mt===3&&(Gt(St.head),St.lookahead===0&&(St.strstart=0,St.block_start=0,St.insert=0))),vt(J),J.avail_out===0))return St.last_flush=-1,m}return Mt!==g?m:St.wrap<=0?1:(St.wrap===2?(Pt(St,255&J.adler),Pt(St,J.adler>>8&255),Pt(St,J.adler>>16&255),Pt(St,J.adler>>24&255),Pt(St,255&J.total_in),Pt(St,J.total_in>>8&255),Pt(St,J.total_in>>16&255),Pt(St,J.total_in>>24&255)):(jt(St,J.adler>>>16),jt(St,65535&J.adler)),vt(J),0<St.wrap&&(St.wrap=-St.wrap),St.pending!==0?m:1)},i.deflateEnd=function(J){var Mt;return J&&J.state?(Mt=J.state.status)!==Y&&Mt!==69&&Mt!==73&&Mt!==91&&Mt!==103&&Mt!==ct&&Mt!==666?Ot(J,y):(J.state=null,Mt===ct?Ot(J,-3):m):y},i.deflateSetDictionary=function(J,Mt){var Ft,St,ft,zt,Et,de,Xt,be,Te=Mt.length;if(!J||!J.state||(zt=(Ft=J.state).wrap)===2||zt===1&&Ft.status!==Y||Ft.lookahead)return y;for(zt===1&&(J.adler=l(J.adler,Mt,Te,0)),Ft.wrap=0,Te>=Ft.w_size&&(zt===0&&(Gt(Ft.head),Ft.strstart=0,Ft.block_start=0,Ft.insert=0),be=new o.Buf8(Ft.w_size),o.arraySet(be,Mt,Te-Ft.w_size,Ft.w_size,0),Mt=be,Te=Ft.w_size),Et=J.avail_in,de=J.next_in,Xt=J.input,J.avail_in=Te,J.next_in=0,J.input=Mt,me(Ft);Ft.lookahead>=B;){for(St=Ft.strstart,ft=Ft.lookahead-(B-1);Ft.ins_h=(Ft.ins_h<<Ft.hash_shift^Ft.window[St+B-1])&Ft.hash_mask,Ft.prev[St&Ft.w_mask]=Ft.head[Ft.ins_h],Ft.head[Ft.ins_h]=St,St++,--ft;);Ft.strstart=St,Ft.lookahead=B-1,me(Ft)}return Ft.strstart+=Ft.lookahead,Ft.block_start=Ft.strstart,Ft.insert=Ft.lookahead,Ft.lookahead=0,Ft.match_length=Ft.prev_length=B-1,Ft.match_available=0,J.next_in=de,J.input=Xt,J.avail_in=Et,Ft.wrap=zt,m},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,s,i){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,s,i){s.exports=function(r,o){var a,l,u,h,f,g,m,y,k,C,S,$,D,R,V,E,q,X,B,U,K,Y,ct,j,ht;a=r.state,l=r.next_in,j=r.input,u=l+(r.avail_in-5),h=r.next_out,ht=r.output,f=h-(o-r.avail_out),g=h+(r.avail_out-257),m=a.dmax,y=a.wsize,k=a.whave,C=a.wnext,S=a.window,$=a.hold,D=a.bits,R=a.lencode,V=a.distcode,E=(1<<a.lenbits)-1,q=(1<<a.distbits)-1;t:do{D<15&&($+=j[l++]<<D,D+=8,$+=j[l++]<<D,D+=8),X=R[$&E];e:for(;;){if($>>>=B=X>>>24,D-=B,(B=X>>>16&255)===0)ht[h++]=65535&X;else{if(!(16&B)){if((64&B)==0){X=R[(65535&X)+($&(1<<B)-1)];continue e}if(32&B){a.mode=12;break t}r.msg="invalid literal/length code",a.mode=30;break t}U=65535&X,(B&=15)&&(D<B&&($+=j[l++]<<D,D+=8),U+=$&(1<<B)-1,$>>>=B,D-=B),D<15&&($+=j[l++]<<D,D+=8,$+=j[l++]<<D,D+=8),X=V[$&q];n:for(;;){if($>>>=B=X>>>24,D-=B,!(16&(B=X>>>16&255))){if((64&B)==0){X=V[(65535&X)+($&(1<<B)-1)];continue n}r.msg="invalid distance code",a.mode=30;break t}if(K=65535&X,D<(B&=15)&&($+=j[l++]<<D,(D+=8)<B&&($+=j[l++]<<D,D+=8)),m<(K+=$&(1<<B)-1)){r.msg="invalid distance too far back",a.mode=30;break t}if($>>>=B,D-=B,(B=h-f)<K){if(k<(B=K-B)&&a.sane){r.msg="invalid distance too far back",a.mode=30;break t}if(ct=S,(Y=0)===C){if(Y+=y-B,B<U){for(U-=B;ht[h++]=S[Y++],--B;);Y=h-K,ct=ht}}else if(C<B){if(Y+=y+C-B,(B-=C)<U){for(U-=B;ht[h++]=S[Y++],--B;);if(Y=0,C<U){for(U-=B=C;ht[h++]=S[Y++],--B;);Y=h-K,ct=ht}}}else if(Y+=C-B,B<U){for(U-=B;ht[h++]=S[Y++],--B;);Y=h-K,ct=ht}for(;2<U;)ht[h++]=ct[Y++],ht[h++]=ct[Y++],ht[h++]=ct[Y++],U-=3;U&&(ht[h++]=ct[Y++],1<U&&(ht[h++]=ct[Y++]))}else{for(Y=h-K;ht[h++]=ht[Y++],ht[h++]=ht[Y++],ht[h++]=ht[Y++],2<(U-=3););U&&(ht[h++]=ht[Y++],1<U&&(ht[h++]=ht[Y++]))}break}}break}}while(l<u&&h<g);l-=U=D>>3,$&=(1<<(D-=U<<3))-1,r.next_in=l,r.next_out=h,r.avail_in=l<u?u-l+5:5-(l-u),r.avail_out=h<g?g-h+257:257-(h-g),a.hold=$,a.bits=D}},{}],49:[function(e,s,i){var r=e("../utils/common"),o=e("./adler32"),a=e("./crc32"),l=e("./inffast"),u=e("./inftrees"),h=1,f=2,g=0,m=-2,y=1,k=852,C=592;function S(Y){return(Y>>>24&255)+(Y>>>8&65280)+((65280&Y)<<8)+((255&Y)<<24)}function $(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function D(Y){var ct;return Y&&Y.state?(ct=Y.state,Y.total_in=Y.total_out=ct.total=0,Y.msg="",ct.wrap&&(Y.adler=1&ct.wrap),ct.mode=y,ct.last=0,ct.havedict=0,ct.dmax=32768,ct.head=null,ct.hold=0,ct.bits=0,ct.lencode=ct.lendyn=new r.Buf32(k),ct.distcode=ct.distdyn=new r.Buf32(C),ct.sane=1,ct.back=-1,g):m}function R(Y){var ct;return Y&&Y.state?((ct=Y.state).wsize=0,ct.whave=0,ct.wnext=0,D(Y)):m}function V(Y,ct){var j,ht;return Y&&Y.state?(ht=Y.state,ct<0?(j=0,ct=-ct):(j=1+(ct>>4),ct<48&&(ct&=15)),ct&&(ct<8||15<ct)?m:(ht.window!==null&&ht.wbits!==ct&&(ht.window=null),ht.wrap=j,ht.wbits=ct,R(Y))):m}function E(Y,ct){var j,ht;return Y?(ht=new $,(Y.state=ht).window=null,(j=V(Y,ct))!==g&&(Y.state=null),j):m}var q,X,B=!0;function U(Y){if(B){var ct;for(q=new r.Buf32(512),X=new r.Buf32(32),ct=0;ct<144;)Y.lens[ct++]=8;for(;ct<256;)Y.lens[ct++]=9;for(;ct<280;)Y.lens[ct++]=7;for(;ct<288;)Y.lens[ct++]=8;for(u(h,Y.lens,0,288,q,0,Y.work,{bits:9}),ct=0;ct<32;)Y.lens[ct++]=5;u(f,Y.lens,0,32,X,0,Y.work,{bits:5}),B=!1}Y.lencode=q,Y.lenbits=9,Y.distcode=X,Y.distbits=5}function K(Y,ct,j,ht){var It,yt=Y.state;return yt.window===null&&(yt.wsize=1<<yt.wbits,yt.wnext=0,yt.whave=0,yt.window=new r.Buf8(yt.wsize)),ht>=yt.wsize?(r.arraySet(yt.window,ct,j-yt.wsize,yt.wsize,0),yt.wnext=0,yt.whave=yt.wsize):(ht<(It=yt.wsize-yt.wnext)&&(It=ht),r.arraySet(yt.window,ct,j-ht,It,yt.wnext),(ht-=It)?(r.arraySet(yt.window,ct,j-ht,ht,0),yt.wnext=ht,yt.whave=yt.wsize):(yt.wnext+=It,yt.wnext===yt.wsize&&(yt.wnext=0),yt.whave<yt.wsize&&(yt.whave+=It))),0}i.inflateReset=R,i.inflateReset2=V,i.inflateResetKeep=D,i.inflateInit=function(Y){return E(Y,15)},i.inflateInit2=E,i.inflate=function(Y,ct){var j,ht,It,yt,Ot,Ct,Gt,vt,at,Pt,jt,Ut,me,Ee,le,ce,De,ae,Oe,Le,J,Mt,Ft,St,ft=0,zt=new r.Buf8(4),Et=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Y||!Y.state||!Y.output||!Y.input&&Y.avail_in!==0)return m;(j=Y.state).mode===12&&(j.mode=13),Ot=Y.next_out,It=Y.output,Gt=Y.avail_out,yt=Y.next_in,ht=Y.input,Ct=Y.avail_in,vt=j.hold,at=j.bits,Pt=Ct,jt=Gt,Mt=g;t:for(;;)switch(j.mode){case y:if(j.wrap===0){j.mode=13;break}for(;at<16;){if(Ct===0)break t;Ct--,vt+=ht[yt++]<<at,at+=8}if(2&j.wrap&&vt===35615){zt[j.check=0]=255&vt,zt[1]=vt>>>8&255,j.check=a(j.check,zt,2,0),at=vt=0,j.mode=2;break}if(j.flags=0,j.head&&(j.head.done=!1),!(1&j.wrap)||(((255&vt)<<8)+(vt>>8))%31){Y.msg="incorrect header check",j.mode=30;break}if((15&vt)!=8){Y.msg="unknown compression method",j.mode=30;break}if(at-=4,J=8+(15&(vt>>>=4)),j.wbits===0)j.wbits=J;else if(J>j.wbits){Y.msg="invalid window size",j.mode=30;break}j.dmax=1<<J,Y.adler=j.check=1,j.mode=512&vt?10:12,at=vt=0;break;case 2:for(;at<16;){if(Ct===0)break t;Ct--,vt+=ht[yt++]<<at,at+=8}if(j.flags=vt,(255&j.flags)!=8){Y.msg="unknown compression method",j.mode=30;break}if(57344&j.flags){Y.msg="unknown header flags set",j.mode=30;break}j.head&&(j.head.text=vt>>8&1),512&j.flags&&(zt[0]=255&vt,zt[1]=vt>>>8&255,j.check=a(j.check,zt,2,0)),at=vt=0,j.mode=3;case 3:for(;at<32;){if(Ct===0)break t;Ct--,vt+=ht[yt++]<<at,at+=8}j.head&&(j.head.time=vt),512&j.flags&&(zt[0]=255&vt,zt[1]=vt>>>8&255,zt[2]=vt>>>16&255,zt[3]=vt>>>24&255,j.check=a(j.check,zt,4,0)),at=vt=0,j.mode=4;case 4:for(;at<16;){if(Ct===0)break t;Ct--,vt+=ht[yt++]<<at,at+=8}j.head&&(j.head.xflags=255&vt,j.head.os=vt>>8),512&j.flags&&(zt[0]=255&vt,zt[1]=vt>>>8&255,j.check=a(j.check,zt,2,0)),at=vt=0,j.mode=5;case 5:if(1024&j.flags){for(;at<16;){if(Ct===0)break t;Ct--,vt+=ht[yt++]<<at,at+=8}j.length=vt,j.head&&(j.head.extra_len=vt),512&j.flags&&(zt[0]=255&vt,zt[1]=vt>>>8&255,j.check=a(j.check,zt,2,0)),at=vt=0}else j.head&&(j.head.extra=null);j.mode=6;case 6:if(1024&j.flags&&(Ct<(Ut=j.length)&&(Ut=Ct),Ut&&(j.head&&(J=j.head.extra_len-j.length,j.head.extra||(j.head.extra=new Array(j.head.extra_len)),r.arraySet(j.head.extra,ht,yt,Ut,J)),512&j.flags&&(j.check=a(j.check,ht,Ut,yt)),Ct-=Ut,yt+=Ut,j.length-=Ut),j.length))break t;j.length=0,j.mode=7;case 7:if(2048&j.flags){if(Ct===0)break t;for(Ut=0;J=ht[yt+Ut++],j.head&&J&&j.length<65536&&(j.head.name+=String.fromCharCode(J)),J&&Ut<Ct;);if(512&j.flags&&(j.check=a(j.check,ht,Ut,yt)),Ct-=Ut,yt+=Ut,J)break t}else j.head&&(j.head.name=null);j.length=0,j.mode=8;case 8:if(4096&j.flags){if(Ct===0)break t;for(Ut=0;J=ht[yt+Ut++],j.head&&J&&j.length<65536&&(j.head.comment+=String.fromCharCode(J)),J&&Ut<Ct;);if(512&j.flags&&(j.check=a(j.check,ht,Ut,yt)),Ct-=Ut,yt+=Ut,J)break t}else j.head&&(j.head.comment=null);j.mode=9;case 9:if(512&j.flags){for(;at<16;){if(Ct===0)break t;Ct--,vt+=ht[yt++]<<at,at+=8}if(vt!==(65535&j.check)){Y.msg="header crc mismatch",j.mode=30;break}at=vt=0}j.head&&(j.head.hcrc=j.flags>>9&1,j.head.done=!0),Y.adler=j.check=0,j.mode=12;break;case 10:for(;at<32;){if(Ct===0)break t;Ct--,vt+=ht[yt++]<<at,at+=8}Y.adler=j.check=S(vt),at=vt=0,j.mode=11;case 11:if(j.havedict===0)return Y.next_out=Ot,Y.avail_out=Gt,Y.next_in=yt,Y.avail_in=Ct,j.hold=vt,j.bits=at,2;Y.adler=j.check=1,j.mode=12;case 12:if(ct===5||ct===6)break t;case 13:if(j.last){vt>>>=7&at,at-=7&at,j.mode=27;break}for(;at<3;){if(Ct===0)break t;Ct--,vt+=ht[yt++]<<at,at+=8}switch(j.last=1&vt,at-=1,3&(vt>>>=1)){case 0:j.mode=14;break;case 1:if(U(j),j.mode=20,ct!==6)break;vt>>>=2,at-=2;break t;case 2:j.mode=17;break;case 3:Y.msg="invalid block type",j.mode=30}vt>>>=2,at-=2;break;case 14:for(vt>>>=7&at,at-=7&at;at<32;){if(Ct===0)break t;Ct--,vt+=ht[yt++]<<at,at+=8}if((65535&vt)!=(vt>>>16^65535)){Y.msg="invalid stored block lengths",j.mode=30;break}if(j.length=65535&vt,at=vt=0,j.mode=15,ct===6)break t;case 15:j.mode=16;case 16:if(Ut=j.length){if(Ct<Ut&&(Ut=Ct),Gt<Ut&&(Ut=Gt),Ut===0)break t;r.arraySet(It,ht,yt,Ut,Ot),Ct-=Ut,yt+=Ut,Gt-=Ut,Ot+=Ut,j.length-=Ut;break}j.mode=12;break;case 17:for(;at<14;){if(Ct===0)break t;Ct--,vt+=ht[yt++]<<at,at+=8}if(j.nlen=257+(31&vt),vt>>>=5,at-=5,j.ndist=1+(31&vt),vt>>>=5,at-=5,j.ncode=4+(15&vt),vt>>>=4,at-=4,286<j.nlen||30<j.ndist){Y.msg="too many length or distance symbols",j.mode=30;break}j.have=0,j.mode=18;case 18:for(;j.have<j.ncode;){for(;at<3;){if(Ct===0)break t;Ct--,vt+=ht[yt++]<<at,at+=8}j.lens[Et[j.have++]]=7&vt,vt>>>=3,at-=3}for(;j.have<19;)j.lens[Et[j.have++]]=0;if(j.lencode=j.lendyn,j.lenbits=7,Ft={bits:j.lenbits},Mt=u(0,j.lens,0,19,j.lencode,0,j.work,Ft),j.lenbits=Ft.bits,Mt){Y.msg="invalid code lengths set",j.mode=30;break}j.have=0,j.mode=19;case 19:for(;j.have<j.nlen+j.ndist;){for(;ce=(ft=j.lencode[vt&(1<<j.lenbits)-1])>>>16&255,De=65535&ft,!((le=ft>>>24)<=at);){if(Ct===0)break t;Ct--,vt+=ht[yt++]<<at,at+=8}if(De<16)vt>>>=le,at-=le,j.lens[j.have++]=De;else{if(De===16){for(St=le+2;at<St;){if(Ct===0)break t;Ct--,vt+=ht[yt++]<<at,at+=8}if(vt>>>=le,at-=le,j.have===0){Y.msg="invalid bit length repeat",j.mode=30;break}J=j.lens[j.have-1],Ut=3+(3&vt),vt>>>=2,at-=2}else if(De===17){for(St=le+3;at<St;){if(Ct===0)break t;Ct--,vt+=ht[yt++]<<at,at+=8}at-=le,J=0,Ut=3+(7&(vt>>>=le)),vt>>>=3,at-=3}else{for(St=le+7;at<St;){if(Ct===0)break t;Ct--,vt+=ht[yt++]<<at,at+=8}at-=le,J=0,Ut=11+(127&(vt>>>=le)),vt>>>=7,at-=7}if(j.have+Ut>j.nlen+j.ndist){Y.msg="invalid bit length repeat",j.mode=30;break}for(;Ut--;)j.lens[j.have++]=J}}if(j.mode===30)break;if(j.lens[256]===0){Y.msg="invalid code -- missing end-of-block",j.mode=30;break}if(j.lenbits=9,Ft={bits:j.lenbits},Mt=u(h,j.lens,0,j.nlen,j.lencode,0,j.work,Ft),j.lenbits=Ft.bits,Mt){Y.msg="invalid literal/lengths set",j.mode=30;break}if(j.distbits=6,j.distcode=j.distdyn,Ft={bits:j.distbits},Mt=u(f,j.lens,j.nlen,j.ndist,j.distcode,0,j.work,Ft),j.distbits=Ft.bits,Mt){Y.msg="invalid distances set",j.mode=30;break}if(j.mode=20,ct===6)break t;case 20:j.mode=21;case 21:if(6<=Ct&&258<=Gt){Y.next_out=Ot,Y.avail_out=Gt,Y.next_in=yt,Y.avail_in=Ct,j.hold=vt,j.bits=at,l(Y,jt),Ot=Y.next_out,It=Y.output,Gt=Y.avail_out,yt=Y.next_in,ht=Y.input,Ct=Y.avail_in,vt=j.hold,at=j.bits,j.mode===12&&(j.back=-1);break}for(j.back=0;ce=(ft=j.lencode[vt&(1<<j.lenbits)-1])>>>16&255,De=65535&ft,!((le=ft>>>24)<=at);){if(Ct===0)break t;Ct--,vt+=ht[yt++]<<at,at+=8}if(ce&&(240&ce)==0){for(ae=le,Oe=ce,Le=De;ce=(ft=j.lencode[Le+((vt&(1<<ae+Oe)-1)>>ae)])>>>16&255,De=65535&ft,!(ae+(le=ft>>>24)<=at);){if(Ct===0)break t;Ct--,vt+=ht[yt++]<<at,at+=8}vt>>>=ae,at-=ae,j.back+=ae}if(vt>>>=le,at-=le,j.back+=le,j.length=De,ce===0){j.mode=26;break}if(32&ce){j.back=-1,j.mode=12;break}if(64&ce){Y.msg="invalid literal/length code",j.mode=30;break}j.extra=15&ce,j.mode=22;case 22:if(j.extra){for(St=j.extra;at<St;){if(Ct===0)break t;Ct--,vt+=ht[yt++]<<at,at+=8}j.length+=vt&(1<<j.extra)-1,vt>>>=j.extra,at-=j.extra,j.back+=j.extra}j.was=j.length,j.mode=23;case 23:for(;ce=(ft=j.distcode[vt&(1<<j.distbits)-1])>>>16&255,De=65535&ft,!((le=ft>>>24)<=at);){if(Ct===0)break t;Ct--,vt+=ht[yt++]<<at,at+=8}if((240&ce)==0){for(ae=le,Oe=ce,Le=De;ce=(ft=j.distcode[Le+((vt&(1<<ae+Oe)-1)>>ae)])>>>16&255,De=65535&ft,!(ae+(le=ft>>>24)<=at);){if(Ct===0)break t;Ct--,vt+=ht[yt++]<<at,at+=8}vt>>>=ae,at-=ae,j.back+=ae}if(vt>>>=le,at-=le,j.back+=le,64&ce){Y.msg="invalid distance code",j.mode=30;break}j.offset=De,j.extra=15&ce,j.mode=24;case 24:if(j.extra){for(St=j.extra;at<St;){if(Ct===0)break t;Ct--,vt+=ht[yt++]<<at,at+=8}j.offset+=vt&(1<<j.extra)-1,vt>>>=j.extra,at-=j.extra,j.back+=j.extra}if(j.offset>j.dmax){Y.msg="invalid distance too far back",j.mode=30;break}j.mode=25;case 25:if(Gt===0)break t;if(Ut=jt-Gt,j.offset>Ut){if((Ut=j.offset-Ut)>j.whave&&j.sane){Y.msg="invalid distance too far back",j.mode=30;break}me=Ut>j.wnext?(Ut-=j.wnext,j.wsize-Ut):j.wnext-Ut,Ut>j.length&&(Ut=j.length),Ee=j.window}else Ee=It,me=Ot-j.offset,Ut=j.length;for(Gt<Ut&&(Ut=Gt),Gt-=Ut,j.length-=Ut;It[Ot++]=Ee[me++],--Ut;);j.length===0&&(j.mode=21);break;case 26:if(Gt===0)break t;It[Ot++]=j.length,Gt--,j.mode=21;break;case 27:if(j.wrap){for(;at<32;){if(Ct===0)break t;Ct--,vt|=ht[yt++]<<at,at+=8}if(jt-=Gt,Y.total_out+=jt,j.total+=jt,jt&&(Y.adler=j.check=j.flags?a(j.check,It,jt,Ot-jt):o(j.check,It,jt,Ot-jt)),jt=Gt,(j.flags?vt:S(vt))!==j.check){Y.msg="incorrect data check",j.mode=30;break}at=vt=0}j.mode=28;case 28:if(j.wrap&&j.flags){for(;at<32;){if(Ct===0)break t;Ct--,vt+=ht[yt++]<<at,at+=8}if(vt!==(4294967295&j.total)){Y.msg="incorrect length check",j.mode=30;break}at=vt=0}j.mode=29;case 29:Mt=1;break t;case 30:Mt=-3;break t;case 31:return-4;default:return m}return Y.next_out=Ot,Y.avail_out=Gt,Y.next_in=yt,Y.avail_in=Ct,j.hold=vt,j.bits=at,(j.wsize||jt!==Y.avail_out&&j.mode<30&&(j.mode<27||ct!==4))&&K(Y,Y.output,Y.next_out,jt-Y.avail_out)?(j.mode=31,-4):(Pt-=Y.avail_in,jt-=Y.avail_out,Y.total_in+=Pt,Y.total_out+=jt,j.total+=jt,j.wrap&&jt&&(Y.adler=j.check=j.flags?a(j.check,It,jt,Y.next_out-jt):o(j.check,It,jt,Y.next_out-jt)),Y.data_type=j.bits+(j.last?64:0)+(j.mode===12?128:0)+(j.mode===20||j.mode===15?256:0),(Pt==0&&jt===0||ct===4)&&Mt===g&&(Mt=-5),Mt)},i.inflateEnd=function(Y){if(!Y||!Y.state)return m;var ct=Y.state;return ct.window&&(ct.window=null),Y.state=null,g},i.inflateGetHeader=function(Y,ct){var j;return Y&&Y.state?(2&(j=Y.state).wrap)==0?m:((j.head=ct).done=!1,g):m},i.inflateSetDictionary=function(Y,ct){var j,ht=ct.length;return Y&&Y.state?(j=Y.state).wrap!==0&&j.mode!==11?m:j.mode===11&&o(1,ct,ht,0)!==j.check?-3:K(Y,ct,ht,ht)?(j.mode=31,-4):(j.havedict=1,g):m},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,s,i){var r=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(h,f,g,m,y,k,C,S){var $,D,R,V,E,q,X,B,U,K=S.bits,Y=0,ct=0,j=0,ht=0,It=0,yt=0,Ot=0,Ct=0,Gt=0,vt=0,at=null,Pt=0,jt=new r.Buf16(16),Ut=new r.Buf16(16),me=null,Ee=0;for(Y=0;Y<=15;Y++)jt[Y]=0;for(ct=0;ct<m;ct++)jt[f[g+ct]]++;for(It=K,ht=15;1<=ht&&jt[ht]===0;ht--);if(ht<It&&(It=ht),ht===0)return y[k++]=20971520,y[k++]=20971520,S.bits=1,0;for(j=1;j<ht&&jt[j]===0;j++);for(It<j&&(It=j),Y=Ct=1;Y<=15;Y++)if(Ct<<=1,(Ct-=jt[Y])<0)return-1;if(0<Ct&&(h===0||ht!==1))return-1;for(Ut[1]=0,Y=1;Y<15;Y++)Ut[Y+1]=Ut[Y]+jt[Y];for(ct=0;ct<m;ct++)f[g+ct]!==0&&(C[Ut[f[g+ct]]++]=ct);if(q=h===0?(at=me=C,19):h===1?(at=o,Pt-=257,me=a,Ee-=257,256):(at=l,me=u,-1),Y=j,E=k,Ot=ct=vt=0,R=-1,V=(Gt=1<<(yt=It))-1,h===1&&852<Gt||h===2&&592<Gt)return 1;for(;;){for(X=Y-Ot,U=C[ct]<q?(B=0,C[ct]):C[ct]>q?(B=me[Ee+C[ct]],at[Pt+C[ct]]):(B=96,0),$=1<<Y-Ot,j=D=1<<yt;y[E+(vt>>Ot)+(D-=$)]=X<<24|B<<16|U|0,D!==0;);for($=1<<Y-1;vt&$;)$>>=1;if($!==0?(vt&=$-1,vt+=$):vt=0,ct++,--jt[Y]==0){if(Y===ht)break;Y=f[g+C[ct]]}if(It<Y&&(vt&V)!==R){for(Ot===0&&(Ot=It),E+=j,Ct=1<<(yt=Y-Ot);yt+Ot<ht&&!((Ct-=jt[yt+Ot])<=0);)yt++,Ct<<=1;if(Gt+=1<<yt,h===1&&852<Gt||h===2&&592<Gt)return 1;y[R=vt&V]=It<<24|yt<<16|E-k|0}}return vt!==0&&(y[E+vt]=Y-Ot<<24|64<<16|0),S.bits=It,0}},{"../utils/common":41}],51:[function(e,s,i){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,s,i){var r=e("../utils/common"),o=0,a=1;function l(ft){for(var zt=ft.length;0<=--zt;)ft[zt]=0}var u=0,h=29,f=256,g=f+1+h,m=30,y=19,k=2*g+1,C=15,S=16,$=7,D=256,R=16,V=17,E=18,q=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],X=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=new Array(2*(g+2));l(K);var Y=new Array(2*m);l(Y);var ct=new Array(512);l(ct);var j=new Array(256);l(j);var ht=new Array(h);l(ht);var It,yt,Ot,Ct=new Array(m);function Gt(ft,zt,Et,de,Xt){this.static_tree=ft,this.extra_bits=zt,this.extra_base=Et,this.elems=de,this.max_length=Xt,this.has_stree=ft&&ft.length}function vt(ft,zt){this.dyn_tree=ft,this.max_code=0,this.stat_desc=zt}function at(ft){return ft<256?ct[ft]:ct[256+(ft>>>7)]}function Pt(ft,zt){ft.pending_buf[ft.pending++]=255&zt,ft.pending_buf[ft.pending++]=zt>>>8&255}function jt(ft,zt,Et){ft.bi_valid>S-Et?(ft.bi_buf|=zt<<ft.bi_valid&65535,Pt(ft,ft.bi_buf),ft.bi_buf=zt>>S-ft.bi_valid,ft.bi_valid+=Et-S):(ft.bi_buf|=zt<<ft.bi_valid&65535,ft.bi_valid+=Et)}function Ut(ft,zt,Et){jt(ft,Et[2*zt],Et[2*zt+1])}function me(ft,zt){for(var Et=0;Et|=1&ft,ft>>>=1,Et<<=1,0<--zt;);return Et>>>1}function Ee(ft,zt,Et){var de,Xt,be=new Array(C+1),Te=0;for(de=1;de<=C;de++)be[de]=Te=Te+Et[de-1]<<1;for(Xt=0;Xt<=zt;Xt++){var $e=ft[2*Xt+1];$e!==0&&(ft[2*Xt]=me(be[$e]++,$e))}}function le(ft){var zt;for(zt=0;zt<g;zt++)ft.dyn_ltree[2*zt]=0;for(zt=0;zt<m;zt++)ft.dyn_dtree[2*zt]=0;for(zt=0;zt<y;zt++)ft.bl_tree[2*zt]=0;ft.dyn_ltree[2*D]=1,ft.opt_len=ft.static_len=0,ft.last_lit=ft.matches=0}function ce(ft){8<ft.bi_valid?Pt(ft,ft.bi_buf):0<ft.bi_valid&&(ft.pending_buf[ft.pending++]=ft.bi_buf),ft.bi_buf=0,ft.bi_valid=0}function De(ft,zt,Et,de){var Xt=2*zt,be=2*Et;return ft[Xt]<ft[be]||ft[Xt]===ft[be]&&de[zt]<=de[Et]}function ae(ft,zt,Et){for(var de=ft.heap[Et],Xt=Et<<1;Xt<=ft.heap_len&&(Xt<ft.heap_len&&De(zt,ft.heap[Xt+1],ft.heap[Xt],ft.depth)&&Xt++,!De(zt,de,ft.heap[Xt],ft.depth));)ft.heap[Et]=ft.heap[Xt],Et=Xt,Xt<<=1;ft.heap[Et]=de}function Oe(ft,zt,Et){var de,Xt,be,Te,$e=0;if(ft.last_lit!==0)for(;de=ft.pending_buf[ft.d_buf+2*$e]<<8|ft.pending_buf[ft.d_buf+2*$e+1],Xt=ft.pending_buf[ft.l_buf+$e],$e++,de===0?Ut(ft,Xt,zt):(Ut(ft,(be=j[Xt])+f+1,zt),(Te=q[be])!==0&&jt(ft,Xt-=ht[be],Te),Ut(ft,be=at(--de),Et),(Te=X[be])!==0&&jt(ft,de-=Ct[be],Te)),$e<ft.last_lit;);Ut(ft,D,zt)}function Le(ft,zt){var Et,de,Xt,be=zt.dyn_tree,Te=zt.stat_desc.static_tree,$e=zt.stat_desc.has_stree,Pe=zt.stat_desc.elems,Ae=-1;for(ft.heap_len=0,ft.heap_max=k,Et=0;Et<Pe;Et++)be[2*Et]!==0?(ft.heap[++ft.heap_len]=Ae=Et,ft.depth[Et]=0):be[2*Et+1]=0;for(;ft.heap_len<2;)be[2*(Xt=ft.heap[++ft.heap_len]=Ae<2?++Ae:0)]=1,ft.depth[Xt]=0,ft.opt_len--,$e&&(ft.static_len-=Te[2*Xt+1]);for(zt.max_code=Ae,Et=ft.heap_len>>1;1<=Et;Et--)ae(ft,be,Et);for(Xt=Pe;Et=ft.heap[1],ft.heap[1]=ft.heap[ft.heap_len--],ae(ft,be,1),de=ft.heap[1],ft.heap[--ft.heap_max]=Et,ft.heap[--ft.heap_max]=de,be[2*Xt]=be[2*Et]+be[2*de],ft.depth[Xt]=(ft.depth[Et]>=ft.depth[de]?ft.depth[Et]:ft.depth[de])+1,be[2*Et+1]=be[2*de+1]=Xt,ft.heap[1]=Xt++,ae(ft,be,1),2<=ft.heap_len;);ft.heap[--ft.heap_max]=ft.heap[1],(function(vn,vs){var ei,ps,Ws,ns,bi,Pi,vi=vs.dyn_tree,Ur=vs.max_code,Me=vs.stat_desc.static_tree,ze=vs.stat_desc.has_stree,Ue=vs.stat_desc.extra_bits,Ge=vs.stat_desc.extra_base,Ze=vs.stat_desc.max_length,tn=0;for(ns=0;ns<=C;ns++)vn.bl_count[ns]=0;for(vi[2*vn.heap[vn.heap_max]+1]=0,ei=vn.heap_max+1;ei<k;ei++)Ze<(ns=vi[2*vi[2*(ps=vn.heap[ei])+1]+1]+1)&&(ns=Ze,tn++),vi[2*ps+1]=ns,Ur<ps||(vn.bl_count[ns]++,bi=0,Ge<=ps&&(bi=Ue[ps-Ge]),Pi=vi[2*ps],vn.opt_len+=Pi*(ns+bi),ze&&(vn.static_len+=Pi*(Me[2*ps+1]+bi)));if(tn!==0){do{for(ns=Ze-1;vn.bl_count[ns]===0;)ns--;vn.bl_count[ns]--,vn.bl_count[ns+1]+=2,vn.bl_count[Ze]--,tn-=2}while(0<tn);for(ns=Ze;ns!==0;ns--)for(ps=vn.bl_count[ns];ps!==0;)Ur<(Ws=vn.heap[--ei])||(vi[2*Ws+1]!==ns&&(vn.opt_len+=(ns-vi[2*Ws+1])*vi[2*Ws],vi[2*Ws+1]=ns),ps--)}})(ft,zt),Ee(be,Ae,ft.bl_count)}function J(ft,zt,Et){var de,Xt,be=-1,Te=zt[1],$e=0,Pe=7,Ae=4;for(Te===0&&(Pe=138,Ae=3),zt[2*(Et+1)+1]=65535,de=0;de<=Et;de++)Xt=Te,Te=zt[2*(de+1)+1],++$e<Pe&&Xt===Te||($e<Ae?ft.bl_tree[2*Xt]+=$e:Xt!==0?(Xt!==be&&ft.bl_tree[2*Xt]++,ft.bl_tree[2*R]++):$e<=10?ft.bl_tree[2*V]++:ft.bl_tree[2*E]++,be=Xt,Ae=($e=0)===Te?(Pe=138,3):Xt===Te?(Pe=6,3):(Pe=7,4))}function Mt(ft,zt,Et){var de,Xt,be=-1,Te=zt[1],$e=0,Pe=7,Ae=4;for(Te===0&&(Pe=138,Ae=3),de=0;de<=Et;de++)if(Xt=Te,Te=zt[2*(de+1)+1],!(++$e<Pe&&Xt===Te)){if($e<Ae)for(;Ut(ft,Xt,ft.bl_tree),--$e!=0;);else Xt!==0?(Xt!==be&&(Ut(ft,Xt,ft.bl_tree),$e--),Ut(ft,R,ft.bl_tree),jt(ft,$e-3,2)):$e<=10?(Ut(ft,V,ft.bl_tree),jt(ft,$e-3,3)):(Ut(ft,E,ft.bl_tree),jt(ft,$e-11,7));be=Xt,Ae=($e=0)===Te?(Pe=138,3):Xt===Te?(Pe=6,3):(Pe=7,4)}}l(Ct);var Ft=!1;function St(ft,zt,Et,de){jt(ft,(u<<1)+(de?1:0),3),(function(Xt,be,Te,$e){ce(Xt),Pt(Xt,Te),Pt(Xt,~Te),r.arraySet(Xt.pending_buf,Xt.window,be,Te,Xt.pending),Xt.pending+=Te})(ft,zt,Et)}i._tr_init=function(ft){Ft||((function(){var zt,Et,de,Xt,be,Te=new Array(C+1);for(Xt=de=0;Xt<h-1;Xt++)for(ht[Xt]=de,zt=0;zt<1<<q[Xt];zt++)j[de++]=Xt;for(j[de-1]=Xt,Xt=be=0;Xt<16;Xt++)for(Ct[Xt]=be,zt=0;zt<1<<X[Xt];zt++)ct[be++]=Xt;for(be>>=7;Xt<m;Xt++)for(Ct[Xt]=be<<7,zt=0;zt<1<<X[Xt]-7;zt++)ct[256+be++]=Xt;for(Et=0;Et<=C;Et++)Te[Et]=0;for(zt=0;zt<=143;)K[2*zt+1]=8,zt++,Te[8]++;for(;zt<=255;)K[2*zt+1]=9,zt++,Te[9]++;for(;zt<=279;)K[2*zt+1]=7,zt++,Te[7]++;for(;zt<=287;)K[2*zt+1]=8,zt++,Te[8]++;for(Ee(K,g+1,Te),zt=0;zt<m;zt++)Y[2*zt+1]=5,Y[2*zt]=me(zt,5);It=new Gt(K,q,f+1,g,C),yt=new Gt(Y,X,0,m,C),Ot=new Gt(new Array(0),B,0,y,$)})(),Ft=!0),ft.l_desc=new vt(ft.dyn_ltree,It),ft.d_desc=new vt(ft.dyn_dtree,yt),ft.bl_desc=new vt(ft.bl_tree,Ot),ft.bi_buf=0,ft.bi_valid=0,le(ft)},i._tr_stored_block=St,i._tr_flush_block=function(ft,zt,Et,de){var Xt,be,Te=0;0<ft.level?(ft.strm.data_type===2&&(ft.strm.data_type=(function($e){var Pe,Ae=4093624447;for(Pe=0;Pe<=31;Pe++,Ae>>>=1)if(1&Ae&&$e.dyn_ltree[2*Pe]!==0)return o;if($e.dyn_ltree[18]!==0||$e.dyn_ltree[20]!==0||$e.dyn_ltree[26]!==0)return a;for(Pe=32;Pe<f;Pe++)if($e.dyn_ltree[2*Pe]!==0)return a;return o})(ft)),Le(ft,ft.l_desc),Le(ft,ft.d_desc),Te=(function($e){var Pe;for(J($e,$e.dyn_ltree,$e.l_desc.max_code),J($e,$e.dyn_dtree,$e.d_desc.max_code),Le($e,$e.bl_desc),Pe=y-1;3<=Pe&&$e.bl_tree[2*U[Pe]+1]===0;Pe--);return $e.opt_len+=3*(Pe+1)+5+5+4,Pe})(ft),Xt=ft.opt_len+3+7>>>3,(be=ft.static_len+3+7>>>3)<=Xt&&(Xt=be)):Xt=be=Et+5,Et+4<=Xt&&zt!==-1?St(ft,zt,Et,de):ft.strategy===4||be===Xt?(jt(ft,2+(de?1:0),3),Oe(ft,K,Y)):(jt(ft,4+(de?1:0),3),(function($e,Pe,Ae,vn){var vs;for(jt($e,Pe-257,5),jt($e,Ae-1,5),jt($e,vn-4,4),vs=0;vs<vn;vs++)jt($e,$e.bl_tree[2*U[vs]+1],3);Mt($e,$e.dyn_ltree,Pe-1),Mt($e,$e.dyn_dtree,Ae-1)})(ft,ft.l_desc.max_code+1,ft.d_desc.max_code+1,Te+1),Oe(ft,ft.dyn_ltree,ft.dyn_dtree)),le(ft),de&&ce(ft)},i._tr_tally=function(ft,zt,Et){return ft.pending_buf[ft.d_buf+2*ft.last_lit]=zt>>>8&255,ft.pending_buf[ft.d_buf+2*ft.last_lit+1]=255&zt,ft.pending_buf[ft.l_buf+ft.last_lit]=255&Et,ft.last_lit++,zt===0?ft.dyn_ltree[2*Et]++:(ft.matches++,zt--,ft.dyn_ltree[2*(j[Et]+f+1)]++,ft.dyn_dtree[2*at(zt)]++),ft.last_lit===ft.lit_bufsize-1},i._tr_align=function(ft){jt(ft,2,3),Ut(ft,D,K),(function(zt){zt.bi_valid===16?(Pt(zt,zt.bi_buf),zt.bi_buf=0,zt.bi_valid=0):8<=zt.bi_valid&&(zt.pending_buf[zt.pending++]=255&zt.bi_buf,zt.bi_buf>>=8,zt.bi_valid-=8)})(ft)}},{"../utils/common":41}],53:[function(e,s,i){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,s,i){(function(r){(function(o,a){if(!o.setImmediate){var l,u,h,f,g=1,m={},y=!1,k=o.document,C=Object.getPrototypeOf&&Object.getPrototypeOf(o);C=C&&C.setTimeout?C:o,l={}.toString.call(o.process)==="[object process]"?function(R){process.nextTick(function(){$(R)})}:(function(){if(o.postMessage&&!o.importScripts){var R=!0,V=o.onmessage;return o.onmessage=function(){R=!1},o.postMessage("","*"),o.onmessage=V,R}})()?(f="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",D,!1):o.attachEvent("onmessage",D),function(R){o.postMessage(f+R,"*")}):o.MessageChannel?((h=new MessageChannel).port1.onmessage=function(R){$(R.data)},function(R){h.port2.postMessage(R)}):k&&"onreadystatechange"in k.createElement("script")?(u=k.documentElement,function(R){var V=k.createElement("script");V.onreadystatechange=function(){$(R),V.onreadystatechange=null,u.removeChild(V),V=null},u.appendChild(V)}):function(R){setTimeout($,0,R)},C.setImmediate=function(R){typeof R!="function"&&(R=new Function(""+R));for(var V=new Array(arguments.length-1),E=0;E<V.length;E++)V[E]=arguments[E+1];var q={callback:R,args:V};return m[g]=q,l(g),g++},C.clearImmediate=S}function S(R){delete m[R]}function $(R){if(y)setTimeout($,0,R);else{var V=m[R];if(V){y=!0;try{(function(E){var q=E.callback,X=E.args;switch(X.length){case 0:q();break;case 1:q(X[0]);break;case 2:q(X[0],X[1]);break;case 3:q(X[0],X[1],X[2]);break;default:q.apply(a,X)}})(V)}finally{S(R),y=!1}}}}function D(R){R.source===o&&typeof R.data=="string"&&R.data.indexOf(f)===0&&$(+R.data.slice(f.length))}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,typeof tm<"u"?tm:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(db)),db.exports}var FM=OM();const PM=Vp(FM);var ym={exports:{}};var LM=ym.exports,x4;function BM(){return x4||(x4=1,(function(n,t){((e,s)=>{n.exports=s()})(LM,function e(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},i,r=!s.document&&!!s.postMessage,o=s.IS_PAPA_WORKER||!1,a={},l=0,u={};function h(X){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(B){var U=V(B);U.chunkSize=parseInt(U.chunkSize),B.step||B.chunk||(U.chunkSize=null),this._handle=new k(U),(this._handle.streamer=this)._config=U}).call(this,X),this.parseChunk=function(B,U){var K=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<K){let ct=this._config.newline;ct||(Y=this._config.quoteChar||'"',ct=this._handle.guessLineEndings(B,Y)),B=[...B.split(ct).slice(K)].join(ct)}this.isFirstChunk&&q(this._config.beforeFirstChunk)&&(Y=this._config.beforeFirstChunk(B))!==void 0&&(B=Y),this.isFirstChunk=!1,this._halted=!1;var K=this._partialLine+B,Y=(this._partialLine="",this._handle.parse(K,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(B=Y.meta.cursor,K=(this._finished||(this._partialLine=K.substring(B-this._baseIndex),this._baseIndex=B),Y&&Y.data&&(this._rowCount+=Y.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)s.postMessage({results:Y,workerId:u.WORKER_ID,finished:K});else if(q(this._config.chunk)&&!U){if(this._config.chunk(Y,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=Y=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(Y.data),this._completeResults.errors=this._completeResults.errors.concat(Y.errors),this._completeResults.meta=Y.meta),this._completed||!K||!q(this._config.complete)||Y&&Y.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),K||Y&&Y.meta.paused||this._nextChunk(),Y}this._halted=!0},this._sendError=function(B){q(this._config.error)?this._config.error(B):o&&this._config.error&&s.postMessage({workerId:u.WORKER_ID,error:B,finished:!1})}}function f(X){var B;(X=X||{}).chunkSize||(X.chunkSize=u.RemoteChunkSize),h.call(this,X),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(U){this._input=U,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(B=new XMLHttpRequest,this._config.withCredentials&&(B.withCredentials=this._config.withCredentials),r||(B.onload=E(this._chunkLoaded,this),B.onerror=E(this._chunkError,this)),B.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var U,K=this._config.downloadRequestHeaders;for(U in K)B.setRequestHeader(U,K[U])}var Y;this._config.chunkSize&&(Y=this._start+this._config.chunkSize-1,B.setRequestHeader("Range","bytes="+this._start+"-"+Y));try{B.send(this._config.downloadRequestBody)}catch(ct){this._chunkError(ct.message)}r&&B.status===0&&this._chunkError()}},this._chunkLoaded=function(){B.readyState===4&&(B.status<200||400<=B.status?this._chunkError():(this._start+=this._config.chunkSize||B.responseText.length,this._finished=!this._config.chunkSize||this._start>=(U=>(U=U.getResponseHeader("Content-Range"))!==null?parseInt(U.substring(U.lastIndexOf("/")+1)):-1)(B),this.parseChunk(B.responseText)))},this._chunkError=function(U){U=B.statusText||U,this._sendError(new Error(U))}}function g(X){(X=X||{}).chunkSize||(X.chunkSize=u.LocalChunkSize),h.call(this,X);var B,U,K=typeof FileReader<"u";this.stream=function(Y){this._input=Y,U=Y.slice||Y.webkitSlice||Y.mozSlice,K?((B=new FileReader).onload=E(this._chunkLoaded,this),B.onerror=E(this._chunkError,this)):B=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var Y=this._input,ct=(this._config.chunkSize&&(ct=Math.min(this._start+this._config.chunkSize,this._input.size),Y=U.call(Y,this._start,ct)),B.readAsText(Y,this._config.encoding));K||this._chunkLoaded({target:{result:ct}})},this._chunkLoaded=function(Y){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(Y.target.result)},this._chunkError=function(){this._sendError(B.error)}}function m(X){var B;h.call(this,X=X||{}),this.stream=function(U){return B=U,this._nextChunk()},this._nextChunk=function(){var U,K;if(!this._finished)return U=this._config.chunkSize,B=U?(K=B.substring(0,U),B.substring(U)):(K=B,""),this._finished=!B,this.parseChunk(K)}}function y(X){h.call(this,X=X||{});var B=[],U=!0,K=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(Y){this._input=Y,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){K&&B.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),B.length?this.parseChunk(B.shift()):U=!0},this._streamData=E(function(Y){try{B.push(typeof Y=="string"?Y:Y.toString(this._config.encoding)),U&&(U=!1,this._checkIsFinished(),this.parseChunk(B.shift()))}catch(ct){this._streamError(ct)}},this),this._streamError=E(function(Y){this._streamCleanUp(),this._sendError(Y)},this),this._streamEnd=E(function(){this._streamCleanUp(),K=!0,this._streamData("")},this),this._streamCleanUp=E(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function k(X){var B,U,K,Y,ct=Math.pow(2,53),j=-ct,ht=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,It=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,yt=this,Ot=0,Ct=0,Gt=!1,vt=!1,at=[],Pt={data:[],errors:[],meta:{}};function jt(le){return X.skipEmptyLines==="greedy"?le.join("").trim()==="":le.length===1&&le[0].length===0}function Ut(){if(Pt&&K&&(Ee("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),K=!1),X.skipEmptyLines&&(Pt.data=Pt.data.filter(function(Oe){return!jt(Oe)})),me()){let Oe=function(Le,J){q(X.transformHeader)&&(Le=X.transformHeader(Le,J)),at.push(Le)};var ae=Oe;if(Pt)if(Array.isArray(Pt.data[0])){for(var le=0;me()&&le<Pt.data.length;le++)Pt.data[le].forEach(Oe);Pt.data.splice(0,1)}else Pt.data.forEach(Oe)}function ce(Oe,Le){for(var J=X.header?{}:[],Mt=0;Mt<Oe.length;Mt++){var Ft=Mt,St=Oe[Mt],St=((ft,zt)=>(Et=>(X.dynamicTypingFunction&&X.dynamicTyping[Et]===void 0&&(X.dynamicTyping[Et]=X.dynamicTypingFunction(Et)),(X.dynamicTyping[Et]||X.dynamicTyping)===!0))(ft)?zt==="true"||zt==="TRUE"||zt!=="false"&&zt!=="FALSE"&&((Et=>{if(ht.test(Et)&&(Et=parseFloat(Et),j<Et&&Et<ct))return 1})(zt)?parseFloat(zt):It.test(zt)?new Date(zt):zt===""?null:zt):zt)(Ft=X.header?Mt>=at.length?"__parsed_extra":at[Mt]:Ft,St=X.transform?X.transform(St,Ft):St);Ft==="__parsed_extra"?(J[Ft]=J[Ft]||[],J[Ft].push(St)):J[Ft]=St}return X.header&&(Mt>at.length?Ee("FieldMismatch","TooManyFields","Too many fields: expected "+at.length+" fields but parsed "+Mt,Ct+Le):Mt<at.length&&Ee("FieldMismatch","TooFewFields","Too few fields: expected "+at.length+" fields but parsed "+Mt,Ct+Le)),J}var De;Pt&&(X.header||X.dynamicTyping||X.transform)&&(De=1,!Pt.data.length||Array.isArray(Pt.data[0])?(Pt.data=Pt.data.map(ce),De=Pt.data.length):Pt.data=ce(Pt.data,0),X.header&&Pt.meta&&(Pt.meta.fields=at),Ct+=De)}function me(){return X.header&&at.length===0}function Ee(le,ce,De,ae){le={type:le,code:ce,message:De},ae!==void 0&&(le.row=ae),Pt.errors.push(le)}q(X.step)&&(Y=X.step,X.step=function(le){Pt=le,me()?Ut():(Ut(),Pt.data.length!==0&&(Ot+=le.data.length,X.preview&&Ot>X.preview?U.abort():(Pt.data=Pt.data[0],Y(Pt,yt))))}),this.parse=function(le,ce,De){var ae=X.quoteChar||'"',ae=(X.newline||(X.newline=this.guessLineEndings(le,ae)),K=!1,X.delimiter?q(X.delimiter)&&(X.delimiter=X.delimiter(le),Pt.meta.delimiter=X.delimiter):((ae=((Oe,Le,J,Mt,Ft)=>{var St,ft,zt,Et;Ft=Ft||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var de=0;de<Ft.length;de++){for(var Xt,be=Ft[de],Te=0,$e=0,Pe=0,Ae=(zt=void 0,new S({comments:Mt,delimiter:be,newline:Le,preview:10}).parse(Oe)),vn=0;vn<Ae.data.length;vn++)J&&jt(Ae.data[vn])?Pe++:(Xt=Ae.data[vn].length,$e+=Xt,zt===void 0?zt=Xt:0<Xt&&(Te+=Math.abs(Xt-zt),zt=Xt));0<Ae.data.length&&($e/=Ae.data.length-Pe),(ft===void 0||Te<=ft)&&(Et===void 0||Et<$e)&&1.99<$e&&(ft=Te,St=be,Et=$e)}return{successful:!!(X.delimiter=St),bestDelimiter:St}})(le,X.newline,X.skipEmptyLines,X.comments,X.delimitersToGuess)).successful?X.delimiter=ae.bestDelimiter:(K=!0,X.delimiter=u.DefaultDelimiter),Pt.meta.delimiter=X.delimiter),V(X));return X.preview&&X.header&&ae.preview++,B=le,U=new S(ae),Pt=U.parse(B,ce,De),Ut(),Gt?{meta:{paused:!0}}:Pt||{meta:{paused:!1}}},this.paused=function(){return Gt},this.pause=function(){Gt=!0,U.abort(),B=q(X.chunk)?"":B.substring(U.getCharIndex())},this.resume=function(){yt.streamer._halted?(Gt=!1,yt.streamer.parseChunk(B,!0)):setTimeout(yt.resume,3)},this.aborted=function(){return vt},this.abort=function(){vt=!0,U.abort(),Pt.meta.aborted=!0,q(X.complete)&&X.complete(Pt),B=""},this.guessLineEndings=function(Oe,ae){Oe=Oe.substring(0,1048576);var ae=new RegExp(C(ae)+"([^]*?)"+C(ae),"gm"),De=(Oe=Oe.replace(ae,"")).split("\r"),ae=Oe.split(`
`),Oe=1<ae.length&&ae[0].length<De[0].length;if(De.length===1||Oe)return`
`;for(var Le=0,J=0;J<De.length;J++)De[J][0]===`
`&&Le++;return Le>=De.length/2?`\r
`:"\r"}}function C(X){return X.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function S(X){var B=(X=X||{}).delimiter,U=X.newline,K=X.comments,Y=X.step,ct=X.preview,j=X.fastMode,ht=null,It=!1,yt=X.quoteChar==null?'"':X.quoteChar,Ot=yt;if(X.escapeChar!==void 0&&(Ot=X.escapeChar),(typeof B!="string"||-1<u.BAD_DELIMITERS.indexOf(B))&&(B=","),K===B)throw new Error("Comment character same as delimiter");K===!0?K="#":(typeof K!="string"||-1<u.BAD_DELIMITERS.indexOf(K))&&(K=!1),U!==`
`&&U!=="\r"&&U!==`\r
`&&(U=`
`);var Ct=0,Gt=!1;this.parse=function(vt,at,Pt){if(typeof vt!="string")throw new Error("Input must be a string");var jt=vt.length,Ut=B.length,me=U.length,Ee=K.length,le=q(Y),ce=[],De=[],ae=[],Oe=Ct=0;if(!vt)return Te();if(j||j!==!1&&vt.indexOf(yt)===-1){for(var Le=vt.split(U),J=0;J<Le.length;J++){if(ae=Le[J],Ct+=ae.length,J!==Le.length-1)Ct+=U.length;else if(Pt)return Te();if(!K||ae.substring(0,Ee)!==K){if(le){if(ce=[],Et(ae.split(B)),$e(),Gt)return Te()}else Et(ae.split(B));if(ct&&ct<=J)return ce=ce.slice(0,ct),Te(!0)}}return Te()}for(var Mt=vt.indexOf(B,Ct),Ft=vt.indexOf(U,Ct),St=new RegExp(C(Ot)+C(yt),"g"),ft=vt.indexOf(yt,Ct);;)if(vt[Ct]===yt)for(ft=Ct,Ct++;;){if((ft=vt.indexOf(yt,ft+1))===-1)return Pt||De.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ce.length,index:Ct}),Xt();if(ft===jt-1)return Xt(vt.substring(Ct,ft).replace(St,yt));if(yt===Ot&&vt[ft+1]===Ot)ft++;else if(yt===Ot||ft===0||vt[ft-1]!==Ot){Mt!==-1&&Mt<ft+1&&(Mt=vt.indexOf(B,ft+1));var zt=de((Ft=Ft!==-1&&Ft<ft+1?vt.indexOf(U,ft+1):Ft)===-1?Mt:Math.min(Mt,Ft));if(vt.substr(ft+1+zt,Ut)===B){ae.push(vt.substring(Ct,ft).replace(St,yt)),vt[Ct=ft+1+zt+Ut]!==yt&&(ft=vt.indexOf(yt,Ct)),Mt=vt.indexOf(B,Ct),Ft=vt.indexOf(U,Ct);break}if(zt=de(Ft),vt.substring(ft+1+zt,ft+1+zt+me)===U){if(ae.push(vt.substring(Ct,ft).replace(St,yt)),be(ft+1+zt+me),Mt=vt.indexOf(B,Ct),ft=vt.indexOf(yt,Ct),le&&($e(),Gt))return Te();if(ct&&ce.length>=ct)return Te(!0);break}De.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ce.length,index:Ct}),ft++}}else if(K&&ae.length===0&&vt.substring(Ct,Ct+Ee)===K){if(Ft===-1)return Te();Ct=Ft+me,Ft=vt.indexOf(U,Ct),Mt=vt.indexOf(B,Ct)}else if(Mt!==-1&&(Mt<Ft||Ft===-1))ae.push(vt.substring(Ct,Mt)),Ct=Mt+Ut,Mt=vt.indexOf(B,Ct);else{if(Ft===-1)break;if(ae.push(vt.substring(Ct,Ft)),be(Ft+me),le&&($e(),Gt))return Te();if(ct&&ce.length>=ct)return Te(!0)}return Xt();function Et(Pe){ce.push(Pe),Oe=Ct}function de(Pe){var Ae=0;return Ae=Pe!==-1&&(Pe=vt.substring(ft+1,Pe))&&Pe.trim()===""?Pe.length:Ae}function Xt(Pe){return Pt||(Pe===void 0&&(Pe=vt.substring(Ct)),ae.push(Pe),Ct=jt,Et(ae),le&&$e()),Te()}function be(Pe){Ct=Pe,Et(ae),ae=[],Ft=vt.indexOf(U,Ct)}function Te(Pe){if(X.header&&!at&&ce.length&&!It){var Ae=ce[0],vn=Object.create(null),vs=new Set(Ae);let ei=!1;for(let ps=0;ps<Ae.length;ps++){let Ws=Ae[ps];if(vn[Ws=q(X.transformHeader)?X.transformHeader(Ws,ps):Ws]){let ns,bi=vn[Ws];for(;ns=Ws+"_"+bi,bi++,vs.has(ns););vs.add(ns),Ae[ps]=ns,vn[Ws]++,ei=!0,(ht=ht===null?{}:ht)[ns]=Ws}else vn[Ws]=1,Ae[ps]=Ws;vs.add(Ws)}ei&&console.warn("Duplicate headers found and renamed."),It=!0}return{data:ce,errors:De,meta:{delimiter:B,linebreak:U,aborted:Gt,truncated:!!Pe,cursor:Oe+(at||0),renamedHeaders:ht}}}function $e(){Y(Te()),ce=[],De=[]}},this.abort=function(){Gt=!0},this.getCharIndex=function(){return Ct}}function $(X){var B=X.data,U=a[B.workerId],K=!1;if(B.error)U.userError(B.error,B.file);else if(B.results&&B.results.data){var Y={abort:function(){K=!0,D(B.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:R,resume:R};if(q(U.userStep)){for(var ct=0;ct<B.results.data.length&&(U.userStep({data:B.results.data[ct],errors:B.results.errors,meta:B.results.meta},Y),!K);ct++);delete B.results}else q(U.userChunk)&&(U.userChunk(B.results,Y,B.file),delete B.results)}B.finished&&!K&&D(B.workerId,B.results)}function D(X,B){var U=a[X];q(U.userComplete)&&U.userComplete(B),U.terminate(),delete a[X]}function R(){throw new Error("Not implemented.")}function V(X){if(typeof X!="object"||X===null)return X;var B,U=Array.isArray(X)?[]:{};for(B in X)U[B]=V(X[B]);return U}function E(X,B){return function(){X.apply(B,arguments)}}function q(X){return typeof X=="function"}return u.parse=function(X,B){var U=(B=B||{}).dynamicTyping||!1;if(q(U)&&(B.dynamicTypingFunction=U,U={}),B.dynamicTyping=U,B.transform=!!q(B.transform)&&B.transform,!B.worker||!u.WORKERS_SUPPORTED)return U=null,u.NODE_STREAM_INPUT,typeof X=="string"?(X=(K=>K.charCodeAt(0)!==65279?K:K.slice(1))(X),U=new(B.download?f:m)(B)):X.readable===!0&&q(X.read)&&q(X.on)?U=new y(B):(s.File&&X instanceof File||X instanceof Object)&&(U=new g(B)),U.stream(X);(U=(()=>{var K;return!!u.WORKERS_SUPPORTED&&(K=(()=>{var Y=s.URL||s.webkitURL||null,ct=e.toString();return u.BLOB_URL||(u.BLOB_URL=Y.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",ct,")();"],{type:"text/javascript"})))})(),(K=new s.Worker(K)).onmessage=$,K.id=l++,a[K.id]=K)})()).userStep=B.step,U.userChunk=B.chunk,U.userComplete=B.complete,U.userError=B.error,B.step=q(B.step),B.chunk=q(B.chunk),B.complete=q(B.complete),B.error=q(B.error),delete B.worker,U.postMessage({input:X,config:B,workerId:U.id})},u.unparse=function(X,B){var U=!1,K=!0,Y=",",ct=`\r
`,j='"',ht=j+j,It=!1,yt=null,Ot=!1,Ct=((()=>{if(typeof B=="object"){if(typeof B.delimiter!="string"||u.BAD_DELIMITERS.filter(function(at){return B.delimiter.indexOf(at)!==-1}).length||(Y=B.delimiter),typeof B.quotes!="boolean"&&typeof B.quotes!="function"&&!Array.isArray(B.quotes)||(U=B.quotes),typeof B.skipEmptyLines!="boolean"&&typeof B.skipEmptyLines!="string"||(It=B.skipEmptyLines),typeof B.newline=="string"&&(ct=B.newline),typeof B.quoteChar=="string"&&(j=B.quoteChar),typeof B.header=="boolean"&&(K=B.header),Array.isArray(B.columns)){if(B.columns.length===0)throw new Error("Option columns is empty");yt=B.columns}B.escapeChar!==void 0&&(ht=B.escapeChar+j),B.escapeFormulae instanceof RegExp?Ot=B.escapeFormulae:typeof B.escapeFormulae=="boolean"&&B.escapeFormulae&&(Ot=/^[=+\-@\t\r].*$/)}})(),new RegExp(C(j),"g"));if(typeof X=="string"&&(X=JSON.parse(X)),Array.isArray(X)){if(!X.length||Array.isArray(X[0]))return Gt(null,X,It);if(typeof X[0]=="object")return Gt(yt||Object.keys(X[0]),X,It)}else if(typeof X=="object")return typeof X.data=="string"&&(X.data=JSON.parse(X.data)),Array.isArray(X.data)&&(X.fields||(X.fields=X.meta&&X.meta.fields||yt),X.fields||(X.fields=Array.isArray(X.data[0])?X.fields:typeof X.data[0]=="object"?Object.keys(X.data[0]):[]),Array.isArray(X.data[0])||typeof X.data[0]=="object"||(X.data=[X.data])),Gt(X.fields||[],X.data||[],It);throw new Error("Unable to serialize unrecognized input");function Gt(at,Pt,jt){var Ut="",me=(typeof at=="string"&&(at=JSON.parse(at)),typeof Pt=="string"&&(Pt=JSON.parse(Pt)),Array.isArray(at)&&0<at.length),Ee=!Array.isArray(Pt[0]);if(me&&K){for(var le=0;le<at.length;le++)0<le&&(Ut+=Y),Ut+=vt(at[le],le);0<Pt.length&&(Ut+=ct)}for(var ce=0;ce<Pt.length;ce++){var De=(me?at:Pt[ce]).length,ae=!1,Oe=me?Object.keys(Pt[ce]).length===0:Pt[ce].length===0;if(jt&&!me&&(ae=jt==="greedy"?Pt[ce].join("").trim()==="":Pt[ce].length===1&&Pt[ce][0].length===0),jt==="greedy"&&me){for(var Le=[],J=0;J<De;J++){var Mt=Ee?at[J]:J;Le.push(Pt[ce][Mt])}ae=Le.join("").trim()===""}if(!ae){for(var Ft=0;Ft<De;Ft++){0<Ft&&!Oe&&(Ut+=Y);var St=me&&Ee?at[Ft]:Ft;Ut+=vt(Pt[ce][St],Ft)}ce<Pt.length-1&&(!jt||0<De&&!Oe)&&(Ut+=ct)}}return Ut}function vt(at,Pt){var jt,Ut;return at==null?"":at.constructor===Date?JSON.stringify(at).slice(1,25):(Ut=!1,Ot&&typeof at=="string"&&Ot.test(at)&&(at="'"+at,Ut=!0),jt=at.toString().replace(Ct,ht),(Ut=Ut||U===!0||typeof U=="function"&&U(at,Pt)||Array.isArray(U)&&U[Pt]||((me,Ee)=>{for(var le=0;le<Ee.length;le++)if(-1<me.indexOf(Ee[le]))return!0;return!1})(jt,u.BAD_DELIMITERS)||-1<jt.indexOf(Y)||jt.charAt(0)===" "||jt.charAt(jt.length-1)===" ")?j+jt+j:jt)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!r&&!!s.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=S,u.ParserHandle=k,u.NetworkStreamer=f,u.FileStreamer=g,u.StringStreamer=m,u.ReadableStreamStreamer=y,s.jQuery&&((i=s.jQuery).fn.parse=function(X){var B=X.config||{},U=[];return this.each(function(ct){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var j=0;j<this.files.length;j++)U.push({file:this.files[j],inputElem:this,instanceConfig:i.extend({},B)})}),K(),this;function K(){if(U.length===0)q(X.complete)&&X.complete();else{var ct,j,ht,It,yt=U[0];if(q(X.before)){var Ot=X.before(yt.file,yt.inputElem);if(typeof Ot=="object"){if(Ot.action==="abort")return ct="AbortError",j=yt.file,ht=yt.inputElem,It=Ot.reason,void(q(X.error)&&X.error({name:ct},j,ht,It));if(Ot.action==="skip")return void Y();typeof Ot.config=="object"&&(yt.instanceConfig=i.extend(yt.instanceConfig,Ot.config))}else if(Ot==="skip")return void Y()}var Ct=yt.instanceConfig.complete;yt.instanceConfig.complete=function(Gt){q(Ct)&&Ct(Gt,yt.file,yt.inputElem),Y()},u.parse(yt.file,yt.instanceConfig)}}function Y(){U.splice(0,1),K()}}),o&&(s.onmessage=function(X){X=X.data,u.WORKER_ID===void 0&&X&&(u.WORKER_ID=X.workerId),typeof X.input=="string"?s.postMessage({workerId:u.WORKER_ID,results:u.parse(X.input,X.config),finished:!0}):(s.File&&X.input instanceof File||X.input instanceof Object)&&(X=u.parse(X.input,X.config))&&s.postMessage({workerId:u.WORKER_ID,results:X,finished:!0})}),(f.prototype=Object.create(h.prototype)).constructor=f,(g.prototype=Object.create(h.prototype)).constructor=g,(m.prototype=Object.create(m.prototype)).constructor=m,(y.prototype=Object.create(h.prototype)).constructor=y,u})})(ym)),ym.exports}var zM=BM();const FT=Vp(zM);function tf(n,t,e,s){function i(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function a(h){try{u(s.next(h))}catch(f){o(f)}}function l(h){try{u(s.throw(h))}catch(f){o(f)}}function u(h){h.done?r(h.value):i(h.value).then(a,l)}u((s=s.apply(n,t||[])).next())})}function ef(n,t){var e={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},s,i,r,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(h){return l([u,h])}}function l(u){if(s)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(e=0)),e;)try{if(s=1,i&&(r=u[0]&2?i.return:u[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,u[1])).done)return r;switch(i=0,r&&(u=[u[0]&2,r.value]),u[0]){case 0:case 1:r=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(r=e.trys,!(r=r.length>0&&r[r.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){e.label=u[1];break}if(u[0]===6&&e.label<r[1]){e.label=r[1],r=u;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(u);break}r[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(n,e)}catch(h){u=[6,h],i=0}finally{s=r=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function b4(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var s=e.call(n),i,r=[],o;try{for(;(t===void 0||t-- >0)&&!(i=s.next()).done;)r.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(e=s.return)&&e.call(s)}finally{if(o)throw o.error}}return r}function v4(n,t,e){if(e||arguments.length===2)for(var s=0,i=t.length,r;s<i;s++)(r||!(s in t))&&(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return n.concat(r||Array.prototype.slice.call(t))}var WM=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Up(n,t){var e=VM(n);if(typeof e.path!="string"){var s=n.webkitRelativePath;Object.defineProperty(e,"path",{value:typeof t=="string"?t:typeof s=="string"&&s.length>0?s:n.name,writable:!1,configurable:!1,enumerable:!0})}return e}function VM(n){var t=n.name,e=t&&t.lastIndexOf(".")!==-1;if(e&&!n.type){var s=t.split(".").pop().toLowerCase(),i=WM.get(s);i&&Object.defineProperty(n,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return n}var UM=[".DS_Store","Thumbs.db"];function GM(n){return tf(this,void 0,void 0,function(){return ef(this,function(t){return Pm(n)&&HM(n.dataTransfer)?[2,KM(n.dataTransfer,n.type)]:jM(n)?[2,XM(n)]:Array.isArray(n)&&n.every(function(e){return"getFile"in e&&typeof e.getFile=="function"})?[2,qM(n)]:[2,[]]})})}function HM(n){return Pm(n)}function jM(n){return Pm(n)&&Pm(n.target)}function Pm(n){return typeof n=="object"&&n!==null}function XM(n){return Xb(n.target.files).map(function(t){return Up(t)})}function qM(n){return tf(this,void 0,void 0,function(){var t;return ef(this,function(e){switch(e.label){case 0:return[4,Promise.all(n.map(function(s){return s.getFile()}))];case 1:return t=e.sent(),[2,t.map(function(s){return Up(s)})]}})})}function KM(n,t){return tf(this,void 0,void 0,function(){var e,s;return ef(this,function(i){switch(i.label){case 0:return n.items?(e=Xb(n.items).filter(function(r){return r.kind==="file"}),t!=="drop"?[2,e]:[4,Promise.all(e.map(YM))]):[3,2];case 1:return s=i.sent(),[2,y4(PT(s))];case 2:return[2,y4(Xb(n.files).map(function(r){return Up(r)}))]}})})}function y4(n){return n.filter(function(t){return UM.indexOf(t.name)===-1})}function Xb(n){if(n===null)return[];for(var t=[],e=0;e<n.length;e++){var s=n[e];t.push(s)}return t}function YM(n){if(typeof n.webkitGetAsEntry!="function")return w4(n);var t=n.webkitGetAsEntry();return t&&t.isDirectory?LT(t):w4(n)}function PT(n){return n.reduce(function(t,e){return v4(v4([],b4(t),!1),b4(Array.isArray(e)?PT(e):[e]),!1)},[])}function w4(n){var t=n.getAsFile();if(!t)return Promise.reject("".concat(n," is not a File"));var e=Up(t);return Promise.resolve(e)}function ZM(n){return tf(this,void 0,void 0,function(){return ef(this,function(t){return[2,n.isDirectory?LT(n):JM(n)]})})}function LT(n){var t=n.createReader();return new Promise(function(e,s){var i=[];function r(){var o=this;t.readEntries(function(a){return tf(o,void 0,void 0,function(){var l,u,h;return ef(this,function(f){switch(f.label){case 0:if(a.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=f.sent(),e(l),[3,4];case 3:return u=f.sent(),s(u),[3,4];case 4:return[3,6];case 5:h=Promise.all(a.map(ZM)),i.push(h),r(),f.label=6;case 6:return[2]}})})},function(a){s(a)})}r()})}function JM(n){return tf(this,void 0,void 0,function(){return ef(this,function(t){return[2,new Promise(function(e,s){n.file(function(i){var r=Up(i,n.fullPath);e(r)},function(i){s(i)})})]})})}function QM(n,t){if(n&&t){const e=Array.isArray(t)?t:t.split(","),s=n.name||"",i=(n.type||"").toLowerCase(),r=i.replace(/\/.*$/,"");return e.some(o=>{const a=o.trim().toLowerCase();return a.charAt(0)==="."?s.toLowerCase().endsWith(a):a.endsWith("/*")?r===a.replace(/\/.*$/,""):i===a})}return!0}const t9="file-invalid-type",e9="file-too-large",n9="file-too-small",s9="too-many-files",i9=n=>{n=Array.isArray(n)&&n.length===1?n[0]:n;const t=Array.isArray(n)?`one of ${n.join(", ")}`:n;return{code:t9,message:`File type must be ${t}`}},k4=n=>({code:e9,message:`File is larger than ${n} bytes`}),C4=n=>({code:n9,message:`File is smaller than ${n} bytes`}),r9={code:s9,message:"Too many files"};function o9(n,t){const e=n.type==="application/x-moz-file"||QM(n,t);return[e,e?null:i9(t)]}function a9(n,t,e){if(np(n.size))if(np(t)&&np(e)){if(n.size>e)return[!1,k4(e)];if(n.size<t)return[!1,C4(t)]}else{if(np(t)&&n.size<t)return[!1,C4(t)];if(np(e)&&n.size>e)return[!1,k4(e)]}return[!0,null]}function np(n){return n!=null}function S4(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function nm(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,t=>t==="Files"||t==="application/x-moz-file"):!!n.target&&!!n.target.files}function l9(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function c9(n){return n.indexOf("Edge/")!==-1}function u9(n=window.navigator.userAgent){return l9(n)||c9(n)}var h9=Re("<p> </p>"),d9=Re('<div><input type="file" autocomplete="off" tabindex="-1" style="display: none;"/> <!></div>');function BT(n,t){if(new.target)return wr({component:BT,...n});const e=c4(t,["children","$$slots","$$events","$$legacy"]),s=c4(e,["accept","disabled","getFilesFromEvent","maxSize","minSize","multiple","preventDropOnDocument","noClick","noKeyboard","noDrag","noDragEventsBubbling","containerClasses","containerStyles","disableDefaultStyles","name","inputElement","required"]);ar(t,!1);const i=pl(),r=pl(),o=pl(),a=pl();let l=An(t,"accept",12,void 0),u=An(t,"disabled",12,!1),h=An(t,"getFilesFromEvent",12,GM),f=An(t,"maxSize",12,1/0),g=An(t,"minSize",12,0),m=An(t,"multiple",12,!0),y=An(t,"preventDropOnDocument",12,!0),k=An(t,"noClick",12,!1),C=An(t,"noKeyboard",12,!1),S=An(t,"noDrag",12,!1),$=An(t,"noDragEventsBubbling",12,!1),D=An(t,"containerClasses",12,""),R=An(t,"containerStyles",12,""),V=An(t,"disableDefaultStyles",12,!1),E=An(t,"name",12,""),q=An(t,"inputElement",12,void 0),X=An(t,"required",12,!1);const B=v7();let U={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]},K=pl();function Y(){U.isFileDialogActive=!1,U.isDragActive=!1,U.draggedFiles=[],U.acceptedFiles=[],U.fileRejections=[]}function ct(){q()&&(q(q().value=null,!0),U.isFileDialogActive=!0,q().click())}function j(Et){!Tt(K)||!Tt(K).isEqualNode(Et.target)||(Et.keyCode===32||Et.keyCode===13)&&(Et.preventDefault(),ct())}function ht(){U.isFocused=!0}function It(){U.isFocused=!1}function yt(){k()||(u9()?setTimeout(ct,0):ct())}function Ot(Et){Et.preventDefault(),at(Et),jt=[...jt,Et.target],nm(Et)&&Promise.resolve(h()(Et)).then(de=>{S4(Et)&&!$()||(U.draggedFiles=de,U.isDragActive=!0,B("dragenter",{dragEvent:Et}))})}function Ct(Et){if(Et.preventDefault(),at(Et),Et.dataTransfer)try{Et.dataTransfer.dropEffect="copy"}catch{}return nm(Et)&&B("dragover",{dragEvent:Et}),!1}function Gt(Et){Et.preventDefault(),at(Et);const de=jt.filter(be=>Tt(K)&&Tt(K).contains(be)),Xt=de.indexOf(Et.target);Xt!==-1&&de.splice(Xt,1),jt=de,!(de.length>0)&&(U.isDragActive=!1,U.draggedFiles=[],nm(Et)&&B("dragleave",{dragEvent:Et}))}function vt(Et){Et.preventDefault(),at(Et),jt=[],nm(Et)&&(B("filedropped",{event:Et}),Promise.resolve(h()(Et)).then(de=>{if(S4(Et)&&!$())return;const Xt=[],be=[];de.forEach(Te=>{const[$e,Pe]=o9(Te,l()),[Ae,vn]=a9(Te,g(),f());if($e&&Ae)Xt.push(Te);else{const vs=[Pe,vn].filter(ei=>ei);be.push({file:Te,errors:vs})}}),!m()&&Xt.length>1&&(Xt.forEach(Te=>{be.push({file:Te,errors:[r9]})}),Xt.splice(0)),Et.dataTransfer&&q(q().files=Et.dataTransfer.files,!0),U.acceptedFiles=Xt,U.fileRejections=be,B("drop",{acceptedFiles:Xt,fileRejections:be,event:Et}),be.length>0&&B("droprejected",{fileRejections:be,event:Et}),Xt.length>0&&B("dropaccepted",{acceptedFiles:Xt,event:Et})})),Y()}function at(Et){$()&&Et.stopPropagation()}function Pt(Et){y()&&Et.preventDefault()}let jt=[];function Ut(Et){y()&&(Tt(K)&&Tt(K).contains(Et.target)||(Et.preventDefault(),jt=[]))}function me(){U.isFileDialogActive&&setTimeout(()=>{if(q()){const{files:Et}=q();Et.length||(U.isFileDialogActive=!1,B("filedialogcancel"))}},300)}x7(()=>{q(null)});function Ee(Et){Et.stopPropagation()}Yg(()=>Td(u()),()=>{Ve(i,Et=>u()?null:Et)}),Yg(()=>(Td(C()),Tt(i)),()=>{Ve(r,Et=>C()?null:Tt(i)(Et))}),Yg(()=>(Td(S()),Tt(i)),()=>{Ve(o,Et=>S()?null:Tt(i)(Et))}),Yg(()=>Td(m()),()=>{Ve(a,m()?"Drag 'n' drop some files here, or click to select files":"Drag 'n' drop a file here, or click to select a file")}),s7();var le={get accept(){return l()},set accept(Et){l(Et),_n()},get disabled(){return u()},set disabled(Et){u(Et),_n()},get getFilesFromEvent(){return h()},set getFilesFromEvent(Et){h(Et),_n()},get maxSize(){return f()},set maxSize(Et){f(Et),_n()},get minSize(){return g()},set minSize(Et){g(Et),_n()},get multiple(){return m()},set multiple(Et){m(Et),_n()},get preventDropOnDocument(){return y()},set preventDropOnDocument(Et){y(Et),_n()},get noClick(){return k()},set noClick(Et){k(Et),_n()},get noKeyboard(){return C()},set noKeyboard(Et){C(Et),_n()},get noDrag(){return S()},set noDrag(Et){S(Et),_n()},get noDragEventsBubbling(){return $()},set noDragEventsBubbling(Et){$(Et),_n()},get containerClasses(){return D()},set containerClasses(Et){D(Et),_n()},get containerStyles(){return R()},set containerStyles(Et){R(Et),_n()},get disableDefaultStyles(){return V()},set disableDefaultStyles(Et){V(Et),_n()},get name(){return E()},set name(Et){E(Et),_n()},get inputElement(){return q()},set inputElement(Et){q(Et),_n()},get required(){return X()},set required(Et){X(Et),_n()},$set:Cr,$on:(Et,de)=>kr(t,Et,de)};IT();var ce=d9();Mi("focus",mp,me),Mi("dragover",mp,Pt),Mi("drop",mp,Ut);var De=Ki(()=>Tt(r)(j)),ae=Ki(()=>Tt(r)(ht)),Oe=Ki(()=>Tt(r)(It)),Le=Ki(()=>Tt(i)(yt)),J=Ki(()=>Tt(o)(Ot)),Mt=Ki(()=>Tt(o)(Ct)),Ft=Ki(()=>Tt(o)(Gt)),St=Ki(()=>Tt(o)(vt));M7(ce,()=>({tabindex:"0",role:"button",class:`${V()?"":"dropzone"}
  ${D()??""}`,style:R(),...s}),void 0,void 0,void 0,"svelte-13pdczd");var ft=Ht(ce);Rm(ft,Et=>q(Et),()=>q());var zt=pe(ft,2);return S7(zt,t,"default",{},Et=>{var de=h9(),Xt=Ht(de,!0);Lt(de),un(()=>nn(Xt,Tt(a))),Ie(Et,de)}),Lt(ce),Rm(ce,Et=>Ve(K,Et),()=>Tt(K)),un(Et=>{rs(ft,"accept",Et),ft.multiple=m(),ft.required=X(),rs(ft,"name",E())},[()=>(Td(l()),Al(()=>l()?.toString()))]),Mi("change",ft,vt),Mi("click",ft,Ee),Mi("keydown",ce,function(...Et){Tt(De)?.apply(this,Et)}),Mi("focus",ce,function(...Et){Tt(ae)?.apply(this,Et)}),Mi("blur",ce,function(...Et){Tt(Oe)?.apply(this,Et)}),Mi("click",ce,function(...Et){Tt(Le)?.apply(this,Et)}),Mi("dragenter",ce,function(...Et){Tt(J)?.apply(this,Et)}),Mi("dragover",ce,function(...Et){Tt(Mt)?.apply(this,Et)}),Mi("dragleave",ce,function(...Et){Tt(Ft)?.apply(this,Et)}),Mi("drop",ce,function(...Et){Tt(St)?.apply(this,Et)}),Ie(n,ce),lr(le)}var f9=Re('<div class="loaderContainer2"><div class="loader2"></div></div>'),p9=Re('<div class="confirmationBox"><p>Selected File:</p> <p class="high"> </p> <button type="button" class="btn">Click here to confirm</button></div>'),g9=Re('<p class="errormsg message"><!></p>'),m9=Re(`<p>Welcome to Statsboxd, to get your stats please export your data
                from Letterboxd (<a href="https://letterboxd.com/data/export/?fromApp=false" target="_top">or click here</a>) and upload the zip file.<br/></p> <!> <p style="color: yellow !important; display:none;">In the last few days there has been a large load of users and
                Cloudflare Workers have imposed more stringent limits for free
                users. If anyone would like to give me a hand for a possible
                solution <a href="//t.me/giudimax" target="_blank">contact me</a>. <br/></p> <p>If you like the project consider to <a target="_blank" href="//ko-fi.com/giudimax">supporting me</a> or <a target="_blank" href="//github.com/GiuDiMax/Statsboxd">collaborating on Github</a> <br/></p> <br/> <strong style="">Supporters features:</strong> <ul style="line-height: 1.5em"><li>Stats without zip file using
                    statsboxd.top?username=your_letterboxd_username&id=your_letterboxd_ide&donator;</li> <li>Share your stats;</li> <li>Technical support;</li> <li>After you donate, contact me and write me your letterboxd
                    username.</li></ul>`,1),x9=Re('<main><!> <div class="fileUploadContainer"><img class="logo" src="images/logo.webp" alt="statsboxd logo"/> <!></div></main>');function zT(n,t){if(new.target)return wr({component:zT,...n});ar(t,!1);let e=pl(!0),s={},i={},r=pl(""),o=pl(void 0);function a(D){Ve(o,D.detail.acceptedFiles[0])}async function l(D){return await(await fetch(nc+"stats",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(D)})).json()}async function u(D,R){const E=await(await D.file(R)).async("text");return await FT.parse(E,{header:!0,skipEmptyLines:!0}).data}async function h(){Ve(e,!0);let D;try{D=await PM.loadAsync(Tt(o))}catch{Ve(o,void 0),Ve(r,"The file you uploaded appears to be corrupt or incorrect. Make sure you downloaded it from a browser like Chrome or Firefox and not from other apps' internal browsers.Try opening it, and then try uploading again. <br/>If the problem continues contact me on <a href='https://t.me/giudimax' target='_blank'>telegram and send me your zip file</a><br/>"),Ve(e,!1);return}try{const[R,V,E,q,X]=await Promise.all([u(D,"watched.csv"),u(D,"ratings.csv"),u(D,"diary.csv"),u(D,"reviews.csv"),u(D,"profile.csv")]);console.log("ok read files");const B=X[0].Username,U=X[0]["Given Name"]+X[0]["Family Name"],K=V.reduce((ht,It)=>(ht[It["Letterboxd URI"]]=It.Rating,ht),{}),Y=q.map(ht=>ht["Letterboxd URI"]),ct=E.reduce((ht,It)=>{const{Name:yt,Year:Ot,Rewatch:Ct}=It,Gt=`${yt}_${Ot}`;return ht[Gt]=ht[Gt]||[],ht[Gt].push({date:It["Watched Date"],rewatch:Ct==="Yes",review:Y.includes(It["Letterboxd URI"])}),ht},{});i.watched=R.map(ht=>{const It=`${ht.Name}_${ht.Year}`;return{_id:ht["Letterboxd URI"].split("/").pop(),r:parseFloat(K[ht["Letterboxd URI"]])||null,d:ct[It]||[]}});const j=i.watched.filter(ht=>"r"in ht);i.username=B.toLowerCase(),U!==""?i.name=U:i.name=B,i.ru=j.length>50,i.update=new Date,i.update=i.update.toString().split("T")[0],localStorage.setItem(B.toLowerCase(),JSON.stringify(i)),s=await l(i),s.username=i.username,s.name=i.name,s.ru=i.ru,s.update=i.update,s.donator=!1,i.yearsStats=s.yearsStats,Ve(r,""),localStorage.setItem(B.toLowerCase(),JSON.stringify(i)),localStorage.setItem(B.toLowerCase()+"_stats",JSON.stringify(s)),localStorage.setItem("latest",B.toLowerCase()),window.location.search="?username="+B.toLowerCase()}catch(R){console.log(R),Ve(o,void 0),Ve(r,"There was a problem with the server. Try again in a few minutes. <br/>If the problem continues contact me on <a href='https://t.me/giudimax' target='_blank'>telegram and send me your zip file</a><br/>")}Ve(e,!1)}$l(async()=>{const D=localStorage.getItem("latest");D!==null&&D!=="undefined"?window.location.search="?username="+D.toLowerCase():Ve(e,!1)});var f={$set:Cr,$on:(D,R)=>kr(t,D,R)};IT();var g=x9(),m=Ht(g);{var y=D=>{var R=f9();Ie(D,R)};En(m,D=>{Tt(e)&&D(y)})}var k=pe(m,2),C=pe(Ht(k),2);{var S=D=>{var R=p9(),V=pe(Ht(R),2),E=Ht(V,!0);Lt(V);var q=pe(V,2);q.__click=h,Lt(R),un(()=>nn(E,Tt(o).name)),Ie(D,R)},$=D=>{var R=Mr(),V=Ss(R);{var E=X=>{var B=g9(),U=Ht(B);Gv(U,()=>Tt(r)),Lt(B),Ie(X,B)},q=X=>{var B=m9(),U=pe(Ss(B),2);BT(U,{containerClasses:"fileUpload",$$events:{drop:a}}),Ys(10),Ie(X,B)};En(V,X=>{Tt(r)!==""?X(E):X(q,!1)},!0)}Ie(D,R)};En(C,D=>{Tt(o)!==void 0?D(S):D($,!1)})}return Lt(k),Lt(g),Ie(n,g),lr(f)}C1(["click"]);function b9(n,t){if(typeof n>"u"||!n.document)throw new Error("jQuery requires a window with a document");var e=[],s=Object.getPrototypeOf,i=e.slice,r=e.flat?function(b){return e.flat.call(b)}:function(b){return e.concat.apply([],b)},o=e.push,a=e.indexOf,l={},u=l.toString,h=l.hasOwnProperty,f=h.toString,g=f.call(Object),m={};function y(b){return b==null?b+"":typeof b=="object"?l[u.call(b)]||"object":typeof b}function k(b){return b!=null&&b===b.window}function C(b){var _=!!b&&b.length,O=y(b);return typeof b=="function"||k(b)?!1:O==="array"||_===0||typeof _=="number"&&_>0&&_-1 in b}var S=n.document,$={type:!0,src:!0,nonce:!0,noModule:!0};function D(b,_,O){O=O||S;var H,Q=O.createElement("script");Q.text=b;for(H in $)_&&_[H]&&(Q[H]=_[H]);O.head.appendChild(Q).parentNode&&Q.parentNode.removeChild(Q)}var R="4.0.0",V=/HTML$/i,E=function(b,_){return new E.fn.init(b,_)};E.fn=E.prototype={jquery:R,constructor:E,length:0,toArray:function(){return i.call(this)},get:function(b){return b==null?i.call(this):b<0?this[b+this.length]:this[b]},pushStack:function(b){var _=E.merge(this.constructor(),b);return _.prevObject=this,_},each:function(b){return E.each(this,b)},map:function(b){return this.pushStack(E.map(this,function(_,O){return b.call(_,O,_)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,function(b,_){return(_+1)%2}))},odd:function(){return this.pushStack(E.grep(this,function(b,_){return _%2}))},eq:function(b){var _=this.length,O=+b+(b<0?_:0);return this.pushStack(O>=0&&O<_?[this[O]]:[])},end:function(){return this.prevObject||this.constructor()}},E.extend=E.fn.extend=function(){var b,_,O,H,Q,tt,dt=arguments[0]||{},Rt=1,$t=arguments.length,Qt=!1;for(typeof dt=="boolean"&&(Qt=dt,dt=arguments[Rt]||{},Rt++),typeof dt!="object"&&typeof dt!="function"&&(dt={}),Rt===$t&&(dt=this,Rt--);Rt<$t;Rt++)if((b=arguments[Rt])!=null)for(_ in b)H=b[_],!(_==="__proto__"||dt===H)&&(Qt&&H&&(E.isPlainObject(H)||(Q=Array.isArray(H)))?(O=dt[_],Q&&!Array.isArray(O)?tt=[]:!Q&&!E.isPlainObject(O)?tt={}:tt=O,Q=!1,dt[_]=E.extend(Qt,tt,H)):H!==void 0&&(dt[_]=H));return dt},E.extend({expando:"jQuery"+(R+Math.random()).replace(/\D/g,""),isReady:!0,error:function(b){throw new Error(b)},noop:function(){},isPlainObject:function(b){var _,O;return!b||u.call(b)!=="[object Object]"?!1:(_=s(b),_?(O=h.call(_,"constructor")&&_.constructor,typeof O=="function"&&f.call(O)===g):!0)},isEmptyObject:function(b){var _;for(_ in b)return!1;return!0},globalEval:function(b,_,O){D(b,{nonce:_&&_.nonce},O)},each:function(b,_){var O,H=0;if(C(b))for(O=b.length;H<O&&_.call(b[H],H,b[H])!==!1;H++);else for(H in b)if(_.call(b[H],H,b[H])===!1)break;return b},text:function(b){var _,O="",H=0,Q=b.nodeType;if(!Q)for(;_=b[H++];)O+=E.text(_);return Q===1||Q===11?b.textContent:Q===9?b.documentElement.textContent:Q===3||Q===4?b.nodeValue:O},makeArray:function(b,_){var O=_||[];return b!=null&&(C(Object(b))?E.merge(O,typeof b=="string"?[b]:b):o.call(O,b)),O},inArray:function(b,_,O){return _==null?-1:a.call(_,b,O)},isXMLDoc:function(b){var _=b&&b.namespaceURI,O=b&&(b.ownerDocument||b).documentElement;return!V.test(_||O&&O.nodeName||"HTML")},contains:function(b,_){var O=_&&_.parentNode;return b===O||!!(O&&O.nodeType===1&&(b.contains?b.contains(O):b.compareDocumentPosition&&b.compareDocumentPosition(O)&16))},merge:function(b,_){for(var O=+_.length,H=0,Q=b.length;H<O;H++)b[Q++]=_[H];return b.length=Q,b},grep:function(b,_,O){for(var H,Q=[],tt=0,dt=b.length,Rt=!O;tt<dt;tt++)H=!_(b[tt],tt),H!==Rt&&Q.push(b[tt]);return Q},map:function(b,_,O){var H,Q,tt=0,dt=[];if(C(b))for(H=b.length;tt<H;tt++)Q=_(b[tt],tt,O),Q!=null&&dt.push(Q);else for(tt in b)Q=_(b[tt],tt,O),Q!=null&&dt.push(Q);return r(dt)},guid:1,support:m}),typeof Symbol=="function"&&(E.fn[Symbol.iterator]=e[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(b,_){l["[object "+_+"]"]=_.toLowerCase()});function q(b,_){return b.nodeName&&b.nodeName.toLowerCase()===_.toLowerCase()}var X=e.pop,B="[\\x20\\t\\r\\n\\f]",U=S.documentMode,K=U&&new RegExp(":enabled|:disabled|\\["+B+"*name"+B+"*="+B+`*(?:''|"")`),Y=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),ct="(?:\\\\[\\da-fA-F]{1,6}"+B+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",j=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),ht=new RegExp(B+"|>"),It=/[+~]/,yt=S.documentElement,Ot=yt.matches||yt.msMatchesSelector;function Ct(){var b=[];function _(O,H){return b.push(O+" ")>E.expr.cacheLength&&delete _[b.shift()],_[O+" "]=H}return _}function Gt(b){return b&&typeof b.getElementsByTagName<"u"&&b}var vt="\\["+B+"*("+ct+")(?:"+B+"*([*^$|!~]?=)"+B+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+ct+"))|)"+B+"*\\]",at=":("+ct+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+vt+")*)|.*)\\)|)",Pt={ID:new RegExp("^#("+ct+")"),CLASS:new RegExp("^\\.("+ct+")"),TAG:new RegExp("^("+ct+"|[*])"),ATTR:new RegExp("^"+vt),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i")},jt=new RegExp(at),Ut=new RegExp("\\\\[\\da-fA-F]{1,6}"+B+"?|\\\\([^\\r\\n\\f])","g"),me=function(b,_){var O="0x"+b.slice(1)-65536;return _||(O<0?String.fromCharCode(O+65536):String.fromCharCode(O>>10|55296,O&1023|56320))};function Ee(b){return b.replace(Ut,me)}function le(b){E.error("Syntax error, unrecognized expression: "+b)}var ce=new RegExp("^"+B+"*,"+B+"*"),De=Ct();function ae(b,_){var O,H,Q,tt,dt,Rt,$t,Qt=De[b+" "];if(Qt)return _?0:Qt.slice(0);for(dt=b,Rt=[],$t=E.expr.preFilter;dt;){(!O||(H=ce.exec(dt)))&&(H&&(dt=dt.slice(H[0].length)||dt),Rt.push(Q=[])),O=!1,(H=j.exec(dt))&&(O=H.shift(),Q.push({value:O,type:H[0].replace(Y," ")}),dt=dt.slice(O.length));for(tt in Pt)(H=E.expr.match[tt].exec(dt))&&(!$t[tt]||(H=$t[tt](H)))&&(O=H.shift(),Q.push({value:O,type:tt,matches:H}),dt=dt.slice(O.length));if(!O)break}return _?dt.length:dt?le(b):De(b,Rt).slice(0)}var Oe={ATTR:function(b){return b[1]=Ee(b[1]),b[3]=Ee(b[3]||b[4]||b[5]||""),b[2]==="~="&&(b[3]=" "+b[3]+" "),b.slice(0,4)},CHILD:function(b){return b[1]=b[1].toLowerCase(),b[1].slice(0,3)==="nth"?(b[3]||le(b[0]),b[4]=+(b[4]?b[5]+(b[6]||1):2*(b[3]==="even"||b[3]==="odd")),b[5]=+(b[7]+b[8]||b[3]==="odd")):b[3]&&le(b[0]),b},PSEUDO:function(b){var _,O=!b[6]&&b[2];return Pt.CHILD.test(b[0])?null:(b[3]?b[2]=b[4]||b[5]||"":O&&jt.test(O)&&(_=ae(O,!0))&&(_=O.indexOf(")",O.length-_)-O.length)&&(b[0]=b[0].slice(0,_),b[2]=O.slice(0,_)),b.slice(0,3))}};function Le(b){for(var _=0,O=b.length,H="";_<O;_++)H+=b[_].value;return H}function J(b,_,O,H,Q,tt,dt){var Rt=0,$t=b.length,Qt=O==null;if(y(O)==="object"){Q=!0;for(Rt in O)J(b,_,Rt,O[Rt],!0,tt,dt)}else if(H!==void 0&&(Q=!0,typeof H!="function"&&(dt=!0),Qt&&(dt?(_.call(b,H),_=null):(Qt=_,_=function(oe,ye,se){return Qt.call(E(oe),se)})),_))for(;Rt<$t;Rt++)_(b[Rt],O,dt?H:H.call(b[Rt],Rt,_(b[Rt],O)));return Q?b:Qt?_.call(b):$t?_(b[0],O):tt}var Mt=/[^\x20\t\r\n\f]+/g;E.fn.extend({attr:function(b,_){return J(this,E.attr,b,_,arguments.length>1)},removeAttr:function(b){return this.each(function(){E.removeAttr(this,b)})}}),E.extend({attr:function(b,_,O){var H,Q,tt=b.nodeType;if(!(tt===3||tt===8||tt===2)){if(typeof b.getAttribute>"u")return E.prop(b,_,O);if((tt!==1||!E.isXMLDoc(b))&&(Q=E.attrHooks[_.toLowerCase()]),O!==void 0){if(O===null||O===!1&&_.toLowerCase().indexOf("aria-")!==0){E.removeAttr(b,_);return}return Q&&"set"in Q&&(H=Q.set(b,O,_))!==void 0?H:(b.setAttribute(_,O),O)}return Q&&"get"in Q&&(H=Q.get(b,_))!==null?H:(H=b.getAttribute(_),H??void 0)}},attrHooks:{},removeAttr:function(b,_){var O,H=0,Q=_&&_.match(Mt);if(Q&&b.nodeType===1)for(;O=Q[H++];)b.removeAttribute(O)}}),U&&(E.attrHooks.type={set:function(b,_){if(_==="radio"&&q(b,"input")){var O=b.value;return b.setAttribute("type",_),O&&(b.value=O),_}}});var Ft=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function St(b,_){return _?b==="\0"?"�":b.slice(0,-1)+"\\"+b.charCodeAt(b.length-1).toString(16)+" ":"\\"+b}E.escapeSelector=function(b){return(b+"").replace(Ft,St)};var ft=e.sort,zt=e.splice,Et;function de(b,_){if(b===_)return Et=!0,0;var O=!b.compareDocumentPosition-!_.compareDocumentPosition;return O||(O=(b.ownerDocument||b)==(_.ownerDocument||_)?b.compareDocumentPosition(_):1,O&1?b==S||b.ownerDocument==S&&E.contains(S,b)?-1:_==S||_.ownerDocument==S&&E.contains(S,_)?1:0:O&4?-1:1)}E.uniqueSort=function(b){var _,O=[],H=0,Q=0;if(Et=!1,ft.call(b,de),Et){for(;_=b[Q++];)_===b[Q]&&(H=O.push(Q));for(;H--;)zt.call(b,O[H],1)}return b},E.fn.uniqueSort=function(){return this.pushStack(E.uniqueSort(i.apply(this)))};var Xt,be,Te,$e,Pe,Ae=0,vn=0,vs=Ct(),ei=Ct(),ps=Ct(),Ws=new RegExp(B+"+","g"),ns=new RegExp("^"+ct+"$"),bi=E.extend({needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},Pt),Pi=/^(?:input|select|textarea|button)$/i,vi=/^h\d$/i,Ur=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Me=function(){We()},ze=Yn(function(b){return b.disabled===!0&&q(b,"fieldset")},{dir:"parentNode",next:"legend"});function Ue(b,_,O,H){var Q,tt,dt,Rt,$t,Qt,oe,ye=_&&_.ownerDocument,se=_?_.nodeType:9;if(O=O||[],typeof b!="string"||!b||se!==1&&se!==9&&se!==11)return O;if(!H&&(We(_),_=_||Te,Pe)){if(se!==11&&($t=Ur.exec(b)))if(Q=$t[1]){if(se===9)return(dt=_.getElementById(Q))&&o.call(O,dt),O;if(ye&&(dt=ye.getElementById(Q))&&E.contains(_,dt))return o.call(O,dt),O}else{if($t[2])return o.apply(O,_.getElementsByTagName(b)),O;if((Q=$t[3])&&_.getElementsByClassName)return o.apply(O,_.getElementsByClassName(Q)),O}if(!ps[b+" "]&&(!K||!K.test(b))){if(oe=b,ye=_,se===1&&(ht.test(b)||j.test(b))){for(ye=It.test(b)&&Gt(_.parentNode)||_,(ye!=_||U)&&((Rt=_.getAttribute("id"))?Rt=E.escapeSelector(Rt):_.setAttribute("id",Rt=E.expando)),Qt=ae(b),tt=Qt.length;tt--;)Qt[tt]=(Rt?"#"+Rt:":scope")+" "+Le(Qt[tt]);oe=Qt.join(",")}try{return o.apply(O,ye.querySelectorAll(oe)),O}catch{ps(b,!0)}finally{Rt===E.expando&&_.removeAttribute("id")}}}return jn(b.replace(Y,"$1"),_,O,H)}function Ge(b){return b[E.expando]=!0,b}function Ze(b){return function(_){return q(_,"input")&&_.type===b}}function tn(b){return function(_){return(q(_,"input")||q(_,"button"))&&_.type===b}}function an(b){return function(_){return"form"in _?_.parentNode&&_.disabled===!1?"label"in _?"label"in _.parentNode?_.parentNode.disabled===b:_.disabled===b:_.isDisabled===b||_.isDisabled!==!b&&ze(_)===b:_.disabled===b:"label"in _?_.disabled===b:!1}}function ln(b){return Ge(function(_){return _=+_,Ge(function(O,H){for(var Q,tt=b([],O.length,_),dt=tt.length;dt--;)O[Q=tt[dt]]&&(O[Q]=!(H[Q]=O[Q]))})})}function We(b){var _,O=b?b.ownerDocument||b:S;O==Te||O.nodeType!==9||(Te=O,$e=Te.documentElement,Pe=!E.isXMLDoc(Te),U&&S!=Te&&(_=Te.defaultView)&&_.top!==_&&_.addEventListener("unload",Me))}Ue.matches=function(b,_){return Ue(b,null,null,_)},Ue.matchesSelector=function(b,_){if(We(b),Pe&&!ps[_+" "]&&(!K||!K.test(_)))try{return Ot.call(b,_)}catch{ps(_,!0)}return Ue(_,Te,null,[b]).length>0},E.expr={cacheLength:50,createPseudo:Ge,match:bi,find:{ID:function(b,_){if(typeof _.getElementById<"u"&&Pe){var O=_.getElementById(b);return O?[O]:[]}},TAG:function(b,_){return typeof _.getElementsByTagName<"u"?_.getElementsByTagName(b):_.querySelectorAll(b)},CLASS:function(b,_){if(typeof _.getElementsByClassName<"u"&&Pe)return _.getElementsByClassName(b)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:Oe,filter:{ID:function(b){var _=Ee(b);return function(O){return O.getAttribute("id")===_}},TAG:function(b){var _=Ee(b).toLowerCase();return b==="*"?function(){return!0}:function(O){return q(O,_)}},CLASS:function(b){var _=vs[b+" "];return _||(_=new RegExp("(^|"+B+")"+b+"("+B+"|$)"))&&vs(b,function(O){return _.test(typeof O.className=="string"&&O.className||typeof O.getAttribute<"u"&&O.getAttribute("class")||"")})},ATTR:function(b,_,O){return function(H){var Q=E.attr(H,b);return Q==null?_==="!=":_?(Q+="",_==="="?Q===O:_==="!="?Q!==O:_==="^="?O&&Q.indexOf(O)===0:_==="*="?O&&Q.indexOf(O)>-1:_==="$="?O&&Q.slice(-O.length)===O:_==="~="?(" "+Q.replace(Ws," ")+" ").indexOf(O)>-1:_==="|="?Q===O||Q.slice(0,O.length+1)===O+"-":!1):!0}},CHILD:function(b,_,O,H,Q){var tt=b.slice(0,3)!=="nth",dt=b.slice(-4)!=="last",Rt=_==="of-type";return H===1&&Q===0?function($t){return!!$t.parentNode}:function($t,Qt,oe){var ye,se,xe,en,Ln,Pn=tt!==dt?"nextSibling":"previousSibling",Js=$t.parentNode,ws=Rt&&$t.nodeName.toLowerCase(),er=!oe&&!Rt,Ri=!1;if(Js){if(tt){for(;Pn;){for(xe=$t;xe=xe[Pn];)if(Rt?q(xe,ws):xe.nodeType===1)return!1;Ln=Pn=b==="only"&&!Ln&&"nextSibling"}return!0}if(Ln=[dt?Js.firstChild:Js.lastChild],dt&&er){for(se=Js[E.expando]||(Js[E.expando]={}),ye=se[b]||[],en=ye[0]===Ae&&ye[1],Ri=en&&ye[2],xe=en&&Js.childNodes[en];xe=++en&&xe&&xe[Pn]||(Ri=en=0)||Ln.pop();)if(xe.nodeType===1&&++Ri&&xe===$t){se[b]=[Ae,en,Ri];break}}else if(er&&(se=$t[E.expando]||($t[E.expando]={}),ye=se[b]||[],en=ye[0]===Ae&&ye[1],Ri=en),Ri===!1)for(;(xe=++en&&xe&&xe[Pn]||(Ri=en=0)||Ln.pop())&&!((Rt?q(xe,ws):xe.nodeType===1)&&++Ri&&(er&&(se=xe[E.expando]||(xe[E.expando]={}),se[b]=[Ae,Ri]),xe===$t)););return Ri-=Q,Ri===H||Ri%H===0&&Ri/H>=0}}},PSEUDO:function(b,_){var O=E.expr.pseudos[b]||E.expr.setFilters[b.toLowerCase()]||le("unsupported pseudo: "+b);return O[E.expando]?O(_):O}},pseudos:{not:Ge(function(b){var _=[],O=[],H=Sn(b.replace(Y,"$1"));return H[E.expando]?Ge(function(Q,tt,dt,Rt){for(var $t,Qt=H(Q,null,Rt,[]),oe=Q.length;oe--;)($t=Qt[oe])&&(Q[oe]=!(tt[oe]=$t))}):function(Q,tt,dt){return _[0]=Q,H(_,null,dt,O),_[0]=null,!O.pop()}}),has:Ge(function(b){return function(_){return Ue(b,_).length>0}}),contains:Ge(function(b){return b=Ee(b),function(_){return(_.textContent||E.text(_)).indexOf(b)>-1}}),lang:Ge(function(b){return ns.test(b||"")||le("unsupported lang: "+b),b=Ee(b).toLowerCase(),function(_){var O;do if(O=Pe?_.lang:_.getAttribute("xml:lang")||_.getAttribute("lang"))return O=O.toLowerCase(),O===b||O.indexOf(b+"-")===0;while((_=_.parentNode)&&_.nodeType===1);return!1}}),target:function(b){var _=n.location&&n.location.hash;return _&&_.slice(1)===b.id},root:function(b){return b===$e},focus:function(b){return b===Te.activeElement&&Te.hasFocus()&&!!(b.type||b.href||~b.tabIndex)},enabled:an(!1),disabled:an(!0),checked:function(b){return q(b,"input")&&!!b.checked||q(b,"option")&&!!b.selected},selected:function(b){return U&&b.parentNode&&b.parentNode.selectedIndex,b.selected===!0},empty:function(b){for(b=b.firstChild;b;b=b.nextSibling)if(b.nodeType<6)return!1;return!0},parent:function(b){return!E.expr.pseudos.empty(b)},header:function(b){return vi.test(b.nodeName)},input:function(b){return Pi.test(b.nodeName)},button:function(b){return q(b,"input")&&b.type==="button"||q(b,"button")},text:function(b){return q(b,"input")&&b.type==="text"},first:ln(function(){return[0]}),last:ln(function(b,_){return[_-1]}),eq:ln(function(b,_,O){return[O<0?O+_:O]}),even:ln(function(b,_){for(var O=0;O<_;O+=2)b.push(O);return b}),odd:ln(function(b,_){for(var O=1;O<_;O+=2)b.push(O);return b}),lt:ln(function(b,_,O){var H;for(O<0?H=O+_:O>_?H=_:H=O;--H>=0;)b.push(H);return b}),gt:ln(function(b,_,O){for(var H=O<0?O+_:O;++H<_;)b.push(H);return b})}},E.expr.pseudos.nth=E.expr.pseudos.eq;for(Xt in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})E.expr.pseudos[Xt]=Ze(Xt);for(Xt in{submit:!0,reset:!0})E.expr.pseudos[Xt]=tn(Xt);function fn(){}fn.prototype=E.expr.pseudos,E.expr.setFilters=new fn;function Yn(b,_,O){var H=_.dir,Q=_.next,tt=Q||H,dt=O&&tt==="parentNode",Rt=vn++;return _.first?function($t,Qt,oe){for(;$t=$t[H];)if($t.nodeType===1||dt)return b($t,Qt,oe);return!1}:function($t,Qt,oe){var ye,se,xe=[Ae,Rt];if(oe){for(;$t=$t[H];)if(($t.nodeType===1||dt)&&b($t,Qt,oe))return!0}else for(;$t=$t[H];)if($t.nodeType===1||dt)if(se=$t[E.expando]||($t[E.expando]={}),Q&&q($t,Q))$t=$t[H]||$t;else{if((ye=se[tt])&&ye[0]===Ae&&ye[1]===Rt)return xe[2]=ye[2];if(se[tt]=xe,xe[2]=b($t,Qt,oe))return!0}return!1}}function On(b){return b.length>1?function(_,O,H){for(var Q=b.length;Q--;)if(!b[Q](_,O,H))return!1;return!0}:b[0]}function xn(b,_,O){for(var H=0,Q=_.length;H<Q;H++)Ue(b,_[H],O);return O}function hn(b,_,O,H,Q){for(var tt,dt=[],Rt=0,$t=b.length,Qt=_!=null;Rt<$t;Rt++)(tt=b[Rt])&&(!O||O(tt,H,Q))&&(dt.push(tt),Qt&&_.push(Rt));return dt}function Nn(b,_,O,H,Q,tt){return H&&!H[E.expando]&&(H=Nn(H)),Q&&!Q[E.expando]&&(Q=Nn(Q,tt)),Ge(function(dt,Rt,$t,Qt){var oe,ye,se,xe,en=[],Ln=[],Pn=Rt.length,Js=dt||xn(_||"*",$t.nodeType?[$t]:$t,[]),ws=b&&(dt||!_)?hn(Js,en,b,$t,Qt):Js;if(O?(xe=Q||(dt?b:Pn||H)?[]:Rt,O(ws,xe,$t,Qt)):xe=ws,H)for(oe=hn(xe,Ln),H(oe,[],$t,Qt),ye=oe.length;ye--;)(se=oe[ye])&&(xe[Ln[ye]]=!(ws[Ln[ye]]=se));if(dt){if(Q||b){if(Q){for(oe=[],ye=xe.length;ye--;)(se=xe[ye])&&oe.push(ws[ye]=se);Q(null,xe=[],oe,Qt)}for(ye=xe.length;ye--;)(se=xe[ye])&&(oe=Q?a.call(dt,se):en[ye])>-1&&(dt[oe]=!(Rt[oe]=se))}}else xe=hn(xe===Rt?xe.splice(Pn,xe.length):xe),Q?Q(null,Rt,xe,Qt):o.apply(Rt,xe)})}function Xe(b){for(var _,O,H,Q=b.length,tt=E.expr.relative[b[0].type],dt=tt||E.expr.relative[" "],Rt=tt?1:0,$t=Yn(function(ye){return ye===_},dt,!0),Qt=Yn(function(ye){return a.call(_,ye)>-1},dt,!0),oe=[function(ye,se,xe){var en=!tt&&(xe||se!=be)||((_=se).nodeType?$t(ye,se,xe):Qt(ye,se,xe));return _=null,en}];Rt<Q;Rt++)if(O=E.expr.relative[b[Rt].type])oe=[Yn(On(oe),O)];else{if(O=E.expr.filter[b[Rt].type].apply(null,b[Rt].matches),O[E.expando]){for(H=++Rt;H<Q&&!E.expr.relative[b[H].type];H++);return Nn(Rt>1&&On(oe),Rt>1&&Le(b.slice(0,Rt-1).concat({value:b[Rt-2].type===" "?"*":""})).replace(Y,"$1"),O,Rt<H&&Xe(b.slice(Rt,H)),H<Q&&Xe(b=b.slice(H)),H<Q&&Le(b))}oe.push(O)}return On(oe)}function on(b,_){var O=_.length>0,H=b.length>0,Q=function(tt,dt,Rt,$t,Qt){var oe,ye,se,xe=0,en="0",Ln=tt&&[],Pn=[],Js=be,ws=tt||H&&E.expr.find.TAG("*",Qt),er=Ae+=Js==null?1:Math.random()||.1;for(Qt&&(be=dt==Te||dt||Qt);(oe=ws[en])!=null;en++){if(H&&oe){for(ye=0,!dt&&oe.ownerDocument!=Te&&(We(oe),Rt=!Pe);se=b[ye++];)if(se(oe,dt||Te,Rt)){o.call($t,oe);break}Qt&&(Ae=er)}O&&((oe=!se&&oe)&&xe--,tt&&Ln.push(oe))}if(xe+=en,O&&en!==xe){for(ye=0;se=_[ye++];)se(Ln,Pn,dt,Rt);if(tt){if(xe>0)for(;en--;)Ln[en]||Pn[en]||(Pn[en]=X.call($t));Pn=hn(Pn)}o.apply($t,Pn),Qt&&!tt&&Pn.length>0&&xe+_.length>1&&E.uniqueSort($t)}return Qt&&(Ae=er,be=Js),Ln};return O?Ge(Q):Q}function Sn(b,_){var O,H=[],Q=[],tt=ei[b+" "];if(!tt){for(_||(_=ae(b)),O=_.length;O--;)tt=Xe(_[O]),tt[E.expando]?H.push(tt):Q.push(tt);tt=ei(b,on(Q,H)),tt.selector=b}return tt}function jn(b,_,O,H){var Q,tt,dt,Rt,$t,Qt=typeof b=="function"&&b,oe=!H&&ae(b=Qt.selector||b);if(O=O||[],oe.length===1){if(tt=oe[0]=oe[0].slice(0),tt.length>2&&(dt=tt[0]).type==="ID"&&_.nodeType===9&&Pe&&E.expr.relative[tt[1].type]){if(_=(E.expr.find.ID(Ee(dt.matches[0]),_)||[])[0],_)Qt&&(_=_.parentNode);else return O;b=b.slice(tt.shift().value.length)}for(Q=bi.needsContext.test(b)?0:tt.length;Q--&&(dt=tt[Q],!E.expr.relative[Rt=dt.type]);)if(($t=E.expr.find[Rt])&&(H=$t(Ee(dt.matches[0]),It.test(tt[0].type)&&Gt(_.parentNode)||_))){if(tt.splice(Q,1),b=H.length&&Le(tt),!b)return o.apply(O,H),O;break}}return(Qt||Sn(b,oe))(H,_,!Pe,O,!_||It.test(b)&&Gt(_.parentNode)||_),O}We(),E.find=Ue,Ue.compile=Sn,Ue.select=jn,Ue.setDocument=We,Ue.tokenize=ae;function zn(b,_,O){for(var H=[],Q=O!==void 0;(b=b[_])&&b.nodeType!==9;)if(b.nodeType===1){if(Q&&E(b).is(O))break;H.push(b)}return H}function gn(b,_){for(var O=[];b;b=b.nextSibling)b.nodeType===1&&b!==_&&O.push(b);return O}var Zn=E.expr.match.needsContext,as=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function ls(b){return b[0]==="<"&&b[b.length-1]===">"&&b.length>=3}function In(b,_,O){return typeof _=="function"?E.grep(b,function(H,Q){return!!_.call(H,Q,H)!==O}):_.nodeType?E.grep(b,function(H){return H===_!==O}):typeof _!="string"?E.grep(b,function(H){return a.call(_,H)>-1!==O}):E.filter(_,b,O)}E.filter=function(b,_,O){var H=_[0];return O&&(b=":not("+b+")"),_.length===1&&H.nodeType===1?E.find.matchesSelector(H,b)?[H]:[]:E.find.matches(b,E.grep(_,function(Q){return Q.nodeType===1}))},E.fn.extend({find:function(b){var _,O,H=this.length,Q=this;if(typeof b!="string")return this.pushStack(E(b).filter(function(){for(_=0;_<H;_++)if(E.contains(Q[_],this))return!0}));for(O=this.pushStack([]),_=0;_<H;_++)E.find(b,Q[_],O);return H>1?E.uniqueSort(O):O},filter:function(b){return this.pushStack(In(this,b||[],!1))},not:function(b){return this.pushStack(In(this,b||[],!0))},is:function(b){return!!In(this,typeof b=="string"&&Zn.test(b)?E(b):b||[],!1).length}});var gs,pt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,kt=E.fn.init=function(b,_){var O,H;if(!b)return this;if(b.nodeType)return this[0]=b,this.length=1,this;if(typeof b=="function")return gs.ready!==void 0?gs.ready(b):b(E);if(O=b+"",ls(O))O=[null,b,null];else if(typeof b=="string")O=pt.exec(b);else return E.makeArray(b,this);if(O&&(O[1]||!_))if(O[1]){if(_=_ instanceof E?_[0]:_,E.merge(this,E.parseHTML(O[1],_&&_.nodeType?_.ownerDocument||_:S,!0)),as.test(O[1])&&E.isPlainObject(_))for(O in _)typeof this[O]=="function"?this[O](_[O]):this.attr(O,_[O]);return this}else return H=S.getElementById(O[2]),H&&(this[0]=H,this.length=1),this;else return!_||_.jquery?(_||gs).find(b):this.constructor(_).find(b)};kt.prototype=E.fn,gs=E(S);var mt=/^(?:parents|prev(?:Until|All))/,ut={children:!0,contents:!0,next:!0,prev:!0};E.fn.extend({has:function(b){var _=E(b,this),O=_.length;return this.filter(function(){for(var H=0;H<O;H++)if(E.contains(this,_[H]))return!0})},closest:function(b,_){var O,H=0,Q=this.length,tt=[],dt=typeof b!="string"&&E(b);if(!Zn.test(b)){for(;H<Q;H++)for(O=this[H];O&&O!==_;O=O.parentNode)if(O.nodeType<11&&(dt?dt.index(O)>-1:O.nodeType===1&&E.find.matchesSelector(O,b))){tt.push(O);break}}return this.pushStack(tt.length>1?E.uniqueSort(tt):tt)},index:function(b){return b?typeof b=="string"?a.call(E(b),this[0]):a.call(this,b.jquery?b[0]:b):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(b,_){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(b,_))))},addBack:function(b){return this.add(b==null?this.prevObject:this.prevObject.filter(b))}});function bt(b,_){for(;(b=b[_])&&b.nodeType!==1;);return b}E.each({parent:function(b){var _=b.parentNode;return _&&_.nodeType!==11?_:null},parents:function(b){return zn(b,"parentNode")},parentsUntil:function(b,_,O){return zn(b,"parentNode",O)},next:function(b){return bt(b,"nextSibling")},prev:function(b){return bt(b,"previousSibling")},nextAll:function(b){return zn(b,"nextSibling")},prevAll:function(b){return zn(b,"previousSibling")},nextUntil:function(b,_,O){return zn(b,"nextSibling",O)},prevUntil:function(b,_,O){return zn(b,"previousSibling",O)},siblings:function(b){return gn((b.parentNode||{}).firstChild,b)},children:function(b){return gn(b.firstChild)},contents:function(b){return b.contentDocument!=null&&s(b.contentDocument)?b.contentDocument:(q(b,"template")&&(b=b.content||b),E.merge([],b.childNodes))}},function(b,_){E.fn[b]=function(O,H){var Q=E.map(this,_,O);return b.slice(-5)!=="Until"&&(H=O),H&&typeof H=="string"&&(Q=E.filter(H,Q)),this.length>1&&(ut[b]||E.uniqueSort(Q),mt.test(b)&&Q.reverse()),this.pushStack(Q)}});function At(b){var _={};return E.each(b.match(Mt)||[],function(O,H){_[H]=!0}),_}E.Callbacks=function(b){b=typeof b=="string"?At(b):E.extend({},b);var _,O,H,Q,tt=[],dt=[],Rt=-1,$t=function(){for(Q=Q||b.once,H=_=!0;dt.length;Rt=-1)for(O=dt.shift();++Rt<tt.length;)tt[Rt].apply(O[0],O[1])===!1&&b.stopOnFalse&&(Rt=tt.length,O=!1);b.memory||(O=!1),_=!1,Q&&(O?tt=[]:tt="")},Qt={add:function(){return tt&&(O&&!_&&(Rt=tt.length-1,dt.push(O)),(function oe(ye){E.each(ye,function(se,xe){typeof xe=="function"?(!b.unique||!Qt.has(xe))&&tt.push(xe):xe&&xe.length&&y(xe)!=="string"&&oe(xe)})})(arguments),O&&!_&&$t()),this},remove:function(){return E.each(arguments,function(oe,ye){for(var se;(se=E.inArray(ye,tt,se))>-1;)tt.splice(se,1),se<=Rt&&Rt--}),this},has:function(oe){return oe?E.inArray(oe,tt)>-1:tt.length>0},empty:function(){return tt&&(tt=[]),this},disable:function(){return Q=dt=[],tt=O="",this},disabled:function(){return!tt},lock:function(){return Q=dt=[],!O&&!_&&(tt=O=""),this},locked:function(){return!!Q},fireWith:function(oe,ye){return Q||(ye=ye||[],ye=[oe,ye.slice?ye.slice():ye],dt.push(ye),_||$t()),this},fire:function(){return Qt.fireWith(this,arguments),this},fired:function(){return!!H}};return Qt};function re(b){return b}function _e(b){throw b}function He(b,_,O,H){var Q;try{b&&typeof(Q=b.promise)=="function"?Q.call(b).done(_).fail(O):b&&typeof(Q=b.then)=="function"?Q.call(b,_,O):_.apply(void 0,[b].slice(H))}catch(tt){O(tt)}}E.extend({Deferred:function(b){var _=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],O="pending",H={state:function(){return O},always:function(){return Q.done(arguments).fail(arguments),this},catch:function(tt){return H.then(null,tt)},pipe:function(){var tt=arguments;return E.Deferred(function(dt){E.each(_,function(Rt,$t){var Qt=typeof tt[$t[4]]=="function"&&tt[$t[4]];Q[$t[1]](function(){var oe=Qt&&Qt.apply(this,arguments);oe&&typeof oe.promise=="function"?oe.promise().progress(dt.notify).done(dt.resolve).fail(dt.reject):dt[$t[0]+"With"](this,Qt?[oe]:arguments)})}),tt=null}).promise()},then:function(tt,dt,Rt){var $t=0;function Qt(oe,ye,se,xe){return function(){var en=this,Ln=arguments,Pn=function(){var ws,er;if(!(oe<$t)){if(ws=se.apply(en,Ln),ws===ye.promise())throw new TypeError("Thenable self-resolution");er=ws&&(typeof ws=="object"||typeof ws=="function")&&ws.then,typeof er=="function"?xe?er.call(ws,Qt($t,ye,re,xe),Qt($t,ye,_e,xe)):($t++,er.call(ws,Qt($t,ye,re,xe),Qt($t,ye,_e,xe),Qt($t,ye,re,ye.notifyWith))):(se!==re&&(en=void 0,Ln=[ws]),(xe||ye.resolveWith)(en,Ln))}},Js=xe?Pn:function(){try{Pn()}catch(ws){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(ws,Js.error),oe+1>=$t&&(se!==_e&&(en=void 0,Ln=[ws]),ye.rejectWith(en,Ln))}};oe?Js():(E.Deferred.getErrorHook&&(Js.error=E.Deferred.getErrorHook()),n.setTimeout(Js))}}return E.Deferred(function(oe){_[0][3].add(Qt(0,oe,typeof Rt=="function"?Rt:re,oe.notifyWith)),_[1][3].add(Qt(0,oe,typeof tt=="function"?tt:re)),_[2][3].add(Qt(0,oe,typeof dt=="function"?dt:_e))}).promise()},promise:function(tt){return tt!=null?E.extend(tt,H):H}},Q={};return E.each(_,function(tt,dt){var Rt=dt[2],$t=dt[5];H[dt[1]]=Rt.add,$t&&Rt.add(function(){O=$t},_[3-tt][2].disable,_[3-tt][3].disable,_[0][2].lock,_[0][3].lock),Rt.add(dt[3].fire),Q[dt[0]]=function(){return Q[dt[0]+"With"](this===Q?void 0:this,arguments),this},Q[dt[0]+"With"]=Rt.fireWith}),H.promise(Q),b&&b.call(Q,Q),Q},when:function(b){var _=arguments.length,O=_,H=Array(O),Q=i.call(arguments),tt=E.Deferred(),dt=function(Rt){return function($t){H[Rt]=this,Q[Rt]=arguments.length>1?i.call(arguments):$t,--_||tt.resolveWith(H,Q)}};if(_<=1&&(He(b,tt.done(dt(O)).resolve,tt.reject,!_),tt.state()==="pending"||typeof(Q[O]&&Q[O].then)=="function"))return tt.then();for(;O--;)He(Q[O],dt(O),tt.reject);return tt.promise()}});var Fn=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(b,_){b&&Fn.test(b.name)&&n.console.warn("jQuery.Deferred exception",b,_)},E.readyException=function(b){n.setTimeout(function(){throw b})};var bn=E.Deferred();E.fn.ready=function(b){return bn.then(b).catch(function(_){E.readyException(_)}),this},E.extend({isReady:!1,readyWait:1,ready:function(b){(b===!0?--E.readyWait:E.isReady)||(E.isReady=!0,!(b!==!0&&--E.readyWait>0)&&bn.resolveWith(S,[E]))}}),E.ready.then=bn.then;function Ke(){S.removeEventListener("DOMContentLoaded",Ke),n.removeEventListener("load",Ke),E.ready()}S.readyState!=="loading"?n.setTimeout(E.ready):(S.addEventListener("DOMContentLoaded",Ke),n.addEventListener("load",Ke));var Kn=/-([a-z])/g;function ss(b,_){return _.toUpperCase()}function Un(b){return b.replace(Kn,ss)}function pi(b){return b.nodeType===1||b.nodeType===9||!+b.nodeType}function qs(){this.expando=E.expando+qs.uid++}qs.uid=1,qs.prototype={cache:function(b){var _=b[this.expando];return _||(_=Object.create(null),pi(b)&&(b.nodeType?b[this.expando]=_:Object.defineProperty(b,this.expando,{value:_,configurable:!0}))),_},set:function(b,_,O){var H,Q=this.cache(b);if(typeof _=="string")Q[Un(_)]=O;else for(H in _)Q[Un(H)]=_[H];return O},get:function(b,_){return _===void 0?this.cache(b):b[this.expando]&&b[this.expando][Un(_)]},access:function(b,_,O){return _===void 0||_&&typeof _=="string"&&O===void 0?this.get(b,_):(this.set(b,_,O),O!==void 0?O:_)},remove:function(b,_){var O,H=b[this.expando];if(H!==void 0){if(_!==void 0)for(Array.isArray(_)?_=_.map(Un):(_=Un(_),_=_ in H?[_]:_.match(Mt)||[]),O=_.length;O--;)delete H[_[O]];(_===void 0||E.isEmptyObject(H))&&(b.nodeType?b[this.expando]=void 0:delete b[this.expando])}},hasData:function(b){var _=b[this.expando];return _!==void 0&&!E.isEmptyObject(_)}};var kn=new qs,li=new qs,yf=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,jh=/[A-Z]/g;function wf(b){return b==="true"?!0:b==="false"?!1:b==="null"?null:b===+b+""?+b:yf.test(b)?JSON.parse(b):b}function bu(b,_,O){var H;if(O===void 0&&b.nodeType===1)if(H="data-"+_.replace(jh,"-$&").toLowerCase(),O=b.getAttribute(H),typeof O=="string"){try{O=wf(O)}catch{}li.set(b,_,O)}else O=void 0;return O}E.extend({hasData:function(b){return li.hasData(b)||kn.hasData(b)},data:function(b,_,O){return li.access(b,_,O)},removeData:function(b,_){li.remove(b,_)},_data:function(b,_,O){return kn.access(b,_,O)},_removeData:function(b,_){kn.remove(b,_)}}),E.fn.extend({data:function(b,_){var O,H,Q,tt=this[0],dt=tt&&tt.attributes;if(b===void 0){if(this.length&&(Q=li.get(tt),tt.nodeType===1&&!kn.get(tt,"hasDataAttrs"))){for(O=dt.length;O--;)dt[O]&&(H=dt[O].name,H.indexOf("data-")===0&&(H=Un(H.slice(5)),bu(tt,H,Q[H])));kn.set(tt,"hasDataAttrs",!0)}return Q}return typeof b=="object"?this.each(function(){li.set(this,b)}):J(this,function(Rt){var $t;if(tt&&Rt===void 0)return $t=li.get(tt,b),$t!==void 0||($t=bu(tt,b),$t!==void 0)?$t:void 0;this.each(function(){li.set(this,b,Rt)})},null,_,arguments.length>1,null,!0)},removeData:function(b){return this.each(function(){li.remove(this,b)})}}),E.extend({queue:function(b,_,O){var H;if(b)return _=(_||"fx")+"queue",H=kn.get(b,_),O&&(!H||Array.isArray(O)?H=kn.set(b,_,E.makeArray(O)):H.push(O)),H||[]},dequeue:function(b,_){_=_||"fx";var O=E.queue(b,_),H=O.length,Q=O.shift(),tt=E._queueHooks(b,_),dt=function(){E.dequeue(b,_)};Q==="inprogress"&&(Q=O.shift(),H--),Q&&(_==="fx"&&O.unshift("inprogress"),delete tt.stop,Q.call(b,dt,tt)),!H&&tt&&tt.empty.fire()},_queueHooks:function(b,_){var O=_+"queueHooks";return kn.get(b,O)||kn.set(b,O,{empty:E.Callbacks("once memory").add(function(){kn.remove(b,[_+"queue",O])})})}}),E.fn.extend({queue:function(b,_){var O=2;return typeof b!="string"&&(_=b,b="fx",O--),arguments.length<O?E.queue(this[0],b):_===void 0?this:this.each(function(){var H=E.queue(this,b,_);E._queueHooks(this,b),b==="fx"&&H[0]!=="inprogress"&&E.dequeue(this,b)})},dequeue:function(b){return this.each(function(){E.dequeue(this,b)})},clearQueue:function(b){return this.queue(b||"fx",[])},promise:function(b,_){var O,H=1,Q=E.Deferred(),tt=this,dt=this.length,Rt=function(){--H||Q.resolveWith(tt,[tt])};for(typeof b!="string"&&(_=b,b=void 0),b=b||"fx";dt--;)O=kn.get(tt[dt],b+"queueHooks"),O&&O.empty&&(H++,O.empty.add(Rt));return Rt(),Q.promise(_)}});var vu=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Dl=new RegExp("^(?:([+-])=|)("+vu+")([a-z%]*)$","i"),Gr=["Top","Right","Bottom","Left"];function ba(b,_){return b=_||b,b.style.display==="none"||b.style.display===""&&E.css(b,"display")==="none"}var kf=/^[a-z]/,Vs=/^(?:Border(?:Top|Right|Bottom|Left)?(?:Width|)|(?:Margin|Padding)?(?:Top|Right|Bottom|Left)?|(?:Min|Max)?(?:Width|Height))$/;function va(b){return kf.test(b)&&Vs.test(b[0].toUpperCase()+b.slice(1))}function Rl(b,_,O,H){var Q,tt,dt=20,Rt=H?function(){return H.cur()}:function(){return E.css(b,_,"")},$t=Rt(),Qt=O&&O[3]||(va(_)?"px":""),oe=b.nodeType&&(!va(_)||Qt!=="px"&&+$t)&&Dl.exec(E.css(b,_));if(oe&&oe[3]!==Qt){for($t=$t/2,Qt=Qt||oe[3],oe=+$t||1;dt--;)E.style(b,_,oe+Qt),(1-tt)*(1-(tt=Rt()/$t||.5))<=0&&(dt=0),oe=oe/tt;oe=oe*2,E.style(b,_,oe+Qt),O=O||[]}return O&&(oe=+oe||+$t||0,Q=O[1]?oe+(O[1]+1)*O[2]:+O[2],H&&(H.unit=Qt,H.start=oe,H.end=Q)),Q}var Cf=/^-ms-/;function yu(b){return Un(b.replace(Cf,"ms-"))}var wu={};function Sf(b){var _,O=b.ownerDocument,H=b.nodeName,Q=wu[H];return Q||(_=O.body.appendChild(O.createElement(H)),Q=E.css(_,"display"),_.parentNode.removeChild(_),Q==="none"&&(Q="block"),wu[H]=Q,Q)}function Yo(b,_){for(var O,H,Q=[],tt=0,dt=b.length;tt<dt;tt++)H=b[tt],H.style&&(O=H.style.display,_?(O==="none"&&(Q[tt]=kn.get(H,"display")||null,Q[tt]||(H.style.display="")),H.style.display===""&&ba(H)&&(Q[tt]=Sf(H))):O!=="none"&&(Q[tt]="none",kn.set(H,"display",O)));for(tt=0;tt<dt;tt++)Q[tt]!=null&&(b[tt].style.display=Q[tt]);return b}E.fn.extend({show:function(){return Yo(this,!0)},hide:function(){return Yo(this)},toggle:function(b){return typeof b=="boolean"?b?this.show():this.hide():this.each(function(){ba(this)?E(this).show():E(this).hide()})}});var Qa=function(b){return E.contains(b.ownerDocument,b)||b.getRootNode(tl)===b.ownerDocument},tl={composed:!0};yt.getRootNode||(Qa=function(b){return E.contains(b.ownerDocument,b)});var ku=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Hr={thead:["table"],col:["colgroup","table"],tr:["tbody","table"],td:["tr","tbody","table"]};Hr.tbody=Hr.tfoot=Hr.colgroup=Hr.caption=Hr.thead,Hr.th=Hr.td;function Ni(b,_){var O;return typeof b.getElementsByTagName<"u"?O=e.slice.call(b.getElementsByTagName(_||"*")):typeof b.querySelectorAll<"u"?O=b.querySelectorAll(_||"*"):O=[],_===void 0||_&&q(b,_)?E.merge([b],O):O}var Cu=/^$|^module$|\/(?:java|ecma)script/i;function el(b,_){for(var O=0,H=b.length;O<H;O++)kn.set(b[O],"globalEval",!_||kn.get(_[O],"globalEval"))}var Xh=/<|&#?\w+;/;function dr(b,_,O,H,Q){for(var tt,dt,Rt,$t,Qt,oe,ye=_.createDocumentFragment(),se=[],xe=0,en=b.length;xe<en;xe++)if(tt=b[xe],tt||tt===0)if(y(tt)==="object"&&(tt.nodeType||C(tt)))E.merge(se,tt.nodeType?[tt]:tt);else if(!Xh.test(tt))se.push(_.createTextNode(tt));else{for(dt=dt||ye.appendChild(_.createElement("div")),Rt=(ku.exec(tt)||["",""])[1].toLowerCase(),$t=Hr[Rt]||e,oe=$t.length;--oe>-1;)dt=dt.appendChild(_.createElement($t[oe]));dt.innerHTML=E.htmlPrefilter(tt),E.merge(se,dt.childNodes),dt=ye.firstChild,dt.textContent=""}for(ye.textContent="",xe=0;tt=se[xe++];){if(H&&E.inArray(tt,H)>-1){Q&&Q.push(tt);continue}if(Qt=Qa(tt),dt=Ni(ye.appendChild(tt),"script"),Qt&&el(dt),O)for(oe=0;tt=dt[oe++];)Cu.test(tt.type||"")&&O.push(tt)}return ye}function Ml(b){return b.type=(b.getAttribute("type")!==null)+"/"+b.type,b}function Tf(b){return(b.type||"").slice(0,5)==="true/"?b.type=b.type.slice(5):b.removeAttribute("type"),b}function nl(b,_,O,H){_=r(_);var Q,tt,dt,Rt,$t,Qt,oe=0,ye=b.length,se=ye-1,xe=_[0],en=typeof xe=="function";if(en)return b.each(function(Ln){var Pn=b.eq(Ln);_[0]=xe.call(this,Ln,Pn.html()),nl(Pn,_,O,H)});if(ye&&(Q=dr(_,b[0].ownerDocument,!1,b,H),tt=Q.firstChild,Q.childNodes.length===1&&(Q=tt),tt||H)){for(dt=E.map(Ni(Q,"script"),Ml),Rt=dt.length;oe<ye;oe++)$t=Q,oe!==se&&($t=E.clone($t,!0,!0),Rt&&E.merge(dt,Ni($t,"script"))),O.call(b[oe],$t,oe);if(Rt)for(Qt=dt[dt.length-1].ownerDocument,E.map(dt,Tf),oe=0;oe<Rt;oe++)$t=dt[oe],Cu.test($t.type||"")&&!kn.get($t,"globalEval")&&E.contains(Qt,$t)&&($t.src&&($t.type||"").toLowerCase()!=="module"?E._evalUrl&&!$t.noModule&&E._evalUrl($t.src,{nonce:$t.nonce,crossOrigin:$t.crossOrigin},Qt):D($t.textContent,$t,Qt))}return b}var pc=/^(?:checkbox|radio)$/i,gc=/^([^.]*)(?:\.(.+)|)/;function lo(){return!0}function ya(){return!1}function Ol(b,_,O,H,Q,tt){var dt,Rt;if(typeof _=="object"){typeof O!="string"&&(H=H||O,O=void 0);for(Rt in _)Ol(b,Rt,O,H,_[Rt],tt);return b}if(H==null&&Q==null?(Q=O,H=O=void 0):Q==null&&(typeof O=="string"?(Q=H,H=void 0):(Q=H,H=O,O=void 0)),Q===!1)Q=ya;else if(!Q)return b;return tt===1&&(dt=Q,Q=function($t){return E().off($t),dt.apply(this,arguments)},Q.guid=dt.guid||(dt.guid=E.guid++)),b.each(function(){E.event.add(this,_,Q,H,O)})}E.event={add:function(b,_,O,H,Q){var tt,dt,Rt,$t,Qt,oe,ye,se,xe,en,Ln,Pn=kn.get(b);if(pi(b))for(O.handler&&(tt=O,O=tt.handler,Q=tt.selector),Q&&E.find.matchesSelector(yt,Q),O.guid||(O.guid=E.guid++),($t=Pn.events)||($t=Pn.events=Object.create(null)),(dt=Pn.handle)||(dt=Pn.handle=function(Js){return typeof E<"u"&&E.event.triggered!==Js.type?E.event.dispatch.apply(b,arguments):void 0}),_=(_||"").match(Mt)||[""],Qt=_.length;Qt--;)Rt=gc.exec(_[Qt])||[],xe=Ln=Rt[1],en=(Rt[2]||"").split(".").sort(),xe&&(ye=E.event.special[xe]||{},xe=(Q?ye.delegateType:ye.bindType)||xe,ye=E.event.special[xe]||{},oe=E.extend({type:xe,origType:Ln,data:H,handler:O,guid:O.guid,selector:Q,needsContext:Q&&E.expr.match.needsContext.test(Q),namespace:en.join(".")},tt),(se=$t[xe])||(se=$t[xe]=[],se.delegateCount=0,(!ye.setup||ye.setup.call(b,H,en,dt)===!1)&&b.addEventListener&&b.addEventListener(xe,dt)),ye.add&&(ye.add.call(b,oe),oe.handler.guid||(oe.handler.guid=O.guid)),Q?se.splice(se.delegateCount++,0,oe):se.push(oe))},remove:function(b,_,O,H,Q){var tt,dt,Rt,$t,Qt,oe,ye,se,xe,en,Ln,Pn=kn.hasData(b)&&kn.get(b);if(!(!Pn||!($t=Pn.events))){for(_=(_||"").match(Mt)||[""],Qt=_.length;Qt--;){if(Rt=gc.exec(_[Qt])||[],xe=Ln=Rt[1],en=(Rt[2]||"").split(".").sort(),!xe){for(xe in $t)E.event.remove(b,xe+_[Qt],O,H,!0);continue}for(ye=E.event.special[xe]||{},xe=(H?ye.delegateType:ye.bindType)||xe,se=$t[xe]||[],Rt=Rt[2]&&new RegExp("(^|\\.)"+en.join("\\.(?:.*\\.|)")+"(\\.|$)"),dt=tt=se.length;tt--;)oe=se[tt],(Q||Ln===oe.origType)&&(!O||O.guid===oe.guid)&&(!Rt||Rt.test(oe.namespace))&&(!H||H===oe.selector||H==="**"&&oe.selector)&&(se.splice(tt,1),oe.selector&&se.delegateCount--,ye.remove&&ye.remove.call(b,oe));dt&&!se.length&&((!ye.teardown||ye.teardown.call(b,en,Pn.handle)===!1)&&E.removeEvent(b,xe,Pn.handle),delete $t[xe])}E.isEmptyObject($t)&&kn.remove(b,"handle events")}},dispatch:function(b){var _,O,H,Q,tt,dt,Rt=new Array(arguments.length),$t=E.event.fix(b),Qt=(kn.get(this,"events")||Object.create(null))[$t.type]||[],oe=E.event.special[$t.type]||{};for(Rt[0]=$t,_=1;_<arguments.length;_++)Rt[_]=arguments[_];if($t.delegateTarget=this,!(oe.preDispatch&&oe.preDispatch.call(this,$t)===!1)){for(dt=E.event.handlers.call(this,$t,Qt),_=0;(Q=dt[_++])&&!$t.isPropagationStopped();)for($t.currentTarget=Q.elem,O=0;(tt=Q.handlers[O++])&&!$t.isImmediatePropagationStopped();)(!$t.rnamespace||tt.namespace===!1||$t.rnamespace.test(tt.namespace))&&($t.handleObj=tt,$t.data=tt.data,H=((E.event.special[tt.origType]||{}).handle||tt.handler).apply(Q.elem,Rt),H!==void 0&&($t.result=H)===!1&&($t.preventDefault(),$t.stopPropagation()));return oe.postDispatch&&oe.postDispatch.call(this,$t),$t.result}},handlers:function(b,_){var O,H,Q,tt,dt,Rt=[],$t=_.delegateCount,Qt=b.target;if($t&&!(b.type==="click"&&b.button>=1)){for(;Qt!==this;Qt=Qt.parentNode||this)if(Qt.nodeType===1&&!(b.type==="click"&&Qt.disabled===!0)){for(tt=[],dt={},O=0;O<$t;O++)H=_[O],Q=H.selector+" ",dt[Q]===void 0&&(dt[Q]=H.needsContext?E(Q,this).index(Qt)>-1:E.find(Q,this,null,[Qt]).length),dt[Q]&&tt.push(H);tt.length&&Rt.push({elem:Qt,handlers:tt})}}return Qt=this,$t<_.length&&Rt.push({elem:Qt,handlers:_.slice($t)}),Rt},addProp:function(b,_){Object.defineProperty(E.Event.prototype,b,{enumerable:!0,configurable:!0,get:typeof _=="function"?function(){if(this.originalEvent)return _(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[b]},set:function(O){Object.defineProperty(this,b,{enumerable:!0,configurable:!0,writable:!0,value:O})}})},fix:function(b){return b[E.expando]?b:new E.Event(b)},special:E.extend(Object.create(null),{load:{noBubble:!0},click:{setup:function(b){var _=this||b;return pc.test(_.type)&&_.click&&q(_,"input")&&sl(_,"click",!0),!1},trigger:function(b){var _=this||b;return pc.test(_.type)&&_.click&&q(_,"input")&&sl(_,"click"),!0},_default:function(b){var _=b.target;return pc.test(_.type)&&_.click&&q(_,"input")&&kn.get(_,"click")||q(_,"a")}},beforeunload:{postDispatch:function(b){b.result!==void 0&&b.preventDefault()}}})};function sl(b,_,O){if(!O){kn.get(b,_)===void 0&&E.event.add(b,_,lo);return}kn.set(b,_,!1),E.event.add(b,_,{namespace:!1,handler:function(H){var Q,tt=kn.get(this,_);if(H.isTrigger&1&&this[_]){if(tt.length)(E.event.special[_]||{}).delegateType&&H.stopPropagation();else if(tt=i.call(arguments),kn.set(this,_,tt),this[_](),Q=kn.get(this,_),kn.set(this,_,!1),tt!==Q)return H.stopImmediatePropagation(),H.preventDefault(),Q&&Q.value}else tt.length&&(kn.set(this,_,{value:E.event.trigger(tt[0],tt.slice(1),this)}),H.stopPropagation(),H.isImmediatePropagationStopped=lo)}})}E.removeEvent=function(b,_,O){b.removeEventListener&&b.removeEventListener(_,O)},E.Event=function(b,_){if(!(this instanceof E.Event))return new E.Event(b,_);b&&b.type?(this.originalEvent=b,this.type=b.type,this.isDefaultPrevented=b.defaultPrevented?lo:ya,this.target=b.target,this.currentTarget=b.currentTarget,this.relatedTarget=b.relatedTarget):this.type=b,_&&E.extend(this,_),this.timeStamp=b&&b.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:ya,isPropagationStopped:ya,isImmediatePropagationStopped:ya,isSimulated:!1,preventDefault:function(){var b=this.originalEvent;this.isDefaultPrevented=lo,b&&!this.isSimulated&&b.preventDefault()},stopPropagation:function(){var b=this.originalEvent;this.isPropagationStopped=lo,b&&!this.isSimulated&&b.stopPropagation()},stopImmediatePropagation:function(){var b=this.originalEvent;this.isImmediatePropagationStopped=lo,b&&!this.isSimulated&&b.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},function(b,_){function O(H){var Q=E.event.fix(H);Q.type=H.type==="focusin"?"focus":"blur",Q.isSimulated=!0,Q.target===Q.currentTarget&&kn.get(this,"handle")(Q)}E.event.special[b]={setup:function(){if(sl(this,b,!0),U)this.addEventListener(_,O);else return!1},trigger:function(){return sl(this,b),!0},teardown:function(){if(U)this.removeEventListener(_,O);else return!1},_default:function(H){return kn.get(H.target,b)},delegateType:_}}),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(b,_){E.event.special[b]={delegateType:_,bindType:_,handle:function(O){var H,Q=this,tt=O.relatedTarget,dt=O.handleObj;return(!tt||tt!==Q&&!E.contains(Q,tt))&&(O.type=dt.origType,H=dt.handler.apply(this,arguments),O.type=_),H}}}),E.fn.extend({on:function(b,_,O,H){return Ol(this,b,_,O,H)},one:function(b,_,O,H){return Ol(this,b,_,O,H,1)},off:function(b,_,O){var H,Q;if(b&&b.preventDefault&&b.handleObj)return H=b.handleObj,E(b.delegateTarget).off(H.namespace?H.origType+"."+H.namespace:H.origType,H.selector,H.handler),this;if(typeof b=="object"){for(Q in b)this.off(Q,_,b[Q]);return this}return(_===!1||typeof _=="function")&&(O=_,_=void 0),O===!1&&(O=ya),this.each(function(){E.event.remove(this,b,O,_)})}});var Su=/<script|<style|<link/i;function wa(b,_){return q(b,"table")&&q(_.nodeType!==11?_:_.firstChild,"tr")&&E(b).children("tbody")[0]||b}function qh(b,_){var O,H,Q,tt=kn.get(b,"events");if(_.nodeType===1){if(tt){kn.remove(_,"handle events");for(O in tt)for(H=0,Q=tt[O].length;H<Q;H++)E.event.add(_,O,tt[O][H])}li.hasData(b)&&li.set(_,E.extend({},li.get(b)))}}function ka(b,_,O){for(var H,Q=_?E.filter(_,b):b,tt=0;(H=Q[tt])!=null;tt++)!O&&H.nodeType===1&&E.cleanData(Ni(H)),H.parentNode&&(O&&Qa(H)&&el(Ni(H,"script")),H.parentNode.removeChild(H));return b}E.extend({htmlPrefilter:function(b){return b},clone:function(b,_,O){var H,Q,tt,dt,Rt=b.cloneNode(!0),$t=Qa(b);if(U&&(b.nodeType===1||b.nodeType===11)&&!E.isXMLDoc(b))for(dt=Ni(Rt),tt=Ni(b),H=0,Q=tt.length;H<Q;H++)q(dt[H],"textarea")&&(dt[H].defaultValue=tt[H].defaultValue);if(_)if(O)for(tt=tt||Ni(b),dt=dt||Ni(Rt),H=0,Q=tt.length;H<Q;H++)qh(tt[H],dt[H]);else qh(b,Rt);return dt=Ni(Rt,"script"),dt.length>0&&el(dt,!$t&&Ni(b,"script")),Rt},cleanData:function(b){for(var _,O,H,Q=E.event.special,tt=0;(O=b[tt])!==void 0;tt++)if(pi(O)){if(_=O[kn.expando]){if(_.events)for(H in _.events)Q[H]?E.event.remove(O,H):E.removeEvent(O,H,_.handle);O[kn.expando]=void 0}O[li.expando]&&(O[li.expando]=void 0)}}}),E.fn.extend({detach:function(b){return ka(this,b,!0)},remove:function(b){return ka(this,b)},text:function(b){return J(this,function(_){return _===void 0?E.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=_)})},null,b,arguments.length)},append:function(){return nl(this,arguments,function(b){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var _=wa(this,b);_.appendChild(b)}})},prepend:function(){return nl(this,arguments,function(b){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var _=wa(this,b);_.insertBefore(b,_.firstChild)}})},before:function(){return nl(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this)})},after:function(){return nl(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this.nextSibling)})},empty:function(){for(var b,_=0;(b=this[_])!=null;_++)b.nodeType===1&&(E.cleanData(Ni(b,!1)),b.textContent="");return this},clone:function(b,_){return b=b??!1,_=_??b,this.map(function(){return E.clone(this,b,_)})},html:function(b){return J(this,function(_){var O=this[0]||{},H=0,Q=this.length;if(_===void 0&&O.nodeType===1)return O.innerHTML;if(typeof _=="string"&&!Su.test(_)&&!Hr[(ku.exec(_)||["",""])[1].toLowerCase()]){_=E.htmlPrefilter(_);try{for(;H<Q;H++)O=this[H]||{},O.nodeType===1&&(E.cleanData(Ni(O,!1)),O.innerHTML=_);O=0}catch{}}O&&this.empty().append(_)},null,b,arguments.length)},replaceWith:function(){var b=[];return nl(this,arguments,function(_){var O=this.parentNode;E.inArray(this,b)<0&&(E.cleanData(Ni(this)),O&&O.replaceChild(_,this))},b)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,_){E.fn[b]=function(O){for(var H,Q=[],tt=E(O),dt=tt.length-1,Rt=0;Rt<=dt;Rt++)H=Rt===dt?this:this.clone(!0),E(tt[Rt])[_](H),o.apply(Q,H);return this.pushStack(Q)}});var If=new RegExp("^("+vu+")(?!px)[a-z%]+$","i"),Tu=/^--/;function mc(b){var _=b.ownerDocument.defaultView;return _||(_=n),_.getComputedStyle(b)}function xc(b,_,O){var H,Q,tt={};for(Q in _)tt[Q]=b.style[Q],b.style[Q]=_[Q];H=O.call(b);for(Q in _)b.style[Q]=tt[Q];return H}function Kh(b,_,O){var H,Q=Tu.test(_);return O=O||mc(b),O&&(H=O.getPropertyValue(_)||O[_],Q&&H&&(H=H.replace(Y,"$1")||void 0),H===""&&!Qa(b)&&(H=E.style(b,_))),H!==void 0?H+"":H}var Fl=["Webkit","Moz","ms"],Iu=S.createElement("div").style;function _o(b){for(var _=b[0].toUpperCase()+b.slice(1),O=Fl.length;O--;)if(b=Fl[O]+_,b in Iu)return b}function Yh(b){return b in Iu?b:_o(b)||b}var Pl,bc,co=S.createElement("table");function Eu(){if(!(!co||!co.style)){var b,_=S.createElement("col"),O=S.createElement("tr"),H=S.createElement("td");if(co.style.cssText="position:absolute;left:-11111px;border-collapse:separate;border-spacing:0",O.style.cssText="box-sizing:content-box;border:1px solid;height:1px",H.style.cssText="height:9px;width:9px;padding:0",_.span=2,yt.appendChild(co).appendChild(_).parentNode.appendChild(O).appendChild(H).parentNode.appendChild(H.cloneNode(!0)),co.offsetWidth===0){yt.removeChild(co);return}b=n.getComputedStyle(O),bc=U||Math.round(parseFloat(n.getComputedStyle(_).width))===18,Pl=Math.round(parseFloat(b.height)+parseFloat(b.borderTopWidth)+parseFloat(b.borderBottomWidth))===O.offsetHeight,yt.removeChild(co),co=null}}E.extend(m,{reliableTrDimensions:function(){return Eu(),Pl},reliableColDimensions:function(){return Eu(),bc}});var Zh={position:"absolute",visibility:"hidden",display:"block"},_u={letterSpacing:"0",fontWeight:"400"};function Jh(b,_,O){var H=Dl.exec(_);return H?Math.max(0,H[2]-(O||0))+(H[3]||"px"):_}function Au(b,_,O,H,Q,tt){var dt=_==="width"?1:0,Rt=0,$t=0,Qt=0;if(O===(H?"border":"content"))return 0;for(;dt<4;dt+=2)O==="margin"&&(Qt+=E.css(b,O+Gr[dt],!0,Q)),H?(O==="content"&&($t-=E.css(b,"padding"+Gr[dt],!0,Q)),O!=="margin"&&($t-=E.css(b,"border"+Gr[dt]+"Width",!0,Q))):($t+=E.css(b,"padding"+Gr[dt],!0,Q),O!=="padding"?$t+=E.css(b,"border"+Gr[dt]+"Width",!0,Q):Rt+=E.css(b,"border"+Gr[dt]+"Width",!0,Q));return!H&&tt>=0&&($t+=Math.max(0,Math.ceil(b["offset"+_[0].toUpperCase()+_.slice(1)]-tt-$t-Rt-.5))||0),$t+Qt}function vc(b,_,O){var H=mc(b),Q=U||O,tt=Q&&E.css(b,"boxSizing",!1,H)==="border-box",dt=tt,Rt=Kh(b,_,H),$t="offset"+_[0].toUpperCase()+_.slice(1);if(If.test(Rt)){if(!O)return Rt;Rt="auto"}return(Rt==="auto"||U&&tt||!m.reliableColDimensions()&&q(b,"col")||!m.reliableTrDimensions()&&q(b,"tr"))&&b.getClientRects().length&&(tt=E.css(b,"boxSizing",!1,H)==="border-box",dt=$t in b,dt&&(Rt=b[$t])),Rt=parseFloat(Rt)||0,Rt+Au(b,_,O||(tt?"border":"content"),dt,H,Rt)+"px"}E.extend({cssHooks:{},style:function(b,_,O,H){if(!(!b||b.nodeType===3||b.nodeType===8||!b.style)){var Q,tt,dt,Rt=yu(_),$t=Tu.test(_),Qt=b.style;if($t||(_=Yh(Rt)),dt=E.cssHooks[_]||E.cssHooks[Rt],O!==void 0){if(tt=typeof O,tt==="string"&&(Q=Dl.exec(O))&&Q[1]&&(O=Rl(b,_,Q),tt="number"),O==null||O!==O)return;tt==="number"&&(O+=Q&&Q[3]||(va(Rt)?"px":"")),U&&O===""&&_.indexOf("background")===0&&(Qt[_]="inherit"),(!dt||!("set"in dt)||(O=dt.set(b,O,H))!==void 0)&&($t?Qt.setProperty(_,O):Qt[_]=O)}else return dt&&"get"in dt&&(Q=dt.get(b,!1,H))!==void 0?Q:Qt[_]}},css:function(b,_,O,H){var Q,tt,dt,Rt=yu(_),$t=Tu.test(_);return $t||(_=Yh(Rt)),dt=E.cssHooks[_]||E.cssHooks[Rt],dt&&"get"in dt&&(Q=dt.get(b,!0,O)),Q===void 0&&(Q=Kh(b,_,H)),Q==="normal"&&_ in _u&&(Q=_u[_]),O===""||O?(tt=parseFloat(Q),O===!0||isFinite(tt)?tt||0:Q):Q}}),E.each(["height","width"],function(b,_){E.cssHooks[_]={get:function(O,H,Q){if(H)return E.css(O,"display")==="none"?xc(O,Zh,function(){return vc(O,_,Q)}):vc(O,_,Q)},set:function(O,H,Q){var tt,dt=mc(O),Rt=Q&&E.css(O,"boxSizing",!1,dt)==="border-box",$t=Q?Au(O,_,Q,Rt,dt):0;return $t&&(tt=Dl.exec(H))&&(tt[3]||"px")!=="px"&&(O.style[_]=H,H=E.css(O,_)),Jh(O,H,$t)}}}),E.each({margin:"",padding:"",border:"Width"},function(b,_){E.cssHooks[b+_]={expand:function(O){for(var H=0,Q={},tt=typeof O=="string"?O.split(" "):[O];H<4;H++)Q[b+Gr[H]+_]=tt[H]||tt[H-2]||tt[0];return Q}},b!=="margin"&&(E.cssHooks[b+_].set=Jh)}),E.fn.extend({css:function(b,_){return J(this,function(O,H,Q){var tt,dt,Rt={},$t=0;if(Array.isArray(H)){for(tt=mc(O),dt=H.length;$t<dt;$t++)Rt[H[$t]]=E.css(O,H[$t],!1,tt);return Rt}return Q!==void 0?E.style(O,H,Q):E.css(O,H)},b,_,arguments.length>1)}});function Di(b,_,O,H,Q){return new Di.prototype.init(b,_,O,H,Q)}E.Tween=Di,Di.prototype={constructor:Di,init:function(b,_,O,H,Q,tt){this.elem=b,this.prop=O,this.easing=Q||E.easing._default,this.options=_,this.start=this.now=this.cur(),this.end=H,this.unit=tt||(va(O)?"px":"")},cur:function(){var b=Di.propHooks[this.prop];return b&&b.get?b.get(this):Di.propHooks._default.get(this)},run:function(b){var _,O=Di.propHooks[this.prop];return this.options.duration?this.pos=_=E.easing[this.easing](b,this.options.duration*b,0,1,this.options.duration):this.pos=_=b,this.now=(this.end-this.start)*_+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),O&&O.set?O.set(this):Di.propHooks._default.set(this),this}},Di.prototype.init.prototype=Di.prototype,Di.propHooks={_default:{get:function(b){var _;return b.elem.nodeType!==1||b.elem[b.prop]!=null&&b.elem.style[b.prop]==null?b.elem[b.prop]:(_=E.css(b.elem,b.prop,""),!_||_==="auto"?0:_)},set:function(b){E.fx.step[b.prop]?E.fx.step[b.prop](b):b.elem.nodeType===1&&(E.cssHooks[b.prop]||b.elem.style[Yh(b.prop)]!=null)?E.style(b.elem,b.prop,b.now+b.unit):b.elem[b.prop]=b.now}}},E.easing={linear:function(b){return b},swing:function(b){return .5-Math.cos(b*Math.PI)/2},_default:"swing"},E.fx=Di.prototype.init,E.fx.step={};var Er,Zo,Ef=/^(?:toggle|show|hide)$/,_f=/queueHooks$/;function $u(){Zo&&(S.hidden===!1&&n.requestAnimationFrame?n.requestAnimationFrame($u):n.setTimeout($u,13),E.fx.tick())}function Nu(){return n.setTimeout(function(){Er=void 0}),Er=Date.now()}function Ks(b,_){var O,H=0,Q={height:b};for(_=_?1:0;H<4;H+=2-_)O=Gr[H],Q["margin"+O]=Q["padding"+O]=b;return _&&(Q.opacity=Q.width=b),Q}function _r(b,_,O){for(var H,Q=(Ar.tweeners[_]||[]).concat(Ar.tweeners["*"]),tt=0,dt=Q.length;tt<dt;tt++)if(H=Q[tt].call(O,_,b))return H}function Jo(b,_,O){var H,Q,tt,dt,Rt,$t,Qt,oe,ye="width"in _||"height"in _,se=this,xe={},en=b.style,Ln=b.nodeType&&ba(b),Pn=kn.get(b,"fxshow");O.queue||(dt=E._queueHooks(b,"fx"),dt.unqueued==null&&(dt.unqueued=0,Rt=dt.empty.fire,dt.empty.fire=function(){dt.unqueued||Rt()}),dt.unqueued++,se.always(function(){se.always(function(){dt.unqueued--,E.queue(b,"fx").length||dt.empty.fire()})}));for(H in _)if(Q=_[H],Ef.test(Q)){if(delete _[H],tt=tt||Q==="toggle",Q===(Ln?"hide":"show"))if(Q==="show"&&Pn&&Pn[H]!==void 0)Ln=!0;else continue;xe[H]=Pn&&Pn[H]||E.style(b,H)}if($t=!E.isEmptyObject(_),!(!$t&&E.isEmptyObject(xe))){ye&&b.nodeType===1&&(O.overflow=[en.overflow,en.overflowX,en.overflowY],Qt=Pn&&Pn.display,Qt==null&&(Qt=kn.get(b,"display")),oe=E.css(b,"display"),oe==="none"&&(Qt?oe=Qt:(Yo([b],!0),Qt=b.style.display||Qt,oe=E.css(b,"display"),Yo([b]))),(oe==="inline"||oe==="inline-block"&&Qt!=null)&&E.css(b,"float")==="none"&&($t||(se.done(function(){en.display=Qt}),Qt==null&&(oe=en.display,Qt=oe==="none"?"":oe)),en.display="inline-block")),O.overflow&&(en.overflow="hidden",se.always(function(){en.overflow=O.overflow[0],en.overflowX=O.overflow[1],en.overflowY=O.overflow[2]})),$t=!1;for(H in xe)$t||(Pn?"hidden"in Pn&&(Ln=Pn.hidden):Pn=kn.set(b,"fxshow",{display:Qt}),tt&&(Pn.hidden=!Ln),Ln&&Yo([b],!0),se.done(function(){Ln||Yo([b]),kn.remove(b,"fxshow");for(H in xe)E.style(b,H,xe[H])})),$t=_r(Ln?Pn[H]:0,H,se),H in Pn||(Pn[H]=$t.start,Ln&&($t.end=$t.start,$t.start=0))}}function Qh(b,_){var O,H,Q,tt,dt;for(O in b)if(H=yu(O),Q=_[H],tt=b[O],Array.isArray(tt)&&(Q=tt[1],tt=b[O]=tt[0]),O!==H&&(b[H]=tt,delete b[O]),dt=E.cssHooks[H],dt&&"expand"in dt){tt=dt.expand(tt),delete b[H];for(O in tt)O in b||(b[O]=tt[O],_[O]=Q)}else _[H]=Q}function Ar(b,_,O){var H,Q,tt=0,dt=Ar.prefilters.length,Rt=E.Deferred().always(function(){delete $t.elem}),$t=function(){if(Q)return!1;for(var ye=Er||Nu(),se=Math.max(0,Qt.startTime+Qt.duration-ye),xe=1-(se/Qt.duration||0),en=0,Ln=Qt.tweens.length;en<Ln;en++)Qt.tweens[en].run(xe);return Rt.notifyWith(b,[Qt,xe,se]),xe<1&&Ln?se:(Ln||Rt.notifyWith(b,[Qt,1,0]),Rt.resolveWith(b,[Qt]),!1)},Qt=Rt.promise({elem:b,props:E.extend({},_),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},O),originalProperties:_,originalOptions:O,startTime:Er||Nu(),duration:O.duration,tweens:[],createTween:function(ye,se){var xe=E.Tween(b,Qt.opts,ye,se,Qt.opts.specialEasing[ye]||Qt.opts.easing);return Qt.tweens.push(xe),xe},stop:function(ye){var se=0,xe=ye?Qt.tweens.length:0;if(Q)return this;for(Q=!0;se<xe;se++)Qt.tweens[se].run(1);return ye?(Rt.notifyWith(b,[Qt,1,0]),Rt.resolveWith(b,[Qt,ye])):Rt.rejectWith(b,[Qt,ye]),this}}),oe=Qt.props;for(Qh(oe,Qt.opts.specialEasing);tt<dt;tt++)if(H=Ar.prefilters[tt].call(Qt,b,oe,Qt.opts),H)return typeof H.stop=="function"&&(E._queueHooks(Qt.elem,Qt.opts.queue).stop=H.stop.bind(H)),H;return E.map(oe,_r,Qt),typeof Qt.opts.start=="function"&&Qt.opts.start.call(b,Qt),Qt.progress(Qt.opts.progress).done(Qt.opts.done,Qt.opts.complete).fail(Qt.opts.fail).always(Qt.opts.always),E.fx.timer(E.extend($t,{elem:b,anim:Qt,queue:Qt.opts.queue})),Qt}E.Animation=E.extend(Ar,{tweeners:{"*":[function(b,_){var O=this.createTween(b,_);return Rl(O.elem,b,Dl.exec(_),O),O}]},tweener:function(b,_){typeof b=="function"?(_=b,b=["*"]):b=b.match(Mt);for(var O,H=0,Q=b.length;H<Q;H++)O=b[H],Ar.tweeners[O]=Ar.tweeners[O]||[],Ar.tweeners[O].unshift(_)},prefilters:[Jo],prefilter:function(b,_){_?Ar.prefilters.unshift(b):Ar.prefilters.push(b)}}),E.speed=function(b,_,O){var H=b&&typeof b=="object"?E.extend({},b):{complete:O||_||typeof b=="function"&&b,duration:b,easing:O&&_||_&&typeof _!="function"&&_};return E.fx.off?H.duration=0:typeof H.duration!="number"&&(H.duration in E.fx.speeds?H.duration=E.fx.speeds[H.duration]:H.duration=E.fx.speeds._default),(H.queue==null||H.queue===!0)&&(H.queue="fx"),H.old=H.complete,H.complete=function(){typeof H.old=="function"&&H.old.call(this),H.queue&&E.dequeue(this,H.queue)},H},E.fn.extend({fadeTo:function(b,_,O,H){return this.filter(ba).css("opacity",0).show().end().animate({opacity:_},b,O,H)},animate:function(b,_,O,H){var Q=E.isEmptyObject(b),tt=E.speed(_,O,H),dt=function(){var Rt=Ar(this,E.extend({},b),tt);(Q||kn.get(this,"finish"))&&Rt.stop(!0)};return dt.finish=dt,Q||tt.queue===!1?this.each(dt):this.queue(tt.queue,dt)},stop:function(b,_,O){var H=function(Q){var tt=Q.stop;delete Q.stop,tt(O)};return typeof b!="string"&&(O=_,_=b,b=void 0),_&&this.queue(b||"fx",[]),this.each(function(){var Q=!0,tt=b!=null&&b+"queueHooks",dt=E.timers,Rt=kn.get(this);if(tt)Rt[tt]&&Rt[tt].stop&&H(Rt[tt]);else for(tt in Rt)Rt[tt]&&Rt[tt].stop&&_f.test(tt)&&H(Rt[tt]);for(tt=dt.length;tt--;)dt[tt].elem===this&&(b==null||dt[tt].queue===b)&&(dt[tt].anim.stop(O),Q=!1,dt.splice(tt,1));(Q||!O)&&E.dequeue(this,b)})},finish:function(b){return b!==!1&&(b=b||"fx"),this.each(function(){var _,O=kn.get(this),H=O[b+"queue"],Q=O[b+"queueHooks"],tt=E.timers,dt=H?H.length:0;for(O.finish=!0,E.queue(this,b,[]),Q&&Q.stop&&Q.stop.call(this,!0),_=tt.length;_--;)tt[_].elem===this&&tt[_].queue===b&&(tt[_].anim.stop(!0),tt.splice(_,1));for(_=0;_<dt;_++)H[_]&&H[_].finish&&H[_].finish.call(this);delete O.finish})}}),E.each(["toggle","show","hide"],function(b,_){var O=E.fn[_];E.fn[_]=function(H,Q,tt){return H==null||typeof H=="boolean"?O.apply(this,arguments):this.animate(Ks(_,!0),H,Q,tt)}}),E.each({slideDown:Ks("show"),slideUp:Ks("hide"),slideToggle:Ks("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(b,_){E.fn[b]=function(O,H,Q){return this.animate(_,O,H,Q)}}),E.timers=[],E.fx.tick=function(){var b,_=0,O=E.timers;for(Er=Date.now();_<O.length;_++)b=O[_],!b()&&O[_]===b&&O.splice(_--,1);O.length||E.fx.stop(),Er=void 0},E.fx.timer=function(b){E.timers.push(b),E.fx.start()},E.fx.start=function(){Zo||(Zo=!0,$u())},E.fx.stop=function(){Zo=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(b,_){return b=E.fx&&E.fx.speeds[b]||b,_=_||"fx",this.queue(_,function(O,H){var Q=n.setTimeout(O,b);H.stop=function(){n.clearTimeout(Q)}})};var Ll=/^(?:input|select|textarea|button)$/i,Du=/^(?:a|area)$/i;E.fn.extend({prop:function(b,_){return J(this,E.prop,b,_,arguments.length>1)},removeProp:function(b){return this.each(function(){delete this[E.propFix[b]||b]})}}),E.extend({prop:function(b,_,O){var H,Q,tt=b.nodeType;if(!(tt===3||tt===8||tt===2))return(tt!==1||!E.isXMLDoc(b))&&(_=E.propFix[_]||_,Q=E.propHooks[_]),O!==void 0?Q&&"set"in Q&&(H=Q.set(b,O,_))!==void 0?H:b[_]=O:Q&&"get"in Q&&(H=Q.get(b,_))!==null?H:b[_]},propHooks:{tabIndex:{get:function(b){var _=b.getAttribute("tabindex");return _?parseInt(_,10):Ll.test(b.nodeName)||Du.test(b.nodeName)&&b.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),U&&(E.propHooks.selected={get:function(b){var _=b.parentNode;return _&&_.parentNode&&_.parentNode.selectedIndex,null},set:function(b){var _=b.parentNode;_&&(_.selectedIndex,_.parentNode&&_.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){E.propFix[this.toLowerCase()]=this});function jr(b){var _=b.match(Mt)||[];return _.join(" ")}function Ca(b){return b.getAttribute&&b.getAttribute("class")||""}function Ao(b){return Array.isArray(b)?b:typeof b=="string"?b.match(Mt)||[]:[]}E.fn.extend({addClass:function(b){var _,O,H,Q,tt,dt;return typeof b=="function"?this.each(function(Rt){E(this).addClass(b.call(this,Rt,Ca(this)))}):(_=Ao(b),_.length?this.each(function(){if(H=Ca(this),O=this.nodeType===1&&" "+jr(H)+" ",O){for(tt=0;tt<_.length;tt++)Q=_[tt],O.indexOf(" "+Q+" ")<0&&(O+=Q+" ");dt=jr(O),H!==dt&&this.setAttribute("class",dt)}}):this)},removeClass:function(b){var _,O,H,Q,tt,dt;return typeof b=="function"?this.each(function(Rt){E(this).removeClass(b.call(this,Rt,Ca(this)))}):arguments.length?(_=Ao(b),_.length?this.each(function(){if(H=Ca(this),O=this.nodeType===1&&" "+jr(H)+" ",O){for(tt=0;tt<_.length;tt++)for(Q=_[tt];O.indexOf(" "+Q+" ")>-1;)O=O.replace(" "+Q+" "," ");dt=jr(O),H!==dt&&this.setAttribute("class",dt)}}):this):this.attr("class","")},toggleClass:function(b,_){var O,H,Q,tt;return typeof b=="function"?this.each(function(dt){E(this).toggleClass(b.call(this,dt,Ca(this),_),_)}):typeof _=="boolean"?_?this.addClass(b):this.removeClass(b):(O=Ao(b),O.length?this.each(function(){for(tt=E(this),Q=0;Q<O.length;Q++)H=O[Q],tt.hasClass(H)?tt.removeClass(H):tt.addClass(H)}):this)},hasClass:function(b){var _,O,H=0;for(_=" "+b+" ";O=this[H++];)if(O.nodeType===1&&(" "+jr(Ca(O))+" ").indexOf(_)>-1)return!0;return!1}}),E.fn.extend({val:function(b){var _,O,H,Q=this[0];return arguments.length?(H=typeof b=="function",this.each(function(tt){var dt;this.nodeType===1&&(H?dt=b.call(this,tt,E(this).val()):dt=b,dt==null?dt="":typeof dt=="number"?dt+="":Array.isArray(dt)&&(dt=E.map(dt,function(Rt){return Rt==null?"":Rt+""})),_=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()],(!_||!("set"in _)||_.set(this,dt,"value")===void 0)&&(this.value=dt))})):Q?(_=E.valHooks[Q.type]||E.valHooks[Q.nodeName.toLowerCase()],_&&"get"in _&&(O=_.get(Q,"value"))!==void 0?O:(O=Q.value,O??"")):void 0}}),E.extend({valHooks:{select:{get:function(b){var _,O,H,Q=b.options,tt=b.selectedIndex,dt=b.type==="select-one",Rt=dt?null:[],$t=dt?tt+1:Q.length;for(tt<0?H=$t:H=dt?tt:0;H<$t;H++)if(O=Q[H],O.selected&&!O.disabled&&(!O.parentNode.disabled||!q(O.parentNode,"optgroup"))){if(_=E(O).val(),dt)return _;Rt.push(_)}return Rt},set:function(b,_){for(var O,H,Q=b.options,tt=E.makeArray(_),dt=Q.length;dt--;)H=Q[dt],(H.selected=E.inArray(E(H).val(),tt)>-1)&&(O=!0);return O||(b.selectedIndex=-1),tt}}}}),U&&(E.valHooks.option={get:function(b){var _=b.getAttribute("value");return _??jr(E.text(b))}}),E.each(["radio","checkbox"],function(){E.valHooks[this]={set:function(b,_){if(Array.isArray(_))return b.checked=E.inArray(E(b).val(),_)>-1}}});var $o=/^(?:focusinfocus|focusoutblur)$/,Bl=function(b){b.stopPropagation()};E.extend(E.event,{trigger:function(b,_,O,H){var Q,tt,dt,Rt,$t,Qt,oe,ye,se=[O||S],xe=h.call(b,"type")?b.type:b,en=h.call(b,"namespace")?b.namespace.split("."):[];if(tt=ye=dt=O=O||S,!(O.nodeType===3||O.nodeType===8)&&!$o.test(xe+E.event.triggered)&&(xe.indexOf(".")>-1&&(en=xe.split("."),xe=en.shift(),en.sort()),$t=xe.indexOf(":")<0&&"on"+xe,b=b[E.expando]?b:new E.Event(xe,typeof b=="object"&&b),b.isTrigger=H?2:3,b.namespace=en.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+en.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=O),_=_==null?[b]:E.makeArray(_,[b]),oe=E.event.special[xe]||{},!(!H&&oe.trigger&&oe.trigger.apply(O,_)===!1))){if(!H&&!oe.noBubble&&!k(O)){for(Rt=oe.delegateType||xe,$o.test(Rt+xe)||(tt=tt.parentNode);tt;tt=tt.parentNode)se.push(tt),dt=tt;dt===(O.ownerDocument||S)&&se.push(dt.defaultView||dt.parentWindow||n)}for(Q=0;(tt=se[Q++])&&!b.isPropagationStopped();)ye=tt,b.type=Q>1?Rt:oe.bindType||xe,Qt=(kn.get(tt,"events")||Object.create(null))[b.type]&&kn.get(tt,"handle"),Qt&&Qt.apply(tt,_),Qt=$t&&tt[$t],Qt&&Qt.apply&&pi(tt)&&(b.result=Qt.apply(tt,_),b.result===!1&&b.preventDefault());return b.type=xe,!H&&!b.isDefaultPrevented()&&(!oe._default||oe._default.apply(se.pop(),_)===!1)&&pi(O)&&$t&&typeof O[xe]=="function"&&!k(O)&&(dt=O[$t],dt&&(O[$t]=null),E.event.triggered=xe,b.isPropagationStopped()&&ye.addEventListener(xe,Bl),O[xe](),b.isPropagationStopped()&&ye.removeEventListener(xe,Bl),E.event.triggered=void 0,dt&&(O[$t]=dt)),b.result}},simulate:function(b,_,O){var H=E.extend(new E.Event,O,{type:b,isSimulated:!0});E.event.trigger(H,null,_)}}),E.fn.extend({trigger:function(b,_){return this.each(function(){E.event.trigger(b,_,this)})},triggerHandler:function(b,_){var O=this[0];if(O)return E.event.trigger(b,_,O,!0)}});var uo=n.location,Ru={guid:Date.now()},yc=/\?/;E.parseXML=function(b){var _,O;if(!b||typeof b!="string")return null;try{_=new n.DOMParser().parseFromString(b,"text/xml")}catch{}return O=_&&_.getElementsByTagName("parsererror")[0],(!_||O)&&E.error("Invalid XML: "+(O?E.map(O.childNodes,function(H){return H.textContent}).join(`
`):b)),_};var Sa=/\[\]$/,wc=/\r?\n/g,Ta=/^(?:submit|button|image|reset|file)$/i,Af=/^(?:input|select|textarea|keygen)/i;function kc(b,_,O,H){var Q;if(Array.isArray(_))E.each(_,function(tt,dt){O||Sa.test(b)?H(b,dt):kc(b+"["+(typeof dt=="object"&&dt!=null?tt:"")+"]",dt,O,H)});else if(!O&&y(_)==="object")for(Q in _)kc(b+"["+Q+"]",_[Q],O,H);else H(b,_)}E.param=function(b,_){var O,H=[],Q=function(tt,dt){var Rt=typeof dt=="function"?dt():dt;H[H.length]=encodeURIComponent(tt)+"="+encodeURIComponent(Rt??"")};if(b==null)return"";if(Array.isArray(b)||b.jquery&&!E.isPlainObject(b))E.each(b,function(){Q(this.name,this.value)});else for(O in b)kc(O,b[O],_,Q);return H.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var b=E.prop(this,"elements");return b?E.makeArray(b):this}).filter(function(){var b=this.type;return this.name&&!E(this).is(":disabled")&&Af.test(this.nodeName)&&!Ta.test(b)&&(this.checked||!pc.test(b))}).map(function(b,_){var O=E(this).val();return O==null?null:Array.isArray(O)?E.map(O,function(H){return{name:_.name,value:H.replace(wc,`\r
`)}}):{name:_.name,value:O.replace(wc,`\r
`)}}).get()}});var Qo=/%20/g,$f=/#.*$/,Nf=/([?&])_=[^&]*/,Mu=/^(.*?):[ \t]*([^\r\n]*)$/mg,Df=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,td=/^(?:GET|HEAD)$/,yi=/^\/\//,Ou={},il={},Ia="*/".concat("*"),Cc=S.createElement("a");Cc.href=uo.href;function $r(b){return function(_,O){typeof _!="string"&&(O=_,_="*");var H,Q=0,tt=_.toLowerCase().match(Mt)||[];if(typeof O=="function")for(;H=tt[Q++];)H[0]==="+"?(H=H.slice(1)||"*",(b[H]=b[H]||[]).unshift(O)):(b[H]=b[H]||[]).push(O)}}function Fu(b,_,O,H){var Q={},tt=b===il;function dt(Rt){var $t;return Q[Rt]=!0,E.each(b[Rt]||[],function(Qt,oe){var ye=oe(_,O,H);if(typeof ye=="string"&&!tt&&!Q[ye])return _.dataTypes.unshift(ye),dt(ye),!1;if(tt)return!($t=ye)}),$t}return dt(_.dataTypes[0])||!Q["*"]&&dt("*")}function Sc(b,_){var O,H,Q=E.ajaxSettings.flatOptions||{};for(O in _)_[O]!==void 0&&((Q[O]?b:H||(H={}))[O]=_[O]);return H&&E.extend(!0,b,H),b}function Pu(b,_,O){for(var H,Q,tt,dt,Rt=b.contents,$t=b.dataTypes;$t[0]==="*";)$t.shift(),H===void 0&&(H=b.mimeType||_.getResponseHeader("Content-Type"));if(H){for(Q in Rt)if(Rt[Q]&&Rt[Q].test(H)){$t.unshift(Q);break}}if($t[0]in O)tt=$t[0];else{for(Q in O){if(!$t[0]||b.converters[Q+" "+$t[0]]){tt=Q;break}dt||(dt=Q)}tt=tt||dt}if(tt)return tt!==$t[0]&&$t.unshift(tt),O[tt]}function ed(b,_,O,H){var Q,tt,dt,Rt,$t,Qt={},oe=b.dataTypes.slice();if(oe[1])for(dt in b.converters)Qt[dt.toLowerCase()]=b.converters[dt];for(tt=oe.shift();tt;)if(b.responseFields[tt]&&(O[b.responseFields[tt]]=_),!$t&&H&&b.dataFilter&&(_=b.dataFilter(_,b.dataType)),$t=tt,tt=oe.shift(),tt){if(tt==="*")tt=$t;else if($t!=="*"&&$t!==tt){if(dt=Qt[$t+" "+tt]||Qt["* "+tt],!dt){for(Q in Qt)if(Rt=Q.split(" "),Rt[1]===tt&&(dt=Qt[$t+" "+Rt[0]]||Qt["* "+Rt[0]],dt)){dt===!0?dt=Qt[Q]:Qt[Q]!==!0&&(tt=Rt[0],oe.unshift(Rt[1]));break}}if(dt!==!0)if(dt&&b.throws)_=dt(_);else try{_=dt(_)}catch(ye){return{state:"parsererror",error:dt?ye:"No conversion from "+$t+" to "+tt}}}}return{state:"success",data:_}}E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:uo.href,type:"GET",isLocal:Df.test(uo.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ia,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(b,_){return _?Sc(Sc(b,E.ajaxSettings),_):Sc(E.ajaxSettings,b)},ajaxPrefilter:$r(Ou),ajaxTransport:$r(il),ajax:function(b,_){typeof b=="object"&&(_=b,b=void 0),_=_||{};var O,H,Q,tt,dt,Rt,$t,Qt,oe,ye,se=E.ajaxSetup({},_),xe=se.context||se,en=se.context&&(xe.nodeType||xe.jquery)?E(xe):E.event,Ln=E.Deferred(),Pn=E.Callbacks("once memory"),Js=se.statusCode||{},ws={},er={},Ri="canceled",ys={readyState:0,getResponseHeader:function(cs){var ci;if($t){if(!tt)for(tt={};ci=Mu.exec(Q);)tt[ci[1].toLowerCase()+" "]=(tt[ci[1].toLowerCase()+" "]||[]).concat(ci[2]);ci=tt[cs.toLowerCase()+" "]}return ci==null?null:ci.join(", ")},getAllResponseHeaders:function(){return $t?Q:null},setRequestHeader:function(cs,ci){return $t==null&&(cs=er[cs.toLowerCase()]=er[cs.toLowerCase()]||cs,ws[cs]=ci),this},overrideMimeType:function(cs){return $t==null&&(se.mimeType=cs),this},statusCode:function(cs){var ci;if(cs)if($t)ys.always(cs[ys.status]);else for(ci in cs)Js[ci]=[Js[ci],cs[ci]];return this},abort:function(cs){var ci=cs||Ri;return O&&O.abort(ci),fo(0,ci),this}};if(Ln.promise(ys),se.url=((b||se.url||uo.href)+"").replace(yi,uo.protocol+"//"),se.type=_.method||_.type||se.method||se.type,se.dataTypes=(se.dataType||"*").toLowerCase().match(Mt)||[""],se.crossDomain==null){Rt=S.createElement("a");try{Rt.href=se.url,Rt.href=Rt.href,se.crossDomain=Cc.protocol+"//"+Cc.host!=Rt.protocol+"//"+Rt.host}catch{se.crossDomain=!0}}if(Fu(Ou,se,_,ys),se.data&&se.processData&&typeof se.data!="string"&&(se.data=E.param(se.data,se.traditional)),$t)return ys;Qt=E.event&&se.global,Qt&&E.active++===0&&E.event.trigger("ajaxStart"),se.type=se.type.toUpperCase(),se.hasContent=!td.test(se.type),H=se.url.replace($f,""),se.hasContent?se.data&&se.processData&&(se.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(se.data=se.data.replace(Qo,"+")):(ye=se.url.slice(H.length),se.data&&(se.processData||typeof se.data=="string")&&(H+=(yc.test(H)?"&":"?")+se.data,delete se.data),se.cache===!1&&(H=H.replace(Nf,"$1"),ye=(yc.test(H)?"&":"?")+"_="+Ru.guid+++ye),se.url=H+ye),se.ifModified&&(E.lastModified[H]&&ys.setRequestHeader("If-Modified-Since",E.lastModified[H]),E.etag[H]&&ys.setRequestHeader("If-None-Match",E.etag[H])),(se.data&&se.hasContent&&se.contentType!==!1||_.contentType)&&ys.setRequestHeader("Content-Type",se.contentType),ys.setRequestHeader("Accept",se.dataTypes[0]&&se.accepts[se.dataTypes[0]]?se.accepts[se.dataTypes[0]]+(se.dataTypes[0]!=="*"?", "+Ia+"; q=0.01":""):se.accepts["*"]);for(oe in se.headers)ys.setRequestHeader(oe,se.headers[oe]);if(se.beforeSend&&(se.beforeSend.call(xe,ys,se)===!1||$t))return ys.abort();if(Ri="abort",Pn.add(se.complete),ys.done(se.success),ys.fail(se.error),O=Fu(il,se,_,ys),!O)fo(-1,"No Transport");else{if(ys.readyState=1,Qt&&en.trigger("ajaxSend",[ys,se]),$t)return ys;se.async&&se.timeout>0&&(dt=n.setTimeout(function(){ys.abort("timeout")},se.timeout));try{$t=!1,O.send(ws,fo)}catch(cs){if($t)throw cs;fo(-1,cs)}}function fo(cs,ci,Lu,Bu){var Ro,Mo,fr,rl,Ea,Xr=ci;$t||($t=!0,dt&&n.clearTimeout(dt),O=void 0,Q=Bu||"",ys.readyState=cs>0?4:0,Ro=cs>=200&&cs<300||cs===304,Lu&&(rl=Pu(se,ys,Lu)),!Ro&&E.inArray("script",se.dataTypes)>-1&&E.inArray("json",se.dataTypes)<0&&(se.converters["text script"]=function(){}),rl=ed(se,rl,ys,Ro),Ro?(se.ifModified&&(Ea=ys.getResponseHeader("Last-Modified"),Ea&&(E.lastModified[H]=Ea),Ea=ys.getResponseHeader("etag"),Ea&&(E.etag[H]=Ea)),cs===204||se.type==="HEAD"?Xr="nocontent":cs===304?Xr="notmodified":(Xr=rl.state,Mo=rl.data,fr=rl.error,Ro=!fr)):(fr=Xr,(cs||!Xr)&&(Xr="error",cs<0&&(cs=0))),ys.status=cs,ys.statusText=(ci||Xr)+"",Ro?Ln.resolveWith(xe,[Mo,Xr,ys]):Ln.rejectWith(xe,[ys,Xr,fr]),ys.statusCode(Js),Js=void 0,Qt&&en.trigger(Ro?"ajaxSuccess":"ajaxError",[ys,se,Ro?Mo:fr]),Pn.fireWith(xe,[ys,Xr]),Qt&&(en.trigger("ajaxComplete",[ys,se]),--E.active||E.event.trigger("ajaxStop")))}return ys},getJSON:function(b,_,O){return E.get(b,_,O,"json")},getScript:function(b,_){return E.get(b,void 0,_,"script")}}),E.each(["get","post"],function(b,_){E[_]=function(O,H,Q,tt){return(typeof H=="function"||H===null)&&(tt=tt||Q,Q=H,H=void 0),E.ajax(E.extend({url:O,type:_,dataType:tt,data:H,success:Q},E.isPlainObject(O)&&O))}}),E.ajaxPrefilter(function(b){var _;for(_ in b.headers)_.toLowerCase()==="content-type"&&(b.contentType=b.headers[_]||"")}),E._evalUrl=function(b,_,O){return E.ajax({url:b,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,scriptAttrs:_.crossOrigin?{crossOrigin:_.crossOrigin}:void 0,converters:{"text script":function(){}},dataFilter:function(H){E.globalEval(H,_,O)}})},E.fn.extend({wrapAll:function(b){var _;return this[0]&&(typeof b=="function"&&(b=b.call(this[0])),_=E(b,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&_.insertBefore(this[0]),_.map(function(){for(var O=this;O.firstElementChild;)O=O.firstElementChild;return O}).append(this)),this},wrapInner:function(b){return typeof b=="function"?this.each(function(_){E(this).wrapInner(b.call(this,_))}):this.each(function(){var _=E(this),O=_.contents();O.length?O.wrapAll(b):_.append(b)})},wrap:function(b){var _=typeof b=="function";return this.each(function(O){E(this).wrapAll(_?b.call(this,O):b)})},unwrap:function(b){return this.parent(b).not("body").each(function(){E(this).replaceWith(this.childNodes)}),this}}),E.expr.pseudos.hidden=function(b){return!E.expr.pseudos.visible(b)},E.expr.pseudos.visible=function(b){return!!(b.offsetWidth||b.offsetHeight||b.getClientRects().length)},E.ajaxSettings.xhr=function(){return new n.XMLHttpRequest};var ho={0:200};E.ajaxTransport(function(b){var _;return{send:function(O,H){var Q,tt=b.xhr();if(tt.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(Q in b.xhrFields)tt[Q]=b.xhrFields[Q];b.mimeType&&tt.overrideMimeType&&tt.overrideMimeType(b.mimeType),!b.crossDomain&&!O["X-Requested-With"]&&(O["X-Requested-With"]="XMLHttpRequest");for(Q in O)tt.setRequestHeader(Q,O[Q]);_=function(dt){return function(){_&&(_=tt.onload=tt.onerror=tt.onabort=tt.ontimeout=null,dt==="abort"?tt.abort():dt==="error"?H(tt.status,tt.statusText):H(ho[tt.status]||tt.status,tt.statusText,(tt.responseType||"text")==="text"?{text:tt.responseText}:{binary:tt.response},tt.getAllResponseHeaders()))}},tt.onload=_(),tt.onabort=tt.onerror=tt.ontimeout=_("error"),_=_("abort");try{tt.send(b.hasContent&&b.data||null)}catch(dt){if(_)throw dt}},abort:function(){_&&_()}}});function No(b){return b.scriptAttrs||!b.headers&&(b.crossDomain||b.async&&E.inArray("json",b.dataTypes)<0)}E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},converters:{"text script":function(b){return E.globalEval(b),b}}}),E.ajaxPrefilter("script",function(b){b.cache===void 0&&(b.cache=!1),No(b)&&(b.type="GET")}),E.ajaxTransport("script",function(b){if(No(b)){var _,O;return{send:function(H,Q){_=E("<script>").attr(b.scriptAttrs||{}).prop({charset:b.scriptCharset,src:b.url}).on("load error",O=function(tt){_.remove(),O=null,tt&&Q(tt.type==="error"?404:200,tt.type)}),S.head.appendChild(_[0])},abort:function(){O&&O()}}}});var Li=[],Do=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var b=Li.pop()||E.expando+"_"+Ru.guid++;return this[b]=!0,b}}),E.ajaxPrefilter("jsonp",function(b,_,O){var H,Q,tt,dt=b.jsonp!==!1&&(Do.test(b.url)?"url":typeof b.data=="string"&&(b.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Do.test(b.data)&&"data");return H=b.jsonpCallback=typeof b.jsonpCallback=="function"?b.jsonpCallback():b.jsonpCallback,dt?b[dt]=b[dt].replace(Do,"$1"+H):b.jsonp!==!1&&(b.url+=(yc.test(b.url)?"&":"?")+b.jsonp+"="+H),b.converters["script json"]=function(){return tt||E.error(H+" was not called"),tt[0]},b.dataTypes[0]="json",Q=n[H],n[H]=function(){tt=arguments},O.always(function(){Q===void 0?E(n).removeProp(H):n[H]=Q,b[H]&&(b.jsonpCallback=_.jsonpCallback,Li.push(H)),tt&&typeof Q=="function"&&Q(tt[0]),tt=Q=void 0}),"script"}),E.ajaxPrefilter(function(b,_){typeof b.data!="string"&&!E.isPlainObject(b.data)&&!Array.isArray(b.data)&&!("processData"in _)&&(b.processData=!1),b.data instanceof n.FormData&&(b.contentType=!1)}),E.parseHTML=function(b,_,O){if(typeof b!="string"&&!ls(b+""))return[];typeof _=="boolean"&&(O=_,_=!1);var H,Q;return _||(_=new n.DOMParser().parseFromString("","text/html")),H=as.exec(b),Q=!O&&[],H?[_.createElement(H[1])]:(H=dr([b],_,Q),Q&&Q.length&&E(Q).remove(),E.merge([],H.childNodes))},E.fn.load=function(b,_,O){var H,Q,tt,dt=this,Rt=b.indexOf(" ");return Rt>-1&&(H=jr(b.slice(Rt)),b=b.slice(0,Rt)),typeof _=="function"?(O=_,_=void 0):_&&typeof _=="object"&&(Q="POST"),dt.length>0&&E.ajax({url:b,type:Q||"GET",dataType:"html",data:_}).done(function($t){tt=arguments,dt.html(H?E("<div>").append(E.parseHTML($t)).find(H):$t)}).always(O&&function($t,Qt){dt.each(function(){O.apply(this,tt||[$t.responseText,Qt,$t])})}),this},E.expr.pseudos.animated=function(b){return E.grep(E.timers,function(_){return b===_.elem}).length},E.offset={setOffset:function(b,_,O){var H,Q,tt,dt,Rt,$t,Qt,oe=E.css(b,"position"),ye=E(b),se={};oe==="static"&&(b.style.position="relative"),Rt=ye.offset(),tt=E.css(b,"top"),$t=E.css(b,"left"),Qt=(oe==="absolute"||oe==="fixed")&&(tt+$t).indexOf("auto")>-1,Qt?(H=ye.position(),dt=H.top,Q=H.left):(dt=parseFloat(tt)||0,Q=parseFloat($t)||0),typeof _=="function"&&(_=_.call(b,O,E.extend({},Rt))),_.top!=null&&(se.top=_.top-Rt.top+dt),_.left!=null&&(se.left=_.left-Rt.left+Q),"using"in _?_.using.call(b,se):ye.css(se)}},E.fn.extend({offset:function(b){if(arguments.length)return b===void 0?this:this.each(function(Q){E.offset.setOffset(this,b,Q)});var _,O,H=this[0];if(H)return H.getClientRects().length?(_=H.getBoundingClientRect(),O=H.ownerDocument.defaultView,{top:_.top+O.pageYOffset,left:_.left+O.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var b,_,O,H=this[0],Q={top:0,left:0};if(E.css(H,"position")==="fixed")_=H.getBoundingClientRect();else{for(_=this.offset(),O=H.ownerDocument,b=H.offsetParent||O.documentElement;b&&b!==O.documentElement&&E.css(b,"position")==="static";)b=b.offsetParent||O.documentElement;b&&b!==H&&b.nodeType===1&&E.css(b,"position")!=="static"&&(Q=E(b).offset(),Q.top+=E.css(b,"borderTopWidth",!0),Q.left+=E.css(b,"borderLeftWidth",!0))}return{top:_.top-Q.top-E.css(H,"marginTop",!0),left:_.left-Q.left-E.css(H,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var b=this.offsetParent;b&&E.css(b,"position")==="static";)b=b.offsetParent;return b||yt})}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,_){var O=_==="pageYOffset";E.fn[b]=function(H){return J(this,function(Q,tt,dt){var Rt;if(k(Q)?Rt=Q:Q.nodeType===9&&(Rt=Q.defaultView),dt===void 0)return Rt?Rt[_]:Q[tt];Rt?Rt.scrollTo(O?Rt.pageXOffset:dt,O?dt:Rt.pageYOffset):Q[tt]=dt},b,H,arguments.length)}}),E.each({Height:"height",Width:"width"},function(b,_){E.each({padding:"inner"+b,content:_,"":"outer"+b},function(O,H){E.fn[H]=function(Q,tt){var dt=arguments.length&&(O||typeof Q!="boolean"),Rt=O||(Q===!0||tt===!0?"margin":"border");return J(this,function($t,Qt,oe){var ye;return k($t)?H.indexOf("outer")===0?$t["inner"+b]:$t.document.documentElement["client"+b]:$t.nodeType===9?(ye=$t.documentElement,Math.max($t.body["scroll"+b],ye["scroll"+b],$t.body["offset"+b],ye["offset"+b],ye["client"+b])):oe===void 0?E.css($t,Qt,Rt):E.style($t,Qt,oe,Rt)},_,dt?Q:void 0,dt)}})}),E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(b,_){E.fn[_]=function(O){return this.on(_,O)}}),E.fn.extend({bind:function(b,_,O){return this.on(b,null,_,O)},unbind:function(b,_){return this.off(b,null,_)},delegate:function(b,_,O,H){return this.on(_,b,O,H)},undelegate:function(b,_,O){return arguments.length===1?this.off(b,"**"):this.off(_,b||"**",O)},hover:function(b,_){return this.on("mouseenter",b).on("mouseleave",_||b)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(b,_){E.fn[_]=function(O,H){return arguments.length>0?this.on(_,null,O,H):this.trigger(_)}}),E.proxy=function(b,_){var O,H,Q;if(typeof _=="string"&&(O=b[_],_=b,b=O),typeof b=="function")return H=i.call(arguments,2),Q=function(){return b.apply(_||this,H.concat(i.call(arguments)))},Q.guid=b.guid=b.guid||E.guid++,Q},E.holdReady=function(b){b?E.readyWait++:E.ready(!0)},E.expr[":"]=E.expr.filters=E.expr.pseudos,typeof define=="function"&&define.amd&&define("jquery",[],function(){return E});var zl=n.jQuery,Tc=n.$;return E.noConflict=function(b){return n.$===E&&(n.$=Tc),b&&n.jQuery===E&&(n.jQuery=zl),E},E}var ts=b9(window);function v9(n,t){if(n.match(/^[a-z]+:\/\//i))return n;if(n.match(/^\/\//))return window.location.protocol+n;if(n.match(/^[a-z]+:/i))return n;const e=document.implementation.createHTMLDocument(),s=e.createElement("base"),i=e.createElement("a");return e.head.appendChild(s),e.body.appendChild(i),t&&(s.href=t),i.href=n,i.href}const y9=(()=>{let n=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(n+=1,`u${t()}${n}`)})();function qc(n){const t=[];for(let e=0,s=n.length;e<s;e++)t.push(n[e]);return t}let yd=null;function WT(n={}){return yd||(n.includeStyleProperties?(yd=n.includeStyleProperties,yd):(yd=qc(window.getComputedStyle(document.documentElement)),yd))}function Lm(n,t){const s=(n.ownerDocument.defaultView||window).getComputedStyle(n).getPropertyValue(t);return s?parseFloat(s.replace("px","")):0}function w9(n){const t=Lm(n,"border-left-width"),e=Lm(n,"border-right-width");return n.clientWidth+t+e}function k9(n){const t=Lm(n,"border-top-width"),e=Lm(n,"border-bottom-width");return n.clientHeight+t+e}function VT(n,t={}){const e=t.width||w9(n),s=t.height||k9(n);return{width:e,height:s}}function C9(){let n,t;try{t=process}catch{}const e=t&&t.env?t.env.devicePixelRatio:null;return e&&(n=parseInt(e,10),Number.isNaN(n)&&(n=1)),n||window.devicePixelRatio||1}const zo=16384;function S9(n){(n.width>zo||n.height>zo)&&(n.width>zo&&n.height>zo?n.width>n.height?(n.height*=zo/n.width,n.width=zo):(n.width*=zo/n.height,n.height=zo):n.width>zo?(n.height*=zo/n.width,n.width=zo):(n.width*=zo/n.height,n.height=zo))}function Bm(n){return new Promise((t,e)=>{const s=new Image;s.onload=()=>{s.decode().then(()=>{requestAnimationFrame(()=>t(s))})},s.onerror=e,s.crossOrigin="anonymous",s.decoding="async",s.src=n})}async function T9(n){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(n)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function I9(n,t,e){const s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),r=document.createElementNS(s,"foreignObject");return i.setAttribute("width",`${t}`),i.setAttribute("height",`${e}`),i.setAttribute("viewBox",`0 0 ${t} ${e}`),r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.setAttribute("x","0"),r.setAttribute("y","0"),r.setAttribute("externalResourcesRequired","true"),i.appendChild(r),r.appendChild(n),T9(i)}const So=(n,t)=>{if(n instanceof t)return!0;const e=Object.getPrototypeOf(n);return e===null?!1:e.constructor.name===t.name||So(e,t)};function E9(n){const t=n.getPropertyValue("content");return`${n.cssText} content: '${t.replace(/'|"/g,"")}';`}function _9(n,t){return WT(t).map(e=>{const s=n.getPropertyValue(e),i=n.getPropertyPriority(e);return`${e}: ${s}${i?" !important":""};`}).join(" ")}function A9(n,t,e,s){const i=`.${n}:${t}`,r=e.cssText?E9(e):_9(e,s);return document.createTextNode(`${i}{${r}}`)}function T4(n,t,e,s){const i=window.getComputedStyle(n,e),r=i.getPropertyValue("content");if(r===""||r==="none")return;const o=y9();try{t.className=`${t.className} ${o}`}catch{return}const a=document.createElement("style");a.appendChild(A9(o,e,i,s)),t.appendChild(a)}function $9(n,t,e){T4(n,t,":before",e),T4(n,t,":after",e)}const I4="application/font-woff",E4="image/jpeg",N9={woff:I4,woff2:I4,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:E4,jpeg:E4,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function D9(n){const t=/\.([^./]*?)$/g.exec(n);return t?t[1]:""}function Yv(n){const t=D9(n).toLowerCase();return N9[t]||""}function R9(n){return n.split(/,/)[1]}function qb(n){return n.search(/^(data:)/)!==-1}function M9(n,t){return`data:${t};base64,${n}`}async function UT(n,t,e){const s=await fetch(n,t);if(s.status===404)throw new Error(`Resource "${s.url}" not found`);const i=await s.blob();return new Promise((r,o)=>{const a=new FileReader;a.onerror=o,a.onloadend=()=>{try{r(e({res:s,result:a.result}))}catch(l){o(l)}},a.readAsDataURL(i)})}const fb={};function O9(n,t,e){let s=n.replace(/\?.*/,"");return e&&(s=n),/ttf|otf|eot|woff2?/i.test(s)&&(s=s.replace(/.*\//,"")),t?`[${t}]${s}`:s}async function Zv(n,t,e){const s=O9(n,t,e.includeQueryParams);if(fb[s]!=null)return fb[s];e.cacheBust&&(n+=(/\?/.test(n)?"&":"?")+new Date().getTime());let i;try{const r=await UT(n,e.fetchRequestInit,({res:o,result:a})=>(t||(t=o.headers.get("Content-Type")||""),R9(a)));i=M9(r,t)}catch(r){i=e.imagePlaceholder||"";let o=`Failed to fetch resource: ${n}`;r&&(o=typeof r=="string"?r:r.message),o&&console.warn(o)}return fb[s]=i,i}async function F9(n){const t=n.toDataURL();return t==="data:,"?n.cloneNode(!1):Bm(t)}async function P9(n,t){if(n.currentSrc){const r=document.createElement("canvas"),o=r.getContext("2d");r.width=n.clientWidth,r.height=n.clientHeight,o?.drawImage(n,0,0,r.width,r.height);const a=r.toDataURL();return Bm(a)}const e=n.poster,s=Yv(e),i=await Zv(e,s,t);return Bm(i)}async function L9(n,t){var e;try{if(!((e=n?.contentDocument)===null||e===void 0)&&e.body)return await S1(n.contentDocument.body,t,!0)}catch{}return n.cloneNode(!1)}async function B9(n,t){return So(n,HTMLCanvasElement)?F9(n):So(n,HTMLVideoElement)?P9(n,t):So(n,HTMLIFrameElement)?L9(n,t):n.cloneNode(GT(n))}const z9=n=>n.tagName!=null&&n.tagName.toUpperCase()==="SLOT",GT=n=>n.tagName!=null&&n.tagName.toUpperCase()==="SVG";async function W9(n,t,e){var s,i;if(GT(t))return t;let r=[];return z9(n)&&n.assignedNodes?r=qc(n.assignedNodes()):So(n,HTMLIFrameElement)&&(!((s=n.contentDocument)===null||s===void 0)&&s.body)?r=qc(n.contentDocument.body.childNodes):r=qc(((i=n.shadowRoot)!==null&&i!==void 0?i:n).childNodes),r.length===0||So(n,HTMLVideoElement)||await r.reduce((o,a)=>o.then(()=>S1(a,e)).then(l=>{l&&t.appendChild(l)}),Promise.resolve()),t}function V9(n,t,e){const s=t.style;if(!s)return;const i=window.getComputedStyle(n);i.cssText?(s.cssText=i.cssText,s.transformOrigin=i.transformOrigin):WT(e).forEach(r=>{let o=i.getPropertyValue(r);r==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),So(n,HTMLIFrameElement)&&r==="display"&&o==="inline"&&(o="block"),r==="d"&&t.getAttribute("d")&&(o=`path(${t.getAttribute("d")})`),s.setProperty(r,o,i.getPropertyPriority(r))})}function U9(n,t){So(n,HTMLTextAreaElement)&&(t.innerHTML=n.value),So(n,HTMLInputElement)&&t.setAttribute("value",n.value)}function G9(n,t){if(So(n,HTMLSelectElement)){const s=Array.from(t.children).find(i=>n.value===i.getAttribute("value"));s&&s.setAttribute("selected","")}}function H9(n,t,e){return So(t,Element)&&(V9(n,t,e),$9(n,t,e),U9(n,t),G9(n,t)),t}async function j9(n,t){const e=n.querySelectorAll?n.querySelectorAll("use"):[];if(e.length===0)return n;const s={};for(let r=0;r<e.length;r++){const a=e[r].getAttribute("xlink:href");if(a){const l=n.querySelector(a),u=document.querySelector(a);!l&&u&&!s[a]&&(s[a]=await S1(u,t,!0))}}const i=Object.values(s);if(i.length){const r="http://www.w3.org/1999/xhtml",o=document.createElementNS(r,"svg");o.setAttribute("xmlns",r),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const a=document.createElementNS(r,"defs");o.appendChild(a);for(let l=0;l<i.length;l++)a.appendChild(i[l]);n.appendChild(o)}return n}async function S1(n,t,e){return!e&&t.filter&&!t.filter(n)?null:Promise.resolve(n).then(s=>B9(s,t)).then(s=>W9(n,s,t)).then(s=>H9(n,s,t)).then(s=>j9(s,t))}const HT=/url\((['"]?)([^'"]+?)\1\)/g,X9=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,q9=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function K9(n){const t=n.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Y9(n){const t=[];return n.replace(HT,(e,s,i)=>(t.push(i),e)),t.filter(e=>!qb(e))}async function Z9(n,t,e,s,i){try{const r=e?v9(t,e):t,o=Yv(t);let a;return i||(a=await Zv(r,o,s)),n.replace(K9(t),`$1${a}$3`)}catch{}return n}function J9(n,{preferredFontFormat:t}){return t?n.replace(q9,e=>{for(;;){const[s,,i]=X9.exec(e)||[];if(!i)return"";if(i===t)return`src: ${s};`}}):n}function jT(n){return n.search(HT)!==-1}async function XT(n,t,e){if(!jT(n))return n;const s=J9(n,e);return Y9(s).reduce((r,o)=>r.then(a=>Z9(a,o,t,e)),Promise.resolve(s))}async function wd(n,t,e){var s;const i=(s=t.style)===null||s===void 0?void 0:s.getPropertyValue(n);if(i){const r=await XT(i,null,e);return t.style.setProperty(n,r,t.style.getPropertyPriority(n)),!0}return!1}async function Q9(n,t){await wd("background",n,t)||await wd("background-image",n,t),await wd("mask",n,t)||await wd("-webkit-mask",n,t)||await wd("mask-image",n,t)||await wd("-webkit-mask-image",n,t)}async function tO(n,t){const e=So(n,HTMLImageElement);if(!(e&&!qb(n.src))&&!(So(n,SVGImageElement)&&!qb(n.href.baseVal)))return;const s=e?n.src:n.href.baseVal,i=await Zv(s,Yv(s),t);await new Promise((r,o)=>{n.onload=r,n.onerror=t.onImageErrorHandler?(...l)=>{try{r(t.onImageErrorHandler(...l))}catch(u){o(u)}}:o;const a=n;a.decode&&(a.decode=r),a.loading==="lazy"&&(a.loading="eager"),e?(n.srcset="",n.src=i):n.href.baseVal=i})}async function eO(n,t){const s=qc(n.childNodes).map(i=>qT(i,t));await Promise.all(s).then(()=>n)}async function qT(n,t){So(n,Element)&&(await Q9(n,t),await tO(n,t),await eO(n,t))}function nO(n,t){const{style:e}=n;t.backgroundColor&&(e.backgroundColor=t.backgroundColor),t.width&&(e.width=`${t.width}px`),t.height&&(e.height=`${t.height}px`);const s=t.style;return s!=null&&Object.keys(s).forEach(i=>{e[i]=s[i]}),n}const _4={};async function A4(n){let t=_4[n];if(t!=null)return t;const s=await(await fetch(n)).text();return t={url:n,cssText:s},_4[n]=t,t}async function $4(n,t){let e=n.cssText;const s=/url\(["']?([^"')]+)["']?\)/g,r=(e.match(/url\([^)]+\)/g)||[]).map(async o=>{let a=o.replace(s,"$1");return a.startsWith("https://")||(a=new URL(a,n.url).href),UT(a,t.fetchRequestInit,({result:l})=>(e=e.replace(o,`url(${l})`),[o,l]))});return Promise.all(r).then(()=>e)}function N4(n){if(n==null)return[];const t=[],e=/(\/\*[\s\S]*?\*\/)/gi;let s=n.replace(e,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=i.exec(s);if(l===null)break;t.push(l[0])}s=s.replace(i,"");const r=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",a=new RegExp(o,"gi");for(;;){let l=r.exec(s);if(l===null){if(l=a.exec(s),l===null)break;r.lastIndex=a.lastIndex}else a.lastIndex=r.lastIndex;t.push(l[0])}return t}async function sO(n,t){const e=[],s=[];return n.forEach(i=>{if("cssRules"in i)try{qc(i.cssRules||[]).forEach((r,o)=>{if(r.type===CSSRule.IMPORT_RULE){let a=o+1;const l=r.href,u=A4(l).then(h=>$4(h,t)).then(h=>N4(h).forEach(f=>{try{i.insertRule(f,f.startsWith("@import")?a+=1:i.cssRules.length)}catch(g){console.error("Error inserting rule from remote css",{rule:f,error:g})}})).catch(h=>{console.error("Error loading remote css",h.toString())});s.push(u)}})}catch(r){const o=n.find(a=>a.href==null)||document.styleSheets[0];i.href!=null&&s.push(A4(i.href).then(a=>$4(a,t)).then(a=>N4(a).forEach(l=>{o.insertRule(l,o.cssRules.length)})).catch(a=>{console.error("Error loading remote stylesheet",a)})),console.error("Error inlining remote css file",r)}}),Promise.all(s).then(()=>(n.forEach(i=>{if("cssRules"in i)try{qc(i.cssRules||[]).forEach(r=>{e.push(r)})}catch(r){console.error(`Error while reading CSS rules from ${i.href}`,r)}}),e))}function iO(n){return n.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>jT(t.style.getPropertyValue("src")))}async function rO(n,t){if(n.ownerDocument==null)throw new Error("Provided element is not within a Document");const e=qc(n.ownerDocument.styleSheets),s=await sO(e,t);return iO(s)}function KT(n){return n.trim().replace(/["']/g,"")}function oO(n){const t=new Set;function e(s){(s.style.fontFamily||getComputedStyle(s).fontFamily).split(",").forEach(r=>{t.add(KT(r))}),Array.from(s.children).forEach(r=>{r instanceof HTMLElement&&e(r)})}return e(n),t}async function aO(n,t){const e=await rO(n,t),s=oO(n);return(await Promise.all(e.filter(r=>s.has(KT(r.style.fontFamily))).map(r=>{const o=r.parentStyleSheet?r.parentStyleSheet.href:null;return XT(r.cssText,o,t)}))).join(`
`)}async function lO(n,t){const e=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await aO(n,t);if(e){const s=document.createElement("style"),i=document.createTextNode(e);s.appendChild(i),n.firstChild?n.insertBefore(s,n.firstChild):n.appendChild(s)}}async function cO(n,t={}){const{width:e,height:s}=VT(n,t),i=await S1(n,t,!0);return await lO(i,t),await qT(i,t),nO(i,t),await I9(i,e,s)}async function uO(n,t={}){const{width:e,height:s}=VT(n,t),i=await cO(n,t),r=await Bm(i),o=document.createElement("canvas"),a=o.getContext("2d"),l=t.pixelRatio||C9(),u=t.canvasWidth||e,h=t.canvasHeight||s;return o.width=u*l,o.height=h*l,t.skipAutoScale||S9(o),o.style.width=`${u}`,o.style.height=`${h}`,t.backgroundColor&&(a.fillStyle=t.backgroundColor,a.fillRect(0,0,o.width,o.height)),a.drawImage(r,0,0,o.width,o.height),o}async function YT(n,t={}){return(await uO(n,t)).toDataURL("image/jpeg",t.quality||1)}var hO=Re('<div class="loaderContainer2"><div class="loader2"></div></div>'),dO=Re('<img class="star icon" src="images/star.svg" alt="star"/>'),fO=Re('<img class="star icon" src="images/half.svg" alt="half star"/>'),pO=Re("<!> <!>",1),gO=Re('<img class="star icon" style="position: relative;top: 0.05em;" src="images/like.svg" alt="like"/>'),mO=Re('<img class="star icon" src="images/rewatch.svg" alt="rewatch"/>'),xO=Re('<div class="poster2"><div class="imgContainer"><div class="containertextimg"><span> </span></div> <img class="image tmdbimg" src="images/posterbig.webp" crossorigin="anonymous"/></div> <span class="stars"><!> <!> <!></span></div>'),bO=Re('<main><!> <section class="bgblackwrapped" id="bodymain"><section id="wpcontainer" class="wrappedContainer"><div class="loaderContainer2" id="loader"><div class="loaderContainer"><span class="loader"></span></div></div> <div id="wrapped" class="wrapped collage"><div class="contentcollage"><div class="changeCloseContainer tohide collageContainer"><div class="changeclose"><span role="button" tabindex="0" class="changebtn plantext" id="hideChangeBtn">Hide this box</span> <span role="button" tabindex="0" style="margin-left:1rem; color:white;" class="changebtn plantext" id="btndownload">HQ Download</span></div></div> <div class="title"> </div> <div class="posters"></div> <div class="logocontainer"><img src="images/logo.webp" alt="statsboxd"/></div></div></div></section></section></main>');function ZT(n,t){if(new.target)return wr({component:ZT,...n});ar(t,!0);let e=An(t,"username",7),s=An(t,"year",7),i=An(t,"month",7),r=qn(!0),o=qn(no({}));function a(B){const U=["January","February","March","April","May","June","July","August","September","October","November","December"];return B>=1&&B<=12?U[B-1]:""}function l(B){try{return B.values()}catch{}return[]}async function u(B,U,K){return U>0||(U=""),K>0||(K=""),(await fetch(nc+"collage/"+B+"?year="+U+"&month="+K,{method:"GET"})).json()}async function h(B){if(B.data("tmdb")===void 0||B.data("isLoaded"))return;const U=await fetch("https://api.themoviedb.org/3/movie/"+B.data("tmdb")+"?api_key="+Mm);if(U.ok){const K=await U.json();K.hasOwnProperty("poster_path")?(B.attr("src","https://image.tmdb.org/t/p/w185/"+K.poster_path),B.parent().addClass("imgok")):B.css("height","278px")}}async function f(){ts(event.target).parent().removeClass("imgok").addClass("notok"),ts(event.target).attr("src","images/poster.jpg")}async function g(B,U,K="&language=en"){const Y=ts(B.target);let ct="",j="";if(Y.data("isLoaded"))return;if(Y.data("tmdb")!==void 0)ct="movie",j=Y.data("tmdb");else if(Y.data("tmdb_tv")!==void 0)ct="tv",j=Y.data("tmdb_tv");else return;const ht=await fetch("https://api.themoviedb.org/3/"+ct+"/"+j+"/images?api_key="+Mm+K);if(ht.ok){const It=await ht.json();It.posters.length>0?(Y.attr("src","https://image.tmdb.org/t/p/w185/"+It.posters[0].file_path),Y.parent().addClass("imgok")):K!==""&&await h(Y)}else Y.removeAttr("crossorigin"),Y.attr("src",Y.data("lbd")),Y.parent().addClass("imgok"),ts(".tohide").addClass("hide");Y.data("isLoaded",!0)}function m(B){var U=document.documentElement.clientHeight/1280;const K=document.documentElement.clientWidth/720;K<U&&(U=K),ts("#wpcontainer").css("transform","scale("+U+")"),ts("#wpcontainer").css("-moz-transform","scale("+U+")"),ts("#wpcontainer").css("-webkit-transform","scale("+U+")");const Y=B.ids.length;var ct=Math.sqrt(Y);ct=Math.ceil(ct),ct<3&&(ct=3),ts(".posters").css("grid-template-columns","repeat("+ct+", 1fr)"),ts("#loader").hide(),ts("#hideChangeBtn").click(function(){ts(".tohide").addClass("hide")}),ts("#btndownload").click(function(){ts(".tohide").addClass("hide"),ts("#loader").show();try{YT(document.getElementById("wrapped"),{quality:.9,canvasWidth:1080,canvasHeight:1920,pixelRatio:1}).then(function(j){console.log("OK!");var ht=document.createElement("a");ht.download="collage.jpg",ht.href=j,ht.click(),ts(".tohide").removeClass("hide"),ts("#loader").hide()})}catch{ts(".tohide").addClass("hide"),ts("#loader").hide(),alert("Error! Please do a screenshot")}})}$l(async()=>{Ve(o,await u(e(),s(),i()),!0),m(Tt(o)),Ve(r,!1)});var y={get username(){return e()},set username(B){e(B),_n()},get year(){return s()},set year(B){s(B),_n()},get month(){return i()},set month(B){i(B),_n()},$set:Cr,$on:(B,U)=>kr(t,B,U)},k=bO(),C=Ht(k);{var S=B=>{var U=hO();Ie(B,U)};En(C,B=>{Tt(r)&&B(S)})}var $=pe(C,2),D=Ht($),R=pe(Ht(D),2),V=Ht(R),E=pe(Ht(V),2),q=Ht(E);Lt(E);var X=pe(E,2);return Ps(X,21,()=>l(Tt(o).ids),Fs,(B,U)=>{var K=xO(),Y=Ht(K),ct=Ht(Y),j=Ht(ct),ht=Ht(j,!0);Lt(j),Lt(ct);var It=pe(ct,2);Lt(Y);var yt=pe(Y,2),Ot=Ht(yt);{var Ct=jt=>{var Ut=pO(),me=Ss(Ut);Ps(me,17,()=>Array.from({length:parseInt(Tt(U).r)},(ce,De)=>De),Fs,(ce,De)=>{var ae=dO();Ie(ce,ae)});var Ee=pe(me,2);{var le=ce=>{var De=fO();Ie(ce,De)};En(Ee,ce=>{Tt(U).r>parseInt(Tt(U).r)&&ce(le)})}Ie(jt,Ut)};En(Ot,jt=>{Tt(U).hasOwnProperty("r")&&jt(Ct)})}var Gt=pe(Ot,2);{var vt=jt=>{var Ut=Mr(),me=Ss(Ut);{var Ee=le=>{var ce=gO();Ie(le,ce)};En(me,le=>{Tt(U).like&&le(Ee)})}Ie(jt,Ut)};En(Gt,jt=>{Tt(U).hasOwnProperty("like")&&jt(vt)})}var at=pe(Gt,2);{var Pt=jt=>{var Ut=Mr(),me=Ss(Ut);{var Ee=le=>{var ce=mO();Ie(le,ce)};En(me,le=>{Tt(U).rewatch&&le(Ee)})}Ie(jt,Ut)};En(at,jt=>{Tt(U).hasOwnProperty("rewatch")&&jt(Pt)})}Lt(yt),Lt(K),un(()=>{nn(ht,Tt(U).name),rs(It,"data-tmdb",Tt(U).tmdb),rs(It,"data-tmdb_tv",Tt(U).tmdb_tv),rs(It,"data-lbd",Tt(U).poster),rs(It,"alt",Tt(U).name)}),Mi("load",It,g),Mi("error",It,f),Wp(It),Ie(B,K)}),Lt(X),Ys(2),Lt(V),Lt(R),Lt(D),Lt($),Lt(k),un(B=>nn(q,`${B??""}
                        ${Tt(o).c_year??""}`),[()=>a(Tt(o).c_month)]),Ie(n,k),lr(y)}var vO=Re('<div class="namebox"><span class="name"> </span> <span class="num"> </span></div>'),yO=Re('<div class="column"><div class="plantext">Most Watched <!>s</div> <img/> <!></div>'),wO=Re('<main><div class="loaderContainer2" id="loader"><div class="loader2"></div></div> <section class="bgblackwrapped" id="bodymain"><section id="wpcontainer" class="wrappedContainer"><div class="loaderContainer2" id="loader"><div class="loaderContainer"><span class="loader"></span></div></div> <div id="wrapped" class="wrapped collage"><div><div class="changeCloseContainer tohide wrappedContainer"><div class="changeclose"><span role="button" tabindex="0" class="changebtn plantext" id="changeFilm">Change fav film</span> <span role="button" tabindex="0" class="changebtn plantext" id="hideChangeBtn">Hide this box</span> <span role="button" tabindex="0" style="color:white;" class="changebtn plantext" id="btndownload">HQ Download</span></div></div> <div class="bottomContainer"><div class="bottom"><img src="images/logo.webp" alt="logo"/> <div class="firma"><div class="bold"></div> <div class="link"> </div></div></div></div> <div class="backdrop"><img id="backdropimg" src="images/mask.webp" alt="backdrop"/></div> <div class="shadow" style="display:none;"></div> <div class="container"><div class="row row1"><div class="plantext"></div></div> <div id="favMovie" class="favMovie"></div> <div class="columns" style="margin-top: 2.7rem;"></div> <div class="columns" style="margin-top: 3.5rem;"><div class="column" style="gap:1.4rem;"><div class="namebox namebox2"><span class="name"> </span> <span class="num">FILMS</span></div> <div class="namebox namebox2"><span class="name"> </span> <span class="num">MINUTES</span></div> <div class="namebox namebox2"><span class="name"> </span> <span class="num">COUNTRIES</span></div></div> <div class="column"><div class="namebox namebox3"><span class="num">MOST WATCHED THEME</span> <span class="name"> </span></div></div></div></div></div></div></section></section></main>');function JT(n,t){if(new.target)return wr({component:JT,...n});ar(t,!0);let e=An(t,"username",7),s=qn(!0),i=qn(no({})),r=qn("Error"),o=qn(no({}));const a=2025;var l=0;const u="https://worker.statsboxd.top/cors?url=";async function h(ae){return await(await fetch(nc+"wrapped",{method:"POST",body:JSON.stringify({year:a,watched:ae})})).json()}function f(ae){let Oe="https://a.ltrbxd.com/resized/"+ae.backdrop.replace("-480-480-270-270-crop-000000","-960-960-540-540-crop-000000").replace("-1920-1920-1080-1080-crop-000000","-960-960-540-540-crop-000000").replace("-1200-1200-675-657-crop-000000","-960-960-540-540-crop-000000")+".jpg";ts("#backdropimg").attr("src",Oe),ts("#favMovie").text(ae.name)}const g=(ae,Oe)=>{ts.ajax({dataType:"json",type:"get",url:`https://api.themoviedb.org/3/person/${Oe}?api_key=${Mm}`,success(Le){if(Le.profile_path){const J=`https://www.themoviedb.org/t/p/w235_and_h235_face${Le.profile_path}`;ts(`#top${ae}`).attr("src",J)}},error(Le){console.error("Error fetching profile image:",Le)}})};function m(ae){let Oe=ts("#"+ae).attr("src");Oe.includes(u)||(Oe=u+Oe,ts("#"+ae).attr("src",Oe))}function y(ae){f(ae.fav[l]),document.querySelectorAll('link[href*="Material+Symbols+Outlined"], link[href*="Material+Symbols+Rounded"]').forEach(Mt=>Mt.remove());var Le=document.documentElement.clientHeight/1280;const J=document.documentElement.clientWidth/720;J<Le&&(Le=J),ts("#wpcontainer").css("transform","scale("+Le+")"),ts("#wpcontainer").css("-moz-transform","scale("+Le+")"),ts("#wpcontainer").css("-webkit-transform","scale("+Le+")"),["Actor","Director"].forEach(Mt=>{const Ft=ae[Mt][0].tmdb;g(Mt,Ft)}),ts("#hideChangeBtn").click(function(){ts(".tohide").addClass("hide")}),ts("#btndownload").click(function(){ts(".tohide").addClass("hide"),ts("#loader").show();try{["backdropimg","topActor","topDirector"].forEach(Mt=>{m(Mt)}),YT(document.getElementById("wrapped"),{quality:.9,canvasWidth:1080,canvasHeight:1920,pixelRatio:1}).then(function(Mt){var Ft=document.createElement("a");Ft.download="collage.jpg",Ft.href=Mt,Ft.click(),ts(".tohide").removeClass("hide"),ts("#loader").hide()}).catch(function(){ts(".tohide").removeClass("hide"),ts("#loader").hide(),alert("Error! Please do a screenshot")})}catch{ts(".tohide").removeClass("hide"),ts("#loader").hide(),alert("Error! Please do a screenshot")}}),ts("#changeFilm").on("click",function(){l=l+1,l>=ae.fav.length&&(l=0),f(ae.fav[l])}),ts("#loader").hide(),ts(window).on("load",function(){})}async function k(){try{let ae=localStorage.getItem(e().toLowerCase()+"_"+a.toString()+"_wrapped");if(ae!==null&&ae!=="undefined"){console.log("Read Storage Stats Data"),Ve(i,await JSON.parse(ae),!0),Ve(r,void 0),Ve(s,!1);return}if(ae=localStorage.getItem(e().toLowerCase()),ae!==null&&ae!=="undefined"){console.log("Read Storage User Data"),Ve(o,JSON.parse(ae),!0);const Oe=Tt(o).watched.map(Le=>{const J=Le.d.filter(Mt=>new Date(Mt.date).getFullYear()===a);if(J.length>0)return{...Le,d:J}}).filter(Boolean);Ve(i,await h(Oe),!0),Ve(i,Tt(i)[0],!0),localStorage.setItem(e().toLowerCase()+"_"+a.toString()+"_wrapped",JSON.stringify(Tt(i))),Ve(r,void 0)}}catch(ae){console.log(ae),Ve(r,"There is an error, please contact me on <a href='https://t.me/giudimax' target='_blank'>telegram and send me your zip file</a><br/>")}}$l(async()=>{await k(),console.log(Tt(i)),Tt(i).runtime=Tt(i).tot[0].runtime,Tt(i).films=Tt(i).tot[0].films,Tt(i).countries=Tt(i).countries[0].value,Tt(i).theme=Tt(i).theme[0].name.replace("  "," "),y(Tt(i)),Ve(s,!1)});var C={get username(){return e()},set username(ae){e(ae),_n()},$set:Cr,$on:(ae,Oe)=>kr(t,ae,Oe)},S=wO(),$=pe(Ht(S),2),D=Ht($),R=pe(Ht(D),2),V=Ht(R),E=pe(Ht(V),2),q=Ht(E),X=pe(Ht(q),2),B=Ht(X);B.textContent="Wrapped 2025";var U=pe(B,2),K=Ht(U);Lt(U),Lt(X),Lt(q),Lt(E);var Y=pe(E,6),ct=Ht(Y),j=Ht(ct);j.textContent="FAVORITE 2025 FILM:",Lt(ct);var ht=pe(ct,4);Ps(ht,20,()=>["Actor","Director"],Fs,(ae,Oe)=>{var Le=yO(),J=Ht(Le),Mt=pe(Ht(J));{var Ft=Et=>{var de=Ub("Star");Ie(Et,de)},St=Et=>{var de=Ub();un(()=>nn(de,Oe)),Ie(Et,de)};En(Mt,Et=>{Oe==="Actor"?Et(Ft):Et(St,!1)})}Ys(),Lt(J);var ft=pe(J,2),zt=pe(ft,2);Ps(zt,17,()=>Tt(i)[Oe],Fs,(Et,de)=>{var Xt=vO(),be=Ht(Xt),Te=Ht(be,!0);Lt(be);var $e=pe(be,2),Pe=Ht($e);Lt($e),Lt(Xt),un(()=>{nn(Te,Tt(de).name),nn(Pe,`${Tt(de).sum??""} logs`)}),Ie(Et,Xt)}),Lt(Le),un(Et=>{rs(ft,"id",`top${Oe??""}`),rs(ft,"src",Et),rs(ft,"alt",`top${Oe}`)},[()=>`/images/${Oe.toLowerCase()}.jpg`]),Ie(ae,Le)}),Lt(ht);var It=pe(ht,2),yt=Ht(It),Ot=Ht(yt),Ct=Ht(Ot),Gt=Ht(Ct,!0);Lt(Ct),Ys(2),Lt(Ot);var vt=pe(Ot,2),at=Ht(vt),Pt=Ht(at,!0);Lt(at),Ys(2),Lt(vt);var jt=pe(vt,2),Ut=Ht(jt),me=Ht(Ut,!0);Lt(Ut),Ys(2),Lt(jt),Lt(yt);var Ee=pe(yt,2),le=Ht(Ee),ce=pe(Ht(le),2),De=Ht(ce,!0);return Lt(ce),Lt(le),Lt(Ee),Lt(It),Lt(Y),Lt(V),Lt(R),Lt(D),Lt($),Lt(S),un(()=>{nn(K,`letterboxd.com/${e()??""}`),nn(Gt,Tt(i).films),nn(Pt,Tt(i).runtime),nn(me,Tt(i).countries),nn(De,Tt(i).theme)}),Ie(n,S),lr(C)}var kO=Re('<div class="loaderContainer2"><div class="loader2"></div></div>'),CO=Re('<p class="errormsg message"><!></p>'),SO=Re("<main><!> <!></main>");function QT(n,t){if(new.target)return wr({component:QT,...n});ar(t,!0);let e=An(t,"username",7),s=An(t,"idx",7),i=qn(!0),r=qn(no({})),o=qn(no({})),a=qn("Error");var l=500;async function u($){return await(await fetch(nc+"stats",{method:"POST",body:JSON.stringify($)})).json()}async function h($,D=!1){return await(await fetch(nc+"donator?id="+$)).json()}async function f($,D=!1,R=0){let V=nc+"donator?session="+$+"&offset="+R;return D&&(V+="&diary"),await(await fetch(V)).json()}$l(async()=>{const $=localStorage.getItem("latest");$!=null&&$!=="undefined"&&$.toLowerCase()===e().toLowerCase()&&(window.location.search="?username="+$.toLowerCase());try{const D=await h(s()),R=D.id,V=D.diary,E=D.watches,q=D.session;let X=[],B=[];const U=Array.from({length:Math.ceil(E/l)},(ht,It)=>f(q,!1,It)),K=Array.from({length:Math.ceil(V/l)},(ht,It)=>f(q,!0,It)),[Y,ct]=await Promise.all([Promise.all(U),Promise.all(K)]);Y.forEach(ht=>{X=X.concat(ht.watched||[])}),ct.forEach(ht=>{B=B.concat(ht.diary||[])}),Tt(o).watched=X.map(ht=>{const It=B.filter(yt=>yt._id===ht._id).map(yt=>({date:yt.date,rewatch:yt.rewatch,review:yt.review}));return{_id:ht._id,r:ht.r,d:It}});const j=Tt(o).watched.filter(ht=>"r"in ht);Tt(o).username=e().toLowerCase(),Tt(o).name=e(),Tt(o).ru=j.length>50,Tt(o).update=new Date,Tt(o).update=Tt(o).update.toString().split("T")[0],Ve(r,await u(Tt(o)),!0),Tt(r).username=e().toLowerCase(),Tt(r).name=Tt(o).name,Tt(r).ru=Tt(o).ru,Tt(r).update=Tt(o).update,Tt(o).yearsStats=Tt(r).yearsStats,Tt(r).donator=!0,localStorage.setItem(e().toLowerCase(),JSON.stringify(Tt(o))),localStorage.setItem(e().toLowerCase()+"_stats",JSON.stringify(Tt(r))),localStorage.setItem("latest",e().toLowerCase()),window.location.search="?username="+e().toLowerCase(),Ve(a,"")}catch{Ve(a,"Error, make sure you are a supporter and contact the developer")}Ve(i,!1)});var g={get username(){return e()},set username($){e($),_n()},get idx(){return s()},set idx($){s($),_n()},$set:Cr,$on:($,D)=>kr(t,$,D)},m=SO(),y=Ht(m);{var k=$=>{var D=kO();Ie($,D)};En(y,$=>{Tt(i)&&$(k)})}var C=pe(y,2);{var S=$=>{var D=CO(),R=Ht(D);Gv(R,()=>Tt(a)),Lt(D),Ie($,D)};En(C,$=>{Tt(a)!==""&&$(S)})}return Lt(m),Ie(n,m),lr(g)}const TO=1e-7,IO=1e-4;class tI{constructor(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,e){this.dataIdsCount++,this.data.set(t,e)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class Jv{refCount(t){return bo("refCount")}incRef(t){return bo("incRef")}timerAvailable(){return!0}time(t){return bo("time")}read(t){return bo("read")}readSync(t){return bo("readSync")}readToGPU(t,e){return bo("readToGPU")}numDataIds(){return bo("numDataIds")}disposeData(t,e){return bo("disposeData")}write(t,e,s){return bo("write")}move(t,e,s,i,r){return bo("move")}createTensorFromGPUData(t,e,s){return bo("createTensorFromGPUData")}memory(){return bo("memory")}floatPrecision(){return bo("floatPrecision")}epsilon(){return this.floatPrecision()===32?TO:IO}dispose(){return bo("dispose")}}function bo(n){throw new Error(`'${n}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function EO(n){let t=n.length,e=0;for(;t>0;)e=Math.random()*t|0,t--,Id(n,t,e)}function Qv(n,t,e){return Math.max(n,Math.min(t,e))}function ty(n){return n%2===0?n:n+1}function Id(n,t,e){const s=n[t];n[t]=n[e],n[e]=s}function _O(n){let t=0;for(let e=0;e<n.length;e++)t+=n[e];return t}function wt(n,t){if(!n)throw new Error(typeof t=="string"?t:t())}function ey(n,t,e=""){wt(zs(n,t),()=>e+` Shapes ${n} and ${t} must match`)}function eI(n){wt(n!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Ce(n){if(n.length===0)return 1;let t=n[0];for(let e=1;e<n.length;e++)t*=n[e];return t}function zs(n,t){if(n===t)return!0;if(n==null||t==null||n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}function zd(n){return n%1===0}function Kb(n){const t=Math.ceil(Math.sqrt(n));return[t,Math.ceil(n/t)]}function Nd(n,t){return t<=n.length?n:n+" ".repeat(t-n.length)}function D4(n,t=i=>0,e,s){return new Promise((i,r)=>{let o=0;const a=()=>{if(n()){i();return}o++;const l=t(o);if(e!=null&&o>=e){r();return}s!=null?s(a,l):setTimeout(a,l)};a()})}function nI(n,t){let e=1,s=-1;for(let r=0;r<n.length;++r)if(n[r]>=0)e*=n[r];else if(n[r]===-1){if(s!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${s} and dim ${r}`);s=r}else if(n[r]<0)throw Error(`Shapes can not be < 0. Found ${n[r]} at dim ${r}`);if(s===-1){if(t>0&&t!==e)throw Error(`Size(${t}) must match the product of shape ${n}`);return n}if(e===0)throw Error(`Cannot infer the missing size in [${n}] when there are 0 elements`);if(t%e!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${e}`);const i=n.slice();return i[s]=t/e,i}function ds(n,t){const e=t.length;return n=n==null?t.map((s,i)=>i):[].concat(n),wt(n.every(s=>s>=-e&&s<e),()=>`All values in axis param must be in range [-${e}, ${e}) but got axis ${n}`),wt(n.every(s=>zd(s)),()=>`All values in axis param must be integers but got axis ${n}`),n.map(s=>s<0?e+s:s)}function au(n,t){const e=[],s=[],i=t!=null&&Array.isArray(t)&&t.length===0,r=t==null||i?null:ds(t,n).sort();let o=0;for(let a=0;a<n.length;++a){if(r!=null){if(r[o]===a&&n[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${n[a]}' is not 1`);(r[o]==null||r[o]>a)&&n[a]===1&&(e.push(n[a]),s.push(a)),r[o]<=a&&o++}n[a]!==1&&(e.push(n[a]),s.push(a))}return{newShape:e,keptDims:s}}function br(n,t){return Ti(n,t)}function Ti(n,t){let e=null;if(n==null||n==="float32")e=new Float32Array(t);else if(n==="int32")e=new Int32Array(t);else if(n==="bool")e=new Uint8Array(t);else if(n==="string")e=new Array(t);else throw new Error(`Unknown data type ${n}`);return e}function AO(n,t){for(let e=0;e<n.length;e++){const s=n[e];if(isNaN(s)||!isFinite(s))throw Error(`A tensor of type ${t} being uploaded contains ${s}.`)}}function $O(n){return n==="bool"||n==="complex64"||n==="float32"||n==="int32"||n==="string"}function sI(n,t){return!(t==="complex64"||t==="float32"&&n!=="complex64"||t==="int32"&&n!=="float32"&&n!=="complex64"||t==="bool"&&n==="bool")}function zm(n){if(n==="float32"||n==="int32")return 4;if(n==="complex64")return 8;if(n==="bool")return 1;throw new Error(`Unknown dtype ${n}`)}function NO(n){if(n==null)return 0;let t=0;return n.forEach(e=>t+=e.length),t}function Gp(n){return typeof n=="string"||n instanceof String}function DO(n){return typeof n=="boolean"}function Yb(n){return typeof n=="number"}function nf(n){return Array.isArray(n)?nf(n[0]):n instanceof Float32Array?"float32":n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray?"int32":Yb(n)?"float32":Gp(n)?"string":DO(n)?"bool":"float32"}function Zb(n){return!!(n&&n.constructor&&n.call&&n.apply)}function Jb(n,t){for(let e=t;e<n;++e)if(n%e===0)return e;return n}function Dn(n){const t=n.length;if(t<2)return[];const e=new Array(t-1);e[t-2]=n[t-1];for(let s=t-3;s>=0;--s)e[s]=e[s+1]*n[s+1];return e}function iI(n,t,e,s=!1){const i=new Array;if(t.length===1){const r=t[0]*(s?2:1);for(let o=0;o<r;o++)i[o]=e[n+o]}else{const r=t[0],o=t.slice(1),a=o.reduce((l,u)=>l*u)*(s?2:1);for(let l=0;l<r;l++)i[l]=iI(n+l*a,o,e,s)}return i}function Ga(n,t,e=!1){if(n.length===0)return t[0];const s=n.reduce((i,r)=>i*r)*(e?2:1);if(s===0)return[];if(s!==t.length)throw new Error(`[${n}] does not match the input size ${t.length}${e?" for a complex tensor":""}.`);return iI(0,n,t,e)}function RO(n,t){if(Array.isArray(n))return n;if(t==="float32")return n instanceof Float32Array?n:new Float32Array(n);if(t==="int32")return n instanceof Int32Array?n:new Int32Array(n);if(t==="bool"||t==="string")return Uint8Array.from(new Int32Array(n));throw new Error(`Unknown dtype ${t}`)}function ny(n,t){const e=vr(n,t);for(let s=0;s<e.length;s++)e[s]=1;return e}function vr(n,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(n);if(t==="int32")return new Int32Array(n);if(t==="bool")return new Uint8Array(n);throw new Error(`Unknown data type ${t}`)}function rI(n,t){const e=n.reduce((s,i)=>s*i,1);if(t==null||t==="float32")return Ga(n,new Float32Array(e));if(t==="int32")return Ga(n,new Int32Array(e));if(t==="bool")return Ga(n,new Uint8Array(e));throw new Error(`Unknown data type ${t}`)}function uc(n){n.forEach(t=>{wt(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${n}].`)})}function xl(n,t,e){if(t===0)return 0;if(t===1)return n[0];let s=n[n.length-1];for(let i=0;i<n.length-1;++i)s+=e[i]*n[i];return s}function sf(n,t,e){if(t===0)return[];if(t===1)return[n];const s=new Array(t);for(let i=0;i<s.length-1;++i)s[i]=Math.floor(n/e[i]),n-=s[i]*e[i];return s[s.length-1]=n,s}function sy(n){return n&&n.then&&typeof n.then=="function"}const R4="tfjsflags";class MO{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=OO,this.populateURLFlags()}setPlatform(t,e){this.platform!=null&&(ge().getBool("IS_TEST")||ge().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`)),this.platformName=t,this.platform=e}registerFlag(t,e,s){if(this.flagRegistry[t]={evaluationFn:e,setHook:s},this.urlFlags[t]!=null){const i=this.urlFlags[t];ge().getBool("IS_TEST")||ge().getBool("PROD")||console.warn(`Setting feature override from URL ${t}: ${i}.`),this.set(t,i)}}async getAsync(t){return t in this.flags?this.flags[t]:(this.flags[t]=await this.evaluateFlag(t),this.flags[t])}get(t){if(t in this.flags)return this.flags[t];const e=this.evaluateFlag(t);if(sy(e))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=e,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getString(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,e){if(this.flagRegistry[t]==null)throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=e,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(e)}evaluateFlag(t){if(this.flagRegistry[t]==null)throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const t=this.getQueryParams(this.global.location.search);R4 in t&&t[R4].split(",").forEach(s=>{const[i,r]=s.split(":");this.urlFlags[i]=PO(i,r)})}}function OO(n){const t={};return n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(e,...s)=>(FO(t,s[0],s[1]),s.join("="))),t}function FO(n,t,e){n[decodeURIComponent(t)]=decodeURIComponent(e||"")}function PO(n,t){const e=t.toLowerCase();return e==="true"||e==="false"?e==="true":`${+e}`===e?+e:t}function ge(){return oI}let oI=null;function LO(n){oI=n}let pb;function aI(){if(pb==null){let n;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else if(typeof self<"u")n=self;else throw new Error("Could not find a global object");pb=n}return pb}function BO(){const n=aI();return n._tfGlobals==null&&(n._tfGlobals=new Map),n._tfGlobals}function iy(n,t){const e=BO();if(e.has(n))return e.get(n);{const s=t();return e.set(n,s),e.get(n)}}const T1="Abs",Hp="Acos",jp="Acosh",rf="Add",ry="AddN",oy="All",ay="Any",I1="ArgMax",E1="ArgMin",Xp="Asin",qp="Asinh",Kp="Atan",Yp="Atanh",Zp="Atan2",_1="AvgPool",ly="AvgPoolGrad",A1="AvgPool3D",cy="AvgPool3DGrad",$1="BatchMatMul",N1="BatchToSpaceND",uy="Bincount",hy="BitwiseAnd",zO="BroadcastTo",lI="BroadcastArgs",Jp="Cast",Qp="Ceil",t0="ClipByValue",dy="Complex",D1="ComplexAbs",R1="Concat",M1="Conv2D",fy="Conv2DBackpropFilter",O1="Conv2DBackpropInput",F1="Conv3D",py="Conv3DBackpropFilterV2",gy="Conv3DBackpropInputV2",e0="Cos",n0="Cosh",my="Cumprod",P1="Cumsum",xy="CropAndResize",by="DenseBincount",vy="DepthToSpace",L1="DepthwiseConv2dNative",yy="DepthwiseConv2dNativeBackpropFilter",wy="DepthwiseConv2dNativeBackpropInput",cI="Diag",B1="Dilation2D",Qb="Dilation2DBackpropInput",tv="Dilation2DBackpropFilter",WO="Draw",s0="RealDiv",ky="Einsum",i0="Elu",Cy="EluGrad",r0="Erf",z1="Equal",o0="Exp",W1="ExpandDims",a0="Expm1",Sy="FFT",Ty="Fill",Iy="FlipLeftRight",l0="Floor",c0="FloorDiv",V1="FusedBatchNorm",U1="GatherV2",uI="GatherNd",G1="Greater",u0="GreaterEqual",h0="Identity",Ey="IFFT",_y="Imag",d0="IsFinite",f0="IsInf",p0="IsNan",H1="LeakyRelu",j1="Less",X1="LessEqual",hI="LinSpace",g0="Log",m0="Log1p",q1="LogicalAnd",K1="LogicalNot",Y1="LogicalOr",VO="LogSoftmax",Z1="LRN",Ay="LRNGrad",J1="Max",x0="Maximum",Q1="MaxPool",$y="MaxPoolGrad",t2="MaxPool3D",Ny="MaxPool3DGrad",dI="MaxPoolWithArgmax",e2="Mean",n2="Min",b0="Minimum",s2="MirrorPad",v0="Mod",fI="Multinomial",y0="Multiply",i2="Neg",r2="NotEqual",Dy="NonMaxSuppressionV3",Ry="NonMaxSuppressionV4",My="NonMaxSuppressionV5",o2="OnesLike",a2="OneHot",l2="Pack",c2="PadV2",w0="Pow",u2="Prelu",h2="Prod",pI="RaggedGather",gI="RaggedRange",mI="RaggedTensorToTensor",Oy="Range",Fy="Real",k0="Reciprocal",C0="Relu",d2="Reshape",f2="ResizeNearestNeighbor",Py="ResizeNearestNeighborGrad",p2="ResizeBilinear",Ly="ResizeBilinearGrad",S0="Relu6",g2="Reverse",T0="Round",I0="Rsqrt",xI="ScatterNd",bI="TensorScatterUpdate",vI="SearchSorted",m2="Select",E0="Selu",x2="Slice",_0="Sin",A0="Sinh",$0="Sign",N0="Sigmoid",D0="Softplus",R0="Sqrt",b2="Sum",v2="SpaceToBatchND",y2="SplitV",w2="Softmax",yI="SparseFillEmptyRows",wI="SparseReshape",kI="SparseSegmentMean",CI="SparseSegmentSum",SI="SparseToDense",M0="SquaredDifference",By="Square",zy="StaticRegexReplace",Wy="StridedSlice",TI="StringNGrams",II="StringSplit",EI="StringToHashBucketFast",O0="Sub",F0="Tan",P0="Tanh",L0="Tile",Vy="TopK",Uy="Transform",Dd="Transpose",Gy="Unique",k2="Unpack",C2="UnsortedSegmentSum",S2="ZerosLike",B0="Step",UO="FromPixels",Hy="RotateWithOffset",Wm="_FusedMatMul",Vm="FusedConv2D",_I="FusedDepthwiseConv2D";function Uo(...n){ge().getBool("IS_TEST")||ge().getBool("PROD")||console.warn(...n)}const Um=iy("kernelRegistry",()=>new Map),ev=iy("gradRegistry",()=>new Map);function M4(n,t){const e=$I(n,t);return Um.get(e)}function O4(n){return ev.get(n)}function F4(n){const t=Um.entries(),e=[];for(;;){const{done:s,value:i}=t.next();if(s)break;const[r,o]=i,[a]=r.split("_");a===n&&e.push(o)}return e}function AI(n){const{kernelName:t,backendName:e}=n,s=$I(t,e);Um.has(s)&&Uo(`The kernel '${t}' for backend '${e}' is already registered`),Um.set(s,n)}function GO(n){const{kernelName:t}=n;ev.has(t)&&ge().getBool("DEBUG")&&Uo(`Overriding the gradient for '${t}'`),ev.set(t,n)}function $I(n,t){return`${t}_${n}`}function NI(n){return n instanceof Float32Array||n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray}var gb,P4;function HO(){if(P4)return gb;P4=1,gb=t;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function t(U,K,Y){this.low=U|0,this.high=K|0,this.unsigned=!!Y}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0});function e(U){return(U&&U.__isLong__)===!0}t.isLong=e;var s={},i={};function r(U,K){var Y,ct,j;return K?(U>>>=0,(j=0<=U&&U<256)&&(ct=i[U],ct)?ct:(Y=a(U,(U|0)<0?-1:0,!0),j&&(i[U]=Y),Y)):(U|=0,(j=-128<=U&&U<128)&&(ct=s[U],ct)?ct:(Y=a(U,U<0?-1:0,!1),j&&(s[U]=Y),Y))}t.fromInt=r;function o(U,K){if(isNaN(U))return K?$:S;if(K){if(U<0)return $;if(U>=y)return q}else{if(U<=-k)return X;if(U+1>=k)return E}return U<0?o(-U,K).neg():a(U%m|0,U/m|0,K)}t.fromNumber=o;function a(U,K,Y){return new t(U,K,Y)}t.fromBits=a;var l=Math.pow;function u(U,K,Y){if(U.length===0)throw Error("empty string");if(U==="NaN"||U==="Infinity"||U==="+Infinity"||U==="-Infinity")return S;if(typeof K=="number"?(Y=K,K=!1):K=!!K,Y=Y||10,Y<2||36<Y)throw RangeError("radix");var ct;if((ct=U.indexOf("-"))>0)throw Error("interior hyphen");if(ct===0)return u(U.substring(1),K,Y).neg();for(var j=o(l(Y,8)),ht=S,It=0;It<U.length;It+=8){var yt=Math.min(8,U.length-It),Ot=parseInt(U.substring(It,It+yt),Y);if(yt<8){var Ct=o(l(Y,yt));ht=ht.mul(Ct).add(o(Ot))}else ht=ht.mul(j),ht=ht.add(o(Ot))}return ht.unsigned=K,ht}t.fromString=u;function h(U,K){return typeof U=="number"?o(U,K):typeof U=="string"?u(U,K):a(U.low,U.high,typeof K=="boolean"?K:U.unsigned)}t.fromValue=h;var f=65536,g=1<<24,m=f*f,y=m*m,k=y/2,C=r(g),S=r(0);t.ZERO=S;var $=r(0,!0);t.UZERO=$;var D=r(1);t.ONE=D;var R=r(1,!0);t.UONE=R;var V=r(-1);t.NEG_ONE=V;var E=a(-1,2147483647,!1);t.MAX_VALUE=E;var q=a(-1,-1,!0);t.MAX_UNSIGNED_VALUE=q;var X=a(0,-2147483648,!1);t.MIN_VALUE=X;var B=t.prototype;return B.toInt=function(){return this.unsigned?this.low>>>0:this.low},B.toNumber=function(){return this.unsigned?(this.high>>>0)*m+(this.low>>>0):this.high*m+(this.low>>>0)},B.toString=function(K){if(K=K||10,K<2||36<K)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(X)){var Y=o(K),ct=this.div(Y),j=ct.mul(Y).sub(this);return ct.toString(K)+j.toInt().toString(K)}else return"-"+this.neg().toString(K);for(var ht=o(l(K,6),this.unsigned),It=this,yt="";;){var Ot=It.div(ht),Ct=It.sub(Ot.mul(ht)).toInt()>>>0,Gt=Ct.toString(K);if(It=Ot,It.isZero())return Gt+yt;for(;Gt.length<6;)Gt="0"+Gt;yt=""+Gt+yt}},B.getHighBits=function(){return this.high},B.getHighBitsUnsigned=function(){return this.high>>>0},B.getLowBits=function(){return this.low},B.getLowBitsUnsigned=function(){return this.low>>>0},B.getNumBitsAbs=function(){if(this.isNegative())return this.eq(X)?64:this.neg().getNumBitsAbs();for(var K=this.high!=0?this.high:this.low,Y=31;Y>0&&(K&1<<Y)==0;Y--);return this.high!=0?Y+33:Y+1},B.isZero=function(){return this.high===0&&this.low===0},B.eqz=B.isZero,B.isNegative=function(){return!this.unsigned&&this.high<0},B.isPositive=function(){return this.unsigned||this.high>=0},B.isOdd=function(){return(this.low&1)===1},B.isEven=function(){return(this.low&1)===0},B.equals=function(K){return e(K)||(K=h(K)),this.unsigned!==K.unsigned&&this.high>>>31===1&&K.high>>>31===1?!1:this.high===K.high&&this.low===K.low},B.eq=B.equals,B.notEquals=function(K){return!this.eq(K)},B.neq=B.notEquals,B.ne=B.notEquals,B.lessThan=function(K){return this.comp(K)<0},B.lt=B.lessThan,B.lessThanOrEqual=function(K){return this.comp(K)<=0},B.lte=B.lessThanOrEqual,B.le=B.lessThanOrEqual,B.greaterThan=function(K){return this.comp(K)>0},B.gt=B.greaterThan,B.greaterThanOrEqual=function(K){return this.comp(K)>=0},B.gte=B.greaterThanOrEqual,B.ge=B.greaterThanOrEqual,B.compare=function(K){if(e(K)||(K=h(K)),this.eq(K))return 0;var Y=this.isNegative(),ct=K.isNegative();return Y&&!ct?-1:!Y&&ct?1:this.unsigned?K.high>>>0>this.high>>>0||K.high===this.high&&K.low>>>0>this.low>>>0?-1:1:this.sub(K).isNegative()?-1:1},B.comp=B.compare,B.negate=function(){return!this.unsigned&&this.eq(X)?X:this.not().add(D)},B.neg=B.negate,B.add=function(K){e(K)||(K=h(K));var Y=this.high>>>16,ct=this.high&65535,j=this.low>>>16,ht=this.low&65535,It=K.high>>>16,yt=K.high&65535,Ot=K.low>>>16,Ct=K.low&65535,Gt=0,vt=0,at=0,Pt=0;return Pt+=ht+Ct,at+=Pt>>>16,Pt&=65535,at+=j+Ot,vt+=at>>>16,at&=65535,vt+=ct+yt,Gt+=vt>>>16,vt&=65535,Gt+=Y+It,Gt&=65535,a(at<<16|Pt,Gt<<16|vt,this.unsigned)},B.subtract=function(K){return e(K)||(K=h(K)),this.add(K.neg())},B.sub=B.subtract,B.multiply=function(K){if(this.isZero())return S;if(e(K)||(K=h(K)),n){var Y=n.mul(this.low,this.high,K.low,K.high);return a(Y,n.get_high(),this.unsigned)}if(K.isZero())return S;if(this.eq(X))return K.isOdd()?X:S;if(K.eq(X))return this.isOdd()?X:S;if(this.isNegative())return K.isNegative()?this.neg().mul(K.neg()):this.neg().mul(K).neg();if(K.isNegative())return this.mul(K.neg()).neg();if(this.lt(C)&&K.lt(C))return o(this.toNumber()*K.toNumber(),this.unsigned);var ct=this.high>>>16,j=this.high&65535,ht=this.low>>>16,It=this.low&65535,yt=K.high>>>16,Ot=K.high&65535,Ct=K.low>>>16,Gt=K.low&65535,vt=0,at=0,Pt=0,jt=0;return jt+=It*Gt,Pt+=jt>>>16,jt&=65535,Pt+=ht*Gt,at+=Pt>>>16,Pt&=65535,Pt+=It*Ct,at+=Pt>>>16,Pt&=65535,at+=j*Gt,vt+=at>>>16,at&=65535,at+=ht*Ct,vt+=at>>>16,at&=65535,at+=It*Ot,vt+=at>>>16,at&=65535,vt+=ct*Gt+j*Ct+ht*Ot+It*yt,vt&=65535,a(Pt<<16|jt,vt<<16|at,this.unsigned)},B.mul=B.multiply,B.divide=function(K){if(e(K)||(K=h(K)),K.isZero())throw Error("division by zero");if(n){if(!this.unsigned&&this.high===-2147483648&&K.low===-1&&K.high===-1)return this;var Y=(this.unsigned?n.div_u:n.div_s)(this.low,this.high,K.low,K.high);return a(Y,n.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?$:S;var ct,j,ht;if(this.unsigned){if(K.unsigned||(K=K.toUnsigned()),K.gt(this))return $;if(K.gt(this.shru(1)))return R;ht=$}else{if(this.eq(X)){if(K.eq(D)||K.eq(V))return X;if(K.eq(X))return D;var It=this.shr(1);return ct=It.div(K).shl(1),ct.eq(S)?K.isNegative()?D:V:(j=this.sub(K.mul(ct)),ht=ct.add(j.div(K)),ht)}else if(K.eq(X))return this.unsigned?$:S;if(this.isNegative())return K.isNegative()?this.neg().div(K.neg()):this.neg().div(K).neg();if(K.isNegative())return this.div(K.neg()).neg();ht=S}for(j=this;j.gte(K);){ct=Math.max(1,Math.floor(j.toNumber()/K.toNumber()));for(var yt=Math.ceil(Math.log(ct)/Math.LN2),Ot=yt<=48?1:l(2,yt-48),Ct=o(ct),Gt=Ct.mul(K);Gt.isNegative()||Gt.gt(j);)ct-=Ot,Ct=o(ct,this.unsigned),Gt=Ct.mul(K);Ct.isZero()&&(Ct=D),ht=ht.add(Ct),j=j.sub(Gt)}return ht},B.div=B.divide,B.modulo=function(K){if(e(K)||(K=h(K)),n){var Y=(this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,K.low,K.high);return a(Y,n.get_high(),this.unsigned)}return this.sub(this.div(K).mul(K))},B.mod=B.modulo,B.rem=B.modulo,B.not=function(){return a(~this.low,~this.high,this.unsigned)},B.and=function(K){return e(K)||(K=h(K)),a(this.low&K.low,this.high&K.high,this.unsigned)},B.or=function(K){return e(K)||(K=h(K)),a(this.low|K.low,this.high|K.high,this.unsigned)},B.xor=function(K){return e(K)||(K=h(K)),a(this.low^K.low,this.high^K.high,this.unsigned)},B.shiftLeft=function(K){return e(K)&&(K=K.toInt()),(K&=63)===0?this:K<32?a(this.low<<K,this.high<<K|this.low>>>32-K,this.unsigned):a(0,this.low<<K-32,this.unsigned)},B.shl=B.shiftLeft,B.shiftRight=function(K){return e(K)&&(K=K.toInt()),(K&=63)===0?this:K<32?a(this.low>>>K|this.high<<32-K,this.high>>K,this.unsigned):a(this.high>>K-32,this.high>=0?0:-1,this.unsigned)},B.shr=B.shiftRight,B.shiftRightUnsigned=function(K){if(e(K)&&(K=K.toInt()),K&=63,K===0)return this;var Y=this.high;if(K<32){var ct=this.low;return a(ct>>>K|Y<<32-K,Y>>>K,this.unsigned)}else return K===32?a(Y,0,this.unsigned):a(Y>>>K-32,0,this.unsigned)},B.shru=B.shiftRightUnsigned,B.shr_u=B.shiftRightUnsigned,B.toSigned=function(){return this.unsigned?a(this.low,this.high,!1):this},B.toUnsigned=function(){return this.unsigned?this:a(this.low,this.high,!0)},B.toBytes=function(K){return K?this.toBytesLE():this.toBytesBE()},B.toBytesLE=function(){var K=this.high,Y=this.low;return[Y&255,Y>>>8&255,Y>>>16&255,Y>>>24,K&255,K>>>8&255,K>>>16&255,K>>>24]},B.toBytesBE=function(){var K=this.high,Y=this.low;return[K>>>24,K>>>16&255,K>>>8&255,K&255,Y>>>24,Y>>>16&255,Y>>>8&255,Y&255]},t.fromBytes=function(K,Y,ct){return ct?t.fromBytesLE(K,Y):t.fromBytesBE(K,Y)},t.fromBytesLE=function(K,Y){return new t(K[0]|K[1]<<8|K[2]<<16|K[3]<<24,K[4]|K[5]<<8|K[6]<<16|K[7]<<24,Y)},t.fromBytesBE=function(K,Y){return new t(K[4]<<24|K[5]<<16|K[6]<<8|K[7],K[0]<<24|K[1]<<16|K[2]<<8|K[3],Y)},gb}var DI=HO();const RI=Vp(DI),jO=nD({__proto__:null,default:RI},[DI]);const ih=RI||jO;function T2(n){return ih.fromString(n,!0,16)}const MI=T2("c3a5c85c97cb3127"),sh=T2("b492b66fbe98f273"),Pr=T2("9ae16a3b2f90404f");function nv(n){return n.xor(n.shru(47))}function OI(n,t,e){const s=n.slice(t,t+e);return ih.fromBytes(Array.from(s),!0,!0)}function ni(n,t){return OI(n,t,8)}function L4(n,t){return OI(n,t,4)}function Yi(n,t){return t===0?n:n.shru(t).or(n.shl(64-t))}function Kc(n,t,e=T2("9ddfea08eb382d69")){let s=n.xor(t).mul(e);s=s.xor(s.shru(47));let i=t.xor(s).mul(e);return i=i.xor(i.shru(47)),i=i.mul(e),i}function XO(n,t,e,s,i,r){i=i.add(n),r=Yi(r.add(i).add(s),21);const o=i;return i=i.add(t),i=i.add(e),r=r.add(Yi(i,44)),[i.add(s),r.add(o)]}function sm(n,t,e,s){return XO(ni(n,t),ni(n,t+8),ni(n,t+16),ni(n,t+24),e,s)}function qO(n,t=n.length){if(t>=8){const e=Pr.add(t*2),s=ni(n,0).add(Pr),i=ni(n,t-8),r=Yi(i,37).mul(e).add(s),o=Yi(s,25).add(i).mul(e);return Kc(r,o,e)}if(t>=4){const e=Pr.add(t*2),s=L4(n,0);return Kc(s.shl(3).add(t),L4(n,t-4),e)}if(t>0){const e=n[0],s=n[t>>1],i=n[t-1],r=e+(s<<8),o=t+(i<<2);return nv(Pr.mul(r).xor(MI.mul(o))).mul(Pr)}return Pr}function KO(n,t=n.length){const e=Pr.add(t*2),s=ni(n,0).mul(sh),i=ni(n,8),r=ni(n,t-8).mul(e),o=ni(n,t-16).mul(Pr);return Kc(Yi(s.add(i),43).add(Yi(r,30)).add(o),s.add(Yi(i.add(Pr),18)).add(r),e)}function YO(n,t=n.length){const e=Pr.add(t*2),s=ni(n,0).mul(Pr),i=ni(n,8),r=ni(n,t-8).mul(e),o=ni(n,t-16).mul(Pr),a=Yi(s.add(i),43).add(Yi(r,30)).add(o),l=Kc(a,s.add(Yi(i.add(Pr),18)).add(r),e),u=ni(n,16).mul(e),h=ni(n,24),f=a.add(ni(n,t-32)).mul(e),g=l.add(ni(n,t-24)).mul(e);return Kc(Yi(u.add(h),43).add(Yi(f,30)).add(g),u.add(Yi(h.add(s),18)).add(f),e)}function ZO(n,t=n.length){const e=ih.fromNumber(81,!0);if(t<=32)return t<=16?qO(n,t):KO(n,t);if(t<=64)return YO(n,t);let s=e,i=e.mul(sh).add(113),r=nv(i.mul(Pr).add(113)).mul(Pr),o=[ih.UZERO,ih.UZERO],a=[ih.UZERO,ih.UZERO];s=s.mul(Pr).add(ni(n,0));let l=0;const u=(t-1>>6)*64,h=u+(t-1&63)-63;do s=Yi(s.add(i).add(o[0]).add(ni(n,l+8)),37).mul(sh),i=Yi(i.add(o[1]).add(ni(n,l+48)),42).mul(sh),s=s.xor(a[1]),i=i.add(o[0]).add(ni(n,l+40)),r=Yi(r.add(a[0]),33).mul(sh),o=sm(n,l,o[1].mul(sh),s.add(a[0])),a=sm(n,l+32,r.add(a[1]),i.add(ni(n,l+16))),[r,s]=[s,r],l+=64;while(l!==u);const f=sh.add(r.and(255).shl(1));return l=h,a[0]=a[0].add(t-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),s=Yi(s.add(i).add(o[0]).add(ni(n,l+8)),37).mul(f),i=Yi(i.add(o[1]).add(ni(n,l+48)),42).mul(f),s=s.xor(a[1].mul(9)),i=i.add(o[0].mul(9).add(ni(n,l+40))),r=Yi(r.add(a[0]),33).mul(f),o=sm(n,l,o[1].mul(f),s.add(a[0])),a=sm(n,l+32,r.add(a[1]),i.add(ni(n,l+16))),[r,s]=[s,r],Kc(Kc(o[0],a[0],f).add(nv(i).mul(MI)).add(r),Kc(o[1],a[1],f).add(s),f)}function lu(n,t){return t==="string"?Yc(n):Fh([n],t)}function JO(n,t){return n instanceof Float32Array&&t==="float32"||n instanceof Int32Array&&t==="int32"||n instanceof Uint8Array&&t==="bool"}function Fh(n,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(n)&&(n=wh(n)),ge().getBool("DEBUG")&&AO(n,t),JO(n,t))return n;if(t==null||t==="float32"||t==="complex64")return new Float32Array(n);if(t==="int32")return new Int32Array(n);if(t==="bool"){const e=new Uint8Array(n.length);for(let s=0;s<e.length;++s)Math.round(n[s])!==0&&(e[s]=1);return e}else throw new Error(`Unknown data type ${t}`)}function Qr(){return ge().platform.now()}function Yc(n,t="utf-8"){return t=t||"utf-8",ge().platform.encode(n,t)}function eu(n,t="utf-8"){return t=t||"utf-8",ge().platform.decode(n,t)}function fa(n){return ge().platform.isTypedArray!=null?ge().platform.isTypedArray(n):NI(n)}function wh(n,t=[],e=!1){if(t==null&&(t=[]),typeof n=="boolean"||typeof n=="number"||typeof n=="string"||sy(n)||n==null||fa(n)&&e)t.push(n);else if(Array.isArray(n)||fa(n))for(let s=0;s<n.length;++s)wh(n[s],t,e);else{let s=-1;for(const i of Object.keys(n))/^([1-9]+[0-9]*|0)$/.test(i)&&(s=Math.max(s,Number(i)));for(let i=0;i<=s;i++)wh(n[i],t,e)}return t}class QO{constructor(t,e){this.backendTimer=t,this.logger=e,e==null&&(this.logger=new eF)}profileKernel(t,e,s){let i;const r=()=>{i=s()};let o;const a=Qr();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(r);else{r();for(const u of i)u.dataSync();o=Promise.resolve({kernelMs:Qr()-a})}if(ge().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<i.length;u++){const h=i[u];h.data().then(f=>{tF(f,h.dtype,t)})}return{kernelName:t,outputs:i,inputs:e,timeMs:o.then(u=>u.kernelMs),extraInfo:o.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(t){const{kernelName:e,outputs:s,timeMs:i,inputs:r,extraInfo:o}=t;s.forEach(a=>{Promise.all([a.data(),i,o]).then(l=>{this.logger.logKernelProfile(e,a,l[0],l[1],r,l[2])})})}}function tF(n,t,e){if(t!=="float32")return!1;for(let s=0;s<n.length;s++){const i=n[s];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${e}'`),!0}return!1}class eF{logKernelProfile(t,e,s,i,r,o){const a=typeof i=="number"?Nd(`${i}ms`,9):i.error,l=Nd(t,25),u=e.rank,h=e.size,f=Nd(e.shape.toString(),14);let g="";for(const m in r){const y=r[m];if(y!=null){const k=y.shape||e.shape,C=k.length;g+=`${m}: ${C}D ${C>0?k:""} `}}console.log(`%c${l}	%c${a}	%c${u}D ${f}	%c${h}	%c${g}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}function nF(n,t,e){const s={},i={};for(let l=0;l<t.length;l++)s[t[l].id]=!0;for(let l=0;l<n.length;l++){const u=n[l],h=u.inputs;for(const f in h){const g=h[f];let m=!1;for(let y=0;y<t.length;y++)if(s[g.id]){u.outputs.forEach(k=>s[k.id]=!0),m=!0,i[u.id]=!0;break}if(m)break}}const r={};r[e.id]=!0;const o={};for(let l=n.length-1;l>=0;l--){const u=n[l],h=u.inputs;for(let f=0;f<u.outputs.length;f++)if(r[u.outputs[f].id]){for(const g in h)r[h[g].id]=!0,o[u.id]=!0;break}}const a=[];for(let l=0;l<n.length;l++){const u=n[l];if(i[u.id]&&o[u.id]){const h={};for(const g in u.inputs){const m=u.inputs[g];s[m.id]&&(h[g]=m)}const f=Object.assign({},u);f.inputs=h,f.outputs=u.outputs,a.push(f)}}return a}function sF(n,t,e,s){for(let i=t.length-1;i>=0;i--){const r=t[i],o=[];if(r.outputs.forEach(l=>{const u=n[l.id];u!=null?o.push(u):o.push(null)}),r.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${r.kernelName}.`);const a=r.gradient(o);for(const l in r.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const u=e(()=>a[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${r.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const h=r.inputs[l];if(!zs(u.shape,h.shape))throw new Error(`Error in gradient for op ${r.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${h.shape}'`);if(n[h.id]==null)n[h.id]=u;else{const f=n[h.id];n[h.id]=s(f,u),f.dispose()}}}}const B4=20,sp=3,mb=7;function iF(n,t,e,s){const i=Dn(t),r=rF(n,t,e,i),o=t.length,a=wm(n,t,e,i,r),l=["Tensor"];return s&&(l.push(`  dtype: ${e}`),l.push(`  rank: ${o}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(a.map(u=>"    "+u).join(`
`)),l.join(`
`)}function rF(n,t,e,s){const i=Ce(t),r=s[s.length-1],o=new Array(r).fill(0),a=t.length,l=e==="complex64"?hp(n):n;if(a>1)for(let u=0;u<i/r;u++){const h=u*r;for(let f=0;f<r;f++)o[f]=Math.max(o[f],up(l[h+f],0,e).length)}return o}function up(n,t,e){let s;return Array.isArray(n)?s=`${parseFloat(n[0].toFixed(mb))} + ${parseFloat(n[1].toFixed(mb))}j`:Gp(n)?s=`'${n}'`:e==="bool"?s=FI(n):s=parseFloat(n.toFixed(mb)).toString(),Nd(s,t)}function FI(n){return n===0?"false":"true"}function wm(n,t,e,s,i,r=!0){const o=e==="complex64"?2:1,a=t[0],l=t.length;if(l===0){if(e==="complex64"){const k=hp(n);return[up(k[0],0,e)]}return e==="bool"?[FI(n[0])]:[n[0].toString()]}if(l===1){if(a>B4){const C=sp*o;let S=Array.from(n.slice(0,C)),$=Array.from(n.slice((a-sp)*o,a*o));return e==="complex64"&&(S=hp(S),$=hp($)),["["+S.map((D,R)=>up(D,i[R],e)).join(", ")+", ..., "+$.map((D,R)=>up(D,i[a-sp+R],e)).join(", ")+"]"]}return["["+(e==="complex64"?hp(n):Array.from(n)).map((C,S)=>up(C,i[S],e)).join(", ")+"]"]}const u=t.slice(1),h=s.slice(1),f=s[0]*o,g=[];if(a>B4){for(let k=0;k<sp;k++){const C=k*f,S=C+f;g.push(...wm(n.slice(C,S),u,e,h,i,!1))}g.push("...");for(let k=a-sp;k<a;k++){const C=k*f,S=C+f;g.push(...wm(n.slice(C,S),u,e,h,i,k===a-1))}}else for(let k=0;k<a;k++){const C=k*f,S=C+f;g.push(...wm(n.slice(C,S),u,e,h,i,k===a-1))}const m=l===2?",":"";g[0]="["+(a>0?g[0]+m:"");for(let k=1;k<g.length-1;k++)g[k]=" "+g[k]+m;let y=`,
`;for(let k=2;k<l;k++)y+=`
`;return g[g.length-1]=" "+g[g.length-1]+"]"+(r?"":y),g}function hp(n){const t=[];for(let e=0;e<n.length;e+=2)t.push([n[e],n[e+1]]);return t}class or{constructor(t,e,s){if(this.dtype=e,this.shape=t.slice(),this.size=Ce(t),s!=null){const i=s.length;wt(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(e==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=s||Ti(e,this.size),this.strides=Dn(t)}set(t,...e){e.length===0&&(e=[0]),wt(e.length===this.rank,()=>`The number of provided coordinates (${e.length}) must match the rank (${this.rank})`);const s=this.locToIndex(e);this.values[s]=t}get(...t){t.length===0&&(t=[0]);let e=0;for(const i of t){if(i<0||i>=this.shape[e]){const r=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(r)}e++}let s=t[t.length-1];for(let i=0;i<t.length-1;++i)s+=this.strides[i]*t[i];return this.values[s]}locToIndex(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];let e=t[t.length-1];for(let s=0;s<t.length-1;++s)e+=this.strides[s]*t[s];return e}indexToLoc(t){if(this.rank===0)return[];if(this.rank===1)return[t];const e=new Array(this.shape.length);for(let s=0;s<e.length-1;++s)e[s]=Math.floor(t/this.strides[s]),t-=e[s]*this.strides[s];return e[e.length-1]=t,e}get rank(){return this.shape.length}toTensor(){return Fa().makeTensor(this.values,this.shape,this.dtype)}}let Fa=null,Ed=null;function oF(n){Fa=n}function aF(n){Ed=n}class zi{constructor(t,e,s,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||"float32",this.size=Ce(t),this.strides=Dn(t),this.dataId=s,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return Ed.buffer(this.shape,this.dtype,t)}bufferSync(){return Ed.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return Ga(this.shape,t,this.dtype==="complex64")}arraySync(){return Ga(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const t=Fa().read(this.dataId);if(this.dtype==="string"){const e=await t;try{return e.map(s=>eu(s))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataToGPU(t){return this.throwIfDisposed(),Fa().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();const t=Fa().readSync(this.dataId);if(this.dtype==="string")try{return t.map(e=>eu(e))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await Fa().read(this.dataId);return this.dtype==="string"?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Fa().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return Ed.print(this,t)}clone(){return this.throwIfDisposed(),Ed.clone(this)}toString(t=!1){const e=this.dataSync();return iF(e,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),Ed.cast(this,t)}variable(t=!0,e,s){return this.throwIfDisposed(),Fa().makeVariable(this,t,e,s)}}Object.defineProperty(zi,Symbol.hasInstance,{value:n=>!!n&&n.data!=null&&n.dataSync!=null&&n.throwIfDisposed!=null});function ve(){return iy("Tensor",()=>zi)}ve();class Gm extends zi{constructor(t,e,s,i){super(t.shape,t.dtype,t.dataId,i),this.trainable=e,this.name=s}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!zs(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);Fa().disposeTensor(this),this.dataId=t.dataId,Fa().incRef(this,null)}dispose(){Fa().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Gm,Symbol.hasInstance,{value:n=>n instanceof zi&&n.assign!=null&&n.assign instanceof Function});var z4;(function(n){n.R0="R0",n.R1="R1",n.R2="R2",n.R3="R3",n.R4="R4",n.R5="R5",n.R6="R6"})(z4||(z4={}));var sv;(function(n){n.float32="float32",n.int32="int32",n.bool="int32",n.complex64="complex64"})(sv||(sv={}));var iv;(function(n){n.float32="float32",n.int32="int32",n.bool="bool",n.complex64="complex64"})(iv||(iv={}));var rv;(function(n){n.float32="float32",n.int32="float32",n.bool="float32",n.complex64="complex64"})(rv||(rv={}));var ov;(function(n){n.float32="complex64",n.int32="complex64",n.bool="complex64",n.complex64="complex64"})(ov||(ov={}));const lF={float32:rv,int32:sv,bool:iv,complex64:ov};function To(n,t){if(n==="string"||t==="string"){if(n==="string"&&t==="string")return"string";throw new Error(`Can not upcast ${n} with ${t}`)}return lF[n][t]}function jy(n){return To(n,"int32")}function PI(n){return n!=null&&typeof n=="object"&&"texture"in n&&n.texture instanceof WebGLTexture}function LI(n){return typeof GPUBuffer<"u"&&n!=null&&typeof n=="object"&&"buffer"in n&&n.buffer instanceof GPUBuffer}function Ei(n,t){if(n.dtype===t.dtype)return[n,t];const e=To(n.dtype,t.dtype);return[n.cast(e),t.cast(e)]}function BI(n){const t=[];return zI(n,t,new Set),t}function zI(n,t,e){if(n==null)return;if(n instanceof zi){t.push(n);return}if(!cF(n))return;const s=n;for(const i in s){const r=s[i];e.has(r)||(e.add(r),zI(r,t,e))}}function cF(n){return Array.isArray(n)||typeof n=="object"}function xb(n){return n.kernelName!=null}class W4{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class Wd{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new W4}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const t=this.getSortedBackends();for(let e=0;e<t.length;e++){const s=t[e];if(await this.initializeBackend(s).success){await this.setBackend(s);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:t,asyncInit:e}=this.initializeBackendsAndReturnBest();if(e)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry))if(t in this.registryFactory){const{asyncInit:e}=this.initializeBackend(t);if(e)return null}else return null;return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,e,s=1){return t in this.registryFactory?(Uo(`${t} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[t]={factory:e,priority:s},!0)}async setBackend(t){if(this.registryFactory[t]==null)throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,this.registry[t]==null){this.backendInstance=null;const{success:e,asyncInit:s}=this.initializeBackend(t);if(!(s?await e:e))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new QO(this.backendInstance),!0}setupRegisteredKernels(){F4(this.backendName).forEach(e=>{e.setupFunc!=null&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){F4(t).forEach(s=>{s.disposeFunc!=null&&s.disposeFunc(this.registry[t])})}initializeBackend(t){const e=this.registryFactory[t];if(e==null)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const s=e.factory();if(s&&!(s instanceof Jv)&&typeof s.then=="function"){const i=++this.pendingBackendInitId,r=s.then(o=>i<this.pendingBackendInitId?!1:(this.registry[t]=o,this.pendingBackendInit=null,!0)).catch(o=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,Uo(`Initialization of backend ${t} failed`),Uo(o.stack||o.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}else return this.registry[t]=s,{success:!0,asyncInit:!1}}catch(s){return Uo(`Initialization of backend ${t} failed`),Uo(s.stack||s.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(`${t} backend not found in registry`);this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,e)=>this.registryFactory[e].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let e=0;e<t.length;e++){const s=t[e],{success:i,asyncInit:r}=this.initializeBackend(s);if(r||i)return{name:s,asyncInit:r}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,e){const s=this.state.tensorInfo.get(e),i=s.backend,r=this.readSync(e),o=i.refCount(e);i.disposeData(e,!0),s.backend=t,t.move(e,r,s.shape,s.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,e){let s=null;if(e==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");e=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof e!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");s=t}let i;return this.scopedRun(()=>this.startScope(s),()=>this.endScope(i),()=>(i=e(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(t,e,s){t();try{const i=s();return e(),i}catch(i){throw e(),i}}nextTensorId(){return Wd.nextTensorId++}nextVariableId(){return Wd.nextVariableId++}clone(t){const e=te.runKernel(h0,{x:t}),s={x:t},i=o=>({x:()=>{const a="float32",l={x:o},u={dtype:a};return te.runKernel(Jp,l,u)}}),r=[];return this.addTapeNode(this.state.activeScope.name,s,[e],i,r,{}),e}runKernel(t,e,s){if(this.backendName==null&&this.backend,!(M4(t,this.backendName)!=null))throw new Error(`Kernel '${t}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:t,inputs:e,attrs:s})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,e,s){const i=this.backend.numDataIds();let r=0;s.forEach(l=>{r+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=i-e-r-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${t}'`)}runKernelFunc(t){let e,s=[];const i=this.isTapeOn(),r=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const u=xb(t)?t.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(xb(t)){const{kernelName:y,inputs:k,attrs:C}=t;this.backendName==null&&this.backend;const S=M4(y,this.backendName);wt(S!=null,()=>`Cannot find registered kernel '${y}' for backend '${this.backendName}'`),a=()=>{const $=this.backend.numDataIds();l=S.kernelFunc({inputs:k,attrs:C,backend:this.backend});const D=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(y,$,D);const R=D.map(V=>V.rank!=null?V:this.makeTensorFromTensorInfo(V));if(i){const V=this.getTensorsForGradient(y,k,R);s=this.saveTensorsForBackwardMode(V)}return R}}else{const{forwardFunc:y}=t,k=C=>{i&&(s=C.map(S=>this.keep(this.clone(S))))};a=()=>{const C=this.backend.numDataIds();l=this.tidy(()=>y(this.backend,k));const S=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,C,S),S}}const{inputs:h,attrs:f}=t,g=xb(t)?null:t.backwardsFunc;let m;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?e=a():(m=this.profiler.profileKernel(u,h,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(m),e=m.outputs)}),i&&this.addTapeNode(u,h,e,g,s,f),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-r,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(h).map(y=>h[y]!=null?h[y].shape:null),outputShapes:e.map(y=>y.shape),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(l)?e:e[0]}saveTensorsForBackwardMode(t){return t.map(s=>this.keep(this.clone(s)))}getTensorsForGradient(t,e,s){const i=O4(t);if(i!=null){const r=i.inputsToSave||[],o=i.outputsToSave||[];let a;i.saveAllInputs?(wt(Array.isArray(e),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(e).map(u=>e[u])):a=r.map(u=>e[u]);const l=s.filter((u,h)=>o[h]);return a.concat(l)}return[]}makeTensor(t,e,s,i){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");s=s||"float32",i=i||this.backend;let r=t;s==="string"&&Gp(t[0])&&(r=t.map(l=>Yc(l)));const o=i.write(r,e,s),a=new zi(e,s,o,this.nextTensorId());if(this.trackTensor(a,i),s==="string"){const l=this.state.tensorInfo.get(o),u=NO(r);this.state.numBytes+=u-l.bytes,l.bytes=u}return a}makeTensorFromDataId(t,e,s,i){s=s||"float32";const r={dataId:t,shape:e,dtype:s};return this.makeTensorFromTensorInfo(r,i)}makeTensorFromTensorInfo(t,e){const{dataId:s,shape:i,dtype:r}=t,o=new zi(i,r,s,this.nextTensorId());return this.trackTensor(o,e),o}makeVariable(t,e=!0,s,i){s=s||this.nextVariableId().toString(),i!=null&&i!==t.dtype&&(t=t.cast(i));const r=new Gm(t,e,s,this.nextTensorId());if(this.state.registeredVariables[r.name]!=null)throw new Error(`Variable with name ${r.name} was already registered`);return this.state.registeredVariables[r.name]=r,this.incRef(r,this.backend),r}trackTensor(t,e){this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++;let s=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(s=t.size*zm(t.dtype)),this.state.numBytes+=s,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:e||this.backend,dtype:t.dtype,shape:t.shape,bytes:s})),t instanceof Gm||this.track(t)}incRef(t,e){this.trackTensor(t,e),this.backend.incRef(t.dataId)}removeDataId(t,e){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===e&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;const e=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,t.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=e.bytes),t.dtype!=="complex64"&&t.dtype!=="string"){const s=t.size*zm(t.dtype);this.state.numBytes-=s}e.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,e.backend)}disposeVariables(){for(const t in this.state.registeredVariables){const e=this.state.registeredVariables[t];this.disposeVariable(e)}}disposeVariable(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const e=this.state.numBytes,s=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-s;for(const i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(t,e,s,i,r,o){const a={id:this.state.nextTapeNodeId++,kernelName:t,inputs:e,outputs:s,saved:r},l=O4(t);l!=null&&(i=l.gradFunc),i!=null&&(a.gradient=u=>(u=u.map((h,f)=>{if(h==null){const g=s[f],m=vr(g.size,g.dtype);return this.makeTensor(m,g.shape,g.dtype)}return h}),i(u.length>1?u:u[0],r,o))),this.state.activeTape.push(a)}keep(t){return t.kept=!0,t}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(e.name=t),this.state.scopeStack.push(e),this.state.activeScope=e}endScope(t){const e=BI(t),s=new Set(e.map(r=>r.id));for(let r=0;r<this.state.activeScope.track.length;r++){const o=this.state.activeScope.track[r];!o.kept&&!s.has(o.id)&&o.dispose()}const i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],e.forEach(r=>{!r.kept&&r.scopeId===i.id&&this.track(r)})}gradients(t,e,s,i=!1){if(wt(e.length>0,()=>"gradients() received an empty list of xs."),s!=null&&s.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${s.dtype}'`);const r=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));wt(r instanceof zi,()=>"The result y returned by f() must be a tensor.");const o=nF(this.state.activeTape,e,r);if(!i&&o.length===0&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[r.id]=s??uF(r.shape),sF(a,o,u=>this.tidy(u),hF);const l=e.map(u=>a[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const h of u.saved)h.dispose()}),this.state.activeTape=null),{value:r,grads:l}})}customGrad(t){return wt(Zb(t),()=>"The f passed in customGrad(f) must be a function."),(...e)=>{wt(e.every(a=>a instanceof zi),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let s;const i={};e.forEach((a,l)=>{i[l]=a});const r=(a,l)=>(s=t(...e,l),wt(s.value instanceof zi,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),wt(Zb(s.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),s.value),o=(a,l)=>{const u=s.gradFunc(a,l),h=Array.isArray(u)?u:[u];wt(h.length===e.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),wt(h.every(g=>g instanceof zi),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const f={};return h.forEach((g,m)=>{f[m]=()=>g}),f};return this.runKernelFunc({forwardFunc:r,backwardsFunc:o,inputs:i})}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}readToGPU(t,e){return this.state.tensorInfo.get(t).backend.readToGPU(t,e)}async time(t){const e=Qr(),s=await this.backend.time(t);return s.wallMs=Qr()-e,s}track(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new W4;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Wd.nextTensorId=0;Wd.nextVariableId=0;function uF(n){const t=ny(Ce(n),"float32");return te.makeTensor(t,n,"float32")}function WI(){const n=aI();if(n._tfengine==null){const t=new MO(n);n._tfengine=new Wd(t)}return LO(n._tfengine.ENV),oF(()=>n._tfengine),n._tfengine}const te=WI();function hF(n,t){const e={a:n,b:t};return te.runKernel(rf,e)}function dF(){return typeof navigator<"u"&&navigator!=null}function VI(n){if(n||dF()){if(n||(n=navigator),n.product==="ReactNative")return!0;const t=n.userAgent||n.vendor||(typeof window<"u"?window.opera:"");if(!t){const e=n;return e.userAgentData&&e.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function UI(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const ro=ge();ro.registerFlag("DEBUG",()=>!1,n=>{n&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});ro.registerFlag("IS_BROWSER",()=>UI());ro.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");ro.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));ro.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));ro.registerFlag("PROD",()=>!1);ro.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>ro.getBool("DEBUG"));ro.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);ro.registerFlag("IS_TEST",()=>!1);ro.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>ro.getBool("DEBUG"));ro.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);ro.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);ro.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);function I2(n,t){let e=n;if(fa(n))return t==="string"?[]:[n.length];if(PI(n)){const i=n.channels||"RGBA";return[n.height,n.width*i.length]}else if(LI(n))return[n.buffer.size/(t==null?4:zm(t))];if(!Array.isArray(n))return[];const s=[];for(;Array.isArray(e)||fa(e)&&t!=="string";)s.push(e.length),e=e[0];return Array.isArray(n)&&ge().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&GI(n,s,[]),s}function GI(n,t,e){if(e=e||[],!Array.isArray(n)&&!fa(n)){wt(t.length===0,()=>`Element arr[${e.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);return}wt(t.length>0,()=>`Element arr[${e.join("][")}] should be a primitive, but is an array of ${n.length} elements`),wt(n.length===t[0],()=>`Element arr[${e.join("][")}] should have ${t[0]} elements, but has ${n.length} elements`);const s=t.slice(1);for(let i=0;i<n.length;++i)GI(n[i],s,e.concat(i))}function V4(n,t,e,s){if(n!=="string_or_numeric"){if(n==null)throw new Error("Expected dtype cannot be null.");if(n!=="numeric"&&n!==t||n==="numeric"&&t==="string")throw new Error(`Argument '${e}' passed to '${s}' must be ${n} tensor, but got ${t} tensor`)}}function Bt(n,t,e,s="numeric"){if(n instanceof ve())return V4(s,n.dtype,t,e),n;let i=nf(n);if(i!=="string"&&["bool","int32","float32"].indexOf(s)>=0&&(i=s),V4(s,i,t,e),n==null||!fa(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string"){const l=n==null?"null":n.constructor.name;throw new Error(`Argument '${t}' passed to '${e}' must be a Tensor or TensorLike, but got '${l}'`)}const r=I2(n,i);!fa(n)&&!Array.isArray(n)&&(n=[n]);const a=i!=="string"?Fh(n,i):wh(n,[],!0);return te.makeTensor(a,r,i)}function HI(n,t,e,s="numeric"){if(!Array.isArray(n))throw new Error(`Argument ${t} passed to ${e} must be a \`Tensor[]\` or \`TensorLike[]\``);return n.map((r,o)=>Bt(r,`${t}[${o}]`,e,s))}const fF="__op";function ie(n){const t=Object.keys(n);if(t.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let e=t[0];const s=n[e];e.endsWith("_")&&(e=e.substring(0,e.length-1)),e=e+fF;const i=(...r)=>{te.startScope(e);try{const o=s(...r);return sy(o)&&console.error("Cannot return a Promise inside of tidy."),te.endScope(o),o}catch(o){throw te.endScope(null),o}};return Object.defineProperty(i,"name",{value:e,configurable:!0}),i}function pF(n,t){const e=Bt(n,"real","complex"),s=Bt(t,"imag","complex");ey(e.shape,s.shape,`real and imag shapes, ${e.shape} and ${s.shape}, must match in call to tf.complex().`);const i={real:e,imag:s};return te.runKernel(dy,i)}const Vd=ie({complex_:pF});function E2(n,t,e,s){if(s==null)s=nf(n);else if(s==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(LI(n)||PI(n)){if(s!=="float32"&&s!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${s}.`);return te.backend.createTensorFromGPUData(n,t||e,s)}if(!fa(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){uc(t);const i=Ce(t),r=Ce(e);wt(i===r,()=>`Based on the provided shape, [${t}], the tensor should have ${i} values but has ${r}`);for(let o=0;o<e.length;++o){const a=e[o],l=o===e.length-1?a!==Ce(t.slice(o)):!0;wt(e[o]===t[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${e}) does not match the provided shape (${t}). `)}}return!fa(n)&&!Array.isArray(n)&&(n=[n]),t=t||e,n=s!=="string"?Fh(n,s):wh(n,[],!0),te.makeTensor(n,t,s)}function jI(n,t,e){const s=I2(n,e);return E2(n,t,s,e)}class of{static join(t){return new of(t).slice()}constructor(t){if(this.shards=[],this.previousShardIndex=0,t==null||(t instanceof Array||(t=[t]),t=t.map(s=>fa(s)?s.buffer:s),t.length===0))return;this.bufferUniformSize=t[0].byteLength;let e=0;for(let s=0;s<t.length;s++){const i=t[s];s!==t.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const r=e+i.byteLength;this.shards.push({buffer:i,start:e,end:r}),e=r}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(t=0,e=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(t=isNaN(Number(t))?0:t,e=isNaN(Number(e))?0:e,t=Math.max(0,t),e=Math.min(this.byteLength,e),e<=t)return new ArrayBuffer(0);const s=this.findShardForByte(t);if(s===-1)throw new Error(`Could not find start shard for byte ${t}`);const i=e-t,r=new ArrayBuffer(i),o=new Uint8Array(r);let a=0;for(let l=s;l<this.shards.length;l++){const u=this.shards[l],f=t+a-u.start,g=a,y=Math.min(e,u.end)-u.start,k=new Uint8Array(u.buffer,f,y-f);if(o.set(k,g),a+=k.length,e<u.end)break}return r}findShardForByte(t){if(this.shards.length===0||t<0||t>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(t/this.bufferUniformSize),this.previousShardIndex;function e(i){return t<i.start?-1:t>=i.end?1:0}if(e(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const s=gF(this.shards,e);return s===-1?-1:(this.previousShardIndex=s,this.previousShardIndex)}}function gF(n,t){let e=0,s=n.length;for(;e<=s;){const i=Math.floor((s-e)/2)+e,r=t(n[i]);if(r===0)return i;r<0?s=i:e=i+1}return-1}function cl(){return te}function U4(){return te.memory()}function he(n,t){return te.tidy(n,t)}function bs(n){BI(n).forEach(e=>e.dispose())}function bl(n){return te.keep(n)}function XI(n,t,e=1){return te.registerBackend(n,t,e)}function mF(){return te.backend}const G4=4;async function H4(n,t){const e=[],s=[],i=Array.isArray(n)?n.map(o=>o.name):Object.keys(n);for(let o=0;o<i.length;++o){const a=i[o],l=Array.isArray(n)?n[o].tensor:n[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const u={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const h=new Promise(async f=>{const g=await l.bytes(),m=g.reduce((C,S)=>C+S.length,0)+G4*g.length,y=new Uint8Array(m);let k=0;for(let C=0;C<g.length;C++){const S=g[C],$=new Uint8Array(new Uint32Array([S.length]).buffer);y.set($,k),k+=G4,y.set(S,k),k+=S.length}f(y)});s.push(h)}else s.push(l.data());t!=null&&(u.group=t),e.push(u)}const r=await Promise.all(s);return{data:xF(r),specs:e}}function xF(n){if(n===null)throw new Error(`Invalid input value: ${JSON.stringify(n)}`);let t=0;const e=[];n.forEach(r=>{if(t+=r.byteLength,e.push(r.byteLength===r.buffer.byteLength?r:new r.constructor(r)),!(r instanceof Float32Array||r instanceof Int32Array||r instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${r.constructor.name}`)});const s=new Uint8Array(t);let i=0;return e.forEach(r=>{s.set(new Uint8Array(r.buffer),i),i+=r.byteLength}),s.buffer}const Xy=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function j4(n){return Xy?Buffer.byteLength(n,"utf8"):new Blob([n]).size}function bF(n){if(Xy)return Buffer.from(n).toString("base64");const t=new Uint8Array(n);let e="";for(let s=0,i=t.length;s<i;s++)e+=String.fromCharCode(t[s]);return btoa(e)}function vF(n){if(Xy){const s=Buffer.from(n,"base64");return s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)}const t=atob(n),e=new Uint8Array(t.length);for(let s=0;s<t.length;++s)e.set([t.charCodeAt(s)],s);return e.buffer}function yF(n){return of.join(n)}function qI(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:n.modelTopology==null?0:j4(JSON.stringify(n.modelTopology)),weightSpecsBytes:n.weightSpecs==null?0:j4(JSON.stringify(n.weightSpecs)),weightDataBytes:n.weightData==null?0:new of(n.weightData).byteLength}}class Or{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Or.instance==null&&(Or.instance=new Or),Or.instance}static registerSaveRouter(t){Or.getInstance().saveRouters.push(t)}static registerLoadRouter(t){Or.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return Or.getHandlers(t,"save")}static getLoadHandlers(t,e){return Or.getHandlers(t,"load",e)}static getHandlers(t,e,s){const i=[];return(e==="load"?Or.getInstance().loadRouters:Or.getInstance().saveRouters).forEach(o=>{const a=o(t,s);a!==null&&i.push(a)}),i}}const wF=n=>Or.getSaveHandlers(n);const av="tensorflowjs",lv=1,ch="models_store",Vc="model_info_store";function KI(){if(!ge().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const n=typeof window>"u"?self:window,t=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB||n.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function cv(n){const t=n.result;t.createObjectStore(ch,{keyPath:"modelPath"}),t.createObjectStore(Vc,{keyPath:"modelPath"})}class kh{constructor(t){if(this.indexedDB=KI(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,e){return new Promise((s,i)=>{const r=this.indexedDB.open(av,lv);r.onupgradeneeded=()=>cv(r),r.onsuccess=()=>{const o=r.result;if(e==null){const a=o.transaction(ch,"readonly"),u=a.objectStore(ch).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return o.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));s(u.result.modelArtifacts)},u.onerror=h=>(o.close(),i(u.error)),a.oncomplete=()=>o.close()}else{e.weightData=of.join(e.weightData);const a=qI(e),l=o.transaction(Vc,"readwrite");let u=l.objectStore(Vc),h;try{h=u.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(g){return i(g)}let f;h.onsuccess=()=>{f=o.transaction(ch,"readwrite");const g=f.objectStore(ch);let m;try{m=g.put({modelPath:this.modelPath,modelArtifacts:e,modelArtifactsInfo:a})}catch(y){return i(y)}m.onsuccess=()=>s({modelArtifactsInfo:a}),m.onerror=y=>{u=l.objectStore(Vc);const k=u.delete(this.modelPath);k.onsuccess=()=>(o.close(),i(m.error)),k.onerror=C=>(o.close(),i(m.error))}},h.onerror=g=>(o.close(),i(h.error)),l.oncomplete=()=>{f==null?o.close():f.oncomplete=()=>o.close()}}},r.onerror=o=>i(r.error)})}}kh.URL_SCHEME="indexeddb://";const YI=n=>ge().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(kh.URL_SCHEME)?kF(n.slice(kh.URL_SCHEME.length)):null;Or.registerSaveRouter(YI);Or.registerLoadRouter(YI);function kF(n){return new kh(n)}function CF(n){return n.startsWith(kh.URL_SCHEME)?n.slice(kh.URL_SCHEME.length):n}class SF{constructor(){this.indexedDB=KI()}async listModels(){return new Promise((t,e)=>{const s=this.indexedDB.open(av,lv);s.onupgradeneeded=()=>cv(s),s.onsuccess=()=>{const i=s.result,r=i.transaction(Vc,"readonly"),a=r.objectStore(Vc).getAll();a.onsuccess=()=>{const l={};for(const u of a.result)l[u.modelPath]=u.modelArtifactsInfo;t(l)},a.onerror=l=>(i.close(),e(a.error)),r.oncomplete=()=>i.close()},s.onerror=i=>e(s.error)})}async removeModel(t){return t=CF(t),new Promise((e,s)=>{const i=this.indexedDB.open(av,lv);i.onupgradeneeded=()=>cv(i),i.onsuccess=()=>{const r=i.result,o=r.transaction(Vc,"readwrite"),a=o.objectStore(Vc),l=a.get(t);let u;l.onsuccess=()=>{if(l.result==null)return r.close(),s(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{const h=a.delete(t),f=()=>{u=r.transaction(ch,"readwrite");const m=u.objectStore(ch).delete(t);m.onsuccess=()=>e(l.result.modelArtifactsInfo),m.onerror=y=>s(l.error)};h.onsuccess=f,h.onerror=g=>(f(),r.close(),s(l.error))}},l.onerror=h=>(r.close(),s(l.error)),o.oncomplete=()=>{u==null?r.close():u.oncomplete=()=>r.close()}},i.onerror=r=>s(i.error)})}}const Zl="/",_d="tensorflowjs_models",ZI="info",TF="model_topology",IF="weight_specs",EF="weight_data",_F="model_metadata";function JI(n){return{info:[_d,n,ZI].join(Zl),topology:[_d,n,TF].join(Zl),weightSpecs:[_d,n,IF].join(Zl),weightData:[_d,n,EF].join(Zl),modelMetadata:[_d,n,_F].join(Zl)}}function QI(n){for(const t of Object.values(n))window.localStorage.removeItem(t)}function AF(n){const t=n.split(Zl);if(t.length<3)throw new Error(`Invalid key format: ${n}`);return t.slice(1,t.length-1).join(Zl)}function $F(n){return n.startsWith(Ch.URL_SCHEME)?n.slice(Ch.URL_SCHEME.length):n}class Ch{constructor(t){if(!ge().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=JI(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const e=JSON.stringify(t.modelTopology),s=JSON.stringify(t.weightSpecs),i=qI(t),r=of.join(t.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,s),this.LS.setItem(this.keys.weightData,bF(r));const o={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:t.signature!=null?t.signature:void 0,userDefinedMetadata:t.userDefinedMetadata!=null?t.userDefinedMetadata:void 0,modelInitializer:t.modelInitializer!=null?t.modelInitializer:void 0,initializerSignature:t.initializerSignature!=null?t.initializerSignature:void 0,trainingConfig:t.trainingConfig!=null?t.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:i}}catch{throw QI(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(t==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const e={},s=JSON.parse(this.LS.getItem(this.keys.topology));if(s==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);e.modelTopology=s;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);e.weightSpecs=i;const r=this.LS.getItem(this.keys.modelMetadata);if(r!=null){const a=JSON.parse(r);e.format=a.format,e.generatedBy=a.generatedBy,e.convertedBy=a.convertedBy,a.signature!=null&&(e.signature=a.signature),a.userDefinedMetadata!=null&&(e.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(e.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(e.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(e.trainingConfig=a.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return e.weightData=vF(o),e}}Ch.URL_SCHEME="localstorage://";const t5=n=>ge().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(Ch.URL_SCHEME)?NF(n.slice(Ch.URL_SCHEME.length)):null;Or.registerSaveRouter(t5);Or.registerLoadRouter(t5);function NF(n){return new Ch(n)}class DF{constructor(){wt(ge().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),wt(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const t={},e=_d+Zl,s=Zl+ZI;for(let i=0;i<this.LS.length;++i){const r=this.LS.key(i);if(r.startsWith(e)&&r.endsWith(s)){const o=AF(r);t[o]=JSON.parse(this.LS.getItem(r))}}return t}async removeModel(t){t=$F(t);const e=JI(t);if(this.LS.getItem(e.info)==null)throw new Error(`Cannot find model at path '${t}'`);const s=JSON.parse(this.LS.getItem(e.info));return QI(e),s}}const X4="://";class ul{constructor(){this.managers={}}static getInstance(){return ul.instance==null&&(ul.instance=new ul),ul.instance}static registerManager(t,e){wt(t!=null,()=>"scheme must not be undefined or null."),t.endsWith(X4)&&(t=t.slice(0,t.indexOf(X4))),wt(t.length>0,()=>"scheme must not be an empty string.");const s=ul.getInstance();wt(s.managers[t]==null,()=>`A model store manager is already registered for scheme '${t}'.`),s.managers[t]=e}static getManager(t){const e=ul.getInstance().managers[t];if(e==null)throw new Error(`Cannot find model manager for scheme '${t}'`);return e}static getSchemes(){return Object.keys(ul.getInstance().managers)}}class RF{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(t,e){return fetch(t,e)}now(){return performance.now()}encode(t,e){if(e!=="utf-8"&&e!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${e}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,e){return new TextDecoder(e).decode(t)}setTimeoutCustom(t,e){if(typeof window>"u"||!ge().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(t,e);return}this.functionRefs.push(t),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},e),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",s=>{if(s.source===window&&s.data.name===this.messageName){s.stopPropagation();const i=this.functionRefs[s.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(t){return NI(t)}}if(ge().get("IS_BROWSER")){ge().setPlatform("browser",new RF);try{ul.registerManager(Ch.URL_SCHEME,new DF)}catch{}try{ul.registerManager(kh.URL_SCHEME,new SF)}catch{}}const MF={importFetch:()=>require("node-fetch")};let bb;class OF{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(t,e){return ge().global.fetch!=null?ge().global.fetch(t,e):(bb==null&&(bb=MF.importFetch()),bb(t,e))}now(){const t=process.hrtime();return t[0]*1e3+t[1]/1e6}encode(t,e){if(e!=="utf-8"&&e!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${e}`);return this.textEncoder.encode(t)}decode(t,e){return t.length===0?"":new this.util.TextDecoder(e).decode(t)}isTypedArray(t){return this.util.types.isFloat32Array(t)||this.util.types.isInt32Array(t)||this.util.types.isUint8Array(t)||this.util.types.isUint8ClampedArray(t)}}ge().get("IS_NODE")&&!ge().get("IS_BROWSER")&&ge().setPlatform("node",new OF);function hs(n,t="float32",e){return t=t||"float32",uc(n),new or(n,t,e)}function FF(n,t){const e=Bt(n,"x","cast");if(!$O(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if(t==="string"&&e.dtype!=="string"||t!=="string"&&e.dtype==="string")throw new Error("Only strings can be casted to strings");const s={x:e},i={dtype:t};return te.runKernel(Jp,s,i)}const rn=ie({cast_:FF});function PF(n){const e={x:Bt(n,"x","clone","string_or_numeric")};return te.runKernel(h0,e)}const fh=ie({clone_:PF});function LF(n,t=!1){console.log(n.toString(t))}WI();const BF={buffer:hs,cast:rn,clone:fh,print:LF};aF(BF);function zF(n,t){let e=Bt(n,"a","add"),s=Bt(t,"b","add");[e,s]=Ei(e,s);const i={a:e,b:s};return te.runKernel(rf,i)}const Be=ie({add_:zF});function WF(n,t){let e=Bt(n,"a","floorDiv"),s=Bt(t,"b","floorDiv");[e,s]=Ei(e,s);const i={a:e,b:s};return te.runKernel(c0,i)}const e5=ie({floorDiv_:WF});function VF(n,t){let e=Bt(n,"a","div"),s=Bt(t,"b","div");if([e,s]=Ei(e,s),e.dtype==="int32"&&s.dtype==="int32")return e5(e,s);const i={a:e,b:s},r={};return te.runKernel(s0,i,r)}const Mn=ie({div_:VF});function UF(n,t){let e=Bt(n,"a","mul"),s=Bt(t,"b","mul");[e,s]=Ei(e,s);const i={a:e,b:s};return te.runKernel(y0,i)}const Jt=ie({mul_:UF});function GF(n){const t=Bt(n,"x","abs");if(t.dtype==="complex64"){const e={x:t};return te.runKernel(D1,e)}else{const e={x:t};return te.runKernel(T1,e)}}const Fr=ie({abs_:GF});function HF(n){const e={x:Bt(n,"x","acos")};return te.runKernel(Hp,e)}const jF=ie({acos_:HF});function XF(n){const e={x:Bt(n,"x","acosh")};return te.runKernel(jp,e)}const qF=ie({acosh_:XF});function KF(n,t=null,e=!1){const i={x:Bt(n,"x","all","bool")},r={axis:t,keepDims:e};return te.runKernel(oy,i,r)}const n5=ie({all_:KF});function YF(n,t=null,e=!1){const i={x:Bt(n,"x","any","bool")},r={axis:t,keepDims:e};return te.runKernel(ay,i,r)}const uv=ie({any_:YF});function ZF(n,t=0){const s={x:Bt(n,"x","argMax")},i={axis:t};return te.runKernel(I1,s,i)}const Cp=ie({argMax_:ZF});function JF(n,t=0){const s={x:Bt(n,"x","argMin")},i={axis:t};return te.runKernel(E1,s,i)}const QF=ie({argMin_:JF});function tP(n){const e={x:Bt(n,"x","asin")};return te.runKernel(Xp,e)}const eP=ie({asin_:tP});function nP(n){const e={x:Bt(n,"x","asinh")};return te.runKernel(qp,e)}const sP=ie({asinh_:nP});function iP(n){const e={x:Bt(n,"x","atan")};return te.runKernel(Kp,e)}const rP=ie({atan_:iP});function oP(n,t){let e=Bt(n,"a","atan2"),s=Bt(t,"b","atan2");[e,s]=Ei(e,s);const i={a:e,b:s};return te.runKernel(Zp,i)}const aP=ie({atan2_:oP});function lP(n){const e={x:Bt(n,"x","atanh")};return te.runKernel(Yp,e)}const cP=ie({atanh_:lP});function z0(n,t,e,s,i="NHWC",r){const o=n[3],a=[...t,o],l=dc(i);return cr(n,a,e,r,s,null,null,l)}function ga(n,t,e,s,i,r,o="channelsLast"){const[a,l]=Sp(t);let u;if(o==="channelsLast")u=[a,l,n[3],n[3]];else if(o==="channelsFirst")u=[a,l,n[1],n[1]];else throw new Error(`Unknown dataFormat ${o}`);return cr(n,u,e,s,i,r,!1,o)}function hc(n,t,e,s,i,r,o="NDHWC"){const[a,l,u]=hv(t);let h,f;if(o==="NDHWC")f="channelsLast",h=[a,l,u,n[4],n[4]];else if(o==="NCDHW")f="channelsFirst",h=[a,l,u,n[1],n[1]];else throw new Error(`Unknown dataFormat ${o}`);return cu(n,h,e,s,i,!1,f,r)}function cr(n,t,e,s,i,r,o=!1,a="channelsLast"){let[l,u,h,f]=[-1,-1,-1,-1];if(a==="channelsLast")[l,u,h,f]=n;else if(a==="channelsFirst")[l,f,u,h]=n;else throw new Error(`Unknown dataFormat ${a}`);const[g,m,,y]=t,[k,C]=Sp(e),[S,$]=Sp(s),D=Rd(g,S),R=Rd(m,$),{padInfo:V,outHeight:E,outWidth:q}=dP(i,u,h,k,C,D,R,r,a),X=o?y*f:y;let B;return a==="channelsFirst"?B=[l,X,E,q]:a==="channelsLast"&&(B=[l,E,q,X]),{batchSize:l,dataFormat:a,inHeight:u,inWidth:h,inChannels:f,outHeight:E,outWidth:q,outChannels:X,padInfo:V,strideHeight:k,strideWidth:C,filterHeight:g,filterWidth:m,effectiveFilterHeight:D,effectiveFilterWidth:R,dilationHeight:S,dilationWidth:$,inShape:n,outShape:B,filterShape:t}}function cu(n,t,e,s,i,r=!1,o="channelsLast",a){let[l,u,h,f,g]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,u,h,f,g]=n;else if(o==="channelsFirst")[l,g,u,h,f]=n;else throw new Error(`Unknown dataFormat ${o}`);const[m,y,k,,C]=t,[S,$,D]=hv(e),[R,V,E]=hv(s),q=Rd(m,R),X=Rd(y,V),B=Rd(k,E),{padInfo:U,outDepth:K,outHeight:Y,outWidth:ct}=fP(i,u,h,f,S,$,D,q,X,B,a),j=r?C*g:C;let ht;return o==="channelsFirst"?ht=[l,j,K,Y,ct]:o==="channelsLast"&&(ht=[l,K,Y,ct,j]),{batchSize:l,dataFormat:o,inDepth:u,inHeight:h,inWidth:f,inChannels:g,outDepth:K,outHeight:Y,outWidth:ct,outChannels:j,padInfo:U,strideDepth:S,strideHeight:$,strideWidth:D,filterDepth:m,filterHeight:y,filterWidth:k,effectiveFilterDepth:q,effectiveFilterHeight:X,effectiveFilterWidth:B,dilationDepth:R,dilationHeight:V,dilationWidth:E,inShape:n,outShape:ht,filterShape:t}}function uP(n,t,e,s,i){s==null&&(s=qy(n,t,e));const r=n[0],o=n[1],a=Tp((r-t+2*s)/e+1,i),l=Tp((o-t+2*s)/e+1,i);return[a,l]}function hP(n,t,e,s,i,r){i==null&&(i=qy(n,t[0],s[0]));const o=[0,0,0,e];for(let a=0;a<3;a++)n[a]+2*i>=t[a]&&(o[a]=Tp((n[a]-t[a]+2*i)/s[a]+1,r));return o}function qy(n,t,e,s=1){const i=Rd(t,s);return Math.floor((n[0]*(e-1)-e+i)/2)}function Sp(n){return typeof n=="number"?[n,n,n]:n.length===2?[n[0],n[1],1]:n}function hv(n){return typeof n=="number"?[n,n,n]:n}function Rd(n,t){return t<=1?n:n+(n-1)*(t-1)}function dP(n,t,e,s,i,r,o,a,l){let u,h,f;if(typeof n=="number"){u={top:n,bottom:n,left:n,right:n,type:n===0?"VALID":"NUMBER"};const m=uP([t,e],r,s,n,a);h=m[0],f=m[1]}else if(n==="same"){h=Math.ceil(t/s),f=Math.ceil(e/i);const g=Math.max(0,(h-1)*s+r-t),m=Math.max(0,(f-1)*i+o-e),y=Math.floor(g/2),k=g-y,C=Math.floor(m/2),S=m-C;u={top:y,bottom:k,left:C,right:S,type:"SAME"}}else if(n==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},h=Math.ceil((t-r+1)/s),f=Math.ceil((e-o+1)/i);else if(typeof n=="object"){const g=l==="channelsLast"?n[1][0]:n[2][0],m=l==="channelsLast"?n[1][1]:n[2][1],y=l==="channelsLast"?n[2][0]:n[3][0],k=l==="channelsLast"?n[2][1]:n[3][1];u={top:g,bottom:m,left:y,right:k,type:g===0&&m===0&&y===0&&k===0?"VALID":"EXPLICIT"},h=Tp((t-r+g+m)/s+1,a),f=Tp((e-o+y+k)/i+1,a)}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:u,outHeight:h,outWidth:f}}function fP(n,t,e,s,i,r,o,a,l,u,h){let f,g,m,y;if(n==="valid"&&(n=0),typeof n=="number"){f={top:n,bottom:n,left:n,right:n,front:n,back:n,type:n===0?"VALID":"NUMBER"};const C=hP([t,e,s,1],[a,l,u],1,[i,r,o],n,h);g=C[0],m=C[1],y=C[2]}else if(n==="same"){g=Math.ceil(t/i),m=Math.ceil(e/r),y=Math.ceil(s/o);const k=(g-1)*i+a-t,C=(m-1)*r+l-e,S=(y-1)*o+u-s,$=Math.floor(k/2),D=k-$,R=Math.floor(C/2),V=C-R,E=Math.floor(S/2),q=S-E;f={top:R,bottom:V,left:E,right:q,front:$,back:D,type:"SAME"}}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:f,outDepth:g,outHeight:m,outWidth:y}}function Tp(n,t){if(!t)return Math.trunc(n);switch(t){case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"floor":return Math.floor(n);default:throw new Error(`Unknown roundingMode ${t}`)}}function Sh(n){const[t,e,s]=Sp(n);return t===1&&e===1&&s===1}function Sr(n,t){return Sh(n)||Sh(t)}function Th(n){return Sp(n).every(t=>t>0)}function dc(n){if(n==="NHWC")return"channelsLast";if(n==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${n}`)}function ao(n,t,e){if(e!=null){if(typeof t=="string")throw Error(`Error in ${n}: pad must be an integer when using dimRoundingMode ${e} but got pad ${t}.`);if(typeof t=="number")wt(zd(t),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${e} but got pad ${t}.`);else if(typeof t=="object")t.forEach(s=>{s.forEach(i=>{wt(zd(i),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${e} but got pad ${i}.`)})});else throw Error(`Error in ${n}: Unknown padding parameter: ${t}`)}}function pP(n,t){const s={x:Bt(n,"x","reshape","string_or_numeric")},i={shape:t};return te.runKernel(d2,s,i)}const ne=ie({reshape_:pP});function gP(n,t,e,s,i){const r=Bt(n,"x","avgPool","float32"),o=1;wt(Sr(e,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${e} and dilations '${o}'`);let a=r,l=!1;r.rank===3&&(l=!0,a=ne(r,[1,r.shape[0],r.shape[1],r.shape[2]])),wt(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),ao("avgPool",s,i);const u={x:a},h={filterSize:t,strides:e,pad:s,dimRoundingMode:i};let f=te.runKernel(_1,u,h);return f=rn(f,r.dtype),l?ne(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const Ky=ie({avgPool_:gP});function mP(n,t,e,s,i,r="NDHWC"){const o=Bt(n,"x","avgPool3d","float32");let a=o,l=!1;o.rank===4&&(l=!0,a=ne(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),wt(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),wt(r==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${r}`),wt(typeof e=="number"&&e>0||Array.isArray(e)&&e[0]>0&&e[1]>0&&e[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${e}'`),ao("avgPool3d",s,i);const u={x:a},h={filterSize:t,strides:e,pad:s,dimRoundingMode:i,dataFormat:r};let f=te.runKernel(A1,u,h);return f=rn(f,a.dtype),l?ne(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const xP=ie({avgPool3d_:mP});function bP(n,t=0){wt(n.length>=1,()=>"Pass at least one tensor to concat");const e=HI(n,"tensors","concat","string_or_numeric");if(e[0].dtype==="complex64"&&e.forEach(r=>{if(r.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${r.dtype}. `)}),e.length===1)return fh(e[0]);const s=e,i={axis:t};return te.runKernel(R1,s,i)}const so=ie({concat_:bP});function vP(n,t,e=!1,s=!1){let i=Bt(n,"a","matMul"),r=Bt(t,"b","matMul");[i,r]=Ei(i,r);const o={a:i,b:r},a={transposeA:e,transposeB:s};return te.runKernel($1,o,a)}const Ls=ie({matMul_:vP});function yP(n){const e={x:Bt(n,"x","sigmoid","float32")};return te.runKernel(N0,e)}const af=ie({sigmoid_:yP});function wP(n,t,e){const s=Bt(n,"x","slice","string_or_numeric");if(s.rank===0)throw new Error("Slicing scalar is not possible");const i={x:s},r={begin:t,size:e};return te.runKernel(x2,i,r)}const si=ie({slice_:wP});function kP(n){const e={x:Bt(n,"x","tanh","float32")};return te.runKernel(P0,e)}const _2=ie({tanh_:kP});function CP(n,t,e){const s=Bt(n,"x","batchToSpaceND"),i=t.reduce((a,l)=>a*l);wt(s.rank>=1+t.length,()=>`input rank is ${s.rank} but should be > than blockShape.length ${t.length}`),wt(e.length===t.length,()=>`crops.length is ${e.length} but should be equal to blockShape.length  ${t.length}`),wt(s.shape[0]%i===0,()=>`input tensor batch is ${s.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${i}`);const r={x:s},o={blockShape:t,crops:e};return te.runKernel(N1,r,o)}const Yy=ie({batchToSpaceND_:CP});function SP(n){let t;return n.rank===0||n.rank===1?t=ne(n,[1,1,1,n.size]):n.rank===2?t=ne(n,[1,1,n.shape[0],n.shape[1]]):n.rank===3?t=ne(n,[1,n.shape[0],n.shape[1],n.shape[2]]):t=n,t}function TP(n,t,e,s,i,r){r==null&&(r=.001);const o=Bt(n,"x","batchNorm"),a=Bt(t,"mean","batchNorm"),l=Bt(e,"variance","batchNorm");let u;i!=null&&(u=Bt(i,"scale","batchNorm"));let h;s!=null&&(h=Bt(s,"offset","batchNorm")),wt(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),wt(h==null||a.rank===h.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),wt(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const g={x:SP(o),scale:u,offset:h,mean:a,variance:l},m={varianceEpsilon:r},y=te.runKernel(V1,g,m);return ne(y,o.shape)}const A2=ie({batchNorm_:TP});function IP(n,t,e,s,i,r){const o=Bt(n,"x","batchNorm"),a=Bt(t,"mean","batchNorm"),l=Bt(e,"variance","batchNorm");let u;i!=null&&(u=Bt(i,"scale","batchNorm"));let h;return s!=null&&(h=Bt(s,"offset","batchNorm")),wt(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),wt(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),wt(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&wt(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),h!=null&&wt(h.rank===2||h.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${h.rank}.`),A2(o,a,l,h,u,r)}const EP=ie({batchNorm2d_:IP});function _P(n,t,e,s,i,r){const o=Bt(n,"x","batchNorm"),a=Bt(t,"mean","batchNorm"),l=Bt(e,"variance","batchNorm");let u;i!=null&&(u=Bt(i,"scale","batchNorm"));let h;return s!=null&&(h=Bt(s,"offset","batchNorm")),wt(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),wt(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),wt(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&wt(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),h!=null&&wt(h.rank===3||h.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${h.rank}.`),A2(o,a,l,h,u,r)}const AP=ie({batchNorm3d_:_P});function $P(n,t,e,s,i,r){const o=Bt(n,"x","batchNorm"),a=Bt(t,"mean","batchNorm"),l=Bt(e,"variance","batchNorm");let u;i!=null&&(u=Bt(i,"scale","batchNorm"));let h;return s!=null&&(h=Bt(s,"offset","batchNorm")),wt(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),wt(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),wt(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&wt(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),h!=null&&wt(h.rank===4||h.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${h.rank}.`),A2(o,a,l,h,u,r)}const NP=ie({batchNorm4d_:$P});function DP(n,t,e){const s=Bt(n,"x","bincount"),i=Bt(t,"weights","bincount");wt(s.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${s.dtype}`),wt(e>=0,()=>`size must be non-negative, but got ${e}.`),wt(i.size===s.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${s.shape}, weights shape: ${i.shape}.`);const r={x:s,weights:i},o={size:e};return te.runKernel(uy,r,o)}const RP=ie({bincount_:DP});function MP(n,t){let e=Bt(n,"broadcastTo","x");const s=e.shape;if(uc(t),t.length<e.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${e.rank}.`);if(t.length>e.rank){const u=e.shape.slice();for(;u.length<t.length;)u.unshift(1);e=ne(e,u)}const i=e.shape,r=Array.from(t);for(let u=t.length-1;u>=0;u--)if(i[u]===t[u])r[u]=1;else if(e.shape[u]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${t}].`);if(r.map((u,h)=>u>1?h:-1).filter(u=>u>=0).length===0)return fh(e);const a={x:e},l={reps:r};return te.runKernel(L0,a,l)}const yp=ie({broadcastTo_:MP});function OP(n){const e={x:Bt(n,"x","ceil","float32")};return te.runKernel(Qp,e)}const FP=ie({ceil_:OP});function $2(n,t,e){uc(n),e=e||nf(t);const s={shape:n,value:t,dtype:e};return te.runKernel(Ty,{},s)}function PP(n,t,e){const s=Bt(n,"x","clipByValue");if(wt(t<=e,()=>`Error in clip: min (${t}) must be less than or equal to max (${e}).`),t===e)return $2(s.shape,t,s.dtype);const i={x:s},r={clipValueMin:t,clipValueMax:e};return te.runKernel(t0,i,r)}const Xo=ie({clipByValue_:PP});function LP(n){return so(n,0)}const BP=ie({concat1d_:LP});function zP(n,t){return so(n,t)}const WP=ie({concat2d_:zP});function VP(n,t){return so(n,t)}const UP=ie({concat3d_:VP});function GP(n,t){return so(n,t)}const HP=ie({concat4d_:GP});function jP(n,t,e,s,i="NHWC",r=[1,1],o){const a=Bt(n,"x","conv2d","float32"),l=Bt(t,"filter","conv2d","float32");let u=a,h=!1;a.rank===3&&(h=!0,u=ne(a,[1,a.shape[0],a.shape[1],a.shape[2]])),wt(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),wt(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),ao("conv2d",s,o);const f=i==="NHWC"?u.shape[3]:u.shape[1];wt(f===l.shape[2],()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${l.shape[2]}.`),wt(Sr(e,r),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${e} and dilations '${r}'`),wt(Th(r),()=>"Error in conv2D: Dilated rates should be larger than 0."),wt(Th(e),()=>"Error in conv2D: Strides should be larger than 0.");const g={x:u,filter:l},m={strides:e,pad:s,dataFormat:i,dilations:r,dimRoundingMode:o},y=te.runKernel(M1,g,m);return h?ne(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const Ih=ie({conv2d_:jP});function XP(n,t,e,s,i="NWC",r=1,o){const a=Bt(n,"x","conv1d"),l=Bt(t,"filter","conv1d");let u=a,h=!1;a.rank===2&&(h=!0,u=ne(a,[1,a.shape[0],a.shape[1]])),wt(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),wt(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),ao("conv1d",s,o),wt(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),wt(Sr(e,r),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${e} and dilation '${r}'`),wt(Th(r),()=>"Error in conv1D: Dilated rates should be larger than 0."),wt(Th(e),()=>"Error in conv1D: Stride should be larger than 0."),wt(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const f=ne(l,[1,l.shape[0],l.shape[1],l.shape[2]]),g=ne(u,[u.shape[0],1,u.shape[1],u.shape[2]]),C=Ih(g,f,[1,e],s,"NHWC",[1,r],o);return h?ne(C,[C.shape[2],C.shape[3]]):ne(C,[C.shape[0],C.shape[2],C.shape[3]])}const s5=ie({conv1d_:XP});function qP(n,t,e,s,i,r="NHWC",o){wt(n.length===t.rank,()=>`Length of inShape (${n.length}) and rank of dy (${t.rank}) must match`);let a=n,l=t,u=!1;t.rank===3&&(u=!0,l=ne(t,[1,t.shape[0],t.shape[1],t.shape[2]]),a=[1,n[0],n[1],n[2]]),wt(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),wt(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),wt(e.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${e.rank}`);const h=r==="NHWC"?a[3]:a[1],f=r==="NHWC"?l.shape[3]:l.shape[1];wt(h===e.shape[2],()=>`Error in conv2dDerInput: depth of input (${h}) must match input depth for filter ${e.shape[2]}.`),wt(f===e.shape[3],()=>`Error in conv2dDerInput: depth of output (${f}) must match output depth for filter ${e.shape[3]}.`),ao("conv2dDerInput",i,o);const g={dy:l,filter:e},m={strides:s,pad:i,dataFormat:r,dimRoundingMode:o,inputShape:a},y=te.runKernel(O1,g,m);return u?ne(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const Zy=ie({conv2DBackpropInput_:qP});function KP(n,t,e,s,i,r){const o=Bt(n,"x","conv2dTranspose"),a=Bt(t,"filter","conv2dTranspose");return Zy(e,o,a,s,i,"NHWC",r)}const i5=ie({conv2dTranspose_:KP});function YP(n,t,e,s,i="NDHWC",r=[1,1,1]){const o=Bt(n,"x","conv3d"),a=Bt(t,"filter","conv3d");let l=o,u=!1;o.rank===4&&(u=!0,l=ne(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),wt(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),wt(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),wt(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),wt(Sr(e,r),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${e} and dilations '${r}'`),wt(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),wt(Th(r),()=>"Error in conv3D: Dilated rates should be larger than 0."),wt(Th(e),()=>"Error in conv3D: Strides should be larger than 0.");const h={x:l,filter:a},f={strides:e,pad:s,dataFormat:i,dilations:r},g=te.runKernel(F1,h,f);return u?ne(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const ZP=ie({conv3d_:YP});function JP(n,t,e,s,i){wt(n.length===t.rank,()=>`Length of inShape (${n.length}) and rank of dy (${t.rank}) must match`);let r=n,o=t,a=!1;t.rank===4&&(a=!0,o=ne(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),r=[1,n[0],n[1],n[2],n[3]]);const l=r[4],u=o.shape[4];wt(r.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${r.length}.`),wt(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),wt(e.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${e.rank}`),wt(l===e.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${e.shape[3]}.`),wt(u===e.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${e.shape[4]}.`);const h={dy:o,filter:e},f={pad:i,strides:s,inputShape:r},g=te.runKernel(gy,h,f);return a?ne(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const r5=ie({conv3DBackpropInput_:JP});function QP(n,t,e,s,i){const r=Bt(n,"x","conv3dTranspose"),o=Bt(t,"filter","conv3dTranspose");return r5(e,r,o,s,i)}const tL=ie({conv3dTranspose_:QP});function eL(n){const e={x:Bt(n,"x","cos","float32")};return te.runKernel(e0,e)}const Jy=ie({cos_:eL});function nL(n){const e={x:Bt(n,"x","cosh","float32")};return te.runKernel(n0,e)}const o5=ie({cosh_:nL});function sL(n,t=0,e=!1,s=!1){const r={x:Bt(n,"x","cumprod")},o={axis:t,exclusive:e,reverse:s};return te.runKernel(my,r,o)}const dv=ie({cumprod_:sL});function iL(n,t=0,e=!1,s=!1){const r={x:Bt(n,"x","cumsum")},o={axis:t,exclusive:e,reverse:s};return te.runKernel(P1,r,o)}const a5=ie({cumsum_:iL});function rL(n,t,e,s=!1){const i=Bt(n,"x","denseBincount"),r=Bt(t,"weights","denseBincount");wt(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),wt(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),wt(e>=0,()=>`size must be non-negative, but got ${e}.`),wt(r.size===i.size||r.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${r.shape}.`);const o={x:i,weights:r},a={size:e,binaryOutput:s};return te.runKernel(by,o,a)}const q4=ie({denseBincount_:rL});function oL(n,t,e="NHWC"){const s=Bt(n,"x","depthToSpace","float32"),i=e==="NHWC"?s.shape[1]:s.shape[2],r=e==="NHWC"?s.shape[2]:s.shape[3],o=e==="NHWC"?s.shape[3]:s.shape[1];wt(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),wt(i*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${t}  for depthToSpace with input shape
    ${s.shape}`),wt(r*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${r} and ${t} for depthToSpace with input shape
        ${s.shape}`),wt(o%(t*t)===0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${o} for depthToSpace with input shape ${s.shape}`);const a={x:s},l={blockSize:t,dataFormat:e};return te.runKernel(vy,a,l)}const aL=ie({depthToSpace_:oL});function lL(n,t,e,s,i="NHWC",r=[1,1],o){const a=Bt(n,"x","depthwiseConv2d","float32"),l=Bt(t,"filter","depthwiseConv2d","float32");let u=a,h=!1;a.rank===3&&(h=!0,u=ne(a,[1,a.shape[0],a.shape[1],a.shape[2]])),wt(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),wt(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const f=i==="NHWC"?u.shape[3]:u.shape[1];wt(f===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${f}) must match the inChannels dimension in filter ${l.shape[2]}.`),ao("depthwiseConv2d",s,o);const g={x:u,filter:l},m={strides:e,pad:s,dataFormat:i,dilations:r,dimRoundingMode:o},y=te.runKernel(L1,g,m);return h?ne(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const Qy=ie({depthwiseConv2d_:lL});function cL(n,t,e,s,i=[1,1],r="NHWC"){const o=Bt(n,"x","dilation2d"),a=Bt(t,"filter","dilation2d");wt(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),wt(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),wt(r==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${r}`);let l=o,u=!1;o.rank===3&&(l=ne(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=!0),wt(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const h={x:l,filter:a},f={strides:e,pad:s,dilations:i},g=te.runKernel(B1,h,f);return u?ne(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const uL=ie({dilation2d_:cL});function Ud(n,t){const e=n.length,s=[];for(let i=0;i<e;i++){const r=e-1-i,o=n[r]||1;(t[t.length-1-i]||1)>1&&o===1&&s.unshift(r)}return s}function Hi(n,t){const e=[];for(let s=0;s<t.length;s++){const i=n[n.length-s-1],r=t.length-s-1,o=t[r];(i==null||i===1&&o>1)&&e.unshift(r)}return e}function es(n,t){const e=Math.max(n.length,t.length),s=new Array(e);for(let i=0;i<e;i++){let r=n[n.length-i-1];r==null&&(r=1);let o=t[t.length-i-1];if(o==null&&(o=1),r===1)s[e-i-1]=o;else if(o===1)s[e-i-1]=r;else if(r!==o){const a=`Operands could not be broadcast together with shapes ${n} and ${t}.`;throw Error(a)}else s[e-i-1]=r}return s}function hL(n,t){let e=Bt(n,"a","equal","string_or_numeric"),s=Bt(t,"b","equal","string_or_numeric");[e,s]=Ei(e,s),es(e.shape,s.shape);const i={a:e,b:s};return te.runKernel(z1,i)}const kl=ie({equal_:hL});function dL(n,t,e){const s=Bt(t,"a","where"),i=Bt(e,"b","where"),r=Bt(n,"condition","where","bool"),o=es(es(r.shape,s.shape),i.shape),a=yp(r,o),l=yp(s,o),u=yp(i,o),h={condition:a,t:l,e:u};return te.runKernel(m2,h)}const zr=ie({where_:dL});function fL(n){const e={x:Bt(n,"x","zerosLike")};return te.runKernel(S2,e)}const As=ie({zerosLike_:fL});function pL(n,t){let e=Bt(n,"a","div"),s=Bt(t,"b","div");[e,s]=Ei(e,s);const i=Mn(e,s),r=As(i),o=kl(s,r);return zr(o,r,i)}const gL=ie({divNoNan_:pL});function mL(n,t){const e=Bt(n,"t1","dot"),s=Bt(t,"t2","dot");wt((e.rank===1||e.rank===2)&&(s.rank===1||s.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${e.rank} and ${s.rank}.`);const i=e.rank===1?e.size:e.shape[1],r=s.rank===1?s.size:s.shape[0];if(wt(i===r,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${r}.`),e.rank===1&&s.rank===1){const o=ne(e,[1,-1]),a=ne(s,[-1,1]),l=Ls(o,a);return ne(l,[])}else if(e.rank===1&&s.rank===2){const o=ne(e,[1,-1]),a=ne(s,[s.shape[0],s.shape[1]]),l=Ls(o,a);return ne(l,[l.size])}else if(e.rank===2&&s.rank===1){const o=ne(s,[-1,1]),a=Ls(e,o);return ne(a,[a.size])}else{const o=ne(s,[s.shape[0],s.shape[1]]);return Ls(e,o)}}const xL=ie({dot_:mL});function bL(n,...t){const e=t.map((i,r)=>Bt(i,`tensors${r}`,"einsum")),s={equation:n};return te.runKernel(ky,e,s)}const ip=ie({einsum_:bL});function vL(n){const e={x:Bt(n,"x","elu","float32")};return te.runKernel(i0,e)}const N2=ie({elu_:vL});function yL(n){let t=Bt(n,"x","erf");wt(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=rn(t,"float32"));const e={x:t};return te.runKernel(r0,e)}const l5=ie({erf_:yL});function tw(n,t){for(let e=0;e<n.length;++e)if(n[n.length-e-1]!==t-1-e)return!1;return!0}function c5(n,t,e){const s=n.length+t.length,i=[];let r=0,o=0;for(let a=0;a<s;a++)e.indexOf(a)===-1?i.push(n[r++]):i.push(t[o++]);return i}function tr(n,t){const e=[],s=n.length;for(let r=0;r<s;r++)t.indexOf(r)===-1&&e.push(n[r]);const i=t.map(r=>n[r]);return[e,i]}function Fi(n,t){const e=t.map(s=>1);return c5(n,e,t)}function ur(n,t,e){wt(tw(t,e),()=>`${n} supports only inner-most axes for now. Got axes ${t} and rank-${e} input.`)}function xi(n,t){if(tw(n,t))return null;const e=[];for(let s=0;s<t;++s)n.indexOf(s)===-1&&e.push(s);return n.forEach(s=>e.push(s)),e}function uu(n){return n.map((t,e)=>[e,t]).sort((t,e)=>t[1]-e[1]).map(t=>t[0])}function _i(n,t){const e=[];for(let s=t-n;s<t;++s)e.push(s);return e}function wL(n,t=null,e=!1){const i={x:Bt(n,"x","max")},r={reductionIndices:t,keepDims:e};return te.runKernel(J1,i,r)}const Ha=ie({max_:wL});function kL(n,t=null,e=!1){const i={x:Bt(n,"x","min")},r={axis:t,keepDims:e};return te.runKernel(n2,i,r)}const Hm=ie({min_:kL});function CL(n,t){let e=Bt(n,"base","pow"),s=Bt(t,"exp","pow");[e,s]=Ei(e,s);const i={a:e,b:s};return te.runKernel(w0,i)}const Eh=ie({pow_:CL});function Bs(n,t){if((fa(n)&&t!=="string"||Array.isArray(n))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&fa(n)&&!(n instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return E2(n,[],[],t)}function SL(n){const e={x:Bt(n,"x","sqrt","float32")};return te.runKernel(R0,e)}const yr=ie({sqrt_:SL});function TL(n){const t=Bt(n,"x","square"),e={};return te.runKernel("Square",{x:t},e)}const ai=ie({square_:TL});function IL(n,t=null,e=!1){let s=Bt(n,"x","sum");s.dtype==="bool"&&(s=rn(s,"int32"));const i={x:s},r={axis:t,keepDims:e};return te.runKernel(b2,i,r)}const Rn=ie({sum_:IL});function EL(n,t="euclidean",e=null,s=!1){n=Bt(n,"x","norm");const i=u5(n,t,e);let r=i.shape;if(s){const o=ds(e,n.shape);r=Fi(i.shape,o)}return ne(i,r)}function u5(n,t,e=null){if(n.rank===0)return Fr(n);if(n.rank!==1&&e===null)return u5(ne(n,[-1]),t,e);if(n.rank===1||typeof e=="number"||Array.isArray(e)&&e.length===1){if(t===1)return Rn(Fr(n),e);if(t===1/0)return Ha(Fr(n),e);if(t===-1/0)return Hm(Fr(n),e);if(t==="euclidean"||t===2)return yr(Rn(Eh(Fr(n),Bs(2,"int32")),e));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(e)&&e.length===2){if(t===1)return Ha(Rn(Fr(n),e[0]),e[1]-1);if(t===1/0)return Ha(Rn(Fr(n),e[1]),e[0]);if(t===-1/0)return Hm(Rn(Fr(n),e[1]),e[0]);if(t==="fro"||t==="euclidean")return yr(Rn(ai(n),e));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${e}`)}const D2=ie({norm_:EL});function _L(n,t=null,e=!1){return D2(n,"euclidean",t,e)}const AL=ie({euclideanNorm_:_L});function $L(n){const e={x:Bt(n,"x","exp")};return te.runKernel(o0,e)}const Cl=ie({exp_:$L});function NL(n,t=0){const e=Bt(n,"x","expandDims","string_or_numeric");wt(t<=e.rank,()=>"Axis must be <= rank of the tensor");const s={input:e},i={dim:t};return te.runKernel(W1,s,i)}const to=ie({expandDims_:NL});function DL(n){const e={x:Bt(n,"x","expm1")};return te.runKernel(a0,e)}const RL=ie({expm1_:DL});function ML(n,t){const e=Bt(n,"x","tile","string_or_numeric");wt(e.rank===t.length,()=>`Error in transpose: rank of input ${e.rank} must match length of reps ${t}.`);const s={x:e},i={reps:t};return te.runKernel(L0,s,i)}const Va=ie({tile_:ML});function OL(n,t,e,s="float32"){t==null&&(t=n);const i=hs([n,t],s),r=n<=t?n:t;for(let a=0;a<r;++a)i.set(1,a,a);const o=ne(i.toTensor(),[n,t]);if(e==null)return o;if(e.length===1)return Va(to(o,0),[e[0],1,1]);if(e.length===2)return Va(to(to(o,0),0),[e[0],e[1],1,1]);if(e.length===3)return Va(to(to(to(o,0),0),0),[e[0],e[1],e[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${e.length}D.`)}const h5=ie({eye_:OL});function FL(n){const e={x:Bt(n,"x","floor","float32")};return te.runKernel(l0,e)}const R2=ie({floor_:FL});function PL(n,t,e=0,s=0){const i=Bt(n,"x","gather"),r=Bt(t,"indices","gather","int32"),o={x:i,indices:r},a={axis:e,batchDims:s};return te.runKernel(U1,o,a)}const ew=ie({gather_:PL});function LL(n,t){let e=Bt(n,"a","greater","string_or_numeric"),s=Bt(t,"b","greater","string_or_numeric");[e,s]=Ei(e,s),es(e.shape,s.shape);const i={a:e,b:s};return te.runKernel(G1,i)}const qo=ie({greater_:LL});function BL(n,t){let e=Bt(n,"a","greaterEqual","string_or_numeric"),s=Bt(t,"b","greaterEqual","string_or_numeric");[e,s]=Ei(e,s),es(e.shape,s.shape);const i={a:e,b:s};return te.runKernel(u0,i)}const Ph=ie({greaterEqual_:BL});function zL(n){const e={input:Bt(n,"input","imag")};return te.runKernel(_y,e)}const nw=ie({imag_:zL});function WL(n){const e={x:Bt(n,"x","isFinite")};return te.runKernel(d0,e)}const VL=ie({isFinite_:WL});function UL(n){const e={x:Bt(n,"x","isInf")};return te.runKernel(f0,e)}const GL=ie({isInf_:UL});function HL(n){const e={x:Bt(n,"x","isNaN")};return te.runKernel(p0,e)}const jL=ie({isNaN_:HL});function XL(n,t=.2){const s={x:Bt(n,"x","leakyRelu")},i={alpha:t};return te.runKernel(H1,s,i)}const sw=ie({leakyRelu_:XL});function qL(n,t){let e=Bt(n,"a","less","string_or_numeric"),s=Bt(t,"b","less","string_or_numeric");[e,s]=Ei(e,s),es(e.shape,s.shape);const i={a:e,b:s};return te.runKernel(j1,i)}const jm=ie({less_:qL});function KL(n,t){let e=Bt(n,"a","lessEqual","string_or_numeric"),s=Bt(t,"b","lessEqual","string_or_numeric");[e,s]=Ei(e,s),es(e.shape,s.shape);const i={a:e,b:s};return te.runKernel(X1,i)}const lf=ie({lessEqual_:KL});function YL(n,t=5,e=1,s=1,i=.5){const r=Bt(n,"x","localResponseNormalization");wt(r.rank===4||r.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${r.rank}.`),wt(zd(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let o=r,a=!1;r.rank===3&&(a=!0,o=ne(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const l={x:o},u={depthRadius:t,bias:e,alpha:s,beta:i},h=te.runKernel(Z1,l,u);return a?ne(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const ZL=ie({localResponseNormalization_:YL});function JL(n){const e={x:Bt(n,"x","log","float32")};return te.runKernel(g0,e)}const Sl=ie({log_:JL});function QL(n){const e={x:Bt(n,"x","log1p")};return te.runKernel(m0,e)}const d5=ie({log1p_:QL});function tB(n,t){wt(Zb(n),()=>"The f passed in variableGrads(f) must be a function"),wt(t==null||Array.isArray(t)&&t.every(u=>u instanceof Gm),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const e=t!=null;if(!e){t=[];for(const u in te.registeredVariables)t.push(te.registeredVariables[u])}const s=e?t.filter(u=>!u.trainable):null,i=t.length;t=t.filter(u=>u.trainable),wt(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const r=!0,{value:o,grads:a}=te.gradients(n,t,null,r);wt(a.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),wt(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return t.forEach((u,h)=>{a[h]!=null&&(l[u.name]=a[h])}),s?.forEach(u=>l[u.name]=null),{value:o,grads:l}}function Gd(n){return te.customGrad(n)}function eB(n){const e={x:Bt(n,"x","neg")};return te.runKernel(i2,e)}const Ii=ie({neg_:eB});function nB(n){const e={x:Bt(n,"x","softplus")};return te.runKernel(D0,e)}const W0=ie({softplus_:nB});function sB(n){const t=Bt(n,"x","logSigmoid");return Gd(s=>({value:Ii(W0(Ii(s))),gradFunc:o=>Jt(o,af(Ii(s)))}))(t)}const iB=ie({logSigmoid_:sB});function rB(n,t){let e=Bt(n,"a","sub"),s=Bt(t,"b","sub");[e,s]=Ei(e,s);const i={a:e,b:s};return te.runKernel(O0,i)}const Vn=ie({sub_:rB});function oB(n,t=-1){const e=Bt(n,"logits","logSoftmax");if(t===-1&&(t=e.rank-1),t!==e.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${e.rank} and axis was ${t}`);return Gd((i,r)=>{const a=Ha(i,t,!0),l=Vn(i,a),u=Vn(rn(l,"float32"),Sl(Rn(Cl(l),t,!0)));return r([u]),{value:u,gradFunc:(f,g)=>{const[m]=g,y=!0,k=Cl(m);return Vn(f,Jt(Rn(f,t,y),k))}}})(e)}const f5=ie({logSoftmax_:oB});function aB(n,t=null,e=!1){const s=Bt(n,"x","logSumExp"),i=ds(t,s.shape),r=Ha(s,i,!0),o=Vn(s,r),a=Cl(o),l=Rn(a,i),u=Sl(l),h=Be(ne(r,u.shape),u);if(e){const f=Fi(h.shape,i);return ne(h,f)}return h}const p5=ie({logSumExp_:aB});function lB(n,t){const e=Bt(n,"a","logicalAnd","bool"),s=Bt(t,"b","logicalAnd","bool");es(e.shape,s.shape);const i={a:e,b:s};return te.runKernel(q1,i)}const rc=ie({logicalAnd_:lB});function cB(n){const e={x:Bt(n,"x","logicalNot","bool")};return te.runKernel(K1,e)}const iw=ie({logicalNot_:cB});function uB(n,t){const e=Bt(n,"a","logicalOr","bool"),s=Bt(t,"b","logicalOr","bool");es(e.shape,s.shape);const i={a:e,b:s};return te.runKernel(Y1,i)}const g5=ie({logicalOr_:uB});function hB(n,t){const e=Bt(n,"a","logicalXor","bool"),s=Bt(t,"b","logicalXor","bool");return es(e.shape,s.shape),rc(g5(n,t),iw(rc(n,t)))}const dB=ie({logicalXor_:hB});function fB(n,t,e,s,i){const r=Bt(n,"x","maxPool"),o=1;let a=r,l=!1;r.rank===3&&(l=!0,a=ne(r,[1,r.shape[0],r.shape[1],r.shape[2]])),wt(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),wt(Sr(e,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${e} and dilations '${o}'`),ao("maxPool",s,i);const u={x:a},h={filterSize:t,strides:e,pad:s,dimRoundingMode:i},f=te.runKernel(Q1,u,h);return l?ne(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const rw=ie({maxPool_:fB});function pB(n,t=[1,1,1],e,s,i,r="NDHWC"){const o=Bt(n,"x","maxPool3d");let a=o,l=!1;o.rank===4&&(l=!0,a=ne(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),wt(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),wt(r==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${r}`),ao("maxPool3d",s,i);const u={x:a},h={filterSize:t,strides:e,pad:s,dimRoundingMode:i,dataFormat:r},f=te.runKernel(t2,u,h);return l?ne(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const gB=ie({maxPool3d_:pB});function mB(n,t){let e=Bt(n,"a","maximum"),s=Bt(t,"b","maximum");[e,s]=Ei(e,s),e.dtype==="bool"&&(e=rn(e,"int32"),s=rn(s,"int32")),es(e.shape,s.shape);const i={a:e,b:s};return te.runKernel(x0,i)}const hu=ie({maximum_:mB});function xB(n,t=null,e=!1){const i={x:Bt(n,"x","mean")},r={axis:t,keepDims:e};return te.runKernel(e2,i,r)}const Oi=ie({mean_:xB});function Zi(n,t="float32"){if(uc(n),t==="complex64"){const s=Zi(n,"float32"),i=Zi(n,"float32");return Vd(s,i)}const e=vr(Ce(n),t);return te.makeTensor(e,n,t)}function du(n,t="float32"){if(uc(n),t==="complex64"){const s=du(n,"float32"),i=Zi(n,"float32");return Vd(s,i)}const e=ny(Ce(n),t);return te.makeTensor(e,n,t)}function bB(n,t){let e=Bt(n,"a","minimum"),s=Bt(t,"b","minimum");[e,s]=Ei(e,s),e.dtype==="bool"&&(e=rn(e,"int32"),s=rn(s,"int32")),es(e.shape,s.shape);const i={a:e,b:s};return te.runKernel(b0,i)}const Ip=ie({minimum_:bB});function vB(n,t,e){wt(e==="reflect"||e==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${e}.`);const s=Bt(n,"x","mirrorPad");if(s.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");wt(t.length===s.rank,()=>`Padding doesn't match input. Must be ${s.rank}. Got ${t.length}.`);const i=e==="reflect"?1:0;for(let a=0;a<s.rank;a++)wt(t[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),wt(t[a][0]>=0&&t[a][0]<=s.shape[a]-i&&t[a][1]>=0&&t[a][1]<=s.shape[a]-i,()=>`Padding in dimension ${a} cannot be greater than or equal to ${s.shape[a]-i} or less than 0 for input of shape ${s.shape}`);const r={paddings:t,mode:e},o={x:s};return te.runKernel(s2,o,r)}const yB=ie({mirrorPad_:vB});function wB(n,t){let e=Bt(n,"a","mod"),s=Bt(t,"b","mod");[e,s]=Ei(e,s);const i={a:e,b:s};return te.runKernel(v0,i)}const kB=ie({mod_:wB});function CB(n,t=null,e=!1){n=Bt(n,"x","moments");const s=ds(t,n.shape),i=Oi(n,s,e);let r=i.shape;e||(r=Fi(i.shape,s));const o=ai(Vn(rn(n,"float32"),ne(i,r))),a=Oi(o,s,e);return{mean:i,variance:a}}const ow=ie({moments_:CB});function SB(n,t){let e=Bt(n,"a","notEqual","string_or_numeric"),s=Bt(t,"b","notEqual","string_or_numeric");[e,s]=Ei(e,s),es(e.shape,s.shape);const i={a:e,b:s};return te.runKernel(r2,i)}const Xm=ie({notEqual_:SB});function TB(n,t,e=1,s=0,i="int32"){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const o={indices:Bt(n,"indices","oneHot","int32")},a={dtype:i,depth:t,onValue:e,offValue:s};return te.runKernel(a2,o,a)}const m5=ie({oneHot_:TB});function IB(n){const e={x:Bt(n,"x","onesLike")};return te.runKernel(o2,e)}const pa=ie({onesLike_:IB});function EB(n,t,e=0){const s=Bt(n,"x","pad");if(s.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:t,constantValue:e},r={x:s};return te.runKernel(c2,r,i)}const aw=ie({pad_:EB});function _B(n,t,e){const s=Bt(n,"x","spaceToBatchND");wt(s.rank>=1+t.length,()=>`input rank ${s.rank} should be > than [blockShape] ${t.length}`),wt(e.length===t.length,()=>`paddings.shape[0] ${e.length} must be equal to [blockShape] ${t.length}`),wt(s.shape.reduce((o,a,l)=>l>0&&l<=t.length?o&&(a+e[l-1][0]+e[l-1][1])%t[l-1]===0:o,!0),()=>`input spatial dimensions ${s.shape.slice(1)} with paddings ${e.toString()} must be divisible by blockShapes ${t.toString()}`);const i={x:s},r={blockShape:t,paddings:e};return te.runKernel(v2,i,r)}const lw=ie({spaceToBatchND_:_B});function AB(n,t,e,s,i,r,o){i==null&&(i=[1,1]),r==null&&(r=1),s===0&&(s="valid");const a=Bt(n,"x","maxPool");let l=a,u=!1;a.rank===3&&(u=!0,l=ne(a,[1,a.shape[0],a.shape[1],a.shape[2]])),wt(Sr(r,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${r} and dilations '${i}'`);const h=ga(l.shape,t,r,i,s),f=[h.dilationHeight,h.dilationWidth];let g;s==="same"?g=NB([h.filterHeight,h.filterWidth],f):g=[[0,0],[0,0]];const m=f[0]===1&&f[1]===1,[y,k]=$B([h.inHeight,h.inWidth],f,g),C=m?s:"valid",S=m?l:lw(l,f,y),D=(e==="avg"?()=>Ky(S,t,r,C,o):()=>rw(S,t,r,C,o))(),R=m?D:Yy(D,f,k);return u?ne(R,[R.shape[1],R.shape[2],R.shape[3]]):R}function $B(n,t,e){const s=e.map(h=>h[0]),i=e.map(h=>h[1]),r=n.concat(s,i),o=t.map((h,f)=>(h-r[f]%h)%h),a=i.map((h,f)=>h+o[f]),l=t.map((h,f)=>[s[f],a[f]]),u=t.map((h,f)=>[0,o[f]]);return[l,u]}function NB(n,t){const s=n.map((o,a)=>o+(o-1)*(t[a]-1)).map(o=>o-1),i=s.map(o=>Math.floor(o/2)),r=s.map((o,a)=>o-i[a]);return s.map((o,a)=>[i[a],r[a]])}const DB=ie({pool_:AB});function RB(n,t){const e=Bt(n,"x","prelu"),s=Bt(t,"alpha","prelu"),i={x:e,alpha:s};return te.runKernel(u2,i)}const cw=ie({prelu_:RB});function MB(n,t=null,e=!1){let s=Bt(n,"x","prod");s.dtype==="bool"&&(s=rn(s,"int32"));const i={x:s},r={axis:t,keepDims:e};return te.runKernel(h2,i,r)}const OB=ie({prod_:MB});var km={exports:{}},FB=km.exports,K4;function PB(){return K4||(K4=1,(function(n){(function(t,e,s){function i(l){var u=this,h=a();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=h(" "),u.s1=h(" "),u.s2=h(" "),u.s0-=h(l),u.s0<0&&(u.s0+=1),u.s1-=h(l),u.s1<0&&(u.s1+=1),u.s2-=h(l),u.s2<0&&(u.s2+=1),h=null}function r(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function o(l,u){var h=new i(l),f=u&&u.state,g=h.next;return g.int32=function(){return h.next()*4294967296|0},g.double=function(){return g()+(g()*2097152|0)*11102230246251565e-32},g.quick=g,f&&(typeof f=="object"&&r(f,h),g.state=function(){return r(h,{})}),g}function a(){var l=4022871197,u=function(h){h=String(h);for(var f=0;f<h.length;f++){l+=h.charCodeAt(f);var g=.02519603282416938*l;l=g>>>0,g-=l,g*=l,l=g>>>0,g-=l,l+=g*4294967296}return(l>>>0)*23283064365386963e-26};return u}e&&e.exports?e.exports=o:this.alea=o})(FB,n)})(km)),km.exports}var Cm={exports:{}},LB=Cm.exports,Y4;function BB(){return Y4||(Y4=1,(function(n){(function(t,e,s){function i(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},a===(a|0)?l.x=a:u+=a;for(var h=0;h<u.length+64;h++)l.x^=u.charCodeAt(h)|0,l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var u=new i(a),h=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var g=u.next()>>>11,m=(u.next()>>>0)/4294967296,y=(g+m)/(1<<21);while(y===0);return y},f.int32=u.next,f.quick=f,h&&(typeof h=="object"&&r(h,u),f.state=function(){return r(u,{})}),f}e&&e.exports?e.exports=o:this.xor128=o})(LB,n)})(Cm)),Cm.exports}var Sm={exports:{}},zB=Sm.exports,Z4;function WB(){return Z4||(Z4=1,(function(n){(function(t,e,s){function i(a){var l=this,u="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var h=0;h<u.length+64;h++)l.x^=u.charCodeAt(h)|0,h==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var u=new i(a),h=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var g=u.next()>>>11,m=(u.next()>>>0)/4294967296,y=(g+m)/(1<<21);while(y===0);return y},f.int32=u.next,f.quick=f,h&&(typeof h=="object"&&r(h,u),f.state=function(){return r(u,{})}),f}e&&e.exports?e.exports=o:this.xorwow=o})(zB,n)})(Sm)),Sm.exports}var Tm={exports:{}},VB=Tm.exports,J4;function UB(){return J4||(J4=1,(function(n){(function(t,e,s){function i(a){var l=this;l.next=function(){var h=l.x,f=l.i,g,m;return g=h[f],g^=g>>>7,m=g^g<<24,g=h[f+1&7],m^=g^g>>>10,g=h[f+3&7],m^=g^g>>>3,g=h[f+4&7],m^=g^g<<7,g=h[f+7&7],g=g^g<<13,m^=g^g<<9,h[f]=m,l.i=f+1&7,m};function u(h,f){var g,m=[];if(f===(f|0))m[0]=f;else for(f=""+f,g=0;g<f.length;++g)m[g&7]=m[g&7]<<15^f.charCodeAt(g)+m[g+1&7]<<13;for(;m.length<8;)m.push(0);for(g=0;g<8&&m[g]===0;++g);for(g==8?m[7]=-1:m[g],h.x=m,h.i=0,g=256;g>0;--g)h.next()}u(l,a)}function r(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var u=new i(a),h=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var g=u.next()>>>11,m=(u.next()>>>0)/4294967296,y=(g+m)/(1<<21);while(y===0);return y},f.int32=u.next,f.quick=f,h&&(h.x&&r(h,u),f.state=function(){return r(u,{})}),f}e&&e.exports?e.exports=o:this.xorshift7=o})(VB,n)})(Tm)),Tm.exports}var Im={exports:{}},GB=Im.exports,Q4;function HB(){return Q4||(Q4=1,(function(n){(function(t,e,s){function i(a){var l=this;l.next=function(){var h=l.w,f=l.X,g=l.i,m,y;return l.w=h=h+1640531527|0,y=f[g+34&127],m=f[g=g+1&127],y^=y<<13,m^=m<<17,y^=y>>>15,m^=m>>>12,y=f[g]=y^m,l.i=g,y+(h^h>>>16)|0};function u(h,f){var g,m,y,k,C,S=[],$=128;for(f===(f|0)?(m=f,f=null):(f=f+"\0",m=0,$=Math.max($,f.length)),y=0,k=-32;k<$;++k)f&&(m^=f.charCodeAt((k+32)%f.length)),k===0&&(C=m),m^=m<<10,m^=m>>>15,m^=m<<4,m^=m>>>13,k>=0&&(C=C+1640531527|0,g=S[k&127]^=m+C,y=g==0?y+1:0);for(y>=128&&(S[(f&&f.length||0)&127]=-1),y=127,k=512;k>0;--k)m=S[y+34&127],g=S[y=y+1&127],m^=m<<13,g^=g<<17,m^=m>>>15,g^=g>>>12,S[y]=m^g;h.w=C,h.X=S,h.i=y}u(l,a)}function r(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var u=new i(a),h=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var g=u.next()>>>11,m=(u.next()>>>0)/4294967296,y=(g+m)/(1<<21);while(y===0);return y},f.int32=u.next,f.quick=f,h&&(h.X&&r(h,u),f.state=function(){return r(u,{})}),f}e&&e.exports?e.exports=o:this.xor4096=o})(GB,n)})(Im)),Im.exports}var Em={exports:{}},jB=Em.exports,tC;function XB(){return tC||(tC=1,(function(n){(function(t,e,s){function i(a){var l=this,u="";l.next=function(){var f=l.b,g=l.c,m=l.d,y=l.a;return f=f<<25^f>>>7^g,g=g-m|0,m=m<<24^m>>>8^y,y=y-f|0,l.b=f=f<<20^f>>>12^g,l.c=g=g-m|0,l.d=m<<16^g>>>16^y,l.a=y-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var h=0;h<u.length+20;h++)l.b^=u.charCodeAt(h)|0,l.next()}function r(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var u=new i(a),h=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var g=u.next()>>>11,m=(u.next()>>>0)/4294967296,y=(g+m)/(1<<21);while(y===0);return y},f.int32=u.next,f.quick=f,h&&(typeof h=="object"&&r(h,u),f.state=function(){return r(u,{})}),f}e&&e.exports?e.exports=o:this.tychei=o})(jB,n)})(Em)),Em.exports}var _m={exports:{}};const qB={},KB=Object.freeze(Object.defineProperty({__proto__:null,default:qB},Symbol.toStringTag,{value:"Module"})),YB=J7(KB);var ZB=_m.exports,eC;function JB(){return eC||(eC=1,(function(n){(function(t,e,s){var i=256,r=6,o=52,a="random",l=s.pow(i,r),u=s.pow(2,o),h=u*2,f=i-1,g;function m(R,V,E){var q=[];V=V==!0?{entropy:!0}:V||{};var X=S(C(V.entropy?[R,D(e)]:R??$(),3),q),B=new y(q),U=function(){for(var K=B.g(r),Y=l,ct=0;K<u;)K=(K+ct)*i,Y*=i,ct=B.g(1);for(;K>=h;)K/=2,Y/=2,ct>>>=1;return(K+ct)/Y};return U.int32=function(){return B.g(4)|0},U.quick=function(){return B.g(4)/4294967296},U.double=U,S(D(B.S),e),(V.pass||E||function(K,Y,ct,j){return j&&(j.S&&k(j,B),K.state=function(){return k(B,{})}),ct?(s[a]=K,Y):K})(U,X,"global"in V?V.global:this==s,V.state)}function y(R){var V,E=R.length,q=this,X=0,B=q.i=q.j=0,U=q.S=[];for(E||(R=[E++]);X<i;)U[X]=X++;for(X=0;X<i;X++)U[X]=U[B=f&B+R[X%E]+(V=U[X])],U[B]=V;(q.g=function(K){for(var Y,ct=0,j=q.i,ht=q.j,It=q.S;K--;)Y=It[j=f&j+1],ct=ct*i+It[f&(It[j]=It[ht=f&ht+Y])+(It[ht]=Y)];return q.i=j,q.j=ht,ct})(i)}function k(R,V){return V.i=R.i,V.j=R.j,V.S=R.S.slice(),V}function C(R,V){var E=[],q=typeof R,X;if(V&&q=="object")for(X in R)try{E.push(C(R[X],V-1))}catch{}return E.length?E:q=="string"?R:R+"\0"}function S(R,V){for(var E=R+"",q,X=0;X<E.length;)V[f&X]=f&(q^=V[f&X]*19)+E.charCodeAt(X++);return D(V)}function $(){try{var R;return g&&(R=g.randomBytes)?R=R(i):(R=new Uint8Array(i),(t.crypto||t.msCrypto).getRandomValues(R)),D(R)}catch{var V=t.navigator,E=V&&V.plugins;return[+new Date,t,E,t.screen,D(e)]}}function D(R){return String.fromCharCode.apply(0,R)}if(S(s.random(),e),n.exports){n.exports=m;try{g=YB}catch{}}else s["seed"+a]=m})(typeof self<"u"?self:ZB,[],Math)})(_m)),_m.exports}var vb,nC;function QB(){if(nC)return vb;nC=1;var n=PB(),t=BB(),e=WB(),s=UB(),i=HB(),r=XB(),o=JB();return o.alea=n,o.xor128=t,o.xorwow=e,o.xorshift7=s,o.xor4096=i,o.tychei=r,vb=o,vb}var uw=QB();class x5{constructor(t,e,s,i,r){this.mean=t,this.stdDev=e,this.dtype=s,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=r||Math.random();this.random=uw.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let t,e,s=!1;for(;!s;){let i,r,o;do i=2*this.random()-1,r=2*this.random()-1,o=i*i+r*r;while(o>=1||o===0);const a=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*i*a,e=this.mean+this.stdDev*r*a,(!this.truncated||this.isValidTruncated(t))&&(s=!0)}return(!this.truncated||this.isValidTruncated(e))&&(this.nextVal=this.convertValue(e)),this.convertValue(t)}convertValue(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}class tz{constructor(t=0,e=1,s,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=t,this.range=e-t,this.dtype=s,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${e} <= 1 and dtype is not float`);this.random=uw.alea(i)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}function ez(n,t=0,e=1,s,i){if(uc(n),s!=null&&s==="bool")throw new Error(`Unsupported data type ${s}`);const r=new x5(t,e,s,!1,i),o=hs(n,s);for(let a=0;a<o.values.length;a++)o.values[a]=r.nextValue();return o.toTensor()}const nz=ie({randomNormal_:ez});function sz(n,t=0,e=1,s="float32",i){uc(n);const r=hs(n,s),o=new tz(t,e,null,i);for(let a=0;a<r.values.length;a++)r.values[a]=o.nextValue();return r.toTensor()}const V0=ie({randomUniform_:sz});function Ep(n,t,e=1,s="float32"){if(e===0)throw new Error("Cannot have a step of zero");const i={start:n,stop:t,step:e,dtype:s};return te.runKernel(Oy,{},i)}function iz(n){const e={input:Bt(n,"input","real")};return te.runKernel(Fy,e)}const qm=ie({real_:iz});function rz(n){const e={x:Bt(n,"x","reciprocal")};return te.runKernel(k0,e)}const oz=ie({reciprocal_:rz});function az(n){const e={x:Bt(n,"x","relu")};return te.runKernel(C0,e)}const Lh=ie({relu_:az});function lz(n){const e={x:Bt(n,"x","relu6")};return te.runKernel(S0,e)}const b5=ie({relu6_:lz});function cz(n,t){const s={x:Bt(n,"x","reverse")},i={dims:t};return te.runKernel(g2,s,i)}const _h=ie({reverse_:cz});function uz(n){const e={x:Bt(n,"x","round")};return te.runKernel(T0,e)}const v5=ie({round_:uz});function hz(n){const e={x:Bt(n,"x","rsqrt","float32")};return te.runKernel(I0,e)}const y5=ie({rsqrt_:hz});function dz(n){const e={x:Bt(n,"x","selu")};return te.runKernel(E0,e)}const w5=ie({selu_:dz});function fz(n,t,e,s,i,r=[1,1],o="NHWC"){const a=Bt(n,"x","separableConv2d"),l=Bt(t,"depthwiseFilter","separableConv2d"),u=Bt(e,"pointwiseFilter","separableConv2d");let h=a,f=!1;if(a.rank===3&&(f=!0,h=ne(a,[1,a.shape[0],a.shape[1],a.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");wt(h.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${h.rank}.`),wt(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),wt(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),wt(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),wt(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const g=l.shape[2],m=l.shape[3];wt(u.shape[2]===g*m,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${g*m}, but got ${u.shape[2]}.`);const y=Qy(h,l,s,i,o,r),C=Ih(y,u,1,"valid",o);return f?ne(C,[C.shape[1],C.shape[2],C.shape[3]]):C}const k5=ie({separableConv2d_:fz});function pz(n){const e={x:Bt(n,"x","sign")};return te.runKernel($0,e)}const gz=ie({sign_:pz});function mz(n){const e={x:Bt(n,"x","sin","float32")};return te.runKernel(_0,e)}const C5=ie({sin_:mz});function xz(n){const e={x:Bt(n,"x","sinh")};return te.runKernel(A0,e)}const S5=ie({sinh_:xz});function bz(n,t,e){const s=Bt(n,"x","slice1d");return wt(s.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${s.rank} tensor`),si(s,[t],[e])}const hw=ie({slice1d_:bz});function vz(n,t,e){const s=Bt(n,"x","slice2d");return wt(s.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${s.rank} tensor`),si(s,t,e)}const T5=ie({slice2d_:vz});function yz(n,t,e){const s=Bt(n,"x","slice3d");return wt(s.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${s.rank} tensor`),si(s,t,e)}const dw=ie({slice3d_:yz});function wz(n,t,e){const s=Bt(n,"x","slice4d");return wt(s.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${s.rank} tensor`),si(s,t,e)}const Km=ie({slice4d_:wz});function kz(n,t=-1){const e=Bt(n,"logits","softmax","float32");if(t===-1&&(t=e.rank-1),t!==e.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${e.rank} and dim was ${t}`);const s={logits:e},i={dim:t};return te.runKernel(w2,s,i)}const fw=ie({softmax_:kz});function Cz(n){wt(n.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${n.dtype}.`);const t={input:n};return te.runKernel(Sy,t)}const I5=ie({fft_:Cz});function Sz(n){wt(n.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${n.dtype}.`);const t={input:n};return te.runKernel(Ey,t)}const fv=ie({ifft_:Sz});function Tz(n){const t=n.shape[n.shape.length-1],e=n.size/t;let s;if(t<=2){const i=ne(n,[e,t]);s=fv(i)}else{const i=[e,2*(t-1)],r=ne(qm(n),[e,t]),o=ne(nw(n),[e,t]),a=_h(si(r,[0,1],[e,t-2]),1),l=Jt(_h(si(o,[0,1],[e,t-2]),1),Bs(-1)),u=so([r,a],1),h=so([o,l],1),f=ne(Vd(u,h),[i[0],i[1]]);s=fv(f)}if(s=qm(s),n.rank===3&&n.shape[0]!==0){const i=s,r=n.shape[0];s=ne(s,[r,s.shape[0]/r,s.shape[1]]),i.dispose()}return s}const Iz=ie({irfft_:Tz});function Ez(n,t,e=0){const i={x:Bt(n,"x","split")},r={numOrSizeSplits:t,axis:e};return te.runKernel(y2,i,r)}const jo=ie({split_:Ez});function _z(n,t){wt(n.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${n.dtype}`);let e=n.shape[n.shape.length-1];const s=n.size/e;let i;if(t!=null&&t<e){const y=n.shape.map(C=>0),k=n.shape.map(C=>C);k[n.shape.length-1]=t,i=si(n,y,k),e=t}else if(t!=null&&t>e){const y=n.shape.map(k=>k);y[n.shape.length-1]=t-e,i=so([n,Zi(y)],n.shape.length-1),e=t}else i=n;const r=As(i),o=ne(Vd(i,r),[s,e]),a=I5(o),l=Math.floor(e/2)+1,u=qm(a),h=nw(a),f=jo(u,[l,e-l],u.shape.length-1),g=jo(h,[l,e-l],h.shape.length-1),m=i.shape.slice();return m[i.shape.length-1]=l,ne(Vd(f[0],g[0]),m)}const Az=ie({rfft_:_z});function $z(n,t){let e=Bt(n,"a","squaredDifference"),s=Bt(t,"b","squaredDifference");[e,s]=Ei(e,s),es(e.shape,s.shape);const i={a:e,b:s},r={};return te.runKernel(M0,i,r)}const Nz=ie({squaredDifference_:$z});function Dz(n,t){const e=Bt(n,"x","squeeze","string_or_numeric");return ne(e,au(e.shape,t).newShape)}const U0=ie({squeeze_:Dz});function Rz(n,t=0){const e=HI(n,"tensors","stack","string_or_numeric");wt(e.length>=1,()=>"Pass at least one tensor to tf.stack"),e.length>0&&wt(t<=e[0].rank,()=>"Axis must be <= rank of the tensor");const s=e,i={axis:t};return te.runKernel(l2,s,i)}const oc=ie({stack_:Rz});function Mz(n,t=0){const s={x:Bt(n,"x","step")},i={alpha:t};return te.runKernel(B0,s,i)}const G0=ie({step_:Mz});function Oz(n,t,e,s,i=0,r=0,o=0,a=0,l=0){const h={x:Bt(n,"x","stridedSlice","string_or_numeric")},f={begin:t,end:e,strides:s,beginMask:i,endMask:r,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};return te.runKernel(Wy,h,f)}const Fz=ie({stridedSlice_:Oz});function Pz(n){const e={x:Bt(n,"x","tan","float32")};return te.runKernel(F0,e)}const Lz=ie({tan_:Pz});function ko(n,t){eI(n);const e=I2(n,t);if(e.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return E2(n,null,e,t)}function Wc(n,t,e){if(eI(n),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const s=I2(n,e);if(s.length!==2&&s.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(s.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return E2(n,t,s,e)}function Bh(n,t,e){const s=t.shape.length,i=s>1?t.shape[s-1]:1,r=e.length;let o=1;for(let f=i;f<r;++f)o*=e[f];const a=i<1?1:i,l=Ce(t.shape)/a,u=[...Dn(e.slice(0,i)),1],h=Ce(e);return{sliceRank:i,numUpdates:l,sliceSize:o,strides:u,outputSize:h}}function Bz(n,t=1,e=!0){const s=Bt(n,"x","topk");if(s.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const i=s.shape[s.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${t}`);const r={x:s},o={k:t,sorted:e},[a,l]=te.runKernel(Vy,r,o);return{values:a,indices:l}}const zz=ie({topk_:Bz});function Wz(n,t=0,e=1,s,i){if(uc(n),s!=null&&s==="bool")throw new Error("Unsupported data type $ { dtype }");const r=new x5(t,e,s,!0,i),o=hs(n,s);for(let a=0;a<o.values.length;a++)o.values[a]=r.nextValue();return o.toTensor()}const E5=ie({truncatedNormal_:Wz});function Vz(n,t=0){const e=Bt(n,"x","unique","string_or_numeric");wt(e.rank>0,()=>"The input tensor must be at least 1D");const s={x:e},i={axis:t},[r,o]=te.runKernel(Gy,s,i);return{values:r,indices:o}}const Uz=ie({unique_:Vz});function Gz(n,t,e){const s=Bt(n,"x","unsortedSegmentSum"),i=Bt(t,"segmentIds","unsortedSegmentSum","int32");wt(zd(e),()=>"numSegments must be of dtype int");const r={x:s,segmentIds:i},o={numSegments:e};return te.runKernel(C2,r,o)}const _5=ie({unsortedSegmentSum_:Gz});function Hz(n,t=0){const e=Bt(n,"x","unstack","string_or_numeric");wt(t>=-e.shape.length&&t<e.shape.length,()=>`Axis = ${t} is not in [-${e.shape.length}, ${e.shape.length})`);const s={value:e},i={axis:t};return te.runKernel(k2,s,i)}const Ah=ie({unstack_:Hz});function jz(n,t=!0,e,s){return te.makeVariable(n,t,e,s)}function A5(n,t){const e=[];for(let r=0;r<t.length;r++)t[r]&&e.push(r);const s=hs(n,"int32"),i=hs([e.length,n.length],"int32");for(let r=0;r<e.length;r++){const o=s.indexToLoc(e[r]),a=r*n.length;i.values.set(o,a)}return i.toTensor()}function Xz(n,t,e){const s=Bt(n,"x","transpose");if(t==null&&(t=s.shape.map((o,a)=>a).reverse()),wt(s.rank===t.length,()=>`Error in transpose: rank of input ${s.rank} must match length of perm ${t}.`),t.forEach(o=>{wt(o>=0&&o<s.rank,()=>`All entries in 'perm' must be between 0 and ${s.rank-1} but got ${t}`)}),s.rank<=1)return s.clone();const i={x:s},r={perm:t};return s.dtype==="complex64"?he(()=>{let o=qm(s),a=nw(s);return o=te.runKernel(Dd,{x:o},r),a=te.runKernel(Dd,{x:a},r),e&&(a=Ii(a)),Vd(o,a)}):te.runKernel(Dd,i,r)}const Es=ie({transpose_:Xz});function qz(n,t){if(t==null)return n.shape.slice();if(zs(n.shape,t))return t;if(n.shape.length===t.length){const e=[];for(let s=0;s<n.shape.length;s++)t[s]==null&&n.shape[s]!=null?e.push(n.shape[s]):e.push(t[s]);return e}return t}function Kz(n,t,e,s){const i=Bt(n,"x","dropout");if(wt(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),wt(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),t===0)return n instanceof zi?i.clone():i;const r=qz(i,e),o=1-t,a=Mn(R2(Be(V0(r,0,1,"float32",s),o)),o);return Jt(i,a)}const Yz=ie({dropout_:Kz});function Zz(n,t,e,s,i,r="NHWC",o){let a=n;n.rank===3&&(a=ne(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let l=t;l.rank===3&&(l=ne(t,[1,t.shape[0],t.shape[1],t.shape[2]])),wt(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),wt(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),wt(e.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${e}.`);const u=r==="NHWC"?a.shape[3]:a.shape[1],h=r==="NHWC"?l.shape[3]:l.shape[1];wt(u===e[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${e[2]}.`),wt(h===e[3],()=>`Error in conv2dDerFilter: depth of dy (${h}) must match output depth for filter (${e[3]}).`),ao("conv2dDerFilter",i,o);const f={x:a,dy:l},g={strides:s,pad:i,dataFormat:r,dimRoundingMode:o,filterShape:e};return te.runKernel(fy,f,g)}const pw=ie({conv2DBackpropFilter_:Zz});function gw(n,t,e){if(e==null||e==="linear")return n;if(e==="relu")return Jt(n,G0(t));throw new Error(`Cannot compute gradient for fused activation ${e}.`)}function mw(n,t){let e=t;const s=Hi(n.shape,t.shape);return s.length>0&&(e=Rn(e,s)),ne(e,n.shape)}function xw(n,t,e,s){if(t==="linear")return n;if(t==="relu")return Lh(n);if(t==="elu")return N2(n);if(t==="relu6")return b5(n);if(t==="prelu")return cw(n,e);if(t==="leakyrelu")return sw(n,s);if(t==="sigmoid")return af(n);throw new Error(`Unknown fused activation ${t}.`)}const bw=(n,t)=>!(n>0)||t==="linear";function Jz({x:n,filter:t,strides:e,pad:s,dataFormat:i="NHWC",dilations:r=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:h}){if(l=l||"linear",bw(te.state.gradientDepth,l)===!1){wt(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let E=Ih(n,t,e,s,i,r,o);return a!=null&&(E=Be(E,a)),xw(E,l,u,h)}const f=Bt(n,"x","conv2d","float32"),g=Bt(t,"filter","conv2d","float32");let m=f,y=!1;f.rank===3&&(y=!0,m=ne(f,[1,f.shape[0],f.shape[1],f.shape[2]])),wt(m.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${m.rank}.`),wt(g.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${g.rank}.`),ao("fused conv2d",s,o);const k=i==="NHWC"?m.shape[3]:m.shape[1];wt(g.shape[2]===k,()=>`Error in conv2d: depth of input (${k}) must match input depth for filter ${g.shape[2]}.`),wt(Sr(e,r),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${e} and dilations '${r}'`);const C=cr(m.shape,g.shape,e,r,s,o);let S;a!=null&&(S=Bt(a,"bias","fused conv2d"),[S]=Ei(S,f),i==="NHWC"?es(C.outShape,S.shape):(wt(S.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${S.shape.length}.`),wt(S.shape.length===0||S.shape[0]===C.outChannels||S.shape[0]===1,()=>`Error in fused conv2d: bias shape (${S.shape}) is not compatible with the number of output channels (${C.outChannels})`)));let $;if(u!=null){const E=u.shape;if(wt(E.length<=1||E.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${E.length}.`),E.length===1)wt(E[0]===1||E[0]===C.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the number of output channels (${C.outChannels}).`);else if(E.length===3)try{es(E,C.outShape)}catch{const X=`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the output shape of the conv2d (${C.outShape}).`;throw Error(X)}$=Bt(u,"prelu weights","fused conv2d")}const D=(E,q)=>{wt(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[X,B,U,K]=q,Y=gw(E,U,l);wt(Sh(r),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const ct=Zy(B.shape,Y,X,e,s),j=pw(B,Y,X.shape,e,s),ht=[ct,j];if(K!=null){const It=mw(K,Y);ht.push(It)}return ht},R={x:m,filter:g,bias:S,preluActivationWeights:$},V={strides:e,pad:s,dataFormat:i,dilations:r,dimRoundingMode:o,activation:l,leakyreluAlpha:h};return a==null?Gd((q,X,B)=>{let U=te.runKernel(Vm,R,V);return B([X,q,U]),y&&(U=ne(U,[U.shape[1],U.shape[2],U.shape[3]])),{value:U,gradFunc:D}})(m,g):Gd((q,X,B,U)=>{let K=te.runKernel(Vm,R,V);return U([X,q,K,B]),y&&(K=ne(K,[K.shape[1],K.shape[2],K.shape[3]])),{value:K,gradFunc:D}})(m,g,S)}const Qz=ie({fusedConv2d_:Jz});function tW(n,t,e,s,i,r=[1,1],o){let a=n;n.rank===3&&(a=ne(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let l=t;l.rank===3&&(l=ne(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={x:a,dy:l},h={strides:s,pad:i,dimRoundingMode:o,dilations:r,filterShape:e};return te.runKernel(yy,u,h)}const eW=ie({depthwiseConv2dNativeBackpropFilter_:tW});function nW(n,t,e,s,i,r=[1,1],o){let a=t,l=!1;t.rank===3&&(l=!0,a=ne(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={dy:a,filter:e},h={strides:s,pad:i,dimRoundingMode:o,dilations:r,inputShape:n},f=te.runKernel(wy,u,h);return l?ne(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const sW=ie({depthwiseConv2dNativeBackpropInput_:nW});function iW({a:n,b:t,transposeA:e=!1,transposeB:s=!1,bias:i,activation:r="linear",preluActivationWeights:o,leakyreluAlpha:a=.2}){if(bw(te.state.gradientDepth,r)===!1){let K=Ls(n,t,e,s);return i!=null&&(K=Be(K,i)),xw(K,r,o,a)}let l=Bt(n,"a","fused matMul"),u=Bt(t,"b","fused matMul");[l,u]=Ei(l,u);const h=e?l.shape[l.rank-2]:l.shape[l.rank-1],f=s?u.shape[u.rank-1]:u.shape[u.rank-2],g=e?l.shape[l.rank-1]:l.shape[l.rank-2],m=s?u.shape[u.rank-2]:u.shape[u.rank-1],y=l.shape.slice(0,-2),k=u.shape.slice(0,-2),C=Ce(y),S=Ce(k);wt(h===f,()=>`Error in fused matMul: inner shapes (${h}) and (${f}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${e} and transposeB=${s} must match.`);const D=es(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([g,m]),R=e?ne(l,[C,h,g]):ne(l,[C,g,h]),V=s?ne(u,[S,m,f]):ne(u,[S,f,m]);let E;i!=null&&(E=Bt(i,"bias","fused matMul"),[E]=Ei(E,l),es(D,E.shape));let q;o!=null&&(q=Bt(o,"prelu weights","fused matMul"));const X=(K,Y)=>{const[ct,j,ht,It]=Y,yt=gw(ne(K,ht.shape),ht,r);let Ot,Ct;if(!e&&!s?(Ot=Ls(yt,j,!1,!0),Ct=Ls(ct,yt,!0,!1)):!e&&s?(Ot=Ls(yt,j,!1,!1),Ct=Ls(yt,ct,!0,!1)):e&&!s?(Ot=Ls(j,yt,!1,!0),Ct=Ls(ct,yt,!1,!1)):(Ot=Ls(j,yt,!0,!0),Ct=Ls(yt,ct,!0,!0)),i!=null){const Gt=mw(It,yt);return[Ot,Ct,Gt]}else return[Ot,Ct]},B={a:R,b:V,bias:E,preluActivationWeights:q},U={transposeA:e,transposeB:s,activation:r,leakyreluAlpha:a};return i==null?Gd((Y,ct,j)=>{const ht=te.runKernel(Wm,B,U);return j([Y,ct,ht]),{value:ne(ht,D),gradFunc:X}})(R,V):Gd((Y,ct,j,ht)=>{const It=te.runKernel(Wm,B,U);return ht([Y,ct,It,j]),{value:ne(It,D),gradFunc:X}})(R,V,E)}const sC=ie({fusedMatMul_:iW});function rW(n,t,e,s,i="bilinear",r=0){const o=Bt(n,"image","cropAndResize"),a=Bt(t,"boxes","cropAndResize","float32"),l=Bt(e,"boxInd","cropAndResize","int32"),u=a.shape[0];wt(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),wt(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${a.shape}.`),wt(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${a.shape}.`),wt(s.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${s.length}.`),wt(s[0]>=1&&s[1]>=1,()=>`cropSize must be atleast [1,1], but was ${s}`),wt(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);const h={image:o,boxes:a,boxInd:l},f={method:i,extrapolationValue:r,cropSize:s};return te.runKernel(xy,h,f)}const oW=ie({cropAndResize_:rW});function aW(n){const t=Bt(n,"image","flipLeftRight","float32");wt(t.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);const e={image:t};return te.runKernel(Iy,e,{})}const lW=ie({flipLeftRight_:aW});function cW(n){const t=Bt(n,"image","grayscaleToRGB"),e=t.rank-1,s=t.shape[e];wt(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),wt(s===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${s}.`);const i=new Array(t.rank);return i.fill(1,0,e),i[e]=3,Va(t,i)}const uW=ie({grayscaleToRGB_:cW});function hW(n){const t=Bt(n,"image","RGBToGrayscale"),e=t.rank-1,s=t.shape[e];wt(t.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${t.rank}.`),wt(s===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${s}.`);const i=t.dtype,r=rn(t,"float32"),o=ko([.2989,.587,.114]);let a;switch(t.rank){case 2:a=ip("ij,j->i",r,o);break;case 3:a=ip("ijk,k->ij",r,o);break;case 4:a=ip("ijkl,l->ijk",r,o);break;case 5:a=ip("ijklm,m->ijkl",r,o);break;case 6:a=ip("ijklmn,n->ijklm",r,o);break;default:throw new Error("Not a valid tensor rank.")}return a=to(a,-1),rn(a,i)}const dW=ie({rgbToGrayscale_:hW});function fW(n,t,e=0,s=.5){const i=Bt(n,"image","rotateWithOffset","float32");wt(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const r={image:i},o={radians:t,fillValue:e,center:s};return te.runKernel(Hy,r,o)}const pW=ie({rotateWithOffset_:fW});function cf(n,t,e,s,i,r){s==null&&(s=.5),i==null&&(i=Number.NEGATIVE_INFINITY),r==null&&(r=0);const o=n.shape[0];return e=Math.min(e,o),wt(0<=s&&s<=1,()=>`iouThreshold must be in [0, 1], but was '${s}'`),wt(n.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${n.rank}'`),wt(n.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${n.shape[1]}`),wt(t.rank===1,()=>"scores must be a 1D tensor"),wt(t.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${t.shape[0]}`),wt(0<=r&&r<=1,()=>`softNmsSigma must be in [0, 1], but was '${r}'`),{maxOutputSize:e,iouThreshold:s,scoreThreshold:i,softNmsSigma:r}}function gW(n,t,e,s=.5,i=Number.NEGATIVE_INFINITY){const r=Bt(n,"boxes","nonMaxSuppression","float32"),o=Bt(t,"scores","nonMaxSuppression","float32"),a=cf(r,o,e,s,i);e=a.maxOutputSize,s=a.iouThreshold,i=a.scoreThreshold;const l={maxOutputSize:e,iouThreshold:s,scoreThreshold:i};return te.runKernel(Dy,{boxes:r,scores:o},l)}const mW=ie({nonMaxSuppression_:gW});function xW(n,t,e){const s=bW(n,t,e),i=s<0?-(s+1):s;n.splice(i,0,t)}function bW(n,t,e){return yW(n,t,e||vW)}function vW(n,t){return n>t?1:n<t?-1:0}function yW(n,t,e){let s=0,i=n.length,r=0,o=!1;for(;s<i;){r=s+(i-s>>>1);const a=e(t,n[r]);a>0?s=r+1:(i=r,o=!a)}return o?s:-s-1}function vw(n,t,e,s,i){return kw(n,t,e,s,i,0)}function yw(n,t,e,s,i,r){return kw(n,t,e,s,i,0,!1,r,!0)}function ww(n,t,e,s,i,r){return kw(n,t,e,s,i,r,!0)}function kw(n,t,e,s,i,r,o=!1,a=!1,l=!1){const u=[];for(let C=0;C<t.length;C++)t[C]>i&&u.push({score:t[C],boxIndex:C,suppressBeginIndex:0});u.sort(iC);const h=r>0?-.5/r:0,f=[],g=[];for(;f.length<e&&u.length>0;){const C=u.pop(),{score:S,boxIndex:$,suppressBeginIndex:D}=C;if(S<i)break;let R=!1;for(let V=f.length-1;V>=D;--V){const E=wW(n,$,f[V]);if(E>=s){R=!0;break}if(C.score=C.score*kW(s,h,E),C.score<=i)break}C.suppressBeginIndex=f.length,R||(C.score===S?(f.push($),g.push(C.score)):C.score>i&&xW(u,C,iC))}const m=f.length,y=e-m;a&&y>0&&(f.push(...new Array(y).fill(0)),g.push(...new Array(y).fill(0)));const k={selectedIndices:f};return o&&(k.selectedScores=g),l&&(k.validOutputs=m),k}function wW(n,t,e){const s=n.subarray(t*4,t*4+4),i=n.subarray(e*4,e*4+4),r=Math.min(s[0],s[2]),o=Math.min(s[1],s[3]),a=Math.max(s[0],s[2]),l=Math.max(s[1],s[3]),u=Math.min(i[0],i[2]),h=Math.min(i[1],i[3]),f=Math.max(i[0],i[2]),g=Math.max(i[1],i[3]),m=(a-r)*(l-o),y=(f-u)*(g-h);if(m<=0||y<=0)return 0;const k=Math.max(r,u),C=Math.max(o,h),S=Math.min(a,f),$=Math.min(l,g),D=Math.max(S-k,0)*Math.max($-C,0);return D/(m+y-D)}function kW(n,t,e){const s=Math.exp(t*e*e);return e<=n?s:0}function iC(n,t){return n.score-t.score||n.score===t.score&&t.boxIndex-n.boxIndex}async function CW(n,t,e,s=.5,i=Number.NEGATIVE_INFINITY){const r=Bt(n,"boxes","nonMaxSuppressionAsync"),o=Bt(t,"scores","nonMaxSuppressionAsync"),a=cf(r,o,e,s,i);e=a.maxOutputSize,s=a.iouThreshold,i=a.scoreThreshold;const l=await Promise.all([r.data(),o.data()]),u=l[0],h=l[1],{selectedIndices:f}=vw(u,h,e,s,i);return r!==n&&r.dispose(),o!==t&&o.dispose(),ko(f,"int32")}const SW=CW;function TW(n,t,e,s=.5,i=Number.NEGATIVE_INFINITY,r=0){const o=Bt(n,"boxes","nonMaxSuppression"),a=Bt(t,"scores","nonMaxSuppression"),l=cf(o,a,e,s,i,r);e=l.maxOutputSize,s=l.iouThreshold,i=l.scoreThreshold,r=l.softNmsSigma;const u={boxes:o,scores:a},h={maxOutputSize:e,iouThreshold:s,scoreThreshold:i,softNmsSigma:r},f=te.runKernel(My,u,h);return{selectedIndices:f[0],selectedScores:f[1]}}const IW=ie({nonMaxSuppressionWithScore_:TW});async function EW(n,t,e,s=.5,i=Number.NEGATIVE_INFINITY,r=0){const o=Bt(n,"boxes","nonMaxSuppressionAsync"),a=Bt(t,"scores","nonMaxSuppressionAsync"),l=cf(o,a,e,s,i,r);e=l.maxOutputSize,s=l.iouThreshold,i=l.scoreThreshold,r=l.softNmsSigma;const u=await Promise.all([o.data(),a.data()]),h=u[0],f=u[1],{selectedIndices:g,selectedScores:m}=ww(h,f,e,s,i,r);return o!==n&&o.dispose(),a!==t&&a.dispose(),{selectedIndices:ko(g,"int32"),selectedScores:ko(m)}}const _W=EW;function AW(n,t,e,s=.5,i=Number.NEGATIVE_INFINITY,r=!1){const o=Bt(n,"boxes","nonMaxSuppression"),a=Bt(t,"scores","nonMaxSuppression"),l=cf(o,a,e,s,i,null),u=l.maxOutputSize,h=l.iouThreshold,f=l.scoreThreshold,g={boxes:o,scores:a},m={maxOutputSize:u,iouThreshold:h,scoreThreshold:f,padToMaxOutputSize:r},y=te.runKernel(Ry,g,m);return{selectedIndices:y[0],validOutputs:y[1]}}const $W=ie({nonMaxSuppressionPadded_:AW});async function NW(n,t,e,s=.5,i=Number.NEGATIVE_INFINITY,r=!1){const o=Bt(n,"boxes","nonMaxSuppressionAsync"),a=Bt(t,"scores","nonMaxSuppressionAsync"),l=cf(o,a,e,s,i,null),u=l.maxOutputSize,h=l.iouThreshold,f=l.scoreThreshold,[g,m]=await Promise.all([o.data(),a.data()]),{selectedIndices:y,validOutputs:k}=yw(g,m,u,h,f,r);return o!==n&&o.dispose(),a!==t&&a.dispose(),{selectedIndices:ko(y,"int32"),validOutputs:Bs(k,"int32")}}const DW=NW;function RW(n,t,e=!1,s=!1){const i=Bt(n,"images","resizeBilinear");wt(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),wt(t.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),wt(s===!1||e===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let r=i,o=!1;i.rank===3&&(o=!0,r=ne(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const a={images:r},l={alignCorners:e,halfPixelCenters:s,size:t},u=te.runKernel(p2,a,l);return o?ne(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const $5=ie({resizeBilinear_:RW});function MW(n,t,e=!1,s=!1){const i=Bt(n,"images","resizeNearestNeighbor");wt(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),wt(t.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),wt(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),wt(s===!1||e===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let r=i,o=!1;i.rank===3&&(o=!0,r=ne(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const a={images:r},l={alignCorners:e,halfPixelCenters:s,size:t},u=te.runKernel(f2,a,l);return o?ne(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const N5=ie({resizeNearestNeighbor_:MW});function OW(n,t="binary",e=!1,s=.5){const i=Bt(n,"image","threshold"),r=.2989,o=.587,a=.114,l=i.shape[0]*i.shape[1];let u=Jt(ko([s]),255),h,f,g,m;if(wt(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),wt(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),wt(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),wt(t==="otsu"||t==="binary",()=>`Method must be binary or otsu, but was ${t}`),i.shape[2]===3){[h,f,g]=jo(i,[1,1,1],-1);const C=Jt(h,r),S=Jt(f,o),$=Jt(g,a);m=Be(Be(C,S),$)}else m=n;if(t==="otsu"){const C=RP(rn(v5(m),"int32"),jI([]),256);u=FW(C,l)}const y=e?lf(m,u):qo(m,u);return rn(Jt(y,255),"int32")}function FW(n,t){let e=ko([-1]),s=ko([0]),i=ko([0]),r,o,a,l,u,h;for(let f=0;f<n.size-1;f++){r=si(n,0,f+1),o=si(n,f+1),u=Mn(Rn(r),t),h=Mn(Rn(o),t);const g=Rn(Jt(r,Ep(0,r.size)));a=Mn(g,Rn(r));const m=$2(o.shape,r.size),y=Be(Ep(0,o.size),m),k=Jt(o,y);l=Mn(Rn(k),Rn(o));const C=Vn(a,l),S=Vn(a,l),$=Jt(u,h);i=Jt(Jt($,C),S);const D=qo(i,s);s=zr(D,i,s),e=zr(D,ko([f]),e)}return e}const PW=ie({threshold_:OW});function LW(n,t,e="nearest",s="constant",i=0,r){const o=Bt(n,"image","transform","float32"),a=Bt(t,"transforms","transform","float32");wt(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),wt(a.rank===2&&(a.shape[0]===o.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),wt(r==null||r.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${r}.`);const l={image:o,transforms:a},u={interpolation:e,fillMode:s,fillValue:i,outputShape:r};return te.runKernel(Uy,l,u)}const BW=ie({transform_:LW});function zW(n,t,e){const s=Bt(n,"a","bandPart");wt(s.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${s.rank}.`);const i=s.shape,[r,o]=s.shape.slice(-2);let a,l;typeof t=="number"?(wt(t%1===0,()=>`bandPart(): numLower must be an integer, got ${t}.`),wt(t<=r,()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${r}).`),a=Bt(t<0?r:t,"numLower","bandPart")):(wt(t.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=zr(jm(t,0),r,Ip(t,r))),typeof e=="number"?(wt(e%1===0,()=>`bandPart(): numUpper must be an integer, got ${e}.`),wt(e<=o,()=>`bandPart(): numUpper (${e}) must not be greater than the number of columns (${o}).`),l=Bt(e<0?o:e,"numUpper","bandPart")):(wt(e.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=zr(jm(e,0),o,Ip(e,o)));const u=ne(Ep(0,r,1,"int32"),[-1,1]),h=Ep(0,o,1,"int32"),f=Vn(u,h),g=rc(lf(f,a),Ph(f,Ii(l))),m=Zi([r,o],s.dtype);return ne(oc(Ah(ne(s,[-1,r,o])).map(y=>zr(g,y,m))),i)}const WW=ie({bandPart_:zW});function VW(n){let t;if(Array.isArray(n)){t=!1,wt(n!=null&&n.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=n[0].shape[0];for(let r=1;r<n.length;++r)wt(n[r].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${n[r].shape[0]} vs. ${i})`)}else t=!0,n=jo(n,n.shape[0],0).map(i=>U0(i,[0]));wt(n.length<=n[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${n.length}) exceeds number of dimensions (${n[0].shape[0]}).`);const e=[],s=n;for(let i=0;i<n.length;++i)e.push(te.tidy(()=>{let r=s[i];if(i>0)for(let o=0;o<i;++o){const a=Jt(Rn(Jt(e[o],r)),e[o]);r=Vn(r,a)}return Mn(r,D2(r,"euclidean"))}));return t?oc(e,0):e}const UW=ie({gramSchmidt_:VW});function GW(n,t=!1){if(wt(n.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${n.rank}`),n.rank===2)return rC(n,t);{const e=n.shape.slice(0,n.shape.length-2).reduce((l,u)=>l*u),s=Ah(ne(n,[e,n.shape[n.shape.length-2],n.shape[n.shape.length-1]]),0),i=[],r=[];s.forEach(l=>{const[u,h]=rC(l,t);i.push(u),r.push(h)});const o=ne(oc(i,0),n.shape),a=ne(oc(r,0),n.shape);return[o,a]}}function rC(n,t=!1){return te.tidy(()=>{wt(n.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${n.shape.length}D Tensor.`);const e=n.shape[0],s=n.shape[1];let i=h5(e),r=fh(n);const o=Wc([[1]],[1,1]);let a=fh(o);const l=e>=s?s:e;for(let u=0;u<l;++u){const h=r,f=a,g=i;[a,r,i]=te.tidy(()=>{const m=si(r,[u,u],[e-u,1]),y=D2(m),k=si(r,[u,u],[1,1]),C=zr(qo(k,0),Wc([[-1]]),Wc([[1]])),S=Vn(k,Jt(C,y)),$=Mn(m,S);$.shape[0]===1?a=fh(o):a=so([o,si($,[1,0],[$.shape[0]-1,$.shape[1]])],0);const D=Ii(Mn(Ls(C,S),y)),R=si(r,[u,0],[e-u,s]),V=Jt(D,a),E=Es(a);if(u===0)r=Vn(R,Ls(V,Ls(E,R)));else{const B=Vn(R,Ls(V,Ls(E,R)));r=so([si(r,[0,0],[u,s]),B],0)}const q=Es(V),X=si(i,[0,u],[e,i.shape[1]-u]);if(u===0)i=Vn(X,Ls(Ls(X,a),q));else{const B=Vn(X,Ls(Ls(X,a),q));i=so([si(i,[0,0],[e,u]),B],1)}return[a,r,i]}),bs([h,f,g])}return!t&&e>s&&(i=si(i,[0,0],[e,s]),r=si(r,[0,0],[s,s])),[i,r]})}const HW=ie({qr_:GW});const Ql={flipLeftRight:lW,grayscaleToRGB:uW,resizeNearestNeighbor:N5,resizeBilinear:$5,rgbToGrayscale:dW,rotateWithOffset:pW,cropAndResize:oW,nonMaxSuppression:mW,nonMaxSuppressionAsync:SW,nonMaxSuppressionWithScore:IW,nonMaxSuppressionWithScoreAsync:_W,nonMaxSuppressionPadded:$W,nonMaxSuppressionPaddedAsync:DW,threshold:PW,transform:BW},jW={bandPart:WW,gramSchmidt:UW,qr:HW};const XW=new Map,qW=new Map;class uf{getClassName(){return this.constructor.className}static fromConfig(t,e){return new t(e)}}class oa{constructor(){this.classNameMap={}}static getMap(){return oa.instance==null&&(oa.instance=new oa),oa.instance}static register(t){oa.getMap().classNameMap[t.className]=[t,t.fromConfig]}}function Fe(n,t,e){wt(n.className!=null,()=>"Class being registered does not have the static className property defined."),wt(typeof n.className=="string",()=>"className is required to be a string, but got type "+typeof n.className),wt(n.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof t>"u"&&(t="Custom"),typeof e>"u"&&(e=n.className);const s=e,i=t+">"+s;return oa.register(n),XW.set(i,n),qW.set(n,i),n}class fu extends uf{minimize(t,e=!1,s){const{value:i,grads:r}=this.computeGradients(t,s);if(s!=null){const o=s.map(a=>({name:a.name,tensor:r[a.name]}));this.applyGradients(o)}else this.applyGradients(r);return bs(r),e?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,e){return tB(t,e)}dispose(){this.iterations_!=null&&bs(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Bs(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}}Object.defineProperty(fu,Symbol.hasInstance,{value:n=>n.minimize!=null&&n.computeGradients!=null&&n.applyGradients!=null});class D5 extends fu{static get className(){return"Adadelta"}constructor(t,e,s=null){super(),this.learningRate=t,this.rho=e,this.epsilon=s,this.accumulatedGrads=[],this.accumulatedUpdates=[],s==null&&(this.epsilon=te.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,i)=>{const r=te.registeredVariables[s],o=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${s}/accum_grad`,variable:he(()=>As(r).variable(o))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${s}/accum_var`,variable:he(()=>As(r).variable(o))});const a=Array.isArray(t)?t[i].tensor:t[s];if(a==null)return;const l=this.accumulatedGrads[i].variable,u=this.accumulatedUpdates[i].variable;he(()=>{const h=Be(Jt(l,this.rho),Jt(ai(a),1-this.rho)),f=Jt(Mn(yr(Be(u,this.epsilon)),yr(Be(l,this.epsilon))),a),g=Be(Jt(u,this.rho),Jt(ai(f),1-this.rho));l.assign(h),u.assign(g);const m=Be(Jt(f,-this.learningRate),r);r.assign(m)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(bs(this.accumulatedGrads.map(t=>t.variable)),bs(this.accumulatedUpdates.map(t=>t.variable)))}async getWeights(){const t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(t.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(t){t=await this.extractIterations(t);const e=t.length/2,s=!1;this.accumulatedGrads=t.slice(0,e).map(i=>({originalName:i.name,variable:i.tensor.variable(s)})),this.accumulatedUpdates=t.slice(e,e*2).map(i=>({originalName:i.name,variable:i.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e.learningRate,e.rho,e.epsilon)}}class R5 extends fu{static get className(){return"Adagrad"}constructor(t,e=.1){super(),this.learningRate=t,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,i)=>{const r=te.registeredVariables[s];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${s}/accumulator`,variable:he(()=>$2(r.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(t)?t[i].tensor:t[s];if(o==null)return;const a=this.accumulatedGrads[i].variable;he(()=>{const l=Be(a,ai(o));a.assign(l);const u=Be(Jt(Mn(o,yr(Be(l,te.backend.epsilon()))),-this.learningRate),r);r.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&bs(this.accumulatedGrads.map(t=>t.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const e=!1;this.accumulatedGrads=t.map(s=>({originalName:s.name,variable:s.tensor.variable(e)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,e){return new t(e.learningRate,e.initialAccumulatorValue)}}class M5 extends fu{static get className(){return"Adam"}constructor(t,e,s,i=null){super(),this.learningRate=t,this.beta1=e,this.beta2=s,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],he(()=>{this.accBeta1=Bs(e).variable(),this.accBeta2=Bs(s).variable()}),i==null&&(this.epsilon=te.backend.epsilon())}applyGradients(t){const e=Array.isArray(t)?t.map(s=>s.name):Object.keys(t);he(()=>{const s=Vn(1,this.accBeta1),i=Vn(1,this.accBeta2);e.forEach((r,o)=>{const a=te.registeredVariables[r],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${r}/m`,variable:he(()=>As(a).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${r}/v`,variable:he(()=>As(a).variable(l))});const u=Array.isArray(t)?t[o].tensor:t[r];if(u==null)return;const h=this.accumulatedFirstMoment[o].variable,f=this.accumulatedSecondMoment[o].variable,g=Be(Jt(h,this.beta1),Jt(u,1-this.beta1)),m=Be(Jt(f,this.beta2),Jt(ai(u),1-this.beta2)),y=Mn(g,s),k=Mn(m,i);h.assign(g),f.assign(m);const C=Be(Jt(Mn(y,Be(yr(k),this.epsilon)),-this.learningRate),a);a.assign(C)}),this.accBeta1.assign(Jt(this.accBeta1,this.beta1)),this.accBeta2.assign(Jt(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&bs(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedSecondMoment!=null&&bs(this.accumulatedSecondMoment.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(t.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(t){t=await this.extractIterations(t),he(()=>{this.accBeta1.assign(Eh(this.beta1,this.iterations_+1)),this.accBeta2.assign(Eh(this.beta2,this.iterations_+1))});const e=t.length/2,s=!1;this.accumulatedFirstMoment=t.slice(0,e).map(i=>({originalName:i.name,variable:i.tensor.variable(s)})),this.accumulatedSecondMoment=t.slice(e,e*2).map(i=>({originalName:i.name,variable:i.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon)}}class O5 extends fu{static get className(){return"Adamax"}constructor(t,e,s,i=null,r=0){super(),this.learningRate=t,this.beta1=e,this.beta2=s,this.epsilon=i,this.decay=r,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],he(()=>{this.iteration=Bs(0).variable(),this.accBeta1=Bs(e).variable()}),i==null&&(this.epsilon=te.backend.epsilon())}applyGradients(t){const e=Array.isArray(t)?t.map(s=>s.name):Object.keys(t);he(()=>{const s=Vn(1,this.accBeta1),i=Mn(-this.learningRate,Be(Jt(this.iteration,this.decay),1));e.forEach((r,o)=>{const a=te.registeredVariables[r],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${r}/m`,variable:As(a).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${r}/v`,variable:As(a).variable(l)});const u=Array.isArray(t)?t[o].tensor:t[r];if(u==null)return;const h=this.accumulatedFirstMoment[o].variable,f=this.accumulatedWeightedInfNorm[o].variable,g=Be(Jt(h,this.beta1),Jt(u,1-this.beta1)),m=Jt(f,this.beta2),y=Fr(u),k=hu(m,y);h.assign(g),f.assign(k);const C=Be(Jt(Mn(i,s),Mn(g,Be(k,this.epsilon))),a);a.assign(C)}),this.iteration.assign(Be(this.iteration,1)),this.accBeta1.assign(Jt(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&bs(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedWeightedInfNorm!=null&&bs(this.accumulatedWeightedInfNorm.map(t=>t.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)}}class Cw extends fu{static get className(){return"SGD"}constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,i)=>{const r=Array.isArray(t)?t[i].tensor:t[s];if(r==null)return;const o=te.registeredVariables[s];he(()=>{const a=Be(Jt(this.c,r),o);o.assign(a)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=bl(Bs(-t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(t){if(t=await this.extractIterations(t),t.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,e){return new t(e.learningRate)}}class F5 extends Cw{static get className(){return"Momentum"}constructor(t,e,s=!1){super(t),this.learningRate=t,this.momentum=e,this.useNesterov=s,this.accumulations=[],this.m=Bs(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,i)=>{const r=te.registeredVariables[s];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${s}/momentum`,variable:he(()=>As(r).variable(!1))});const o=this.accumulations[i].variable,a=Array.isArray(t)?t[i].tensor:t[s];a!=null&&he(()=>{let l;const u=Be(Jt(this.m,o),a);this.useNesterov?l=Be(Jt(this.c,Be(a,Jt(u,this.m))),r):l=Be(Jt(this.c,u),r),o.assign(u),r.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&bs(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const e=!1;this.accumulations=t.map(s=>({originalName:s.name,variable:s.tensor.variable(e)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,e){return new t(e.learningRate,e.momentum,e.useNesterov)}}class P5 extends fu{static get className(){return"RMSProp"}constructor(t,e=.9,s=0,i=null,r=!1){if(super(),this.learningRate=t,this.decay=e,this.momentum=s,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=r,i==null&&(this.epsilon=te.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,i)=>{const r=te.registeredVariables[s],o=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${s}/rms`,variable:he(()=>As(r).variable(o))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${s}/momentum`,variable:he(()=>As(r).variable(o))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${s}/mg`,variable:he(()=>As(r).variable(o))});const a=Array.isArray(t)?t[i].tensor:t[s];if(a==null)return;const l=this.accumulatedMeanSquares[i].variable,u=this.accumulatedMoments[i].variable;he(()=>{const h=Be(Jt(l,this.decay),Jt(ai(a),1-this.decay));if(this.centered){const f=this.accumulatedMeanGrads[i].variable,g=Be(Jt(f,this.decay),Jt(a,1-this.decay)),m=Mn(Jt(a,this.learningRate),yr(Vn(h,Be(ai(g),this.epsilon)))),y=Be(Jt(u,this.momentum),m);l.assign(h),f.assign(g),u.assign(y);const k=Vn(r,y);r.assign(k)}else{const f=Be(Jt(l,this.decay),Jt(ai(a),1-this.decay)),g=Be(Jt(u,this.momentum),Mn(Jt(a,this.learningRate),yr(Be(f,this.epsilon))));l.assign(f),u.assign(g);const m=Vn(r,g);r.assign(m)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&bs(this.accumulatedMeanSquares.map(t=>t.variable)),this.accumulatedMeanGrads!=null&&this.centered&&bs(this.accumulatedMeanGrads.map(t=>t.variable)),this.accumulatedMoments!=null&&bs(this.accumulatedMoments.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(t.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(t){t=await this.extractIterations(t);const e=this.centered?t.length/3:t.length/2,s=!1;this.accumulatedMeanSquares=t.slice(0,e).map(i=>({originalName:i.name,variable:i.tensor.variable(s)})),this.accumulatedMoments=t.slice(e,e*2).map(i=>({originalName:i.name,variable:i.tensor.variable(s)})),this.centered&&(this.accumulatedMeanGrads=t.slice(e*2,e*3).map(i=>({originalName:i.name,variable:i.tensor.variable(s)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,e){return new t(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)}}const KW=[D5,R5,M5,O5,F5,P5,Cw];function YW(){for(const n of KW)Fe(n)}function Sw(n,t){const e=n.shape.length,s=t.shape.length;if(e<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${e}.`);if(s<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${s}.`);if(t.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[s-1]>e)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[s-1]} vs. ${e}`);if(Ce(n.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${n.shape}.`);const i=t.shape,r=i[i.length-1];let o=1;for(let f=0;f<i.length-1;++f)o*=i[f];const a=n.shape,l=i.slice();l.pop();let u=1;for(let f=r;f<e;++f)u*=a[f],l.push(a[f]);const h=[...Dn(n.shape).map(f=>f/u),1].slice(0,r);return[l,o,u,h]}const pv=-2,ZW=-1;function L5(n,t,e){const s=n.shape.length;wt(s===t.length,()=>`Error in slice${s}D: Length of begin ${t} must match the rank of the array (${s}).`),wt(s===e.length,()=>`Error in slice${s}D: Length of size ${e} must match the rank of the array (${s}).`);for(let i=0;i<s;++i)wt(t[i]+e[i]<=n.shape[i],()=>`Error in slice${s}D: begin[${i}] + size[${i}] (${t[i]+e[i]}) would overflow input.shape[${i}] (${n.shape[i]})`)}function B5(n,t,e){const s=[];for(let i=0;i<n.length;i++)s[i]=Math.ceil((t[i]-n[i])/e[i]);return s}function z5(n,t,e){let s=e.length;for(let i=0;i<e.length;i++)if(e[i]>1){s=i;break}for(let i=s+1;i<e.length;i++)if(t[i]>0||e[i]!==n[i])return!1;return!0}function W5(n,t){let e=n.length>0?n[n.length-1]:1;for(let s=0;s<n.length-1;s++)e+=n[s]*t[s];return e}function Tw(n,t,e){let s;const i=n.shape.length;typeof t=="number"?s=[t,...new Array(i-1).fill(0)]:t.length<i?s=t.concat(new Array(i-t.length).fill(0)):s=t.slice(),s.forEach(o=>{wt(o!==-1,()=>"slice() does not support negative begin indexing.")});let r;return e==null?r=new Array(i).fill(-1):typeof e=="number"?r=[e,...new Array(i-1).fill(-1)]:e.length<i?r=e.concat(new Array(i-e.length).fill(-1)):r=e,r=r.map((o,a)=>o>=0?o:(wt(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${a}.`),n.shape[a]-s[a])),[s,r]}function V5(n,t,e,s,i,r,o,a,l){let u;if(s==null?(u=new Array(t.length),u.fill(1)):u=s,o!=null&&(o&o-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let h=!1;const f={dims:u.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:e.slice(),strides:u.slice(),beginMask:i,endMask:r,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};for(let D=0;D<f.dims;D++)h&&(1<<D&a)!==0&&f.numAddAxisAfterEllipsis++,1<<D&o&&(h=!0);h||(f.ellipsisMask|=1<<f.dims,f.dims++);const g={dims:n.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};JW(f,g);let m=!0,y=!0,k=!0;const C=[],S=[];for(let D=0;D<n.length;++D){if(g.strides[D]===0)throw Error(`strides[${D}] must be non-zero`);const R=!!(g.shrinkAxisMask&1<<D),V=n[D];if(V===-1){C.push(R?1:-1);continue}const E=[g.beginMask&1<<D,g.endMask&1<<D],q=[g.strides[D]>0?0:-1,g.strides[D]>0?V:V-1];if(R&&g.strides[D]<=0)throw Error("only stride 1 allowed on non-range indexing.");k=k&&g.strides[D]===1;const X=!!(g.beginMask&1<<D&&g.endMask&1<<D);if(g.beginValid&&g.endValid){if(R){const Y=g.begin[D]<0?V+g.begin[D]:g.begin[D];if(g.begin[D]=Y,g.end[D]=g.begin[D]+1,Y<0||Y>=V)throw Error(`slice index ${g.begin[D]} of dimension ${D} out of bounds.`)}else g.begin[D]=oC(g.begin[D],0,g.strides[D],V,E,q),g.end[D]=oC(g.end[D],1,g.strides[D],V,E,q);const K=g.strides[D]===1&&g.begin[D]===0&&g.end[D]===V;m=m&&K,y=y&&(D===0&&g.strides[D]===1||K)}else m=m&&g.strides[D]===1&&X,y=y&&(D===0&&g.strides[D]===1||X);let B,U=!1;if(g.beginValid&&g.endValid?(B=g.end[D]-g.begin[D],U=!0):R?(B=1,U=!0):X&&V>=0&&(g.strides[D]<0?B=-V:B=V,U=!0),U){let K;B===0||B<0!=g.strides[D]<0?K=0:K=Math.trunc(B/g.strides[D])+(B%g.strides[D]!==0?1:0),C.push(K)}else C.push(-1)}for(let D=0;D<g.finalShapeGatherIndices.length;++D){const R=g.finalShapeGatherIndices[D];R>=0?S.push(C[R]):R===pv&&S.push(1)}return{finalShapeSparse:S.filter((D,R)=>g.finalShapeGatherIndices[R]!==pv),finalShape:S,isIdentity:m,sliceDim0:y,isSimpleSlice:k,begin:g.begin,end:g.end,strides:g.strides}}function JW(n,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let e=0;t.beginValid=n.begin!=null,t.endValid=n.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let s=0;s<n.dims;s++)if(1<<s&n.ellipsisMask){const i=Math.min(t.dims-(n.dims-s)+1+n.numAddAxisAfterEllipsis,t.dims);for(;e<i;e++)t.begin[e]=0,t.end[e]=0,t.strides[e]=1,t.beginMask|=1<<e,t.endMask|=1<<e,t.finalShapeGatherIndices.push(e),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[e]=s}else if(1<<s&n.newAxisMask)t.finalShapeGatherIndices.push(pv),t.finalShapeGatherIndicesSparse.push(-1);else{if(e===t.begin.length)throw Error(`Index out of range using input dim ${e}; input has only ${t.dims} dims, ${t.begin.length}.`);n.begin!=null&&(t.begin[e]=n.begin[s]),n.end!=null&&(t.end[e]=n.end[s]),t.strides[e]=n.strides[s],n.beginMask&1<<s&&(t.beginMask|=1<<e),n.endMask&1<<s&&(t.endMask|=1<<e),n.shrinkAxisMask&1<<s?(t.finalShapeGatherIndices.push(ZW),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<e):(t.finalShapeGatherIndices.push(e),t.finalShapeGatherIndicesSparse.push(s)),t.inputShapeGatherIndicesSparse[e]=s,e++}}function oC(n,t,e,s,i,r){if(i[t])return e>0?r[t]:r[t+1&1];{const o=n<0?s+n:n;return o<r[0]?r[0]:o>r[1]?r[1]:o}}class QW{static sgd(t){return new Cw(t)}static momentum(t,e,s=!1){return new F5(t,e,s)}static rmsprop(t,e=.9,s=0,i=null,r=!1){return new P5(t,e,s,i,r)}static adam(t=.001,e=.9,s=.999,i=null){return new M5(t,e,s,i)}static adadelta(t=.001,e=.95,s=null){return new D5(t,e,s)}static adamax(t=.002,e=.9,s=.999,i=null,r=0){return new O5(t,e,s,i,r)}static adagrad(t,e=.1){return new R5(t,e)}}const kd=QW;const tV=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:n=>n();function U5(){return new Promise(n=>tV(()=>n()))}function Iw(n,t){const e=n[0].length;n.forEach((i,r)=>{wt(i.length===e,()=>`Error in concat${e}D: rank of tensors[${r}] must be the same as the rank of the rest (${e})`)}),wt(t>=0&&t<e,()=>`Error in concat${e}D: axis must be between 0 and ${e-1}.`);const s=n[0];n.forEach((i,r)=>{for(let o=0;o<e;o++)wt(o===t||i[o]===s[o],()=>`Error in concat${e}D: Shape of tensors[${r}] (${i}) does not match the shape of the rest (${s}) along the non-concatenated axis ${r}.`)})}function vl(n,t){const e=n[0].slice();for(let s=1;s<n.length;s++)e[t]+=n[s][t];return e}var Pa;(function(n){n[n.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",n[n.VALUE_ROWIDS=1]="VALUE_ROWIDS",n[n.ROW_LENGTHS=2]="ROW_LENGTHS",n[n.ROW_SPLITS=3]="ROW_SPLITS",n[n.ROW_LIMITS=4]="ROW_LIMITS",n[n.ROW_STARTS=5]="ROW_STARTS"})(Pa||(Pa={}));function G5(n,t,e){let s=new Array;if(e==null&&t==null)return s;if(t==null)for(;s.length<n+e.length;)s.push(-1);else s=t.slice();if(e==null)return s;if(n+e.length!==s.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${n+e.length}, but shape.rank = ${s.length}`);for(let i=1;i<e.length;++i){const r=e[i],o=s[s.length-e.length+i],a=s[o];if(r>=0)if(a>=0){if(a!==r)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${i+n}] = ${r} but shape[${i+n}] = ${a}`)}else s[o]=r}return s}function H5(n){const t={FIRST_DIM_SIZE:Pa.FIRST_DIM_SIZE,VALUE_ROWIDS:Pa.VALUE_ROWIDS,ROW_LENGTHS:Pa.ROW_LENGTHS,ROW_SPLITS:Pa.ROW_SPLITS,ROW_LIMITS:Pa.ROW_LIMITS,ROW_STARTS:Pa.ROW_STARTS},e=[];for(const s of n)if(s in t)e.push(t[s]);else break;return e}function j5(n){return n.length===0?0:n[0]===Pa.FIRST_DIM_SIZE?n.length-1:n.length}function X5(n,t){if(n==null||t==null)return;const e=n.length,s=t.length;if(e>=s)throw new Error(`defaultValue.shape=${n} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${e} must be less than ragged tensor input flatValues.rank = ${s})`);for(let i=0;i<Math.min(e,s-1);++i){const r=n[i],o=t[i+1];if(r>=0&&o>=0&&r!==1&&r!==o)throw new Error(`defaultValue.shape=${n}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${i-n.length}] = ${r} but ragged tensor input.flatValues.shape[${i-n.length}] = ${o}`)}}const Ew=30;function M2(n){return n<=Ew?n:Jb(n,Math.floor(Math.sqrt(n)))}function _w(n,t,e){const s=e*(typeof n=="number"?n:n[0]),i=t*(typeof n=="number"?n:n[1]);return[s,i]}function H0(n,t,e,s=!0){let i=[];if(s)i=i.concat(t.slice(0)),i.push(n[0]/e),i=i.concat(n.slice(1));else{i=i.concat(n[0]);const r=t.length;for(let o=0;o<r;++o)i=i.concat([n[o+1]/t[o],t[o]]);i=i.concat(n.slice(r+1))}return i}function j0(n,t,e=!0){const s=[];if(e){s.push(t);for(let i=t+1;i<n;++i)i<=2*t?(s.push(i),s.push(i-(t+1))):s.push(i)}else{const i=[],r=[];for(let o=1;o<n;++o)o>=t*2+1||o%2===1?r.push(o):i.push(o);s.push(...i),s.push(0),s.push(...r)}return s}function X0(n,t,e,s=!0){const i=[];s?i.push(n[0]/e):i.push(n[0]*e);for(let r=1;r<n.length;++r)r<=t.length?s?i.push(t[r-1]*n[r]):i.push(n[r]/t[r-1]):i.push(n[r]);return i}function Aw(n,t){const e=[0];for(let s=0;s<t;++s)e.push(n[s][0]);return e}function $w(n,t,e){const s=n.slice(0,1);for(let i=0;i<e;++i)s.push(n[i+1]-t[i][0]-t[i][1]);return s}const O2=1.7580993408473768,F2=1.0507009873554805;const Nw=.3275911,Dw=.254829592,Rw=-.284496736,Mw=1.421413741,Ow=-1.453152027,Fw=1.061405429;function ac(n,t){if(n.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${n.length}, imag: ${t.length}.`);const e=new Float32Array(n.length*2);for(let s=0;s<e.length;s+=2)e[s]=n[s/2],e[s+1]=t[s/2];return e}function q5(n){const t=new Float32Array(n.length/2),e=new Float32Array(n.length/2);for(let s=0;s<n.length;s+=2)t[s/2]=n[s],e[s/2]=n[s+1];return{real:t,imag:e}}function K5(n){const t=Math.ceil(n.length/4),e=new Float32Array(t),s=new Float32Array(t);for(let i=0;i<n.length;i+=4)e[Math.floor(i/4)]=n[i],s[Math.floor(i/4)]=n[i+1];return{real:e,imag:s}}function Y5(n){const t=Math.floor(n.length/4),e=new Float32Array(t),s=new Float32Array(t);for(let i=2;i<n.length;i+=4)e[Math.floor(i/4)]=n[i],s[Math.floor(i/4)]=n[i+1];return{real:e,imag:s}}function Pw(n,t){const e=n[t*2],s=n[t*2+1];return{real:e,imag:s}}function Z5(n,t,e,s){n[s*2]=t,n[s*2+1]=e}function J5(n,t){const e=new Float32Array(n/2),s=new Float32Array(n/2);for(let i=0;i<Math.ceil(n/2);i++){const r=(t?2:-2)*Math.PI*(i/n);e[i]=Math.cos(r),s[i]=Math.sin(r)}return{real:e,imag:s}}function Q5(n,t,e){const s=(e?2:-2)*Math.PI*(n/t),i=Math.cos(s),r=Math.sin(s);return{real:i,imag:r}}const yb="->",eV=/->/g,aC=",",lC="...";function Lw(n,t){n=n.replace(/\s/g,"");const e=(n.length-n.replace(eV,"").length)/yb.length;if(e<1)throw new Error("Equations without an arrow are not supported.");if(e>1)throw new Error(`Equation must contain exactly one arrow ("${yb}").`);const[s,i]=n.split(yb);wt(s.indexOf(lC)===-1,()=>`The ellipsis notation ("${lC}") is not supported yet.`);const r=s.split(aC),o=r.length;if(t!==o)throw new Error(`Expected ${o} input tensors, received ${t}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let g=0;g<i.length;++g){const m=i[g];if(!r.some(y=>y.indexOf(m)!==-1))throw new Error(`Output subscripts contain the label ${m} not present in the input subscripts.`);a.indexOf(m)===-1&&a.push(m)}for(let g=0;g<s.length;++g){const m=s[g];a.indexOf(m)===-1&&m!==aC&&a.push(m)}const l=new Array(r.length);for(let g=0;g<o;++g){if(new Set(r[g].split("")).size!==r[g].length)throw new Error(`Found duplicate axes in input component ${r[g]}. Support for duplicate axes in input is not implemented yet.`);l[g]=[];for(let m=0;m<r[g].length;++m)l[g].push(a.indexOf(r[g][m]))}const u=a.length,h=i.length,f=[];for(let g=h;g<u;++g)f.push(g);return{allDims:a,summedDims:f,idDims:l}}function Bw(n,t){let e=new Array(n);e.fill(-1);for(let i=0;i<t.length;++i)e[t[i]]=i;const s=[];for(let i=0;i<n;++i)e[i]===-1&&s.push(i);return e=e.filter(i=>i!==-1),{permutationIndices:e,expandDims:s}}function zw(n,t,e){const s=new Array(n);for(let i=0;i<e.length;++i){const r=e[i].shape;for(let o=0;o<t[i].length;++o)s[t[i][o]]===void 0?s[t[i][o]]=r[o]:wt(s[t[i][o]]===r[o],()=>`Expected dimension ${s[t[i][o]]} at axis ${o} of input shaped ${JSON.stringify(r)}, but got dimension ${r[o]}`)}}function Ww(n,t){const e=n,s=[];let i=0;n.length===0&&e.push(-1),i=n.length+1;for(let o=0;o<i;++o)s.push([]);const r=[];for(let o=0;o<e.length;++o){const a=e[o],l=nV(t,a);for(const u of l)r.indexOf(u)===-1&&(s[o].push(u),r.push(u))}return{path:e,steps:s}}function Vw(n){return n.every((t,e)=>t===e)}function nV(n,t){const e=[];for(let s=0;s<n.length;++s)(n[s].length===0||n[s].indexOf(t)!==-1||t===-1)&&e.push(s);return e}function Uw(n,t,e=0){let s=[];if(typeof t=="number")wt(n.shape[e]%t===0,()=>"Number of splits must evenly divide the axis."),s=new Array(t).fill(n.shape[e]/t);else{const i=t.reduce((o,a)=>(a===-1&&(o+=1),o),0);wt(i<=1,()=>"There should be only one negative value in split array.");const r=t.indexOf(-1);if(r!==-1){const o=t.reduce((a,l)=>l>0?a+l:a);t[r]=n.shape[e]-o}wt(n.shape[e]===t.reduce((o,a)=>o+a),()=>"The sum of sizes must match the size of the axis dimension."),s=t}return s}function tE(n){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${n}`}function eE(n,t){return`indices(${n}, 0) is invalid: ${t} < 0`}function nE(n,t,e){return`indices(${n}, 0) is invalid: ${t} >= ${e}`}function sE(n,t){return`only one output dimension may be -1, not both ${n} and ${t}`}function iE(n,t){return`size ${n} must be non-negative, not ${t}`}function rE(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function oE(n,t){const e=Ce(n),s=Ce(t);return`Input to reshape is a SparseTensor with ${e}
  dense values, but the requested shape requires a multiple of ${s}. inputShape=${n} outputShape= ${t}`}function aE(n,t){const e=Ce(n),s=Ce(t);return`Input to reshape is a tensor with ${e} dense values, but the requested shape has ${s}. inputShape=${n} outputShape=${t}`}function gv(){return"segment ids must be >= 0"}function lE(){return"segment ids are not increasing"}function cE(n,t){return`Segment id ${n} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function uE(n,t,e){return`Bad: indices[${n}] == ${t} out of range [0, ${e})`}function sV(n,t){let e=!1,s;for(n<=Ew?(s=n,e=!0):s=Jb(n,Math.floor(Math.sqrt(n)));!e;)s>t||s===n?e=!0:s=Jb(n,s+1);return s}function iV(n,t,e){const s=[],i=n.length;for(let r=0;r<i;r++)r!==t?s.push(n[r]):s.push(e);return s}function hE(n,t,e,s){const i=t.shape.length,r=n.shape.length;if(s!==0&&(s<-i||s>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${s}`);if(s<0&&(s+=i),s>r)throw new Error(`batchDims (${s}) must be less than rank(x) (
    ${r}).`);if(e<s)throw new Error(`batchDims (${s}) must be less than or equal to axis (${e}).`);for(let f=0;f<s;++f)if(n.shape[f]!==t.shape[f])throw new Error(`x.shape[${f}]: ${n.shape[f]} should be equal to indices.shape[${f}]: ${t.shape[f]}.`);const o=n.shape[e],a=[];let l=1,u=1,h=1;for(let f=0;f<s;++f)a.push(n.shape[f]),l*=n.shape[f];for(let f=s;f<e;f++)a.push(n.shape[f]),u*=n.shape[f];for(let f=s;f<i;f++)a.push(t.shape[f]);for(let f=e+1;f<r;f++)a.push(n.shape[f]),h*=n.shape[f];return{batchSize:l,sliceSize:h,outerSize:u,dimSize:o,outputShape:a}}function lc(n){try{return n.map(t=>eu(t))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function dE(n){return n.map(t=>Yc(t))}const rV=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:Dw,ERF_A2:Rw,ERF_A3:Mw,ERF_A4:Ow,ERF_A5:Fw,ERF_P:Nw,PARALLELIZE_THRESHOLD:Ew,get RowPartitionType(){return Pa},SELU_SCALE:F2,SELU_SCALEALPHA:O2,applyActivation:xw,assertAndGetBroadcastShape:es,assertAxesAreInnerMostDims:ur,assertParamsConsistent:Iw,assignToTypedArray:Z5,axesAreInnerMostDims:tw,calculateShapes:Bh,checkEinsumDimSizes:zw,checkPadOnDimRoundingMode:ao,combineLocations:c5,combineRaggedTensorToTensorShapes:G5,complexWithEvenIndex:K5,complexWithOddIndex:Y5,computeConv2DInfo:cr,computeConv3DInfo:cu,computeDefaultPad:qy,computeDilation2DInfo:z0,computeOptimalWindowSize:M2,computeOutAndReduceShapes:tr,computeOutShape:vl,computePool2DInfo:ga,computePool3DInfo:hc,convertConv2DDataFormat:dc,decodeEinsumEquation:Lw,eitherStridesOrDilationsAreOne:Sr,expandShapeToKeepDim:Fi,exponent:Q5,exponents:J5,fromStringArrayToUint8:dE,fromUint8ToStringArray:lc,getAxesPermutation:xi,getBroadcastDims:Ud,getComplexWithIndex:Pw,getEinsumComputePath:Ww,getEinsumPermutation:Bw,getFusedBiasGradient:mw,getFusedDyActivation:gw,getImageCenter:_w,getInnerMostAxes:_i,getPermuted:j0,getRaggedRank:j5,getReductionAxes:Hi,getReshaped:H0,getReshapedPermuted:X0,getRowPartitionTypesHelper:H5,getSliceBeginCoords:Aw,getSliceSize:$w,getSparseFillEmptyRowsIndicesDenseShapeMismatch:tE,getSparseFillEmptyRowsNegativeIndexErrorMessage:eE,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:nE,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:rE,getSparseReshapeInputOutputMismatchErrorMessage:aE,getSparseReshapeInputOutputMultipleErrorMessage:oE,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:sE,getSparseReshapeNegativeOutputDimErrorMessage:iE,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:uE,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:gv,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:lE,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:cE,getUndoAxesPermutation:uu,isIdentityPermutation:Vw,mergeRealAndImagArrays:ac,prepareAndValidate:Sw,prepareSplitSize:Uw,shouldFuse:bw,splitRealAndImagArrays:q5,stridesOrDilationsArePositive:Th,tupleValuesAreOne:Sh,upcastType:To,validateDefaultValueShape:X5,warn:Uo},Symbol.toStringTag,{value:"Module"}));YW();const fE={kernelName:T1,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>Jt(n,G0(rn(e,"float32"),-1))}}};const oV={kernelName:Hp,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>{const s=ai(rn(e,"float32")),i=yr(Vn(Bs(1),s));return Ii(Mn(n,i))}}}};const aV={kernelName:jp,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>{const s=yr(Vn(ai(rn(e,"float32")),1));return Mn(n,s)}}}};const lV={kernelName:rf,inputsToSave:["a","b"],gradFunc:(n,t)=>{const[e,s]=t,i=es(e.shape,s.shape);return{a:()=>{let a=n;const l=Hi(e.shape,i);return l.length>0&&(a=Rn(a,l)),ne(a,e.shape)},b:()=>{let a=n;const l=Hi(s.shape,i);return l.length>0&&(a=Rn(a,l)),ne(a,s.shape)}}}};const cV={kernelName:ry,saveAllInputs:!0,gradFunc:(n,t)=>{const e={};return t.forEach((s,i)=>{e[i]=()=>n.clone()}),e}};const uV={kernelName:I1,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>As(e)}}};const hV={kernelName:E1,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>As(e)}}};const dV={kernelName:Xp,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>Mn(n,yr(Vn(Bs(1),ai(rn(e,"float32")))))}}};const fV={kernelName:qp,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>{const s=yr(Be(Bs(1),ai(rn(e,"float32"))));return Mn(n,s)}}}};const pV={kernelName:Zp,inputsToSave:["a","b"],gradFunc:(n,t)=>{const[e,s]=t,i=es(e.shape,s.shape);return{a:()=>{const a=Be(ai(e),ai(s));let l=Jt(n,Mn(s,a));const u=Hi(e.shape,i);return u.length>0&&(l=Rn(l,u)),ne(l,e.shape)},b:()=>{const a=Be(ai(e),ai(s));let l=Ii(Jt(n,Mn(e,a)));const u=Hi(s.shape,i);return u.length>0&&(l=Rn(l,u)),ne(l,s.shape)}}}};const gV={kernelName:Kp,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>Mn(n,Be(ai(rn(e,"float32")),1))}}};const mV={kernelName:Yp,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>Mn(n,Vn(Bs(1),ai(rn(e,"float32"))))}}};function xV(n,t,e,s,i,r){const o=Bt(n,"dy","avgPool3dGrad"),a=Bt(t,"input","avgPool3dGrad");let l=o,u=a,h=!1;a.rank===4&&(h=!0,l=ne(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),u=ne(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),wt(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),wt(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),ao("avgPool3dGrad",i,r);const f={dy:l,input:u},g={filterSize:e,strides:s,pad:i,dimRoundingMode:r},m=te.runKernel(cy,f,g);return h?ne(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}const bV=ie({avgPool3dGrad_:xV});const vV={kernelName:A1,inputsToSave:["x"],gradFunc:(n,t,e)=>{const[s]=t,{filterSize:i,strides:r,pad:o,dimRoundingMode:a}=e;return{x:()=>bV(n,s,i,r,o,a)}}};function yV(n,t,e,s,i){const r=Bt(n,"dy","avgPoolGrad"),o=Bt(t,"input","avgPoolGrad");wt(o.rank===r.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${r.rank})`);let a=o,l=r,u=!1;o.rank===3&&(u=!0,a=ne(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=ne(r,[1,r.shape[0],r.shape[1],r.shape[2]])),wt(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),wt(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const h={dy:l,input:a},f={filterSize:e,strides:s,pad:i},g=te.runKernel(ly,h,f);return u?ne(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const wV=ie({avgPoolGrad_:yV});const kV={kernelName:_1,inputsToSave:["x"],gradFunc:(n,t,e)=>{const[s]=t,{filterSize:i,strides:r,pad:o}=e;return{x:()=>wV(n,s,i,r,o)}}};const CV={kernelName:$1,inputsToSave:["a","b"],gradFunc:(n,t,e)=>{const[s,i]=t,{transposeA:r,transposeB:o}=e;return!r&&!o?{a:()=>Ls(n,i,!1,!0),b:()=>Ls(s,n,!0,!1)}:!r&&o?{a:()=>Ls(n,i,!1,!1),b:()=>Ls(n,s,!0,!1)}:r&&!o?{a:()=>Ls(i,n,!1,!0),b:()=>Ls(s,n,!1,!1)}:{a:()=>Ls(i,n,!0,!0),b:()=>Ls(n,s,!0,!0)}}};const SV={kernelName:N1,gradFunc:(n,t,e)=>{const{blockShape:s,crops:i}=e;return{x:()=>lw(n,s,i)}}};const TV={kernelName:zO,gradFunc:(n,t,e)=>{const s=e,i=s.inputShape,r=s.shape,o=Array.from(r);for(let l=i.length-1;l>=0;l--)if(i[l]===r[l])o[l]=1;else if(i[l]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${r}].`);const a=[];for(let l=0;l<o.length;l++)o[l]>1&&a.push(l);return{x:()=>Rn(n,a,!0)}}};const IV={kernelName:Jp,gradFunc:n=>({x:()=>n.clone()})};const EV={kernelName:Qp,gradFunc:n=>({x:()=>As(n)})};const _V={kernelName:t0,inputsToSave:["x"],gradFunc:(n,t,e)=>{const[s]=t,{clipValueMin:i,clipValueMax:r}=e;return{x:()=>zr(rc(Ph(s,i),lf(s,r)),n,As(n))}}};const AV={kernelName:D1,inputsToSave:["x"],gradFunc:fE.gradFunc};const $V={kernelName:R1,saveAllInputs:!0,gradFunc:(n,t,e)=>{const s=t.map(l=>l.shape),{axis:i}=e,r=ds(i,t[0].shape)[0],o=s.map(l=>l[r]);return jo(n,o,r).map(l=>()=>l)}};const NV={kernelName:M1,inputsToSave:["x","filter"],gradFunc:(n,t,e)=>{const[s,i]=t,{dilations:r,strides:o,pad:a,dataFormat:l}=e;return wt(Sh(r),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`),{x:()=>Zy(s.shape,n,i,o,a,l),filter:()=>pw(s,n,i.shape,o,a,l)}}};const DV={kernelName:O1,inputsToSave:["dy","filter"],gradFunc:(n,t,e)=>{const[s,i]=t,{strides:r,pad:o,dataFormat:a,dimRoundingMode:l}=e;return{dy:()=>Ih(n,i,r,o,a,1,l),filter:()=>pw(n,s,i.shape,r,o,a,l)}}};function RV(n,t,e,s,i){let r=n;n.rank===4&&(r=ne(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]]));let o=t;o.rank===4&&(o=ne(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),wt(r.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${r.shape}.`),wt(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),wt(e.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${e}.`),wt(r.shape[4]===e[3],()=>`Error in conv3dDerFilter: depth of input ${r.shape[4]}) must match input depth in filter (${e[3]}.`),wt(o.shape[4]===e[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${e[4]}).`);const a={x:r,dy:o},l={strides:s,pad:i,filterShape:e};return te.runKernel(py,a,l)}const MV=ie({conv3DBackpropFilter_:RV});const OV={kernelName:F1,inputsToSave:["x","filter"],gradFunc:(n,t,e)=>{const{dilations:s,strides:i,pad:r}=e;wt(Sh(s),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const[o,a]=t;return{x:()=>r5(o.shape,n,a,i,r),filter:()=>MV(o,n,a.shape,i,r)}}};const FV={kernelName:e0,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>Jt(Ii(C5(rn(e,"float32"))),n)}}};const PV={kernelName:n0,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>Jt(S5(rn(e,"float32")),n)}}};const LV={kernelName:P1,inputsToSave:["x"],gradFunc:(n,t,e)=>{const[s]=t,{axis:i,exclusive:r,reverse:o}=e;return{x:()=>{const a=xi([i],s.rank);let l=a5(n,i,r,!o);return a!=null&&(l=Es(l,a)),l}}}};const BV={kernelName:L1,inputsToSave:["x","filter"],gradFunc:(n,t,e)=>{const{dilations:s,strides:i,pad:r,dimRoundingMode:o}=e,a=s??[1,1];wt(Sh(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,u]=t;return wt(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),wt(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),wt(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),wt(Sr(i,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${a}'.`),ao("depthwiseConv2d",r,o),{x:()=>sW(l.shape,n,u,i,r,a,o),filter:()=>eW(l,n,u.shape,i,r,a,o)}}};const zV={kernelName:B1,inputsToSave:["x","filter"],gradFunc:(n,t,e)=>{const[s,i]=t,r={x:s,filter:i,dy:n},o={x:s,filter:i,dy:n};return{x:()=>te.runKernel(Qb,r,e),filter:()=>te.runKernel(tv,o,e)}}};const WV={kernelName:i0,outputsToSave:[!0],gradFunc:(n,t)=>{const[e]=t,s={dy:n,y:e};return{x:()=>te.runKernel(Cy,s)}}};const VV={kernelName:r0,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t,s=Jt(Cl(Ii(ai(e))),2/Math.sqrt(Math.PI));return{x:()=>Jt(n,s)}}};const UV={kernelName:o0,outputsToSave:[!0],gradFunc:(n,t)=>{const[e]=t;return{x:()=>Jt(n,e)}}};const GV={kernelName:W1,inputsToSave:["input"],gradFunc:(n,t)=>{const[e]=t;return{input:()=>ne(n,e.shape)}}};const HV={kernelName:a0,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>Jt(n,Cl(e))}}};const jV={kernelName:l0,gradFunc:n=>({x:()=>As(n)})};const XV={kernelName:c0,inputsToSave:["a","b"],gradFunc:(n,t)=>{const[e,s]=t,i=es(e.shape,s.shape);return{a:()=>{const a=Mn(n,rn(s,"float32")),l=Hi(e.shape,i);return l.length>0?ne(Rn(a,l),e.shape):a},b:()=>{let a=Jt(n,rn(e,"float32"));const l=Hi(s.shape,i);l.length>0&&(a=ne(Rn(a,l),s.shape));const u=ai(s);return Ii(Mn(a,rn(u,"float32")))}}}};const qV={kernelName:V1,inputsToSave:["x","mean","variance","scale"],gradFunc:(n,t,e)=>{const{varianceEpsilon:s}=e,[i,r,o,a]=t,l=a??Bs(1),u=Hi(r.shape,i.shape),h=[];if(r.rank===1){for(let R=0;R<i.shape.length-1;++R)h.push(i.shape[R]);h.push(1)}const f=Vn(i,r),g=Jt(n,l),m=y5(Be(o,Bs(s))),y=Jt(Jt(Jt(m,m),m),Bs(-.5));return{x:()=>r.rank===1?ne(Jt(Jt(n,Va(ne(m,[1,1,1,r.shape[0]]),h)),l),i.shape):ne(Jt(Jt(n,m),l),i.shape),mean:()=>{let R=Jt(Jt(m,Bs(-1)),g);return r.rank===1&&(R=Rn(R,u)),ne(R,r.shape)},variance:()=>{let R=Jt(Jt(y,f),g);return r.rank===1&&(R=Rn(R,u)),ne(R,r.shape)},scale:()=>{const R=Jt(f,m);let V=Jt(n,R);return r.rank===1&&(V=Rn(V,u)),ne(V,r.shape)},offset:()=>{let R=n;return r.rank===1&&(R=Rn(R,u)),ne(R,r.shape)}}}};const KV={kernelName:U1,inputsToSave:["x","indices"],gradFunc:(n,t,e)=>{const[s,i]=t,{axis:r,batchDims:o}=e,a=ds(r,s.shape)[0],l=(u,h,f)=>()=>{const g=u.shape,m=h.size,y=g.slice(0,a),k=y.length,C=g.slice(r,g.length).slice(1),S=C.length,$=cC(0,k),D=cC(k+1,k+1+S),R=uC([y,[m],C]),V=ne(f,R),E=ne(h,[m]),q=uC([[k],$,D]),X=Es(V,q);let B=_5(X,E,u.shape[a]);const U=uu(q);return B=Es(B,U),B};if(o===1){const u=s.shape[0],h=s.split(u,0);return{x:()=>oc(h.map((m,y)=>l(m,i.slice(y,1),n.slice(y,1))())).reshape(s.shape),indices:()=>i}}else return{x:l(s,i,n),indices:()=>i}}};function cC(n,t){const e=[];for(let s=n;s<t;++s)e.push(s);return e}function uC(n){const t=[];for(let e=0;e<n.length;++e)for(let s=0;s<n[e].length;++s)t.push(n[e][s]);return t}const YV={kernelName:u0,inputsToSave:["a","b"],gradFunc:(n,t)=>{const[e,s]=t;return{a:()=>As(e),b:()=>As(s)}}};const ZV={kernelName:h0,gradFunc:n=>({x:()=>rn(n,"float32")})};const JV={kernelName:d0,gradFunc:n=>({x:()=>As(n)})};const QV={kernelName:f0,gradFunc:n=>({x:()=>As(n)})};const tU={kernelName:p0,gradFunc:n=>({x:()=>As(n)})};const eU={kernelName:H1,inputsToSave:["x"],gradFunc:(n,t,e)=>{const[s]=t,{alpha:i}=e,r=qo(s,0);return{x:()=>zr(r,n,Jt(n,i))}}};const nU={kernelName:m0,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>Mn(n,Be(e,1))}}};const sU={kernelName:g0,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>Mn(n,rn(e,"float32"))}}};const iU={kernelName:VO,inputsToSave:[],outputsToSave:[!0],gradFunc:(n,t,e)=>{const[s]=t,{axis:i}=e;return{logits:()=>{const o=Cl(s);return Vn(n,Jt(Rn(n,i,!0),o))}}}};function rU(n,t,e,s=5,i=1,r=1,o=.5){const a={x:n,y:t,dy:e},l={depthRadius:s,bias:i,alpha:r,beta:o};return te.runKernel(Ay,a,l)}const oU=ie({localResponseNormalizationBackprop_:rU});const aU={kernelName:Z1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,t,e)=>{const[s,i]=t,{depthRadius:r,bias:o,alpha:a,beta:l}=e;return{x:()=>oU(s,i,n,r,o,a,l)}}};function pE(n,t,e,s){return t.rank<e.rank&&(t=ne(t,Fi(t.shape,s))),n.rank<e.rank&&(n=ne(n,Fi(n.shape,s))),{x:()=>Jt(n,rn(kl(e,t),n.dtype))}}const hC={kernelName:J1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,t,e)=>{const s=e,{reductionIndices:i}=s,r=t[0],o=t[1],a=ds(i,r.shape),l=pE(n,o,r,a);return{x:()=>l.x()}}};const lU={kernelName:x0,inputsToSave:["a","b"],gradFunc:(n,t)=>{const[e,s]=t;return{a:()=>Jt(n,rn(Ph(e,s),"float32")),b:()=>Jt(n,rn(jm(e,s),"float32"))}}};function cU(n,t,e,s,i,r,o){const a=Bt(n,"dy","maxPool3dGrad"),l=Bt(t,"input","maxPool3dGrad"),u=Bt(e,"output","maxPool3dGrad");let h=a,f=l,g=u,m=!1;l.rank===4&&(m=!0,h=ne(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),f=ne(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),g=ne(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),wt(h.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${h.rank}.`),wt(f.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${f.rank}.`),wt(g.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${g.rank}.`),ao("maxPool3dGrad",r,o);const y={dy:h,input:f,output:g},k={filterSize:s,strides:i,pad:r,dimRoundingMode:o},C=te.runKernel(Ny,y,k);return m?ne(C,[C.shape[1],C.shape[2],C.shape[3],C.shape[4]]):C}const uU=ie({maxPool3dGrad_:cU});const hU={kernelName:t2,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,t,e)=>{const[s,i]=t,{filterSize:r,strides:o,pad:a,dimRoundingMode:l}=e;return{x:()=>uU(n,s,i,r,o,a,l)}}};function dU(n,t,e,s,i,r,o){const a=Bt(n,"dy","maxPoolGrad"),l=Bt(t,"input","maxPoolGrad"),u=Bt(e,"output","maxPoolGrad");wt(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),wt(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),wt(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),ao("maxPoolGrad",r,o);const h={dy:a,input:l,output:u},f={filterSize:s,strides:i,pad:r,dimRoundingMode:o};return te.runKernel($y,h,f)}const fU=ie({maxPoolGrad_:dU});const pU={kernelName:Q1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,t,e)=>{const[s,i]=t,{filterSize:r,strides:o,pad:a}=e;return{x:()=>fU(n,s,i,r,o,a)}}};const gU={kernelName:e2,inputsToSave:["x"],gradFunc:(n,t,e)=>{const[s]=t,{axis:i}=e,r=ds(i,s.shape),a=tr(s.shape,r)[1],l=Ce(a);return{x:()=>{const h=s.shape.slice();r.forEach(m=>{h[m]=1});const f=ne(n,h);return Mn(Jt(f,du(s.shape,"float32")),l)}}}};const mU={kernelName:n2,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,t,e)=>{const s=e,{axis:i}=s,[r,o]=t,a=ds(i,r.shape),l=pE(n,o,r,a);return{x:()=>l.x()}}};const xU={kernelName:b0,inputsToSave:["a","b"],gradFunc:(n,t)=>{const[e,s]=t;return{a:()=>Jt(n,rn(lf(e,s),"float32")),b:()=>Jt(n,rn(qo(e,s),"float32"))}}};const bU={kernelName:s2,inputsToSave:["x"],gradFunc:(n,t,e)=>{const s=t[0],{paddings:i}=e,r=i.map(o=>o[0]);return{x:()=>si(n,r,s.shape)}}};const vU={kernelName:v0,inputsToSave:["a","b"],gradFunc:(n,t)=>{const[e,s]=t,i=es(e.shape,s.shape);return{a:()=>{const a=Hi(e.shape,i);return a.length>0?ne(Rn(n,a),e.shape):n},b:()=>{const a=Jt(n,Ii(R2(Mn(e,s)))),l=Hi(s.shape,i);return l.length>0?ne(Rn(a,l),s.shape):a}}}};const yU={kernelName:y0,inputsToSave:["a","b"],gradFunc:(n,t)=>{const[e,s]=t,i=es(e.shape,s.shape);return{a:()=>{const a=Jt(n,rn(s,"float32")),l=Hi(e.shape,i);return l.length>0?ne(Rn(a,l),e.shape):a},b:()=>{const a=Jt(n,rn(e,"float32")),l=Hi(s.shape,i);return l.length>0?ne(Rn(a,l),s.shape):a}}}};const wU={kernelName:i2,gradFunc:n=>({x:()=>Ii(n)})};const kU={kernelName:a2,inputsToSave:["indices"],gradFunc:(n,t)=>{const e=t[0];return{indices:()=>Zi(e.shape,"float32")}}};const CU={kernelName:o2,gradFunc:n=>({x:()=>As(n)})};const SU={kernelName:l2,saveAllInputs:!0,gradFunc:(n,t,e)=>{const{axis:s}=e;return Ah(n,s).map(r=>()=>r)}};const dC={kernelName:c2,inputsToSave:["x"],gradFunc:(n,t,e)=>{const s=t[0],{paddings:i}=e,r=i.map(o=>o[0]);return{x:()=>si(n,r,s.shape)}}};const TU={kernelName:w0,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(n,t)=>{const[e,s,i]=t,r=e,o=s,a=es(r.shape,o.shape);return{a:()=>{const h=rn(o,"float32");let f=Jt(n,Jt(h,Eh(r,Vn(h,Bs(1)))));const g=Hi(r.shape,a);return g.length>0&&(f=Rn(f,g)),ne(f,r.shape)},b:()=>{const h=qo(r,0),f=zr(h,Sl(r),As(r));let g=Jt(n,Jt(i,f));const m=Hi(o.shape,a);return m.length>0&&(g=Rn(g,m)),ne(g,o.shape)}}}};const IU={kernelName:u2,inputsToSave:["x","alpha"],gradFunc:(n,t)=>{const[e,s]=t,i=qo(e,0);return{x:()=>zr(i,n,Jt(n,s)),alpha:()=>{let r=zr(i,As(n),Jt(n,e));const o=Hi(s.shape,n.shape);return o.length>0&&(r=Rn(r,o)),ne(r,s.shape)}}}};function EU(n,t,e){const s=n.shape.slice();s[e]=1;const i=ne(t,s),r=dv(n,e,!0,!1),o=dv(n,e,!0,!0),a=Jt(r,o);return Jt(i,a)}function _U(n,t,e){const s=n.shape.length,i=s-e.length,r=xi(e,s);let o=n;r!=null&&(o=Es(n,r));const a=o.shape.slice(),u=a.splice(s-e.length,e.length).reduce((g,m)=>g*m,1);a.push(u);const h=o.reshape(a);let f=EU(h,t,i);if(f=f.reshape(o.shape),r!=null){const g=uu(r);f=Es(f,g)}return f}const AU={kernelName:h2,inputsToSave:["x"],gradFunc:(n,t,e)=>{const[s]=t,{axis:i}=e;let r=[];return i==null?r=s.shape.map((o,a)=>a):typeof i=="number"?r=[i]:r=i,{x:()=>_U(s,n,r)}}};const $U={kernelName:s0,inputsToSave:["a","b"],gradFunc:(n,t)=>{const[e,s]=t,i=es(e.shape,s.shape);return{a:()=>{const a=Mn(n,rn(s,"float32")),l=Hi(e.shape,i);return l.length>0?ne(Rn(a,l),e.shape):a},b:()=>{let a=Jt(n,rn(e,"float32"));const l=Hi(s.shape,i);l.length>0&&(a=ne(Rn(a,l),s.shape));const u=ai(s);return Ii(Mn(a,rn(u,"float32")))}}}};const NU={kernelName:k0,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>Mn(n,Ii(ai(e)))}}};const DU={kernelName:S0,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t,s=Jt(lf(e,6),G0(e));return{x:()=>Jt(n,rn(s,"float32"))}}};const RU={kernelName:C0,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>Jt(n,rn(G0(e),"float32"))}}};const MU={kernelName:d2,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>ne(n,e.shape)}}};const OU={kernelName:p2,inputsToSave:["images"],gradFunc:(n,t,e)=>{const[s]=t,i={dy:n,images:s};return{images:()=>te.runKernel(Ly,i,e)}}};const FU={kernelName:f2,inputsToSave:["images"],gradFunc:(n,t,e)=>{const[s]=t,i={dy:n,images:s};return{images:()=>te.runKernel(Py,i,e)}}};const PU={kernelName:g2,gradFunc:(n,t,e)=>{const{dims:s}=e,i=ds(s,n.shape);return{x:()=>_h(n,i)}}};const LU={kernelName:T0,gradFunc:n=>({x:()=>As(n)})};const BU={kernelName:I0,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>Ii(Mn(n,Jt(Eh(e,1.5),2)))}}};const zU={kernelName:m2,inputsToSave:["condition"],gradFunc:(n,t)=>{const[e]=t;return{condition:()=>rn(As(e),"float32"),t:()=>Jt(n,rn(e,n.dtype)),e:()=>Jt(n,rn(iw(e),n.dtype))}}};const WU={kernelName:E0,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>{const s=qo(e,Bs(0)),i=Bs(O2),r=Bs(F2),o=Jt(n,r),a=Jt(Jt(n,i),Cl(rn(e,"float32")));return zr(s,o,a)}}}};const VU={kernelName:N0,outputsToSave:[!0],gradFunc:(n,t)=>{const[e]=t;return{x:()=>Jt(n,Jt(e,Vn(Bs(1),e)))}}};const UU={kernelName:$0,gradFunc:n=>({x:()=>As(n)})};const GU={kernelName:_0,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>Jt(Jy(rn(e,"float32")),n)}}};const HU={kernelName:A0,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>Jt(o5(rn(e,"float32")),n)}}};const jU={kernelName:x2,inputsToSave:["x"],gradFunc:(n,t,e)=>{const[s]=t,{begin:i,size:r}=e,o=s.shape,[a,l]=Tw(s,i,r),u=[];for(let h=0;h<n.rank;h++)u.push([a[h],o[h]-a[h]-l[h]]);return{x:()=>aw(n,u)}}};const XU={kernelName:w2,outputsToSave:[!0],gradFunc:(n,t,e)=>{const[s]=t,{dim:i}=e,r=!0,o=Jt(n,s);return{logits:()=>Vn(o,Jt(Rn(o,[i],r),s))}}};const qU={kernelName:D0,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>Jt(n,af(e))}}};const fC={kernelName:v2,gradFunc:(n,t,e)=>{const{blockShape:s,paddings:i}=e;return{x:()=>Yy(n,s,i)}}};const pC={kernelName:y2,gradFunc:(n,t,e)=>{const{axis:s}=e;return{x:()=>so(n,s)}}};const KU={kernelName:R0,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>Mn(n,Jt(yr(rn(e,"float32")),2))}}};const YU={kernelName:By,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>Jt(n,Jt(rn(e,"float32"),2))}}};const ZU={kernelName:M0,inputsToSave:["a","b"],gradFunc:(n,t)=>{const[e,s]=t,i=Bs(2);return{a:()=>Jt(n,Jt(i,Vn(e,s))),b:()=>Jt(n,Jt(i,Vn(s,e)))}}};const JU={kernelName:B0,gradFunc:n=>({x:()=>As(n)})};const QU={kernelName:O0,inputsToSave:["a","b"],gradFunc:(n,t)=>{const[e,s]=t,i=es(e.shape,s.shape);return{a:()=>{let a=n;const l=Hi(e.shape,i);return l.length>0&&(a=Rn(a,l)),ne(a,e.shape)},b:()=>{let a=n;const l=Hi(s.shape,i);return l.length>0&&(a=Rn(a,l)),ne(Ii(a),s.shape)}}}};const tG={kernelName:b2,inputsToSave:["x"],gradFunc:(n,t,e)=>{const[s]=t,i=s.shape.slice(),{axis:r}=e;ds(r,s.shape).forEach(u=>{i[u]=1});const a=ne(n,i),l=Jt(a,du(s.shape,"float32"));return{x:()=>l}}};const eG={kernelName:F0,inputsToSave:["x"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>Mn(n,ai(Jy(e)))}}};const nG={kernelName:P0,outputsToSave:[!0],gradFunc:(n,t)=>{const[e]=t;return{x:()=>Jt(Vn(Bs(1),ai(e)),n)}}};const sG={kernelName:L0,inputsToSave:["x"],gradFunc:(n,t,e)=>{const[s]=t,{reps:i}=e;return{x:()=>{let o=As(s);if(s.rank===1)for(let a=0;a<i[0];++a)o=Be(o,si(n,[a*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)o=Be(o,si(n,[a*s.shape[0],l*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)for(let u=0;u<i[2];++u)o=Be(o,si(n,[a*s.shape[0],l*s.shape[1],u*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else if(s.rank===4)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)for(let u=0;u<i[2];++u)for(let h=0;h<i[3];++h)o=Be(o,si(n,[a*s.shape[0],l*s.shape[1],u*s.shape[2],h*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${s.rank} tensors yet.`);return o}}}};const iG={kernelName:Dd,gradFunc:(n,t,e)=>{const s=e,{perm:i}=s,r=uu(i);return{x:()=>Es(n,r)}}};const rG={kernelName:k2,gradFunc:(n,t,e)=>{const s=e,{axis:i}=s;return{value:()=>oc(n,i)}}};const oG={kernelName:C2,inputsToSave:["segmentIds"],gradFunc:(n,t)=>{const[e]=t;return{x:()=>aG(n,e)}}};function aG(n,t){const e=hu(t,As(t)),s=ew(n,e);let i=Ph(t,Bs(0,"int32"));const r=s.rank-i.rank;for(let a=0;a<r;++a)i=to(i,a+1);i=rc(i,du(s.shape,"bool"));const o=As(s);return zr(i,s,o)}const lG={kernelName:S2,gradFunc:n=>({x:()=>As(n)})};const cG=[fE,oV,aV,lV,cV,uV,hV,dV,fV,pV,gV,mV,vV,kV,CV,SV,TV,IV,EV,_V,AV,$V,DV,NV,OV,FV,PV,LV,BV,zV,$U,WV,VV,UV,GV,HV,XV,jV,qV,KV,YV,ZV,JV,QV,tU,eU,nU,sU,iU,aU,hC,hC,lU,hU,pU,gU,mU,xU,bU,vU,yU,wU,kU,CU,SU,dC,dC,TU,IU,AU,NU,DU,RU,MU,OU,FU,PU,LU,BU,zU,WU,VU,UU,GU,HU,jU,XU,qU,fC,fC,pC,pC,KU,ZU,YU,JU,QU,tG,eG,nG,sG,iG,rG,oG,lG];for(const n of cG)GO(n);ve().prototype.abs=function(){return this.throwIfDisposed(),Fr(this)};ve().prototype.acos=function(){return this.throwIfDisposed(),jF(this)};ve().prototype.acosh=function(){return this.throwIfDisposed(),qF(this)};ve().prototype.add=function(n){return this.throwIfDisposed(),Be(this,n)};ve().prototype.all=function(n,t){return this.throwIfDisposed(),n5(this,n,t)};ve().prototype.any=function(n,t){return this.throwIfDisposed(),uv(this,n,t)};ve().prototype.argMax=function(n){return this.throwIfDisposed(),Cp(this,n)};ve().prototype.argMin=function(n){return this.throwIfDisposed(),QF(this,n)};ve().prototype.asScalar=function(){return this.throwIfDisposed(),wt(this.size===1,()=>"The array must have only 1 element."),ne(this,[])};ve().prototype.asType=function(n){return this.throwIfDisposed(),rn(this,n)};ve().prototype.as1D=function(){return this.throwIfDisposed(),ne(this,[this.size])};ve().prototype.as2D=function(n,t){return this.throwIfDisposed(),ne(this,[n,t])};ve().prototype.as3D=function(n,t,e){return this.throwIfDisposed(),ne(this,[n,t,e])};ve().prototype.as4D=function(n,t,e,s){return this.throwIfDisposed(),ne(this,[n,t,e,s])};ve().prototype.as5D=function(n,t,e,s,i){return this.throwIfDisposed(),ne(this,[n,t,e,s,i])};ve().prototype.asin=function(){return this.throwIfDisposed(),eP(this)};ve().prototype.asinh=function(){return this.throwIfDisposed(),sP(this)};ve().prototype.atan=function(){return this.throwIfDisposed(),rP(this)};ve().prototype.atan2=function(n){return this.throwIfDisposed(),aP(this,n)};ve().prototype.atanh=function(){return this.throwIfDisposed(),cP(this)};ve().prototype.avgPool=function(n,t,e,s){return this.throwIfDisposed(),Ky(this,n,t,e,s)};ve().prototype.batchToSpaceND=function(n,t){return this.throwIfDisposed(),Yy(this,n,t)};ve().prototype.batchNorm=function(n,t,e,s,i){return this.throwIfDisposed(),A2(this,n,t,e,s,i)};ve().prototype.broadcastTo=function(n){return this.throwIfDisposed(),yp(this,n)};ve().prototype.cast=function(n){return this.throwIfDisposed(),rn(this,n)};ve().prototype.ceil=function(){return this.throwIfDisposed(),FP(this)};ve().prototype.clipByValue=function(n,t){return this.throwIfDisposed(),Xo(this,n,t)};ve().prototype.concat=function(n,t){return this.throwIfDisposed(),n instanceof zi&&(n=[n]),so([this,...n],t)};ve().prototype.conv1d=function(n,t,e,s,i,r){return this.throwIfDisposed(),s5(this,n,t,e,s,i,r)};ve().prototype.conv2dTranspose=function(n,t,e,s,i){return this.throwIfDisposed(),i5(this,n,t,e,s,i)};ve().prototype.conv2d=function(n,t,e,s,i,r){return this.throwIfDisposed(),Ih(this,n,t,e,s,i,r)};ve().prototype.cos=function(){return this.throwIfDisposed(),Jy(this)};ve().prototype.cosh=function(){return this.throwIfDisposed(),o5(this)};ve().prototype.cumprod=function(n,t,e){return this.throwIfDisposed(),dv(this,n,t,e)};ve().prototype.cumsum=function(n,t,e){return this.throwIfDisposed(),a5(this,n,t,e)};ve().prototype.depthToSpace=function(n,t){return this.throwIfDisposed(),aL(this,n,t)};ve().prototype.depthwiseConv2d=function(n,t,e,s,i,r){return this.throwIfDisposed(),Qy(this,n,t,e,s,i,r)};ve().prototype.dilation2d=function(n,t,e,s,i){return this.throwIfDisposed(),uL(this,n,t,e,s,i)};ve().prototype.divNoNan=function(n){return this.throwIfDisposed(),gL(this,n)};ve().prototype.div=function(n){return this.throwIfDisposed(),Mn(this,n)};ve().prototype.dot=function(n){return this.throwIfDisposed(),xL(this,n)};ve().prototype.elu=function(){return this.throwIfDisposed(),N2(this)};ve().prototype.equal=function(n){return this.throwIfDisposed(),kl(this,n)};ve().prototype.erf=function(){return this.throwIfDisposed(),l5(this)};ve().prototype.euclideanNorm=function(n,t){return this.throwIfDisposed(),AL(this,n,t)};ve().prototype.exp=function(){return this.throwIfDisposed(),Cl(this)};ve().prototype.expandDims=function(n){return this.throwIfDisposed(),to(this,n)};ve().prototype.expm1=function(){return this.throwIfDisposed(),RL(this)};ve().prototype.fft=function(){return this.throwIfDisposed(),I5(this)};ve().prototype.flatten=function(){return this.throwIfDisposed(),ne(this,[this.size])};ve().prototype.floor=function(){return this.throwIfDisposed(),R2(this)};ve().prototype.floorDiv=function(n){return this.throwIfDisposed(),e5(this,n)};ve().prototype.gather=function(n,t,e){return this.throwIfDisposed(),ew(this,n,t,e)};ve().prototype.greaterEqual=function(n){return this.throwIfDisposed(),Ph(this,n)};ve().prototype.greater=function(n){return this.throwIfDisposed(),qo(this,n)};ve().prototype.ifft=function(){return this.throwIfDisposed(),fv(this)};ve().prototype.irfft=function(){return this.throwIfDisposed(),Iz(this)};ve().prototype.isFinite=function(){return this.throwIfDisposed(),VL(this)};ve().prototype.isInf=function(){return this.throwIfDisposed(),GL(this)};ve().prototype.isNaN=function(){return this.throwIfDisposed(),jL(this)};ve().prototype.leakyRelu=function(n){return this.throwIfDisposed(),sw(this,n)};ve().prototype.lessEqual=function(n){return this.throwIfDisposed(),lf(this,n)};ve().prototype.less=function(n){return this.throwIfDisposed(),jm(this,n)};ve().prototype.localResponseNormalization=function(n,t,e,s){return this.throwIfDisposed(),ZL(this,n,t,e,s)};ve().prototype.logSigmoid=function(){return this.throwIfDisposed(),iB(this)};ve().prototype.logSoftmax=function(n){return this.throwIfDisposed(),f5(this,n)};ve().prototype.logSumExp=function(n,t){return this.throwIfDisposed(),p5(this,n,t)};ve().prototype.log=function(){return this.throwIfDisposed(),Sl(this)};ve().prototype.log1p=function(){return this.throwIfDisposed(),d5(this)};ve().prototype.logicalAnd=function(n){return this.throwIfDisposed(),rc(this,n)};ve().prototype.logicalNot=function(){return this.throwIfDisposed(),iw(this)};ve().prototype.logicalOr=function(n){return this.throwIfDisposed(),g5(this,n)};ve().prototype.logicalXor=function(n){return this.throwIfDisposed(),dB(this,n)};ve().prototype.matMul=function(n,t,e){return this.throwIfDisposed(),Ls(this,n,t,e)};ve().prototype.maxPool=function(n,t,e,s){return this.throwIfDisposed(),rw(this,n,t,e,s)};ve().prototype.max=function(n,t){return this.throwIfDisposed(),Ha(this,n,t)};ve().prototype.maximum=function(n){return this.throwIfDisposed(),hu(this,n)};ve().prototype.mean=function(n,t){return this.throwIfDisposed(),Oi(this,n,t)};ve().prototype.min=function(n,t){return this.throwIfDisposed(),Hm(this,n,t)};ve().prototype.minimum=function(n){return this.throwIfDisposed(),Ip(this,n)};ve().prototype.mirrorPad=function(n,t){return this.throwIfDisposed(),yB(this,n,t)};ve().prototype.mod=function(n){return this.throwIfDisposed(),kB(this,n)};ve().prototype.mul=function(n){return this.throwIfDisposed(),Jt(this,n)};ve().prototype.neg=function(){return this.throwIfDisposed(),Ii(this)};ve().prototype.norm=function(n,t,e){return this.throwIfDisposed(),D2(this,n,t,e)};ve().prototype.notEqual=function(n){return this.throwIfDisposed(),Xm(this,n)};ve().prototype.oneHot=function(n,t=1,e=0){return this.throwIfDisposed(),m5(this,n,t,e)};ve().prototype.onesLike=function(){return this.throwIfDisposed(),pa(this)};ve().prototype.pad=function(n,t){return this.throwIfDisposed(),aw(this,n,t)};ve().prototype.pool=function(n,t,e,s,i,r){return this.throwIfDisposed(),DB(this,n,t,e,s,i,r)};ve().prototype.pow=function(n){return this.throwIfDisposed(),Eh(this,n)};ve().prototype.prelu=function(n){return this.throwIfDisposed(),cw(this,n)};ve().prototype.prod=function(n,t){return this.throwIfDisposed(),OB(this,n,t)};ve().prototype.reciprocal=function(){return this.throwIfDisposed(),oz(this)};ve().prototype.relu=function(){return this.throwIfDisposed(),Lh(this)};ve().prototype.relu6=function(){return this.throwIfDisposed(),b5(this)};ve().prototype.reshapeAs=function(n){return this.throwIfDisposed(),ne(this,n.shape)};ve().prototype.reshape=function(n){return this.throwIfDisposed(),ne(this,n)};ve().prototype.resizeBilinear=function(n,t,e){return this.throwIfDisposed(),$5(this,n,t,e)};ve().prototype.resizeNearestNeighbor=function(n,t,e){return this.throwIfDisposed(),N5(this,n,t,e)};ve().prototype.reverse=function(n){return this.throwIfDisposed(),_h(this,n)};ve().prototype.rfft=function(){return this.throwIfDisposed(),Az(this)};ve().prototype.round=function(){return this.throwIfDisposed(),v5(this)};ve().prototype.rsqrt=function(){return this.throwIfDisposed(),y5(this)};ve().prototype.selu=function(){return this.throwIfDisposed(),w5(this)};ve().prototype.separableConv2d=function(n,t,e,s,i,r){return this.throwIfDisposed(),k5(this,n,t,e,s,i,r)};ve().prototype.sigmoid=function(){return this.throwIfDisposed(),af(this)};ve().prototype.sign=function(){return this.throwIfDisposed(),gz(this)};ve().prototype.sin=function(){return this.throwIfDisposed(),C5(this)};ve().prototype.sinh=function(){return this.throwIfDisposed(),S5(this)};ve().prototype.slice=function(n,t){return this.throwIfDisposed(),si(this,n,t)};ve().prototype.softmax=function(n){return this.throwIfDisposed(),fw(this,n)};ve().prototype.softplus=function(){return this.throwIfDisposed(),W0(this)};ve().prototype.spaceToBatchND=function(n,t){return this.throwIfDisposed(),lw(this,n,t)};ve().prototype.split=function(n,t){return this.throwIfDisposed(),jo(this,n,t)};ve().prototype.sqrt=function(){return this.throwIfDisposed(),yr(this)};ve().prototype.square=function(){return this.throwIfDisposed(),ai(this)};ve().prototype.squaredDifference=function(n){return this.throwIfDisposed(),Nz(this,n)};ve().prototype.squeeze=function(n){return this.throwIfDisposed(),U0(this,n)};ve().prototype.stack=function(n,t){this.throwIfDisposed();const e=n instanceof zi?[this,n]:[this,...n];return oc(e,t)};ve().prototype.step=function(n){return this.throwIfDisposed(),G0(this,n)};ve().prototype.stridedSlice=function(n,t,e,s,i,r,o,a){return this.throwIfDisposed(),Fz(this,n,t,e,s,i,r,o,a)};ve().prototype.sub=function(n){return this.throwIfDisposed(),Vn(this,n)};ve().prototype.sum=function(n,t){return this.throwIfDisposed(),Rn(this,n,t)};ve().prototype.tan=function(){return this.throwIfDisposed(),Lz(this)};ve().prototype.tanh=function(){return this.throwIfDisposed(),_2(this)};ve().prototype.tile=function(n){return this.throwIfDisposed(),Va(this,n)};ve().prototype.toBool=function(){return this.throwIfDisposed(),rn(this,"bool")};ve().prototype.toFloat=function(){return this.throwIfDisposed(),rn(this,"float32")};ve().prototype.toInt=function(){return this.throwIfDisposed(),rn(this,"int32")};ve().prototype.topk=function(n,t){return this.throwIfDisposed(),zz(this,n,t)};ve().prototype.transpose=function(n){return this.throwIfDisposed(),Es(this,n)};ve().prototype.unique=function(n){return this.throwIfDisposed(),Uz(this,n)};ve().prototype.unsortedSegmentSum=function(n,t){return this.throwIfDisposed(),_5(this,n,t)};ve().prototype.unstack=function(n){return this.throwIfDisposed(),Ah(this,n)};ve().prototype.where=function(n,t){return this.throwIfDisposed(),zr(n,this,t)};ve().prototype.zerosLike=function(){return this.throwIfDisposed(),As(this)};class hl extends Error{constructor(t){super(t),Object.setPrototypeOf(this,hl.prototype)}}class aa extends Error{constructor(t){super(t),Object.setPrototypeOf(this,aa.prototype)}}class Yt extends Error{constructor(t){super(t),Object.setPrototypeOf(this,Yt.prototype)}}class os extends Error{constructor(t){super(t),Object.setPrototypeOf(this,os.prototype)}}class Gw extends Error{constructor(t){super(t),Object.setPrototypeOf(this,Gw.prototype)}}class gE{constructor(t){this.maxEntries=t||100,this.cache=new Map}get(t){let e;return this.cache.has(t)&&(e=this.cache.get(t),this.cache.delete(t),this.cache.set(t,e)),e}put(t,e){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxEntries){const s=this.cache.keys().next().value;this.cache.delete(s)}this.cache.set(t,e)}getMaxEntries(){return this.maxEntries}setMaxEntries(t){if(t<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${t}.`);if(this.maxEntries>t)for(let e=0;e<this.maxEntries-t;e++){const s=this.cache.keys().next().value;this.cache.delete(s)}this.maxEntries=t}}function $h(n,t){if(Array.isArray(n)){let e=[];for(let s=0;s<t;s++)e=e.concat(n);return e}else{const e=new Array(t);return e.fill(n),e}}function dl(n,t){if(!n)throw new Gw(t)}function gC(n,t){let e=0;for(const s of n)s===t&&e++;return e}function eo(n){return n.length===1?n[0]:n}function js(n){return Array.isArray(n)?n:[n]}function Yl(n){const e=n.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return e[0]!=="_"?e:"private"+e}function rh(n){return n.length<=1||n.indexOf("_")===-1?n:n.replace(/[_]+(\w|$)/g,(t,e)=>e.toUpperCase())}let na={};function Hw(n){if(n==null)return null;const t={};return t.className=n.getClassName(),t.config=n.getConfig(),t}function mv(n){if(!(n==null||typeof n!="object"))if(Array.isArray(n))n.forEach(t=>mv(t));else{const t=Object.keys(n);for(const e of t){const s=n[e];s!=null&&typeof s=="object"&&(!Array.isArray(s)&&s.type==="ndarray"&&typeof s.value=="number"?n[e]=s.value:mv(s))}}}function q0(n,t={},e={},s="object",i=!1){if(typeof n=="string"){const r=n;let o;if(r in e)o=e[r];else if(r in na)o=na[r];else if(o=t[r],o==null)throw new Yt(`Unknown ${s}: ${n}. This may be due to one of the following reasons:
1. The ${s} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${s} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}else{const r=n;if(r.className==null||r.config==null)throw new Yt(`${s}: Improper config format: ${JSON.stringify(r)}.
'className' and 'config' must set.`);const o=r.className;let a,l;if(o in e?[a,l]=e[o]:o in na?[a,l]=na.className:o in t&&([a,l]=t[o]),a==null)throw new Yt(`Unknown ${s}: ${o}. This may be due to one of the following reasons:
1. The ${s} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${s} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const u={};for(const m of Object.keys(na))u[m]=na[m];for(const m of Object.keys(e))u[m]=e[m];const h=r.config;h.customObjects=u;const f=Object.assign({},na);for(const m of Object.keys(e))na[m]=e[m];mv(r.config);const g=l(a,r.config,e,i);return na=Object.assign({},f),g}else{const u=Object.assign({},na);for(const f of Object.keys(e))na[f]=e[f];const h=new a(r.config);return na=Object.assign({},u),h}}}function uG(n,t){return n<t?-1:n>t?1:0}function im(n,t){return-1*uG(n,t)}function Zc(n){if(n==null)return n;const t=[];for(const e of n)t.indexOf(e)===-1&&t.push(e);return t}function hG(n){if(n==null)throw new Yt(`Invalid value in obj: ${JSON.stringify(n)}`);for(const t in n)if(n.hasOwnProperty(t))return!1;return!0}function zh(n,t,e){if(e!=null&&n.indexOf(e)<0)throw new Yt(`${e} is not a valid ${t}.  Valid values are ${n} or null/undefined.`)}function jw(n,t,e=0,s=1/0){return dl(e>=0),dl(s>=e),Array.isArray(n)&&n.length>=e&&n.length<=s&&n.every(i=>typeof i===t)}function Ji(n,t){Array.isArray(n)?(wt(n.length>0,()=>`${t} is unexpectedly an empty array.`),n.forEach((e,s)=>Ji(e,`element ${s+1} of ${t}`))):wt(Number.isInteger(n)&&n>0,()=>`Expected ${t} to be a positive integer, but got ${mE(n)}.`)}function mE(n){return n===null?"null":Array.isArray(n)?"["+n.map(t=>mE(t)).join(",")+"]":typeof n=="string"?`"${n}"`:`${n}`}function dG(n,t,e){let s=e!=null?e():Qr(),i;return(...o)=>{const a=e!=null?e():Qr();return a-s<t||(s=a,i=n(...o)),i}}function xE(n){return n==="relu"?"relu":n==="linear"?"linear":n==="elu"?"elu":null}let fG=0;function bE(){return fG++}const rm={};function P2(n=""){return n in rm||(rm[n]=0),rm[n]+=1,n+rm[n].toString()}const pG=["channelsFirst","channelsLast"],gG=["nearest","bilinear"],mG=["valid","same","causal"],xG=["max","avg"],bG=["sum","mul","concat","ave"];const Cd=new Map;function Ai(n){zh(pG,"DataFormat",n)}function vG(n){zh(gG,"InterpolationFormat",n)}function Ko(n){zh(mG,"PaddingMode",n)}function vE(n){zh(xG,"PoolMode",n)}const wp=[],mC="/";function ph(n,t){wp.push(n);try{const e=t();return wp.pop(),e}catch(e){throw wp.pop(),e}}function yG(){return wp.length===0?"":wp.join(mC)+mC}function yE(n){if(!kE(n))throw new Error("Not a valid tensor name: '"+n+"'");return yG()+n}function wE(n){if(!kE(n))throw new Error("Not a valid tensor name: '"+n+"'");Cd.has(n)||Cd.set(n,0);const t=Cd.get(n);if(Cd.set(n,Cd.get(n)+1),t>0){const e=`${n}_${t}`;return Cd.set(e,1),e}else return n}const wG=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function kE(n){return!!n.match(wG)}function kG(n){return n===parseInt(n.toString(),10)}function Jc(n,t,e){t==null&&(t=0),e==null&&(e=n.length);let s=1;for(let i=t;i<e;++i)s*=n[i];return s}function Hd(n){if(n.length===0)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let e=0;e<n.length;e++){const s=n[e];s<t&&(t=s)}return t}function nu(n){if(n.length===0)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let e=0;e<n.length;e++){const s=n[e];s>t&&(t=s)}return t}function Xa(n,t){if(t<n)throw new Yt(`end (${t}) < begin (${n}) is forbidden.`);const e=[];for(let s=n;s<t;++s)e.push(s);return e}let wb;function Wi(){return wb==null&&(wb=mF().epsilon()),wb}function qa(){return"channelsLast"}function yl(n,t){return rn(n,t)}function K0(n,t=-1){const e=n.shape.slice();return t<0&&(t=e.length+t+1),e.splice(t,0,1),ne(n,e)}function CG(n,t){return he(()=>{if(n.shape.length!==2)throw new Yt(`repeat() expects a rank-2 tensor, but received a rank-${n.shape.length} tensor.`);const e=K0(n,1);return xv(e,[1,t,1])})}function SG(n){const t=[Jc(n.shape)];return ne(n,t)}function TG(n){if(n.rank<=1)throw new Yt(`batchFlatten requires a minimum rank of 2. Got rank: ${n.rank}.`);const t=[n.shape[0],Jc(n.shape,1)];return ne(n,t)}function gh(n,t,e){return he(()=>{switch(n.rank){case 1:return hw(n,t,e);case 2:return T5(n,[t,0],[e,n.shape[1]]);case 3:return dw(n,[t,0,0],[e,n.shape[1],n.shape[2]]);case 4:return Km(n,[t,0,0,0],[e,n.shape[1],n.shape[2],n.shape[3]]);case 5:return si(n,[t,0,0,0,0],[e,n.shape[1],n.shape[2],n.shape[3],n.shape[4]]);case 6:return si(n,[t,0,0,0,0,0],[e,n.shape[1],n.shape[2],n.shape[3],n.shape[4],n.shape[5]]);default:throw new Yt(`sliceAlongFirstAxis() received an unsupported tensor rank: ${n.rank}`)}})}function kb(n,t,e){return he(()=>{switch(n.rank){case 1:return hw(n,t,e);case 2:return T5(n,[0,t],[n.shape[0],e]);case 3:return dw(n,[0,0,t],[n.shape[0],n.shape[1],e]);case 4:return Km(n,[0,0,0,t],[n.shape[0],n.shape[1],n.shape[2],e]);default:throw new Yt(`sliceAlongLastAxis() received an unsupported tensor rank: ${n.rank}`)}})}function om(n,t,e,s){return he(()=>{switch(n.rank){case 1:return hw(n,t,e);case 2:switch(s){case 1:return gh(n,t,e);case 2:return kb(n,t,e);default:throw new Yt(`The axis is not within the rank of the tensor ${s}`)}case 3:switch(s){case 1:return gh(n,t,e);case 2:return dw(n,[0,t,0],[n.shape[0],e,n.shape[2]]);case 3:return kb(n,t,e);default:throw new Yt(`The axis is not within the rank of the tensor ${s}`)}case 4:switch(s){case 1:return gh(n,t,e);case 2:return Km(n,[0,t,0,0],[n.shape[0],e,n.shape[2],n.shape[3]]);case 3:return Km(n,[0,0,t,0],[n.shape[0],n.shape[1],e,n.shape[3]]);case 4:return kb(n,t,e);default:throw new Yt(`The axis is not within the rank of the tensor ${s}`)}default:throw new Yt(`sliceAlongLastAxis() received an unsupported tensor rank: ${n.rank}`)}})}function Xw(n,t=-1){let e;return t<0&&(e=n[0].rank,e!==0?t=e:t=0),t===n[0].rank&&(t=-1),so(n,t)}function xC(n,t){switch(n.rank){case 1:return BP([n,t]);case 2:return WP([n,t],0);case 3:return UP([n,t],0);case 4:return HP([n,t],0);default:throw new Yt(`concatAlongFirstAxis() received an unsupported tensor rank: ${n.rank}`)}}function xv(n,t){if(Array.isArray(t)||(t=[t]),n.rank!==t.length)throw new Yt(`The length of input n (${t.length}) does not match the number of dimensions in input x (${n.rank})`);return Va(n,t)}function L2(n,t=0,e=1,s,i){return nz(n,t,e,s,i)}function wl(n,t,e,s){if(n.rank<2||t.rank<2)throw new os(`dot requires both inputs to be rank >= 2 but got x shape = ${n.shape} and y shape = ${t.shape}`);if(t.rank>=3){const i=n.shape.slice(-1)[0],r=t.shape.slice(-2)[0];if(i!==r)throw new os(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${n.shape} and  y shape = ${t.shape}`)}if(n.rank===2&&t.rank===2)return sC({a:n,b:t,transposeA:!1,transposeB:!1,bias:s?bv(n.rank,s,qa()):null,activation:e});{const i=n.shape.slice(),r=i.pop();n=ne(n,[-1,r]);const o=t.shape.slice(),a=o.pop(),l=o.pop(),u=[...o,a],h=Array.from({length:t.rank},(y,k)=>k===0?t.rank-2:k<=t.rank-2?k-1:k);t=ne(Es(t,h),[l,-1]);const f=[...i,...u];return ne(sC({a:n,b:t,transposeA:!1,transposeB:!1,bias:s?bv(n.rank,s,qa()):null,activation:e}),f)}}function CE(n,t,e){return he(()=>(Array.isArray(t)?t=ko(t,"int32"):t=rn(t,"int32"),ew(n,t,e)))}function Y0(n){return Jt(n,n)}function bv(n,t,e){const s=t.shape;if(t.rank!==1&&t.rank!==n)throw new Yt(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${n}`);if(n===5){if(e==="channelsFirst")return s.length===1?ne(t,[1,s[0],1,1,1]):ne(t,[1,s[3],s[0],s[1],s[2]]);if(e==="channelsLast")return s.length===1?ne(t,[1,1,1,1,s[0]]):ne(t,[1].concat(s))}else if(n===4){if(e==="channelsFirst")return s.length===1?ne(t,[1,s[0],1,1]):ne(t,[1,s[2],s[0],s[1]]);if(e==="channelsLast")return s.length===1?ne(t,[1,1,1,s[0]]):ne(t,[1].concat(s))}else if(n===3){if(e==="channelsFirst")return s.length===1?ne(t,[1,s[0],1]):ne(t,[1,s[1],s[0]]);if(e==="channelsLast")return s.length===1?ne(t,[1,1,s[0]]):ne(t,[1].concat(s))}else if(n<3)return t;throw new Yt(`Unsupported input rank by biasAdd: ${t.rank}`)}function Ja(n,t,e){return he(()=>(e==null&&(e=qa()),Ai(e),Be(n,bv(n.rank,t,e))))}function IG(n,t=1){if(t!==1)throw new os(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return N2(n)}function EG(n){return he(()=>Mn(n,Be(Fr(n),1)))}function SE(n,t,e,s){return he(()=>Yz(n,t,e,s))}function _G(n){return he(()=>{const t=Be(.5,Jt(.2,n));return Xo(t,0,1)})}function Z0(n,t,e=!1){return e?n():t()}const AG=["fanIn","fanOut","fanAvg"],$G=["normal","uniform","truncatedNormal"];function NG(n){zh(AG,"FanMode",n)}function DG(n){zh($G,"Distribution",n)}class ma extends uf{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class TE extends ma{apply(t,e){return Zi(t,e)}}TE.className="Zeros";Fe(TE);class qw extends ma{apply(t,e){return du(t,e)}}qw.className="Ones";Fe(qw);class IE extends ma{constructor(t){if(super(),typeof t!="object")throw new Yt(`Expected argument of type ConstantConfig but got ${t}`);if(t.value===void 0)throw new Yt(`config must have value set but got ${t}`);this.value=t.value}apply(t,e){return he(()=>Jt(Bs(this.value),du(t,e)))}getConfig(){return{value:this.value}}}IE.className="Constant";Fe(IE);class EE extends ma{constructor(t){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=t.minval||this.DEFAULT_MINVAL,this.maxval=t.maxval||this.DEFAULT_MAXVAL,this.seed=t.seed}apply(t,e){return V0(t,this.minval,this.maxval,e,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}EE.className="RandomUniform";Fe(EE);class _E extends ma{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,e){if(e=e||"float32",e!=="float32"&&e!=="int32")throw new os(`randomNormal does not support dType ${e}.`);return L2(t,this.mean,this.stddev,e,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}_E.className="RandomNormal";Fe(_E);class AE extends ma{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,e){if(e=e||"float32",e!=="float32"&&e!=="int32")throw new os(`truncatedNormal does not support dType ${e}.`);return E5(t,this.mean,this.stddev,e,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}AE.className="TruncatedNormal";Fe(AE);class $E extends ma{constructor(t){super(),this.gain=t.gain!=null?t.gain:1}apply(t,e){return he(()=>{if(t.length!==2||t[0]!==t[1])throw new Yt("Identity matrix initializer can only be used for 2D square matrices.");return Jt(this.gain,h5(t[0]))})}getConfig(){return{gain:this.gain}}}$E.className="Identity";Fe($E);function RG(n,t="channelsLast"){let e,s;if(Ai(t),n.length===2)e=n[0],s=n[1];else if([3,4,5].indexOf(n.length)!==-1){if(t==="channelsFirst"){const i=Jc(n,2);e=n[1]*i,s=n[0]*i}else if(t==="channelsLast"){const i=Jc(n,0,n.length-2);e=n[n.length-2]*i,s=n[n.length-1]*i}}else{const i=Jc(n);e=Math.sqrt(i),s=Math.sqrt(i)}return[e,s]}class Io extends ma{constructor(t){if(super(),t.scale<0)throw new Yt(`scale must be a positive float. Got: ${t.scale}`);this.scale=t.scale==null?1:t.scale,this.mode=t.mode==null?"fanIn":t.mode,NG(this.mode),this.distribution=t.distribution==null?"normal":t.distribution,DG(this.distribution),this.seed=t.seed}apply(t,e){const s=RG(t),i=s[0],r=s[1];let o=this.scale;if(this.mode==="fanIn"?o/=Math.max(1,i):this.mode==="fanOut"?o/=Math.max(1,r):o/=Math.max(1,(i+r)/2),this.distribution==="normal"){const a=Math.sqrt(o);if(e=e||"float32",e!=="float32"&&e!=="int32")throw new os(`${this.getClassName()} does not support dType ${e}.`);return E5(t,0,a,e,this.seed)}else{const a=Math.sqrt(3*o);return V0(t,-a,a,e,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Io.className="VarianceScaling";Fe(Io);class Kw extends Io{constructor(t){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return Io.className}}Kw.className="GlorotUniform";Fe(Kw);class Yw extends Io{constructor(t){super({scale:1,mode:"fanAvg",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return Io.className}}Yw.className="GlorotNormal";Fe(Yw);class Zw extends Io{constructor(t){super({scale:2,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return Io.className}}Zw.className="HeNormal";Fe(Zw);class Jw extends Io{constructor(t){super({scale:2,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return Io.className}}Jw.className="HeUniform";Fe(Jw);class Qw extends Io{constructor(t){super({scale:1,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return Io.className}}Qw.className="LeCunNormal";Fe(Qw);class t3 extends Io{constructor(t){super({scale:1,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return Io.className}}t3.className="LeCunUniform";Fe(t3);class NE extends ma{constructor(t){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=t.gain==null?this.DEFAULT_GAIN:t.gain,this.seed=t.seed}apply(t,e){return he(()=>{if(t.length<2)throw new os("Shape must be at least 2D.");if(e!=="int32"&&e!=="float32"&&e!==void 0)throw new TypeError(`Unsupported data type ${e}.`);e=e;const s=Ce(t.slice(0,-1)),i=t[t.length-1],r=s*i;r>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${r}) elements: Slowness may result.`);const o=[Math.max(i,s),Math.min(i,s)],a=L2(o,0,1,e,this.seed),l=jW.qr(a,!1);let u=l[0];const f=l[1].flatten().stridedSlice([0],[Math.min(i,s)*Math.min(i,s)],[Math.min(i,s)+1]);return u=Jt(u,f.sign()),s<i&&(u=u.transpose()),Jt(Bs(this.gain),u.reshape(t))})}getConfig(){return{gain:this.gain,seed:this.seed}}}NE.className="Orthogonal";Fe(NE);const bC={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function vC(n,t={}){return q0(n,oa.getMap().classNameMap,t,"initializer")}function mi(n){return Hw(n)}function hi(n){if(typeof n=="string"){const t=n in bC?bC[n]:n;if(t==="GlorotNormal")return new Yw;if(t==="GlorotUniform")return new Kw;if(t==="HeNormal")return new Zw;if(t==="HeUniform")return new Jw;if(t==="LeCunNormal")return new Qw;if(t==="LeCunUniform")return new t3;{const e={};return e.className=t,e.config={},vC(e)}}else return n instanceof ma?n:vC(n)}function vv(n){return Array.isArray(n)&&Array.isArray(n[0])}function Ym(n){return n.length===0?[]:Array.isArray(n[0])?n:[n]}function Hn(n){let t;if(Array.isArray(n)){if(n.length!==1)throw new Yt(`Expected Tensor length to be 1; got ${n.length}`);t=n[0]}else t=n;return t}function Ds(n){if(Array.isArray(n)&&Array.isArray(n[0])){if(n.length===1)return n=n,n[0];throw new Yt(`Expected exactly 1 Shape; got ${n.length}`)}else return n}function Zm(n){let t=0;for(const e of n)e.shape.length===0?t+=1:t+=e.shape.reduce((s,i)=>s*i);return t}const yC="Variable";class MG{constructor(t,e="float32",s=yC,i=!0,r=null){this.dtype=e??"float32",this.shape=t.shape,this.id=bE(),s=s??yC,this.originalName=yE(s),this.name=wE(this.originalName),this.trainable_=i,this.constraint=r,this.val=jz(t,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(t){return this.assertNotDisposed(),OG(this.val,t),this.val.id!==t.id&&(this.val.assign(t),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(t){this.trainable_=t,this.val.trainable=t}}function OG(n,t){if(n.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(n.shape)+" vs. "+JSON.stringify(t.shape))}function yv(n){return n.map(t=>t.read())}function e3(n){n.forEach(t=>{t[0].write(t[1])})}class Vi{constructor(t){this.dtype=t.dtype,this.shape=t.shape,t.shape!=null?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}}class Tl{constructor(t,e,s,i,r,o,a){this.dtype=t,this.shape=e,this.sourceLayer=s,this.inputs=i,this.callArgs=r,this.outputTensorIndex=a,this.id=bE(),o!=null&&(this.originalName=yE(o),this.name=wE(this.originalName)),this.rank=e.length}}let FG=0,B2=class{constructor(t,e){this.callArgs=e,this.id=FG++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(const s of t.inboundLayers)s?.outboundNodes.push(this);t.outboundLayer.inboundNodes.push(this)}getConfig(){const t=[];for(const e of this.inboundLayers)e!=null?t.push(e.name):t.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},PG=0;class fs extends uf{constructor(t={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=PG++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let e=t.name;if(!e){const s=this.getClassName();e=Yl(s)+"_"+P2(s)}if(this.name=e,this.trainable_=t.trainable==null?!0:t.trainable,t.inputShape!=null||t.batchInputShape!=null){let s;if(t.batchInputShape!=null)s=t.batchInputShape;else if(t.inputShape!=null){let r=null;t.batchSize!=null&&(r=t.batchSize),s=[r].concat(t.inputShape)}this.batchInputShape=s;let i=t.dtype;i==null&&(i=t.inputDType),i==null&&(i="float32"),this.dtype=i}t.weights!=null?this.initialWeights=t.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(t,e){return t.name+"_ib-"+e.toString()}getNodeAtIndex(t,e){if(this.inboundNodes.length===0)throw new aa(`The layer has never been called and thus has no defined ${e}.`);if(this.inboundNodes.length<=t)throw new Yt(`Asked to get ${e} at node ${t}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[t]}getInputAt(t){return eo(this.getNodeAtIndex(t,"input").inputTensors)}getOutputAt(t){return eo(this.getNodeAtIndex(t,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new hl(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new hl(`Layer ${this.name} is not connected, no input to return.`);return eo(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new hl(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new hl(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return eo(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(t=>t())}get updates(){return this._updates}get built(){return this._built}set built(t){this._built=t}get trainable(){return this.trainable_}set trainable(t){this._trainableWeights.forEach(e=>e.trainable=t),this.trainable_=t}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(t=>t.trainable):[]}set trainableWeights(t){this._trainableWeights=t}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(t=>!t.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(t){this._nonTrainableWeights=t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(t){const e=js(t);if(this.inputSpec==null||this.inputSpec.length===0)return;const s=js(this.inputSpec);if(e.length!==s.length)throw new Yt(`Layer ${this.name} expects ${s.length} inputs, but it received ${e.length} input tensors. Input received: ${t}`);for(let i=0;i<e.length;i++){const r=e[i],o=s[i];if(o==null)continue;const a=r.rank;if(o.ndim!=null&&a!==o.ndim)throw new Yt(`Input ${i} is incompatible with layer ${this.name}: expected ndim=${o.ndim}, found ndim=${a}`);if(o.maxNDim!=null&&a>o.maxNDim)throw new Yt(`Input ${i} is incompatible with layer ${this.name}: expected max_ndim=${o.maxNDim}, found ndim=${a}`);if(o.minNDim!=null&&a<o.minNDim)throw new Yt(`Input ${i} is incompatible with layer ${this.name}: expected min_ndim=${o.minNDim}, found ndim=${a}.`);if(o.dtype!=null&&r.dtype!==o.dtype)throw new Yt(`Input ${i} is incompatible with layer ${this.name} : expected dtype=${o.dtype}, found dtype=${r.dtype}.`);if(o.axes){const l=r.shape;for(const u in o.axes){const h=Number(u),f=o.axes[u],g=h>=0?l[h]:l[l.length+h];if(f!=null&&[f,null].indexOf(g)===-1)throw new Yt(`Input ${i} is incompatible with layer ${this.name}: expected axis ${h} of input shape to have value ${f} but got shape ${l}.`)}}if(o.shape!=null)for(let l=0;l<o.shape.length;++l){const u=o.shape[l],h=r.shape[l];if(u!=null&&h!=null&&u!==h)throw new Yt(`Input ${i} is incompatible with layer ${this.name}: expected shape=${o.shape}, found shape=${r.shape}.`)}}}call(t,e){return t}invokeCallHook(t,e){this._callHook!=null&&this._callHook(t,e)}setCallHook(t){this._callHook=t}clearCallHook(){this._callHook=null}apply(t,e){e=e||{},this.assertNotDisposed();const s=js(t),i=zG(t),r=WG(t);if(i===r)throw new Yt("Arguments to apply() must be all SymbolicTensors or all Tensors");return ph(this.name,()=>{if(!this.built){this.assertInputCompatibility(t);const o=[];for(const a of js(t))o.push(a.shape);this.build(eo(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&r&&(this._refCount=1)}if(this.assertInputCompatibility(t),r){let o=this.call(t,e);this.supportsMasking&&this.setMaskMetadata(t,o);const a=js(o),l=[];for(let u of a)s.indexOf(u)!==-1&&(u=u.clone()),l.push(u);if(o=eo(l),this.activityRegularizer!=null)throw new os("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}else{const o=LG(t),a=this.computeOutputShape(o);let l;const u=BG(t);if(this.warnOnIncompatibleInputShape(Array.isArray(t)?o[0]:o),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((h,f)=>new Tl(u,h,this,js(t),e,this.name,f)):l=new Tl(u,a,this,js(t),e,this.name),this.addInboundNode(t,l,null,null,o,a,e),this._refCount++,this.activityRegularizer!=null)throw new os("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(t){if(this.batchInputShape!=null)if(t.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(t)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let e=!1;this.batchInputShape.forEach((s,i)=>{s!=null&&t[i]!=null&&t[i]!==s&&(e=!0)}),e&&console.warn(`The shape of the input tensor (${JSON.stringify(t)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new hl(`The layer ${this.name} has never been called and thus has no defined output shape.`);const t=[];for(const e of this.inboundNodes){const s=JSON.stringify(e.outputShapes);t.indexOf(s)===-1&&t.push(s)}if(t.length===1){const e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&e.length===1?e[0]:e}else throw new hl(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new aa(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Zm(this.weights)}build(t){this.built=!0}getWeights(t=!1){return yv(t?this.trainableWeights:this.weights)}setWeights(t){he(()=>{const e=this.weights;if(e.length!==t.length)throw new Yt(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${t.length}, but the layer was expecting ${e.length} weights. Provided weights: ${t}...`);if(e.length===0)return;const s=[],i=yv(e);for(let r=0;r<i.length;++r){const o=i[r],a=e[r],l=t[r];if(!zs(o.shape,l.shape))throw new Yt(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);s.push([a,l])}e3(s)})}addWeight(t,e,s,i,r,o,a,l){if(this._addedWeightNames.indexOf(t)!==-1)throw new Yt(`Duplicate weight name ${t} for layer ${this.name}`);this._addedWeightNames.push(t),s==null&&(s="float32"),this.fastWeightInitDuringBuild&&(i=l!=null?l():hi("zeros"));const u=i.apply(e,s),h=new MG(u,s,t,o,a);return u.dispose(),r!=null&&this.addLoss(()=>r.apply(h.read())),o==null&&(o=!0),o?this._trainableWeights.push(h):this._nonTrainableWeights.push(h),h}setFastWeightInitDuringBuild(t){this.fastWeightInitDuringBuild=t}addLoss(t){t==null||Array.isArray(t)&&t.length===0||(t=js(t),this._losses!==void 0&&this._losses!==null&&this.losses.push(...t))}computeOutputShape(t){return t}computeMask(t,e){if(!this.supportsMasking){if(e!=null)if(Array.isArray(e))e.forEach(s=>{if(s!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return e}setMaskMetadata(t,e,s){if(!this.supportsMasking)return;const i=this.computeMask(t,s),r=js(e),o=js(i);if(r.length!==o.length)throw new Error(`${this.name} outputs ${r.length} tensors but ${r.length} masks for those tensors`);for(let a=0;a<r.length;a++)r[a].kerasMask=o[a]}addInboundNode(t,e,s,i,r,o,a=null){const l=js(t);e=js(e),s=js(s),i=js(i),r=Ym(r),o=Ym(o);const u=[],h=[],f=[];for(const g of l)u.push(g.sourceLayer),h.push(g.nodeIndex),f.push(g.tensorIndex);new B2({outboundLayer:this,inboundLayers:u,nodeIndices:h,tensorIndices:f,inputTensors:l,outputTensors:e,inputMasks:s,outputMasks:i,inputShapes:r,outputShapes:o},a);for(let g=0;g<e.length;g++)e[g].sourceLayer=this,e[g].nodeIndex=this.inboundNodes.length-1,e[g].tensorIndex=g}getConfig(){const t={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(t.batchInputShape=this.batchInputShape),this.dtype!=null&&(t.dtype=this.dtype),t}disposeWeights(){return this.weights.forEach(t=>t.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let t=0;return--this._refCount===0&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}}}function LG(n){n=js(n);const t=[];for(const e of n)t.push(e.shape);return eo(t)}function BG(n){return"float32"}function DE(n,t,e){if((t==null||e!=null&&e>0)&&(t=n.sourceLayer,e=n.nodeIndex),t.inboundNodes.length===0)return[n];{const s=t.inboundNodes[e];if(s.inboundLayers.length===0)return s.inputTensors;{const i=[];for(let r=0;r<s.inboundLayers.length;r++){const o=s.inputTensors[r],a=s.inboundLayers[r],l=s.nodeIndices[r],u=DE(o,a,l);for(const h of u)i.indexOf(h)===-1&&i.push(h)}return i}}}function zG(n){let t=!0;for(const e of js(n))if(!(e instanceof Tl)){t=!1;break}return t}function WG(n){let t=!0;for(const e of js(n))if(e instanceof Tl){t=!1;break}return t}class J0 extends fs{constructor(t){if(super({dtype:t.dtype,name:t.name!=null?t.name:P2("input").toString()}),t.batchSize==null&&(t.batchSize=null),t.sparse==null&&(t.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=t.sparse,t.inputShape!=null&&t.batchInputShape!=null)throw new Yt("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let e=t.batchInputShape;if(e==null){if(t.inputShape==null)throw new Yt("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");e=[t.batchSize].concat(t.inputShape)}else if(t.batchSize!=null)throw new Yt("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const s=t.dtype||"float32";this.batchInputShape=e,this.dtype=s,this.inputSpec=[{shape:e}];const i=new Tl(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new B2({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[e],outputShapes:[e]})}apply(t,e){throw new Yt(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}J0.className="InputLayer";Fe(J0);function RE(n){if(n.batchShape==null&&n.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(n.batchShape!=null&&n.shape!=null)throw new Yt("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=n.batchShape;n.shape!=null&&t==null&&(t=[null].concat(n.shape));let e=n.dtype;return e==null&&(e="float32"),new J0({batchInputShape:t,name:n.name,dtype:e,sparse:n.sparse}).inboundNodes[0].outputTensors[0]}function VG(n,t){if(n.dtype==null||n.dtype===t.dtype)return t;try{return rn(t,n.dtype)}catch{throw new Yt(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${n.name}' (${n.dtype}).`)}}class Uc{constructor(t){if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof Uc)for(const e in t.id2Value)this.id2Value[e]=t.id2Value[e],e in t.id2Mask&&(this.id2Mask[e]=t.id2Mask[e]);else{if(t==null)return;for(const e of t)this.add(e.key,e.value)}}add(t,e,s){if(this.id2Value[t.id]==null)this.id2Value[t.id]=VG(t,e),this.name2Id[t.name]=t.id,s!=null&&(this.id2Mask[t.id]=s);else throw new Yt(`Duplicate key: name=${t.name}, id=${t.id}`);return this}addFeed(t){this.add(t.key,t.value)}hasKey(t){return this.id2Value[t.id]!=null}names(){return Object.keys(this.name2Id)}getValue(t){if(t instanceof Tl){if(this.id2Value[t.id]==null)throw new Yt(`Nonexistent key: ${t.name}`);return this.id2Value[t.id]}else{const e=this.name2Id[t];if(e==null)throw new Yt(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Value[e]}}getMask(t){if(t instanceof Tl){if(this.id2Value[t.id]==null)throw new Yt(`Nonexistent key: ${t.name}`);return this.id2Mask[t.id]}else{const e=this.name2Id[t];if(e==null)throw new Yt(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Mask[e]}}disposeMasks(){this.id2Mask!=null&&bs(this.id2Mask)}}const Jm=new gE,Qm=new gE;function UG(n){Jm?.setMaxEntries(n),Qm?.setMaxEntries(n)}function dp(n,t,e,s){const i=e==null?!1:e.training,r=Array.isArray(n),o=r?n:[n],a=o.map(y=>y.name),l=[],u=t.names();for(const y of a)u.indexOf(y)!==-1?l.push(t.getValue(y)):l.push(null);const h=a.join(",")+"|"+t.names().sort().join(",");let f=Jm.get(h),g;if(f==null){const y=GG(o,t);f=y.sorted,g=y.recipientCounts,Jm.put(h,f),Qm.put(h,g)}g={},i||Object.assign(g,Qm.get(h));const m=new Uc(t);for(let y=0;y<f.length;++y){const k=f[y],C=k.sourceLayer;if(C instanceof J0)continue;const S=[],$=[],D=[];let R=!1;for(const B of k.inputs){const U=m.getValue(B),K=m.getMask(B);S.push(U),$.push(K),K!=null&&(R=!0),i||(g[B.name]--,g[B.name]===0&&!t.hasKey(B)&&a.indexOf(B.name)===-1&&!U.isDisposed&&B.sourceLayer.stateful!==!0&&D.push(U))}R&&(e=e||{},e.mask=$[0]);const V=js(C.apply(S,e));let E=null;C.supportsMasking&&(E=C.computeMask(S,$));const q=jG(k),X=Array.isArray(q)?q:[q];for(let B=0;B<X.length;++B){m.hasKey(X[B])||m.add(X[B],V[B],Array.isArray(E)?E[0]:E);const U=a.indexOf(X[B].name);U!==-1&&(l[U]=V[B])}i||bs(D)}return m.disposeMasks(),r?l:l[0]}function GG(n,t){wt(n!=null&&n.length>0,()=>"Expected at least one fetch, got none");let e=[],s={};if(n.length===1){const i=wC(n[0],t);e=i.sorted,s=i.recipientMap}else{const i=new Set;for(const r of n){const{sorted:o,recipientMap:a}=wC(r,t);for(const l of o)i.has(l.name)||(e.push(l),i.add(l.name));for(const l in a)s[l]==null&&(s[l]=new Set),a[l].forEach(u=>s[l].add(u))}}return{sorted:e,recipientCounts:HG(s)}}function HG(n){const t={};for(const e in n)t[e]=n[e].size;return t}function wC(n,t){const e=new Set,s=[],i={};for(const a of t.names())e.add(a);const r=[],o=[];for(r.push(n);r.length>0;){const a=r[r.length-1];if(e.has(a.name)){r.pop();continue}const l=o[o.length-1]===r.length-1;if(a.inputs.length===0||l)r.pop(),s.push(a),e.add(a.name),l&&o.pop();else{o.push(r.length-1);for(const u of a.inputs)i[u.name]==null&&(i[u.name]=new Set),i[u.name].add(a.name),!e.has(u.name)&&r.push(u)}}return{sorted:s,recipientMap:i}}function jG(n){let t;if(n.sourceLayer.inboundNodes.length===1)t=n.sourceLayer.output;else{let e=null;for(let s=0;s<n.sourceLayer.inboundNodes.length;++s)for(const i of n.sourceLayer.inboundNodes[s].outputTensors)if(i.id===n.id){e=s;break}t=n.sourceLayer.getOutputAt(e)}return t}const XG=ge();XG.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,UG);function n3(n,t){return he(()=>yr(Rn(Jt(n,n),t,!0)))}class Q0 extends uf{getConfig(){return{}}}class ME extends Q0{constructor(t){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=t.maxValue!=null?t.maxValue:this.defaultMaxValue,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return he(()=>{const e=n3(t,this.axis),s=Xo(e,0,this.maxValue);return Jt(t,Mn(s,Be(Wi(),e)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}ME.className="MaxNorm";Fe(ME);class OE extends Q0{constructor(t){super(),this.defaultAxis=0,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return he(()=>Mn(t,Be(Wi(),n3(t,this.axis))))}getConfig(){return{axis:this.axis}}}OE.className="UnitNorm";Fe(OE);class FE extends Q0{apply(t){return Lh(t)}}FE.className="NonNeg";Fe(FE);class PE extends Q0{constructor(t){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=t.minValue!=null?t.minValue:this.defaultMinValue,this.maxValue=t.maxValue!=null?t.maxValue:this.defaultMaxValue,this.rate=t.rate!=null?t.rate:this.defaultRate,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return he(()=>{const e=n3(t,this.axis),s=Be(Jt(this.rate,Xo(e,this.minValue,this.maxValue)),Jt(1-this.rate,e));return Jt(t,Mn(s,Be(Wi(),e)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}PE.className="MinMaxNorm";Fe(PE);const kC={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Ui(n){return Hw(n)}function CC(n,t={}){return q0(n,oa.getMap().classNameMap,t,"constraint")}function Gi(n){if(n==null)return null;if(typeof n=="string"){const e={className:n in kC?kC[n]:n,config:{}};return CC(e)}else return n instanceof Q0?n:CC(n)}async function Qu(n){if(n==null)return;const t=[],e=[],s=[];for(const i in n){const r=n[i];if(typeof r!="number"){const o=r;t.push(o.data()),e.push(i),s.push(o)}}if(t.length>0){const i=await Promise.all(t);for(let r=0;r<i.length;++r)n[e[r]]=i[r][0];bs(s)}}function LE(n){if(n!=null)for(const t in n){const e=n[t];typeof e!="number"&&e.dispose()}}var SC;(function(n){n[n.SILENT=0]="SILENT",n[n.VERBOSE=1]="VERBOSE"})(SC||(SC={}));const qG=125;class _p{constructor(){this.validationData=null}setParams(t){this.params=t}async onEpochBegin(t,e){}async onEpochEnd(t,e){}async onBatchBegin(t,e){}async onBatchEnd(t,e){}async onTrainBegin(t){}async onTrainEnd(t){}setModel(t){}}class KG{constructor(t,e=10){t==null&&(t=[]),this.callbacks=t,this.queueLength=e}append(t){this.callbacks.push(t)}setParams(t){for(const e of this.callbacks)e.setParams(t)}setModel(t){for(const e of this.callbacks)e.setModel(t)}async onEpochBegin(t,e){e==null&&(e={});for(const s of this.callbacks)await s.onEpochBegin(t,e)}async onEpochEnd(t,e){e==null&&(e={});for(const s of this.callbacks)await s.onEpochEnd(t,e)}async onBatchBegin(t,e){e==null&&(e={});for(const s of this.callbacks)await s.onBatchBegin(t,e)}async onBatchEnd(t,e){e==null&&(e={});for(const s of this.callbacks)await s.onBatchEnd(t,e)}async onTrainBegin(t){t==null&&(t={});for(const e of this.callbacks)await e.onTrainBegin(t)}async onTrainEnd(t){t==null&&(t={});for(const e of this.callbacks)await e.onTrainEnd(t)}}class YG extends _p{constructor(){super()}async onEpochBegin(t){this.seen=0,this.totals={}}async onBatchEnd(t,e){e==null&&(e={});const s=e.size==null?0:e.size;this.seen+=s;for(const i in e){const r=e[i];if(typeof r=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+r*s;else{let o;i in this.totals?o=this.totals[i]:this.totals[i]=0;const a=he(()=>Be(this.totals[i],Jt(r,s)));this.totals[i]=a,o?.dispose()}}}async onEpochEnd(t,e){if(e!=null)for(const s of this.params.metrics)this.totals[s]!=null&&(typeof this.totals[s]=="number"?e[s]=this.totals[s]/this.seen:he(()=>{const i=Jt(Mn(1,this.seen),this.totals[s]);e[s]=i,this.totals[s].dispose(),bl(e[s])}))}}class ZG extends _p{async onTrainBegin(t){this.epoch=[],this.history={}}async onEpochEnd(t,e){e==null&&(e={}),this.epoch.push(t);for(const s in e)this.history[s]==null&&(this.history[s]=[]),this.history[s].push(e[s])}async syncData(){const t=[],e=[],s=[];for(const r in this.history){const o=this.history[r];for(let a=0;a<o.length;++a)if(typeof o[a]!="number"){const l=o[a];t.push(l.data()),e.push(r),s.push(a)}}const i=await Promise.all(t);for(let r=0;r<i.length;++r)this.history[e[r]][s[r]].dispose(),this.history[e[r]][s[r]]=i[r][0]}}class JG extends _p{constructor(t,e){if(super(),this.currentEpoch=0,this.nowFunc=t.nowFunc,this.nextFrameFunc=t.nextFrameFunc||U5,this.yieldEvery=e||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=qG),this.yieldEvery==="never"&&t.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");Yb(this.yieldEvery)&&(this.maybeWait=dG(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=t.onTrainBegin,this.trainEnd=t.onTrainEnd,this.epochBegin=t.onEpochBegin,this.epochEnd=t.onEpochEnd,this.batchBegin=t.onBatchBegin,this.batchEnd=t.onBatchEnd,this.yield=t.onYield}async maybeWait(t,e,s){const i=[];this.yield!=null&&(await Qu(s),i.push(this.yield(t,e,s))),i.push(this.nextFrameFunc()),await Promise.all(i)}async onEpochBegin(t,e){this.currentEpoch=t,this.epochBegin!=null&&(await Qu(e),await this.epochBegin(t,e))}async onEpochEnd(t,e){const s=[];this.epochEnd!=null&&(await Qu(e),s.push(this.epochEnd(t,e))),this.yieldEvery==="epoch"&&s.push(this.nextFrameFunc()),await Promise.all(s)}async onBatchBegin(t,e){this.batchBegin!=null&&(await Qu(e),await this.batchBegin(t,e))}async onBatchEnd(t,e){const s=[];this.batchEnd!=null&&(await Qu(e),s.push(this.batchEnd(t,e))),this.yieldEvery==="batch"?s.push(this.nextFrameFunc()):Yb(this.yieldEvery)&&s.push(this.maybeWait(this.currentEpoch,t,e)),await Promise.all(s)}async onTrainBegin(t){this.trainBegin!=null&&(await Qu(t),await this.trainBegin(t))}async onTrainEnd(t){this.trainEnd!=null&&(await Qu(t),await this.trainEnd(t))}}function BE(n,t){return n==null&&(n={}),n instanceof _p?[n]:Array.isArray(n)&&n[0]instanceof _p?n:js(n).map(s=>new JG(s,t))}class ra{constructor(){}static registerCallbackConstructor(t,e){wt(t>=0&&Number.isInteger(t),()=>`Verbosity level is expected to be an integer >= 0, but got ${t}`),ra.checkForDuplicate(e),ra.constructors[t]==null&&(ra.constructors[t]=[]),ra.constructors[t].push(e)}static checkForDuplicate(t){for(const e in ra.constructors)ra.constructors[+e].forEach(i=>{if(i===t)throw new Yt("Duplicate callback constructor.")})}static clear(){ra.constructors={}}static createCallbacks(t){const e=[];for(const s in ra.constructors){const i=+s;t>=i&&e.push(...ra.constructors[i])}return e.map(s=>new s)}}ra.constructors={};function zE(n,t,e,s,i,r,o,a,l){const u=new ZG,h=[new YG,...ra.createCallbacks(t)];n!=null&&h.push(...n),h.push(u);const f=new KG(h);return f.setParams({epochs:e,initialEpoch:s,samples:i,steps:r,batchSize:o,verbose:t,doValidation:a,metrics:l}),{callbackList:f,history:u}}function sc(n,t={},e=!1){return q0(n,oa.getMap().classNameMap,t,"layer",e)}function t1(n,t){return he(()=>{n.dtype!=="float32"&&(n=rn(n,"float32"));const e=Rn(Y0(n),t,!0),s=$2(e.shape,Wi()),i=yr(hu(e,s));return Mn(n,i)})}function z2(n,t){return he(()=>Oi(Y0(Vn(t,n)),-1))}function s3(n,t){return he(()=>Oi(Fr(Vn(t,n)),-1))}function i3(n,t){return he(()=>{const e=Vn(n,t),s=Xo(Fr(n),Wi(),Number.MAX_VALUE),i=Fr(Mn(e,s));return Jt(100,Oi(i,-1))})}function QG(n,t){return he(()=>{const e=Xo(t,Wi(),Number.MAX_VALUE),s=Sl(Be(1,e)),i=Xo(n,Wi(),Number.MAX_VALUE),r=Sl(Be(1,i));return Oi(Y0(Vn(s,r)),-1)})}function tH(n,t){return he(()=>{const e=hu(0,Vn(1,Jt(n,t)));return Oi(Y0(e),-1)})}function eH(n,t){return he(()=>{const e=hu(0,Vn(1,Jt(n,t)));return Oi(e,-1)})}function nH(n,t){return he(()=>{const e=Rn(Jt(n,t),-1),s=Ha(Jt(Vn(1,n),t),-1);return hu(0,Be(1,Vn(s,e)))})}function sH(n,t){return he(()=>{const e=Math.log(2),s=Vn(t,n),i=Vn(Be(s,W0(Jt(-2,s))),e);return Oi(i,-1)})}function Ap(n,t,e=!1){return he(()=>{if(e)t=fw(t);else{const s=Rn(t,t.shape.length-1,!0);t=Mn(t,s)}return t=Xo(t,Wi(),1-Wi()),Ii(Rn(Jt(rn(n,"float32"),Sl(t)),t.shape.length-1))})}function e1(n,t,e=!1){return he(()=>{const s=rn(R2(SG(n)),"int32");t=Xo(t,Wi(),1-Wi());const i=t.shape,r=ne(m5(s,i[i.length-1]),i);return Ap(r,t,e)})}function iH(n,t){if(!zs(n.shape,t.shape))throw new Yt(`logits and labels must have the same shape, but got shapes ${JSON.stringify(n.shape)} and ${JSON.stringify(t.shape)}`);return he(()=>{const e=Lh(t),s=Ii(Fr(t));return Be(Vn(e,Jt(t,n)),d5(Cl(s)))})}function W2(n,t){return he(()=>{let e;return e=Xo(t,Wi(),1-Wi()),e=Sl(Mn(e,Vn(1,e))),Oi(iH(n,e),-1)})}function rH(n,t){return he(()=>{const e=Xo(n,Wi(),1),s=Xo(t,Wi(),1);return Rn(Jt(n,Sl(Mn(e,s))),-1)})}function oH(n,t){return he(()=>{const e=Sl(Be(Wi(),t));return Oi(Vn(t,Jt(n,e)),-1)})}function WE(n,t){return he(()=>{const e=t1(n,-1),s=t1(t,-1),i=Jt(e,s);return Ii(Rn(i,-1))})}const n1={meanSquaredError:z2,meanAbsoluteError:s3,meanAbsolutePercentageError:i3,meanSquaredLogarithmicError:QG,squaredHinge:tH,hinge:eH,categoricalHinge:nH,logcosh:sH,categoricalCrossentropy:Ap,sparseCategoricalCrossentropy:e1,binaryCrossentropy:W2,kullbackLeiblerDivergence:rH,poisson:oH,cosineProximity:WE};function Cb(n){if(typeof n=="string"){if(n in n1)return n1[n];let t=`Unknown loss ${n}`;throw n.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${n}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new Yt(t)}else return n}function VE(n,t){return he(()=>{const e=Jt(.5,pa(t)),s=yl(qo(t,e),n.dtype);return Oi(kl(n,s),-1)})}function UE(n,t){return he(()=>yl(kl(Cp(n,-1),Cp(t,-1)),"float32"))}function aH(n,t){return he(()=>rn(Rn(rc(kl(n,1),kl(t,1))),"float32"))}function lH(n,t){return he(()=>rn(Rn(rc(kl(n,0),kl(t,1))),"float32"))}function cH(n,t){return he(()=>{const e=aH(n,t),s=lH(n,t),i=Be(e,s);return rn(zr(qo(i,0),Mn(e,i),0),"float32")})}function uH(n,t){return W2(n,t)}function hH(n,t){return n.rank===t.rank&&(n=U0(n,[n.rank-1])),t=Cp(t,-1),t.dtype!==n.dtype&&(t=rn(t,n.dtype)),rn(kl(n,t),"float32")}const dH=z2,fH=z2,pH=s3,gH=s3,mH=i3,xH=i3,GE=Ap,bH=WE,HE=e1,s1={binaryAccuracy:VE,categoricalAccuracy:UE,precision:cH,categoricalCrossentropy:GE,sparseCategoricalCrossentropy:HE,mse:dH,MSE:fH,mae:pH,MAE:gH,mape:mH,MAPE:xH,cosine:bH};function vH(n){if(typeof n=="string"&&n in s1)return s1[n];if(typeof n!="string"&&n!=null)return n;throw new Yt(`Unknown metric ${n}`)}function am(n){if(dl(n!==null,`Unknown LossOrMetricFn ${n}`),typeof n=="string")return n;{let t;for(const e of Object.keys(n1))if(n1[e]===n){t=e;break}if(t!==void 0)return t;for(const e of Object.keys(s1))if(s1[e]===n){t=e;break}return t!==void 0?t:n.name}}function yH(n){const t={Adagrad:()=>kd.adagrad(.01),Adadelta:()=>kd.adadelta(1,.95,Wi()),Adam:()=>kd.adam(.001,.9,.999,Wi()),Adamax:()=>kd.adamax(.002,.9,.999,Wi(),0),RMSProp:()=>kd.rmsprop(.001,.9,0,Wi()),SGD:()=>kd.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,n in t)return t[n]();throw new Yt(`Unknown Optimizer ${n}`)}const TC=1*1024*1024;function IC(n,t,e=!1){if(n==null||typeof n!="object"||Object.getPrototypeOf(n)!==Object.prototype||!wv(n))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(e){const s=JSON.stringify(n);s.length>TC&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${s.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${TC}.`)}}function wv(n){if(n===null)return!0;if(typeof n=="object")if(Object.getPrototypeOf(n)===Object.prototype){const t=Object.keys(n);for(const e of t)if(typeof e!="string"||!wv(n[e]))return!1;return!0}else if(Array.isArray(n)){for(const t of n)if(!wv(t))return!1;return!0}else return!1;else{const t=typeof n;return t==="string"||t==="number"||t==="boolean"}}function wH(n,t,e,s=console.log){const i=CH(n),r=["Layer (type)","Input Shape","Output shape","Param #"];i?(t=t||90,e=e||[.32,.61,.89,1]):(t=t||115,e=e||[.24,.48,.7,.8,1]),e[e.length-1]<=1&&(e=e.map(h=>Math.floor(t*h)));let o;if(!i){r.push("Receives inputs"),o=[];for(const h in n.nodesByDepth)o.push(...n.nodesByDepth[h])}s("_".repeat(t)),i1(r,e,s),s("=".repeat(t));const a=n.layers;for(let h=0;h<a.length;++h)i?SH(a[h],e,s):TH(a[h],e,o,s),s((h===a.length-1?"=":"_").repeat(t));n.checkTrainableWeightsConsistency();const l=kH(n),u=Zm(n.nonTrainableWeights);s(`Total params: ${l+u}`),s(`Trainable params: ${l}`),s(`Non-trainable params: ${u}`),s("_".repeat(t))}function kH(n){let t;return n.collectedTrainableWeights!=null?t=Zm(n.collectedTrainableWeights):t=Zm(n.trainableWeights),t}function CH(n){let t=!0;const e=[],s=[];for(const i in n.nodesByDepth)e.push(n.nodesByDepth[i]);for(const i of e){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){t=!1;break}s.push(...i)}if(t)for(const i of n.layers){let r=!1;for(const o of i.inboundNodes)if(s.indexOf(o)!==-1)if(r){t=!1;break}else r=!0;if(!t)break}return t}function i1(n,t,e=console.log){let s="";for(let i=0;i<n.length;++i)i>0&&(s=s.slice(0,s.length-1)+" "),s+=n[i],s=s.slice(0,t[i]),s+=" ".repeat(t[i]-s.length);e(s)}function SH(n,t,e){let s,i;try{i=n.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{i="multiple"}try{s=JSON.stringify(n.outputShape)}catch{s="multiple"}const r=n.name,o=n.getClassName(),a=[`${r} (${o})`,i,s,n.countParams().toString()];i1(a,t,e)}function TH(n,t,e,s){let i,r;try{r=n.inboundNodes.map(f=>JSON.stringify(f.inputShapes)).join(",")}catch{r="multiple"}try{i=JSON.stringify(n.outputShape)}catch{i="multiple"}const o=[];for(const f of n.inboundNodes)if(!(e!=null&&e.length>0&&e.indexOf(f)===-1))for(let g=0;g<f.inboundLayers.length;++g){const m=f.inboundLayers[g].name,y=f.nodeIndices[g],k=f.tensorIndices[g];o.push(`${m}[${y}][${k}]`)}const a=n.name,l=n.getClassName(),u=o.length===0?"":o[0],h=[`${a} (${l})`,r,i,n.countParams().toString(),u];i1(h,t,s);for(let f=1;f<o.length;++f)i1(["","","","",o[f]],t,s)}function jE(n,t,e){return(n==="inboundNodes"||n==="outputLayers"||n==="inputLayers")&&t===0&&typeof e=="string"}function kv(n,t){if(n===null)return null;if(typeof n=="string")return rh(n);if(typeof n=="number"||typeof n=="boolean")return n;if(n instanceof Array){const e=[],s=n.length;for(let i=0;i<s;++i){const r=n[i];jE(t,i,r)?e.push(r):e.push(kv(r,t))}return e}else{const e={};for(const s of Object.keys(n)){const i=n[s];if(s==="name"&&typeof i=="string")e[s]=i;else{const r=rh(s);e[r]=kv(i,r)}}return e}}function Cv(n,t){if(n==null)return null;if(typeof n=="string")return Yl(n);if(typeof n=="number"||typeof n=="boolean")return n;if(n instanceof Array){const e=[],s=n.length;for(let i=0;i<s;++i){const r=n[i];jE(t,i,r)?e.push(r):e.push(Cv(r,t))}return e}else{const e={};for(const s of Object.keys(n)){const i=n[s],r=Yl(s);(s==="name"||s==="className")&&typeof i=="string"?e[r]=i:e[r]=Cv(i,s)}return e}}const XE="4.22.0";const IH=n=>{const t=Object.keys(n);if(t.length===0)return!1;const e=t[0].split("/");return!isNaN(parseInt(e[e.length-1],10))};class Oa extends fs{constructor(t){if(super({}),this.containerNodes=new Set,this.name=t.name,this.name==null){const $=this.getClassName().toLowerCase();this.name=P2($)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(t.inputs)?this.inputs=t.inputs.slice():this.inputs=[t.inputs],Array.isArray(t.outputs)?this.outputs=t.outputs.slice():this.outputs=[t.outputs],Zc(this.inputs).length!==this.inputs.length)throw new Yt(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map($=>$.name)}`);Zc(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map($=>$.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const $ of this.outputs){const D=$.sourceLayer,R=$.nodeIndex,V=$.tensorIndex;this.outputLayers.push(D),this.outputLayersNodeIndices.push(R),this.outputLayersTensorIndices.push(V)}for(const $ of this.inputs){const D=$.sourceLayer,R=$.nodeIndex,V=$.tensorIndex;dl(R===0,"input layer has >1 nodes"),dl(V===0,"input layer has >1 tensors"),this.inputLayers.push(D),this.inputLayersNodeIndices.push(R),this.inputLayersTensorIndices.push(V)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let $=0;$<this.inputLayers.length;$++){const D=this.inputLayers[$];if(!(D instanceof J0))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${t.inputs}. Input ${$} (0-based) originates from layer type ${D.getClassName()}.`);this.inputNames.push(D.name),this.feedInputShapes.push(D.batchInputShape),this.feedInputNames.push(D.name)}for(const $ of this.outputLayers)this.outputNames.push($.name);this.internalInputShapes=this.inputs.map($=>$.shape),this.internalOutputShapes=this.outputs.map($=>$.shape);const e={},s={},i={},r={},o={},a=[],l=($,D,R,V,E,q)=>{(V==null||E==null||q==null)&&(V=$.sourceLayer,E=$.nodeIndex,q=$.tensorIndex);const X=V.inboundNodes[E];if(R.indexOf(X)!==-1)throw new aa(`The tensor ${$.name} at layer "${V.name}" is part of a cycle.`);if(D.indexOf(X)!==-1)return;this.containerNodes.add(Oa.nodeKey(V,E)),V.id in o||(o[V.id]=Object.keys(o).length),R.indexOf(X)===-1&&R.push(X);const B=X.inboundLayers.length;for(let U=0;U<B;U++){const K=X.inputTensors[U],Y=X.inboundLayers[U],ct=X.nodeIndices[U],j=X.tensorIndices[U];l(K,D,R,Y,ct,j)}for(D.push(X);R.indexOf(X)>=0;)R.splice(R.indexOf(X),1);a.push(X)},u=[],h=[];for(const $ of this.outputs)l($,u,h);const f=a.slice().reverse();for(const $ of f){s[$.id]=$,$.id in e||(e[$.id]=0);let D=e[$.id];const R=i[$.outboundLayer.id]==null?0:i[$.outboundLayer.id];D=Math.max(D,R),i[$.outboundLayer.id]=D,r[$.outboundLayer.id]=$.outboundLayer,e[$.id]=D;for(let V=0;V<$.inboundLayers.length;V++){const E=$.inboundLayers[V],q=$.nodeIndices[V],X=E.inboundNodes[q],B=e[X.id]==null?0:e[X.id];e[X.id]=Math.max(D+1,B),s[X.id]=X}}const g={};for(const $ in e){const D=e[$];D in g||(g[D]=[]),g[D].push(s[$])}const m={};for(const $ in i){const D=i[$];D in m||(m[D]=[]),m[D].push(r[$])}let y=Object.keys(m).map($=>parseInt($,10)).sort(im);this.layers=[];for(const $ of y){const D=m[$];D.sort((R,V)=>{const E=o[R.id],q=o[V.id];return E<q?-1:E>q?1:0});for(const R of D)R instanceof Oa&&this.internalContainerRefs.push(R),this.layers.push(R)}this.layersByDepth=m,y=Object.keys(g).map($=>parseInt($,10)).sort(im);const k=this.inputs.slice(),C=[];for(const $ of y)for(const D of g[$]){const R=D.outboundLayer;if(R!=null){for(const V of D.inputTensors)if(k.indexOf(V)===-1)throw new aa(`Graph disconnected: cannot obtain value for tensor ${V} at layer "${R.name}". The following previous layers were accessed without issue: ${C}`);for(const V of D.outputTensors)k.push(V);C.push(R.name)}}this.nodesByDepth=g;const S=this.layers.map($=>$.name);for(const $ of S){const D=S.filter(R=>R===$).length;if(D!==1)throw new aa(`The name "${$}" is used ${D} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(S))}this.outboundNodes=[],this.inboundNodes=[],new B2({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map($=>null),outputMasks:this.outputs.map($=>null),inputShapes:this.inputs.map($=>$.shape),outputShapes:this.outputs.map($=>$.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const t={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const e of this.layers)t.numDisposedVariables+=e.dispose().numDisposedVariables;for(const e of this.internalContainerRefs)t.numDisposedVariables+=e.dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t}get trainable(){return this.trainable_}set trainable(t){this.layers.forEach(e=>{e._trainableWeights.forEach(s=>s.trainable=t)}),this.trainable_=t}get trainableWeights(){if(this._trainableWeights.length>0)throw new Yt("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let t=[];for(const e of this.layers)t=t.concat(e.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const e of this.layers)t.push(...e.nonTrainableWeights);if(!this.trainable){const e=[];for(const s of this.layers)e.push(...s.trainableWeights);return e.concat(t)}return t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(t,e=!0){const s={};let i=0;const r=IH(t);r&&this.parseWeights(t);for(const a of this.layers)for(const[l,u]of a.weights.entries()){const h=r?`${u.name.split("/").slice(0,-1).join("/")+"/"}${l}`:u.originalName;if(s[h]!=null)throw new Yt(`Duplicate weight name: ${h}`);s[h]=u,i++}const o=[];for(const a in t){let l=a;if(s[a]==null){const u=a.split("/");l=u.slice(0,-2).concat([u[u.length-1]]).join("/")}if(s[l]!=null)o.push([s[l],t[a]]);else if(e)throw new Yt(`Provided weight data has no target variable: ${a}`);delete s[l]}if(e){const a=[];for(const l in s)a.push(l);if(a.length>0)throw new Yt(`${a.length} of ${i} weights are not set: ${a}`)}e3(o)}parseWeights(t){for(const e in Object.keys(t)){const s=e.split("/"),i=["vars","layer_checkpoint_dependencies"],r=s.map(o=>o.startsWith("_")?o.slice(1):o).filter(o=>!i.includes(o)).join("/");r!==e&&(t[r]=t[e],delete t[e])}}updatedConfig(){const t=this.getConfig(),e={};return e.className=this.getClassName(),e.config=t,e.kerasVersion=`tfjs-layers ${XE}`,e.backend="TensorFlow.js",e}toJSON(t,e=!0){const s=Cv(this.updatedConfig());return e?JSON.stringify(s):s}call(t,e){return he(()=>{t=js(t);const s=new Uc;for(let i=0;i<this.inputs.length;++i)s.add(this.inputs[i],t[i]);return dp(this.outputs,s,e)})}computeMask(t,e){return he(()=>{t=js(t);let s;return e==null?s=$h(null,t.length):s=js(e),this.runInternalGraph(t,s)[1]})}computeOutputShape(t){const e=Ym(t);if(e.length!==this.inputLayers.length)throw new Yt(`Invalid inputShape argument ${t}: model has ${this.inputLayers.length} tensor inputs.`);const s={};for(let a=0;a<e.length;a++){const l=this.inputLayers[a],u=e[a],h=l.name+"_0_0";s[h]=u}const i=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(im);if(i.length>1)for(const a of i){const l=this.nodesByDepth[a];for(const u of l){const h=u.outboundLayer;if(this.inputLayers.map(k=>k.id).indexOf(h.id)!==-1)continue;const f=[];for(let k=0;k<u.inboundLayers.length;k++){const C=u.inboundLayers[k],S=u.nodeIndices[k],$=u.tensorIndices[k],D=`${C.name}_${S}_${$}`,R=s[D];f.push(R)}const g=h.computeOutputShape(eo(f)),m=Ym(g),y=h.inboundNodes.indexOf(u);for(let k=0;k<m.length;k++){const C=`${h.name}_${y}_${k}`;s[C]=m[k]}}}const r=[],o=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],u=this.outputLayersNodeIndices[a],h=this.outputLayersTensorIndices[a],f=`${l.name}_${u}_${h}`;o.push(f)}for(let a=0;a<o.length;a++){const l=o[a];dl(l in s),r.push(s[l])}return eo(r)}runInternalGraph(t,e){e==null&&(e=$h(null,t.length));const s={};for(let l=0;l<this.inputs.length;++l){const u=this.inputs[l],h=t[l],f=e[l];s[u.id]=[h,f]}const i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(im);for(const l of i){const u=this.nodesByDepth[l];for(const h of u){const f=h.outboundLayer,g=h.inputTensors,m=h.outputTensors,y=new Array;for(const k of g)k.id in s&&y.push(s[k.id]);if(y.length===g.length){let k={},C,S,$,D;if(h.callArgs!=null&&(k=h.callArgs),y.length===1){const[R,V]=y[0];k.mask==null&&(k.mask=V),$=js(f.call(R,k)),D=js(f.computeMask(R,V)),C=[R],S=[V]}else C=y.map(R=>R[0]),S=y.map(R=>R[1]),k.mask==null&&(k.mask=S),$=js(f.call(C,k)),D=js(f.computeMask(C,S));if(f.activityRegularizer)throw new os("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let R=0;R<m.length;++R){const V=m[R],E=$[R],q=D[R];s[V.id]=[E,q]}}}}const r=[],o=[],a=[];for(const l of this.outputs){dl(l.id in s,`Could not compute output ${l.name} : ${l.id}`);const[u,h]=s[l.id];a.push(u.shape),r.push(u),o.push(h)}return[r,o,a]}buildNodeConversionMap(t){const e={};let s;for(const i of this.layers){s=i instanceof Oa?1:0;for(let r=0;r<i.inboundNodes.length;r++){const o=Oa.nodeKey(i,r);this.containerNodes.has(o)&&(e[o]=s,s+=1)}}return e}getLayer(t,e){if(e!=null)return this.findLayer(e);if(t==null)throw new Yt("Provide either a layer name or layer index");if(typeof t=="number")return this.findLayer(t);for(const s of this.layers)if(s.name===t)return s;throw new Yt(`No such layer: ${t}`)}findLayer(t){if(this.layers.length<=t)throw new Yt(`Was asked to retrieve layer at index ${t}, but model only has ${this.layers.length} layer(s).`);return this.layers[t]}calculateLosses(){return he(()=>{const t=[];for(const e of this.layers)for(let s=0;s<e.inboundNodes.length;++s){const i=Oa.nodeKey(e,s);this.containerNodes.has(i)&&t.push(...e.calculateLosses())}return t})}getConfig(){const t={name:this.name},e=this.buildNodeConversionMap(this.layers),s=[];for(const o of this.layers){const a=o.getClassName(),l=o.getConfig(),u=[];for(let f=0;f<o.inboundNodes.length;f++){const g=o.inboundNodes[f],m=Oa.nodeKey(o,f);let y={};if(this.containerNodes.has(m)){if(g.callArgs)try{JSON.stringify(g.callArgs),y=g.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${g.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),y={}}if(g.inboundLayers.length>0){const k=[];for(let C=0;C<g.inboundLayers.length;C++){const S=g.inboundLayers[C],$=g.nodeIndices[C],D=g.tensorIndices[C],R=Oa.nodeKey(S,$);let V=e[R];V==null&&(V=0),k.push([S.name,V,D,y])}u.push(k)}}}const h={};h.name=o.name,h.className=a,h.config=l,h.inboundNodes=u,s.push(h)}t.layers=s;const i=[];for(let o=0;o<this.inputLayers.length;o++){const a=this.inputLayers[o],l=this.inputLayersNodeIndices[o],u=Oa.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let h=e[u];h==null&&(h=0);const f=this.inputLayersTensorIndices[o];i.push([a.name,h,f])}t.inputLayers=i;const r=[];for(let o=0;o<this.outputLayers.length;o++){const a=this.outputLayers[o],l=this.outputLayersNodeIndices[o],u=Oa.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let h=e[u];h==null&&(h=0);const f=this.outputLayersTensorIndices[o];r.push([a.name,h,f])}return t.outputLayers=r,t}static fromConfig(t,e,s={},i=!1){const r={},o={};function a(C,S){C.name in o?o[C.name].push(S):o[C.name]=[S]}function l(C,S){const $=[];let D;for(const R of S){const V=R[0],E=R[1],q=R[2];if(D=R[3]==null?{}:R[3],!(V in r)){a(C,S);return}const X=r[V];if(X.inboundNodes.length<=E){a(C,S);return}const B=X.inboundNodes[E];$.push(B.outputTensors[q])}$.length>0&&C.apply(eo($),D)}function u(C){const S=C.name,$=sc(C,e.customObjects!=null?e.customObjects:{});$.setFastWeightInitDuringBuild(i),r[S]=$,C.inboundNodes.forEach(R=>{if(!(R instanceof Array))throw new Yt(`Corrupted configuration, expected array for nodeData: ${R}`);a($,R)})}const h=e.name,f=e.layers;for(const C of f)u(C);for(;!hG(o);)for(const C of f){const S=r[C.name];if(S.name in o){const $=o[S.name];delete o[S.name];for(const D of $)l(S,D)}}const g=[],m=[],y=e.inputLayers;for(const C of y){const S=C[0],$=C[1],D=C[2];dl(S in r);const V=r[S].inboundNodes[$].outputTensors;g.push(V[D])}const k=e.outputLayers;for(const C of k){const S=C[0],$=C[1],D=C[2];dl(S in r);const V=r[S].inboundNodes[$].outputTensors;m.push(V[D])}return new t({inputs:g,outputs:m,name:h})}get stateful(){if(this._stateful)throw new Yt("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const t of this.layers)if(t.stateful)return!0;return!1}resetStates(){he(()=>{this.layers.forEach(t=>{t.stateful&&t.resetStates()})})}}function EH(n,t,e){const s=t.length;if(n==null||Array.isArray(n)&&n.length===0)return t.map(i=>null);if(s===1)return Array.isArray(n)&&n.length===1?n:typeof n=="object"&&t[0]in n?[n[t[0]]]:[n];if(Array.isArray(n)){if(n.length!==s)throw new Error(`Provided ${e} is an array of ${n.length} element(s), but the model has ${s} outputs. Make sure a set of weights is provided for each model output.`);return n}else if(typeof n=="object"&&Object.keys(n).length>0&&typeof n[Object.keys(n)[0]]=="object"){const i=[];return t.forEach(r=>{r in n?i.push(n[r]):i.push(null)}),i}else throw new Error(`The model has multiple (${s}) outputs, so ${e} must be either an array with ${s} elements or an object with ${t} keys. Provided ${e} not understood: ${JSON.stringify(n)}`)}function qE(n,t){return EH(n,t,"classWeight")}async function KE(n,t,e,s){if(e!=null){const i=he(()=>{if(n.shape.length===1)return fh(n);if(n.shape.length===2){if(n.shape[1]>1)return Cp(n,1);if(n.shape[1]===1)return ne(n,[n.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${n.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${n.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),r=Array.from(await i.data());bs(i);const o=[];return r.forEach(a=>{if(e[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);o.push(e[a])}),ko(o,"float32")}else return null}function _H(n,t){return Jt(n,t)}const AH=32;function YE(n,t){let e,s;const i=t;e=i.xs,s=i.ys,wt(e!=null&&s!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`);const r=EC("input",n.inputNames,e),o=EC("output",n.outputNames,s),a=r[0].shape[0];wt(r.length===n.inputs.length,()=>`LayersModel has ${n.inputs.length} inputs, but the dataset provides ${r.length} inputs.  (Expected input keys: ${JSON.stringify(n.inputNames)})`),wt(o.length===n.outputs.length,()=>`LayersModel has ${n.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(n.outputNames)})`);for(let l=0;l<r.length;l++)wt(r[l].shape[0]===a,()=>`Batch size mismatch: input ${n.inputNames[l]} has ${r[l].shape[0]}; expected  ${a} based on input ${n.inputNames[0]}.`);for(let l=0;l<o.length;l++)wt(o[l].shape[0]===a,()=>`Batch size mismatch: output ${n.outputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${n.inputNames[0]}.`);return{xs:r,ys:o}}function EC(n,t,e){if(e instanceof zi)return[e];if(Array.isArray(e))return wt(e.length===t.length,()=>`Received an array of ${e.length} Tensors, but expected ${t.length} to match the ${n} keys ${t}.`),e;{const s=[];for(const i of t){if(e[i]==null)throw new Yt(`The feature data generated by the dataset lacks the required ${n} key '${i}'.`);s.push(e[i])}return s}}function $H(n){if(n.length===3)throw new os("Validation with sample weights is not implemented yet.");return{xs:n[0],ys:n[1]}}async function NH(n,t,e){const s=e.batchesPerEpoch!=null;if(wt(n.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),wt(e!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),wt(e.epochs!=null&&e.epochs>0&&Number.isInteger(e.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${e.epochs}`),wt(!s||e.batchesPerEpoch>0&&Number.isInteger(e.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${e.batchesPerEpoch}`),wt(e.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),n.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");n.isTraining=!0;try{const i=e.validationData!=null;let r,o;if(i)if(_C(e.validationData))wt(e.validationBatches==null||e.validationBatches>0&&Number.isInteger(e.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${e.validationBatches}`);else{const C=$H(e.validationData);r=C.xs,o=C.ys}const a=n.makeTrainFunction(),l=n.getDedupedMetricsNames();let u;i?u=l.slice().concat(l.map(C=>"val_"+C)):u=l.slice();const h=BE(e.callbacks,e.yieldEvery),f=e.verbose==null?1:e.verbose,{callbackList:g,history:m}=zE(h,f,e.epochs,null,null,DH(t,e),null,i,u);g.setModel(n),n.history=m,await g.onTrainBegin(),n.stopTraining_=!1;let y=e.initialEpoch==null?0:e.initialEpoch,k=await t.iterator();for(;y<e.epochs;){const C={};await g.onEpochBegin(y);let S=0,$=0;for(s||(k=await t.iterator());!s||S<e.batchesPerEpoch;){const D=await k.next();if(s&&D.done){console.warn(`You provided \`batchesPerEpoch\` as ${e.batchesPerEpoch}, but your dataset iterator ran out of data after ${S} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${e.batchesPerEpoch*e.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(D.value!=null){const{xs:R,ys:V}=YE(n,D.value),E={};E.batch=$,E.size=R[0].shape[0],await g.onBatchBegin($,E);const q=[];if(e.classWeight!=null){const U=qE(e.classWeight,n.outputNames);for(let K=0;K<U.length;++K)q.push(await KE(V[K],null,U[K]))}const X=R.concat(V).concat(q),B=a(X);bs(X);for(let U=0;U<l.length;++U){const K=l[U],Y=B[U];E[K]=Y,bl(Y)}await g.onBatchEnd($,E),LE(E),$++,S++}if(s?S>=e.batchesPerEpoch:D.done){if(i){let R;_C(e.validationData)?R=js(await n.evaluateDataset(e.validationData,{batches:e.validationBatches})):R=js(n.evaluate(r,o,{batchSize:e.validationBatchSize==null?AH:e.validationBatchSize,verbose:0}));for(let V=0;V<n.metricsNames.length;++V)C[`val_${n.metricsNames[V]}`]=R[V]}break}if(n.stopTraining_)break}if(await g.onEpochEnd(y,C),y++,n.stopTraining_)break}return await g.onTrainEnd(),await n.history.syncData(),n.history}finally{n.isTraining=!1}}function DH(n,t){let e=null;return t.batchesPerEpoch!=null?e=t.batchesPerEpoch:Number.isFinite(n.size)&&(e=n.size),e}function _C(n){return typeof n.iterator=="function"}function RH(n){return typeof n.next=="function"}async function MH(n,t,e){e=e||{};const s=e.batches!=null,i=n.testFunction;let r=[];if(e.verbose>0)throw new os("Verbose mode is not implemented yet.");wt(!s||e.batches>0&&Number.isInteger(e.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(e.batches)}`);const o=RH(t)?t:await t.iterator();let a=0,l=0;for(;!s||l<e.batches;){const u=await o.next();if(r=he(()=>{if(u.value){const{xs:h,ys:f}=YE(n,u.value),g=h.concat(f),m=he(()=>i(g));if(bs(g),l===0)for(let k=0;k<m.length;++k)r.push(Bs(0));const y=g[0].shape[0];for(let k=0;k<m.length;++k){const C=m[k],S=r[k];r[k]=he(()=>Be(r[k],Jt(y,C))),l>0&&bs(S)}bs(m),a+=y,++l}return r}),u.done){s&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${e.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<r.length;++u){const h=r[u];r[u]=Mn(r[u],a),bs(h)}return eo(r)}function Sb(n){wt(n>0&&Number.isInteger(n),()=>`batchSize is required to be a positive integer, but got ${n}`)}function rp(n,t,e){return n==null?[null]:Array.isArray(n)?n.map(s=>gh(s,t,e-t)):gh(n,t,e-t)}function Sv(n,t){return he(()=>n==null?null:Array.isArray(n)?n.map(e=>Sv(e,t)):CE(n,t.dtype==="int32"?t:rn(t,"int32")))}function Tb(n,t){const e=[];let s=0,i=null;for(;s<n;)i=s+t,i>=n&&(i=n),e.push([s,i]),s=i;return e}function ZE(n){const t=[];n instanceof zi&&(n=[n]);for(let e=0;e<n.length;++e){const s=n[e];if(s.rank===1)t.push(K0(s,1));else{if(s.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(s)}}return t}function Ra(n,t){if(n==null)return;const e=[];if(t instanceof zi)e.push(t.id);else if(Array.isArray(t))t.forEach(i=>e.push(i.id));else if(t!=null)for(const i in t){const r=t[i];e.push(r.id)}const s=[];if(n instanceof zi)e.indexOf(n.id)===-1&&s.push(n);else if(Array.isArray(n))n.forEach(i=>{e.indexOf(i.id)===-1&&s.push(i)});else if(n!=null)for(const i in n){const r=n[i];e.indexOf(r.id)===-1&&s.push(r)}s.forEach(i=>{i.isDisposed||i.dispose()})}function OH(n){return n instanceof zi}function Tv(n){return Array.isArray(n)}function AC(n){return!OH(n)&&!Tv(n)}function $C(n,t,e,s=!0,i=""){if(t==null||t.length===0){if(n!=null){let o=!1;if(Tv(n)&&n.length>0)o=!0;else if(AC(n)){for(const a in n)if(n.hasOwnProperty(a)){o=!0;break}}else o=!0;if(o)throw new Yt(`Error when checking model ${i} expected no data, but got ${n}`)}return[]}if(n==null)return t.map(o=>null);let r;if(AC(n)){n=n,r=[];for(const o of t){if(n[o]==null)throw new Yt(`No data provided for "${o}". Need data for each key in: ${t}`);r.push(n[o])}}else if(Tv(n)){if(n=n,n.length!==t.length)throw new Yt(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${n}`);r=n}else{if(n=n,t.length>1)throw new Yt(`The model ${i} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${n.shape}`);r=[n]}if(r=ZE(r),e!=null)for(let o=0;o<t.length;++o){if(e[o]==null)continue;const a=r[o];if(a.shape.length!==e[o].length)throw new Yt(`Error when checking ${i}: expected ${t[o]} to have ${e[o].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<e[o].length;++l){if(l===0&&!s)continue;const u=a.shape[l],h=e[o][l];if(h!=null&&h>=0&&u!==h)throw new Yt(`${i} expected a batch of elements where each example has shape [${e[o].slice(1,e[o].length)}] (i.e.,tensor shape [*,${e[o].slice(1,e[o].length)}]) but the ${i} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return r}function FH(n,t,e){const s=Zc(n.map(r=>r.shape[0]));s.sort();const i=Zc(t.map(r=>r.shape[0]));if(i.sort(),s.length>1)throw new Yt(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(n.map(r=>r.shape))}`);if(i.length>1)throw new Yt(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(r=>r.shape))}`);if(s.length>0&&i.length>0&&!zs(s,i))throw new Yt(`Input Tensors should have the same number of samples as target Tensors. Found ${s[0]} input sample(s) and ${i[0]} target sample(s).`)}function PH(n,t,e){const s=[z2,W2,Ap];for(let i=0;i<n.length;++i){const r=n[i],o=t[i],a=e[i];if(o!=null){if(o===Ap&&r.shape[r.shape.length-1]===1)throw new Yt(`You are passing a target array of shape ${r.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(s.indexOf(o)!==-1){const l=r.shape.slice(1),u=a.slice(1);for(let h=0;h<l.length;++h){const f=l[h],g=u[h];if(g!=null&&f!==g)throw new Yt(`A target Tensor with shape ${r.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function NC(n,t,e,s=!0,i=""){let r;if(Array.isArray(n)){if(n.length!==t.length)throw new Yt(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${n.length} Tensors(s).`);r=n}else{if(t.length>1)throw new Yt(`The model expects ${t.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(n.shape)}.`);r=[n]}if(e!=null)for(let o=0;o<t.length;++o){if(e[o]==null)continue;const a=r[o];if(a.shape.length!==e[o].length)throw new Yt(`Error when checking ${i}: expected ${t[o]} to have ${e[o].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<e[o].length;++l){if(l===0&&!s)continue;const u=a.shape[l],h=e[o][l];if(h!=null&&h!==u)throw new Yt(`Error when checking ${i}: expected ${t[o]} to have shape ${JSON.stringify(e[o])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function LH(n,t){if(n==null||Array.isArray(n)&&n.length===0)return t.map(s=>[]);let e;if(typeof n=="string"||typeof n=="function")e=[n];else if(Array.isArray(n)||typeof n=="object")e=n;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${n}`);if(Array.isArray(e))return t.map(s=>e);{const s=[];for(const i of t){let r=e.hasOwnProperty(i)?e[i]:[];Array.isArray(r)||(r=[r]),s.push(r)}return s}}const BH="layers-model";class mh extends Oa{constructor(t){super(t),this.isTraining=!1}summary(t,e,s=console.log){if(!this.built)throw new Yt("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");wH(this,t,e,s)}compile(t){if(t.loss==null&&(t.loss=[]),this.loss=t.loss,typeof t.optimizer=="string")this.optimizer_=yH(t.optimizer),this.isOptimizerOwned=!0;else{if(!(t.optimizer instanceof fu))throw new Yt("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=t.optimizer,this.isOptimizerOwned=!1}let e=[];if(!Array.isArray(t.loss)&&typeof t.loss!="string"&&typeof t.loss!="function"){t.loss=t.loss;for(const o in t.loss)if(this.outputNames.indexOf(o)===-1)throw new Yt(`Unknown entry in loss dictionary: "${o}". Only expected the following keys: ${this.outputNames}`);for(const o of this.outputNames)t.loss[o]==null&&console.warn(`Output "${o}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${o} during training`),e.push(Cb(t.loss[o]))}else if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new Yt(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${t.loss}.`);e=t.loss.map(a=>Cb(a))}else{const o=Cb(t.loss);this.outputs.forEach(a=>{e.push(o)})}this.lossFunctions=e,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const a=this.internalOutputShapes[o],l=this.outputNames[o];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[o])}const s=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],ph("loss",()=>{for(let o=0;o<this.outputs.length;++o){if(s.indexOf(o)!==-1)continue;const a=this.lossFunctions[o];this.outputs.length>1&&(this.metricsTensors.push([a,o]),this.metricsNames.push(this.outputNames[o]+"_loss"))}});const i=LH(t.metrics,this.outputNames),r=(o,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[o]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,o])};ph("metric",()=>{for(let o=0;o<this.outputs.length;++o){if(s.indexOf(o)!==-1)continue;const a=i[o];(u=>{let f,g,m;for(const y of u){if(typeof y=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(y)!==-1){const C=this.internalOutputShapes[o];C[C.length-1]===1||this.lossFunctions[o]===W2?["accuracy","acc"].indexOf(y)!==-1?g=VE:["crossentropy","ce"].indexOf(y)!==-1&&(g=uH):this.lossFunctions[o]===e1?["accuracy","acc"].indexOf(y)!==-1?g=hH:["crossentropy","ce"].indexOf(y)!==-1&&(g=HE):["accuracy","acc"].indexOf(y)!==-1?g=UE:["crossentropy","ce"].indexOf(y)!==-1&&(g=GE);let S;["accuracy","acc"].indexOf(y)!==-1?S="acc":["crossentropy","ce"].indexOf(y)!==-1&&(S="ce"),m=g,f=""+S}else m=vH(y),f=""+am(y);let k;ph(f,()=>{k=m}),r(o,f,k)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(t,e,s={}){const i=s.batchSize==null?32:s.batchSize;Sb(i);const o=this.standardizeUserDataXY(t,e,!0,i);try{const a=o[0].concat(o[1]);this.makeTestFunction();const l=this.testFunction,u=this.testLoop(l,a,i,s.verbose,s.steps);return eo(u)}finally{Ra(o[0],t),Ra(o[1],e)}}async evaluateDataset(t,e){return this.makeTestFunction(),MH(this,t,e)}checkNumSamples(t,e,s,i="steps"){let r;if(s!=null){if(r=null,e!=null)throw new Yt(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${e}`)}else if(t!=null)Array.isArray(t)?r=t[0].shape[0]:r=t.shape[0];else throw new Yt(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return r}execute(t,e){if(Array.isArray(e)&&e.length===0)throw new Yt("`outputs` is an empty Array, which is not allowed.");const s=Array.isArray(e),i=s?e:[e],r=this.retrieveSymbolicTensors(i),o=new Uc;if(t instanceof zi&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new Yt(`The number of inputs provided (${t.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)o.add(this.inputs[l],t[l])}else for(const l of this.inputs){const u=t[l.name];if(u==null)throw new Yt(`No value is provided for the model's input ${l.name}`);o.add(l,u)}const a=dp(r,o);return s?a:a[0]}retrieveSymbolicTensors(t){const e=$h(null,t.length);let s=t.length;for(const i of this.layers){const r=Array.isArray(i.output)?i.output:[i.output],o=r.map(a=>a.name);for(let a=0;a<t.length;++a){const l=o.indexOf(t[a]);if(l!==-1&&(e[a]=r[l],s--),s===0)break}if(s===0)break}if(s>0){const i=[];throw e.forEach((r,o)=>{r==null&&i.push(t[o])}),new Yt(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return e}predictLoop(t,e=32,s=!1){return he(()=>{const i=this.checkNumSamples(t);if(s)throw new os("Verbose predictLoop() is not implemented yet.");const r=Tb(i,e),o=this.outputs.map(a=>[]);for(let a=0;a<r.length;++a)he(()=>{const u=r[a][0],h=r[a][1],f=rp(t,u,h),g=[];if(Array.isArray(f))for(let y=0;y<f.length;++y)g.push({key:this.inputs[y],value:f[y]});else g.push({key:this.inputs[0],value:f});const m=new Uc(g);return dp(this.outputs,m)}).forEach((u,h)=>o[h].push(u));return eo(o.map(a=>so(a,0)))})}predict(t,e={}){const s=ZE(t);NC(s,this.inputNames,this.feedInputShapes,!1);try{const i=e.batchSize==null?32:e.batchSize;return Sb(i),this.predictLoop(s,i)}finally{Ra(s,t)}}predictOnBatch(t){NC(t,this.inputNames,this.feedInputShapes,!0);const e=(Array.isArray(t)?t[0]:t).shape[0];return this.predictLoop(t,e)}standardizeUserDataXY(t,e,s=!0,i){if(this.optimizer_==null)throw new aa("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const r=[];for(let o=0;o<this.feedOutputShapes.length;++o){const a=this.feedOutputShapes[o];this.feedLossFns[o]===e1?r.push(a.slice(0,a.length-1).concat([1])):r.push(a)}if(t=$C(t,this.feedInputNames,this.feedInputShapes,!1,"input"),e=$C(e,this.feedOutputNames,r,!1,"target"),FH(t,e),PH(e,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&t[0].shape[0]%i!==0)throw new Yt(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${t[0].shape[0]} sample(s).`);return[t,e]}async standardizeUserData(t,e,s,i,r=!0,o){const[a,l]=this.standardizeUserDataXY(t,e,r,o);if(s!=null)throw new Error("sample weight is not supported yet.");let u=null;if(i!=null){const h=qE(i,this.outputNames);u=[];for(let f=0;f<h.length;++f)u.push(await KE(l[f],null,h[f]))}return[a,l,u]}testLoop(t,e,s,i=0,r){return he(()=>{const o=this.checkNumSamples(e,s,r,"steps"),a=[];if(i>0)throw new os("Verbose mode is not implemented yet.");if(r!=null)throw new os("steps mode in testLoop() is not implemented yet");{const l=Tb(o,s),u=ko(Xa(0,o));for(let h=0;h<l.length;++h){const f=l[h][0],g=l[h][1],m=gh(u,f,g-f),y=Sv(e,m),k=t(y);if(h===0)for(let C=0;C<k.length;++C)a.push(Bs(0));for(let C=0;C<k.length;++C){const S=k[C];a[C]=Be(a[C],Jt(g-f,S))}}for(let h=0;h<a.length;++h)a[h]=Mn(a[h],o)}return a})}getDedupedMetricsNames(){const t=this.metricsNames,e=[];for(let s=0;s<t.length;++s){const i=t[s];let r=i;if(gC(t,i)>1){const o=gC(t.slice(0,s),i);r+=`_${o}`}e.push(r)}return e}makeTrainFunction(){return t=>{const e=[],s=t.slice(0,this.inputs.length),i=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),r=t.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),o=[],a=()=>{const f=[];for(let k=0;k<this.inputs.length;++k)f.push({key:this.inputs[k],value:s[k]});const g=new Uc(f),m=dp(this.outputs,g,{training:!0});let y;for(let k=0;k<this.lossFunctions.length;++k){const C=this.lossFunctions[k];let S=C(i[k],m[k]);r[k]!=null&&(S=_H(S,r[k]));const $=Oi(S);e.push($),k===0?y=S:y=Be(y,S)}for(let k=0;k<this.metricsTensors.length;++k){let C;if(this.outputs.length>1&&k<this.outputs.length)C=e[k];else{const S=this.metricsTensors[k][0],$=this.metricsTensors[k][1];C=Oi(S(i[$],m[$]))}bl(C),o.push(C)}return y=Oi(y),this.calculateLosses().forEach(k=>{y=Be(y,k)}),y},l=this.collectedTrainableWeights.map(f=>f.read());return[this.optimizer_.minimize(a,!0,l)].concat(o)}}makeTestFunction(){this.testFunction=t=>he(()=>{const e=[];let s;const i=t.slice(0,this.inputs.length),r=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let u=0;u<this.inputs.length;++u)o.push({key:this.inputs[u],value:i[u]});const a=new Uc(o),l=dp(this.outputs,a);for(let u=0;u<this.lossFunctions.length;++u){const h=this.lossFunctions[u],f=Oi(h(r[u],l[u]));u===0?s=f:s=Be(s,f),e.push(s)}for(let u=0;u<this.metricsTensors.length;++u){const h=this.metricsTensors[u][0],f=this.metricsTensors[u][1],g=Oi(h(r[f],l[f]));e.push(g)}return e})}async fit(t,e,s={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let i,r,o,a,l,u,h,f,g;try{const m=s.batchSize==null?32:s.batchSize;Sb(m);const k=await this.standardizeUserData(t,e,s.sampleWeight,s.classWeight,!1,m);i=k[0],r=k[1],g=k[2];let C=!1,S;if(s.validationData!=null&&s.validationData.length>0){if(C=!0,s.validationData.length===2)l=s.validationData[0],u=s.validationData[1];else throw s.validationData.length===3?new os("validationData including sample weights is not supported yet."):new Yt(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${s.validationData} is invalid.`);const U=await this.standardizeUserData(l,u,null,null,!0,m);h=U[0],f=U[1],S=h.concat(f)}else if(s.validationSplit!=null&&s.validationSplit>0&&s.validationSplit<1){C=!0;const B=Math.floor(i[0].shape[0]*(1-s.validationSplit)),U=i[0].shape[0];h=rp(i,B,U),o=i,i=rp(i,0,B),f=rp(r,B,U),a=r,r=rp(r,0,B),S=h.concat(f)}else s.validationSteps!=null&&(C=!0);const $=i.concat(r).concat(g);this.checkTrainableWeightsConsistency();const D=this.makeTrainFunction(),R=this.getDedupedMetricsNames();let V,E;C?(this.makeTestFunction(),V=this.testFunction,E=R.slice().concat(R.map(B=>"val_"+B))):(V=null,S=[],E=R.slice());const q=BE(s.callbacks,s.yieldEvery);return await this.fitLoop(D,$,R,m,s.epochs,s.verbose,q,V,S,s.shuffle,E,s.initialEpoch,null,null)}finally{this.isTraining=!1,Ra(i,t),Ra(r,e),Ra(o,t),Ra(a,e),Ra(h,l),Ra(f,u),g!=null&&bs(g)}}async fitLoop(t,e,s,i,r,o,a,l,u,h,f,g,m,y){i==null&&(i=32),r==null&&(r=1),h==null&&(h=!0),g==null&&(g=0);let k=!1;if(l!=null&&u!=null&&(k=!0),y!=null&&(k=!0,m==null))throw new Yt("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const C=this.checkNumSamples(e,i,m,"steps_per_epoch");let S;C!=null&&(S=Xa(0,C)),o==null&&(o=1);const{callbackList:$,history:D}=zE(a,o,r,g,C,m,i,k,f);$.setModel(this),this.history=D,await $.onTrainBegin(),this.stopTraining_=!1;for(let R=g;R<r;++R){await $.onEpochBegin(R);const V={};if(m!=null)throw new os("stepsPerEpoch mode is not implemented yet.");{if(h==="batch")throw new os("batch shuffling is not implemneted yet");h&&EO(S);const E=ko(S),q=Tb(C,i);for(let X=0;X<q.length;++X){const B={};if(await $.onBatchBegin(X,B),he(()=>{const U=q[X][0],K=q[X][1],Y=gh(E,U,K-U);B.batch=X,B.size=K-U;const ct=Sv(e,Y),j=t(ct);for(let ht=0;ht<s.length;++ht){const It=s[ht],yt=j[ht];B[It]=yt,bl(yt)}if(X===q.length-1&&k){const ht=this.testLoop(l,u,i);for(let It=0;It<s.length;++It){const yt=s[It],Ot=ht[It];bl(Ot),V["val_"+yt]=Ot}}}),await $.onBatchEnd(X,B),LE(B),this.stopTraining_)break}E.dispose()}if(await $.onEpochEnd(R,V),this.stopTraining_)break}return await $.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(t,e){return NH(this,t,e)}async trainOnBatch(t,e){const s=await this.standardizeUserData(t,e),i=s[0],r=s[1],a=this.makeTrainFunction()(i.concat(r)),l=[];for(const u of a){const h=await u.data();l.push(h[0])}return bs(a),Ra(s[0],t),Ra(s[1],e),eo(l)}getNamedWeights(t){const e=[],s=t!=null&&t.trainableOnly,i=s?this.trainableWeights:this.weights,r=this.getWeights(s);for(let o=0;o<i.length;++o)s&&!i[o].trainable||e.push({name:i[o].originalName,tensor:r[o]});return e}set stopTraining(t){this.stopTraining_=t}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(t){this.optimizer_!==t&&(this.optimizer_=t,this.isOptimizerOwned=!1)}dispose(){const t=super.dispose();if(t.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const e=U4().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=e-U4().numTensors}return t}getLossIdentifiers(){let t;if(typeof this.loss=="string")t=Yl(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if(typeof e!="string")throw new Error("Serialization of non-string loss is not supported.");t=this.loss.map(e=>Yl(e))}else{const e=Object.keys(this.loss);t={};const s=this.loss;for(const i of e)if(typeof s[i]=="string")t[i]=Yl(s[i]);else throw new Error("Serialization of non-string loss is not supported.")}return t}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Yl(am(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(t=>Yl(am(t)));{const t={};for(const e in this.metrics)t[e]=Yl(am(this.metrics[e]));return t}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(t){if(t.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(t.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(t.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const e=kv(t.optimizer_config),s=sc(e);let i;if(typeof t.loss=="string")i=rh(t.loss);else if(Array.isArray(t.loss))i=t.loss.map(o=>rh(o));else if(t.loss!=null){i={};for(const o in t.loss)i[o]=rh(t.loss[o])}let r;if(Array.isArray(t.metrics))r=t.metrics.map(o=>rh(o));else if(t.metrics!=null){r={};for(const o in t.metrics)r[o]=rh(t.metrics[o])}this.compile({loss:i,metrics:r,optimizer:s})}async save(t,e){if(typeof t=="string"){const u=wF(t);if(u.length===0)throw new Yt(`Cannot find any save handlers for URL '${t}'`);if(u.length>1)throw new Yt(`Found more than one (${u.length}) save handlers for URL '${t}'`);t=u[0]}if(t.save==null)throw new Yt("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const s=await H4(this.getNamedWeights(e)),a={modelTopology:this.toJSON(null,!1),format:BH,generatedBy:`TensorFlow.js tfjs-layers v${XE}`,convertedBy:null};if((e==null?!1:e.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const u="optimizer",{data:h,specs:f}=await H4(await this.optimizer.getWeights(),u);s.specs.push(...f),s.data=yF([s.data,h])}return this.userDefinedMetadata!=null&&(IC(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=s.data,a.weightSpecs=s.specs,t.save(a)}setUserDefinedMetadata(t){IC(t,this.name),this.userDefinedMetadata=t}getUserDefinedMetadata(){return this.userDefinedMetadata}}mh.className="Model";Fe(mh);class JE extends mh{}JE.className="Functional";Fe(JE);class $p extends mh{constructor(t){if(super({inputs:[],outputs:[]}),t=t||{},this.trainable=!0,this.built=!1,this.name=t.name!=null?t.name:P2("sequential_"),t.layers!=null)for(const e of t.layers)this.add(e)}checkShape(t){if(t.inboundNodes[0].outputTensors[0].shape.some(s=>s<0))throw new Yt(`Negative dimension size caused by adding layer ${t.name} with input shape [${t.inboundNodes[0].inputTensors[0].shape}]`)}add(t){const e=t instanceof $p||t instanceof mh;let s;if(e){if(s=t,s.outputs.length!==1)throw new Yt("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(s.inputs.length!==1)throw new Yt("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(t.inboundNodes.length===0){if(t.batchInputShape==null)throw new Yt("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const i=RE({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(i)}if(e)this.outputs=s.outputs,this.inputs=s.inputs;else{if(t.inboundNodes.length!==1)throw new Yt(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${t.name} which has ${t.inboundNodes.length} pre-existing inbound connections.`);if(t.inboundNodes[0].outputTensors.length!==1)throw new Yt("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=DE(this.outputs[0])}this.inboundNodes=[],new B2({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:$h(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{const i=t.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(t,e){return this.model==null&&this.build(),this.model.call(t,e)}build(t){if(Ds(t),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new mh({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(t,e,s=console.log){this.built||this.build(),super.summary(t,e,s)}setWeights(t){this.model==null&&this.build(),this.model.setWeights(t)}evaluate(t,e,s={}){if(!this.built)throw new aa("The model needs to be compiled before being used.");return this.model.evaluate(t,e,s)}async evaluateDataset(t,e){if(!this.built)throw new aa("The model needs to be compiled before being used.");return this.model.evaluateDataset(t,e)}predict(t,e={}){return this.model==null&&this.build(),this.model.predict(t,e)}predictOnBatch(t){return this.model==null&&this.build(),this.model.predictOnBatch(t)}compile(t){this.build(),this.model.compile(t),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(t){this.model.optimizer=t}async fit(t,e,s={}){if(!this.built)throw new aa("The model needs to be compiled before being used.");return this.model.fit(t,e,s)}async fitDataset(t,e){if(!this.built)throw new aa("The model needs to be compiled before being used.");return this.model.fitDataset(t,e)}async trainOnBatch(t,e){return this.model.trainOnBatch(t,e)}static fromConfig(t,e,s={},i=!1){let r,o={};if(e instanceof Array){if(e[0].className==null||e[0].className==="Merge")throw new Yt("Legacy serialization format not supported yet.");r=e}else wt(e.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),r=e.layers,delete e.layers,o=e;const a=new t(o);if(!(a instanceof $p))throw new os(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of r){const h=sc(l,void 0,i);i&&h.setFastWeightInitDuringBuild(!0),a.add(h)}return a}set stopTraining(t){if(this.model==null)throw new Yt("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=t}get stopTraining(){if(this.model==null)throw new Yt("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const t=[];for(const e of this.layers){const s={};s.className=e.getClassName(),s.config=e.getConfig(),t.push(s)}return{name:this.name,layers:t}}}$p.className="Sequential";Fe($p);function zH(n){return new mh(n)}function DC(n){return RE(n)}let Tr=class extends uf{getConfig(){return{}}};class QE extends Tr{apply(t,e=1){return IG(t,e)}}QE.className="elu";Fe(QE);class t_ extends Tr{apply(t){return w5(t)}}t_.className="selu";Fe(t_);class e_ extends Tr{apply(t){return Lh(t)}}e_.className="relu";Fe(e_);class n_ extends Tr{apply(t){return he(()=>Ip(6,Lh(t)))}}n_.className="relu6";Fe(n_);class s_ extends Tr{apply(t){return t}}s_.className="linear";Fe(s_);class i_ extends Tr{apply(t){return af(t)}}i_.className="sigmoid";Fe(i_);class r_ extends Tr{apply(t){return _G(t)}}r_.className="hardSigmoid";Fe(r_);class o_ extends Tr{apply(t){return W0(t)}}o_.className="softplus";Fe(o_);class a_ extends Tr{apply(t){return EG(t)}}a_.className="softsign";Fe(a_);class l_ extends Tr{apply(t){return _2(t)}}l_.className="tanh";Fe(l_);let r3=class extends Tr{apply(t,e=-1){return fw(t,e)}};r3.className="softmax";Fe(r3);class c_ extends Tr{apply(t,e=-1){return f5(t,e)}}c_.className="logSoftmax";Fe(c_);class u_ extends Tr{apply(t){return he(()=>he(()=>{const e=Math.sqrt(2),s=Jt(.5,Be(1,l5(Mn(t,e))));return Jt(t,s)}))}}u_.className="gelu";Fe(u_);class h_ extends Tr{apply(t){return he(()=>Jt(.5,Jt(t,Be(1,_2(Jt(yr(Mn(2,Math.PI)),Be(t,Jt(.044715,Eh(t,3)))))))))}}h_.className="gelu_new";Fe(h_);class d_ extends Tr{apply(t){return he(()=>Jt(t,_2(W0(t))))}}d_.className="mish";Fe(d_);class f_ extends Tr{apply(t,e=1){return he(()=>Jt(af(Jt(t,e)),t))}}f_.className="swish";Fe(f_);function su(n){return n.getClassName()}function Ib(n,t={}){return q0(n,oa.getMap().classNameMap,t,"activation")}function iu(n){if(n==null){const t={};return t.className="linear",t.config={},Ib(t)}if(typeof n=="string"){const t={};return t.className=n,t.config={},Ib(t)}else return n instanceof Tr?n:Ib(n)}function WH(n){if(n!=null&&typeof n!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${n}`)}class p_ extends uf{}class g_ extends p_{constructor(t){super(),WH(t),this.l1=t==null||t.l1==null?.01:t.l1,this.l2=t==null||t.l2==null?.01:t.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(t){return he(()=>{let e=Zi([1]);return this.hasL1&&(e=Be(e,Rn(Jt(this.l1,Fr(t))))),this.hasL2&&(e=Be(e,Rn(Jt(this.l2,Y0(t))))),ne(e,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(t,e){return new t({l1:e.l1,l2:e.l2})}}g_.className="L1L2";Fe(g_);const RC={l1l2:"L1L2"};function ti(n){return Hw(n)}function MC(n,t={}){return q0(n,oa.getMap().classNameMap,t,"regularizer")}function fi(n){if(n==null)return null;if(typeof n=="string"){const e={className:n in RC?RC[n]:n,config:{}};return MC(e)}else return n instanceof p_?n:MC(n)}class m_ extends fs{constructor(t){super(t??{}),this.supportsMasking=!0,t!=null&&(this.maxValue=t.maxValue)}call(t,e){t=Hn(t);let s=Lh(t);return this.maxValue!=null&&(s=Xo(s,0,this.maxValue)),s}computeOutputShape(t){return t}getConfig(){const t={maxValue:this.maxValue},e=super.getConfig();return Object.assign(t,e),t}}m_.className="ReLU";Fe(m_);class x_ extends fs{constructor(t){super(t??{}),this.DEFAULT_ALPHA=.3,t==null&&(t={}),this.alpha=t.alpha==null?this.DEFAULT_ALPHA:t.alpha}call(t,e){const s=Hn(t);return sw(s,this.alpha)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},e=super.getConfig();return Object.assign(t,e),t}}x_.className="LeakyReLU";Fe(x_);class b_ extends fs{constructor(t){if(super(t??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",t==null&&(t={}),this.supportsMasking=!0,this.alphaInitializer=hi(t.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=fi(t.alphaRegularizer),this.alphaConstraint=Gi(t.alphaConstraint),t.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(t.sharedAxes))this.sharedAxes=t.sharedAxes;else if(typeof t.sharedAxes=="number")this.sharedAxes=[t.sharedAxes];else throw new Yt(`Expected sharedAxes to be a number or an array of numbers, but got ${t.sharedAxes}`)}build(t){t=Ds(t);const e=t.slice(1);if(this.sharedAxes!=null)for(const i of this.sharedAxes)e[i-1]=1;this.alpha=this.addWeight("alpha",e,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const s={};if(this.sharedAxes!=null)for(let i=1;i<t.length;++i)s[i]=t[i];this.inputSpec=[new Vi({ndim:t.length,axes:s})],this.built=!0}call(t,e){return t=Hn(t),cw(t,this.alpha.read())}getConfig(){const t={alphaInitializer:mi(this.alphaInitializer),alphaRegularizer:ti(this.alphaRegularizer),alphaConstraint:Ui(this.alphaConstraint),sharedAxes:this.sharedAxes},e=super.getConfig();return Object.assign(t,e),t}}b_.className="PReLU";Fe(b_);let v_=class extends fs{constructor(t){if(super(t??{}),this.DEFAULT_ALPHA=1,t==null&&(t={}),t.alpha!=null&&t.alpha!==this.DEFAULT_ALPHA)throw new os(`Non-default alpha value (${t.alpha}) is not supported by the ELU layer yet.`);this.alpha=t.alpha==null?this.DEFAULT_ALPHA:t.alpha}call(t,e){const s=Hn(t);return N2(s)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},e=super.getConfig();return Object.assign(t,e),t}};v_.className="ELU";Fe(v_);class y_ extends fs{constructor(t){super(t??{}),this.DEFAULT_THETA=1,t==null&&(t={}),this.theta=t.theta==null?this.DEFAULT_THETA:t.theta}call(t,e){const s=Hn(t);return Jt(s,rn(qo(s,this.theta),"float32"))}computeOutputShape(t){return t}getConfig(){const t={theta:this.theta},e=super.getConfig();return Object.assign(t,e),t}}y_.className="ThresholdedReLU";Fe(y_);class w_ extends fs{constructor(t){super(t??{}),this.DEFAULT_AXIS=1,t==null&&(t={}),this.softmax=new r3().apply,this.axis=t.axis==null?this.DEFAULT_AXIS:t.axis}call(t,e){return he(()=>{let s=Hn(t);const i=e.mask;if(i!=null){const r=Jt(Vn(du(s.shape),rn(i,s.dtype)),Bs(-1e9));s=Be(s,r)}return this.axis instanceof Array?this.axis.length>1?Cl(Vn(s,p5(s,this.axis,!0))):this.softmax(s,this.axis[0]):this.softmax(s,this.axis)})}computeOutputShape(t){return t}getConfig(){const t={axis:this.axis},e=super.getConfig();return Object.assign(t,e),t}}w_.className="Softmax";Fe(w_);function Md(n,t,e){if(typeof n=="number")return $h(n,t);if(n.length!==t)throw new Yt(`The ${e} argument must be an integer or tuple of ${t} integers. Received: ${n.length} elements.`);for(let s=0;s<t;++s){const i=n[s];if(!kG(i))throw new Yt(`The ${e} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(n)} including a non-integer number ${i}`)}return n}function ja(n,t,e,s,i=1){if(n==null)return n;const r=t+(t-1)*(i-1);let o;return e==="same"?o=n:o=n-r+1,Math.floor((o+s-1)/s)}function fl(n,t,e,s){if(n==null)return null;if(s==="valid")n=n*t+nu([e-t,0]);else if(s==="same")n=n*t;else throw new Yt(`Unsupport padding mode: ${s}.`);return n}function o3(n,t){return he(()=>(Ai(t),t==="channelsFirst"?Es(n,[0,2,3,1]):n))}function k_(n,t){return he(()=>(Ai(t),t==="channelsFirst"?Es(n,[0,2,3,4,1]):n))}function VH(n,t,e,s=1,i="valid",r,o=1){return he(()=>{if(r==null&&(r=qa()),Ai(r),n.shape.length!==3)throw new Yt(`The input of a conv1dWithBias operation should be 3, but is ${n.shape.length} instead.`);if(t.shape.length!==3)throw new Yt(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(e!=null&&e.shape.length!==1)throw new Yt(`The bias for a conv1dWithBias operation should be 1, but is ${e.shape.length} instead`);if(r==="channelsFirst"&&(n=Es(n,[0,2,1])),i==="causal")throw new os("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=s5(n,t,s,i==="same"?"same":"valid","NWC",o);return e!=null&&(a=Ja(a,e)),a})}function OC(n,t,e,s=[1,1],i="valid",r,o,a=null){return he(()=>{if(r==null&&(r=qa()),Ai(r),n.rank!==3&&n.rank!==4)throw new Yt(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${n.rank}.`);if(t.rank!==3&&t.rank!==4)throw new Yt(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${n.rank}.`);let l=o3(n,r);if(i==="causal")throw new os("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=Qz({x:l,filter:t,strides:s,pad:i==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:e,activation:a}),r==="channelsFirst"&&(l=Es(l,[0,3,1,2])),l})}function UH(n,t,e,s=[1,1,1],i="valid",r,o){return he(()=>{if(r==null&&(r=qa()),Ai(r),n.rank!==4&&n.rank!==5)throw new Yt(`conv3dWithBias expects input to be of rank 4 or 5, but received ${n.rank}.`);if(t.rank!==4&&t.rank!==5)throw new Yt(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${n.rank}.`);let a=k_(n,r);if(i==="causal")throw new os("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=ZP(a,t,s,i==="same"?"same":"valid","NDHWC",o),e!=null&&(a=Ja(a,e)),r==="channelsFirst"&&(a=Es(a,[0,4,1,2,3])),a})}class V2 extends fs{constructor(t,e){if(super(e),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",V2.verifyArgs(e),this.rank=t,Ji(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new os(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Md(e.kernelSize,t,"kernelSize"),this.strides=Md(e.strides==null?1:e.strides,t,"strides"),this.padding=e.padding==null?"valid":e.padding,Ko(this.padding),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ai(this.dataFormat),this.activation=iu(e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.biasInitializer=hi(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Gi(e.biasConstraint),this.biasRegularizer=fi(e.biasRegularizer),this.activityRegularizer=fi(e.activityRegularizer),this.dilationRate=Md(e.dilationRate==null?1:e.dilationRate,t,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new Yt(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new Yt(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new Yt(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(t){if(dl("kernelSize"in t,"required key 'kernelSize' not in config"),typeof t.kernelSize!="number"&&!jw(t.kernelSize,"number",1,3))throw new Yt(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(t.kernelSize)}.`)}getConfig(){const t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:su(this.activation),useBias:this.useBias,biasInitializer:mi(this.biasInitializer),biasRegularizer:ti(this.biasRegularizer),activityRegularizer:ti(this.activityRegularizer),biasConstraint:Ui(this.biasConstraint)},e=super.getConfig();return Object.assign(t,e),t}}class hf extends V2{constructor(t,e){super(t,e),this.kernel=null,hf.verifyArgs(e),this.filters=e.filters,Ji(this.filters,"filters"),this.kernelInitializer=hi(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Gi(e.kernelConstraint),this.kernelRegularizer=fi(e.kernelRegularizer)}build(t){t=Ds(t);const e=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[e]==null)throw new Yt(`The channel dimension of the input should be defined. Found ${t[e]}`);const s=t[e],i=this.kernelSize.concat([s,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[e]:s}}],this.built=!0}call(t,e){return he(()=>{t=Hn(t);let s;const i=this.bias==null?null:this.bias.read(),r=xE(this.activation.getClassName());if(r!=null&&this.rank===2)s=OC(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(this.rank===1)s=VH(t,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)s=OC(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)s=UH(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new os("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(s=this.activation.apply(s))}return s})}computeOutputShape(t){t=Ds(t);const e=[],s=this.dataFormat==="channelsLast"?t.slice(1,t.length-1):t.slice(2);for(let r=0;r<s.length;++r){const o=ja(s[r],this.kernelSize[r],this.padding,this.strides[r],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[r]);e.push(o)}let i=[t[0]];return this.dataFormat==="channelsLast"?(i=i.concat(e),i.push(this.filters)):(i.push(this.filters),i=i.concat(e)),i}getConfig(){const t={filters:this.filters,kernelInitializer:mi(this.kernelInitializer),kernelRegularizer:ti(this.kernelRegularizer),kernelConstraint:Ui(this.kernelConstraint)},e=super.getConfig();return Object.assign(t,e),t}static verifyArgs(t){if(!("filters"in t)||typeof t.filters!="number"||t.filters<1)throw new Yt(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(t.filters)}`)}}class tg extends hf{constructor(t){super(2,t),tg.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!jw(t.kernelSize,"number",1,2))throw new Yt(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(t.kernelSize)}.`)}}tg.className="Conv2D";Fe(tg);class eg extends hf{constructor(t){super(3,t),eg.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!(Array.isArray(t.kernelSize)&&(t.kernelSize.length===1||t.kernelSize.length===3)))throw new Yt(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(t.kernelSize)}.`)}}eg.className="Conv3D";Fe(eg);class C_ extends tg{constructor(t){if(super(t),this.inputSpec=[new Vi({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new Yt(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(t=Ds(t),t.length!==4)throw new Yt("Input should have rank 4; Received input shape: "+JSON.stringify(t));const e=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[e]==null)throw new Yt("The channel dimension of the inputs should be defined. Found `None`.");const s=t[e],i=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Vi({ndim:4,axes:{[e]:s}})],this.built=!0}call(t,e){return he(()=>{let s=Hn(t);if(s.shape.length!==4)throw new Yt(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const i=s.shape,r=i[0];let o,a;this.dataFormat==="channelsFirst"?(o=2,a=3):(o=1,a=2);const l=i[o],u=i[a],h=this.kernelSize[0],f=this.kernelSize[1],g=this.strides[0],m=this.strides[1],y=fl(l,g,h,this.padding),k=fl(u,m,f,this.padding),C=[r,y,k,this.filters];this.dataFormat!=="channelsLast"&&(s=Es(s,[0,2,3,1]));let S=i5(s,this.kernel.read(),C,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(S=Es(S,[0,3,1,2])),this.bias!=null&&(S=Ja(S,this.bias.read(),this.dataFormat)),this.activation!=null&&(S=this.activation.apply(S)),S})}computeOutputShape(t){t=Ds(t);const e=t.slice();let s,i,r;this.dataFormat==="channelsFirst"?(s=1,i=2,r=3):(s=3,i=1,r=2);const o=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],u=this.strides[1];return e[s]=this.filters,e[i]=fl(e[i],l,o,this.padding),e[r]=fl(e[r],u,a,this.padding),e}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}C_.className="Conv2DTranspose";Fe(C_);class S_ extends eg{constructor(t){if(super(t),this.inputSpec=[new Vi({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new Yt(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(t=Ds(t),t.length!==5)throw new Yt("Input should have rank 5; Received input shape: "+JSON.stringify(t));const e=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[e]==null)throw new Yt("The channel dimension of the inputs should be defined. Found `None`.");const s=t[e],i=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Vi({ndim:5,axes:{[e]:s}})],this.built=!0}call(t,e){return he(()=>{let s=Hn(t);if(s.shape.length!==5)throw new Yt(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const i=s.shape,r=i[0];let o,a,l;this.dataFormat==="channelsFirst"?(l=2,o=3,a=4):(l=1,o=2,a=3);const u=i[l],h=i[o],f=i[a],g=this.kernelSize[0],m=this.kernelSize[1],y=this.kernelSize[2],k=this.strides[0],C=this.strides[1],S=this.strides[2],$=fl(u,k,g,this.padding),D=fl(h,C,m,this.padding),R=fl(f,S,y,this.padding),V=[r,$,D,R,this.filters];this.dataFormat!=="channelsLast"&&(s=Es(s,[0,2,3,4,1]));let E=tL(s,this.kernel.read(),V,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(E=Es(E,[0,4,1,2,3])),this.bias!==null&&(E=Ja(E,this.bias.read(),this.dataFormat)),this.activation!==null&&(E=this.activation.apply(E)),E})}computeOutputShape(t){t=Ds(t);const e=t.slice();let s,i,r,o;this.dataFormat==="channelsFirst"?(s=1,i=2,r=3,o=4):(s=4,i=1,r=2,o=3);const a=this.kernelSize[0],l=this.kernelSize[1],u=this.kernelSize[2],h=this.strides[0],f=this.strides[1],g=this.strides[2];return e[s]=this.filters,e[i]=fl(e[i],h,a,this.padding),e[r]=fl(e[r],f,l,this.padding),e[o]=fl(e[o],g,u,this.padding),e}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}S_.className="Conv3DTranspose";Fe(S_);class T_ extends hf{constructor(t,e){if(super(t,e),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,e.filters==null)throw new Yt("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(e.kernelInitializer!=null||e.kernelRegularizer!=null||e.kernelConstraint!=null)throw new Yt("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(e.padding!=null&&e.padding!=="same"&&e.padding!=="valid")throw new Yt(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(e.padding)}`);this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=hi(e.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=fi(e.depthwiseRegularizer),this.depthwiseConstraint=Gi(e.depthwiseConstraint),this.pointwiseInitializer=hi(e.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=fi(e.pointwiseRegularizer),this.pointwiseConstraint=Gi(e.pointwiseConstraint)}build(t){if(t=Ds(t),t.length<this.rank+2)throw new Yt(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(t)}`);const e=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[e]==null||t[e]<0)throw new Yt(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(t[e])}`);const s=t[e],i=this.kernelSize.concat([s,this.depthMultiplier]),r=[];for(let a=0;a<this.rank;++a)r.push(1);r.push(s*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",r,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new Vi({ndim:this.rank+2,axes:{[e]:s}})],this.built=!0}call(t,e){return he(()=>{t=Hn(t);let s;if(this.rank===1)throw new os("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(t=Es(t,[0,2,3,1])),s=k5(t,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(s=Ja(s,this.bias.read(),this.dataFormat)),this.activation!=null&&(s=this.activation.apply(s)),this.dataFormat==="channelsFirst"&&(s=Es(s,[0,3,1,2])),s})}getConfig(){const t=super.getConfig();return delete t.rank,delete t.kernelInitializer,delete t.kernelRegularizer,delete t.kernelConstraint,t.depthwiseInitializer=mi(this.depthwiseInitializer),t.pointwiseInitializer=mi(this.pointwiseInitializer),t.depthwiseRegularizer=ti(this.depthwiseRegularizer),t.pointwiseRegularizer=ti(this.pointwiseRegularizer),t.depthwiseConstraint=Ui(this.depthwiseConstraint),t.pointwiseConstraint=Ui(this.pointwiseConstraint),t}}T_.className="SeparableConv";class I_ extends T_{constructor(t){super(2,t)}}I_.className="SeparableConv2D";Fe(I_);class U2 extends hf{constructor(t){super(1,t),U2.verifyArgs(t),this.inputSpec=[{ndim:3}]}getConfig(){const t=super.getConfig();return delete t.rank,delete t.dataFormat,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!jw(t.kernelSize,"number",1,1))throw new Yt(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(t.kernelSize)}.`)}}U2.className="Conv1D";Fe(U2);class E_ extends fs{constructor(t){super(t),typeof t.cropping=="number"?this.cropping=[[t.cropping,t.cropping],[t.cropping,t.cropping]]:typeof t.cropping[0]=="number"?this.cropping=[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:this.cropping=t.cropping,this.dataFormat=t.dataFormat===void 0?"channelsLast":t.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(t){return this.dataFormat==="channelsFirst"?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[3]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]}call(t,e){return he(()=>{if(t=Hn(t),this.dataFormat==="channelsLast"){const s=om(t,this.cropping[0][0],t.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return om(s,this.cropping[1][0],t.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const s=om(t,this.cropping[0][0],t.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return om(s,this.cropping[1][0],t.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const t={cropping:this.cropping,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}E_.className="Cropping2D";Fe(E_);class __ extends fs{constructor(t){super(t),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=t.size==null?this.DEFAULT_SIZE:t.size,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Ai(this.dataFormat),this.interpolation=t.interpolation==null?"nearest":t.interpolation,vG(this.interpolation)}computeOutputShape(t){if(this.dataFormat==="channelsFirst"){const e=t[2]==null?null:this.size[0]*t[2],s=t[3]==null?null:this.size[1]*t[3];return[t[0],t[1],e,s]}else{const e=t[1]==null?null:this.size[0]*t[1],s=t[2]==null?null:this.size[1]*t[2];return[t[0],e,s,t[3]]}}call(t,e){return he(()=>{let s=Hn(t);const i=s.shape;if(this.dataFormat==="channelsFirst"){s=Es(s,[0,2,3,1]);const r=this.size[0]*i[2],o=this.size[1]*i[3],a=this.interpolation==="nearest"?Ql.resizeNearestNeighbor(s,[r,o]):Ql.resizeBilinear(s,[r,o]);return Es(a,[0,3,1,2])}else{const r=this.size[0]*i[1],o=this.size[1]*i[2];return this.interpolation==="nearest"?Ql.resizeNearestNeighbor(s,[r,o]):Ql.resizeBilinear(s,[r,o])}})}getConfig(){const t={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},e=super.getConfig();return Object.assign(t,e),t}}__.className="UpSampling2D";Fe(__);function GH(n,t,e=[1,1],s="valid",i,r){return he(()=>{i==null&&(i=qa()),Ai(i);let o=o3(n,i);if(n.rank!==4)throw new Yt(`Input for depthwiseConv2d is required to be 4-D, but is instead ${n.rank}-D`);if(t.rank!==4)throw new Yt(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return o=Qy(o,t,e,s==="same"?"same":"valid","NHWC",r),i==="channelsFirst"&&(o=Es(o,[0,3,1,2])),o})}class A_ extends V2{constructor(t){super(2,t),this.depthwiseKernel=null,this.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,this.depthwiseInitializer=hi(t.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Gi(t.depthwiseConstraint),this.depthwiseRegularizer=fi(t.depthwiseRegularizer)}build(t){if(t=Ds(t),t.length<4)throw new Yt(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(t)}.`);const e=this.dataFormat==="channelsFirst"?1:3;if(t[e]==null||t[e]<0)throw new Yt(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${t[e]}).`);const s=t[e],i=[this.kernelSize[0],this.kernelSize[1],s,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[s*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,e){return he(()=>{t=Hn(t);let s=GH(t,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(s=Ja(s,this.bias.read(),this.dataFormat)),this.activation!=null&&(s=this.activation.apply(s)),s})}computeOutputShape(t){t=Ds(t);const e=this.dataFormat==="channelsFirst"?t[2]:t[1],s=this.dataFormat==="channelsFirst"?t[3]:t[2],i=this.dataFormat==="channelsFirst"?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,r=ja(e,this.kernelSize[0],this.padding,this.strides[0]),o=ja(s,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[t[0],i,r,o]:[t[0],r,o,i]}getConfig(){const t=super.getConfig();return t.depthMultiplier=this.depthMultiplier,t.depthwiseInitializer=mi(this.depthwiseInitializer),t.depthwiseRegularizer=ti(this.depthwiseRegularizer),t.depthwiseConstraint=Ui(this.depthwiseRegularizer),t}}A_.className="DepthwiseConv2D";Fe(A_);function $_(n,t,e,s){if(Array.isArray(n)){if(t!=null||e!=null)throw new Yt("When inputs is an array, neither initialState or constants should be provided");s!=null&&(e=n.slice(n.length-s,n.length),n=n.slice(0,n.length-s)),n.length>1&&(t=n.slice(1,n.length)),n=n[0]}function i(r){return r==null||Array.isArray(r)?r:[r]}return t=i(t),e=i(e),{inputs:n,initialState:t,constants:e}}function N_(n,t,e,s=!1,i,r,o=!1,a=!1){return he(()=>{const l=t.shape.length;if(l<3)throw new Yt(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(Xa(2,l));t=Es(t,u),o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=rn(rn(i,"bool"),"float32"),i.rank===l-1&&(i=to(i,-1)),i=Es(i,u)),s&&(t=_h(t,0),i!=null&&(i=_h(i,0)));const h=[];let f,g=e;const m=t.shape[0],y=Ah(t);let k;i!=null&&(k=Ah(i));for(let S=0;S<m;++S){const $=y[S],D=he(()=>n($,g));if(i==null)f=D[0],g=D[1];else{const R=he(()=>{const V=k[S],E=Vn(pa(V),V),q=Be(Jt(D[0],V),Jt(g[0],E)),X=g.map((B,U)=>Be(Jt(D[1][U],V),Jt(B,E)));return{output:q,newStates:X}});f=R.output,g=R.newStates}a&&h.push(f)}let C;return a&&(C=oc(h,1)),[f,C,g]})}class pu extends fs{constructor(t){super(t);let e;if(t.cell==null)throw new Yt("cell property is missing for the constructor of RNN.");if(Array.isArray(t.cell)?e=new c3({cells:t.cell}):e=t.cell,e.stateSize==null)throw new Yt("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=e,this.returnSequences=t.returnSequences==null?!1:t.returnSequences,this.returnState=t.returnState==null?!1:t.returnState,this.goBackwards=t.goBackwards==null?!1:t.goBackwards,this._stateful=t.stateful==null?!1:t.stateful,this.unroll=t.unroll==null?!1:t.unroll,this.supportsMasking=!0,this.inputSpec=[new Vi({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Xa(0,t).map(e=>null)}else return this.states_}setStates(t){this.states_=t}computeOutputShape(t){vv(t)&&(t=t[0]),t=t;let e=this.cell.stateSize;Array.isArray(e)||(e=[e]);const s=e[0];let i;if(this.returnSequences?i=[t[0],t[1],s]:i=[t[0],s],this.returnState){const r=[];for(const o of e)r.push([t[0],o]);return[i].concat(r)}else return i}computeMask(t,e){return he(()=>{Array.isArray(e)&&(e=e[0]);const s=this.returnSequences?e:null;if(this.returnState){const i=this.states.map(r=>null);return[s].concat(i)}else return s})}get states(){if(this.states_==null){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,e=[];for(let s=0;s<t;++s)e.push(null);return e}else return this.states_}set states(t){this.states_=t}build(t){if(this.numConstants!=null)throw new os("Constants support is not implemented in RNN yet.");vv(t)&&(t=t[0]),t=t;const e=this.stateful?t[0]:null,s=t.slice(2);this.inputSpec[0]=new Vi({shape:[e,null,...s]});const i=[t[0]].concat(t.slice(2));this.cell.build(i);let r;if(Array.isArray(this.cell.stateSize)?r=this.cell.stateSize:r=[this.cell.stateSize],this.stateSpec!=null){if(!zs(this.stateSpec.map(o=>o.shape[o.shape.length-1]),r))throw new Yt(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=r.map(o=>new Vi({shape:[null,o]}));this.stateful&&this.resetStates()}resetStates(t,e=!1){he(()=>{if(!this.stateful)throw new hl("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape[0];if(s==null)throw new Yt("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>Zi([s,i])):this.states_=[Zi([s,this.cell.stateSize])];else if(t==null)bs(this.states_),this.keptStates!=null&&(bs(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>Zi([s,i])):this.states_[0]=Zi([s,this.cell.stateSize]);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new Yt(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);e===!0?this.keptStates.push(this.states_.slice()):bs(this.states_);for(let i=0;i<this.states_.length;++i){const r=t[i],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,a=[s,o];if(!zs(r.shape,a))throw new Yt(`State ${i} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${r.shape}`);this.states_[i]=r}}this.states_=this.states_.map(i=>bl(i.clone()))})}apply(t,e){let s=e==null?null:e.initialState,i=e==null?null:e.constants;e==null&&(e={});const r=$_(t,s,i,this.numConstants);t=r.inputs,s=r.initialState,i=r.constants;let o=[],a=[];if(s!=null){e.initialState=s,o=o.concat(s),this.stateSpec=[];for(const u of s)this.stateSpec.push(new Vi({shape:u.shape}));a=a.concat(this.stateSpec)}if(i!=null&&(e.constants=i,o=o.concat(i),this.numConstants=i.length),o[0]instanceof Tl){const u=[t].concat(o),h=this.inputSpec.concat(a),f=this.inputSpec;this.inputSpec=h;const g=super.apply(u,e);return this.inputSpec=f,g}else return super.apply(t,e)}call(t,e){return he(()=>{const s=e==null?null:e.mask,i=e==null?null:e.training;let r=e==null?null:e.initialState;t=Hn(t),r==null&&(this.stateful?r=this.states_:r=this.getInitialState(t));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(r.length!==o)throw new Yt(`RNN Layer has ${o} state(s) but was passed ${r.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:i},u=N_((y,k)=>{const C=this.cell.call([y].concat(k),a);return[C[0],C.slice(1)]},t,r,this.goBackwards,s,null,this.unroll,this.returnSequences),h=u[0],f=u[1],g=u[2];this.stateful&&this.resetStates(g,i);const m=this.returnSequences?f:h;return this.returnState?[m].concat(g):m})}getInitialState(t){return he(()=>{let e=Zi(t.shape);return e=Rn(e,[1,2]),e=K0(e),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(s=>s>1?xv(e,[1,s]):e):this.cell.stateSize>1?[xv(e,[1,this.cell.stateSize])]:[e]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(t)}getConfig(){const t=super.getConfig(),e={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(e.numConstants=this.numConstants);const s=this.cell.getConfig();return this.getClassName()===pu.className&&(e.cell={className:this.cell.getClassName(),config:s}),Object.assign(Object.assign(Object.assign({},s),t),e)}static fromConfig(t,e,s={}){const i=e.cell,r=sc(i,s);return new t(Object.assign(e,{cell:r}))}}pu.className="RNN";Fe(pu);class G2 extends fs{}class a3 extends G2{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,Ji(this.units,"units"),this.activation=iu(t.activation==null?this.DEFAULT_ACTIVATION:t.activation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=hi(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=hi(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=hi(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=fi(t.kernelRegularizer),this.recurrentRegularizer=fi(t.recurrentRegularizer),this.biasRegularizer=fi(t.biasRegularizer),this.kernelConstraint=Gi(t.kernelConstraint),this.recurrentConstraint=Gi(t.recurrentConstraint),this.biasConstraint=Gi(t.biasConstraint),this.dropout=Hd([1,nu([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=Hd([1,nu([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=Ds(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,e){return he(()=>{if(t=t,t.length!==2)throw new Yt(`SimpleRNNCell expects 2 input Tensors, got ${t.length}.`);let s=t[1];t=t[0];const i=e.training==null?!1:e.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ru({ones:()=>pa(t),rate:this.dropout,training:i,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ru({ones:()=>pa(s),rate:this.recurrentDropout,training:i,dropoutFunc:this.dropoutFunc}));let r;const o=this.dropoutMask,a=this.recurrentDropoutMask;o!=null?r=wl(Jt(t,o),this.kernel.read()):r=wl(t,this.kernel.read()),this.bias!=null&&(r=Ja(r,this.bias.read())),a!=null&&(s=Jt(s,a));let l=Be(r,wl(s,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const t=super.getConfig(),e={units:this.units,activation:su(this.activation),useBias:this.useBias,kernelInitializer:mi(this.kernelInitializer),recurrentInitializer:mi(this.recurrentInitializer),biasInitializer:mi(this.biasInitializer),kernelRegularizer:ti(this.kernelRegularizer),recurrentRegularizer:ti(this.recurrentRegularizer),biasRegularizer:ti(this.biasRegularizer),activityRegularizer:ti(this.activityRegularizer),kernelConstraint:Ui(this.kernelConstraint),recurrentConstraint:Ui(this.recurrentConstraint),biasConstraint:Ui(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},t),e)}}a3.className="SimpleRNNCell";Fe(a3);class D_ extends pu{constructor(t){t.cell=new a3(t),super(t)}call(t,e){return he(()=>{this.cell.dropoutMask!=null&&(bs(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(bs(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=e==null?null:e.mask,i=e==null?null:e.training,r=e==null?null:e.initialState;return super.call(t,{mask:s,training:i,initialState:r})})}static fromConfig(t,e){return new t(e)}}D_.className="SimpleRNN";Fe(D_);class l3 extends G2{constructor(t){if(super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.resetAfter)throw new Yt("GRUCell does not support reset_after parameter set to true.");this.units=t.units,Ji(this.units,"units"),this.activation=iu(t.activation===void 0?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=iu(t.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=hi(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=hi(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=hi(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=fi(t.kernelRegularizer),this.recurrentRegularizer=fi(t.recurrentRegularizer),this.biasRegularizer=fi(t.biasRegularizer),this.kernelConstraint=Gi(t.kernelConstraint),this.recurrentConstraint=Gi(t.recurrentConstraint),this.biasConstraint=Gi(t.biasConstraint),this.dropout=Hd([1,nu([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=Hd([1,nu([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=Ds(t);const e=t[t.length-1];this.kernel=this.addWeight("kernel",[e,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,e){return he(()=>{if(t=t,t.length!==2)throw new Yt(`GRUCell expects 2 input Tensors (inputs, h, c), got ${t.length}.`);const s=e.training==null?!1:e.training;let i=t[1];t=t[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ru({ones:()=>pa(t),rate:this.dropout,training:s,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ru({ones:()=>pa(i),rate:this.recurrentDropout,training:s,count:3,dropoutFunc:this.dropoutFunc}));const r=this.dropoutMask,o=this.recurrentDropoutMask;let a,l,u;0<this.dropout&&this.dropout<1&&(t=Jt(t,r[0]));let h=wl(t,this.kernel.read());this.useBias&&(h=Ja(h,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=Jt(i,o[0]));const f=this.recurrentKernel.read(),[g,m]=jo(f,[2*this.units,this.units],f.rank-1),y=wl(i,g),[k,C,S]=jo(h,3,h.rank-1),[$,D]=jo(y,2,y.rank-1);a=this.recurrentActivation.apply(Be(k,$)),l=this.recurrentActivation.apply(Be(C,D));const R=wl(Jt(l,i),m);u=this.activation.apply(Be(S,R));const V=Be(Jt(a,i),Jt(Be(1,Ii(a)),u));return[V,V]})}getConfig(){const t=super.getConfig(),e={units:this.units,activation:su(this.activation),recurrentActivation:su(this.recurrentActivation),useBias:this.useBias,kernelInitializer:mi(this.kernelInitializer),recurrentInitializer:mi(this.recurrentInitializer),biasInitializer:mi(this.biasInitializer),kernelRegularizer:ti(this.kernelRegularizer),recurrentRegularizer:ti(this.recurrentRegularizer),biasRegularizer:ti(this.biasRegularizer),activityRegularizer:ti(this.activityRegularizer),kernelConstraint:Ui(this.kernelConstraint),recurrentConstraint:Ui(this.recurrentConstraint),biasConstraint:Ui(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},t),e)}}l3.className="GRUCell";Fe(l3);class R_ extends pu{constructor(t){t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new l3(t),super(t)}call(t,e){return he(()=>{this.cell.dropoutMask!=null&&(bs(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(bs(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=e==null?null:e.mask,i=e==null?null:e.training,r=e==null?null:e.initialState;return super.call(t,{mask:s,training:i,initialState:r})})}static fromConfig(t,e){return e.implmentation===0&&(e.implementation=1),new t(e)}}R_.className="GRU";Fe(R_);class H2 extends G2{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,Ji(this.units,"units"),this.activation=iu(t.activation===void 0?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=iu(t.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=hi(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=hi(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=hi(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=t.unitForgetBias,this.kernelRegularizer=fi(t.kernelRegularizer),this.recurrentRegularizer=fi(t.recurrentRegularizer),this.biasRegularizer=fi(t.biasRegularizer),this.kernelConstraint=Gi(t.kernelConstraint),this.recurrentConstraint=Gi(t.recurrentConstraint),this.biasConstraint=Gi(t.biasConstraint),this.dropout=Hd([1,nu([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=Hd([1,nu([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){var e;t=Ds(t);const s=t[t.length-1];this.kernel=this.addWeight("kernel",[s,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){const r=this.biasInitializer,o=this.units;i=new(e=class extends ma{apply(l,u){const h=r.apply([o]),f=new qw().apply([o]),g=r.apply([o*2]);return xC(xC(h,f),g)}},e.className="CustomInit",e)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(t,e){return he(()=>{const s=e.training==null?!1:e.training;if(t=t,t.length!==3)throw new Yt(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);let i=t[1];const r=t[2];t=t[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ru({ones:()=>pa(t),rate:this.dropout,training:s,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ru({ones:()=>pa(i),rate:this.recurrentDropout,training:s,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;let l,u,h,f;0<this.dropout&&this.dropout<1&&(t=Jt(t,o[0]));let g=wl(t,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=Jt(i,a[0])),g=Be(g,wl(i,this.recurrentKernel.read())),this.useBias&&(g=Ja(g,this.bias.read()));const[m,y,k,C]=jo(g,4,g.rank-1);l=this.recurrentActivation.apply(m),u=this.recurrentActivation.apply(y),h=Be(Jt(u,r),Jt(l,this.activation.apply(k))),f=this.recurrentActivation.apply(C);const S=Jt(f,this.activation.apply(h));return[S,S,h]})}getConfig(){const t=super.getConfig(),e={units:this.units,activation:su(this.activation),recurrentActivation:su(this.recurrentActivation),useBias:this.useBias,kernelInitializer:mi(this.kernelInitializer),recurrentInitializer:mi(this.recurrentInitializer),biasInitializer:mi(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:ti(this.kernelRegularizer),recurrentRegularizer:ti(this.recurrentRegularizer),biasRegularizer:ti(this.biasRegularizer),activityRegularizer:ti(this.activityRegularizer),kernelConstraint:Ui(this.kernelConstraint),recurrentConstraint:Ui(this.recurrentConstraint),biasConstraint:Ui(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},t),e)}}H2.className="LSTMCell";Fe(H2);class M_ extends pu{constructor(t){t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new H2(t),super(t)}call(t,e){return he(()=>{this.cell.dropoutMask!=null&&(bs(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(bs(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=e==null?null:e.mask,i=e==null?null:e.training,r=e==null?null:e.initialState;return super.call(t,{mask:s,training:i,initialState:r})})}static fromConfig(t,e){return e.implmentation===0&&(e.implementation=1),new t(e)}}M_.className="LSTM";Fe(M_);class c3 extends G2{constructor(t){super(t),this.cells=t.cells}get stateSize(){const t=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?t.push(...e.stateSize):t.push(e.stateSize);return t}call(t,e){return he(()=>{t=t;let s=t.slice(1);const i=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?i.push(s.splice(0,a.stateSize.length)):i.push(s.splice(0,1));i.reverse();const r=[];let o;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];s=i[a],a===0?o=[t[0]].concat(s):o=[o[0]].concat(s),o=l.call(o,e),r.push(o.slice(1))}s=[];for(const a of r.slice().reverse())s.push(...a);return[o[0]].concat(s)})}build(t){vv(t)&&(t=t[0]),t=t;let e;this.cells.forEach((s,i)=>{ph(`RNNCell_${i}`,()=>{s.build(t),Array.isArray(s.stateSize)?e=s.stateSize[0]:e=s.stateSize,t=[t[0],e]})}),this.built=!0}getConfig(){const t=super.getConfig(),e=r=>({className:r.getClassName(),config:r.getConfig()}),i={cells:this.cells.map(e)};return Object.assign(Object.assign({},t),i)}static fromConfig(t,e,s={}){const i=[];for(const r of e.cells)i.push(sc(r,s));return new t({cells:i})}get trainableWeights(){if(!this.trainable)return[];const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const e of this.cells)t.push(...e.nonTrainableWeights);if(!this.trainable){const e=[];for(const s of this.cells)e.push(...s.trainableWeights);return e.concat(t)}return t}getWeights(){const t=[];for(const e of this.cells)t.push(...e.weights);return yv(t)}setWeights(t){const e=[];for(const s of this.cells){const i=s.weights.length,r=t.splice(i);for(let o=0;o<s.weights.length;++o)e.push([s.weights[o],r[o]])}e3(e)}}c3.className="StackedRNNCells";Fe(c3);function ru(n){const{ones:t,rate:e,training:s=!1,count:i=1,dropoutFunc:r}=n,o=()=>r!=null?r(t(),e):SE(t(),e),a=()=>Z0(o,t,s);return!i||i<=1?bl(a().clone()):Array(i).fill(void 0).map(a).map(u=>bl(u.clone()))}var HH=function(n,t){var e={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&t.indexOf(s)<0&&(e[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(e[s[i]]=n[s[i]]);return e};class O_ extends pu{constructor(t){if(t.unroll)throw new os("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(t.cell))throw new os("It is not possible at the moment to stack convolutional cells.");super(t),this.inputSpec=[new Vi({ndim:5})]}call(t,e){return he(()=>{if(this.cell.dropoutMask!=null&&(bs(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(bs(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),e&&e.constants)throw new Yt("ConvRNN2D cell does not support constants");const s=e==null?null:e.mask,i=e==null?null:e.training,r=e==null?null:e.initialState;return super.call(t,{mask:s,training:i,initialState:r})})}computeOutputShape(t){let e=this.computeSingleOutputShape(t);return this.returnSequences||(e=[e[0],...e.slice(2)]),this.returnState&&(e=[e,...Array(2).fill([t[0],...e.slice(-3)])]),e}getInitialState(t){return he(()=>{const{stateSize:e}=this.cell,s=t.shape,i=this.computeSingleOutputShape(s),r=[i[0],...i.slice(2)],o=Zi(r);return Array.isArray(e)?Array(e.length).fill(o):[o]})}resetStates(t,e=!1){he(()=>{if(!this.stateful)throw new hl("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape,i=this.computeSingleOutputShape(s),r=[i[0],...i.slice(2)];if(s[0]==null)throw new Yt("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Zi(r)):this.states_=[Zi(r)];else if(t==null)bs(this.states_),this.keptStates!=null&&(bs(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Zi(r)):this.states_[0]=Zi(r);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new Yt(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);e?this.keptStates.push(this.states_.slice()):bs(this.states_);for(let a=0;a<this.states_.length;++a){const l=t[a],u=r;if(!zs(l.shape,u))throw new Yt(`State ${a} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>bl(a.clone()))})}computeSingleOutputShape(t){const{dataFormat:e,filters:s,kernelSize:i,padding:r,strides:o,dilationRate:a}=this.cell,l=e==="channelsFirst",u=t[l?3:2],h=t[l?4:3],f=ja(u,i[0],r,o[0],a[0]),g=ja(h,i[1],r,o[1],a[1]);return[...t.slice(0,2),...l?[s,f,g]:[f,g,s]]}}O_.className="ConvRNN2D";class u3 extends H2{constructor(t){const{filters:e,kernelSize:s,strides:i,padding:r,dataFormat:o,dilationRate:a}=t;super(Object.assign(Object.assign({},t),{units:e})),this.filters=e,Ji(this.filters,"filters"),this.kernelSize=Md(s,2,"kernelSize"),this.kernelSize.forEach(l=>Ji(l,"kernelSize")),this.strides=Md(i||1,2,"strides"),this.strides.forEach(l=>Ji(l,"strides")),this.padding=r||"valid",Ko(this.padding),this.dataFormat=o||"channelsLast",Ai(this.dataFormat),this.dilationRate=Md(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>Ji(l,"dilationRate"))}build(t){var e;t=Ds(t);const s=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[s]==null)throw new Yt(`The channel dimension of the input should be defined. Found ${t[s]}`);const i=t[s],r=4,o=this.kernelSize.concat([i,this.filters*r]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*r]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const u=this.biasInitializer,h=this.filters;l=new(e=class extends ma{apply(g,m){const y=u.apply([h]),k=du([h]),C=u.apply([h*2]);return Xw([y,k,C])}},e.className="CustomInit",e)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*r],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(t,e){return he(()=>{if(t.length!==3)throw new Yt(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);const s=e.training||!1,i=t[0],r=t[1],o=t[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ru({ones:()=>pa(i),rate:this.dropout,training:s,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,u=(Gt,vt,at)=>!vt||!vt[at]?Gt:Jt(vt[at],Gt);let h=u(i,l,0),f=u(i,l,1),g=u(i,l,2),m=u(i,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ru({ones:()=>pa(r),rate:this.recurrentDropout,training:s,count:a,dropoutFunc:this.dropoutFunc}));const y=this.recurrentDropoutMask;let k=u(r,y,0),C=u(r,y,1),S=u(r,y,2),$=u(r,y,3);const D=3,[R,V,E,q]=jo(this.kernel.read(),a,D),[X,B,U,K]=this.useBias?jo(this.bias.read(),a):[null,null,null,null];h=this.inputConv(h,R,X,this.padding),f=this.inputConv(f,V,B,this.padding),g=this.inputConv(g,E,U,this.padding),m=this.inputConv(m,q,K,this.padding);const[Y,ct,j,ht]=jo(this.recurrentKernel.read(),a,D);k=this.recurrentConv(k,Y),C=this.recurrentConv(C,ct),S=this.recurrentConv(S,j),$=this.recurrentConv($,ht);const It=this.recurrentActivation.apply(Be(h,k)),yt=this.recurrentActivation.apply(Be(f,C)),Ot=Be(Jt(yt,o),Jt(It,this.activation.apply(Be(g,S)))),Ct=Jt(this.recurrentActivation.apply(Be(m,$)),this.activation.apply(Ot));return[Ct,Ct,Ot]})}getConfig(){const t=super.getConfig(),{units:e}=t,s=HH(t,["units"]),i={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},s),i)}inputConv(t,e,s,i){const r=Ih(t,e,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return s?Ja(r,s,this.dataFormat):r}recurrentConv(t,e){return Ih(t,e,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}u3.className="ConvLSTM2DCell";Fe(u3);class F_ extends O_{constructor(t){const e=new u3(t);super(Object.assign(Object.assign({},t),{cell:e}))}static fromConfig(t,e){return new t(e)}}F_.className="ConvLSTM2D";Fe(F_);class h3 extends fs{constructor(t){super(t),this.rate=Math.max(Math.min(t.rate,1),0),this.noiseShape=t.noiseShape,this.seed=t.seed,this.supportsMasking=!0}getNoiseShape(t){if(this.noiseShape==null)return this.noiseShape;const e=t.shape,s=[];for(let i=0;i<this.noiseShape.length;++i)s.push(this.noiseShape[i]==null?e[i]:this.noiseShape[i]);return s}call(t,e){return he(()=>{this.invokeCallHook(t,e);const s=Hn(t);if(0<this.rate&&this.rate<1){const i=e.training==null?!1:e.training,r=this.getNoiseShape(s);return Z0(()=>SE(s,this.rate,r,this.seed),()=>s,i)}return t})}getConfig(){const t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},e=super.getConfig();return Object.assign(t,e),t}dispose(){return super.dispose()}}h3.className="Dropout";Fe(h3);class P_ extends h3{constructor(t){super(t),this.inputSpec=[{ndim:3}]}getNoiseShape(t){const e=t.shape;return[e[0],1,e[2]]}}P_.className="SpatialDropout1D";Fe(P_);class L_ extends fs{constructor(t){if(super(t),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.batchInputShape==null&&t.inputShape==null&&t.inputDim!=null){let e=null;t.batchSize!=null&&(e=t.batchSize),this.batchInputShape=[e,t.inputDim]}this.units=t.units,Ji(this.units,"units"),this.activation=iu(t.activation),t.useBias!=null&&(this.useBias=t.useBias),this.kernelInitializer=hi(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=hi(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Gi(t.kernelConstraint),this.biasConstraint=Gi(t.biasConstraint),this.kernelRegularizer=fi(t.kernelRegularizer),this.biasRegularizer=fi(t.biasRegularizer),this.activityRegularizer=fi(t.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(t){t=Ds(t);const e=t[t.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[e,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:e}}],this.built=!0}computeOutputShape(t){t=Ds(t);const e=t.slice();return e[e.length-1]=this.units,e}call(t,e){return he(()=>{this.invokeCallHook(t,e);const s=Hn(t),i=xE(this.activation.getClassName());let r;return i!=null?r=wl(s,this.kernel.read(),i,this.bias?this.bias.read():null):(r=wl(s,this.kernel.read()),this.bias!=null&&(r=Ja(r,this.bias.read())),this.activation!=null&&(r=this.activation.apply(r))),r})}getConfig(){const t={units:this.units,activation:su(this.activation),useBias:this.useBias,kernelInitializer:mi(this.kernelInitializer),biasInitializer:mi(this.biasInitializer),kernelRegularizer:ti(this.kernelRegularizer),biasRegularizer:ti(this.biasRegularizer),activityRegularizer:ti(this.activityRegularizer),kernelConstraint:Ui(this.kernelConstraint),biasConstraint:Ui(this.biasConstraint)},e=super.getConfig();return Object.assign(t,e),t}}L_.className="Dense";Fe(L_);class d3 extends fs{constructor(t){t=t||{},super(t),this.inputSpec=[{minNDim:3}],this.dataFormat=t.dataFormat}computeOutputShape(t){t=Ds(t);for(const e of t.slice(1))if(e==null)throw new Yt(`The shape of the input to "Flatten" is not fully defined (got ${t.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[t[0],Jc(t,1)]}call(t,e){return he(()=>{this.invokeCallHook(t,e);let s=Hn(t);if(this.dataFormat==="channelsFirst"&&s.rank>1){const i=[0];for(let r=2;r<s.rank;++r)i.push(r);i.push(1),s=Es(s,i)}return TG(s)})}getConfig(){const t={};this.dataFormat!=null&&(t.dataFormat=this.dataFormat);const e=super.getConfig();return Object.assign(t,e),t}}d3.className="Flatten";Fe(d3);class B_ extends fs{constructor(t){super(t),this.supportsMasking=!0,this.activation=iu(t.activation)}call(t,e){return he(()=>{this.invokeCallHook(t,e);const s=Hn(t);return this.activation.apply(s)})}getConfig(){const t={activation:su(this.activation)},e=super.getConfig();return Object.assign(t,e),t}}B_.className="Activation";Fe(B_);class z_ extends fs{constructor(t){super(t),this.n=t.n,this.inputSpec=[{ndim:2}]}computeOutputShape(t){return[t[0],this.n,t[1]]}call(t,e){return he(()=>(t=Hn(t),CG(t,this.n)))}getConfig(){const t={n:this.n},e=super.getConfig();return Object.assign(t,e),t}}z_.className="RepeatVector";Fe(z_);class W_ extends fs{constructor(t){super(t),this.targetShape=t.targetShape;for(let e=0;e<this.targetShape.length;++e)this.isUnknown(this.targetShape[e])&&(this.targetShape[e]=null)}isUnknown(t){return t<0||t==null}fixUnknownDimension(t,e){const s="Total size of new array must be unchanged.",i=e.slice();let r=1,o=null;for(let l=0;l<i.length;++l){const u=i[l];if(this.isUnknown(u))if(o===null)o=l;else throw new Yt("Can only specifiy one unknown dimension.");else r*=u}const a=Jc(t);if(o!==null){if(r===0||a%r!==0)throw new Yt(s);i[o]=a/r}else if(a!==r)throw new Yt(s);return i}computeOutputShape(t){let e=!1;for(let s=0;s<t.length;++s)if(this.isUnknown(t[s])){e=!0;break}return e?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))}call(t,e){return he(()=>{this.invokeCallHook(t,e);const s=Hn(t),i=s.shape,r=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return ne(s,r)})}getConfig(){const t={targetShape:this.targetShape},e=super.getConfig();return Object.assign(t,e),t}}W_.className="Reshape";Fe(W_);class V_ extends fs{constructor(t){if(super(t),t.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${t.dims} instead.`);const e=Xa(1,t.dims.length+1);if(!zs(t.dims.slice().sort(),e))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=t.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Vi({ndim:this.dims.length+1})]}computeOutputShape(t){t=Ds(t);const e=t.slice();return this.dims.forEach((s,i)=>{e[i+1]=t[s]}),e}call(t,e){return Es(Hn(t),this.dimsIncludingBatch)}getConfig(){const t={dims:this.dims},e=super.getConfig();return Object.assign(t,e),t}}V_.className="Permute";Fe(V_);class U_ extends fs{constructor(t){super(t??{}),this.supportsMasking=!0,t!=null?this.maskValue=t.maskValue==null?0:t.maskValue:this.maskValue=0}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={maskValue:this.maskValue};return Object.assign(e,t),e}computeMask(t,e){const s=Hn(t);return uv(Xm(s,this.maskValue),-1)}call(t,e){return he(()=>{this.invokeCallHook(t,e);const s=Hn(t),o=uv(Xm(s,this.maskValue),-1,!0);return Jt(s,rn(o,s.dtype))})}}U_.className="Masking";Fe(U_);class f3 extends fs{constructor(t){if(super(t),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",t.batchInputShape==null&&t.inputShape==null){let e=null;t.batchSize!=null&&(e=t.batchSize),t.inputLength==null?this.batchInputShape=[e,null]:this.batchInputShape=[e].concat(js(t.inputLength))}this.inputDim=t.inputDim,Ji(this.inputDim,"inputDim"),this.outputDim=t.outputDim,Ji(this.outputDim,"outputDim"),this.embeddingsInitializer=hi(t.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=fi(t.embeddingsRegularizer),this.activityRegularizer=fi(t.activityRegularizer),this.embeddingsConstraint=Gi(t.embeddingsConstraint),this.maskZero=t.maskZero,this.supportsMasking=t.maskZero,this.inputLength=t.inputLength}build(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(t){}computeMask(t,e){return he(()=>this.maskZero?(t=Hn(t),Xm(t,As(t))):null)}computeOutputShape(t){if(t=Ds(t),this.inputLength==null)return[...t,this.outputDim];const e=js(this.inputLength);if(e.length!==t.length-1)throw new Yt(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);{let s=0;for(let i=0;i<e.length;++i){const r=e[i],o=t[i+1];if(r!=null&&o!=null&&r!==o)throw new Yt(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);r==null&&(e[s]=o),s++}}return[t[0],...e,this.outputDim]}call(t,e){return he(()=>{this.invokeCallHook(t,e);let s=Hn(t);s.dtype!=="int32"&&(s=yl(s,"int32"));const i=CE(this.embeddings.read(),ne(s,[s.size]));return ne(i,Ds(this.computeOutputShape(s.shape)))})}getConfig(){const t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:mi(this.embeddingsInitializer),embeddingsRegularizer:ti(this.embeddingsRegularizer),activityRegularizer:ti(this.activityRegularizer),embeddingsConstraint:Ui(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},e=super.getConfig();return Object.assign(t,e),t}}f3.className="Embedding";Fe(f3);class Wh extends fs{constructor(t){super(t||{}),this.supportsMasking=!0}mergeFunction(t){throw new os}computeElementwiseOpOutputShape(t,e){if(t==null||e==null)return null;if(t.length<e.length)return this.computeElementwiseOpOutputShape(e,t);if(e.length===0)return t;const s=t.slice(0,t.length-e.length);for(let i=0;i<e.length;++i){const r=t[t.length-e.length+i],o=e[i];if(r==null||o==null||r<0||o<0)s.push(null);else if(r===1)s.push(o);else if(o===1)s.push(r);else{if(r!==o)throw new Yt("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(e));s.push(r)}}return s}build(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[Ds(t)]),t=t,t.length<2)throw new Yt(`A merge layer should be called on an Array of at least 2 inputs. Got ${t.length} input(s).`);let e=[];for(const r of t)r!=null&&r[0]!==null&&e.push(r[0]);if(e=Zc(e),e.length>1)throw new Yt(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(t)}.`);let s=t[0]==null?null:t[0].slice(1);for(let r=1;r<t.length;++r){const o=t[r]==null?null:t[r].slice(1);s=this.computeElementwiseOpOutputShape(s,o)}const i=t.map(r=>r.length);t.indexOf(null)===-1&&Zc(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(t,e){return he(()=>{if(t=t,this.reshapeRequired){const s=[],i=t.map(r=>r.rank);if(i.indexOf(null)===-1){const r=nu(i);for(let o of t){const a=o.rank;for(let l=0;l<r-a;++l)o=K0(o,1);s.push(o)}return this.mergeFunction(s)}else{let r=!1;for(const l of t){const u=l.rank;if(u==null){const h=l.shape,f=h[0],g=h.slice(1).concat([f]);let m=ne(l,[f].concat(Jc(h.slice(1))));m=Es(m,[1,0]),m=ne(m,g),s.push(m),r=!0}else if(u>1){const h=Xa(1,u).concat([0]);s.push(Es(l,h)),r=!0}else s.push(l)}let o=this.mergeFunction(s);const a=o.rank;if(r){if(a==null){const l=o.shape,u=l.length,h=l[u-1],f=[h].concat(l.slice(0,l.length-1));o=ne(Es(ne(o,[-1,h]),[1,0]),f)}else if(a>1){const l=[a-1].concat(Xa(0,a-1));o=Es(o,l)}}return o}}else return this.mergeFunction(t)})}computeOutputShape(t){t=t;let e;t[0]==null?e=null:e=t[0].slice(1);for(let i=1;i<t.length;++i){const r=t[i]==null?null:t[i].slice(1);e=this.computeElementwiseOpOutputShape(e,r)}let s=[];for(const i of t)i!=null&&i[0]!==null&&s.push(i[0]);return s=Zc(s),s.length===1?e=s.concat(e):e=[null].concat(e),e}computeMask(t,e){return he(()=>{if(e==null)return null;if(!Array.isArray(e))throw new Yt("`mask` should be an Array");if(!Array.isArray(t))throw new Yt("`inputs` should be an Array");if(e.length!==t.length)throw new Yt(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${t.length} vs ${e.length})`);if(e.every(i=>i==null))return null;e=e.map(i=>i==null?i:to(i,0));let s=e[0];for(let i=1;i<e.length-1;++i)s=rc(s,e[i]);return s})}}class G_ extends Wh{constructor(t){super(t)}mergeFunction(t){return he(()=>{let e=t[0].clone();for(let s=1;s<t.length;++s)e=Be(e,t[s]);return e})}}G_.className="Add";Fe(G_);class H_ extends Wh{constructor(t){super(t)}mergeFunction(t){return he(()=>{let e=t[0].clone();for(let s=1;s<t.length;++s)e=Jt(e,t[s]);return e})}}H_.className="Multiply";Fe(H_);class j_ extends Wh{constructor(t){super(t)}mergeFunction(t){return he(()=>{let e=t[0].clone();for(let s=1;s<t.length;++s)e=Be(e,t[s]);return Jt(1/t.length,e)})}}j_.className="Average";Fe(j_);class X_ extends Wh{constructor(t){super(t)}mergeFunction(t){return he(()=>{let e=t[0];for(let s=1;s<t.length;++s)e=hu(e,t[s]);return e})}}X_.className="Maximum";Fe(X_);class q_ extends Wh{constructor(t){super(t)}mergeFunction(t){return he(()=>{let e=t[0];for(let s=1;s<t.length;++s)e=Ip(e,t[s]);return e})}}q_.className="Minimum";Fe(q_);class K_ extends Wh{constructor(t){super(t),this.DEFAULT_AXIS=-1,t==null&&(t={}),this.axis=t.axis==null?this.DEFAULT_AXIS:t.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){if(!(Array.isArray(t)&&Array.isArray(t[0]))||t.length===1)throw new Yt("A `Concatenate` layer should be called on a list of at least 2 inputs");t=t;let e=!0;for(const i of t)if(i!=null){e=!1;break}if(e)return;const s=[];for(let i=0;i<t.length;++i){const r=t[i].slice();r.splice(this.axis,1);let o=!1;for(const a of s)if(zs(a,r)){o=!0;break}o||s.push(r)}if(s.length>1)throw new Yt("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}mergeFunction(t){return he(()=>Xw(t,this.axis))}computeOutputShape(t){if(!(Array.isArray(t)&&Array.isArray(t[0])))throw new Yt("A `Concatenate` layer should be called on a list of inputs.");const e=t,s=e[0].slice(),i=this.axis<0?s.length+this.axis:this.axis;for(const r of e.slice(1)){if(s[i]==null||r[i]==null){s[i]=null;break}s[i]+=r[i]}return s}computeMask(t,e){if(e==null)return null;if(!Array.isArray(e))throw new Yt("`mask` should be an array for Concatenate");if(!Array.isArray(t))throw new Yt("`inputs` should be an array for Concatenate");if(e.length!==t.length)throw new Yt(`Mismatch in the length of mask (${e.length}) and the legnth of inputs (${t.length})`);return he(()=>{let s=!0;if(e.forEach(o=>{if(o!=null){s=!1;return}}),s)return null;const i=[];for(let o=0;o<t.length;++o)e[o]==null?i.push(rn(pa(t[o]),"bool")):e[o].rank<t[o].rank?i.push(to(e[o],-1)):i.push(e[o]);const r=so(i,this.axis);return n5(r,-1,!1)})}getConfig(){const t={axis:this.axis},e=super.getConfig();return Object.assign(t,e),t}}K_.className="Concatenate";Fe(K_);function op(n,t){for(;n<0;)n+=t;return n}function jH(n,t,e){if(n.shape.length>3||t.shape.length>3)throw new os("batchDot is not implemented for tensors of 4D or higher rank yet");if(wt(n.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${n.shape.length}`),wt(n.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`),typeof e=="number"&&(e=[e,e]),n.dtype==="complex64"||t.dtype==="complex64")throw new os("batchDot is not implemented for complex64-type Tensors yet.");const s=n.shape.length,i=t.shape.length;e==null&&(e=[s-1,i-2]);const r=e;return he(()=>{let o;if(s>i){o=s-i;const l=[];for(let u=0;u<o;++u)l.push(1);t=ne(t,t.shape.concat(l))}else if(i>s){o=i-s;const l=[];for(let u=0;u<o;++u)l.push(1);n=ne(n,n.shape.concat(l))}else o=0;let a;if(n.shape.length===2&&t.shape.length===2)r[0]===r[1]?a=Rn(Jt(n,t),r[0]):a=Rn(Jt(Es(n,[1,0]),t),r[1]);else{const l=r[0]!==n.shape.length-1,u=r[1]===t.shape.length-1;a=Ls(n,t,l,u)}if(o>0){let l;s>i?l=s+i-3:l=s-1;const u=[];for(let h=l;h<l+o;++h)u.push(h);a=U0(a,u)}return a.shape.length===1&&(a=to(a,1)),a})}class p3 extends Wh{constructor(t){super(t),this.axes=t.axes,this.normalize=t.normalize==null?!1:t.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){wt(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const e=t[0],s=t[1];if(e.length>3||s.length>3)throw new os("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(e,s);if(e[i[0]]!==s[i[1]])throw new Yt(`Dimension incompatibility: ${e[i[0]]} !== ${s[i[1]]}`)}mergeFunction(t){if(t.length!==2)throw new Yt(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${t.length} input(s).`);let e=t[0],s=t[1],i;return Array.isArray(this.axes)?i=this.axes.map((r,o)=>op(r,t[o].shape.length)):i=[op(this.axes,e.shape.length),op(this.axes,s.shape.length)],this.normalize&&(e=t1(e,i[0]),s=t1(s,i[1])),jH(e,s,i)}interpretAxes(t,e){let s;return Array.isArray(this.axes)?s=this.axes:s=[op(this.axes,t.length),op(this.axes,e.length)],s}computeOutputShape(t){wt(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const e=t[0].slice(),s=t[1].slice();if(e.length>3||s.length>3)throw new os("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(e,s);e.splice(i[0],1),s.splice(i[1],1),s.splice(0,1);const r=e.concat(s);return r.length===1&&r.push(1),r}computeMask(t,e){return null}getConfig(){const t={axes:this.axes,normalize:this.normalize},e=super.getConfig();return Object.assign(t,e),t}}p3.className="Dot";Fe(p3);class Y_ extends fs{constructor(t){super(t),this.supportsMasking=!0,this.stddev=t.stddev}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={stddev:this.stddev};return Object.assign(e,t),e}call(t,e){return he(()=>{this.invokeCallHook(t,e);const s=Hn(t);return Z0(()=>Be(L2(s.shape,0,this.stddev),s),()=>s,e.training||!1)})}}Y_.className="GaussianNoise";Fe(Y_);class Z_ extends fs{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={rate:this.rate};return Object.assign(e,t),e}call(t,e){return he(()=>{this.invokeCallHook(t,e);const s=Hn(t);return this.rate>0&&this.rate<1?Z0(()=>{const r=Math.sqrt(this.rate/(1-this.rate));return Jt(s,L2(s.shape,1,r))},()=>s,e.training||!1):s})}}Z_.className="GaussianDropout";Fe(Z_);class J_ extends fs{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate,this.noiseShape=t.noiseShape}_getNoiseShape(t){return this.noiseShape||Hn(t).shape}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={rate:this.rate};return Object.assign(e,t),e}call(t,e){return he(()=>{if(this.rate<1&&this.rate>0){const s=this._getNoiseShape(t);return Z0(()=>{const r=Hn(t),a=-1.6732632423543772*1.0507009873554805;let l=Ph(V0(s),this.rate);l=yl(l,"float32");const u=((1-this.rate)*(1+this.rate*a**2))**-.5,h=-u*a*this.rate,f=Be(Jt(r,l),Jt(Be(l,-1),a));return Be(Jt(f,u),h)},()=>Hn(t),e.training||!1)}return t})}}J_.className="AlphaDropout";Fe(J_);function Np(n,t,e,s,i,r=.001){let o;if(n.rank===2)o=EP(n,t,e,s,i,r);else if(n.rank===3)o=AP(n,t,e,s,i,r);else if(n.rank===4)o=NP(n,t,e,s,i,r);else throw new os(`batchNormalization is not implemented for array of rank ${n.rank} yet`);return o}function XH(n,t,e,s,i=.001){return he(()=>{const r=ow(n,s),o=r.mean,a=r.variance;return[Np(n,o,a,e,t,i),o,a]})}function qH(n,t,e,s,i=.001){return he(()=>{const r=ow(n,s),o=r.mean,a=r.variance,l=[];for(const y of Xa(0,n.rank))s.indexOf(y)!==-1?l.push(1):l.push(n.shape[y]);const u=ne(o,l),h=ne(a,l),f=t==null?null:ne(t,l),g=e==null?null:ne(e,l);return[Np(n,u,h,g,f,i),o,a]})}function KH(n,t,e,s,i=.001){return zs(s.slice().sort(),Xa(0,n.rank-1))?XH(n,t,e,s,i):qH(n,t,e,s,i)}class Q_ extends fs{constructor(t){t==null&&(t={}),super(t),this.supportsMasking=!0,this.axis=t.axis==null?-1:t.axis,this.momentum=t.momentum==null?.99:t.momentum,this.epsilon=t.epsilon==null?.001:t.epsilon,this.center=t.center==null?!0:t.center,this.scale=t.scale==null?!0:t.scale,this.betaInitializer=hi(t.betaInitializer||"zeros"),this.gammaInitializer=hi(t.gammaInitializer||"ones"),this.movingMeanInitializer=hi(t.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=hi(t.movingVarianceInitializer||"ones"),this.betaConstraint=Gi(t.betaConstraint),this.gammaConstraint=Gi(t.gammaConstraint),this.betaRegularizer=fi(t.betaRegularizer),this.gammaRegularizer=fi(t.gammaRegularizer)}build(t){t=Ds(t);const e=this.axis>=0?this.axis:this.axis+t.length,s=t[e];if(s==null)throw new Yt(`Axis ${e} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(t)}.`);this.inputSpec=[new Vi({ndim:t.length,axes:{[e]:s}})];const i=[s];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(t,e){return he(()=>{const s=e.training==null?!1:e.training,i=Hn(t),r=i.shape,o=r.length,a=Xa(0,o),l=this.axis>=0?this.axis:this.axis+o;a.splice(l,1);const u=$h(1,o);u[l]=r[l];const h=a.slice();h.sort();const f=!zs(h,Xa(0,o).slice(0,o-1)),g=()=>{if(f){const $=ne(this.movingMean.read(),u),D=ne(this.movingVariance.read(),u),R=this.center?ne(this.beta.read(),u):null,V=this.scale?ne(this.gamma.read(),u):null;return Np(i,$,D,R,V,this.epsilon)}else return Np(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!s)return g();const[m,y,k]=KH(i,this.gamma.read(),this.beta.read(),a,this.epsilon),C=($,D,R)=>{he(()=>{const V=1-R,E=$.read(),q=Jt(Vn(E,D),V);$.write(Vn(E,q))})};return C(this.movingMean,y,this.momentum),C(this.movingVariance,k,this.momentum),m})}getConfig(){const t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:mi(this.betaInitializer),gammaInitializer:mi(this.gammaInitializer),movingMeanInitializer:mi(this.movingMeanInitializer),movingVarianceInitializer:mi(this.movingVarianceInitializer),betaRegularizer:ti(this.betaRegularizer),gammaRegularizer:ti(this.gammaRegularizer),betaConstraint:Ui(this.betaConstraint),gammaConstraint:Ui(this.gammaConstraint)},e=super.getConfig();return Object.assign(t,e),t}}Q_.className="BatchNormalization";Fe(Q_);class t6 extends fs{constructor(t){if(t==null&&(t={}),super(t),this.axis=t.axis==null?-1:t.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const e of this.axis)if(!Number.isInteger(e))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=t.epsilon==null?.001:t.epsilon,this.center=t.center==null?!0:t.center,this.scale=t.scale==null?!0:t.scale,this.betaInitializer=hi(t.betaInitializer||"zeros"),this.gammaInitializer=hi(t.gammaInitializer||"ones"),this.betaRegularizer=fi(t.betaRegularizer),this.gammaRegularizer=fi(t.gammaRegularizer),this.supportsMasking=!0}build(t){t=Ds(t);const e=t.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let r=0;r<this.axis.length;++r)this.axis[r]<0&&(this.axis[r]+=e);for(const r of this.axis)if(r<0||r>=e)throw new Error(`Invalid axis: ${r}`);if(this.axis.length!==Zc(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const s=this.axis.map(r=>t[r]),i=!0;this.scale?this.gamma=this.addWeight("gamma",s,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",s,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(t,e){const s=Hn(t),i=s.shape,r=i.length;return he(()=>{let{mean:a,variance:l}=ow(s,this.axis,!0);const u=$h(1,r);for(const k of this.axis)u[k]=i[k];const h=k=>k!=null&&k.shape.length!==r?ne(k,u):k;let f=this.scale?h(this.gamma.read()):null,g=this.center?h(this.beta.read()):null;const m=[],y=[];for(let k=0;k<r;++k)this.axis.indexOf(k)!==-1?(m.push(i[k]),y.push(1)):(m.push(1),y.push(i[k]));return a=Va(a,m),l=Va(l,m),f!=null&&(f=Va(f,y)),g!=null&&(g=Va(g,y)),Np(s,a,l,g,f,this.epsilon)})}getConfig(){const t={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:mi(this.betaInitializer),gammaInitializer:mi(this.gammaInitializer),betaRegularizer:ti(this.betaRegularizer),gammaRegularizer:ti(this.gammaRegularizer)},e=super.getConfig();return Object.assign(t,e),t}}t6.className="LayerNormalization";Fe(t6);function YH(n,t,e){return he(()=>{if(n.rank!==4)throw new Yt(`temporalPadding expects input tensor to be 4-D, but received a ${n.rank}-D tensor.`);if(t==null&&(t=[[1,1],[1,1]]),t.length!==2||t[0].length!==2||t[1].length!==2)throw new Yt("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(e==null&&(e=qa()),e!=="channelsLast"&&e!=="channelsFirst")throw new Yt(`Unknown data format: ${e}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let s;return e==="channelsFirst"?s=[[0,0],[0,0],t[0],t[1]]:s=[[0,0],t[0],t[1],[0,0]],aw(n,s)})}class e6 extends fs{constructor(t){if(t==null&&(t={}),super(t),this.dataFormat=t.dataFormat==null?qa():t.dataFormat,t.padding==null)this.padding=[[1,1],[1,1]];else if(typeof t.padding=="number")this.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,t.padding.length!==2)throw new Yt(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${t.padding.length} array.`);let e,s;if(typeof t.padding[0]=="number")e=[t.padding[0],t.padding[0]],s=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,t.padding[0].length!==2)throw new Yt(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${t.padding[0].length} array.`);if(e=t.padding[0],t.padding[1].length!==2)throw new Yt(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${t.padding[1].length} array.`);s=t.padding[1]}this.padding=[e,s]}this.inputSpec=[new Vi({ndim:4})]}computeOutputShape(t){t=Ds(t);let e,s;return this.dataFormat==="channelsFirst"?(t[2]!=null&&t[2]>=0?e=t[2]+this.padding[0][0]+this.padding[0][1]:e=null,t[3]!=null&&t[3]>=0?s=t[3]+this.padding[1][0]+this.padding[1][1]:s=null,[t[0],t[1],e,s]):(t[1]!=null&&t[1]>=0?e=t[1]+this.padding[0][0]+this.padding[0][1]:e=null,t[2]!=null&&t[2]>=0?s=t[2]+this.padding[1][0]+this.padding[1][1]:s=null,[t[0],e,s,t[3]])}call(t,e){return he(()=>YH(Hn(t),this.padding,this.dataFormat))}getConfig(){const t={padding:this.padding,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}e6.className="ZeroPadding2D";Fe(e6);function j2(n,t,e,s,i,r){return he(()=>{Ai(i),vE(r),Ko(s),e==null&&(e=[1,1]),s==null&&(s="valid"),i==null&&(i=qa()),r==null&&(r="max"),n=o3(n,i);let o;const a=s==="same"?"same":"valid";return r==="max"?o=rw(n,t,e,a):o=Ky(n,t,e,a),i==="channelsFirst"&&(o=Es(o,[0,3,1,2])),o})}function n6(n,t,e,s,i,r){return he(()=>{Ai(i),vE(r),Ko(s),e==null&&(e=[1,1,1]),s==null&&(s="valid"),i==null&&(i=qa()),r==null&&(r="max"),n=k_(n,i);let o;const a=s==="same"?"same":"valid";return r==="max"?o=gB(n,t,e,a):o=xP(n,t,e,a),i==="channelsFirst"&&(o=Es(o,[0,4,1,2,3])),o})}class s6 extends fs{constructor(t){if(t.poolSize==null&&(t.poolSize=2),super(t),typeof t.poolSize=="number")this.poolSize=[t.poolSize];else if(Array.isArray(t.poolSize)&&t.poolSize.length===1&&typeof t.poolSize[0]=="number")this.poolSize=t.poolSize;else throw new Yt(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.poolSize)}`);if(Ji(this.poolSize,"poolSize"),t.strides==null)this.strides=this.poolSize;else if(typeof t.strides=="number")this.strides=[t.strides];else if(Array.isArray(t.strides)&&t.strides.length===1&&typeof t.strides[0]=="number")this.strides=t.strides;else throw new Yt(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.strides)}`);Ji(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,Ko(this.padding),this.inputSpec=[new Vi({ndim:3})]}computeOutputShape(t){t=Ds(t);const e=ja(t[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],e,t[2]]}call(t,e){return he(()=>{this.invokeCallHook(t,e),t=K0(Hn(t),2);const s=this.poolingFunction(Hn(t),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return U0(s,[2])})}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},e=super.getConfig();return Object.assign(t,e),t}}class i6 extends s6{constructor(t){super(t)}poolingFunction(t,e,s,i,r){return Ai(r),Ko(i),j2(t,e,s,i,r,"max")}}i6.className="MaxPooling1D";Fe(i6);class r6 extends s6{constructor(t){super(t)}poolingFunction(t,e,s,i,r){return Ai(r),Ko(i),j2(t,e,s,i,r,"avg")}}r6.className="AveragePooling1D";Fe(r6);class o6 extends fs{constructor(t){if(t.poolSize==null&&(t.poolSize=[2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==2)throw new Yt(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides];Ji(this.poolSize,"poolSize"),Ji(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Ai(this.dataFormat),Ko(this.padding),this.inputSpec=[new Vi({ndim:4})]}computeOutputShape(t){t=Ds(t);let e=this.dataFormat==="channelsFirst"?t[2]:t[1],s=this.dataFormat==="channelsFirst"?t[3]:t[2];return e=ja(e,this.poolSize[0],this.padding,this.strides[0]),s=ja(s,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[t[0],t[1],e,s]:[t[0],e,s,t[3]]}call(t,e){return he(()=>(this.invokeCallHook(t,e),this.poolingFunction(Hn(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class a6 extends o6{constructor(t){super(t)}poolingFunction(t,e,s,i,r){return Ai(r),Ko(i),j2(t,e,s,i,r,"max")}}a6.className="MaxPooling2D";Fe(a6);class l6 extends o6{constructor(t){super(t)}poolingFunction(t,e,s,i,r){return Ai(r),Ko(i),j2(t,e,s,i,r,"avg")}}l6.className="AveragePooling2D";Fe(l6);class c6 extends fs{constructor(t){if(t.poolSize==null&&(t.poolSize=[2,2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==3)throw new Yt(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides,t.strides];Ji(this.poolSize,"poolSize"),Ji(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Ai(this.dataFormat),Ko(this.padding),this.inputSpec=[new Vi({ndim:5})]}computeOutputShape(t){t=Ds(t);let e=this.dataFormat==="channelsFirst"?t[2]:t[1],s=this.dataFormat==="channelsFirst"?t[3]:t[2],i=this.dataFormat==="channelsFirst"?t[4]:t[3];return e=ja(e,this.poolSize[0],this.padding,this.strides[0]),s=ja(s,this.poolSize[1],this.padding,this.strides[1]),i=ja(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[t[0],t[1],e,s,i]:[t[0],e,s,i,t[4]]}call(t,e){return he(()=>(this.invokeCallHook(t,e),this.poolingFunction(Hn(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class u6 extends c6{constructor(t){super(t)}poolingFunction(t,e,s,i,r){return Ai(r),Ko(i),n6(t,e,s,i,r,"max")}}u6.className="MaxPooling3D";Fe(u6);class h6 extends c6{constructor(t){super(t)}poolingFunction(t,e,s,i,r){return Ai(r),Ko(i),n6(t,e,s,i,r,"avg")}}h6.className="AveragePooling3D";Fe(h6);class d6 extends fs{constructor(t){super(t),this.inputSpec=[new Vi({ndim:3})]}computeOutputShape(t){return[t[0],t[2]]}call(t,e){throw new os}}class f6 extends d6{constructor(t){super(t||{})}call(t,e){return he(()=>{const s=Hn(t);return Oi(s,1)})}}f6.className="GlobalAveragePooling1D";Fe(f6);class p6 extends d6{constructor(t){super(t||{})}call(t,e){return he(()=>{const s=Hn(t);return Ha(s,1)})}}p6.className="GlobalMaxPooling1D";Fe(p6);class g6 extends fs{constructor(t){super(t),this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Ai(this.dataFormat),this.inputSpec=[new Vi({ndim:4})]}computeOutputShape(t){return t=t,this.dataFormat==="channelsLast"?[t[0],t[3]]:[t[0],t[1]]}call(t,e){throw new os}getConfig(){const t={dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class m6 extends g6{call(t,e){return he(()=>{const s=Hn(t);return this.dataFormat==="channelsLast"?Oi(s,[1,2]):Oi(s,[2,3])})}}m6.className="GlobalAveragePooling2D";Fe(m6);class x6 extends g6{call(t,e){return he(()=>{const s=Hn(t);return this.dataFormat==="channelsLast"?Ha(s,[1,2]):Ha(s,[2,3])})}}x6.className="GlobalMaxPooling2D";Fe(x6);class b6 extends fs{constructor(t){super(t),this.layer=t.layer}build(t){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(t){this.layer!=null&&(this.layer.trainable=t)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(t){this.layer.setWeights(t)}getConfig(){const t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},e=super.getConfig();return Object.assign(t,e),t}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(t)}static fromConfig(t,e,s={}){const i=e.layer,r=sc(i,s);delete e.layer;const o={layer:r};return Object.assign(o,e),new t(o)}}class v6 extends b6{constructor(t){super(t),this.supportsMasking=!0}build(t){if(t=Ds(t),t.length<3)throw new Yt(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(t)}`);this.inputSpec=[{shape:t}];const e=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(e),this.layer.built=!0),super.build(t)}computeOutputShape(t){t=Ds(t);const e=[t[0]].concat(t.slice(2)),s=this.layer.computeOutputShape(e),i=t[1];return[s[0],i].concat(s.slice(1))}call(t,e){return he(()=>(t=Hn(t),N_((o,a)=>[Hn(this.layer.call(o,e)),[]],t,[],!1,null,null,!1,!0)[1]))}}v6.className="TimeDistributed";Fe(v6);function ZH(n){zh(bG,"BidirectionalMergeMode",n)}const JH="concat";class y6 extends b6{constructor(t){super(t);const e=t.layer.getConfig(),s={};s.className=t.layer.getClassName(),s.config=e,this.forwardLayer=sc(s),e.goBackwards=e.goBackwards!==!0;const i={};if(i.className=t.layer.getClassName(),i.config=e,this.backwardLayer=sc(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=t.mergeMode===void 0?JH:t.mergeMode,ZH(this.mergeMode),t.weights)throw new os("weights support is not implemented for Bidirectional layer yet.");this._stateful=t.layer.stateful,this.returnSequences=t.layer.returnSequences,this.returnState=t.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=t.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(t){this._trainable=t,this.forwardLayer!=null&&(this.forwardLayer.trainable=t),this.backwardLayer!=null&&(this.backwardLayer.trainable=t)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(t){const e=t.length,s=Math.floor(e/2);this.forwardLayer.setWeights(t.slice(0,s)),this.backwardLayer.setWeights(t.slice(s))}computeOutputShape(t){let e=this.forwardLayer.computeOutputShape(t);Array.isArray(e)&&Array.isArray(e[0])||(e=[e]),e=e;let s,i,r;return this.returnState&&(r=e.slice(1)),s=e[0],s=s,this.mergeMode==="concat"?(s[s.length-1]*=2,i=[s]):this.mergeMode==null?i=[s,s.slice()]:i=[s],this.returnState?this.mergeMode==null?i.concat(r).concat(r.slice()):[s].concat(r).concat(r.slice()):eo(i)}apply(t,e){let s=e==null?null:e.initialState,i=e==null?null:e.constants;e==null&&(e={});const r=$_(t,s,i,this.numConstants);if(t=r.inputs,s=r.initialState,i=r.constants,Array.isArray(t)&&(s=t.slice(1),t=t[0]),(s==null||s.length===0)&&i==null)return super.apply(t,e);const o=[],a=[];if(s!=null){const u=s.length;if(u%2>0)throw new Yt("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");e.initialState=s,o.push(...s);const h=s.map(f=>new Vi({shape:f.shape}));this.forwardLayer.stateSpec=h.slice(0,u/2),this.backwardLayer.stateSpec=h.slice(u/2),a.push(...h)}if(i!=null)throw new os("Support for constants in Bidirectional layers is not implemented yet.");const l=o[0]instanceof Tl;for(const u of o)if(u instanceof Tl!==l)throw new Yt("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const u=[t].concat(o),h=this.inputSpec.concat(a),f=this.inputSpec;this.inputSpec=h;const g=super.apply(u,e);return this.inputSpec=f,g}else return super.apply(t,e)}call(t,e){return he(()=>{const s=e.initialState;let i,r;if(s==null)i=this.forwardLayer.call(t,e),r=this.backwardLayer.call(t,e);else{const l=s.slice(0,s.length/2),u=s.slice(s.length/2);i=this.forwardLayer.call(t,Object.assign(e,{initialState:l})),r=this.backwardLayer.call(t,Object.assign(e,{initialState:u}))}let o;this.returnState&&(Array.isArray(i)&&(o=i.slice(1).concat(r.slice(1))),i=i[0],r=r[0]),this.returnSequences&&(r=_h(r,1));let a;return this.mergeMode==="concat"?a=Xw([i,r]):this.mergeMode==="sum"?a=Be(i,r):this.mergeMode==="ave"?a=Jt(.5,Be(i,r)):this.mergeMode==="mul"?a=Jt(i,r):this.mergeMode==null&&(a=[i,r]),this.returnState?this.mergeMode==null?a.concat(o):[a].concat(o):a})}resetStates(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(t){ph(this.forwardLayer.name,()=>{this.forwardLayer.build(t)}),ph(this.backwardLayer.name,()=>{this.backwardLayer.build(t)}),this.built=!0}computeMask(t,e){Array.isArray(e)&&(e=e[0]);let s;if(this.returnSequences?this.mergeMode==null?s=[e,e]:s=e:this.mergeMode==null?s=[null,null]:s=null,this.returnState){const r=this.forwardLayer.states.map(o=>null);return Array.isArray(s)?s.concat(r).concat(r):[s].concat(r).concat(r)}else return s}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(t),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(t)}getConfig(){const t={mergeMode:this.mergeMode},e=super.getConfig();return Object.assign(t,e),t}static fromConfig(t,e){const s=sc(e.layer);if(delete e.layer,e.numConstants!=null)throw new os("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const i=e;return i.layer=s,new t(i)}}y6.className="Bidirectional";Fe(y6);class w6 extends fs{constructor(t){super(t),this.scale=t.scale,t.offset?this.offset=t.offset:this.offset=0}getConfig(){const t={scale:this.scale,offset:this.offset},e=super.getConfig();return Object.assign(t,e),t}call(t,e){return he(()=>(t=Hn(t),t.dtype!=="float32"&&(t=yl(t,"float32")),Be(Jt(t,this.scale),this.offset)))}}w6.className="Rescaling";Fe(w6);const{resizeBilinear:QH,cropAndResize:tj}=Ql;class k6 extends fs{constructor(t){super(t),this.height=t.height,this.width=t.width}centerCrop(t,e,s,i,r,o,a,l){return he(()=>{let u,h=!1;const f=e/o,g=s/a,m=(i+e)/o,y=(r+s)/a,k=[f,g,m,y],C=[];t.rank===3?(h=!0,u=oc([t])):u=t;for(let V=0;V<u.shape[0];V++)C.push(k);const S=jI(C,[C.length,4]),$=Ep(0,C.length,1,"int32"),R=tj(u,S,$,[i,r],"nearest");return yl(h?Hn(Ah(R)):R,l)})}upsize(t,e,s,i){return he(()=>{const r=QH(t,[e,s]);return yl(r,i)})}call(t,e){return he(()=>{const s=Hn(t),i=s.dtype,r=s.shape,o=r[r.length-3],a=r[r.length-2];let l=0;o!==this.height&&(l=Math.floor((o-this.height)/2));let u=0;return a!==this.width&&(u=Math.floor((a-this.width)/2),u===0&&(u=1)),l>=0&&u>=0?this.centerCrop(s,l,u,this.height,this.width,o,a,i):this.upsize(t,this.height,this.width,i)})}getConfig(){const t={height:this.height,width:this.width},e=super.getConfig();return Object.assign(t,e),t}computeOutputShape(t){t=Ds(t);const e=t.length-3,s=t.length-2;return t[e]=this.height,t[s]=this.width,t}}k6.className="CenterCrop";Fe(k6);function ej(n,t,e,s){let i=Hn(n);if(i.dtype!=="int32"&&(i=yl(i,"int32")),t==="int")return i;const r=i.shape;if(i.rank===0&&(i=to(i,-1)),t==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=to(i,-1)),i.rank>2)throw new Yt(`When outputMode is not int, maximum output rank is 2 Received outputMode ${t} and input shape ${r} which would result in output rank ${i.rank}.`);const o=["multiHot","oneHot"].includes(t),a=i;let l;if(typeof s<"u"&&t==="count"?l=q4(a,s,e,o):l=q4(a,[],e,o),t!=="tfIdf")return l;if(s)return Jt(l,s);throw new Yt("When outputMode is 'tfIdf', weights must be provided.")}class C6 extends fs{constructor(t){super(t),this.numTokens=t.numTokens,t.outputMode?this.outputMode=t.outputMode:this.outputMode="multiHot"}getConfig(){const t={numTokens:this.numTokens,outputMode:this.outputMode},e=super.getConfig();return Object.assign(t,e),t}computeOutputShape(t){return t=Ds(t),t==null?[this.numTokens]:this.outputMode==="oneHot"&&t[t.length-1]!==1?(t.push(this.numTokens),t):(t[t.length-1]=this.numTokens,t)}call(t,e){return he(()=>{t=Hn(t),t.dtype!=="int32"&&(t=yl(t,"int32"));let s;if(typeof e.countWeights<"u"){if(this.outputMode!=="count")throw new Yt(`countWeights is not used when outputMode !== count.
              Received countWeights=${e.countWeights}`);s=Hn(e.countWeights)}const i=Ha(t),r=Hm(t),o=qo(this.numTokens,i).bufferSync().get(0),a=Ph(r,0).bufferSync().get(0);if(!(o&&a))throw new Yt(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return ej(t,this.outputMode,this.numTokens,s)})}}C6.className="CategoryEncoding";Fe(C6);const nj=["bilinear","nearest"],FC=new Set(nj);class S6 extends fs{constructor(t){if(super(t),this.height=t.height,this.width=t.width,t.interpolation)if(FC.has(t.interpolation))this.interpolation=t.interpolation;else throw new Yt(`Invalid interpolation parameter: ${t.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!t.cropToAspectRatio}computeOutputShape(t){t=Ds(t);const e=t[2];return[this.height,this.width,e]}getConfig(){const t={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},e=super.getConfig();return Object.assign(t,e),t}call(t,e){return he(()=>{const s=[this.height,this.width];if(this.interpolation==="bilinear")return Ql.resizeBilinear(t,s,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Ql.resizeNearestNeighbor(t,s,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...FC]} are supported`)})}}S6.className="Resizing";Fe(S6);class T6{constructor(t){this.seed=t}next(){if(this.seed!==void 0)return this.seed++}}T6.className="RandomSeed";class I6 extends fs{constructor(t){super(t),this.randomGenerator=new T6(t.seed)}getConfig(){const t={seed:this.randomGenerator.seed},e=super.getConfig();return Object.assign(t,e),t}}I6.className="BaseRandomLayer";const sj=["bilinear","nearest"],PC=new Set(sj);class E6 extends I6{constructor(t){super(t);const{factor:e,interpolation:s="bilinear"}=t;if(this.factor=e,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new Yt(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new Yt(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new Yt(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(s)if(PC.has(s))this.interpolation=s;else throw new Yt(`Invalid interpolation parameter: ${s} is not implemented`)}getConfig(){const t={factor:this.factor,interpolation:this.interpolation},e=super.getConfig();return Object.assign(t,e),t}computeOutputShape(t){t=Ds(t);const e=t[2];return[this.imgHeight,-1,e]}call(t,e){return he(()=>{const s=Hn(t);this.imgHeight=s.shape[s.shape.length-3];const i=s.shape[s.shape.length-2];this.widthFactor=V0([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let r=this.widthFactor.dataSync()[0]*i;r=Math.round(r);const o=[this.imgHeight,r];switch(this.interpolation){case"bilinear":return Ql.resizeBilinear(t,o);case"nearest":return Ql.resizeNearestNeighbor(t,o);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...PC]} are supported`)}})}}E6.className="RandomWidth";Fe(E6);function LC(n){return new d3(n)}function BC(n){return new f3(n)}function ij(n){return new p3(n)}const rj=ge();rj.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,n=>{n&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var zC;(function(n){n[n.DT_INVALID=0]="DT_INVALID",n[n.DT_FLOAT=1]="DT_FLOAT",n[n.DT_DOUBLE=2]="DT_DOUBLE",n[n.DT_INT32=3]="DT_INT32",n[n.DT_UINT8=4]="DT_UINT8",n[n.DT_INT16=5]="DT_INT16",n[n.DT_INT8=6]="DT_INT8",n[n.DT_STRING=7]="DT_STRING",n[n.DT_COMPLEX64=8]="DT_COMPLEX64",n[n.DT_INT64=9]="DT_INT64",n[n.DT_BOOL=10]="DT_BOOL",n[n.DT_QINT8=11]="DT_QINT8",n[n.DT_QUINT8=12]="DT_QUINT8",n[n.DT_QINT32=13]="DT_QINT32",n[n.DT_BFLOAT16=14]="DT_BFLOAT16",n[n.DT_QINT16=15]="DT_QINT16",n[n.DT_QUINT16=16]="DT_QUINT16",n[n.DT_UINT16=17]="DT_UINT16",n[n.DT_COMPLEX128=18]="DT_COMPLEX128",n[n.DT_HALF=19]="DT_HALF",n[n.DT_RESOURCE=20]="DT_RESOURCE",n[n.DT_VARIANT=21]="DT_VARIANT",n[n.DT_UINT32=22]="DT_UINT32",n[n.DT_UINT64=23]="DT_UINT64",n[n.DT_FLOAT_REF=101]="DT_FLOAT_REF",n[n.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",n[n.DT_INT32_REF=103]="DT_INT32_REF",n[n.DT_UINT8_REF=104]="DT_UINT8_REF",n[n.DT_INT16_REF=105]="DT_INT16_REF",n[n.DT_INT8_REF=106]="DT_INT8_REF",n[n.DT_STRING_REF=107]="DT_STRING_REF",n[n.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",n[n.DT_INT64_REF=109]="DT_INT64_REF",n[n.DT_BOOL_REF=110]="DT_BOOL_REF",n[n.DT_QINT8_REF=111]="DT_QINT8_REF",n[n.DT_QUINT8_REF=112]="DT_QUINT8_REF",n[n.DT_QINT32_REF=113]="DT_QINT32_REF",n[n.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",n[n.DT_QINT16_REF=115]="DT_QINT16_REF",n[n.DT_QUINT16_REF=116]="DT_QUINT16_REF",n[n.DT_UINT16_REF=117]="DT_UINT16_REF",n[n.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",n[n.DT_HALF_REF=119]="DT_HALF_REF",n[n.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",n[n.DT_VARIANT_REF=121]="DT_VARIANT_REF",n[n.DT_UINT32_REF=122]="DT_UINT32_REF",n[n.DT_UINT64_REF=123]="DT_UINT64_REF"})(zC||(zC={}));var WC;(function(n){(function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"})(n.CheckpointFormatVersion||(n.CheckpointFormatVersion={}))})(WC||(WC={}));var VC;(function(n){n[n.FAIL=0]="FAIL",n[n.SHORTEST=1]="SHORTEST",n[n.LONGEST=2]="LONGEST"})(VC||(VC={}));function wn(n,t){Array.isArray(n)||(n=[n]),n.forEach(e=>{e!=null&&wt(e.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the CPU backend.`)})}const oj=A5;class X2 extends Jv{nextDataId(){return X2.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new tI(this,cl())}write(t,e,s){this.firstUse&&(this.firstUse=!1,ge().get("IS_NODE")&&Uo(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const i={id:this.nextDataId()};return this.data.set(i,{values:t,dtype:s,refCount:1}),i}makeTensorInfo(t,e,s){let i;if(e==="string"&&s!=null&&s.length>0&&Gp(s[0])){const r=s.map(o=>Yc(o));i=this.write(r,t,e)}else i=this.write(s,t,e);return{dataId:i,shape:t,dtype:e}}refCount(t){return this.data.has(t)?this.data.get(t).refCount:0}incRef(t){const e=this.data.get(t);e.refCount++}decRef(t){if(this.data.has(t)){const e=this.data.get(t);e.refCount--}}move(t,e,s,i,r){this.data.set(t,{values:e,dtype:i,refCount:r})}numDataIds(){return this.data.numDataIds()}async read(t){return this.readSync(t)}readSync(t){const{dtype:e,complexTensorInfos:s}=this.data.get(t);if(e==="complex64"){const i=this.readSync(s.real.dataId),r=this.readSync(s.imag.dataId);return ac(i,r)}return RO(this.data.get(t).values,e)}bufferSync(t){const e=this.readSync(t.dataId);if(t.dtype==="string")try{const s=e.map(i=>eu(i));return hs(t.shape,t.dtype,s)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return hs(t.shape,t.dtype,e)}makeOutput(t,e,s){return cl().makeTensorFromTensorInfo(this.makeTensorInfo(e,s,t),this)}disposeData(t,e=!1){if(this.data.has(t)){if(this.data.get(t).refCount--,!e&&this.data.get(t).refCount>0)return!1;const{complexTensorInfos:s}=this.data.get(t);s!=null&&(this.disposeData(s.real.dataId,!0),this.disposeData(s.imag.dataId,!0)),this.data.delete(t)}return!0}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}async time(t){const e=Qr();return t(),{kernelMs:Qr()-e}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(t){wn([t],"where");const e=this.readSync(t.dataId);return oj(t.shape,e)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}X2.nextDataId=0;function _6(n){const t=new Float32Array(n.length);for(let e=0;e<n.length;++e)t[e]=Math.abs(n[e]);return t}const aj=n=>{const{x:t}=n.inputs,e=n.backend;wn(t,"abs");let s=new Float32Array(Ce(t.shape));const i=e.data.get(t.dataId).values;return s=_6(i),e.makeOutput(s,t.shape,t.dtype)},lj={kernelName:T1,backendName:"cpu",kernelFunc:aj};function $i(n){return(t,e,s,i,r)=>{const o=es(t,e),a=o.length,l=Dn(o),u=Ce(o),h=br(r,u),f=t.length,g=e.length,m=Dn(t),y=Dn(e),k=Ud(t,o),C=Ud(e,o);if(k.length+C.length===0)for(let S=0;S<h.length;++S)h[S]=n(s[S%s.length],i[S%i.length]);else for(let S=0;S<h.length;++S){const $=sf(S,a,l),D=$.slice(-f);k.forEach(q=>D[q]=0);const R=xl(D,f,m),V=$.slice(-g);C.forEach(q=>V[q]=0);const E=xl(V,g,y);h[S]=n(s[R],i[E])}return[h,o]}}function wo(n){const{inputs:t,backend:e}=n,{real:s,imag:i}=t,r=e.data.get(s.dataId).values,o=e.data.get(i.dataId).values,a=e.makeTensorInfo(s.shape,"complex64"),l=e.data.get(a.dataId);return l.complexTensorInfos={real:e.makeTensorInfo(s.shape,"float32",r),imag:e.makeTensorInfo(i.shape,"float32",o)},a}const cj={kernelName:dy,backendName:"cpu",kernelFunc:wo};function r1(n,t,e="float32"){if(e==="complex64"){const i=r1(n,t,"float32"),r=r1(n,t,"float32");return wo({inputs:{real:i,imag:r},backend:n})}const s=vr(Ce(t),e);return n.makeTensorInfo(t,e,s)}function Il(n){const{inputs:t,backend:e}=n,{x:s}=t;return e.incRef(s.dataId),{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}const uj={kernelName:h0,backendName:"cpu",kernelFunc:Il};function Nh(n){const{inputs:t,backend:e}=n,{input:s}=t,i=e.data.get(s.dataId).complexTensorInfos.real,r=e.data.get(i.dataId).values;return e.makeTensorInfo(i.shape,i.dtype,r)}const hj={kernelName:Fy,backendName:"cpu",kernelFunc:Nh};function A6(n,t,e,s){if(s==="int32"){const i=Int32Array.from(n);return[t,"int32",i]}if(s==="bool"){const i=Fh([0],e),[r,o]=$i((a,l)=>a!==l?1:0)(t,[],n,i,"bool");return[o,"bool",r]}throw new Error(`Error in Cast: failed to cast ${e} to ${s}`)}function ou(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{dtype:r}=s;if(r==="complex64"){if(i.dtype==="complex64")return Il({inputs:{x:i},backend:e});const h=r1(e,i.shape,i.dtype),f=ou({inputs:{x:i},backend:e,attrs:{dtype:"float32"}}),g=wo({inputs:{real:f,imag:h},backend:e});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),g}if(i.dtype==="complex64"){const h=Nh({inputs:{input:i},backend:e}),f=ou({inputs:{x:h},backend:e,attrs:{dtype:r}});return e.disposeIntermediateTensorInfo(h),f}if(!sI(i.dtype,r)){const h=Il({inputs:{x:i},backend:e});return{dataId:h.dataId,shape:h.shape,dtype:r}}const o=e.data.get(i.dataId).values,[a,l,u]=A6(o,i.shape,i.dtype,r);return e.makeTensorInfo(a,l,u)}const dj={kernelName:Jp,backendName:"cpu",kernelFunc:ou};function ji(n,t,e,s){return e==null?({inputs:i,backend:r})=>{const{a:o,b:a}=i,l=r;wn([o,a],n);const u=l.data.get(o.dataId).values,h=l.data.get(a.dataId).values,f=o.dtype==="string"?lc(u):u,g=o.dtype==="string"?lc(h):h,m=s||o.dtype,[y,k]=t(o.shape,a.shape,f,g,m);return l.makeTensorInfo(k,m,y)}:({inputs:i,backend:r})=>{const{a:o,b:a}=i,l=r;if(o.dtype==="complex64"||a.dtype==="complex64"){const u=ou({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),h=l.data.get(u.dataId),f=h.complexTensorInfos.real,g=h.complexTensorInfos.imag,m=l.data.get(f.dataId).values,y=l.data.get(g.dataId).values,k=ou({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),C=l.data.get(k.dataId),S=C.complexTensorInfos.real,$=C.complexTensorInfos.imag,D=l.data.get(S.dataId).values,R=l.data.get($.dataId).values,[V,E,q]=e(o.shape,a.shape,m,y,D,R),X=l.makeTensorInfo(q,"float32",V),B=l.makeTensorInfo(q,"float32",E),U=wo({inputs:{real:X,imag:B},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(k),l.disposeIntermediateTensorInfo(X),l.disposeIntermediateTensorInfo(B),U}else{const u=l.data.get(o.dataId).values,h=l.data.get(a.dataId).values,f=s||o.dtype,[g,m]=t(o.shape,a.shape,u,h,f);return l.makeTensorInfo(m,f,g)}}}function g3(n){return(t,e,s,i,r,o)=>{const a=es(t,e),l=Ce(a),u=a.length,h=Dn(a),f=br("float32",l),g=br("float32",l),m=Ud(t,a),y=Ud(e,a),k=ac(s,i),C=ac(r,o),S=t.length,$=Dn(t),D=e.length,R=Dn(e);if(m.length+y.length===0)for(let V=0;V<f.length;V++){const E=V%k.length,q=V%C.length,X=n(k[E*2],k[E*2+1],C[q*2],C[q*2+1]);f[V]=X.real,g[V]=X.imag}else for(let V=0;V<f.length;V++){const E=sf(V,u,h),q=E.slice(-S);m.forEach(Y=>q[Y]=0);const X=xl(q,S,$),B=E.slice(-D);y.forEach(Y=>B[Y]=0);const U=xl(B,D,R),K=n(k[X*2],k[X*2+1],C[U*2],C[U*2+1]);f[V]=K.real,g[V]=K.imag}return[f,g,a]}}const $6=$i(((n,t)=>n+t)),fj=g3(((n,t,e,s)=>({real:n+e,imag:t+s}))),jd=ji(rf,$6,fj),pj={kernelName:rf,backendName:"cpu",kernelFunc:jd};function m3(n,t,e,s,i){const r=Ce(s),o=vr(i,e);for(let a=0;a<n.length;a++){const l=n[a];if(l<0)throw new Error("Input x must be non-negative!");l>=i||(r>0?o[l]+=t[a]:o[l]+=1)}return o}function N6(n,t,e,s=!1){const i=n.shape[0],r=n.shape[1],o=hs([i,e],t.dtype);for(let a=0;a<i;a++)for(let l=0;l<r;l++){const u=n.get(a,l);if(u<0)throw new Error("Input x must be non-negative!");u>=e||(s?o.set(1,a,u):t.size>0?o.set(o.get(a,u)+t.get(a,l),a,u):o.set(o.get(a,u)+1,a,u))}return o}const D6=$i(((n,t)=>n&t)),gj=ji(hy,D6),mj={kernelName:hy,backendName:"cpu",kernelFunc:gj};function Nl(n){return(t,e,s)=>{const i=Ti(e,t.length);for(let r=0;r<t.length;++r)i[r]=n(t[r],s);return i}}function Xs(n,t,e){const s=Nl(t);return gu(n,s,e)}function gu(n,t,e){return({inputs:s,attrs:i,backend:r})=>{const{x:o}=s;wn(o,n);const a=r,l=a.data.get(o.dataId).values;let u;if(o.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");u=lc(l)}else u=l;const h=e||o.dtype,f=t(u,h,i);return a.makeTensorInfo(o.shape,h,f)}}const R6=Nl(n=>Math.ceil(n)),xj=gu(Qp,R6),bj={kernelName:Qp,backendName:"cpu",kernelFunc:xj};function M6(n,t,e,s){const i=Ti(e,Ce(t));if(s&&e!=="string"){let r=0;n.forEach(o=>{const a=Ce(o.shape);i.set(o.vals,r),r+=a})}else{let r=0;n.forEach(o=>{const a=e==="string"?lc(o.vals):o.vals;let l=0;for(let u=0;u<o.shape[0];++u){const h=u*t[1]+r;for(let f=0;f<o.shape[1];++f)i[h+f]=a[l++]}r+=o.shape[1]})}return i}const O6=$i((n,t)=>n===t?1:0),F6=ji(z1,O6,null,"bool"),vj={kernelName:z1,backendName:"cpu",kernelFunc:F6};const P6=Nl(n=>Math.exp(n)),L6=gu(o0,P6,"float32"),yj={kernelName:o0,backendName:"cpu",kernelFunc:L6};const B6=Nl(n=>Math.expm1(n)),wj=gu(a0,B6),kj={kernelName:a0,backendName:"cpu",kernelFunc:wj};const z6=Nl(n=>Math.floor(n)),Cj=gu(l0,z6),Sj={kernelName:l0,backendName:"cpu",kernelFunc:Cj};const W6=$i((n,t)=>Math.floor(n/t)),Tj=ji(c0,W6,null,"int32"),Ij={kernelName:c0,backendName:"cpu",kernelFunc:Tj};function V6(n,t,e,s,i,r,o,a,l){const u=hs([s,r],e);for(let h=0;h<s;h++){const f=[];let g=0;for(let m=0;m<i;m++){const y=n[h*i+m];g+=y*o[m],f.push(y)}if(g<0||g>=l/r)throw new Error(`Invalid indices: ${f} does not index into ${a}`);for(let m=0;m<r;m++)u.values[h*r+m]=t.get(...t.indexToLoc(g*r+m))}return u}function U6(n,t,e){const s=hs(e,n.dtype);for(let i=0;i<s.size;++i){const o=s.indexToLoc(i).slice(),a=o[0],l=o[2],u=t.locToIndex([a,l]);o[2]=t.values[u];const h=n.locToIndex(o);0<=h&&h<n.values.length&&(s.values[i]=n.values[h])}return s}const G6=$i((n,t)=>n>t?1:0),Ej=ji(G1,G6,null,"bool"),_j={kernelName:G1,backendName:"cpu",kernelFunc:Ej};const H6=$i((n,t)=>n>=t?1:0),Aj=ji(u0,H6,null,"bool"),$j={kernelName:u0,backendName:"cpu",kernelFunc:Aj};const j6=$i((n,t)=>n<t?1:0),Nj=ji(j1,j6,null,"bool"),Dj={kernelName:j1,backendName:"cpu",kernelFunc:Nj};const X6=$i((n,t)=>n<=t?1:0),Rj=ji(X1,X6,null,"bool"),Mj={kernelName:X1,backendName:"cpu",kernelFunc:Rj};function q6(n,t,e){const s=(t-n)/(e-1),i=vr(e,"float32");i[0]=n;for(let r=1;r<i.length;r++)i[r]=i[r-1]+s;return i}const K6=Nl(n=>Math.log(n)),Oj=gu(g0,K6),Fj={kernelName:g0,backendName:"cpu",kernelFunc:Oj};function Y6(n,t,e,s){const i=br(s,Ce(e));for(let r=0;r<i.length;++r){const o=r*t;let a=n[o];for(let l=0;l<t;++l){const u=n[o+l];(Number.isNaN(u)||u>a)&&(a=u)}i[r]=a}return i}const Z6=$i(((n,t)=>Math.max(n,t))),Pj=ji(x0,Z6),Lj={kernelName:x0,backendName:"cpu",kernelFunc:Pj};const J6=$i(((n,t)=>Math.min(n,t))),Bj=ji(b0,J6),zj={kernelName:b0,backendName:"cpu",kernelFunc:Bj};const x3=$i(((n,t)=>n*t)),Wj=g3(((n,t,e,s)=>({real:n*e-t*s,imag:n*s+t*e}))),q2=ji(y0,x3,Wj),Vj={kernelName:y0,backendName:"cpu",kernelFunc:q2};function Q6(n,t,e){const s=lu(-1,e);return x3([],t,s,n,e)}function Uj(n){const{inputs:t,backend:e}=n,{x:s}=t;wn(s,"neg");const i=e.data.get(s.dataId).values,[r,o]=Q6(i,s.shape,s.dtype);return e.makeTensorInfo(o,s.dtype,r)}const Gj={kernelName:i2,backendName:"cpu",kernelFunc:Uj};const tA=$i(((n,t)=>n!==t?1:0)),Hj=ji(r2,tA,null,"bool"),jj={kernelName:r2,backendName:"cpu",kernelFunc:Hj};function b3(n,t,e,s,i){const r=t.length,o=Ce(t),a=Dn(t),l=Dn(i),u=br(e,Ce(i));for(let h=0;h<o;++h){const f=sf(h,r,a),g=new Array(f.length);for(let y=0;y<g.length;y++)g[y]=f[s[y]];const m=xl(g,r,l);u[m]=n[h]}return u}function oo(n){const{inputs:t,attrs:e,backend:s}=n,{x:i}=t,{perm:r}=e;wn(i,"transpose");const o=i.shape.length,a=new Array(o);for(let f=0;f<a.length;f++)a[f]=i.shape[r[f]];const l=s.data.get(i.dataId).values,u=b3(l,i.shape,i.dtype,r,a);return{dataId:s.write(u,a,i.dtype),shape:a,dtype:i.dtype}}const Xj={kernelName:Dd,backendName:"cpu",kernelFunc:oo};function eA(n,t,e,s){const[i,r]=tr(n,s),o=To(t,"int32"),a=vr(Ce(i),o),l=Ce(r);for(let u=0;u<a.length;++u){const h=u*l;let f=1;for(let g=0;g<l;++g)f*=e[h+g];a[u]=f}return{outVals:a,outShape:i,outDtype:o}}function qj(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{axis:r,keepDims:o}=s;wn(i,"prod");const a=i.shape.length,l=ds(r,i.shape),u=xi(l,a);let h=l,f=i;const g=[];u!=null&&(f=oo({inputs:{x:i},backend:e,attrs:{perm:u}}),g.push(f),h=_i(h.length,a));const m=e.data.get(f.dataId).values,{outVals:y,outShape:k,outDtype:C}=eA(f.shape,f.dtype,m,h);let S=k;return o&&(S=Fi(k,l)),g.forEach($=>e.disposeIntermediateTensorInfo($)),e.makeTensorInfo(S,C,y)}const Kj={kernelName:h2,backendName:"cpu",kernelFunc:qj};function Yj(n,t,e){n.forEach((s,i)=>{if(s<0||s>=e){const r=sf(i,t.length,Dn(t)).join(",");throw new Error(`indices[${r}] = ${s} is not in [0, ${e})`)}})}function Zj(n,t){for(let e=0;e<n.length;++e){const s=n[e],i=e===n.length-1?t:n[e+1].length;if(s.length===0)throw new Error("Ragged splits may not be empty");if(s[0]<0)throw new Error("Ragged splits must be non-negative");if(s[s.length-1]>i)throw new Error("Ragged splits must not point past values");for(let r=1;r<s.length;++r)if(s[r-1]>s[r])throw new Error("Ragged splits must be sorted in ascending order")}}function Jj(n,t,e,s){const i=[];let r=0;const o=t.length-1+e.length,a=new Array(o).fill(null).map(()=>[0]);Zj(e,s);let l=1;for(let u=0;u<t.length-1;++u){l*=t[u];const h=t[u+1];for(let f=1;f<l+1;++f)a[u].push(f*h)}for(let u=0;u<n.length;++u){let h=n[u],f=n[u]+1;for(let g=0;g<e.length;++g){const m=e[g],y=g+t.length-1;if(y>=0){const k=a[y],C=k[k.length-1]-m[h];for(let S=h;S<f;++S)a[y].push(m[S+1]+C)}h=m[h],f=m[f]}f!==h&&(i.push([h,f]),r+=f-h)}return{outSplits:a,valueSlices:i,numValues:r}}function Qj(n){const t=[];for(let e=0;e<n.length;++e){const s=n[e].length,i=Ti("int32",s);t.push(i),n[e].forEach((r,o)=>i[o]=r)}return t}function UC(n,t){const e=n.slice(0,t);for(;e.length<t;)e.push(1);for(let s=t;s<n.length;s++)e[t-1]*=n[s];return e}function tX(n,t,e,s,i,r){const o=UC(t,2)[1],a=UC(r,2)[1];let l=0;for(const u of e)for(let h=u[0];h<u[1];++h){for(let f=0;f<s;++f)i[l*a+f]=n[h*o+f];++l}}function eX(n,t,e,s,i){const r=t.slice();r[0]=i;const o=Ti(e,Ce(r)),a=n.length,l=a===0?0:a/t[0];return tX(n,t,s,l,o,r),[o,r]}function nA(n,t,e,s,i,r,o,a){if(n.length===0)throw new Error("paramsNestedSplits must be non empty");if(t[0].length===0)throw new Error("Split tensors must not be scalars");const l=t[0][0]-1;if(Yj(r,o,l),s.length===0)throw new Error("params.rank must be nonzero");const u=s[0],{outSplits:h,valueSlices:f,numValues:g}=Jj(r,o,n,u),m=Qj(h),y=eX(e,s,i,f,g);return[m,y[0],y[1]]}const GC=2147483647;function sA(n,t,e,s,i,r,o){if(t.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const a=t.length===0,l=i.length===0,u=o.length===0,h=[];a||h.push(t[0]),l||h.push(i[0]),u||h.push(o[0]);for(let C=1;C<h.length;++C)if(h[C]!==h[C-1])throw new Error("starts, limits, and deltas must have the same shape");const f=h.length===0?1:h[0],g=Ti("int32",f+1);g[0]=0;for(let C=0;C<f;++C){const S=a?n[0]:n[C],$=l?s[0]:s[C],D=u?r[0]:r[C];if(D===0)throw new Error("Requires delta != 0");let R;if(D>0&&$<S||D<0&&$>S)R=0;else if(R=Math.ceil(Math.abs(($-S)/D)),R>GC)throw new Error(`Requires ((limit - start) / delta) <= ${GC}`);g[C+1]=g[C]+R}const m=g[f],y=Ti(e,m);let k=0;for(let C=0;C<f;++C){const S=g[C+1]-g[C];let $=a?n[0]:n[C];const D=u?r[0]:r[C];for(let R=0;R<S;++R)y[k++]=$,$+=D}return[g,y]}var sa=Pa;class o1{constructor(t,e,s,i,r,o,a,l,u,h){this.shape=t,this.shapeShape=e,this.values=s,this.valuesShape=i,this.valuesDType=r,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=H5(h),this.raggedRank=j5(this.rowPartitionTypes)}getRowPartitionTypeByDimension(t){return this.rowPartitionTypes[0]===sa.FIRST_DIM_SIZE?this.rowPartitionTypes[t+1]:this.rowPartitionTypes[t]}getRowPartitionTensor(t){return this.rowPartitionTypes[0]===sa.FIRST_DIM_SIZE?this.rowPartitionValues[t+1]:this.rowPartitionValues[t]}getMaxWidth(t){const e=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case sa.VALUE_ROWIDS:return o1.getMaxWidthValueRowID(e);case sa.ROW_SPLITS:return o1.getMaxWidthRowSplit(e);default:throw new Error(`Cannot handle partition type ${sa[this.getRowPartitionTypeByDimension(t-1)]}`)}}static getMaxWidthRowSplit(t){const e=t.length;if(e===0||e===1)return 0;let s=0;for(let i=0;i<e-1;++i){const r=t[i+1]-t[i];r>s&&(s=r)}return s}static getMaxWidthValueRowID(t){const e=t.length;if(e===0)return 0;let s=0,i=t[0],r=0;for(let o=1;o<e;++o){const a=t[o];a!==i&&(i=a,r=Math.max(o-s,r),s=o)}return Math.max(e-s,r)}tensorShapeFromTensor(t,e,s=!0){if(e.length===0){if(t[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return jC(t,s)}calculateOutputSize(t){const e=this.valuesShape,s=this.defaultValueShape;X5(s,e);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=G5(this.raggedRank,i,e);o[0]<0&&(o[0]=t);for(let a=1;a<=this.raggedRank;++a)o[a]<0&&(o[a]=this.getMaxWidth(a));return o}calculateFirstParentOutputIndex(t,e,s){const i=Math.min(t,s),r=[];let o=0;for(let a=0;a<i;++a,o+=e)r.push(o);for(let a=i;a<t;++a)r.push(-1);return wt(r.length===t,()=>"Final length of result must be equal to firstDimension."),r}calculateOutputIndexRowSplit(t,e,s,i){const r=t.length,o=[];for(let a=0;a<r-1;++a){const l=t[a+1]-t[a];let u=Math.min(i,l),h=e[a];h===-1&&(u=0);for(let f=0;f<u;++f)o.push(h),h+=s;for(let f=0;f<l-u;++f)o.push(-1)}if(r>0&&o.length!==t[r-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(t,e,s,i){const r=t.length,o=[];if(r===0)return[];let a=0,l=t[0];if(l>=e.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${e.length}`);let u=e[l];o.push(u);for(let h=1;h<r;++h){const f=t[h];if(f===l)u>=0&&(++a,a<i?u+=s:u=-1);else{if(a=0,l=f,f>=e.length)throw new Error(`Got nextValueRowId=${f} which is not less than ${e.length}`);u=e[f]}o.push(u)}if(o.length!==t.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(t,e,s,i){const r=this.getRowPartitionTensor(t),o=this.getRowPartitionTypeByDimension(t);switch(o){case sa.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(r,e,s,i);case sa.ROW_SPLITS:if(r.length-1>e.length)throw new Error(`Row partition size is greater than output size: ${r.length-1} > ${e.length}`);return this.calculateOutputIndexRowSplit(r,e,s,i);default:throw new Error(`Unsupported partition type: ${sa[o]}`)}}getFirstDimensionSize(){const t=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const e=this.rowPartitionTypes[0];switch(e){case sa.FIRST_DIM_SIZE:return t[0];case sa.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case sa.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${sa[e]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),s=this.calculateOutputSize(e),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let l=i.length-2;l>=0;--l)i[l]=i[l+1]*s[l+1];const r=jC(s,!1),o=Ti(this.valuesDType,Ce(r));if(i[0]*s[0]>0){let l=this.calculateFirstParentOutputIndex(e,i[0],s[0]);for(let u=1;u<=this.raggedRank;++u)l=this.calculateOutputIndex(u-1,l,i[u],s[u]);this.setOutput(this.raggedRank,l,o,r)}return[r,o]}setOutput(t,e,s,i){if(s.length===0)return;const r=this.values,o=s;let a=i.slice();a=a.slice(t+1);const l=Ce(a),u=e.length;let h=this.defaultValue;if(h.length!==l&&h.length!==1){const y=this.defaultValueShape;he(()=>{const k=ne(h,y);h=yp(k,a).dataSync()})}let f=0,g=0,m=0;for(let y=0;y<=u;++y){let k=y<u?e[y]:-1;if(k===m){++m;continue}if(g<m){const C=r.subarray(f*l),S=o.subarray(g*l),$=(m-g)*l;HC(S,C,$)}if(y>=u){const C=s.length;k=Math.floor(C/l)}if(k>m)if(this.defaultValue.length===1)o.subarray(m*l,k*l).fill(this.defaultValue[0]),m=k;else for(;k>m;){const C=o.slice(m*l);HC(C,h,l),++m}k<0?(f=y+1,g=m):(f=y,g=m,m=g+1)}}}function HC(n,t,e){for(let s=0;s<e;s++)n[s]=t[s]}function jC(n,t){const e=[];for(let s of n){if(s<0){if(!t)throw new Error(`Dimension ${s} must be >= 0`);if(s<-1)throw new Error(`Dimension ${s} must be >= -1`);s=-1}e.push(s)}return e}function iA(n,t,e,s,i,r,o,a,l,u){return new o1(n,t,e,s,i,r,o,a,l,u).compute()}function rA(n,t,e,s){const i=n===t,r=n<t&&e<0,o=t<n&&e>1;if(i||r||o)return vr(0,s);const a=Math.abs(Math.ceil((t-n)/e)),l=vr(a,s);t<n&&e===1&&(e=-1),l[0]=n;for(let u=1;u<l.length;u++)l[u]=l[u-1]+e;return l}const oA=Nl(n=>1/Math.sqrt(n)),nX=gu(I0,oA),sX={kernelName:I0,backendName:"cpu",kernelFunc:nX};function uh(n,t,e,s,i,r,o,a,l,u){const h=[s/i,i],f=n.values,g=t.values;if(s===0)return hs(e,t.dtype);const m=l instanceof or?l:hs(h,t.dtype);typeof l=="string"||typeof l=="number"?m.values.fill(l):typeof l=="boolean"&&m.values.fill(+l);for(let y=0;y<r;y++){const k=[];let C=0;for(let S=0;S<o;S++){const $=f[y*o+S];k.push($),C+=$*a[S]}if(C<0||C>=s/i)throw new Error(`Invalid indices: ${k} does not index into ${e}`);for(let S=0;S<i;S++)u?m.values[C*i+S]+=g[y*i+S]:m.values[C*i+S]=t.rank===0?g[0]:g[y*i+S]}return m}const iX=Nl(n=>1/(1+Math.exp(-n))),aA=Xs(N0,n=>1/(1+Math.exp(-n))),rX={kernelName:N0,backendName:"cpu",kernelFunc:aA};function lA(n,t,e,s,i){const r=z5(s,t,e),o=Ce(e),a=Dn(s);if(r){const f=W5(t,a);return i==="string"?n.slice(f,f+o):n.subarray(f,f+o)}const l=i==="string"?lc(n):n,u=hs(s,i,l),h=hs(e,i);for(let f=0;f<h.size;++f){const g=h.indexToLoc(f),m=g.map((y,k)=>y+t[k]);h.set(u.get(...m),...g)}return i==="string"?dE(h.values):h.values}function Dh(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{begin:r,size:o}=s;wn(i,"slice");const[a,l]=Tw(i,r,o);L5(i,a,l);const u=e.data.get(i.dataId).values,h=lA(u,a,l,i.shape,i.dtype);return e.makeTensorInfo(l,i.dtype,h)}const oX={kernelName:x2,backendName:"cpu",kernelFunc:Dh};function cA(n,t,e,s,i,r,o){const a=t[0],l=r[0],u=new Array(l),h=new Array(a),f=t[1];if(l===0){if(a!==0)throw new Error(tE(a));const C=Ti(e,0),S=Ti(i,0);return[C,[0,f],S,u,h]}let g=!0,m=0;const y=new Array(l).fill(0);for(let C=0;C<a;++C){const S=n[C*f];if(S<0)throw new Error(eE(C,S));if(S>=l)throw new Error(nE(C,S,l));++y[S],g=g&&S>=m,m=S}let k=!0;for(let C=0;C<l;++C){const S=y[C]===0;u[C]=S,k=k&&!S,y[C]=Math.max(y[C],1),C>0&&(y[C]+=y[C-1])}if(k&&g){const C=n,S=s;for(let $=0;$<a;++$)h[$]=$;return[C,[a,f],S,u,h]}else{const C=y[l-1],S=Ti(e,C*f),$=Ti(i,C),D=new Array(l).fill(0);for(let R=0;R<a;++R){const V=n[R*f],E=D[V],q=(V===0?0:y[V-1])+E;D[V]++;for(let X=0;X<f;++X)S[q*f+X]=n[R*f+X];$[q]=s[R],h[R]=q}for(let R=0;R<l;++R)if(D[R]===0){const E=R===0?0:y[R-1];S[E*f+0]=R;for(let q=1;q<f;++q)S[E*f+q]=0;$[E]=o}return[S,[C,f],$,u,h]}}function uA(n,t,e,s,i){const r=Ce(s),o=t[0],a=i.length,l=[];let u=1,h=-1;for(let C=0;C<a;++C){const S=i[C];if(S===-1){if(h!==-1)throw new Error(sE(h,C));h=C,l.push(1)}else{if(S<0)throw new Error(iE(C,S));u*=S,l.push(S)}}if(h!==-1){if(u<=0)throw new Error(rE());const C=Math.trunc(r/u);if(u*C!==r)throw new Error(oE(s,l));l[h]=C}if(Ce(l)!==r)throw new Error(aE(s,l));const g=s.length,m=[];if(g>0){m[g-1]=1;for(let C=g-2;C>=0;--C)m[C]=m[C+1]*s[C+1]}const y=[];if(a>0){y[a-1]=1;for(let C=a-2;C>=0;--C)y[C]=y[C+1]*l[C+1]}const k=Ti(e,o*a);for(let C=0;C<o;++C){let S=0;for(let $=0;$<g;++$)S+=n[C*g+$]*m[$];for(let $=0;$<a;++$)k[C*a+$]=Math.trunc(S/y[$]),S%=y[$]}return[k,[o,a],l]}function v3(n,t,e,s,i,r=!1,o=0){const a=s.length,l=[t[0],n.length/t[0]],u=l[1],f=a>0?i[a-1]+1:0;if(f<0)throw new Error(gv());const g=t.slice();g[0]=f;const m=g.reduce((D,R)=>D*R,1),y=Ti(e,m);if(a===0)return f>0&&y.fill(o),[y,g];if(f<=0)throw new Error(gv());let k=0,C=1,S=0,$=i[k];for(;;){let D=0;if(C<a){if(D=i[C],$===D){++C;continue}if($>=D)throw new Error(lE())}if($<0||$>=f)throw new Error(cE($,f));$>S&&y.fill(o,S*u,$*u);for(let R=k;R<C;++R){const V=s[R];if(V<0||V>=l[0])throw new Error(uE(R,s[R],l[0]));for(let E=0;E<u;E++)y[$*u+E]+=n[V*u+E]}if(r)for(let R=0;R<u;R++)y[$*u+R]/=C-k;if(k=C,++C,S=$+1,$=D,C>a)break}return S<f&&y.fill(o,S*u,f*u),[y,g]}const aX=Nl(n=>Math.sqrt(n)),lX=Xs(R0,n=>Math.sqrt(n)),cX={kernelName:R0,backendName:"cpu",kernelFunc:lX};const hA=$i(((n,t)=>{const e=n-t;return e*e})),uX=ji(M0,hA),hX={kernelName:M0,backendName:"cpu",kernelFunc:uX};const dA=Nl((n,t)=>{const{pattern:e,replaceGlobal:s,rewrite:i}=t;return n.replace(new RegExp(e,s?"g":""),i)}),dX=gu(zy,dA),fX={kernelName:zy,backendName:"cpu",kernelFunc:dX};function fA(n,t,e,s){const i=hs(n,t.dtype);for(let r=0;r<i.size;r++){const o=i.indexToLoc(r),a=new Array(o.length);for(let l=0;l<a.length;l++)a[l]=o[l]*e[l]+s[l];i.set(t.get(...a),...o)}return i}class pX{constructor(t,e,s,i,r,o){this.separator=Yc(t),this.nGramWidths=e,this.leftPad=Yc(s),this.rightPad=Yc(i),this.padWidth=r,this.preserveShort=o}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,e){const s=this.getPadWidth(e);return Math.max(0,t+2*s-e+1)}createNGrams(t,e,s,i,r,o){for(let a=0;a<r;++a){const l=this.getPadWidth(o),u=Math.max(0,l-a),h=Math.max(0,l-(r-(a+1))),f=o-(u+h),g=e+(u>0?0:a-l);let m=0;m+=u*this.leftPad.length;for(let $=0;$<f;++$)m+=t[g+$].length;m+=h*this.rightPad.length;const y=u+h+f-1;m+=y*this.separator.length,s[i+a]=new Uint8Array(m);const k=s[i+a];let C=0;const S=$=>$.forEach(D=>k[C++]=D);for(let $=0;$<u;++$)S(this.leftPad),S(this.separator);for(let $=0;$<f-1;++$)S(t[g+$]),S(this.separator);if(f>0){S(t[g+f-1]);for(let $=0;$<h;++$)S(this.separator),S(this.rightPad)}else{for(let $=0;$<h-1;++$)S(this.rightPad),S(this.separator);S(this.rightPad)}}}compute(t,e){const s=t.length,i=e.length;if(i>0){let l=e[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<i;++u){let h=e[u]>=l;if(h=h&&e[u]<=s,!h)throw new Error(`Invalid split value ${e[u]}, must be in [${l}, ${s}]`);l=e[u]}if(l!==s)throw new Error(`Last split value must be data size. Expected ${s}, got ${l}`)}const r=i-1,o=Ti("int32",i);if(s===0||i===0){const l=new Array(s);for(let u=0;u<=r;++u)o[u]=0;return[l,o]}o[0]=0;for(let l=1;l<=r;++l){const u=e[l]-e[l-1];let h=0;this.nGramWidths.forEach(f=>{h+=this.getNumNGrams(u,f)}),this.preserveShort&&u>0&&h===0&&(h=1),o[l]=o[l-1]+h}const a=new Array(o[r]);for(let l=0;l<r;++l){const u=e[l];let h=o[l];if(this.nGramWidths.forEach(f=>{const g=e[l+1]-e[l],m=this.getNumNGrams(g,f);this.createNGrams(t,u,a,h,m,f),h+=m}),this.preserveShort&&h===o[l]){const f=e[l+1]-e[l];if(f===0)continue;const g=f+2*this.padWidth;this.createNGrams(t,u,a,h,1,g)}}return[a,o]}}function pA(n,t,e,s,i,r,o,a){return new pX(e,s,i,r,o,a).compute(n,t)}function gX(n,t,e,s){if(!n.length)return;if(t.length===0){for(let r=0;r<n.length;++r)s.push(n.subarray(r,r+1));return}if(t.length===1){const r=t[0];let o=n.indexOf(r);for(;o!==-1;){const a=n.subarray(0,o);(!e||a.length!==0)&&s.push(a),n=n.subarray(o+1),o=n.indexOf(r)}(!e||n.length!==0)&&s.push(n);return}let i=0;for(let r=0;r<n.length+1;r++)if(r===n.length||t.indexOf(n[r])!==-1){const o=n.subarray(i,r);(!e||o.length!==0)&&s.push(o),i=r+1}}function gA(n,t,e){const s=n.length,i=[];let r=0,o=0;const a=new Array(s);for(let g=0;g<s;++g){const m=i.length;gX(n[g],t,e,i);const y=i.length-m;a[g]=y,r+=y,o=Math.max(o,y)}const l=Ti("int32",r*2),u=new Array(r),h=[s,o];let f=0;for(let g=0;g<s;++g)for(let m=0;m<a[g];++m)l[f*2]=g,l[f*2+1]=m,u[f]=i[f],++f;return[l,u,h]}function mA(n,t){const e=Ti("int32",n.length);for(let s=0;s<n.length;++s)e[s]=ZO(n[s]).modulo(t).getLowBitsUnsigned();return e}const xA=$i(((n,t)=>n-t)),mX=g3(((n,t,e,s)=>({real:n-e,imag:t-s}))),y3=ji(O0,xA,mX),xX={kernelName:O0,backendName:"cpu",kernelFunc:y3};function bA(n,t){const e=new Array(n.rank);for(let i=0;i<e.length;i++)e[i]=n.shape[i]*t[i];const s=hs(e,n.dtype);for(let i=0;i<s.values.length;++i){const r=s.indexToLoc(i),o=new Array(n.rank);for(let l=0;l<o.length;l++)o[l]=r[l]%n.shape[l];const a=n.locToIndex(o);s.values[i]=n.values[a]}return s}const fp=(n,t)=>{const e=t.value-n.value;return e===0?n.index-t.index:e};function vA(n,t,e=0,s=n.length-1){for(;s>e;){if(s-e>600){const a=s-e+1,l=t-e+1,u=Math.log(a),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(a-h)/a)*Math.sign(l-a/2),g=Math.max(e,Math.floor(t-l*h/a+f)),m=Math.min(s,Math.floor(t+(a-l)*h/a+f));vA(n,t,g,m)}const i=n[t];let r=e,o=s;for(Id(n,e,t),fp(n[s],i)>0&&Id(n,e,s);r<o;){for(Id(n,r,o),r++,o--;fp(n[r],i)<0;)r=r+1;for(;fp(n[o],i)>0;)o=o-1}fp(n[e],i)===0?Id(n,e,o):(o=o+1,Id(n,o,s)),o<=t&&(e=o+1),t<=o&&(s=o-1)}}function yA(n,t,e,s,i){const r=t[t.length-1],[o,a]=[n.length/r,r],l=br(e,o*s),u=br("int32",o*s);for(let f=0;f<o;f++){const g=f*a,m=n.subarray(g,g+a);let y=new Array(m.length);m.forEach(($,D)=>y[D]={value:$,index:D}),s<y.length&&(vA(y,s),y=y.slice(0,s)),i&&y.sort(fp);const k=f*s,C=l.subarray(k,k+s),S=u.subarray(k,k+s);for(let $=0;$<s;$++)C[$]=y[$].value,S[$]=y[$].index}const h=t.slice();return h[h.length-1]=s,[hs(h,e,l),hs(h,"int32",u)]}function wA(n,t,e,s){const i=ds(t,e)[0],r=[1,e[0],1];for(let y=0;y<i;y++)r[0]*=e[y];r[1]=e[i];for(let y=i+1;y<e.length;y++)r[2]*=e[y];const o=new Map,a=new Int32Array(e[i]),l=new or(r,s,n),u=[],h=r[0]===1&&r[2]===1;for(let y=0;y<e[i];y++){let k;if(h)k=n[y].toString();else{const S=[];for(let $=0;$<r[0];$++)for(let D=0;D<r[2];D++)S.push(l.get($,y,D));k=S.join(",")}const C=o.get(k);if(C!=null)a[y]=C;else{const S=o.size;o.set(k,S),a[y]=S,u.push(y)}}const f=r.slice();f[1]=o.size;const g=new or(f,s);u.forEach((y,k)=>{for(let C=0;C<r[0];C++)for(let S=0;S<r[2];S++)g.set(l.get(C,y,S),C,k,S)});const m=e.slice();return m[i]=f[1],{outputValues:g.values,outputShape:m,indices:a}}const bX=Object.freeze(Object.defineProperty({__proto__:null,addImpl:$6,bincountImpl:m3,bincountReduceImpl:N6,bitwiseAndImpl:D6,castImpl:A6,ceilImpl:R6,concatImpl:M6,equalImpl:O6,expImpl:P6,expm1Impl:B6,floorDivImpl:W6,floorImpl:z6,gatherNdImpl:V6,gatherV2Impl:U6,greaterEqualImpl:H6,greaterImpl:G6,lessEqualImpl:X6,lessImpl:j6,linSpaceImpl:q6,logImpl:K6,maxImpl:Y6,maximumImpl:Z6,minimumImpl:J6,multiplyImpl:x3,negImpl:Q6,notEqualImpl:tA,prodImpl:eA,raggedGatherImpl:nA,raggedRangeImpl:sA,raggedTensorToTensorImpl:iA,rangeImpl:rA,rsqrtImpl:oA,scatterImpl:uh,sigmoidImpl:iX,simpleAbsImpl:_6,sliceImpl:lA,sparseFillEmptyRowsImpl:cA,sparseReshapeImpl:uA,sparseSegmentReductionImpl:v3,sqrtImpl:aX,squaredDifferenceImpl:hA,staticRegexReplaceImpl:dA,stridedSliceImpl:fA,stringNGramsImpl:pA,stringSplitImpl:gA,stringToHashBucketFastImpl:mA,subImpl:xA,tileImpl:bA,topKImpl:yA,transposeImpl:b3,uniqueImpl:wA},Symbol.toStringTag,{value:"Module"}));XI("cpu",()=>new X2,1);const kA=Xs(i0,n=>n>=0?n:Math.exp(n)-1),vX={kernelName:i0,backendName:"cpu",kernelFunc:kA};function CA(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{alpha:r}=s;wn([i],"leakyRelu");const o=Ce(i.shape),a=e.data.get(i.dataId).values,l=br("float32",o);for(let u=0;u<a.length;u++)l[u]=a[u]<0?r*a[u]:a[u];return e.makeTensorInfo(i.shape,"float32",l)}const yX={kernelName:H1,backendName:"cpu",kernelFunc:CA};const wX=$i((n,t)=>n<0?t*n:n);function SA(n){const{inputs:t,backend:e}=n,{x:s,alpha:i}=t;wn([s,i],"prelu");const r=e.data.get(s.dataId).values,o=e.data.get(i.dataId).values,[a,l]=wX(s.shape,i.shape,r,o,"float32");return e.makeTensorInfo(l,"float32",a)}const kX={kernelName:u2,backendName:"cpu",kernelFunc:SA};const TA=Xs(C0,n=>Math.max(0,n)),CX={kernelName:C0,backendName:"cpu",kernelFunc:TA};const IA=Xs(S0,n=>Math.min(Math.max(0,n),6)),SX={kernelName:S0,backendName:"cpu",kernelFunc:IA};function a1(n,t,e,s,i){if(e==="linear")return Il({inputs:{x:t},backend:n});if(e==="relu")return TA({inputs:{x:t},backend:n});if(e==="elu")return kA({inputs:{x:t},backend:n});if(e==="relu6")return IA({inputs:{x:t},backend:n});if(e==="prelu")return SA({inputs:{x:t,alpha:s},backend:n});if(e==="leakyrelu")return CA({inputs:{x:t},backend:n,attrs:{alpha:i}});if(e==="sigmoid")return aA({inputs:{x:t},backend:n});throw new Error(`Activation ${e} has not been implemented for the CPU backend.`)}function ii(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{shape:r}=s,o=Ce(i.shape),a=nI(r,o),l=Ce(a);wt(o===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),e.incRef(i.dataId);const u=e.data.get(i.dataId);if(u.complexTensorInfos!=null){const h=u.complexTensorInfos.real,f=u.complexTensorInfos.imag;h.shape=a,f.shape=a}return{dataId:i.dataId,shape:a,dtype:i.dtype}}const TX={kernelName:d2,backendName:"cpu",kernelFunc:ii};function EA(n){const{inputs:t,backend:e,attrs:s}=n,{a:i,b:r}=t,{transposeA:o,transposeB:a}=s;wn([i,r],"matMul");const l=i.shape.length,u=r.shape.length,h=o?i.shape[l-2]:i.shape[l-1],f=a?r.shape[u-1]:r.shape[u-2],g=o?i.shape[l-1]:i.shape[l-2],m=a?r.shape[u-2]:r.shape[u-1],y=i.shape.slice(0,-2),k=r.shape.slice(0,-2),C=Ce(y),S=Ce(k),D=es(i.shape.slice(0,-2),r.shape.slice(0,-2)).concat([g,m]);wt(h===f,()=>`Error in matMul: inner shapes (${h}) and (${f}) of Tensors with shapes ${i.shape} and ${r.shape} and transposeA=${o} and transposeB=${a} must match.`);const R=o?[C,h,g]:[C,g,h],V=a?[S,m,f]:[S,f,m],E=ii({inputs:{x:i},backend:e,attrs:{shape:R}}),q=ii({inputs:{x:r},backend:e,attrs:{shape:V}}),X=o?E.shape[1]:E.shape[2],B=o?E.shape[2]:E.shape[1],U=a?q.shape[1]:q.shape[2],K=Math.max(C,S),Y=e.data.get(E.dataId).values,ct=e.data.get(q.dataId).values,j=Dn(E.shape),ht=Dn(q.shape),[It,yt,Ot]=o?[j[0],1,j[1]]:[j[0],j[1],1],[Ct,Gt,vt]=a?[1,ht[1],ht[0]]:[ht[1],1,ht[0]],at=B*U,Pt=hs([K,B,U],E.dtype),jt=Pt.values,Ut=e.blockSize;for(let me=0;me<K;me++){const Ee=me%C,le=me%S;for(let ce=0;ce<B;ce+=Ut){const De=Math.min(ce+Ut,B);for(let ae=0;ae<U;ae+=Ut){const Oe=Math.min(ae+Ut,U);for(let Le=0;Le<X;Le+=Ut){const J=Math.min(Le+Ut,X);for(let Mt=ce;Mt<De;Mt++)for(let Ft=ae;Ft<Oe;Ft++){let St=0;for(let ft=Le;ft<J;ft++){const zt=Y[Ee*It+Mt*yt+ft*Ot],Et=ct[ft*Ct+Ft*Gt+le*vt];St+=zt*Et}jt[me*at+(Mt*U+Ft)]+=St}}}}}return e.disposeIntermediateTensorInfo(E),e.disposeIntermediateTensorInfo(q),e.makeTensorInfo(D,Pt.dtype,Pt.values)}const IX={kernelName:$1,backendName:"cpu",kernelFunc:EA};function EX(n){const{inputs:t,backend:e,attrs:s}=n,{a:i,b:r,bias:o,preluActivationWeights:a}=t,{transposeA:l,transposeB:u,activation:h,leakyreluAlpha:f}=s;let g,m,y;const k=[];g=EA({inputs:{a:i,b:r},attrs:{transposeA:l,transposeB:u},backend:e}),o&&(m=jd({inputs:{a:g,b:o},backend:e}),k.push(g),g=m),h&&(y=a1(e,g,h,a,f),k.push(g),g=y);for(const S of k)e.disposeIntermediateTensorInfo(S);return g}const _X={kernelName:Wm,backendName:"cpu",kernelFunc:EX};const AX=Xs(Hp,n=>Math.acos(n)),$X={kernelName:Hp,backendName:"cpu",kernelFunc:AX};const NX=Xs(jp,n=>Math.acosh(n)),DX={kernelName:jp,backendName:"cpu",kernelFunc:NX};function RX(n){const{inputs:t,backend:e}=n,s=t;wn(t,"addN");const i=s.map(a=>e.data.get(a.dataId).values),r=hs(s[0].shape,s[0].dtype),o=r.values;for(let a=0;a<s.length;a++){const l=i[a];for(let u=0;u<o.length;u++)o[u]+=l[u]}return e.makeTensorInfo(r.shape,r.dtype,r.values)}const MX={kernelName:ry,backendName:"cpu",kernelFunc:RX};function OX(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{axis:r,keepDims:o}=s;wn(i,"all");const a=ds(r,i.shape);let l=a;const u=xi(l,i.shape.length);let h=i;u!=null&&(h=oo({inputs:{x:i},backend:e,attrs:{perm:u}}),l=_i(l.length,i.shape.length)),ur("all",l,h.shape.length);const[f,g]=tr(h.shape,l),m=Ce(g),y=vr(Ce(f),h.dtype),k=e.data.get(h.dataId).values;for(let S=0;S<y.length;++S){const $=S*m;let D=k[$];for(let R=0;R<m;++R){const V=k[$+R];D=D&&V}y[S]=D}u!=null&&e.disposeIntermediateTensorInfo(h);const C=e.makeTensorInfo(f,h.dtype,y);if(o){const S=Fi(f,a),$=ii({inputs:{x:C},backend:e,attrs:{shape:S}});return e.disposeIntermediateTensorInfo(C),$}return C}const FX={kernelName:oy,backendName:"cpu",kernelFunc:OX};function PX(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{axis:r,keepDims:o}=s;wn(i,"any");const a=ds(r,i.shape);let l=a;const u=xi(l,i.shape.length);let h=i;u!=null&&(h=oo({inputs:{x:i},backend:e,attrs:{perm:u}}),l=_i(l.length,i.shape.length)),ur("any",l,h.shape.length);const[f,g]=tr(h.shape,l),m=Ce(g),y=vr(Ce(f),h.dtype),k=e.data.get(h.dataId).values;for(let S=0;S<y.length;++S){const $=S*m;let D=k[$];for(let R=0;R<m;++R){const V=k[$+R];D=D||V}y[S]=D}u!=null&&e.disposeIntermediateTensorInfo(h);const C=e.makeTensorInfo(f,h.dtype,y);if(o){const S=Fi(f,a),$=ii({inputs:{x:C},backend:e,attrs:{shape:S}});return e.disposeIntermediateTensorInfo(C),$}return C}const LX={kernelName:ay,backendName:"cpu",kernelFunc:PX};function BX(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{axis:r}=s;wn(i,"argMax");let o=ds(r,i.shape);const a=xi(o,i.shape.length);let l=i;const u=[];a!=null&&(l=oo({inputs:{x:i},backend:e,attrs:{perm:a}}),u.push(l),o=_i(o.length,l.shape.length)),o=[o[0]],ur("argMax",o,l.shape.length);const[h,f]=tr(l.shape,o),g=Ce(h),m=vr(g,"int32"),y=Ce(f),k=e.data.get(l.dataId).values;for(let C=0;C<m.length;++C){const S=C*y;let $=k[S],D=0;for(let R=0;R<y;++R){const V=k[S+R];V>$&&($=V,D=R)}m[C]=D}return u.forEach(C=>e.disposeIntermediateTensorInfo(C)),e.makeTensorInfo(h,"int32",m)}const zX={kernelName:I1,backendName:"cpu",kernelFunc:BX};function WX(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{axis:r}=s;wn(i,"argMin");let o=ds(r,i.shape);const a=xi(o,i.shape.length);let l=i;const u=[];a!=null&&(l=oo({inputs:{x:i},backend:e,attrs:{perm:a}}),u.push(l),o=_i(o.length,l.shape.length)),o=[o[0]],ur("argMin",o,l.shape.length);const[h,f]=tr(l.shape,o),g=Ce(h),m=vr(g,"int32"),y=Ce(f),k=e.data.get(l.dataId).values;for(let C=0;C<m.length;++C){const S=C*y;let $=k[S],D=0;for(let R=0;R<y;++R){const V=k[S+R];V<$&&($=V,D=R)}m[C]=D}return u.forEach(C=>e.disposeIntermediateTensorInfo(C)),e.makeTensorInfo(h,"int32",m)}const VX={kernelName:E1,backendName:"cpu",kernelFunc:WX};const UX=Xs(Xp,n=>Math.asin(n)),GX={kernelName:Xp,backendName:"cpu",kernelFunc:UX};const HX=Xs(qp,n=>Math.asinh(n)),jX={kernelName:qp,backendName:"cpu",kernelFunc:HX};const XX=Xs(Kp,n=>Math.atan(n)),qX={kernelName:Kp,backendName:"cpu",kernelFunc:XX};const KX=$i((n,t)=>Math.atan2(n,t)),YX=ji(Zp,KX),ZX={kernelName:Zp,backendName:"cpu",kernelFunc:YX};const JX=Xs(Yp,n=>Math.atanh(n)),QX={kernelName:Yp,backendName:"cpu",kernelFunc:JX};function w3(n,t,e,s,i,r){const o=i.strideHeight,a=i.strideWidth,l=i.dilationHeight,u=i.dilationWidth,h=i.effectiveFilterHeight,f=i.effectiveFilterWidth,g=i.padInfo.top,m=i.padInfo.left,y=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,k=hs(i.outShape,e),C=k.values,S=i.outShape[1]*i.outShape[2]*i.outShape[3],$=i.outShape[2]*i.outShape[3],D=i.outShape[3];for(let R=0;R<i.batchSize;++R){const V=R*S,E=R*s[0];for(let q=0;q<i.inChannels;++q)for(let X=0;X<i.outHeight;++X){const B=X*o-g,U=Math.max(0,B),K=Math.min(i.inHeight,h+B),Y=V+X*$;for(let ct=0;ct<i.outWidth;++ct){const j=ct*a-m,ht=Math.max(0,j),It=Math.min(i.inWidth,f+j);let yt=y,Ot=0,Ct=0;for(let vt=U;vt<K;vt+=l){const at=E+vt*s[1];for(let Pt=ht;Pt<It;Pt+=u){const jt=at+Pt*s[2],Ut=n[jt+q];r==="max"&&Ut>yt?yt=Ut:r==="avg"&&(Ot+=Ut,Ct++)}if(isNaN(yt))break}const Gt=Y+ct*D+q;C[Gt]=r==="avg"?Ot/Ct:yt}}}return k}function _A(n,t,e,s,i=!1,r=!1){const o=hs(s.outShape,"int32"),a=s.strideHeight,l=s.strideWidth,u=s.dilationHeight,h=s.dilationWidth,f=s.effectiveFilterHeight,g=s.effectiveFilterWidth,m=s.padInfo.top,y=s.padInfo.left,k=hs(t,e,n);for(let C=0;C<s.batchSize;++C)for(let S=0;S<s.inChannels;++S)for(let $=0;$<s.outHeight;++$){const D=$*a-m;let R=D;for(;R<0;)R+=u;const V=Math.min(s.inHeight,f+D);for(let E=0;E<s.outWidth;++E){const q=E*l-y;let X=q;for(;X<0;)X+=h;const B=Math.min(s.inWidth,g+q);let U=Number.NEGATIVE_INFINITY,K=-1;for(let Y=R;Y<V;Y+=u){const ct=Y-D;for(let j=X;j<B;j+=h){const ht=j-q,It=k.get(C,Y,j,S);It>U&&(U=It,i?K=r?((C*s.inHeight+Y)*s.inWidth+j)*s.inChannels+S:(Y*s.inWidth+j)*s.inChannels+S:K=ct*g+ht)}}o.set(K,C,$,E,S)}}return o}function AA(n,t,e,s,i,r){const o=i.strideDepth,a=i.strideHeight,l=i.strideWidth,u=i.dilationDepth,h=i.dilationHeight,f=i.dilationWidth,g=i.effectiveFilterDepth,m=i.effectiveFilterHeight,y=i.effectiveFilterWidth,k=i.padInfo.front,C=i.padInfo.top,S=i.padInfo.left,$=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,D=hs(i.outShape,e),R=D.values,V=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],E=i.outShape[2]*i.outShape[3]*i.outShape[4],q=i.outShape[3]*i.outShape[4],X=i.outShape[4];for(let B=0;B<i.batchSize;++B){const U=B*V,K=B*s[0];for(let Y=0;Y<i.inChannels;++Y)for(let ct=0;ct<i.outDepth;++ct){const j=ct*o-k;let ht=j;for(;ht<0;)ht+=u;const It=Math.min(i.inDepth,g+j),yt=U+ct*E;for(let Ot=0;Ot<i.outHeight;++Ot){const Ct=Ot*a-C;let Gt=Ct;for(;Gt<0;)Gt+=h;const vt=Math.min(i.inHeight,m+Ct),at=yt+Ot*q;for(let Pt=0;Pt<i.outWidth;++Pt){const jt=Pt*l-S;let Ut=jt;for(;Ut<0;)Ut+=f;const me=Math.min(i.inWidth,y+jt),Ee=at+Pt*X;let le=$,ce=0,De=0;for(let Oe=ht;Oe<It;Oe+=u){const Le=K+Oe*s[1];for(let J=Gt;J<vt;J+=h){const Mt=Le+J*s[2];for(let Ft=Ut;Ft<me;Ft+=f){const St=Mt+Ft*s[3],ft=n[St+Y];if(r==="max"&&ft>le?le=ft:r==="avg"&&(ce+=ft,De++),isNaN(le))break}if(isNaN(le))break}if(isNaN(le))break}const ae=Ee+Y;R[ae]=r==="avg"?ce/Math.max(De,1):le}}}}return D}function tq(n,t){const e=hs(t.outShape,"int32"),s=t.strideDepth,i=t.strideHeight,r=t.strideWidth,o=t.dilationDepth,a=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,h=t.effectiveFilterHeight,f=t.effectiveFilterWidth,g=t.padInfo.front,m=t.padInfo.top,y=t.padInfo.left;for(let k=0;k<t.batchSize;++k)for(let C=0;C<t.inChannels;++C)for(let S=0;S<t.outDepth;++S){const $=S*s-g;let D=$;for(;D<0;)D+=o;const R=Math.min(t.inDepth,u+$);for(let V=0;V<t.outHeight;++V){const E=V*i-m;let q=E;for(;q<0;)q+=a;const X=Math.min(t.inHeight,h+E);for(let B=0;B<t.outWidth;++B){const U=B*r-y;let K=U;for(;K<0;)K+=l;const Y=Math.min(t.inWidth,f+U);let ct=Number.NEGATIVE_INFINITY,j=-1;for(let ht=D;ht<R;ht+=o){const It=ht-$;for(let yt=q;yt<X;yt+=a){const Ot=yt-E;for(let Ct=K;Ct<Y;Ct+=l){const Gt=Ct-U,vt=n.get(k,ht,yt,Ct,C);vt>=ct&&(ct=vt,j=It*h*f+Ot*h+Gt)}}}e.set(j,k,S,V,B,C)}}}return e}function eq(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t;wn(i,"avgPool");const{filterSize:r,strides:o,pad:a,dimRoundingMode:l}=s,u=1;wt(Sr(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const h=ga(i.shape,r,o,u,a,l);let f;if(h.filterWidth===1&&h.filterHeight===1&&zs(h.inShape,h.outShape))f=Il({inputs:{x:i},backend:e});else{const g=e.data.get(i.dataId).values,m=Dn(i.shape),y=w3(g,i.shape,i.dtype,m,h,"avg");f=e.makeTensorInfo(h.outShape,i.dtype,y.values)}return f}const nq={kernelName:_1,backendName:"cpu",kernelFunc:eq};function sq(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{filterSize:r,strides:o,pad:a,dimRoundingMode:l,dataFormat:u}=s;wn(i,"avgPool3d");const h=hc(i.shape,r,o,1,a,l,u),f=e.data.get(i.dataId).values,g=AA(f,i.shape,i.dtype,Dn(i.shape),h,"avg");return e.makeTensorInfo(g.shape,"float32",g.values)}const iq={kernelName:A1,backendName:"cpu",kernelFunc:sq};function rq(n){const{inputs:t,backend:e,attrs:s}=n,{dy:i,input:r}=t,{filterSize:o,strides:a,pad:l,dimRoundingMode:u}=s;wn([i,r],"avgPool3DGrad");const h=hc(r.shape,o,a,1,l,u),f=h.strideDepth,g=h.strideHeight,m=h.strideWidth,y=h.filterDepth,k=h.filterHeight,C=h.filterWidth,S=h.dilationDepth,$=h.dilationHeight,D=h.dilationWidth,R=h.effectiveFilterDepth,V=h.effectiveFilterHeight,E=h.effectiveFilterWidth,q=R-1-h.padInfo.front,X=E-1-h.padInfo.left,B=V-1-h.padInfo.top,U=hs(r.shape,"float32"),K=1/(y*k*C),Y=e.bufferSync(i);for(let ct=0;ct<h.batchSize;++ct)for(let j=0;j<h.inChannels;++j)for(let ht=0;ht<h.inDepth;++ht)for(let It=0;It<h.inHeight;++It)for(let yt=0;yt<h.inWidth;++yt){const Ot=ht-q,Ct=It-B,Gt=yt-X;let vt=0;for(let at=0;at<R;at+=S){const Pt=(Ot+at)/f;if(!(Pt<0||Pt>=h.outDepth||Math.floor(Pt)!==Pt))for(let jt=0;jt<V;jt+=$){const Ut=(Ct+jt)/g;if(!(Ut<0||Ut>=h.outHeight||Math.floor(Ut)!==Ut))for(let me=0;me<E;me+=D){const Ee=(Gt+me)/m;if(Ee<0||Ee>=h.outWidth||Math.floor(Ee)!==Ee)continue;const le=Y.get(ct,Pt,Ut,Ee,j);vt+=le}}}U.set(vt*K,ct,ht,It,yt,j)}return e.makeTensorInfo(U.shape,U.dtype,U.values)}const oq={kernelName:cy,backendName:"cpu",kernelFunc:rq};function aq(n){const{inputs:t,backend:e,attrs:s}=n,{dy:i,input:r}=t,o=r;wn([i,r],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=s,h=ga(o.shape,a,l,1,u),f=h.strideHeight,g=h.strideWidth,m=h.filterHeight,y=h.filterWidth,k=h.dilationHeight,C=h.dilationWidth,S=h.effectiveFilterHeight,$=h.effectiveFilterWidth,D=$-1-h.padInfo.left,R=S-1-h.padInfo.top,V=hs(o.shape,"float32"),E=1/(m*y),q=e.data.get(i.dataId).values,X=hs(i.shape,"float32",q);for(let B=0;B<h.batchSize;++B)for(let U=0;U<h.inChannels;++U)for(let K=0;K<h.inHeight;++K)for(let Y=0;Y<h.inWidth;++Y){const ct=K-R,j=Y-D;let ht=0;for(let It=0;It<S;It+=k){const yt=(ct+It)/f;if(!(yt<0||yt>=h.outHeight||Math.floor(yt)!==yt))for(let Ot=0;Ot<$;Ot+=C){const Ct=(j+Ot)/g;if(Ct<0||Ct>=h.outWidth||Math.floor(Ct)!==Ct)continue;const Gt=X.get(B,yt,Ct,U);ht+=Gt}}V.set(ht*E,B,K,Y,U)}return e.makeTensorInfo(V.shape,V.dtype,V.values)}const lq={kernelName:ly,backendName:"cpu",kernelFunc:aq};function cq(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,scale:r,offset:o,mean:a,variance:l}=t;wt(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),wt(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),wt(r==null||a.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),wn([i,a,l,r,o],"batchNorm");let{varianceEpsilon:u}=s;u==null&&(u=.001);const h=e.data.get(i.dataId).values,f=e.data.get(a.dataId).values,g=e.data.get(l.dataId).values,m=r?e.data.get(r.dataId).values:new Float32Array([1]),y=o?e.data.get(o.dataId).values:new Float32Array([0]),k=new Float32Array(h.length),C=y.length,S=m.length,$=g.length,D=f.length;let R=0,V=0,E=0,q=0;for(let X=0;X<h.length;++X)k[X]=y[R++]+(h[X]-f[V++])*m[E++]/Math.sqrt(g[q++]+u),R>=C&&(R=0),V>=D&&(V=0),E>=S&&(E=0),q>=$&&(q=0);return e.makeTensorInfo(i.shape,i.dtype,k)}const uq={kernelName:V1,backendName:"cpu",kernelFunc:cq};function hq(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{blockShape:r,crops:o}=s;wn([i],"batchToSpaceND");const a=r.reduce((S,$)=>S*$),l=H0(i.shape,r,a),u=j0(l.length,r.length),h=X0(i.shape,r,a),f=Aw(o,r.length),g=$w(h,o,r.length),m=ii({inputs:{x:i},backend:e,attrs:{shape:l}}),y=oo({inputs:{x:m},backend:e,attrs:{perm:u}}),k=ii({inputs:{x:y},backend:e,attrs:{shape:h}}),C=Dh({inputs:{x:k},backend:e,attrs:{begin:f,size:g}});return e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(y),e.disposeIntermediateTensorInfo(k),C}const dq={kernelName:N1,backendName:"cpu",kernelFunc:hq};function fq(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,weights:r}=t,{size:o}=s,a=e.data.get(i.dataId).values,l=e.data.get(r.dataId).values,u=m3(a,l,r.dtype,r.shape,o);return e.makeTensorInfo([o],r.dtype,u)}const pq={kernelName:uy,backendName:"cpu",kernelFunc:fq};function gq(n){const{inputs:t,backend:e}=n,{s0:s,s1:i}=t,r=e.data.get(s.dataId).values,o=e.data.get(i.dataId).values,a=es(Array.from(r),Array.from(o));return e.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const mq={kernelName:lI,backendName:"cpu",kernelFunc:gq};const xq=Xs(t0,(n,t)=>{const e=t;return n>e.clipValueMax?e.clipValueMax:n<e.clipValueMin?e.clipValueMin:n}),bq={kernelName:t0,backendName:"cpu",kernelFunc:xq};const vq=n=>{const{x:t}=n.inputs,e=n.backend,s=new Float32Array(Ce(t.shape)),i=e.data.get(t.dataId),r=i.complexTensorInfos.real,o=i.complexTensorInfos.imag,a=e.data.get(r.dataId).values,l=e.data.get(o.dataId).values;for(let u=0;u<a.length;u++){const h=a[u],f=l[u];s[u]=Math.hypot(h,f)}return e.makeOutput(s,t.shape,"float32")},yq={kernelName:D1,backendName:"cpu",kernelFunc:vq};function Xd(n){const{inputs:t,backend:e}=n,{input:s}=t,i=e.data.get(s.dataId).complexTensorInfos.imag,r=e.data.get(i.dataId).values;return e.makeTensorInfo(i.shape,i.dtype,r)}const wq={kernelName:_y,backendName:"cpu",kernelFunc:Xd};function qd(n){const{inputs:t,backend:e,attrs:s}=n,{axis:i}=s,r=ds(i,t[0].shape)[0],o=t.map(k=>k.shape);Iw(o,r);let a=vl(t.map(k=>k.shape),r);if(Ce(a)===0)return e.makeTensorInfo(a,t[0].dtype,[]);const l=t.filter(k=>Ce(k.shape)>0);if(l.length===1)return Il({inputs:{x:l[0]},backend:e});if(l[0].dtype==="complex64"){const k=l.map(R=>Nh({inputs:{input:R},backend:e})),C=l.map(R=>Xd({inputs:{input:R},backend:e})),S=qd({inputs:k,backend:e,attrs:{axis:r}}),$=qd({inputs:C,backend:e,attrs:{axis:r}}),D=wo({inputs:{real:S,imag:$},backend:e});return k.forEach(R=>e.disposeIntermediateTensorInfo(R)),C.forEach(R=>e.disposeIntermediateTensorInfo(R)),e.disposeIntermediateTensorInfo(S),e.disposeIntermediateTensorInfo($),D}const u=l.map(k=>{const S=[-1,Ce(k.shape.slice(r))];return ii({inputs:{x:k},backend:e,attrs:{shape:S}})}),h=u.map(k=>({vals:e.data.get(k.dataId).values,shape:k.shape}));a=vl(u.map(k=>k.shape),1);const f=u[0].shape[0]===1,g=M6(h,a,t[0].dtype,f),m=vl(l.map(k=>k.shape),r),y=e.makeTensorInfo(m,t[0].dtype,g);return u.forEach(k=>e.disposeIntermediateTensorInfo(k)),y}const kq={kernelName:R1,backendName:"cpu",kernelFunc:qd};function $A(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,filter:r}=t,{strides:o,pad:a,dataFormat:l,dilations:u,dimRoundingMode:h}=s;wn([i,r],"conv2d");const f=dc(l),g=cr(i.shape,r.shape,o,u,a,h,!1,f),m=g.filterHeight,y=g.filterWidth,k=g.dilationHeight,C=g.dilationWidth,S=g.padInfo.left,$=g.padInfo.top,D=g.dataFormat==="channelsLast",R=new or(g.outShape,i.dtype),V=Dn(i.shape),E=Dn(r.shape),q=V[0],X=D?V[1]:V[2],B=D?V[2]:1,U=D?1:V[1],K=R.strides[0],Y=D?R.strides[1]:R.strides[2],ct=D?R.strides[2]:1,j=D?1:R.strides[1],ht=e.data.get(i.dataId).values,It=e.data.get(r.dataId).values,yt=R.values;for(let Ot=0;Ot<g.batchSize;++Ot){const Ct=Ot*q,Gt=Ot*K;for(let vt=0;vt<g.outHeight;++vt){const at=Gt+vt*Y,Pt=vt*g.strideHeight-$;for(let jt=0;jt<m;++jt){const Ut=Pt+jt*k;if(Ut<0||Ut>=g.inHeight)continue;const me=jt*E[0],Ee=Ct+Ut*X;for(let le=0;le<g.outWidth;++le){const ce=at+le*ct,De=le*g.strideWidth-S;for(let ae=0;ae<y;++ae){const Oe=De+ae*C;if(Oe<0||Oe>=g.inWidth)continue;const Le=me+ae*E[1],J=Ee+Oe*B;let Mt=Le;for(let Ft=0;Ft<g.inChannels;++Ft){const St=ht[J+Ft*U];for(let ft=0;ft<g.outChannels;++ft)yt[ce+ft*j]+=St*It[Mt+ft];Mt+=g.outChannels}}}}}}return e.makeTensorInfo(R.shape,R.dtype,yt)}const Cq={kernelName:M1,backendName:"cpu",kernelFunc:$A};function Sq(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,dy:r}=t,{strides:o,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:h}=s;wn([i,r],"conv2dBackpropFilter");const f=dc(l),g=cr(i.shape,h,o,1,a,u,!1,f),{strideHeight:m,strideWidth:y,filterHeight:k,filterWidth:C}=g,S=g.dataFormat==="channelsLast",$=new or(g.filterShape,"float32"),D=g.padInfo.left,R=g.padInfo.top,V=e.data.get(i.dataId).values,E=e.data.get(r.dataId).values,q=new or(i.shape,i.dtype,V),X=new or(r.shape,r.dtype,E);for(let B=0;B<k;++B){const U=Math.max(0,Math.ceil((R-B)/m)),K=Math.min(g.outHeight,(g.inHeight+R-B)/m);for(let Y=0;Y<C;++Y){const ct=Math.max(0,Math.ceil((D-Y)/y)),j=Math.min(g.outWidth,(g.inWidth+D-Y)/y);for(let ht=0;ht<g.inChannels;++ht)for(let It=0;It<g.outChannels;++It){let yt=0;for(let Ot=0;Ot<g.batchSize;++Ot)for(let Ct=U;Ct<K;++Ct){const Gt=B+Ct*m-R;for(let vt=ct;vt<j;++vt){const at=Y+vt*y-D;S?yt+=q.get(Ot,Gt,at,ht)*X.get(Ot,Ct,vt,It):yt+=q.get(Ot,ht,Gt,at)*X.get(Ot,It,Ct,vt)}}$.set(yt,B,Y,ht,It)}}}return e.makeTensorInfo($.shape,$.dtype,$.values)}const Tq={kernelName:fy,backendName:"cpu",kernelFunc:Sq};function Iq(n){const{inputs:t,backend:e,attrs:s}=n,{dy:i,filter:r}=t,{inputShape:o,strides:a,pad:l,dataFormat:u,dimRoundingMode:h}=s;wn([i,r],"conv2dBackpropInput");const f=Dn(r.shape),g=Dn(i.shape);let m=dc(u);const y=cr(o,r.shape,a,1,l,h,!1,m),k=new or(y.inShape,"float32"),C=k.values,S=e.data.get(i.dataId).values,$=e.data.get(r.dataId).values,[D,R,V]=f,{batchSize:E,filterHeight:q,filterWidth:X,inChannels:B,inHeight:U,inWidth:K,outChannels:Y,outHeight:ct,outWidth:j,strideHeight:ht,strideWidth:It}=y;m=y.dataFormat;const yt=q-1-y.padInfo.top,Ot=X-1-y.padInfo.left,Ct=m==="channelsLast",Gt=k.strides[0],vt=Ct?k.strides[1]:k.strides[2],at=Ct?k.strides[2]:1,Pt=Ct?1:k.strides[1],jt=g[0],Ut=Ct?g[1]:g[2],me=Ct?g[2]:1,Ee=Ct?1:g[1];for(let le=0;le<E;++le)for(let ce=0;ce<B;++ce)for(let De=0;De<U;++De){const ae=De-yt,Oe=Math.max(0,Math.ceil(ae/ht)),Le=Math.min(ct,(q+ae)/ht);for(let J=0;J<K;++J){const Mt=J-Ot,Ft=Math.max(0,Math.ceil(Mt/It)),St=Math.min(j,(X+Mt)/It);let ft=0;for(let Et=Oe;Et<Le;++Et){const de=Et*ht-ae;for(let Xt=Ft;Xt<St;++Xt){const be=Xt*It-Mt,Te=jt*le+Ut*Et+me*Xt,$e=D*(q-1-de)+R*(X-1-be)+V*ce;for(let Pe=0;Pe<Y;++Pe){const Ae=S[Te+Ee*Pe],vn=$[$e+Pe];ft+=Ae*vn}}}const zt=Gt*le+vt*De+at*J+Pt*ce;C[zt]=ft}}return e.makeTensorInfo(k.shape,k.dtype,k.values)}const Eq={kernelName:O1,backendName:"cpu",kernelFunc:Iq};function _q(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,filter:r}=t,{strides:o,pad:a,dilations:l}=s;wn([i,r],"conv3d");const u=cu(i.shape,r.shape,o,l,a),{filterDepth:h,filterHeight:f,filterWidth:g,dilationDepth:m,dilationHeight:y,dilationWidth:k,padInfo:C}=u,S=C.front,$=C.left,D=C.top,R=new or(u.outShape,i.dtype),V=e.data.get(i.dataId).values,E=e.data.get(r.dataId).values,q=R.values,X=Dn(i.shape),B=Dn(r.shape);for(let U=0;U<u.batchSize;++U){const K=U*X[0],Y=U*R.strides[0];for(let ct=0;ct<u.outDepth;++ct){const j=Y+ct*R.strides[1],ht=ct*u.strideDepth-S;for(let It=0;It<h;++It){const yt=ht+It*m;if(yt<0||yt>=u.inDepth)continue;const Ot=It*B[0],Ct=K+yt*X[1];for(let Gt=0;Gt<u.outHeight;++Gt){const vt=j+Gt*R.strides[2],at=Gt*u.strideHeight-D;for(let Pt=0;Pt<f;++Pt){const jt=at+Pt*y;if(jt<0||jt>=u.inHeight)continue;const Ut=Ot+Pt*B[1],me=Ct+jt*X[2];for(let Ee=0;Ee<u.outWidth;++Ee){const le=vt+Ee*u.outChannels,ce=Ee*u.strideWidth-$;for(let De=0;De<g;++De){const ae=ce+De*k;if(ae<0||ae>=u.inWidth)continue;const Oe=Ut+De*B[2],Le=me+ae*u.inChannels;let J=Oe;for(let Mt=0;Mt<u.inChannels;++Mt){const Ft=V[Le+Mt];for(let St=0;St<u.outChannels;++St)q[le+St]+=Ft*E[J+St];J+=u.outChannels}}}}}}}}return e.makeTensorInfo(R.shape,R.dtype,R.values)}const Aq={kernelName:F1,backendName:"cpu",kernelFunc:_q};function $q(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,dy:r}=t,{strides:o,pad:a,filterShape:l}=s;wn([i,r],"conv3dBackpropFilterV2");const u=Dn(i.shape),h=Dn(r.shape),f=cu(i.shape,l,o,1,a),g=f.strideDepth,m=f.strideHeight,y=f.strideWidth,k=f.filterDepth,C=f.filterHeight,S=f.filterWidth,$=new or(f.filterShape,"float32"),D=$.values,[R,V,E,q]=$.strides,X=e.data.get(r.dataId).values,[B,U,K,Y]=h,ct=e.data.get(i.dataId).values,[j,ht,It,yt]=u,Ot=f.padInfo.front,Ct=f.padInfo.left,Gt=f.padInfo.top;for(let vt=0;vt<k;++vt){const at=Math.max(0,Math.ceil((Ot-vt)/g)),Pt=Math.min(f.outDepth,(f.inDepth+Ot-vt)/g),jt=vt*R;for(let Ut=0;Ut<C;++Ut){const me=Math.max(0,Math.ceil((Gt-Ut)/m)),Ee=Math.min(f.outHeight,(f.inHeight+Gt-Ut)/m),le=Ut*V+jt;for(let ce=0;ce<S;++ce){const De=Math.max(0,Math.ceil((Ct-ce)/y)),ae=Math.min(f.outWidth,(f.inWidth+Ct-ce)/y),Oe=ce*E+le;for(let Le=0;Le<f.inChannels;++Le){const J=Le*q+Oe;for(let Mt=0;Mt<f.outChannels;++Mt){let Ft=0;for(let St=0;St<f.batchSize;++St){const ft=St*j,zt=St*B;for(let Et=at;Et<Pt;++Et){const Xt=(vt+Et*g-Ot)*ht+ft,be=Et*U+zt;for(let Te=me;Te<Ee;++Te){const Pe=(Ut+Te*m-Gt)*It+Xt,Ae=Te*K+be;for(let vn=De;vn<ae;++vn){const ei=(ce+vn*y-Ct)*yt+Pe,ps=vn*Y+Ae;Ft+=ct[ei+Le]*X[ps+Mt]}}}}D[J+Mt]=Ft}}}}}return e.makeTensorInfo($.shape,$.dtype,$.values)}const Nq={kernelName:py,backendName:"cpu",kernelFunc:$q};function Dq(n){const{inputs:t,backend:e,attrs:s}=n,{dy:i,filter:r}=t,{pad:o,strides:a,inputShape:l}=s;wn([i],"conv3dBackpropInputV2");const u=Dn(i.shape),h=Dn(r.shape),f=cu(l,r.shape,a,1,o),g=new or(f.inShape,"float32"),m=g.values,[y,k,C,S]=g.strides,$=e.data.get(i.dataId).values,[D,R,V,E]=u,q=e.data.get(r.dataId).values,[X,B,U,K]=h,{batchSize:Y,filterDepth:ct,filterHeight:j,filterWidth:ht,inChannels:It,inDepth:yt,inHeight:Ot,inWidth:Ct,outChannels:Gt,outDepth:vt,outHeight:at,outWidth:Pt,strideDepth:jt,strideHeight:Ut,strideWidth:me}=f,Ee=ct-1-f.padInfo.front,le=j-1-f.padInfo.top,ce=ht-1-f.padInfo.left;for(let De=0;De<Y;++De)for(let ae=0;ae<It;++ae)for(let Oe=0;Oe<yt;++Oe){const Le=Oe-Ee,J=Math.max(0,Math.ceil(Le/jt)),Mt=Math.min(vt,(ct+Le)/jt);for(let Ft=0;Ft<Ot;++Ft){const St=Ft-le,ft=Math.max(0,Math.ceil(St/Ut)),zt=Math.min(at,(j+St)/Ut);for(let Et=0;Et<Ct;++Et){const de=Et-ce,Xt=Math.max(0,Math.ceil(de/me)),be=Math.min(Pt,(ht+de)/me);let Te=0;for(let $e=J;$e<Mt;++$e){const Pe=$e*jt-Le;for(let Ae=ft;Ae<zt;++Ae){const vn=Ae*Ut-St;for(let vs=Xt;vs<be;++vs){const ei=vs*me-de,ps=D*De+R*$e+V*Ae+E*vs,Ws=X*(ct-1-Pe)+B*(j-1-vn)+U*(ht-1-ei)+K*ae;for(let ns=0;ns<Gt;++ns){const bi=$[ps+ns],Pi=q[Ws+ns];Te+=bi*Pi}}}}m[y*De+k*Oe+C*Ft+S*Et+ae]=Te}}}return e.makeTensorInfo(g.shape,g.dtype,g.values)}const Rq={kernelName:gy,backendName:"cpu",kernelFunc:Dq};const Mq=Xs(e0,n=>Math.cos(n)),Oq={kernelName:e0,backendName:"cpu",kernelFunc:Mq};const Fq=Xs(n0,n=>Math.cosh(n)),Pq={kernelName:n0,backendName:"cpu",kernelFunc:Fq};function Lq(n){const{inputs:t,backend:e,attrs:s}=n,{image:i,boxes:r,boxInd:o}=t,{cropSize:a,method:l,extrapolationValue:u}=s,[h,f,g,m]=i.shape,y=r.shape[0],[k,C]=a,S=hs([y,k,C,m],"float32"),$=e.data.get(r.dataId).values,D=e.data.get(o.dataId).values,R=e.data.get(i.dataId).values,V=Dn(i.shape),E=Dn(S.shape);for(let q=0;q<y;q++){const X=q*4,B=$[X],U=$[X+1],K=$[X+2],Y=$[X+3],ct=D[q];if(ct>=h)continue;const j=k>1?(K-B)*(f-1)/(k-1):0,ht=C>1?(Y-U)*(g-1)/(C-1):0;for(let It=0;It<k;It++){const yt=k>1?B*(f-1)+It*j:.5*(B+K)*(f-1);if(yt<0||yt>f-1){for(let Ot=0;Ot<C;Ot++)for(let Ct=0;Ct<m;Ct++){const Gt=Ct+Ot*E[2]+It*E[1]+q*E[0];S.values[Gt]=u}continue}if(l==="bilinear"){const Ot=Math.floor(yt),Ct=Math.ceil(yt),Gt=yt-Ot;for(let vt=0;vt<C;vt++){const at=C>1?U*(g-1)+vt*ht:.5*(U+Y)*(g-1);if(at<0||at>g-1){for(let me=0;me<m;me++){const Ee=me+vt*E[2]+It*E[1]+q*E[0];S.values[Ee]=u}continue}const Pt=Math.floor(at),jt=Math.ceil(at),Ut=at-Pt;for(let me=0;me<m;me++){let Ee=me+Pt*V[2]+Ot*V[1]+ct*V[0];const le=R[Ee];Ee=me+jt*V[2]+Ot*V[1]+ct*V[0];const ce=R[Ee];Ee=me+Pt*V[2]+Ct*V[1]+ct*V[0];const De=R[Ee];Ee=me+jt*V[2]+Ct*V[1]+ct*V[0];const ae=R[Ee],Oe=le+(ce-le)*Ut,Le=De+(ae-De)*Ut;Ee=me+vt*E[2]+It*E[1]+q*E[0],S.values[Ee]=Oe+(Le-Oe)*Gt}}}else for(let Ot=0;Ot<C;++Ot){const Ct=C>1?U*(g-1)+Ot*ht:.5*(U+Y)*(g-1);if(Ct<0||Ct>g-1){for(let at=0;at<m;at++){const Pt=at+Ot*E[2]+It*E[1]+q*E[0];S.values[Pt]=u}continue}const Gt=Math.round(Ct),vt=Math.round(yt);for(let at=0;at<m;at++){const Pt=at+Gt*V[2]+vt*V[1]+ct*V[0],jt=at+Ot*E[2]+It*E[1]+q*E[0];S.values[jt]=R[Pt]}}}}return e.makeTensorInfo(S.shape,S.dtype,S.values)}const Bq={kernelName:xy,backendName:"cpu",kernelFunc:Lq};function zq(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{axis:r,exclusive:o,reverse:a}=s;wn(i,"cumprod");const l=xi([r],i.shape.length);let u=i;l!=null&&(u=oo({inputs:{x:i},backend:e,attrs:{perm:l}}));const h=_i(1,i.shape.length)[0];if(h!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${h}`);const f=To(u.dtype,"int32"),g=ny(Ce(u.shape),f),m=e.data.get(u.dataId).values,y=u.shape[u.shape.length-1],k=a?(S,$)=>S+y-$-1:(S,$)=>S+$;for(let S=0;S<m.length;S+=y)for(let $=0;$<y;$++){const D=k(S,$);if($===0)g[D]=o?1:m[D];else{const R=k(S,$-1);g[D]=o?m[R]*g[R]:m[D]*g[R]}}const C=e.makeTensorInfo(u.shape,f,g);if(l!=null){const S=uu(l),$=oo({inputs:{x:C},backend:e,attrs:{perm:S}});return e.disposeIntermediateTensorInfo(C),e.disposeIntermediateTensorInfo(u),$}return C}const Wq={kernelName:my,backendName:"cpu",kernelFunc:zq};function Vq(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{axis:r,exclusive:o,reverse:a}=s;wn(i,"cumsum");const l=xi([r],i.shape.length);let u=i;l!=null&&(u=oo({inputs:{x:i},backend:e,attrs:{perm:l}}));const h=_i(1,i.shape.length)[0];if(h!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${h}`);const f=To(u.dtype,"int32"),g=vr(Ce(u.shape),f),m=e.data.get(u.dataId).values,y=u.shape[u.shape.length-1],k=a?(S,$)=>S+y-$-1:(S,$)=>S+$;for(let S=0;S<m.length;S+=y)for(let $=0;$<y;$++){const D=k(S,$);if($===0)g[D]=o?0:m[D];else{const R=k(S,$-1);g[D]=o?m[R]+g[R]:m[D]+g[R]}}const C=e.makeTensorInfo(u.shape,f,g);if(l!=null){const S=uu(l),$=oo({inputs:{x:C},backend:e,attrs:{perm:S}});return e.disposeIntermediateTensorInfo(C),e.disposeIntermediateTensorInfo(u),$}return C}const Uq={kernelName:P1,backendName:"cpu",kernelFunc:Vq};function Gq(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,weights:r}=t,{size:o,binaryOutput:a}=s;if(i.shape.length===1){const l=e.data.get(i.dataId).values,u=e.data.get(r.dataId).values,h=m3(l,u,r.dtype,r.shape,o);return e.makeTensorInfo([o],r.dtype,h)}else if(i.shape.length===2){const l=e.bufferSync(i),u=e.bufferSync(r),h=N6(l,u,o,a);return e.makeTensorInfo(h.shape,r.dtype,h.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const Hq={kernelName:by,backendName:"cpu",kernelFunc:Gq};function jq(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{blockSize:r,dataFormat:o}=s;wt(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const a=i.shape[0],l=i.shape[1],u=i.shape[2],h=i.shape[3],f=l*r,g=u*r,m=h/(r*r),y=e.data.get(i.dataId).values,k=new Float32Array(a*f*g*m);let C=0;for(let S=0;S<a;++S)for(let $=0;$<f;++$){const D=Math.floor($/r),R=$%r;for(let V=0;V<g;++V){const E=Math.floor(V/r),q=V%r,X=(R*r+q)*m;for(let B=0;B<m;++B){const K=B+X+h*(E+u*(D+l*S));k[C++]=y[K]}}}return e.makeTensorInfo([a,f,g,m],i.dtype,k)}const Xq={kernelName:vy,backendName:"cpu",kernelFunc:jq};function NA(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,filter:r}=t,{strides:o,pad:a,dilations:l,dimRoundingMode:u}=s;wn([i,r],"depthwiseConv2DNative");const h=Dn(i.shape),f=Dn(r.shape);let g=l;g==null&&(g=[1,1]),wt(Sr(o,g),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${g}'`);const m=cr(i.shape,r.shape,o,g,a,u,!0),{filterHeight:y,filterWidth:k,dilationHeight:C,dilationWidth:S,padInfo:$}=m,D=$.left,R=$.top,V=m.outChannels/m.inChannels,E=new or(m.outShape,i.dtype),q=e.data.get(i.dataId).values,X=e.data.get(r.dataId).values,B=E.values;for(let U=0;U<m.batchSize;++U){const K=U*h[0],Y=U*E.strides[0];for(let ct=0;ct<m.outHeight;++ct){const j=Y+ct*E.strides[1],ht=ct*m.strideHeight-R;for(let It=0;It<y;++It){const yt=ht+It*C;if(yt<0||yt>=m.inHeight)continue;const Ot=It*f[0],Ct=K+yt*h[1];for(let Gt=0;Gt<m.outWidth;++Gt){const vt=j+Gt*E.strides[2],at=Gt*m.strideWidth-D;for(let Pt=0;Pt<k;++Pt){const jt=at+Pt*S;if(jt<0||jt>=m.inWidth)continue;const Ut=Ot+Pt*f[1],me=Ct+jt*m.inChannels;let Ee=vt,le=Ut;for(let ce=0;ce<m.inChannels;++ce){const De=q[me+ce];for(let ae=0;ae<V;++ae)B[Ee+ae]+=De*X[le+ae];Ee+=V,le+=V}}}}}}return e.makeTensorInfo(E.shape,E.dtype,E.values)}const qq={kernelName:L1,backendName:"cpu",kernelFunc:NA};function Kq(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,dy:r}=t,{strides:o,dilations:a,pad:l,dimRoundingMode:u,filterShape:h}=s;wn([i,r],"depthwiseConv2dNativeBackpropFilter");const f=cr(i.shape,h,o,a,l,u,!0),{strideHeight:g,strideWidth:m,filterHeight:y,filterWidth:k}=f,C=new or(f.filterShape,"float32"),S=f.padInfo.left,$=f.padInfo.top,D=f.outChannels/f.inChannels,R=e.data.get(i.dataId).values,V=new or(i.shape,i.dtype,R),E=e.data.get(r.dataId).values,q=new or(r.shape,r.dtype,E);for(let X=0;X<y;++X){const B=Math.max(0,Math.ceil(($-X)/g)),U=Math.min(f.outHeight,(f.inHeight+$-X)/g);for(let K=0;K<k;++K){const Y=Math.max(0,Math.ceil((S-K)/m)),ct=Math.min(f.outWidth,(f.inWidth+S-K)/m);for(let j=0;j<f.outChannels;++j){const ht=Math.trunc(j/D),It=j%D;let yt=0;for(let Ot=0;Ot<f.batchSize;++Ot)for(let Ct=B;Ct<U;++Ct){const Gt=X+Ct*g-$;for(let vt=Y;vt<ct;++vt){const at=K+vt*m-S;yt+=V.get(Ot,Gt,at,ht)*q.get(Ot,Ct,vt,j)}}C.set(yt,X,K,ht,It)}}}return e.makeTensorInfo(C.shape,C.dtype,C.values)}const Yq={kernelName:yy,backendName:"cpu",kernelFunc:Kq};function Zq(n){const{inputs:t,backend:e,attrs:s}=n,{dy:i,filter:r}=t,{strides:o,dilations:a,pad:l,dimRoundingMode:u,inputShape:h}=s;wn([i,r],"depthwiseConv2DNativeBackpropInput");const f=Dn(i.shape),g=Dn(r.shape),m=cr(h,r.shape,o,a,l,u,!0),y=new or(m.inShape,"float32"),k=y.values,[C,S,$]=y.strides,D=e.data.get(i.dataId).values,[R,V,E]=f,q=e.data.get(r.dataId).values,[X,B,U]=g,{batchSize:K,filterHeight:Y,filterWidth:ct,inChannels:j,inHeight:ht,inWidth:It,outChannels:yt,outHeight:Ot,outWidth:Ct,strideHeight:Gt,strideWidth:vt}=m,at=Y-1-m.padInfo.top,Pt=ct-1-m.padInfo.left,jt=yt/j;for(let Ut=0;Ut<K;++Ut)for(let me=0;me<j;++me)for(let Ee=0;Ee<ht;++Ee){const le=Ee-at,ce=Math.max(0,Math.ceil(le/Gt)),De=Math.min(Ot,(Y+le)/Gt);for(let ae=0;ae<It;++ae){const Oe=ae-Pt,Le=Math.max(0,Math.ceil(Oe/vt)),J=Math.min(Ct,(ct+Oe)/vt);let Mt=0;for(let Ft=ce;Ft<De;++Ft){const St=Ft*Gt-le;for(let ft=Le;ft<J;++ft){const zt=ft*vt-Oe,Et=R*Ut+V*Ft+E*ft,de=X*(Y-1-St)+B*(ct-1-zt)+U*me;for(let Xt=0;Xt<jt;++Xt){const be=me*jt+Xt,Te=D[Et+be],$e=q[de+Xt];Mt+=Te*$e}}}k[C*Ut+S*Ee+$*ae+me]=Mt}}return e.makeTensorInfo(y.shape,y.dtype,y.values)}const Jq={kernelName:wy,backendName:"cpu",kernelFunc:Zq};function Qq(n){const{inputs:t,backend:e}=n,{x:s}=t,i=Ce(s.shape),r=e.data.get(s.dataId).values,o=hs([i,i],s.dtype),a=o.values;for(let u=0;u<r.length;u++)a[u*i+u]=r[u];const l=[...s.shape,...s.shape];return e.makeTensorInfo(l,o.dtype,o.values)}const tK={kernelName:cI,backendName:"cpu",kernelFunc:Qq};const eK={kernelName:B1,backendName:"cpu",kernelFunc:({inputs:n,backend:t,attrs:e})=>{const{x:s,filter:i}=n,{strides:r,pad:o,dilations:a}=e,l=t,u=l.data.get(s.dataId).values,h=s.shape.length,f=l.data.get(i.dataId).values,g=i.shape.length,{batchSize:m,inHeight:y,inWidth:k,inChannels:C,outHeight:S,outWidth:$,padInfo:D,strideHeight:R,strideWidth:V,filterHeight:E,filterWidth:q,dilationHeight:X,dilationWidth:B,outShape:U}=z0(s.shape,i.shape,r,o,"NHWC",a),K=Ce(U),Y=U.length,ct=Ti(s.dtype,K);for(let ht=0;ht<m;++ht)for(let It=0;It<S;++It){const yt=It*R-D.top;for(let Ot=0;Ot<$;++Ot){const Ct=Ot*V-D.left;for(let Gt=0;Gt<C;++Gt){let vt=Number.MIN_SAFE_INTEGER;for(let Pt=0;Pt<E;++Pt){const jt=yt+Pt*X;if(jt>=0&&jt<y)for(let Ut=0;Ut<q;++Ut){const me=Ct+Ut*B;if(me>=0&&me<k){const Ee=xl([ht,jt,me,Gt],h,Dn(s.shape)),le=xl([Pt,Ut,Gt],g,Dn(i.shape)),ce=u[Ee]+f[le];ce>vt&&(vt=ce)}}}const at=xl([ht,It,Ot,Gt],Y,Dn(U));ct[at]=vt}}}return{dataId:l.write(Fh(ct,s.dtype),U,s.dtype),shape:U,dtype:s.dtype}}};const nK={kernelName:tv,backendName:"cpu",kernelFunc:({inputs:n,backend:t,attrs:e})=>{const{x:s,filter:i,dy:r}=n,{strides:o,pad:a,dilations:l}=e,u=t,h=Ga(s.shape,u.data.get(s.dataId).values),f=Ga(i.shape,u.data.get(i.dataId).values),{batchSize:g,inHeight:m,inWidth:y,inChannels:k,outHeight:C,outWidth:S,padInfo:$,strideHeight:D,strideWidth:R,filterHeight:V,filterWidth:E,dilationHeight:q,dilationWidth:X,outShape:B}=z0(s.shape,i.shape,o,a,"NHWC",l);wt(r.rank===B.length,()=>`Error in ${tv}, dy must have the same rank as output ${B.length}, but got ${r.rank}`);const U=Ga(B,u.data.get(r.dataId).values),K=rI(i.shape,i.dtype);for(let ct=0;ct<g;++ct)for(let j=0;j<C;++j){const ht=j*D-$.top;for(let It=0;It<S;++It){const yt=It*R-$.left;for(let Ot=0;Ot<k;++Ot){let Ct=Number.MIN_SAFE_INTEGER,Gt=0,vt=0;for(let at=0;at<V;++at){const Pt=ht+at*q;if(Pt>=0&&Pt<m)for(let jt=0;jt<E;++jt){const Ut=yt+jt*X;if(Ut>=0&&Ut<y){const me=h[ct][Pt][Ut][Ot]+f[at][jt][Ot];me>Ct&&(Ct=me,Gt=at,vt=jt)}}}K[Gt][vt][Ot]+=U[ct][j][It][Ot]}}}return{dataId:u.write(Fh(K,s.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};const sK={kernelName:Qb,backendName:"cpu",kernelFunc:({inputs:n,backend:t,attrs:e})=>{const{x:s,filter:i,dy:r}=n,{strides:o,pad:a,dilations:l}=e,u=t,h=Ga(s.shape,u.data.get(s.dataId).values),f=Ga(i.shape,u.data.get(i.dataId).values),{batchSize:g,inHeight:m,inWidth:y,inChannels:k,outHeight:C,outWidth:S,padInfo:$,strideHeight:D,strideWidth:R,filterHeight:V,filterWidth:E,dilationHeight:q,dilationWidth:X,outShape:B}=z0(s.shape,i.shape,o,a,"NHWC",l);wt(r.rank===B.length,()=>`Error in ${Qb}, dy must have the same rank as output ${B.length}, but got ${r.rank}`);const U=Ga(B,u.data.get(r.dataId).values),K=rI(s.shape,s.dtype);for(let ct=0;ct<g;++ct)for(let j=0;j<C;++j){const ht=j*D-$.top;for(let It=0;It<S;++It){const yt=It*R-$.left;for(let Ot=0;Ot<k;++Ot){let Ct=Number.MIN_SAFE_INTEGER,Gt=ht<0?0:ht,vt=yt<0?0:yt;for(let at=0;at<V;++at){const Pt=ht+at*q;if(Pt>=0&&Pt<m)for(let jt=0;jt<E;++jt){const Ut=yt+jt*X;if(Ut>=0&&Ut<y){const me=h[ct][Pt][Ut][Ot]+f[at][jt][Ot];me>Ct&&(Ct=me,Gt=Pt,vt=Ut)}}}K[ct][Gt][vt][Ot]+=U[ct][j][It][Ot]}}}return{dataId:u.write(Fh(K,s.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};function iK(n){const{inputs:t,backend:e,attrs:s}=n,{image:i}=t,{canvas:r,options:o}=s,{contextOptions:a,imageOptions:l}=o||{},u=l?.alpha||1,h=a?.contextType||"2d";if(h!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const f=r.getContext(h,a?.contextAttributes||{});if(f==null)throw new Error(`Could not get the context with ${h} type.`);const[g,m]=i.shape.slice(0,2),y=i.shape.length===2?1:i.shape[2],k=e.data.get(i.dataId).values,C=i.dtype==="float32"?255:1,S=new Uint8ClampedArray(m*g*4);for(let D=0;D<g*m;++D){const R=[0,0,0,255*u];for(let E=0;E<y;E++){const q=k[D*y+E];if(i.dtype==="float32"){if(q<0||q>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${q}.`)}else if(i.dtype==="int32"&&(q<0||q>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${q}.`);y===1?(R[0]=q*C,R[1]=q*C,R[2]=q*C):R[E]=q*C}const V=D*4;S[V+0]=Math.round(R[0]),S[V+1]=Math.round(R[1]),S[V+2]=Math.round(R[2]),S[V+3]=Math.round(R[3])}r.width=m,r.height=g;const $=new ImageData(S,m,g);return f.putImageData($,0,0),i}const rK={kernelName:WO,backendName:"cpu",kernelFunc:iK};function ng(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{axis:r,keepDims:o}=s;wn(i,"sum");let a;i.dtype==="bool"?a=ou({inputs:{x:i},backend:e,attrs:{dtype:"int32"}}):a=Il({inputs:{x:i},backend:e});const l=a.shape.length,u=ds(r,a.shape),h=xi(u,l);let f=u,g=a;h!=null&&(g=oo({inputs:{x:a},backend:e,attrs:{perm:h}}),f=_i(f.length,l)),ur("sum",f,g.shape.length);const[m,y]=tr(g.shape,f),k=To(g.dtype,"int32");let C=r1(e,m,k);const S=Ce(y),$=e.data.get(C.dataId).values,D=e.data.get(g.dataId).values;for(let R=0;R<$.length;++R){const V=R*S;let E=0;for(let q=0;q<S;++q)E+=D[V+q];$[R]=E}if(o){const R=Fi(C.shape,u),V=C;C=ii({inputs:{x:C},backend:e,attrs:{shape:R}}),e.disposeIntermediateTensorInfo(V)}return e.disposeIntermediateTensorInfo(a),h!=null&&e.disposeIntermediateTensorInfo(g),C}const oK={kernelName:b2,backendName:"cpu",kernelFunc:ng};function aK(n){const{inputs:t,backend:e,attrs:s}=n,{equation:i}=s,r=t,{allDims:o,summedDims:a,idDims:l}=Lw(i,r.length);zw(o.length,l,r);const{path:u,steps:h}=Ww(a,l),f=h.length;let g=null,m=o.length;const y=[];for(let k=0;k<f;++k){for(const C of h[k]){const{permutationIndices:S,expandDims:$}=Bw(m,l[C]);let D;Vw(S)?D=r[C]:(D=oo({inputs:{x:r[C]},backend:e,attrs:{perm:S}}),y.push(D));const R=D.shape.slice();for(let V=0;V<$.length;++V)R.splice($[V],0,1);zs(D.shape,R)||(D=ii({inputs:{x:D},backend:e,attrs:{shape:R}}),y.push(D)),g===null?g=D:(g=q2({inputs:{a:D,b:g},backend:e}),y.push(g))}k<f-1&&(u[k]>=0&&(g=ng({inputs:{x:g},backend:e,attrs:{axis:u[k]-(o.length-m),keepDims:!1}}),y.push(g)),m--)}for(const k of y)k!==g&&e.disposeIntermediateTensorInfo(k);return g}const lK={kernelName:ky,backendName:"cpu",kernelFunc:aK};function cK(n){const{inputs:t,backend:e}=n,{dy:s,y:i}=t;wn([s,i],"eluGrad");const r=new Float32Array(Ce(i.shape)),o=e.data.get(i.dataId).values,a=e.data.get(s.dataId).values;for(let l=0;l<o.length;++l){const u=o[l];u>=0?r[l]=a[l]:r[l]=a[l]*(u+1)}return e.makeTensorInfo(i.shape,"float32",r)}const uK={kernelName:Cy,backendName:"cpu",kernelFunc:cK};const hK=Nw,dK=Dw,fK=Rw,pK=Mw,gK=Ow,mK=Fw,xK=Xs(r0,n=>{const t=Math.sign(n),e=Math.abs(n),s=1/(1+hK*e);return t*(1-((((mK*s+gK)*s+pK)*s+fK)*s+dK)*s*Math.exp(-e*e))}),bK={kernelName:r0,backendName:"cpu",kernelFunc:xK};function l1(n){const{inputs:t,backend:e,attrs:s}=n,{input:i}=t,{dim:r}=s,o=i.shape.length,a=i.shape.slice();let l=r;return r<0&&(wt(-(o+1)<=r,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+r+1),a.splice(l,0,1),ii({inputs:{x:i},backend:e,attrs:{shape:a}})}const vK={kernelName:W1,backendName:"cpu",kernelFunc:l1};const yK=$i((n,t)=>n/t),k3=ji(s0,yK),Iv={kernelName:s0,backendName:"cpu",kernelFunc:k3};function DA(n,t,e){const s=n.shape,i=s[0],r=s[1],o=e.data.get(n.dataId),a=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,u=[i,r],h=Ce(u),f=br("float32",h),g=br("float32",h);for(let C=0;C<i;C++){const S=Dh({inputs:{x:a},backend:e,attrs:{begin:[C,0],size:[1,r]}}),$=Dh({inputs:{x:l},backend:e,attrs:{begin:[C,0],size:[1,r]}}),D=wo({inputs:{real:S,imag:$},backend:e}),{real:R,imag:V}=wK(D,t,e),E=ac(R,V);for(let q=0;q<r;q++){const X=Pw(E,q);f[C*r+q]=X.real,g[C*r+q]=X.imag}e.disposeIntermediateTensorInfo(S),e.disposeIntermediateTensorInfo($),e.disposeIntermediateTensorInfo(D)}const m=e.makeTensorInfo(u,"float32",f),y=e.makeTensorInfo(u,"float32",g),k=wo({inputs:{real:m,imag:y},backend:e});return e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(y),k}function wK(n,t,e){const s=Ce(n.shape),i=e.data.get(n.dataId),r=e.data.get(i.complexTensorInfos.real.dataId).values,o=e.data.get(i.complexTensorInfos.imag.dataId).values;if(kK(s)){const a=Ev(r,o,s,t,e),l=[n.shape[0],n.shape[1]];if(t){const u=e.makeTensorInfo(l,"float32",a.real),h=e.makeTensorInfo(l,"float32",a.imag),f=e.makeTensorInfo([],"float32",lu(s,"float32")),g=Il({inputs:{x:f},backend:e}),m=Iv.kernelFunc({inputs:{a:u,b:f},backend:e}),y=Iv.kernelFunc({inputs:{a:h,b:g},backend:e}),k=e.data.get(m.dataId).values,C=e.data.get(y.dataId).values;return e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(y),{real:k,imag:C}}return a}else{const a=ac(r,o),l=CK(a,s,t);return q5(l)}}function kK(n){return(n&n-1)===0}function Ev(n,t,e,s,i){if(e===1)return{real:n,imag:t};const r=ac(n,t),o=e/2,a=K5(r),l=a.real,u=a.imag,h=[l.length],f=i.makeTensorInfo(h,"float32",l),g=i.makeTensorInfo(h,"float32",u),m=wo({inputs:{real:f,imag:g},backend:i}),y=Y5(r),k=y.real,C=y.imag,S=[k.length],$=i.makeTensorInfo(S,"float32",k),D=i.makeTensorInfo(S,"float32",C),R=wo({inputs:{real:$,imag:D},backend:i}),V=Ev(l,u,o,s,i),E=V.real,q=V.imag,X=[E.length],B=i.makeTensorInfo(X,"float32",E),U=i.makeTensorInfo(X,"float32",q),K=wo({inputs:{real:B,imag:U},backend:i}),Y=Ev(k,C,o,s,i),ct=Y.real,j=Y.imag,ht=[ct.length],It=i.makeTensorInfo(ht,"float32",ct),yt=i.makeTensorInfo(ht,"float32",j),Ot=wo({inputs:{real:It,imag:yt},backend:i}),Ct=J5(e,s),Gt=[Ct.real.length],vt=i.makeTensorInfo(Gt,"float32",Ct.real),at=i.makeTensorInfo(Gt,"float32",Ct.imag),Pt=wo({inputs:{real:vt,imag:at},backend:i}),jt=q2({inputs:{a:Pt,b:Ot},backend:i}),Ut=jd({inputs:{a:K,b:jt},backend:i}),me=y3({inputs:{a:K,b:jt},backend:i}),Ee=Nh({inputs:{input:Ut},backend:i}),le=Nh({inputs:{input:me},backend:i}),ce=Xd({inputs:{input:Ut},backend:i}),De=Xd({inputs:{input:me},backend:i}),ae=qd({inputs:[Ee,le],backend:i,attrs:{axis:0}}),Oe=qd({inputs:[ce,De],backend:i,attrs:{axis:0}}),Le=i.data.get(ae.dataId).values,J=i.data.get(Oe.dataId).values;return i.disposeIntermediateTensorInfo(f),i.disposeIntermediateTensorInfo(g),i.disposeIntermediateTensorInfo(m),i.disposeIntermediateTensorInfo($),i.disposeIntermediateTensorInfo(D),i.disposeIntermediateTensorInfo(R),i.disposeIntermediateTensorInfo(B),i.disposeIntermediateTensorInfo(U),i.disposeIntermediateTensorInfo(K),i.disposeIntermediateTensorInfo(It),i.disposeIntermediateTensorInfo(yt),i.disposeIntermediateTensorInfo(Ot),i.disposeIntermediateTensorInfo(vt),i.disposeIntermediateTensorInfo(at),i.disposeIntermediateTensorInfo(Pt),i.disposeIntermediateTensorInfo(jt),i.disposeIntermediateTensorInfo(Ut),i.disposeIntermediateTensorInfo(me),i.disposeIntermediateTensorInfo(Ee),i.disposeIntermediateTensorInfo(ce),i.disposeIntermediateTensorInfo(le),i.disposeIntermediateTensorInfo(De),i.disposeIntermediateTensorInfo(ae),i.disposeIntermediateTensorInfo(Oe),{real:Le,imag:J}}function CK(n,t,e){const s=new Float32Array(t*2);for(let i=0;i<t;i++){let r=0,o=0;for(let a=0;a<t;a++){const l=Q5(i*a,t,e),u=Pw(n,a);r+=u.real*l.real-u.imag*l.imag,o+=u.real*l.imag+u.imag*l.real}e&&(r/=t,o/=t),Z5(s,r,o,i)}return s}function SK(n){const{inputs:t,backend:e}=n,{input:s}=t,i=Ce(s.shape),r=s.shape[s.shape.length-1],o=i/r,a=ii({inputs:{x:s},backend:e,attrs:{shape:[o,r]}}),l=DA(a,!1,e),u=ii({inputs:{x:l},backend:e,attrs:{shape:s.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(l),u}const TK={kernelName:Sy,backendName:"cpu",kernelFunc:SK};function C3(n){const{backend:t,attrs:e}=n,{shape:s,value:i,dtype:r}=e,o=r||nf(i),a=Ti(o,Ce(s));return EK(a,i,o),t.makeTensorInfo(s,o,a)}const IK={kernelName:Ty,backendName:"cpu",kernelFunc:C3};function EK(n,t,e){n.fill(t)}const _K={kernelName:Iy,backendName:"cpu",kernelFunc:({inputs:n,attrs:t,backend:e})=>{const{image:s}=n,i=e,r=br(s.dtype,Ce(s.shape)),[o,a,l,u]=s.shape,h=i.data.get(s.dataId).values;for(let g=0;g<o;g++){const m=g*l*a*u;for(let y=0;y<a;y++){const k=y*(l*u);for(let C=0;C<l;C++){const S=C*u;for(let $=0;$<u;$++){const D=Math.round(l-C-1),R=m+k+S+$;let V=h[R];if(D>=0&&D<l){const E=D*u,q=m+k+E+$;V=h[q]}r[R]=V}}}}return{dataId:i.write(r,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};function AK(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,filter:r,bias:o,preluActivationWeights:a}=t,{strides:l,pad:u,dataFormat:h,dilations:f,dimRoundingMode:g,activation:m,leakyreluAlpha:y}=s;let k=$A({inputs:{x:i,filter:r},backend:e,attrs:{strides:l,pad:u,dataFormat:h,dilations:f,dimRoundingMode:g}});if(o){const C=k;if(h==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const S=ii({inputs:{x:o},backend:e,attrs:{shape:[o.shape[0],1,1]}});k=jd({inputs:{a:k,b:S},backend:e}),e.disposeIntermediateTensorInfo(S)}else k=jd({inputs:{a:k,b:o},backend:e});e.disposeIntermediateTensorInfo(C)}if(m){const C=k;if(h==="NCHW"&&m==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const S=ii({inputs:{x:a},backend:e,attrs:{shape:[a.shape[0],1,1]}});k=a1(e,k,m,S,y),e.disposeIntermediateTensorInfo(S)}else k=a1(e,k,m,a,y);e.disposeIntermediateTensorInfo(C)}return k}const $K={kernelName:Vm,backendName:"cpu",kernelFunc:AK};function NK(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,filter:r,bias:o,preluActivationWeights:a}=t,{strides:l,pad:u,dataFormat:h,dilations:f,dimRoundingMode:g,activation:m,leakyreluAlpha:y}=s;let k=NA({inputs:{x:i,filter:r},backend:e,attrs:{strides:l,pad:u,dataFormat:h,dilations:f,dimRoundingMode:g}});if(o){const C=k;k=jd({inputs:{a:k,b:o},backend:e}),e.disposeIntermediateTensorInfo(C)}if(m){const C=k;k=a1(e,k,m,a,y),e.disposeIntermediateTensorInfo(C)}return k}const DK={kernelName:_I,backendName:"cpu",kernelFunc:NK};function RK(n){const{inputs:t,backend:e}=n,{params:s,indices:i}=t,r=Ce(s.shape),o=i.shape,a=o[o.length-1],[l,u,h,f]=Sw(s,i);if(u===0)return e.makeTensorInfo(l,s.dtype,[]);const g=e.data.get(i.dataId).values,m=e.bufferSync(s),y=V6(g,m,s.dtype,u,a,h,f,s.shape,r);return e.makeTensorInfo(l,s.dtype,y.values)}const MK={kernelName:uI,backendName:"cpu",kernelFunc:RK};function OK(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,indices:r}=t,{axis:o,batchDims:a}=s;wn([i,r],"gatherV2");const l=ds(o,i.shape)[0],u=e.data.get(r.dataId).values,h=i.shape[l];for(let R=0;R<u.length;++R){const V=u[R];wt(V<=h-1&&V>=0,()=>`GatherV2: the index value ${V} is not in [0, ${h-1}]`)}let f=a;a==null&&(f=0);const g=Ce(r.shape),m=hE(i,r,l,f),y=ii({inputs:{x:i},backend:e,attrs:{shape:[m.batchSize,m.outerSize,m.dimSize,m.sliceSize]}}),k=ii({inputs:{x:r},backend:e,attrs:{shape:[m.batchSize,g/m.batchSize]}}),C=[m.batchSize,m.outerSize,g/m.batchSize,m.sliceSize],S=e.bufferSync(k),$=e.bufferSync(y),D=U6($,S,C);return e.disposeIntermediateTensorInfo(y),e.disposeIntermediateTensorInfo(k),e.makeTensorInfo(m.outputShape,D.dtype,D.values)}const FK={kernelName:U1,backendName:"cpu",kernelFunc:OK};function PK(n){const{inputs:t,backend:e}=n,{input:s}=t,i=Ce(s.shape),r=s.shape[s.shape.length-1],o=i/r,a=ii({inputs:{x:s},backend:e,attrs:{shape:[o,r]}}),l=DA(a,!0,e),u=ii({inputs:{x:l},backend:e,attrs:{shape:s.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(l),u}const LK={kernelName:Ey,backendName:"cpu",kernelFunc:PK};const BK=Xs(d0,n=>Number.isFinite(n)?1:0,"bool"),zK={kernelName:d0,backendName:"cpu",kernelFunc:BK};const WK=Xs(f0,n=>Math.abs(n)===1/0?1:0,"bool"),VK={kernelName:f0,backendName:"cpu",kernelFunc:WK};const UK=Xs(p0,n=>Number.isNaN(n)?1:0,"bool"),GK={kernelName:p0,backendName:"cpu",kernelFunc:UK};function HK(n){const{backend:t,attrs:e}=n,{start:s,stop:i,num:r}=e,o=q6(s,i,r);return t.makeTensorInfo([o.length],"float32",o)}const jK={kernelName:hI,backendName:"cpu",kernelFunc:HK};const XK=Xs(m0,n=>Math.log1p(n)),qK={kernelName:m0,backendName:"cpu",kernelFunc:XK};const KK=$i((n,t)=>n&&t),YK=ji(q1,KK,null,"bool"),ZK={kernelName:q1,backendName:"cpu",kernelFunc:YK};const JK=Xs(K1,n=>n?0:1,"bool"),QK={kernelName:K1,backendName:"cpu",kernelFunc:JK};const tY=$i((n,t)=>n||t),eY=ji(Y1,tY,null,"bool"),nY={kernelName:Y1,backendName:"cpu",kernelFunc:eY};function sY(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{depthRadius:r,bias:o,alpha:a,beta:l}=s;wn(i,"LRN");const u=i.shape[3],h=u-1,f=e.data.get(i.dataId).values,g=Ce(i.shape),m=new Float32Array(g);function y(k){const C=k%u;let S=k-C+Math.max(0,C-r);const $=k-C+Math.min(C+r,h);let D=0;for(;S<=$;S++){const R=f[S];D+=R*R}return D}for(let k=0;k<g;k++){const C=y(k),S=f[k]*Math.pow(o+a*C,-l);m[k]=S}return e.makeTensorInfo(i.shape,i.dtype,m)}const iY={kernelName:Z1,backendName:"cpu",kernelFunc:sY};function rY(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,y:r,dy:o}=t,{depthRadius:a,bias:l,alpha:u,beta:h}=s;wn(o,"LRNGrad");const f=Ce(o.shape),g=o.shape[3],m=e.data.get(o.dataId).values,y=e.data.get(i.dataId).values,k=e.data.get(r.dataId).values,C=new Float32Array(f),S=f;for(let $=0;$<S;$++){const D=$%g,R=$-D+Math.max(0,D-a),V=$-D+Math.min(g,D+a+1);let E=0;for(let q=R;q<V;q++)E+=Math.pow(y[q],2);E=u*E+l;for(let q=R;q<V;q++){let X=-2*u*h*y[q]*k[$]/E;$===q&&(X+=Math.pow(E,-h)),X*=m[$],C[q]+=X}}return e.makeTensorInfo(o.shape,i.dtype,C)}const oY={kernelName:Ay,backendName:"cpu",kernelFunc:rY};function RA(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{reductionIndices:r,keepDims:o}=s,a=e;let l=i.shape;const u=l.length,h=ds(r,l);let f=h;const g=xi(f,u);let m=a.data.get(i.dataId).values;if(g!=null){const R=new Array(u);for(let V=0;V<R.length;V++)R[V]=l[g[V]];m=b3(m,l,i.dtype,g,R),f=_i(f.length,u),l=R}wn(i,"max"),ur("max",f,u);const[y,k]=tr(l,f),C=Ce(k),S=Y6(m,C,y,i.dtype),$=a.write(S,y,i.dtype);let D=y;return o&&(D=Fi(y,h)),{dataId:$,shape:D,dtype:i.dtype}}const aY={kernelName:J1,backendName:"cpu",kernelFunc:RA};function lY(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t;wn(i,"maxPool");const{filterSize:r,strides:o,pad:a,dimRoundingMode:l}=s,u=1;wt(Sr(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const h=ga(i.shape,r,o,u,a,l);let f;if(h.filterWidth===1&&h.filterHeight===1&&zs(h.inShape,h.outShape))f=Il({inputs:{x:i},backend:e});else{const g=e.data.get(i.dataId).values,m=Dn(i.shape),y=w3(g,i.shape,i.dtype,m,h,"max");f=e.makeTensorInfo(h.outShape,i.dtype,y.values)}return f}const cY={kernelName:Q1,backendName:"cpu",kernelFunc:lY};function uY(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{filterSize:r,strides:o,pad:a,dimRoundingMode:l,dataFormat:u}=s;wn(i,"maxPool3d");const h=hc(i.shape,r,o,1,a,l,u),f=e.data.get(i.dataId).values,g=AA(f,i.shape,i.dtype,Dn(i.shape),h,"max");return e.makeTensorInfo(g.shape,"float32",g.values)}const hY={kernelName:t2,backendName:"cpu",kernelFunc:uY};function dY(n){const{inputs:t,backend:e,attrs:s}=n,{dy:i,input:r}=t,{filterSize:o,strides:a,pad:l,dimRoundingMode:u}=s;wn([i,r],"maxPool3DGrad");const h=hc(r.shape,o,a,1,l,u),f=e.bufferSync(r),g=tq(f,h),m=h.strideDepth,y=h.strideHeight,k=h.strideWidth,C=h.dilationDepth,S=h.dilationHeight,$=h.dilationWidth,D=h.effectiveFilterDepth,R=h.effectiveFilterHeight,V=h.effectiveFilterWidth,E=D-1-h.padInfo.front,q=V-1-h.padInfo.left,X=R-1-h.padInfo.top,B=hs(r.shape,"float32"),U=e.bufferSync(i);for(let K=0;K<h.batchSize;++K)for(let Y=0;Y<h.inChannels;++Y)for(let ct=0;ct<h.inDepth;++ct)for(let j=0;j<h.inHeight;++j)for(let ht=0;ht<h.inWidth;++ht){const It=ct-E,yt=j-X,Ot=ht-q;let Ct=0;for(let Gt=0;Gt<D;Gt+=C){const vt=(It+Gt)/m;if(!(vt<0||vt>=h.outDepth||Math.floor(vt)!==vt))for(let at=0;at<R;at+=S){const Pt=(yt+at)/y;if(!(Pt<0||Pt>=h.outHeight||Math.floor(Pt)!==Pt))for(let jt=0;jt<V;jt+=$){const Ut=(Ot+jt)/k;if(Ut<0||Ut>=h.outWidth||Math.floor(Ut)!==Ut)continue;const me=D*R*V-1-g.get(K,vt,Pt,Ut,Y),Ee=Gt*R*V+at*V+jt,le=me===Ee?1:0;if(le===0)continue;const ce=U.get(K,vt,Pt,Ut,Y);Ct+=ce*le}}}B.set(Ct,K,ct,j,ht,Y)}return e.makeTensorInfo(B.shape,B.dtype,B.values)}const fY={kernelName:Ny,backendName:"cpu",kernelFunc:dY};function pY(n){const{inputs:t,backend:e,attrs:s}=n,{dy:i,input:r,output:o}=t,a=r;wn([r,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:h,dimRoundingMode:f}=s,g=ga(a.shape,l,u,1,h,f),m=e.data.get(a.dataId).values,y=hs(g.outShape,a.dtype,_A(m,a.shape,a.dtype,g).values),k=g.strideHeight,C=g.strideWidth,S=g.dilationHeight,$=g.dilationWidth,D=g.effectiveFilterHeight,R=g.effectiveFilterWidth,V=R-1-g.padInfo.left,E=D-1-g.padInfo.top,q=hs(a.shape,"float32"),X=e.data.get(i.dataId).values,B=hs(i.shape,"float32",X);for(let U=0;U<g.batchSize;++U)for(let K=0;K<g.inChannels;++K)for(let Y=0;Y<g.inHeight;++Y)for(let ct=0;ct<g.inWidth;++ct){const j=Y-E,ht=ct-V;let It=0;for(let yt=0;yt<D;yt+=S){const Ot=(j+yt)/k;if(!(Ot<0||Ot>=g.outHeight||Math.floor(Ot)!==Ot))for(let Ct=0;Ct<R;Ct+=$){const Gt=(ht+Ct)/C;if(Gt<0||Gt>=g.outWidth||Math.floor(Gt)!==Gt)continue;const vt=D*R-1-y.get(U,Ot,Gt,K),at=yt*R+Ct,Pt=vt===at?1:0;if(Pt===0)continue;const jt=B.get(U,Ot,Gt,K);It+=jt*Pt}}q.set(It,U,Y,ct,K)}return e.makeTensorInfo(q.shape,q.dtype,q.values)}const gY={kernelName:$y,backendName:"cpu",kernelFunc:pY};function mY(n,t,e,s,i){const r=Dn(t),o=w3(n,t,e,r,i,"max"),a=_A(n,t,e,i,!0,s);return[o.values,a.values]}const xY={kernelName:dI,backendName:"cpu",kernelFunc:({inputs:n,attrs:t,backend:e})=>{const{x:s}=n,{filterSize:i,strides:r,pad:o,includeBatchInIndex:a}=t,l=e;wn(s,"MaxPoolWithArgmax");const u=l.data.get(s.dataId).values,h=ga(s.shape,i,r,[1,1],o),[f,g]=mY(u,s.shape,s.dtype,a,h),m=l.write(f,h.outShape,s.dtype),y=l.write(g,h.outShape,s.dtype);return[{dataId:m,shape:h.outShape,dtype:s.dtype},{dataId:y,shape:h.outShape,dtype:"int32"}]}};function bY(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{axis:r,keepDims:o}=s,a=ds(r,i.shape),u=tr(i.shape,a)[1],h=Ce(u),f=[],g=e.makeTensorInfo([],"float32",new Float32Array([h]));f.push(g);const m=ou({inputs:{x:i},backend:e,attrs:{dtype:"float32"}});f.push(m);const y=k3({inputs:{a:m,b:g},backend:e});f.push(y);const k=ng({inputs:{x:y},backend:e,attrs:{axis:r,keepDims:o}});return f.forEach(C=>e.disposeIntermediateTensorInfo(C)),k}const vY={kernelName:e2,backendName:"cpu",kernelFunc:bY};function yY(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{axis:r,keepDims:o}=s;wn(i,"min");const a=ds(r,i.shape);let l=a;const u=xi(l,i.shape.length);let h=i;u!=null&&(h=oo({inputs:{x:i},backend:e,attrs:{perm:u}}),l=_i(l.length,i.shape.length)),ur("min",l,h.shape.length);const[f,g]=tr(h.shape,l),m=Ce(g),y=vr(Ce(f),h.dtype),k=e.data.get(h.dataId).values;for(let S=0;S<y.length;++S){const $=S*m;let D=k[$];for(let R=0;R<m;++R){const V=k[$+R];(Number.isNaN(V)||V<D)&&(D=V)}y[S]=D}u!=null&&e.disposeIntermediateTensorInfo(h);const C=e.makeTensorInfo(f,h.dtype,y);if(o){const S=Fi(f,a),$=ii({inputs:{x:C},backend:e,attrs:{shape:S}});return e.disposeIntermediateTensorInfo(C),$}return C}const wY={kernelName:n2,backendName:"cpu",kernelFunc:yY};function kY(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{paddings:r,mode:o}=s;wn(i,"mirrorPad");const a=r.map((D,R)=>D[0]+i.shape[R]+D[1]),l=r.map(D=>D[0]),u=r.map((D,R)=>D[0]+i.shape[R]),h=o==="reflect"?0:1,f=e.data.get(i.dataId).values,g=i.shape.length,m=Dn(i.shape),y=Ce(a),k=a.length,C=Dn(a),S=br(i.dtype,y);for(let D=0;D<y;D++){let R=sf(D,k,C);for(let E=0;E<k;E++)R[E]<l[E]?R[E]=l[E]*2-R[E]-h:R[E]>=u[E]&&(R[E]=(u[E]-1)*2-R[E]+h);R=R.map((E,q)=>E-l[q]);const V=xl(R,g,m);S[D]=f[V]}return{dataId:e.write(S,a,i.dtype),shape:a,dtype:i.dtype}}const CY={kernelName:s2,backendName:"cpu",kernelFunc:kY};const SY=$i(((n,t)=>{const e=n%t;return n<0&&t<0||n>=0&&t>=0?e:(e+t)%t})),TY=ji(v0,SY),IY={kernelName:v0,backendName:"cpu",kernelFunc:TY};function MA(n){const{inputs:t,backend:e,attrs:s}=n,{logits:i}=t,{dim:r}=s,o=i.shape.length;let a=r;if(a===-1&&(a=o-1),a!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${a}`);const l=ds([a],i.shape),u=RA({inputs:{x:i},backend:e,attrs:{reductionIndices:l,keepDims:!1}}),h=Fi(u.shape,l),f=ii({inputs:{x:u},backend:e,attrs:{shape:h}}),g=y3({inputs:{a:i,b:f},backend:e}),m=L6({inputs:{x:g},backend:e}),y=ng({inputs:{x:m},backend:e,attrs:{axis:l,keepDims:!1}}),k=ii({inputs:{x:y},backend:e,attrs:{shape:h}}),C=k3({inputs:{a:m,b:k},backend:e});return e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(y),e.disposeIntermediateTensorInfo(k),C}const EY={kernelName:w2,backendName:"cpu",kernelFunc:MA};function _Y(n){const{inputs:t,backend:e,attrs:s}=n,{logits:i}=t,{numSamples:r,seed:o,normalized:a}=s;wn(i,"multinomial");const l=a?i:MA({inputs:{logits:i},backend:e,attrs:{dim:-1}}),u=l.shape[0],h=l.shape[1],f=e.data.get(l.dataId).values,g=[u,r],m=vr(Ce(g),"int32");for(let y=0;y<u;++y){const k=y*h,C=new Float32Array(h-1);C[0]=f[k];for(let D=1;D<C.length;++D)C[D]=C[D-1]+f[k+D];const S=uw.alea(o.toString()),$=y*r;for(let D=0;D<r;++D){const R=S();m[$+D]=C.length;for(let V=0;V<C.length;V++)if(R<C[V]){m[$+D]=V;break}}}return a||e.disposeIntermediateTensorInfo(l),e.makeTensorInfo(g,"int32",m)}const AY={kernelName:fI,backendName:"cpu",kernelFunc:_Y};const $Y=vw;function NY(n){const{inputs:t,backend:e,attrs:s}=n,{boxes:i,scores:r}=t,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=s;wn(i,"NonMaxSuppression");const u=e.data.get(i.dataId).values,h=e.data.get(r.dataId).values,{selectedIndices:f}=$Y(u,h,o,a,l);return e.makeTensorInfo([f.length],"int32",new Int32Array(f))}const DY={kernelName:Dy,backendName:"cpu",kernelFunc:NY};const RY=yw;function MY(n){const{inputs:t,backend:e,attrs:s}=n,{boxes:i,scores:r}=t,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=s;wn(i,"NonMaxSuppressionPadded");const h=e.data.get(i.dataId).values,f=e.data.get(r.dataId).values,{selectedIndices:g,validOutputs:m}=RY(h,f,o,a,l,u);return[e.makeTensorInfo([g.length],"int32",new Int32Array(g)),e.makeTensorInfo([],"int32",new Int32Array([m]))]}const OY={kernelName:Ry,backendName:"cpu",kernelFunc:MY};const FY=ww;function PY(n){const{inputs:t,backend:e,attrs:s}=n,{boxes:i,scores:r}=t,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=s;wn(i,"NonMaxSuppressionWithScore");const h=e.data.get(i.dataId).values,f=e.data.get(r.dataId).values,g=o,m=a,y=l,k=u,{selectedIndices:C,selectedScores:S}=FY(h,f,g,m,y,k);return[e.makeTensorInfo([C.length],"int32",new Int32Array(C)),e.makeTensorInfo([S.length],"float32",new Float32Array(S))]}const LY={kernelName:My,backendName:"cpu",kernelFunc:PY};function BY(n){const{inputs:t,backend:e,attrs:s}=n,{indices:i}=t,{dtype:r,depth:o,onValue:a,offValue:l}=s;wn(i,"oneHot");const u=Ce(i.shape),h=new Float32Array(u*o);h.fill(l);const f=e.data.get(i.dataId).values;for(let g=0;g<u;++g)f[g]>=0&&f[g]<o&&(h[g*o+f[g]]=a);return e.makeTensorInfo([...i.shape,o],r,h)}const zY={kernelName:a2,backendName:"cpu",kernelFunc:BY};function c1(n){const{inputs:t,backend:e}=n,{x:s}=t;if(s.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(s.dtype==="complex64"){const i=Nh({inputs:{input:s},backend:e}),r=c1({inputs:{x:i},backend:e}),o=Xd({inputs:{input:s},backend:e}),a=c1({inputs:{x:o},backend:e}),l=wo({inputs:{real:r,imag:a},backend:e});return e.disposeIntermediateTensorInfo(i),e.disposeIntermediateTensorInfo(r),e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(a),l}else return C3({backend:e,attrs:{shape:s.shape,value:0,dtype:s.dtype}})}const WY={kernelName:S2,backendName:"cpu",kernelFunc:c1};function OA(n){const{inputs:t,backend:e}=n,{x:s}=t;if(s.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(s.dtype==="complex64"){const i=Nh({inputs:{input:s},backend:e}),r=OA({inputs:{x:i},backend:e}),o=Xd({inputs:{input:s},backend:e}),a=c1({inputs:{x:o},backend:e}),l=wo({inputs:{real:r,imag:a},backend:e});return e.disposeIntermediateTensorInfo(i),e.disposeIntermediateTensorInfo(r),e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(a),l}else return C3({backend:e,attrs:{shape:s.shape,value:1,dtype:s.dtype}})}const VY={kernelName:o2,backendName:"cpu",kernelFunc:OA};function FA(n){const{inputs:t,backend:e,attrs:s}=n,{axis:i}=s;if(t.length===1)return l1({inputs:{input:t[0]},backend:e,attrs:{dim:i}});const r=t[0].shape,o=t[0].dtype;t.forEach(h=>{ey(r,h.shape,"All tensors passed to stack must have matching shapes"),wt(o===h.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=t.map(h=>{const f=l1({inputs:{input:h},backend:e,attrs:{dim:i}});return a.push(f),f}),u=qd({inputs:l,backend:e,attrs:{axis:i}});return a.forEach(h=>e.disposeIntermediateTensorInfo(h)),u}const UY={kernelName:l2,backendName:"cpu",kernelFunc:FA};function GY(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{paddings:r,constantValue:o}=s;wn(i,"pad");const a=r.map(($,D)=>$[0]+i.shape[D]+$[1]),l=r.map($=>$[0]),u=e.data.get(i.dataId).values,h=Ce(i.shape),f=i.shape.length,g=Dn(i.shape),m=Ce(a),y=a.length,k=Dn(a),C=br(i.dtype,m);o!==0&&C.fill(o);for(let $=0;$<h;$++){const R=sf($,f,g).map((E,q)=>E+l[q]),V=xl(R,y,k);C[V]=u[$]}return{dataId:e.write(C,a,i.dtype),shape:a,dtype:i.dtype}}const PA={kernelName:c2,backendName:"cpu",kernelFunc:GY};const HY=$i((n,t)=>Math.pow(n,t)),jY=ji(w0,HY),XY={kernelName:w0,backendName:"cpu",kernelFunc:jY};function qY(n){const{inputs:t,backend:e,attrs:s}=n,{paramsNestedSplits:i,paramsDenseValues:r,indices:o}=t,{outputRaggedRank:a}=s,l=i.map(S=>e.data.get(S.dataId).values),u=i.map(S=>S.shape),h=e.data.get(r.dataId).values,f=e.data.get(o.dataId).values,[g,m,y]=nA(l,u,h,r.shape,r.dtype,f,o.shape),k=g.map(S=>e.makeTensorInfo([S.length],"int32",S)),C=e.makeTensorInfo(y,r.dtype,m);return k.concat([C])}const KY={kernelName:pI,backendName:"cpu",kernelFunc:qY};function YY(n){const{inputs:t,backend:e}=n,{starts:s,limits:i,deltas:r}=t,o=e.data.get(s.dataId).values,a=e.data.get(i.dataId).values,l=e.data.get(r.dataId).values,[u,h]=sA(o,s.shape,s.dtype,a,i.shape,l,r.shape),f=e.makeTensorInfo([u.length],"int32",u),g=e.makeTensorInfo([h.length],s.dtype,h);return[f,g]}const ZY={kernelName:gI,backendName:"cpu",kernelFunc:YY};function JY(n){const{inputs:t,backend:e,attrs:s}=n,{shape:i,values:r,defaultValue:o,rowPartitionTensors:a}=t,{rowPartitionTypes:l}=s,u=e.data.get(i.dataId).values,h=e.data.get(r.dataId).values,f=e.data.get(o.dataId).values,g=a.map(C=>e.data.get(C.dataId).values),m=a.map(C=>C.shape),[y,k]=iA(u,i.shape,h,r.shape,r.dtype,f,o.shape,g,m,l);return e.makeTensorInfo(y,r.dtype,k)}const QY={kernelName:mI,backendName:"cpu",kernelFunc:JY};function tZ(n){const{backend:t,attrs:e}=n,{start:s,stop:i,dtype:r,step:o}=e,a=rA(s,i,o,r);return t.makeTensorInfo([a.length],r,a)}const eZ={kernelName:Oy,backendName:"cpu",kernelFunc:tZ};const nZ=Xs(k0,n=>1/n),sZ={kernelName:k0,backendName:"cpu",kernelFunc:nZ};function iZ(n){const{inputs:t,backend:e,attrs:s}=n,{images:i}=t,{alignCorners:r,halfPixelCenters:o,size:a}=s;wn(i,"resizeBilinear");const l=Dn(i.shape),[u,h]=a,[f,g,m,y]=i.shape,k=e.data.get(i.dataId).values,C=new Float32Array(Ce([f,u,h,y])),S=[r&&u>1?g-1:g,r&&h>1?m-1:m],$=[r&&u>1?u-1:u,r&&h>1?h-1:h];let D=0;const R=S[0]/$[0],V=S[1]/$[1];for(let E=0;E<f;E++)for(let q=0;q<u;q++){let X;o?X=R*(q+.5)-.5:X=R*q;const B=Math.max(0,Math.floor(X)),U=X-B,K=Math.min(g-1,Math.ceil(X)),Y=E*l[0]+B*l[1],ct=E*l[0]+K*l[1];for(let j=0;j<h;j++){let ht;o?ht=V*(j+.5)-.5:ht=V*j;const It=Math.max(0,Math.floor(ht)),yt=ht-It,Ot=Math.min(m-1,Math.ceil(ht)),Ct=Y+It*l[2],Gt=ct+It*l[2],vt=Y+Ot*l[2],at=ct+Ot*l[2];for(let Pt=0;Pt<y;Pt++){const jt=k[Ct+Pt],Ut=k[Gt+Pt],me=k[vt+Pt],Ee=k[at+Pt],le=jt+(me-jt)*yt,ce=Ut+(Ee-Ut)*yt,De=le+(ce-le)*U;C[D++]=De}}}return e.makeTensorInfo([f,u,h,y],"float32",C)}const rZ={kernelName:p2,backendName:"cpu",kernelFunc:iZ};function oZ(n){const{inputs:t,backend:e,attrs:s}=n,{images:i,dy:r}=t,{alignCorners:o}=s;wn([r,i],"resizeBilinearGrad");const a=Dn(i.shape),[l,u,h,f]=i.shape,[,g,m]=r.shape,y=new Float32Array(l*u*h*f),k=[o&&g>1?u-1:u,o&&m>1?h-1:h],C=[o&&g>1?g-1:g,o&&m>1?m-1:m],S=k[0]/C[0],$=k[1]/C[1],D=e.data.get(r.dataId).values;let R=0;for(let V=0;V<l;V++){const E=V*a[0];for(let q=0;q<g;q++){const X=q*S,B=Math.floor(X),U=Math.min(Math.ceil(X),u-1),K=E+B*a[1],Y=E+U*a[1],ct=X-B,j=1-ct;for(let ht=0;ht<m;ht++){const It=ht*$,yt=Math.floor(It),Ot=Math.min(Math.ceil(It),h-1),Ct=It-yt,Gt=1-Ct,vt=K+yt*a[2],at=K+Ot*a[2],Pt=Y+yt*a[2],jt=Y+Ot*a[2],Ut=j*Gt,me=j*Ct,Ee=ct*Gt,le=ct*Ct;for(let ce=0;ce<f;ce++){const De=D[R++];y[vt+ce]+=De*Ut,y[at+ce]+=De*me,y[Pt+ce]+=De*Ee,y[jt+ce]+=De*le}}}}return e.makeTensorInfo([l,h,u,f],"float32",y)}const aZ={kernelName:Ly,backendName:"cpu",kernelFunc:oZ};function lZ(n){const{inputs:t,backend:e,attrs:s}=n,{images:i}=t,{alignCorners:r,halfPixelCenters:o,size:a}=s;wn(i,"resizeNearestNeighbor");const l=Dn(i.shape),[u,h]=a,[f,g,m,y]=i.shape,k=e.data.get(i.dataId).values,C=new Float32Array(f*u*h*y),S=[r&&u>1?g-1:g,r&&h>1?m-1:m],$=[r&&u>1?u-1:u,r&&h>1?h-1:h],D=S[0]/$[0],R=S[1]/$[1];let V=0;for(let E=0;E<f;E++){const q=E*l[0];for(let X=0;X<u;X++){const B=o?D*(X+.5):D*X;let U=Math.min(g-1,r?Math.round(B):Math.floor(B));o&&(U=Math.max(0,U));const K=q+U*l[1];for(let Y=0;Y<h;Y++){const ct=o?R*(Y+.5):R*Y;let j=Math.min(m-1,r?Math.round(ct):Math.floor(ct));o&&(j=Math.max(0,j));const ht=K+j*l[2];for(let It=0;It<y;It++){const yt=k[ht+It];C[V++]=yt}}}}return e.makeTensorInfo([f,u,h,y],i.dtype,C)}const cZ={kernelName:f2,backendName:"cpu",kernelFunc:lZ};function uZ(n){const{inputs:t,backend:e,attrs:s}=n,{images:i,dy:r}=t,{alignCorners:o}=s;wn([r,i],"resizeNearestNeighborGrad");const a=Dn(i.shape),l=Dn(r.shape),[u,h,f,g]=i.shape,[,m,y]=r.shape,k=new Float32Array(u*h*f*g),C=e.data.get(r.dataId).values,S=[o&&m>1?h-1:h,o&&y>1?f-1:f],$=[o&&m>1?m-1:m,o&&y>1?y-1:y],D=S[0]/$[0],R=S[1]/$[1],V=1/D,E=1/R,q=Math.ceil(V)*2+2,X=Math.ceil(E)*2+2;for(let B=0;B<u;B++){const U=B*a[0];for(let K=0;K<h;K++){const Y=U+K*a[1],ct=Math.floor(K*V),j=Math.floor(ct-q/2);for(let ht=0;ht<f;ht++){const It=Y+ht*a[2],yt=Math.floor(ht*E),Ot=Math.floor(yt-X/2);for(let Ct=0;Ct<g;Ct++){let Gt=0;for(let vt=0;vt<q;vt++){const at=vt+j;if(at<0||at>=m)continue;const Pt=U+at*l[1],jt=at*D,Ut=Math.min(h-1,o?Math.round(jt):Math.floor(jt));if(K===Ut)for(let me=0;me<X;me++){const Ee=me+Ot;if(Ee<0||Ee>=y)continue;const le=Pt+Ee*l[2],ce=Ee*R,De=Math.min(f-1,o?Math.round(ce):Math.floor(ce));ht===De&&(Gt+=C[le+Ct])}}k[It+Ct]=Gt}}}}return e.makeTensorInfo(i.shape,i.dtype,k)}const hZ={kernelName:Py,backendName:"cpu",kernelFunc:uZ};function dZ(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{dims:r}=s;wn(i,"reverse");const o=i.shape.length,a=ds(r,i.shape);if(o===0)return Il({inputs:{x:i},backend:e});const l=new or(i.shape,i.dtype),u=e.bufferSync(i);for(let h=0;h<l.size;h++){const f=l.indexToLoc(h),g=f.slice();a.forEach(m=>g[m]=i.shape[m]-1-g[m]),l.set(u.get(...g),...f)}return e.makeTensorInfo(l.shape,l.dtype,l.values)}const fZ={kernelName:g2,backendName:"cpu",kernelFunc:dZ};const pZ={kernelName:Hy,backendName:"cpu",kernelFunc:({inputs:n,attrs:t,backend:e})=>{const{image:s}=n,{radians:i,fillValue:r,center:o}=t,a=e,l=br(s.dtype,Ce(s.shape)),[u,h,f,g]=s.shape,[m,y]=_w(o,h,f),k=255,C=Math.sin(i),S=Math.cos(i),$=a.data.get(s.dataId).values;for(let R=0;R<u;R++){const V=R*f*h*g;for(let E=0;E<h;E++){const q=E*(f*g);for(let X=0;X<f;X++){const B=X*g;for(let U=0;U<g;U++){const K=[u,E,X,U],Y=K[2],ct=K[1];let j=(Y-m)*S-(ct-y)*C,ht=(Y-m)*C+(ct-y)*S;j=Math.round(j+m),ht=Math.round(ht+y);let It=r;if(typeof r!="number"&&(U===3?It=k:It=r[U]),j>=0&&j<f&&ht>=0&&ht<h){const Ot=ht*(f*g),Ct=j*g,Gt=V+Ot+Ct+U;It=$[Gt]}const yt=V+q+B+U;l[yt]=It}}}}return{dataId:a.write(l,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};const gZ=Xs(T0,n=>{const t=Math.floor(n);return n-t<.5?Math.floor(n):n-t>.5?Math.ceil(n):t%2===0?t:t+1}),mZ={kernelName:T0,backendName:"cpu",kernelFunc:gZ};function xZ(n){const{inputs:t,backend:e,attrs:s}=n,{indices:i,updates:r}=t,{shape:o}=s,{sliceRank:a,numUpdates:l,sliceSize:u,strides:h,outputSize:f}=Bh(r,i,o),g=!0,m=e.bufferSync(i),y=e.bufferSync(r),k=uh(m,y,o,f,u,l,a,h,0,g);return e.makeTensorInfo(o,k.dtype,k.values)}const bZ={kernelName:xI,backendName:"cpu",kernelFunc:xZ};function vZ(n,t){let e=0,s=n.length,i=0;for(;e<s;)i=Math.floor((e+s)/2),n[i]<t?e=i+1:s=i;return s}function yZ(n,t){let e=0,s=n.length,i=0;for(;e<s;)i=Math.floor((e+s)/2),n[i]<=t?e=i+1:s=i;return s}function wZ(n,t,e,s,i,r){const o=Ti("int32",e*i);for(let a=0;a<e;++a){const l=n.slice(a*s,(a+1)*s),u=a*i;for(let h=0;h<i;++h)o[u+h]=r==="left"?vZ(l,t[h+u]):yZ(l,t[h+u])}return o}function kZ(n){const{inputs:t,backend:e,attrs:s}=n,{sortedSequence:i,values:r}=t,{side:o}=s,a=e.data.get(i.dataId).values,l=e.data.get(r.dataId).values,u=wZ(a,l,i.shape[0],i.shape[1],r.shape[1],o);return e.makeTensorInfo(r.shape,"int32",u)}const CZ={kernelName:vI,backendName:"cpu",kernelFunc:kZ};function SZ(n){const{inputs:t,backend:e}=n,{condition:s,t:i,e:r}=t;wn([s,i,r],"select");const o=s.shape.length,a=e.data.get(s.dataId).values,l=e.data.get(i.dataId).values,u=e.data.get(r.dataId).values,h=To(i.dtype,r.dtype),f=vr(Ce(i.shape),h);let g=0;const m=o===0||o>1||i.shape.length===1?1:Ce(i.shape.slice(1));for(let y=0;y<a.length;y++)for(let k=0;k<m;k++)a[y]===1?f[g++]=l[y]:f[g++]=u[y];return e.makeTensorInfo(i.shape,h,f)}const TZ={kernelName:m2,backendName:"cpu",kernelFunc:SZ};const IZ=O2,EZ=F2,_Z=Xs(E0,n=>n>=0?EZ*n:IZ*(Math.exp(n)-1)),AZ={kernelName:E0,backendName:"cpu",kernelFunc:_Z};const $Z=Xs($0,n=>n<0?-1:n>0?1:0),NZ={kernelName:$0,backendName:"cpu",kernelFunc:$Z};const DZ=Xs(_0,n=>Math.sin(n)),RZ={kernelName:_0,backendName:"cpu",kernelFunc:DZ};const MZ=Xs(A0,n=>Math.sinh(n)),OZ={kernelName:A0,backendName:"cpu",kernelFunc:MZ};const FZ=11920928955078125e-23,XC=Math.log(FZ)+2,PZ=Xs(D0,n=>{const t=n>-XC,e=n<XC,s=Math.exp(n);let i;return e?i=s:t?i=n:i=Math.log(1+s),i}),LZ={kernelName:D0,backendName:"cpu",kernelFunc:PZ};function BZ(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{blockShape:r,paddings:o}=s;wn([i],"spaceToBatchND");const a=Ce(r),l=[[0,0]];l.push(...o);for(let E=1+r.length;E<i.shape.length;++E)l.push([0,0]);const u=PA.kernelFunc({inputs:{x:i},backend:e,attrs:{paddings:l,constantValue:0}}),h=H0(u.shape,r,a,!1),f=j0(h.length,r.length,!1),g=X0(u.shape,r,a,!1),k=ii({inputs:{x:u},backend:e,attrs:{shape:h}}),$=oo({inputs:{x:k},backend:e,attrs:{perm:f}}),V=ii({inputs:{x:$},backend:e,attrs:{shape:g}});return e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(k),e.disposeIntermediateTensorInfo($),V}const zZ={kernelName:v2,backendName:"cpu",kernelFunc:BZ};function WZ(n){const{inputs:t,backend:e}=n,{indices:s,values:i,denseShape:r,defaultValue:o}=t;if(r.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${r.shape}`);if(s.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${s.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=e.data.get(s.dataId).values,l=e.data.get(i.dataId).values,u=e.data.get(r.dataId).values,h=e.data.get(o.dataId).values[0],[f,g,m,y,k]=cA(a,s.shape,s.dtype,l,i.dtype,u,h);return[e.makeTensorInfo(g,s.dtype,f),e.makeTensorInfo([g[0]],i.dtype,m),e.makeTensorInfo([y.length],"bool",new Uint8Array(y.map(C=>Number(C)))),e.makeTensorInfo([k.length],s.dtype,new Int32Array(k))]}const VZ={kernelName:yI,backendName:"cpu",kernelFunc:WZ};function UZ(n){const{inputs:t,backend:e}=n,{inputIndices:s,inputShape:i,newShape:r}=t;if(s.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${s.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(r.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${r.shape}`);const o=Array.from(e.data.get(i.dataId).values),a=e.data.get(s.dataId).values,l=Array.from(e.data.get(r.dataId).values),[u,h,f]=uA(a,s.shape,s.dtype,o,l);return[e.makeTensorInfo(h,s.dtype,u),e.makeTensorInfo([f.length],r.dtype,new Int32Array(f))]}const GZ={kernelName:wI,backendName:"cpu",kernelFunc:UZ};function HZ(n){const{inputs:t,backend:e}=n,{data:s,indices:i,segmentIds:r}=t;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${r.shape}`);if(i.shape[0]!==r.shape[0])throw new Error("segmentIds and indices should have same size.");const o=e.data.get(s.dataId).values,a=e.data.get(i.dataId).values,l=e.data.get(r.dataId).values,[u,h]=v3(o,s.shape,s.dtype,a,l,!0);return e.makeTensorInfo(h,s.dtype,u)}const jZ={kernelName:kI,backendName:"cpu",kernelFunc:HZ};function XZ(n){const{inputs:t,backend:e}=n,{data:s,indices:i,segmentIds:r}=t;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${r.shape}`);if(i.shape[0]!==r.shape[0])throw new Error("segmentIds and indices should have same size.");const o=e.data.get(s.dataId).values,a=e.data.get(i.dataId).values,l=e.data.get(r.dataId).values,[u,h]=v3(o,s.shape,s.dtype,a,l);return e.makeTensorInfo(h,s.dtype,u)}const qZ={kernelName:CI,backendName:"cpu",kernelFunc:XZ};function KZ(n){const{inputs:t,backend:e,attrs:s}=n,{sparseIndices:i,sparseValues:r,defaultValue:o}=t,{outputShape:a}=s,{sliceRank:l,numUpdates:u,sliceSize:h,strides:f,outputSize:g}=Bh(r,i,a),m=!1,y=e.bufferSync(i);let k;switch(r.dtype){case"bool":{const C=e.bufferSync(r),S=!!e.data.get(o.dataId).values[0];k=uh(y,C,a,g,h,u,l,f,S,m);break}case"float32":{const C=e.bufferSync(r),S=e.data.get(o.dataId).values[0];k=uh(y,C,a,g,h,u,l,f,S,m);break}case"int32":{const C=e.bufferSync(r),S=e.data.get(o.dataId).values[0];k=uh(y,C,a,g,h,u,l,f,S,m);break}case"string":{const C=e.bufferSync(r),S=eu(e.data.get(o.dataId).values[0]);k=uh(y,C,a,g,h,u,l,f,S,m);break}default:throw new Error(`Unsupported type ${r.dtype}`)}return e.makeTensorInfo(a,k.dtype,k.values)}const YZ={kernelName:SI,backendName:"cpu",kernelFunc:KZ};function ZZ(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{numOrSizeSplits:r,axis:o}=s,a=ds(o,i.shape)[0],l=Uw(i,r,a),u=new Array(i.shape.length).fill(0),h=i.shape.slice();return l.map(f=>{const g=[...h];g[a]=f;const m=Dh({inputs:{x:i},backend:e,attrs:{begin:u,size:g}});return u[a]+=f,m})}const JZ={kernelName:y2,backendName:"cpu",kernelFunc:ZZ};const QZ={kernelName:By,backendName:"cpu",kernelFunc:({inputs:n,backend:t})=>{const{x:e}=n,s=t;wn(e,"square");const i=s.data.get(e.dataId).values,r=new Float32Array(i.length);for(let a=0;a<i.length;++a){const l=i[a];r[a]=l*l}return{dataId:s.write(r,e.shape,e.dtype),shape:e.shape,dtype:e.dtype}}};const tJ=Xs(B0,(n,t)=>{const e=t;return isNaN(n)?NaN:n>0?1:e.alpha}),eJ={kernelName:B0,backendName:"cpu",kernelFunc:tJ};function nJ(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{begin:r,end:o,strides:a,beginMask:l,endMask:u,ellipsisMask:h,newAxisMask:f,shrinkAxisMask:g}=s;wn(i,"stridedSlice");const{finalShapeSparse:m,finalShape:y,isIdentity:k,sliceDim0:C,isSimpleSlice:S,begin:$,end:D,strides:R}=V5(i.shape,r,o,a,l,u,h,f,g);let V;if(k)V=ii({inputs:{x:i},backend:e,attrs:{shape:y}});else if(C||S){wt(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const E=B5($,D,R),q=Dh({inputs:{x:i},backend:e,attrs:{begin:$,size:E}});V=ii({inputs:{x:q},backend:e,attrs:{shape:y}}),e.disposeIntermediateTensorInfo(q)}else{const E=e.bufferSync(i),q=fA(m,E,R,$);V=e.makeTensorInfo(y,q.dtype,q.values)}return V}const sJ={kernelName:Wy,backendName:"cpu",kernelFunc:nJ};function iJ(n){const{inputs:t,backend:e,attrs:s}=n,{separator:i,nGramWidths:r,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:u}=s,{data:h,dataSplits:f}=t,g=e.data.get(h.dataId).values,m=e.data.get(f.dataId).values,[y,k]=pA(g,m,i,r,o,a,l,u);return[e.makeTensorInfo([y.length],"string",y),e.makeTensorInfo(f.shape,"int32",k)]}const rJ={kernelName:TI,backendName:"cpu",kernelFunc:iJ};function oJ(n){const{inputs:t,backend:e,attrs:s}=n,{skipEmpty:i}=s,{input:r,delimiter:o}=t;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(r.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${r.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=e.data.get(r.dataId).values,l=e.data.get(o.dataId).values[0],[u,h,f]=gA(a,l,i),g=h.length;return[e.makeTensorInfo([g,2],"int32",u),e.makeTensorInfo([g],"string",h),e.makeTensorInfo([2],"int32",new Int32Array(f))]}const aJ={kernelName:II,backendName:"cpu",kernelFunc:oJ};function lJ(n){const{inputs:t,backend:e,attrs:s}=n,{numBuckets:i}=s,{input:r}=t;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=e.data.get(r.dataId).values,a=mA(o,i);return e.makeTensorInfo(r.shape,"int32",a)}const cJ={kernelName:EI,backendName:"cpu",kernelFunc:lJ};const uJ=Xs(F0,n=>Math.tan(n)),hJ={kernelName:F0,backendName:"cpu",kernelFunc:uJ};const dJ=Xs(P0,n=>Math.tanh(n)),fJ={kernelName:P0,backendName:"cpu",kernelFunc:dJ};function pJ(n){const{inputs:t,backend:e}=n,{tensor:s,indices:i,updates:r}=t,{sliceRank:o,numUpdates:a,sliceSize:l,strides:u,outputSize:h}=Bh(r,i,s.shape),f=!1,g=e.bufferSync(i),m=e.bufferSync(r),y=e.bufferSync(s),k=uh(g,m,s.shape,h,l,a,o,u,y,f);return e.makeTensorInfo(s.shape,k.dtype,k.values)}const gJ={kernelName:bI,backendName:"cpu",kernelFunc:pJ};function mJ(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{reps:r}=s;wn(i,"tile");const o=bA(e.bufferSync(i),r);return e.makeTensorInfo(o.shape,o.dtype,o.values)}const xJ={kernelName:L0,backendName:"cpu",kernelFunc:mJ};function bJ(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{k:r,sorted:o}=s;wn(i,"topk");const a=e.data.get(i.dataId).values,[l,u]=yA(a,i.shape,i.dtype,r,o);return[e.makeTensorInfo(l.shape,l.dtype,l.values),e.makeTensorInfo(u.shape,u.dtype,u.values)]}const vJ={kernelName:Vy,backendName:"cpu",kernelFunc:bJ};function yJ(n){const{inputs:t,attrs:e,backend:s}=n,{image:i,transforms:r}=t,{interpolation:o,fillMode:a,fillValue:l,outputShape:u}=e,[h,f,g,m]=i.shape,[y,k]=u??[f,g],C=[h,y,k,m],S=Dn(i.shape),$=S[0],D=S[1],R=S[2],V=Dn(C),E=V[0],q=V[1],X=V[2],B=br(i.dtype,Ce(C));B.fill(l);const U=s.data.get(i.dataId).values,K=s.data.get(r.dataId).values;for(let ct=0;ct<h;++ct){const j=r.shape[0]===1?K:K.subarray(ct*8,ct*8+8);for(let ht=0;ht<y;++ht)for(let It=0;It<k;++It)for(let yt=0;yt<m;++yt){let Ot;const Ct=j[6]*It+j[7]*ht+1;if(Ct===0)continue;const Gt=(j[0]*It+j[1]*ht+j[2])/Ct,vt=(j[3]*It+j[4]*ht+j[5])/Ct,at=qC(Gt,g,a),Pt=qC(vt,f,a);switch(o){case"nearest":Ot=IJ(U,f,g,$,D,R,ct,Pt,at,yt,l);break;case"bilinear":Ot=EJ(U,f,g,$,D,R,ct,Pt,at,yt,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const jt=ct*E+ht*q+It*X+yt;B[jt]=Ot}return s.makeTensorInfo(C,i.dtype,B)}return{dataId:s.write(B,C,i.dtype),shape:i.shape,dtype:i.dtype}}const wJ={kernelName:Uy,backendName:"cpu",kernelFunc:yJ};function qC(n,t,e){switch(e){case"reflect":return kJ(n,t);case"wrap":return CJ(n,t);case"nearest":return TJ(n,t);default:return SJ(n)}}function kJ(n,t){let e=n;if(e<0)if(t<=1)e=0;else{const s=2*t;e<s&&(e=s*Math.trunc(-e/s)+e),e=e<-t?e+s:-e-1}else if(e>t-1)if(t<=1)e=0;else{const s=2*t;e-=s*Math.trunc(e/s),e>=t&&(e=s-e-1)}return Qv(0,e,t-1)}function CJ(n,t){let e=n;if(e<0)if(t<=1)e=0;else{const s=t-1;e+=t*(Math.trunc(-e/s)+1)}else if(e>t-1)if(t<=1)e=0;else{const s=t-1;e-=t*Math.trunc(e/s)}return Qv(0,e,t-1)}function SJ(n,t){return n}function TJ(n,t){return Qv(0,n,t-1)}function pp(n,t,e,s,i,r,o,a,l,u,h){const f=o*s+a*i+l*r+u;return 0<=a&&a<t&&0<=l&&l<e?n[f]:h}function IJ(n,t,e,s,i,r,o,a,l,u,h){const f=Math.round(a),g=Math.round(l);return pp(n,t,e,s,i,r,o,f,g,u,h)}function EJ(n,t,e,s,i,r,o,a,l,u,h){const f=Math.floor(a),g=Math.floor(l),m=f+1,y=g+1,k=(y-l)*pp(n,t,e,s,i,r,o,f,g,u,h)+(l-g)*pp(n,t,e,s,i,r,o,f,y,u,h),C=(y-l)*pp(n,t,e,s,i,r,o,m,g,u,h)+(l-g)*pp(n,t,e,s,i,r,o,m,y,u,h);return(m-a)*k+(a-f)*C}function _J(n){const{inputs:t,attrs:e,backend:s}=n,{axis:i}=e,{x:r}=t;wn(r,"unique");const o=s.data.get(r.dataId).values,{outputValues:a,outputShape:l,indices:u}=wA(o,i,r.shape,r.dtype);return[s.makeTensorInfo(l,r.dtype,a),s.makeTensorInfo([u.length],"int32",u)]}const AJ={kernelName:Gy,backendName:"cpu",kernelFunc:_J};function $J(n){const{inputs:t,backend:e,attrs:s}=n,{value:i}=t;let{axis:r}=s;r<0&&(r+=i.shape.length);const o=i.shape.length,a=i.shape[r],l=new Array(o-1);let u=0;for(let m=0;m<o;m++)m!==r&&(l[u++]=i.shape[m]);const h=new Array(o).fill(0),f=i.shape.slice();f[r]=1;const g=new Array(a);for(let m=0;m<g.length;m++){h[r]=m;const y=Dh({inputs:{x:i},backend:e,attrs:{begin:h,size:f}});g[m]=ii({inputs:{x:y},backend:e,attrs:{shape:l}}),e.disposeIntermediateTensorInfo(y)}return g}const NJ={kernelName:k2,backendName:"cpu",kernelFunc:$J};function DJ(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,segmentIds:r}=t,{numSegments:o}=s;wn(i,"unsortedSegmentSum");const a=i.shape.length,l=r.shape.length,u=[],h=[],f=a-l;let g=r;for(let y=0;y<f;++y){const k=l1({inputs:{input:g},backend:e,attrs:{dim:y+1}});g=k,h.push(k)}for(let y=0;y<o;++y){const k=lu(y,"int32"),C=e.makeTensorInfo([],"int32",k),S=F6({inputs:{a:C,b:g},backend:e}),$=ou({inputs:{x:S},backend:e,attrs:{dtype:"float32"}}),D=q2({inputs:{a:$,b:i},backend:e}),R=ng({inputs:{x:D},backend:e,attrs:{axis:0,keepDims:!1}});u.push(R),h.push(C),h.push(S),h.push($),h.push(D),h.push(R)}const m=FA({inputs:u,backend:e,attrs:{axis:0}});return h.forEach(y=>e.disposeIntermediateTensorInfo(y)),m}const RJ={kernelName:C2,backendName:"cpu",kernelFunc:DJ};const MJ=[_X,lj,$X,DX,pj,MX,FX,LX,zX,VX,GX,jX,qX,ZX,QX,nq,iq,oq,lq,IX,uq,dq,pq,mj,mq,dj,bj,bq,cj,yq,kq,Cq,Tq,Eq,Aq,Nq,Rq,Oq,Pq,Bq,Wq,Uq,Hq,Xq,qq,Yq,Jq,tK,eK,nK,sK,rK,lK,vX,uK,vj,bK,yj,vK,kj,TK,IK,_K,Sj,Ij,$K,DK,MK,FK,_j,$j,uj,LK,wq,zK,VK,GK,yX,Dj,Mj,jK,Fj,qK,ZK,QK,nY,iY,oY,aY,Lj,cY,hY,fY,gY,xY,vY,wY,zj,CY,IY,AY,Vj,Gj,DY,OY,LY,jj,zY,VY,UY,PA,XY,kX,Kj,KY,ZY,QY,eZ,hj,Iv,sZ,CX,SX,TX,rZ,aZ,cZ,hZ,fZ,pZ,mZ,sX,bZ,CZ,TZ,AZ,rX,NZ,RZ,OZ,oX,EY,LZ,zZ,VZ,GZ,jZ,qZ,YZ,JZ,cX,QZ,hX,fX,eJ,sJ,rJ,aJ,cJ,xX,oK,hJ,fJ,gJ,xJ,vJ,wJ,Xj,AJ,NJ,RJ,WY];for(const n of MJ)AI(n);const oh={},lm={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function OJ(n,t){oh[n]=t}function Ka(n,t){if(!(n in oh)||t!=null){const s=PJ(n,t);if(s!==null)oh[n]=s;else return console.log("Could not get context for WebGL version",n),null}const e=oh[n];return e==null||e.isContextLost()?(delete oh[n],Ka(n)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),oh[n])}function FJ(n){if(!ge().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&n===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function PJ(n,t){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const e=t??FJ(n);return e.addEventListener("webglcontextlost",s=>{s.preventDefault(),delete oh[n]},!1),ge().getBool("SOFTWARE_WEBGL_ENABLED")&&(lm.failIfMajorPerformanceCaveat=!1),n===1?e.getContext("webgl",lm)||e.getContext("experimental-webgl",lm):e.getContext("webgl2",lm)}var Dp;(function(n){n[n.DENSE=0]="DENSE",n[n.SHARED_BATCH=1]="SHARED_BATCH"})(Dp||(Dp={}));var Go;(function(n){n[n.RENDER=0]="RENDER",n[n.UPLOAD=1]="UPLOAD",n[n.PIXELS=2]="PIXELS",n[n.DOWNLOAD=3]="DOWNLOAD"})(Go||(Go={}));var rr;(function(n){n[n.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",n[n.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",n[n.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",n[n.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",n[n.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(rr||(rr={}));function sg(n,t){return[t,n]}function LJ(n,t){return n*t}function cm(n){const t=Ce(n),e=Math.ceil(t/4);return Kb(e)}function df(n,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(n/2))]}function BJ(n,t){const[e,s]=df(n,t);return e*s*4}function S3(n,t){const e=n;let s,i,r,o,a,l,u,h,f,g;return ge().getNumber("WEBGL_VERSION")===2?(s=e.R32F,i=e.R16F,r=e.RGBA16F,o=e.RGBA32F,a=e.RED,u=4,h=1,f=e.HALF_FLOAT,g=e.FLOAT,l=e.RGBA8):(s=n.RGBA,i=n.RGBA,r=n.RGBA,o=e.RGBA,a=n.RGBA,u=4,h=4,f=t!=null?t.HALF_FLOAT_OES:null,g=n.FLOAT,l=n.RGBA),{internalFormatFloat:s,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:r,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:h,textureTypeHalfFloat:f,textureTypeFloat:g}}function sn(n,t){const e=t();return ge().getBool("DEBUG")&&zJ(n),e}function zJ(n){const t=n.getError();if(t!==n.NO_ERROR)throw new Error("WebGL Error: "+GJ(n,t))}const WJ=596e-10,VJ=65504;function UJ(n){return!!(ge().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||n===0||WJ<Math.abs(n)&&Math.abs(n)<VJ)}function GJ(n,t){switch(t){case n.NO_ERROR:return"NO_ERROR";case n.INVALID_ENUM:return"INVALID_ENUM";case n.INVALID_VALUE:return"INVALID_VALUE";case n.INVALID_OPERATION:return"INVALID_OPERATION";case n.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case n.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case n.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}function um(n,t){return fc(n,()=>n.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function HJ(n,t){const e=fc(n,()=>n.createShader(n.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(sn(n,()=>n.shaderSource(e,t)),sn(n,()=>n.compileShader(e)),n.getShaderParameter(e,n.COMPILE_STATUS)===!1)throw console.log(n.getShaderInfoLog(e)),new Error("Failed to compile vertex shader.");return e}function jJ(n,t){const e=fc(n,()=>n.createShader(n.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(sn(n,()=>n.shaderSource(e,t)),sn(n,()=>n.compileShader(e)),ge().get("ENGINE_COMPILE_ONLY"))return e;if(n.getShaderParameter(e,n.COMPILE_STATUS)===!1)throw LA(t,n.getShaderInfoLog(e)),new Error("Failed to compile fragment shader.");return e}const XJ=/ERROR: [0-9]+:([0-9]+):/g;function LA(n,t){const e=XJ.exec(t);if(e==null){console.log(`Couldn't parse line number in error: ${t}`),console.log(n);return}const s=+e[1],i=n.split(`
`),r=i.length.toString().length+2,o=i.map((f,g)=>Nd((g+1).toString(),r)+f);let a=0;for(let f=0;f<o.length;f++)a=Math.max(o[f].length,a);const l=o.slice(0,s-1),u=o.slice(s-1,s),h=o.slice(s);console.log(l.join(`
`)),console.log(t.split(`
`)[0]),console.log(`%c ${Nd(u[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join(`
`))}function qJ(n){return fc(n,()=>n.createProgram(),"Unable to create WebGLProgram.")}function KJ(n,t){if(sn(n,()=>n.linkProgram(t)),!ge().get("ENGINE_COMPILE_ONLY")&&n.getProgramParameter(t,n.LINK_STATUS)===!1)throw console.log(n.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function Eb(n,t){if(sn(n,()=>n.validateProgram(t)),n.getProgramParameter(t,n.VALIDATE_STATUS)===!1)throw console.log(n.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function YJ(n,t){const e=fc(n,()=>n.createBuffer(),"Unable to create WebGLBuffer");return sn(n,()=>n.bindBuffer(n.ARRAY_BUFFER,e)),sn(n,()=>n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW)),e}function ZJ(n,t){const e=fc(n,()=>n.createBuffer(),"Unable to create WebGLBuffer");return sn(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e)),sn(n,()=>n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,n.STATIC_DRAW)),e}function JJ(n){return fc(n,()=>n.createTexture(),"Unable to create WebGLTexture.")}function QJ(n,t){const e=ge().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n<=0||t<=0){const s=`[${n}x${t}]`;throw new Error("Requested texture size "+s+" is invalid.")}if(n>e||t>e){const s=`[${n}x${t}]`,i=`[${e}x${e}]`;throw new Error("Requested texture size "+s+" greater than WebGL maximum on this browser / GPU "+i+".")}}function tQ(n){return fc(n,()=>n.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function KC(n,t,e,s,i,r,o){const a=n.getAttribLocation(t,e);return a===-1?!1:(sn(n,()=>n.bindBuffer(n.ARRAY_BUFFER,s)),sn(n,()=>n.vertexAttribPointer(a,i,n.FLOAT,!1,r,o)),sn(n,()=>n.enableVertexAttribArray(a)),!0)}function eQ(n,t,e){oQ(n,e),sn(n,()=>n.activeTexture(n.TEXTURE0+e)),sn(n,()=>n.bindTexture(n.TEXTURE_2D,t))}function nQ(n,t,e){return fc(n,()=>n.getUniformLocation(t,e),'uniform "'+e+'" not present in program.')}function sQ(n,t,e){return n.getUniformLocation(t,e)}function iQ(n,t,e,s){sn(n,()=>eQ(n,t,s)),sn(n,()=>n.uniform1i(e,s))}function _b(n,t,e){sn(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,e)),sn(n,()=>n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0))}function YC(n,t){sn(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,t)),sn(n,()=>n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,null,0))}function hm(n){const t=n.checkFramebufferStatus(n.FRAMEBUFFER);if(t!==n.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+rQ(n,t))}function rQ(n,t){switch(t){case n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case n.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}function fc(n,t,e){const s=sn(n,()=>t());if(s==null)throw new Error(e);return s}function oQ(n,t){const e=n.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,s=t+n.TEXTURE0;if(s<n.TEXTURE0||s>e){const i=`[gl.TEXTURE0, gl.TEXTURE${e}]`;throw new Error(`textureUnit must be in ${i}.`)}}function Kd(n,t=2){return Ce(n.slice(0,n.length-t))}function Yd(n){if(n.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[n.length>1?n[n.length-2]:1,n[n.length-1]]}function dm(n){let t=[1,1,1];return n.length===0||n.length===1&&n[0]===1||(t=[Kd(n),...Yd(n)]),t}function aQ(n,t=!1){let e=ge().getNumber("WEBGL_MAX_TEXTURE_SIZE"),s=ge().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");s===1/0&&ge().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(s=e/2),t&&(e=e*2,s=s*2,n=n.map((a,l)=>l>=n.length-2?ty(n[l]):n[l]),n.length===1&&(n=[2,n[0]])),n.length!==2&&(n=au(n).newShape);let i=Ce(n),r=null;n.length<=1&&i<=e?r=[1,i]:n.length===2&&n[0]<=e&&n[1]<=e?r=n:n.length===3&&n[0]*n[1]<=e&&n[2]<=e?r=[n[0]*n[1],n[2]]:n.length===3&&n[0]<=e&&n[1]*n[2]<=e?r=[n[0],n[1]*n[2]]:n.length===4&&n[0]*n[1]*n[2]<=e&&n[3]<=e?r=[n[0]*n[1]*n[2],n[3]]:n.length===4&&n[0]<=e&&n[1]*n[2]*n[3]<=e&&(r=[n[0],n[1]*n[2]*n[3]]);const o=r!=null&&Math.max(...r)>s&&Math.min(...r)<=(t?2:1)&&Math.min(...r)>0;if(r==null||o)if(t){const a=Kd(n);let l=2,u=2;n.length&&([l,u]=Yd(n)),i=a*(l/2)*(u/2),r=Kb(i).map(h=>h*2)}else r=Kb(i);return r}function fm(n){return n%2===0}function u1(n,t){if(n=n.slice(-2),t=t.slice(-2),zs(n,t)||!n.length||!t.length||n[0]===0||n[1]===0||t[0]===0||t[1]===0)return!0;if(n.length!==t.length){const e=n[n.length-1],s=t[t.length-1];if(e===s||fm(e)&&fm(s)&&(n[0]===1||t[0]===1))return!0}return n[1]===t[1]&&fm(n[0])&&fm(t[0])}let Ab,$b;function lQ(n){if(Ab==null){const t=Ka(n);Ab=t.getParameter(t.MAX_TEXTURE_SIZE)}return Ab}function cQ(n){if($b==null){const t=Ka(n);$b=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,$b)}function uQ(n){if(n===0)return 0;let t;const e=Ka(n);return la(e,"EXT_disjoint_timer_query_webgl2")&&n===2?t=2:la(e,"EXT_disjoint_timer_query")?t=1:t=0,t}function la(n,t){return n.getExtension(t)!=null}function ZC(n){try{if(Ka(n)!=null)return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function hQ(n){if(n===0)return!1;const t=Ka(n);if(n===1){if(!la(t,"OES_texture_float"))return!1}else if(!la(t,"EXT_color_buffer_float"))return!1;return _v(t)}function dQ(n){if(n===0)return!1;const t=Ka(n);if(n===1){if(!la(t,"OES_texture_float")||!la(t,"WEBGL_color_buffer_float"))return!1}else{if(la(t,"EXT_color_buffer_float"))return _v(t);const s="EXT_color_buffer_half_float";if(la(t,s)){const i=t.getExtension(s);return fQ(t,i)}return!1}return _v(t)}function _v(n){const t=S3(n),e=n.createTexture();n.bindTexture(n.TEXTURE_2D,e),n.texImage2D(n.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,r),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);const o=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(e),n.deleteFramebuffer(r),o}function fQ(n,t){const e=S3(n,t),s=n.createTexture();n.bindTexture(n.TEXTURE_2D,s),n.texImage2D(n.TEXTURE_2D,0,e.internalFormatHalfFloat,1,1,0,e.textureFormatFloat,e.textureTypeHalfFloat,null);const o=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,o),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,s,0);const a=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(s),n.deleteFramebuffer(o),a}function pQ(n){return n!==2?!1:Ka(n).fenceSync!=null}function ig(n,t){Array.isArray(n)||(n=[n]),n.forEach(e=>{e!=null&&wt(e.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the WebGL backend.`)})}const Cn=ge();Cn.registerFlag("HAS_WEBGL",()=>Cn.getNumber("WEBGL_VERSION")>0);Cn.registerFlag("WEBGL_VERSION",()=>ZC(2)?2:ZC(1)?1:0);Cn.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Cn.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Cn.get("WEBGL_VERSION")===2);Cn.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Cn.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Cn.registerFlag("WEBGL_PACK",()=>Cn.getBool("HAS_WEBGL"));Cn.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Cn.getBool("WEBGL_PACK"));Cn.registerFlag("WEBGL_PACK_CLIP",()=>Cn.getBool("WEBGL_PACK"));Cn.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Cn.getBool("WEBGL_PACK"));Cn.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Cn.getBool("WEBGL_PACK"));Cn.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Cn.getBool("WEBGL_PACK"));Cn.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Cn.getBool("WEBGL_PACK"));Cn.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Cn.getBool("WEBGL_PACK"));Cn.registerFlag("WEBGL_PACK_REDUCE",()=>Cn.getBool("WEBGL_PACK"));Cn.registerFlag("WEBGL_LAZILY_UNPACK",()=>Cn.getBool("WEBGL_PACK"));Cn.registerFlag("WEBGL_CONV_IM2COL",()=>Cn.getBool("WEBGL_PACK"));Cn.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Cn.getBool("WEBGL_PACK"));Cn.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>lQ(Cn.getNumber("WEBGL_VERSION")));Cn.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>cQ(Cn.getNumber("WEBGL_VERSION")));Cn.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const n=Cn.getNumber("WEBGL_VERSION");return n===0?0:uQ(n)});Cn.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Cn.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!VI());Cn.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>hQ(Cn.getNumber("WEBGL_VERSION")));Cn.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Cn.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Cn.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Cn.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>dQ(Cn.getNumber("WEBGL_VERSION")));Cn.registerFlag("WEBGL_FENCE_API_ENABLED",()=>pQ(Cn.getNumber("WEBGL_VERSION")));Cn.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Cn.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Cn.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,n=>{if(typeof n!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${n}.`);if(n<0&&n!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${n}.`)});Cn.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>VI()?1:-1,n=>{if(typeof n!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${n}.`);if(n<0&&n!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${n}.`)});Cn.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Cn.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Cn.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Cn.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Cn.registerFlag("WEBGL_EXP_CONV",()=>!1);Cn.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Cn.getBool("IS_TEST"));Cn.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Cn.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Cn.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Cn.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);function Vr(){let n,t,e,s,i,r,o,a,l,u;return ge().getNumber("WEBGL_VERSION")===2?(n="#version 300 es",t="in",e="out",s="in",i="texture",r="outputColor",o="out vec4 outputColor;",a=ge().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(n="",t="attribute",e="varying",s="varying",i="texture2D",r="gl_FragColor",o="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:n,attribute:t,varyingVs:e,varyingFs:s,texture2D:i,output:r,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:l,defineRound:u}}function Vh(n,t,e="index"){const s=Dn(t);return s.map((i,r)=>{const o=`int ${n[r]} = ${e} / ${i}`,a=r===s.length-1?`int ${n[r+1]} = ${e} - ${n[r]} * ${i}`:`index -= ${n[r]} * ${i}`;return`${o}; ${a};`}).join("")}function K2(n,t,e="index"){const s=Dn(t);return s.map((i,r)=>{const o=`int ${n[r]} = ${e} / outShapeStrides[${r}]`,a=r===s.length-1?`int ${n[r+1]} = ${e} - ${n[r]} * outShapeStrides[${r}]`:`index -= ${n[r]} * outShapeStrides[${r}]`;return`${o}; ${a};`}).join("")}function gQ(n,t){const e=n.length,s=n.map(r=>`${t}[${r}]`),i=new Array(e-1);i[e-2]=s[e-1];for(let r=e-3;r>=0;--r)i[r]=`(${i[r+1]} * ${s[r+1]})`;return i}function mQ(n,t,e="index"){const s=n.map((r,o)=>o),i=gQ(s,t);return i.map((r,o)=>{const a=`int ${n[o]} = ${e} / ${i[o]}`,l=o===i.length-1?`int ${n[o+1]} = ${e} - ${n[o]} * ${i[o]}`:`index -= ${n[o]} * ${i[o]}`;return`${a}; ${l};`}).join("")}function T3(n){const t=Dn(n).map(e=>e.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;
  }
`}function I3(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const BA=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;const{getBroadcastDims:zA}=rV;function xQ(n,t,e){const s=[];if(n.forEach(m=>{const y=Ce(m.shapeInfo.logicalShape);if(m.shapeInfo.isUniform?s.push(`uniform float ${m.name}${y>1?`[${y}]`:""};`):(s.push(`uniform sampler2D ${m.name};`),s.push(`uniform int offset${m.name};`)),e.enableShapeUniforms){const{uniformShape:k}=E3(e.packedInputs,m.shapeInfo.logicalShape,m.shapeInfo.texShape);switch(k.length){case 1:s.push(`uniform int ${m.name}Shape;`);break;case 2:s.push(`uniform ivec2 ${m.name}Shape;`);break;case 3:s.push(`uniform ivec3 ${m.name}Shape;`);break;case 4:s.push(`uniform ivec4 ${m.name}Shape;`);break}s.push(`uniform ivec2 ${m.name}TexShape;`)}}),e.enableShapeUniforms){switch(t.logicalShape.length){case 1:s.push("uniform int outShape;");break;case 2:s.push("uniform ivec2 outShape;"),s.push("uniform int outShapeStrides;");break;case 3:s.push("uniform ivec3 outShape;"),s.push("uniform ivec2 outShapeStrides;");break;case 4:s.push("uniform ivec4 outShape;"),s.push("uniform ivec3 outShapeStrides;");break}s.push("uniform ivec2 outTexShape;")}e.customUniforms&&e.customUniforms.forEach(m=>{s.push(`uniform ${m.type} ${m.name}${m.arrayIndex?`[${m.arrayIndex}]`:""};`)});const i=s.join(`
`),r=n.map(m=>bQ(m,t,e.packedInputs,e.enableShapeUniforms)).join(`
`),o=t.texShape,a=Vr(),l=wQ(a);let u,h,f=SQ(a);return t.isPacked?(u=vQ(t.logicalShape,o,e.enableShapeUniforms),h=CQ(a)):(u=yQ(t.logicalShape,o,e.enableShapeUniforms),h=kQ(a)),e.packedInputs&&(f+=_Q),[f,l,h,i,u,r,e.userCode].join(`
`)}function ff(n,t=!1){const e=n.shapeInfo.logicalShape;switch(e.length){case 0:return zQ(n,t);case 1:return VQ(n,t);case 2:return GQ(n,t);case 3:return jQ(n,t);case 4:return qQ(n,t);case 5:return KQ(n);case 6:return YQ(n);default:throw new Error(`${e.length}-D input sampling is not yet supported`)}}function WA(n,t){switch(n.shapeInfo.logicalShape.length){case 0:return BQ(n);case 1:return WQ(n,t);case 2:return UQ(n,t);case 3:return HQ(n,t);default:return XQ(n,t)}}function bQ(n,t,e=!1,s){let i="";e?i+=WA(n,s):i+=ff(n,s);const r=n.shapeInfo.logicalShape,o=t.logicalShape;return r.length<=o.length&&(e?i+=ZQ(n,t):i+=JQ(n,t)),i}function vQ(n,t,e){switch(n.length){case 0:return VA();case 1:return AQ(n,t,e);case 2:return PQ(n,t,e);case 3:return NQ(n,t,e);default:return RQ(n,t,e)}}function yQ(n,t,e){switch(n.length){case 0:return VA();case 1:return $Q(n,t,e);case 2:return LQ(n,t,e);case 3:return DQ(n,t,e);case 4:return MQ(n,t,e);case 5:return OQ(n,t);case 6:return FQ(n,t);default:throw new Error(`${n.length}-D output sampling is not yet supported`)}}function wQ(n){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${n.texture2D}(textureSampler, uv).r;
    }
  `}function kQ(n){return`
    void setOutput(float val) {
      ${n.output} = vec4(val, 0, 0, 0);
    }
  `}function CQ(n){return`
    void setOutput(vec4 val) {
      ${n.output} = val;
    }
  `}function SQ(n){return`${n.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${n.varyingFs} vec2 resultUV;
    ${n.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${n.defineSpecialNaN}
    ${n.defineSpecialInf}
    ${n.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${TQ}
    ${IQ}
    ${EQ}
  `}const TQ=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,IQ=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,EQ=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,_Q=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function VA(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function AQ(n,t,e){const s=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return s[0]===1?e?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${s[1]}.0);
      }
    `:s[1]===1?e?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${s[0]}.0);
      }
    `:e?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      return 2 * (resTexRC.x * ${s[1]} + resTexRC.y);
    }
  `}function $Q(n,t,e){return t[0]===1?e?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${t[1]}.0);
      }
    `:t[1]===1?e?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${t[0]}.0);
      }
    `:e?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      return resTexRC.x * ${t[1]} + resTexRC.y;
    }
  `}function NQ(n,t,e){if(e)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const s=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(n[2]/2),r=i*Math.ceil(n[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      int index = resTexRC.x * ${s[1]} + resTexRC.y;

      int b = index / ${r};
      index -= b * ${r};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function DQ(n,t,e){if(e)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${K2(["r","c","d"],n)}
    return ivec3(r, c, d);
  }
`;const s=Vh(["r","c","d"],n);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${s}
      return ivec3(r, c, d);
    }
  `}function RQ(n,t,e){if(e)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const s=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(n[n.length-1]/2),r=i*Math.ceil(n[n.length-2]/2);let o=r,a="",l="b, r, c";for(let u=2;u<n.length-1;u++)o*=n[n.length-u-1],a=`
      int b${u} = index / ${o};
      index -= b${u} * ${o};
    `+a,l=`b${u}, `+l;return`
    ivec${n.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      int index = resTexRC.x * ${s[1]} + resTexRC.y;

      ${a}

      int b = index / ${r};
      index -= b * ${r};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${n.length}(${l});
    }
  `}function MQ(n,t,e){if(e)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${K2(["r","c","d","d2"],n)}
      return ivec4(r, c, d, d2);
    }
  `;const s=Vh(["r","c","d","d2"],n);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${s}
      return ivec4(r, c, d, d2);
    }
  `}function OQ(n,t){const e=Vh(["r","c","d","d2","d3"],n);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},
                             ${t[1]}));

      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${e}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function FQ(n,t){const e=Vh(["r","c","d","d2","d3","d4"],n);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${e}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function PQ(n,t,e){const s=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(zs(n,t))return e?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${s[0]}, ${s[1]}));
      }
    `;const i=Math.ceil(n[1]/2);return e?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));

      int index = resTexRC.x * ${s[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function LQ(n,t,e){return zs(n,t)?e?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));
      }
    `:n[1]===1?e?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:n[0]===1?e?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:e?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      int r = index / ${n[1]};
      int c = index - r * ${n[1]};
      return ivec2(r, c);
    }
  `}function Uh(n){return`offset${n}`}function BQ(n){const t=n.name,e="get"+t.charAt(0).toUpperCase()+t.slice(1),s=Vr();return`
    vec4 ${e}() {
      return ${s.texture2D}(${t}, halfCR);
    }
  `}function zQ(n,t){const e=n.name,s="get"+e.charAt(0).toUpperCase()+e.slice(1);if(n.shapeInfo.isUniform)return`float ${s}() {return ${e};}`;const[i,r]=n.shapeInfo.texShape;if(i===1&&r===1)return`
      float ${s}() {
        return sampleTexture(${e}, halfCR);
      }
    `;const o=Uh(e);if(t)return`
    float ${s}() {
      vec2 uv = uvFromFlat(${e}TexShape[0], ${e}TexShape[1], ${o});
      return sampleTexture(${e}, uv);
    }
  `;const[a,l]=n.shapeInfo.texShape;return`
    float ${s}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${o});
      return sampleTexture(${e}, uv);
    }
  `}function WQ(n,t){const e=n.name,s="get"+e.charAt(0).toUpperCase()+e.slice(1),i=n.shapeInfo.texShape,r=Vr();if(t)return`
    vec4 ${s}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${e}TexShape[0]) / 2.0), ceil(float(${e}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${r.texture2D}(${e}, uv);
    }
  `;const o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${s}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${r.texture2D}(${e}, uv);
    }
  `}function VQ(n,t){const e=n.name,s="get"+e.charAt(0).toUpperCase()+e.slice(1);if(n.shapeInfo.isUniform)return`
      float ${s}(int index) {
        ${pf(n)}
      }
    `;const i=n.shapeInfo.texShape,r=i[0],o=i[1];if(o===1&&r===1)return`
      float ${s}(int index) {
        return sampleTexture(${e}, halfCR);
      }
    `;const a=Uh(e);return o===1?t?`
      float ${s}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${e}TexShape[0]));
        return sampleTexture(${e}, uv);
      }
    `:`
      float ${s}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${r}.0);
        return sampleTexture(${e}, uv);
      }
    `:r===1?t?`
      float ${s}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${e}TexShape[1]), 0.5);
        return sampleTexture(${e}, uv);
      }
    `:`
      float ${s}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${e}, uv);
      }
    `:t?`
    float ${s}(int index) {
      vec2 uv = uvFromFlat(${e}TexShape[0], ${e}TexShape[1], index + ${a});
      return sampleTexture(${e}, uv);
    }
  `:`
    float ${s}(int index) {
      vec2 uv = uvFromFlat(${r}, ${o}, index + ${a});
      return sampleTexture(${e}, uv);
    }
  `}function UQ(n,t){const e=n.shapeInfo.logicalShape,s=n.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),r=n.shapeInfo.texShape,o=r[0],a=r[1],l=Vr();if(r!=null&&zs(e,r))return t?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);

        return ${l.texture2D}(${s}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);

        return ${l.texture2D}(${s}, uv);
      }
    `;if(t)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${s}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${s}, uv);
    }
  `;const u=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],h=Math.ceil(e[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${h}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${s}, uv);
    }
  `}function GQ(n,t){const e=n.shapeInfo.logicalShape,s=n.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),r=n.shapeInfo.texShape;if(r!=null&&zs(e,r)){if(t)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `;const g=r[0],m=r[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${m}.0, ${g}.0);
      return sampleTexture(${s}, uv);
    }
  `}const{newShape:o,keptDims:a}=au(e),l=o;if(l.length<e.length){const g=gf(n,l),m=["row","col"];return`
      ${ff(g,t)}
      float ${i}(int row, int col) {
        return ${i}(${mf(m,a)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${e[1]}, 1)));
        ${pf(n)}
      }
    `;const u=r[0],h=r[1],f=Uh(s);return h===1?t?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${s}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${s}TexShape[0]));
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${e[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${s}, uv);
    }
  `:u===1?t?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${s}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${s}TexShape[1]), 0.5);
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${e[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${h}.0, 0.5);
      return sampleTexture(${s}, uv);
    }
  `:t?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s}Shape[1] + col + ${f};
        vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index);
        return sampleTexture(${s}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${e[1]} + col + ${f};
    vec2 uv = uvFromFlat(${u}, ${h}, index);
    return sampleTexture(${s}, uv);
  }
`}function HQ(n,t){const e=n.shapeInfo.logicalShape,s=n.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),r=n.shapeInfo.texShape,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];if(e[0]===1){const g=e.slice(1),m=[1,2],y=gf(n,g),k=["b","row","col"];return`
        ${WA(y,t)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${mf(k,m)});
        }
      `}const a=Vr();if(t)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${s}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${s}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${s}, uv);
    }
  `;const l=o[0],u=o[1],h=Math.ceil(e[2]/2),f=h*Math.ceil(e[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${f}, ${h}, b, row, col);
      return ${a.texture2D}(${s}, uv);
    }
  `}function jQ(n,t){const e=n.shapeInfo.logicalShape,s=n.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),r=e[1]*e[2],o=e[2],{newShape:a,keptDims:l}=au(e),u=a;if(u.length<e.length){const k=gf(n,u),C=["row","col","depth"];return`
        ${ff(k,t)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${mf(C,l)});
        }
      `}if(n.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${r}, ${o}, 1)));
        ${pf(n)}
      }
    `;const h=n.shapeInfo.texShape,f=h[0],g=h[1],m=n.shapeInfo.flatOffset;if(g===r&&m==null)return t?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${s}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${g}.0, ${f}.0);
          return sampleTexture(${s}, uv);
        }
      `;if(g===o&&m==null)return t?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${s}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${e[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${g}.0, ${f}.0);
      return sampleTexture(${s}, uv);
    }
  `;const y=Uh(s);return t?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${s}Shape[1] * ${s}Shape[2];
      int stride1 = ${s}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${y};
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index);
      return sampleTexture(${s}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r} + col * ${o} + depth + ${y};
        vec2 uv = uvFromFlat(${f}, ${g}, index);
        return sampleTexture(${s}, uv);
      }
  `}function XQ(n,t){const e=n.name,s="get"+e.charAt(0).toUpperCase()+e.slice(1),i=Vr();if(t)return`
    vec4 ${s}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${e}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${e}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${e}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${e}TexShape[0]) / 2.0), ceil(float(${e}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${e}, uv);
    }
  `;const r=n.shapeInfo.logicalShape,o=r.length,a=n.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=l[0],h=l[1],f=Math.ceil(r[o-1]/2);let g=f*Math.ceil(r[o-2]/2),m="int b, int row, int col",y=`b * ${g} + (row / 2) * ${f} + (col / 2)`;for(let k=2;k<o-1;k++)m=`int b${k}, `+m,g*=r[o-k-1],y=`b${k} * ${g} + `+y;return`
    vec4 ${s}(${m}) {
      int index = ${y};
      int texR = index / ${h};
      int texC = index - texR * ${h};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}, ${u});
      return ${i.texture2D}(${e}, uv);
    }
  `}function qQ(n,t){const e=n.shapeInfo.logicalShape,s=n.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),r=e[3],o=e[2]*r,a=e[1]*o,{newShape:l,keptDims:u}=au(e);if(l.length<e.length){const $=gf(n,l),D=["row","col","depth","depth2"];return`
      ${ff($,t)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${mf(D,u)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${o}, ${r}, 1)));
        ${pf(n)}
      }
    `;const h=n.shapeInfo.flatOffset,f=n.shapeInfo.texShape,g=f[0],m=f[1],y=`int stride2 = ${s}Shape[3];`,k=`int stride1 = ${s}Shape[2] * stride2;`,C=`int stride0 = ${s}Shape[1] * stride1;`;if(m===a&&h==null)return t?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${y}
        ${k}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${r}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${g}.0);
        return sampleTexture(${s}, uv);
      }
    `;if(m===r&&h==null)return t?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${s}Shape[1] * ${s}Shape[2], ${s}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${e[1]*e[2]}, ${e[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${g}.0);
        return sampleTexture(${s}, uv);
      }
    `;const S=Uh(s);return t?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${y}
      ${k}
      ${C}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index + ${S});
      return sampleTexture(${s}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} +
          depth * ${r} + depth2;
      vec2 uv = uvFromFlat(${g}, ${m}, index + ${S});
      return sampleTexture(${s}, uv);
    }
  `}function KQ(n){const t=n.shapeInfo.logicalShape,e=n.name,s="get"+e.charAt(0).toUpperCase()+e.slice(1),i=t[4],r=t[3]*i,o=t[2]*r,a=t[1]*o,{newShape:l,keptDims:u}=au(t);if(l.length<t.length){const k=gf(n,l),C=["row","col","depth","depth2","depth3"];return`
      ${ff(k)}
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        return ${s}(${mf(C,u)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${o}, ${r}, ${i})) +
          depth3;
        ${pf(n)}
      }
    `;const h=n.shapeInfo.flatOffset,f=n.shapeInfo.texShape,g=f[0],m=f[1];if(m===a&&h==null)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${r}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${g}.0);
        return sampleTexture(${e}, uv);
      }
    `;if(m===i&&h==null)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]},
               ${t[2]*t[3]}, ${t[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${g}.0);
        return sampleTexture(${e}, uv);
      }
    `;const y=Uh(e);return`
    float ${s}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} + depth * ${r} +
          depth2 * ${i} + depth3 + ${y};
      vec2 uv = uvFromFlat(${g}, ${m}, index);
      return sampleTexture(${e}, uv);
    }
  `}function YQ(n){const t=n.shapeInfo.logicalShape,e=n.name,s="get"+e.charAt(0).toUpperCase()+e.slice(1),{newShape:i,keptDims:r}=au(t);if(i.length<t.length){const C=gf(n,i),S=["row","col","depth","depth2","depth3","depth4"];return`
      ${ff(C)}
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${s}(${mf(S,r)});
      }
    `}const o=t[5],a=t[4]*o,l=t[3]*a,u=t[2]*l,h=t[1]*u;if(n.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${h}, ${u}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${pf(n)}
      }
    `;const f=n.shapeInfo.flatOffset,g=n.shapeInfo.texShape,m=g[0],y=g[1];if(y===h&&f==null)return`
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${a}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${y}.0, ${m}.0);
        return sampleTexture(${e}, uv);
      }
    `;if(y===o&&f==null)return`
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]*t[4]},
               ${t[2]*t[3]*t[4]},
               ${t[3]*t[4]},
               ${t[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${y}.0, ${m}.0);
        return sampleTexture(${e}, uv);
      }
    `;const k=Uh(e);return`
    float ${s}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${h} + col * ${u} + depth * ${l} +
          depth2 * ${a} + depth3 * ${o} + depth4 + ${k};
      vec2 uv = uvFromFlat(${m}, ${y}, index);
      return sampleTexture(${e}, uv);
    }
  `}function pf(n){const t=n.name,e=Ce(n.shapeInfo.logicalShape);return e<2?`return ${t};`:`
    for (int i = 0; i < ${e}; i++) {
      if (i == index) {
        return ${t}[i];
      }
    }
  `}function ZQ(n,t){const e=n.name,s=e.charAt(0).toUpperCase()+e.slice(1),i="get"+s+"AtOutCoords",r=n.shapeInfo.logicalShape.length,o=t.logicalShape.length,a=zA(n.shapeInfo.logicalShape,t.logicalShape),l=Zs(o),u=o-r;let h;const f=["x","y","z","w","u","v"];r===0?h="":o<2&&a.length>=1?h="coords = 0;":h=a.map($=>`coords.${f[$+u]} = 0;`).join(`
`);let g="";o<2&&r>0?g="coords":g=n.shapeInfo.logicalShape.map(($,D)=>`coords.${f[D+u]}`).join(", ");let m="return outputValue;";const k=Ce(n.shapeInfo.logicalShape)===1,S=Ce(t.logicalShape)===1;if(r===1&&!k&&!S)m=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(k&&!S)o===1?m=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:m=`
        return vec4(outputValue.x);
      `;else if(a.length){const $=r-2,D=r-1;a.indexOf($)>-1&&a.indexOf(D)>-1?m="return vec4(outputValue.x);":a.indexOf($)>-1?m="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(D)>-1&&(m="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${l} coords = getOutputCoords();
      ${h}
      vec4 outputValue = get${s}(${g});
      ${m}
    }
  `}function JQ(n,t){const e=n.name,s=e.charAt(0).toUpperCase()+e.slice(1),i="get"+s+"AtOutCoords",r=t.texShape,o=n.shapeInfo.texShape,a=n.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!n.shapeInfo.isUniform&&a===l&&n.shapeInfo.flatOffset==null&&zs(o,r))return`
      float ${i}() {
        return sampleTexture(${e}, resultUV);
      }
    `;const u=Zs(l),h=zA(n.shapeInfo.logicalShape,t.logicalShape),f=l-a;let g;const m=["x","y","z","w","u","v"];a===0?g="":l<2&&h.length>=1?g="coords = 0;":g=h.map(k=>`coords.${m[k+f]} = 0;`).join(`
`);let y="";return l<2&&a>0?y="coords":y=n.shapeInfo.logicalShape.map((k,C)=>`coords.${m[C+f]}`).join(", "),`
    float ${i}() {
      ${u} coords = getOutputCoords();
      ${g}
      return get${s}(${y});
    }
  `}function Zs(n){if(n<=1)return"int";if(n===2)return"ivec2";if(n===3)return"ivec3";if(n===4)return"ivec4";if(n===5)return"ivec5";if(n===6)return"ivec6";throw Error(`GPU for rank ${n} is not yet supported`)}function E3(n,t,e){const{newShape:s,keptDims:i}=au(t),r=t.length,o=n&&r===3&&t[0]===1,a=o?t.slice(1):s,l=!n&&r>1&&!zs(t,e)&&s.length<r||o;return{useSqueezeShape:l,uniformShape:l?a:t,keptDims:i}}function gf(n,t){const e=JSON.parse(JSON.stringify(n));return e.shapeInfo.logicalShape=t,e}function mf(n,t){return t.map(e=>n[e]).join(", ")}function QQ(n,t,e,s){const i=e.map((h,f)=>{const g={logicalShape:h.shape,texShape:h.isUniform?null:h.texData.texShape,isUniform:h.isUniform,isPacked:h.isUniform?!1:h.texData.isPacked,flatOffset:null};return h.texData!=null&&h.texData.slice!=null&&h.texData.slice.flatOffset>0&&(g.flatOffset=h.texData.slice.flatOffset),{name:t.variableNames[f],shapeInfo:g}}),r=i.map(h=>h.shapeInfo),o={logicalShape:s.shape,texShape:s.texData.texShape,isUniform:!1,isPacked:s.texData.isPacked,flatOffset:null},a=xQ(i,o,t),l=jJ(n.gl,a),u=n.createProgram(l);return ge().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:r,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(n.buildVao(u),Object.assign({program:t,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:r,outShapeInfo:o},UA(n,t,u)))}function UA(n,t,e){const s=[],i=[];let r,o,a,l=null,u=null;u=n.getUniformLocation(e,"NAN",!1),ge().getNumber("WEBGL_VERSION")===1&&(l=n.getUniformLocation(e,"INFINITY",!1));const h=!1;for(const f of t.variableNames){const g={name:f,uniform:n.getUniformLocation(e,f,h),offset:n.getUniformLocation(e,`offset${f}`,h)};t.enableShapeUniforms&&(g.shape=n.getUniformLocation(e,`${f}Shape`,h),g.texShape=n.getUniformLocation(e,`${f}TexShape`,h)),s.push(g)}if(t.enableShapeUniforms&&(r=n.getUniformLocation(e,"outShape",h),a=n.getUniformLocation(e,"outShapeStrides",h),o=n.getUniformLocation(e,"outTexShape",h)),t.customUniforms)for(const f of t.customUniforms)i.push(n.getUniformLocation(e,f.name,h));return{variablesLocations:s,customUniformLocations:i,infLoc:l,nanLoc:u,outShapeLocation:r,outShapeStridesLocation:a,outTexShapeLocation:o}}function JC(n,t){if(n.length!==t.length)throw Error(`Binary was compiled with ${n.length} inputs, but was executed with ${t.length} inputs`);n.forEach((e,s)=>{const i=e.logicalShape,r=t[s],o=r.shape;if(!zs(i,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${o} must match`);if(e.isUniform&&r.isUniform)return;const a=e.texShape,l=r.isUniform?null:r.texData.texShape;if(!zs(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function ttt(n,t,e,s,i){t.program.enableShapeUniforms||(JC(t.inShapeInfos,e),JC([t.outShapeInfo],[s]));const r=s.texData.texture,o=s.texData.texShape;s.texData.isPacked?n.setOutputPackedMatrixTexture(r.texture,o[0],o[1]):n.setOutputMatrixTexture(r.texture,o[0],o[1]),n.setProgram(t.webGLProgram),n.bindVertexArray(t.webGLProgram.vao),ge().getNumber("WEBGL_VERSION")===1&&t.infLoc!==null&&n.gl.uniform1f(t.infLoc,1/0),t.nanLoc!==null&&n.gl.uniform1f(t.nanLoc,NaN);for(let l=0;l<e.length;++l){const u=e[l],{uniform:h,offset:f,shape:g,texShape:m}=t.variablesLocations[l];if(g){const{uniformShape:y}=E3(t.program.packedInputs,u.shape,u.texData.texShape);switch(y.length){case 1:n.gl.uniform1iv(g,new Int32Array(y));break;case 2:n.gl.uniform2iv(g,new Int32Array(y));break;case 3:n.gl.uniform3iv(g,new Int32Array(y));break;case 4:n.gl.uniform4iv(g,new Int32Array(y));break}}if(m&&n.gl.uniform2i(m,u.texData.texShape[0],u.texData.texShape[1]),h!=null){if(u.isUniform){if(Ce(u.shape)<2)n.gl.uniform1f(h,u.uniformValues[0]);else{let y=u.uniformValues;y instanceof Float32Array||(y=new Float32Array(y)),n.gl.uniform1fv(h,y)}continue}u.texData.slice!=null&&f!=null&&n.gl.uniform1i(f,u.texData.slice.flatOffset),n.setInputMatrixTexture(u.texData.texture.texture,h,l)}}const a=t.outShapeLocation;if(a)switch(s.shape.length){case 1:n.gl.uniform1iv(a,new Int32Array(s.shape));break;case 2:n.gl.uniform2iv(a,new Int32Array(s.shape));break;case 3:n.gl.uniform3iv(a,new Int32Array(s.shape));break;case 4:n.gl.uniform4iv(a,new Int32Array(s.shape));break}if(t.outShapeStridesLocation){const l=Dn(s.shape);switch(s.shape.length){case 2:n.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(l));break;case 3:n.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(l));break;case 4:n.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(l));break}}if(t.outTexShapeLocation&&n.gl.uniform2i(t.outTexShapeLocation,s.texData.texShape[0],s.texData.texShape[1]),t.program.customUniforms&&i)for(let l=0;l<t.program.customUniforms.length;++l){const u=t.program.customUniforms[l],h=t.customUniformLocations[l],f=i[l];if(u.type==="float")n.gl.uniform1fv(h,f);else if(u.type==="vec2")n.gl.uniform2fv(h,f);else if(u.type==="vec3")n.gl.uniform3fv(h,f);else if(u.type==="vec4")n.gl.uniform4fv(h,f);else if(u.type==="int")n.gl.uniform1iv(h,f);else if(u.type==="ivec2")n.gl.uniform2iv(h,f);else if(u.type==="ivec3")n.gl.uniform3iv(h,f);else if(u.type==="ivec4")n.gl.uniform4iv(h,f);else throw Error(`uniform type ${u.type} is not supported yet.`)}n.executeProgram()}function ett(n,t,e){let s="";t.concat(e).forEach(o=>{const a=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(n.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:u,uniformShape:h,keptDims:f}=E3(n.packedInputs,o.shape,l);let g="",m="",y="";if(h.length===1&&n.packedInputs){const V=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];g=`${V[0]>1}_${V[1]>1}`}else if(h.length===2&&!n.packedInputs)m=`${h[0]>1}_${h[1]>1}`;else if(h.length>2&&!n.packedInputs){const V=Dn(h);y=`${V[0]===l[1]}_${V[V.length-1]===l[1]}`}const k=o.shape.length,C=h.length===2&&zs(o.shape,l),S=Ce(o.shape)===1,$=Ud(o.shape,e.shape),D=!n.packedInputs&&k===e.shape.length&&zs(l,e.texData.texShape),R=n.packedInputs||h.length>2?"":`${l[0]>1}_${l[1]>1}`;s+=`${k}_${D}_${u?f:""}_${h.length}_${S}_${$}_${C}_${g}_${m}_${y}_${R}_${a}`}else{const l=o.isUniform?"uniform":o.texData.texShape;s+=`${o.shape}_${l}_${a}`}});const i=n.userCode;let r=n.constructor.name;return r+="_"+s+"_"+i+`${ge().getNumber("WEBGL_VERSION")}`,r}function Ir(n){return ge().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&n<=4}class ntt{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Dp.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const e=Vr();this.outputShape=t,this.enableShapeUniforms=Ir(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?K2(["r","c","d"],t):Vh(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${e.output} = result;
      }
    `}}class stt{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Dp.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const e=Vr();this.outputShape=t,this.enableShapeUniforms=Ir(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?K2(["r","c","d"],t):Vh(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${e.output} = result;
      }
    `}}class itt{constructor(t){this.variableNames=["A"],this.outTexUsage=Go.DOWNLOAD;const e=Vr();this.outputShape=t,this.userCode=`
      ${BA}

      void main() {
        float x = getAAtOutCoords();
        ${e.output} = encode_float(x);
      }
    `}}class rtt{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Go.DOWNLOAD;const e=Vr();this.outputShape=t,this.userCode=`
      ${BA}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${e.output} = encode_float(x);
      }
    `}}const ott={R:0,G:1,B:2,A:3};class QC{constructor(t,e=!1,s="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=Vr();this.outputShape=t,this.enableShapeUniforms=Ir(this.outputShape.length);let r="result";e&&(r="floor(result * 255. + 0.5)");let o="";for(let a=0;a<s.length;a++){const l=s[a];o+=`
          if(offset == ${a}) {
            result = values[${ott[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?I3():T3(t)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${s.length});

        flatIndex = idiv(flatIndex, ${s.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${o}
        }
        ${i.output} = vec4(${r}, 0., 0., 0.);
      }
    `}}class att{constructor(t,e=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Vr();this.outputShape=t,this.enableShapeUniforms=Ir(this.outputShape.length);let i="",r="result";e&&(r="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){const l=o*2+a;i+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${t[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${t[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${s.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?I3():T3(t)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${s.output} = ${r};
        }
    `}}function ltt(n){const t=Vr(),e=`${t.version}
    precision highp float;
    ${t.attribute} vec3 clipSpacePos;
    ${t.attribute} vec2 uv;
    ${t.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return HJ(n,e)}function ctt(n){const t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return YJ(n,t)}function utt(n){const t=new Uint16Array([0,1,2,2,1,3]);return ZJ(n,t)}function rg(n,t,e,s,i,r){QJ(t,e);const o=JJ(n),a=n.TEXTURE_2D;return sn(n,()=>n.bindTexture(a,o)),sn(n,()=>n.texParameteri(a,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE)),sn(n,()=>n.texParameteri(a,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)),sn(n,()=>n.texParameteri(a,n.TEXTURE_MIN_FILTER,n.NEAREST)),sn(n,()=>n.texParameteri(a,n.TEXTURE_MAG_FILTER,n.NEAREST)),ge().getNumber("WEBGL_VERSION")===1?sn(n,()=>n.texImage2D(a,0,s,t,e,0,i,r,null)):sn(n,()=>n.texStorage2D(a,1,s,t,e)),sn(n,()=>n.bindTexture(n.TEXTURE_2D,null)),{texture:o,texShape:[e,t]}}function GA(n){return n.internalFormatFloat}function htt(n,t,e,s){const[i,r]=sg(t,e);return rg(n,i,r,GA(s),s.textureFormatFloat,n.FLOAT)}function HA(n){return n.internalFormatHalfFloat}function dtt(n,t,e,s){const[i,r]=sg(t,e);return rg(n,i,r,HA(s),s.textureFormatFloat,s.textureTypeHalfFloat)}function jA(n){return n.downloadTextureFormat}function ftt(n,t,e,s){const[i,r]=sg(t,e);return rg(n,i,r,jA(s),n.RGBA,n.UNSIGNED_BYTE)}function XA(n){return n.internalFormatPackedFloat}function ptt(n,t,e,s){const[i,r]=df(t,e);return rg(n,i,r,XA(s),n.RGBA,n.FLOAT)}function qA(n){return n.internalFormatPackedHalfFloat}function gtt(n,t,e,s){const[i,r]=df(t,e);return rg(n,i,r,qA(s),n.RGBA,s.textureTypeHalfFloat)}function mtt(n,t,e){return sn(n,()=>n.bindBuffer(n.ARRAY_BUFFER,e)),KC(n,t,"clipSpacePos",e,3,20,0)&&KC(n,t,"uv",e,2,20,12)}function xtt(n,t,e,s,i,r){sn(n,()=>n.bindTexture(n.TEXTURE_2D,t));let o,a,l;i instanceof Uint8Array?(o=new Uint8Array(e*s*4),a=n.UNSIGNED_BYTE,l=n.RGBA):(o=new Float32Array(e*s*4),a=n.FLOAT,l=r.internalFormatPackedFloat),o.set(i),ge().getNumber("WEBGL_VERSION")===2?sn(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,e,s,n.RGBA,a,o)):sn(n,()=>n.texImage2D(n.TEXTURE_2D,0,l,e,s,0,n.RGBA,a,o)),sn(n,()=>n.bindTexture(n.TEXTURE_2D,null))}function btt(n,t,e){sn(n,()=>n.bindTexture(n.TEXTURE_2D,t)),e.data instanceof Uint8Array?ge().getNumber("WEBGL_VERSION")===2?sn(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.width,e.height,n.RGBA,n.UNSIGNED_BYTE,e.data)):sn(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e.width,e.height,0,n.RGBA,n.UNSIGNED_BYTE,e.data)):ge().getNumber("WEBGL_VERSION")===2?sn(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,e)):sn(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e)),sn(n,()=>n.bindTexture(n.TEXTURE_2D,null))}function vtt(n,t,e,s){const i=n.createBuffer();sn(n,()=>n.bindBuffer(n.PIXEL_PACK_BUFFER,i));const a=4*4*t*e;return sn(n,()=>n.bufferData(n.PIXEL_PACK_BUFFER,a,n.STREAM_READ)),sn(n,()=>n.readPixels(0,0,e,t,n.RGBA,n.FLOAT,0)),sn(n,()=>n.bindBuffer(n.PIXEL_PACK_BUFFER,null)),i}function ytt(n,t,e){const s=n,i=new Float32Array(e);return s.bindBuffer(s.PIXEL_PACK_BUFFER,t),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,i),s.bindBuffer(s.PIXEL_PACK_BUFFER,null),i}function wtt(n,t,e,s){const[i,r]=sg(t,e),o=4,a=new Uint8Array(LJ(t*e,o));return sn(n,()=>n.readPixels(0,0,i,r,s.downloadTextureFormat,n.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function ktt(n,t,e,s,i,r,o,a){const l=n,u=new Float32Array(BJ(r,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function Ctt(n,t,e){const s=new Float32Array(t*e*4);return sn(n,()=>n.readPixels(0,0,e,t,n.RGBA,n.FLOAT,s)),s}class Nb{constructor(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const e=ge().getNumber("WEBGL_VERSION");if(t!=null?(this.gl=t,OJ(e,t)):this.gl=Ka(e),t=this.gl,ge().getNumber("WEBGL_VERSION")===2){const r=t;this.createVertexArray=()=>sn(r,()=>r.createVertexArray()),this.bindVertexArray=o=>sn(r,()=>r.bindVertexArray(o)),this.deleteVertexArray=o=>sn(r,()=>r.deleteVertexArray(o)),this.getVertexArray=()=>sn(r,()=>r.getParameter(r.VERTEX_ARRAY_BINDING))}else if(t!=null){const r=t.getExtension("OES_vertex_array_object");if(r==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>sn(t,()=>r.createVertexArrayOES()),this.bindVertexArray=o=>sn(t,()=>r.bindVertexArrayOES(o)),this.deleteVertexArray=o=>sn(t,()=>r.deleteVertexArrayOES(o)),this.getVertexArray=()=>sn(t,()=>t.getParameter(r.VERTEX_ARRAY_BINDING_OES))}let s="WEBGL_color_buffer_float";const i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),ge().getNumber("WEBGL_VERSION")===1){const r="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=um(this.gl,r),la(this.gl,o))this.textureHalfFloatExtension=um(this.gl,o);else if(ge().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(s),la(this.gl,i))this.colorBufferHalfFloatExtension=um(this.gl,i);else if(ge().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(s="EXT_color_buffer_float",la(this.gl,s))this.colorBufferFloatExtension=this.gl.getExtension(s);else if(la(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=ctt(this.gl),this.indexBuffer=utt(this.gl),this.framebuffer=tQ(this.gl),this.textureConfig=S3(this.gl,this.textureHalfFloatExtension)}get debug(){return ge().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const t=this.gl;sn(t,()=>t.finish()),sn(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),sn(t,()=>t.deleteFramebuffer(this.framebuffer)),sn(t,()=>t.bindBuffer(t.ARRAY_BUFFER,null)),sn(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),sn(t,()=>t.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(t,e){return this.throwIfDisposed(),htt(this.gl,t,e,this.textureConfig)}createFloat16MatrixTexture(t,e){return this.throwIfDisposed(),dtt(this.gl,t,e,this.textureConfig)}createUnsignedBytesMatrixTexture(t,e){return this.throwIfDisposed(),ftt(this.gl,t,e,this.textureConfig)}uploadPixelDataToTexture(t,e){this.throwIfDisposed(),btt(this.gl,t,e)}uploadDenseMatrixToTexture(t,e,s,i){this.throwIfDisposed(),xtt(this.gl,t,e,s,i,this.textureConfig)}createFloat16PackedMatrixTexture(t,e){return this.throwIfDisposed(),gtt(this.gl,t,e,this.textureConfig)}createPackedMatrixTexture(t,e){return this.throwIfDisposed(),ptt(this.gl,t,e,this.textureConfig)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&(YC(this.gl,this.framebuffer),this.outputTexture=null),sn(this.gl,()=>this.gl.deleteTexture(t))}downloadByteEncodedFloatMatrixFromOutputTexture(t,e,s){return this.downloadMatrixDriver(t,()=>wtt(this.gl,e,s,this.textureConfig))}downloadPackedMatrixFromBuffer(t,e,s,i,r,o){return ktt(this.gl,t,e,s,i,r,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(t,e){return ytt(this.gl,t,e)}createBufferFromTexture(t,e,s){this.bindTextureToFrameBuffer(t);const i=vtt(this.gl,e,s,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){const t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let e,s;if(ge().getBool("WEBGL_FENCE_API_ENABLED")){const i=t,r=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),s=()=>{const o=i.clientWaitSync(r,0,0);return o===i.ALREADY_SIGNALED||o===i.CONDITION_SATISFIED},e=r}else ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),s=()=>this.isQueryAvailable(e,ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):s=()=>!0;return{query:e,isFencePassed:s}}downloadMatrixFromPackedTexture(t,e,s){return this.downloadMatrixDriver(t,()=>Ctt(this.gl,e,s))}createProgram(t){this.throwIfDisposed();const e=this.gl;this.vertexShader==null&&(this.vertexShader=ltt(e));const s=qJ(e);sn(e,()=>e.attachShader(s,this.vertexShader)),sn(e,()=>e.attachShader(s,t)),KJ(e,s);const i=Object.assign(s,{vao:this.createVertexArray()});return this.debug&&Eb(e,i),i}buildVao(t){this.setProgram(t),this.bindVertexArray(t.vao);const e=this.gl;sn(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),mtt(e,t,this.vertexBuffer)}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&(sn(this.gl,()=>this.gl.deleteProgram(t)),this.deleteVertexArray(t.vao))}setProgram(t){this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&Eb(this.gl,this.program),sn(this.gl,()=>this.gl.useProgram(t))}getUniformLocation(t,e,s=!0){return this.throwIfDisposed(),s?nQ(this.gl,t,e):sQ(this.gl,t,e)}getAttributeLocation(t,e){return this.throwIfDisposed(),sn(this.gl,()=>this.gl.getAttribLocation(t,e))}getUniformLocationNoThrow(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)}setInputMatrixTexture(t,e,s){this.throwIfDisposed(),this.throwIfNoProgram(),iQ(this.gl,t,e,s)}setOutputMatrixTexture(t,e,s){this.setOutputMatrixTextureDriver(t,s,e)}setOutputPackedMatrixTexture(t,e,s){this.throwIfDisposed();const[i,r]=df(e,s);this.setOutputMatrixTextureDriver(t,i,r)}setOutputMatrixWriteRegion(t,e,s,i){this.setOutputMatrixWriteRegionDriver(s,t,i,e)}setOutputPackedMatrixWriteRegion(t,e,s,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&Eb(this.gl,this.program),hm(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const t=this.gl;if(this.debug){const e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}sn(t,()=>t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),sn(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=um(this.gl,ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const s=this.gl,i=this.getQueryTimerExtensionWebGL2(),r=s.createQuery();return s.beginQuery(i.TIME_ELAPSED_EXT,r),r}const t=this.getQueryTimerExtensionWebGL1(),e=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,e),e}endQuery(){if(ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const e=this.gl,s=this.getQueryTimerExtensionWebGL2();e.endQuery(s.TIME_ELAPSED_EXT);return}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await D4(()=>this.disposed||this.isQueryAvailable(t,ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(t,e){if(e===0)return null;if(e===2){const s=this.gl;return s.getQueryParameter(t,s.QUERY_RESULT)/1e6}else{const s=this.getQueryTimerExtensionWebGL1();return s.getQueryObjectEXT(t,s.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(t,e){if(e===0)return!0;if(e===2){const s=this.gl,i=this.getQueryTimerExtensionWebGL2(),r=s.getQueryParameter(t,s.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),r&&!this.disjoint}else{const s=this.getQueryTimerExtensionWebGL1(),i=s.getQueryObjectEXT(t,s.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(t){return new Promise(e=>{this.addItemToPoll(()=>t.isFencePassed(),()=>e())})}pollItems(){const t=Stt(this.itemsToPoll.map(e=>e.isDoneFn));for(let e=0;e<=t;++e){const{resolveFn:s}=this.itemsToPoll[e];s()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,e){if(this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1)return;let s;"setTimeoutCustom"in ge().platform&&(s=ge().platform.setTimeoutCustom.bind(ge().platform)),D4(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,s)}bindTextureToFrameBuffer(t){this.throwIfDisposed(),_b(this.gl,t,this.framebuffer),this.debug&&hm(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(_b(this.gl,this.outputTexture,this.framebuffer),this.debug&&hm(this.gl)):YC(this.gl,this.framebuffer)}downloadMatrixDriver(t,e){this.bindTextureToFrameBuffer(t);const s=e();return this.unbindTextureToFrameBuffer(),s}setOutputMatrixTextureDriver(t,e,s){this.throwIfDisposed();const i=this.gl;_b(i,t,this.framebuffer),this.debug&&hm(i),this.outputTexture=t,sn(i,()=>i.viewport(0,0,e,s)),sn(i,()=>i.scissor(0,0,e,s))}setOutputMatrixWriteRegionDriver(t,e,s,i){this.throwIfDisposed(),sn(this.gl,()=>this.gl.scissor(t,e,s,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function Stt(n){let t=0;for(;t<n.length&&n[t]();++t);return t-1}const{addImpl:Ttt,bincountImpl:KA,bincountReduceImpl:Itt,bitwiseAndImpl:Ett,castImpl:_tt,ceilImpl:Att,concatImpl:$tt,equalImpl:Ntt,expImpl:Dtt,expm1Impl:Rtt,floorImpl:Mtt,gatherNdImpl:Ott,gatherV2Impl:Ftt,greaterImpl:Ptt,greaterEqualImpl:Ltt,lessImpl:Btt,lessEqualImpl:ztt,linSpaceImpl:Wtt,logImpl:Vtt,maxImpl:Utt,maximumImpl:Gtt,minimumImpl:Htt,multiplyImpl:jtt,negImpl:Xtt,notEqualImpl:qtt,prodImpl:Ktt,raggedGatherImpl:Ytt,raggedRangeImpl:Ztt,raggedTensorToTensorImpl:Jtt,rangeImpl:Qtt,rsqrtImpl:tet,scatterImpl:eet,sigmoidImpl:net,simpleAbsImpl:YA,sliceImpl:set,sparseFillEmptyRowsImpl:iet,sparseReshapeImpl:ret,sparseSegmentReductionImpl:ZA,sqrtImpl:oet,staticRegexReplaceImpl:aet,stridedSliceImpl:cet,stringNGramsImpl:uet,stringSplitImpl:het,stringToHashBucketFastImpl:det,subImpl:fet,tileImpl:pet,topKImpl:get,transposeImpl:_3,uniqueImpl:met}=bX;function JA(n,t){return["x","y","z","w","u","v"].slice(0,t).map(e=>`${n}.${e}`)}function Lr(n,t){return t===1?[n]:JA(n,t)}function xet(n,t){if(n===1)return"rc";let e="";for(let s=0;s<n;s++)e+=t[s],s<n-1&&(e+=",");return e}class bet{constructor(t){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=Ir(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const e=Lr("rc",this.rank),s=Zs(this.rank),i=this.getOutOfBoundsCondition(e),r=this.getSetup(e),o=this.getOutput(e);this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${r}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(t){const e=[];for(let s=0;s<=1;s++)for(let i=0;i<=1;i++){let r=`${s===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)r=`${t[t.length-1-o]},`+r;e.push(r)}return e}getOutOfBoundsCondition(t){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let e="";for(let s=this.rank-2;s<this.rank;s++)e+=`${t[s]} >= ${this.enableShapeUniforms?`outShape[${s}]`:this.outputShape[s]}`,s<this.rank-1&&(e+="||");return e}getSetup(t){if(this.rank===1)return"";const e=t.slice(-2),s=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${e[0]};
      int c = ${e[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${s};
      bool rEdge = rp1 >= ${i};
    `}getOutput(t){const e=this.getSourceCoordsArr(t);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${e[0]}),
            cEdge ? 0. : getA(${e[1]}),
            rEdge ? 0. : getA(${e[2]}),
            rEdge || cEdge ? 0. : getA(${e[3]})`}}class QA{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=Ir(this.outputShape.length);let s="";for(let i=0;i<4;i++){let r="thisRC = rc;";i%2===1&&(r+="thisRC.z += 1;"),i>1&&(r+="thisRC.y += 1;"),s+=`
        ${r}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${vet(e,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?I3():T3(t)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":t[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":t[2]};

        ${s}

        setOutput(result);
      }
    `}}function vet(n,t){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${t?mQ(["r","c","d"],"inputShape"):Vh(["r","c","d"],n)}
      return ivec3(r, c, d);
    }
  `}class yet{constructor(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(t,e,s){const i=eS(e,s),r=nS(t,i,s);r in this.freeTextures||(this.freeTextures[r]=[]),r in this.usedTextures||(this.usedTextures[r]=[]);const o=tS(t,i,this.gpgpu.gl,this.gpgpu.textureConfig,s);if(this.freeTextures[r].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[r].pop();return this.usedTextures[r].push(l),l}let a;return i===rr.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):i===rr.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):i===rr.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):i===rr.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):i===rr.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[r].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(t,e,s,i){if(this.freeTextures==null)return;const r=eS(s,i),o=nS(e,r,i);o in this.freeTextures||(this.freeTextures[o]=[]);const a=tS(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,i),l=ge().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(t.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(t),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const u=this.usedTextures[o],h=u&&u.indexOf(t);if(h==null||h<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u[h]=u[u.length-1],u.pop(),this.log()}log(){if(!this.logEnabled)return;const t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${t})`);const e=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*e)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const t in this.freeTextures)this.freeTextures[t].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});for(const t in this.usedTextures)this.usedTextures[t].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function wet(n,t){const e=n;if(t===e.R32F)return 4;if(t===e.R16F)return 2;if(t===e.RGBA32F)return 16;if(t===n.RGBA)return 16;if(t===e.RGBA16F)return 8;if(t===e.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}function tS(n,t,e,s,i){const r=ket(t,s);let o;if(i){const[l,u]=df(n[0],n[1]);o=l*u}else{const[l,u]=sg(n[0],n[1]);o=l*u}const a=wet(e,r);return o*a}function ket(n,t){switch(n){case rr.PACKED_2X2_FLOAT32:return XA(t);case rr.PACKED_2X2_FLOAT16:return qA(t);case rr.UNPACKED_FLOAT32:return GA(t);case rr.UNPACKED_FLOAT16:return HA(t);case rr.PACKED_4X1_UNSIGNED_BYTE:return jA(t);default:throw new Error(`Unknown physical texture type ${n}`)}}function Cet(n){return ge().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?rr.PACKED_2X2_FLOAT32:rr.UNPACKED_FLOAT32:n?rr.PACKED_2X2_FLOAT16:rr.UNPACKED_FLOAT16}function eS(n,t){if(n===Go.UPLOAD)return rr.PACKED_2X2_FLOAT32;if(n===Go.RENDER||n==null)return Cet(t);if(n===Go.DOWNLOAD||n===Go.PIXELS)return rr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${n}`)}function nS(n,t,e){return`${n[0]}_${n[1]}_${t}_${e}`}class gl{constructor(t,e){this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=Ir(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${e}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const xa="if (isnan(x)) return x;",Tet="return x;",sS="return abs(x);",Iet="return (x >= 0.0) ? x : (exp(x) - 1.0);",Eet=xa+`
  return (x < 0.0) ? 0.0 : x;
`,_et=xa+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,zc="return x;",Aet="return 1.0 / (1.0 + exp(-1.0 * x));";const $et="return x;",Net=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Det=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Ret=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Met="return 1.0 / (1.0 + exp(-1.0 * x));";class Gc{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=Ir(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${e}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}class Oet{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=Ir(this.outputShape.length);const e=t.length,s=Lr("rc",e),i=Zs(e),r=xet(e,s),o=s.slice(-2),a=e<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${r});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}const Fet=A5,Pet=1e-7,Let=1e-4,pm={};function Bet(n){return n in pm||(pm[n]={}),pm[n]}const zet=ge().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),Wet=600;function Vet(){return ge().global.screen==null?1024:ge().global.screen.height*ge().global.screen.width*window.devicePixelRatio*Wet/1024/1024}class Y2 extends Jv{nextDataId(){return Y2.nextDataId++}constructor(t){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!ge().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let e;if(t!=null){if(t instanceof Nb)e=t;else{const s=Ka(ge().getNumber("WEBGL_VERSION"),t);e=new Nb(s)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const s=Ka(ge().getNumber("WEBGL_VERSION"));e=new Nb(s),this.binaryCache=Bet(ge().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=e,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new yet(this.gpgpu),this.numMBBeforeWarning=Vet(),this.texData=new tI(this,cl())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(t,e,s,i,r,o){const a=this.makeTensorInfo(e,s),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:t,texShape:[i,r]},l.texShape=[i,r];const u=dm(e),h=new QC(u,!1,o),f=this.runWebGLProgram(h,[a],s,[[i,r]]);return f.shape=e,l.texture=null,this.disposeIntermediateTensorInfo(a),f.dataId}write(t,e,s){if((ge().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||ge().getBool("DEBUG"))&&this.checkNumericalProblems(t),s==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const i={id:this.nextDataId()};return this.texData.set(i,{shape:e,dtype:s,values:t,usage:Go.UPLOAD,refCount:1}),i}refCount(t){return this.texData.has(t)?this.texData.get(t).refCount:0}incRef(t){const e=this.texData.get(t);e.refCount++}decRef(t){if(this.texData.has(t)){const e=this.texData.get(t);e.refCount--}}move(t,e,s,i,r){if(ge().getBool("DEBUG")&&this.checkNumericalProblems(e),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:s,dtype:i,values:e,usage:Go.UPLOAD,refCount:r})}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}readSync(t){const e=this.texData.get(t),{values:s,dtype:i,complexTensorInfos:r,slice:o,shape:a,isPacked:l}=e;if(o!=null){let g;l?g=new Gc(a,zc):g=new gl(a,zc);const m=this.runWebGLProgram(g,[{dataId:t,shape:a,dtype:i}],i),y=this.readSync(m.dataId);return this.disposeIntermediateTensorInfo(m),y}if(s!=null)return this.convertAndCacheOnCPU(t);if(i==="string")return s;const u=this.activeTimers!=null;let h;u&&(h=Qr());let f;if(i==="complex64"){const g=this.readSync(r.real.dataId),m=this.readSync(r.imag.dataId);f=ac(g,m)}else f=this.getValuesFromTexture(t);return u&&(this.downloadWaitMs+=Qr()-h),this.convertAndCacheOnCPU(t,f)}async read(t){if(this.pendingRead.has(t)){const y=this.pendingRead.get(t);return new Promise(k=>y.push(k))}const e=this.texData.get(t),{values:s,shape:i,slice:r,dtype:o,complexTensorInfos:a,isPacked:l}=e;if(r!=null){let y;l?y=new Gc(i,zc):y=new gl(i,zc);const k=this.runWebGLProgram(y,[{dataId:t,shape:i,dtype:o}],o),C=this.read(k.dataId);return this.disposeIntermediateTensorInfo(k),C}if(s!=null)return this.convertAndCacheOnCPU(t);if(ge().getBool("DEBUG")&&!ge().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ge().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,h;if(o!=="complex64"&&ge().get("WEBGL_BUFFER_SUPPORTED")){h=this.decode(t);const y=this.texData.get(h.dataId);u=this.gpgpu.createBufferFromTexture(y.texture.texture,...cm(i))}this.pendingRead.set(t,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let f;if(o==="complex64"){const y=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),k=y[0],C=y[1];f=ac(k,C)}else if(u==null)f=this.getValuesFromTexture(t);else{const y=Ce(i);f=this.gpgpu.downloadFloat32MatrixFromBuffer(u,y)}if(h!=null&&this.disposeIntermediateTensorInfo(h),u!=null){const y=this.gpgpu.gl;sn(y,()=>y.deleteBuffer(u))}const g=this.convertAndCacheOnCPU(t,f),m=this.pendingRead.get(t);return this.pendingRead.delete(t),m.forEach(y=>y(g)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&cl().removeDataId(t,this),this.pendingDeletes--),g}readToGPU(t,e={}){const s=this.texData.get(t),{values:i,shape:r,slice:o,dtype:a,isPacked:l,texture:u}=s;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let m;l?m=new Gc(r,zc):m=new gl(r,zc);const y=this.runWebGLProgram(m,[{dataId:t,shape:r,dtype:a}],a),k=this.readToGPU(y,e);return this.disposeIntermediateTensorInfo(y),k}if(u==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const h=this.decode(t,e.customTexShape),f=cl().makeTensorFromTensorInfo(h),g=this.texData.get(h.dataId);return Object.assign({tensorRef:f},g.texture)}bufferSync(t){const e=this.readSync(t.dataId);if(t.dtype==="string")try{const s=e.map(i=>eu(i));return hs(t.shape,t.dtype,s)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return hs(t.shape,t.dtype,e)}checkNumericalProblems(t){if(t!=null)for(let e=0;e<t.length;e++){const s=t[e];if(!UJ(s))throw ge().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${s} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${s} cannot be represented on this device.`)}}getValuesFromTexture(t){const{shape:e,dtype:s,isPacked:i}=this.texData.get(t),r=Ce(e);if(ge().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const g=this.decode(t),m=this.texData.get(g.dataId),y=this.gpgpu.downloadMatrixFromPackedTexture(m.texture.texture,...cm(e)).subarray(0,r);return this.disposeIntermediateTensorInfo(g),y}const o=ge().getBool("WEBGL_PACK")&&i===!0,a=o?dm(e):e,l=o?new rtt(a):new itt(a),u=this.runWebGLProgram(l,[{shape:a,dtype:s,dataId:t}],"float32"),h=this.texData.get(u.dataId),f=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(h.texture.texture,h.texShape[0],h.texShape[1]).subarray(0,r);return this.disposeIntermediateTensorInfo(u),f}timerAvailable(){return ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(t){const e=this.activeTimers,s=[];let i=!1;this.programTimersStack==null?(this.programTimersStack=s,i=!0):this.activeTimers.push(s),this.activeTimers=s,t();const r=wh(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=wh(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=e,i&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(r);a.kernelMs=_O(l),a.getExtraProfileInfo=()=>l.map((u,h)=>({name:o[h],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Qr(),endMs:null}}endTimer(t){return ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=Qr(),t)}async getQueryTime(t){if(ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(t);const e=t;return e.endMs-e.startMs}disposeData(t,e=!1){if(this.pendingDisposal.has(t))return!1;if(!this.texData.has(t))return!0;if(e?this.texData.get(t).refCount=0:this.texData.get(t).refCount--,!e&&this.texData.get(t).refCount>0)return!1;if(this.pendingRead.has(t))return this.pendingDisposal.add(t),this.pendingDeletes++,!1;this.releaseGPUData(t);const{complexTensorInfos:s}=this.texData.get(t);return s!=null&&(this.disposeData(s.real.dataId,e),this.disposeData(s.imag.dataId,e)),this.texData.delete(t),!0}releaseGPUData(t){const{texture:e,dtype:s,texShape:i,usage:r,isPacked:o,slice:a}=this.texData.get(t),l=a&&a.origDataId||t,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),e!=null&&(this.numBytesInGPU-=this.computeBytes(i,s),this.textureManager.releaseTexture(e,i,r,o)));const h=this.texData.get(t);h.texture=null,h.texShape=null,h.isPacked=!1,h.slice=null}getTexture(t){return this.uploadToGPU(t),this.texData.get(t).texture.texture}getDataInfo(t){return this.texData.get(t)}shouldExecuteOnCPU(t,e=zet){return ge().getBool("WEBGL_CPU_FORWARD")&&t.every(s=>this.texData.get(s.dataId).texture==null&&Ce(s.shape)<e)}getGPGPUContext(){return this.gpgpu}where(t){Uo("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const e=t.dataSync();return Fet(t.shape,e)}packedUnaryOp(t,e,s){const i=new Gc(t.shape,e),r=this.compileAndRun(i,[t],s);return cl().makeTensorFromTensorInfo(r)}abs(t){if(this.shouldExecuteOnCPU([t])&&t.dtype!=="complex64"){const i=YA(this.texData.get(t.dataId).values);return this.makeOutput(t.shape,t.dtype,i)}if(ge().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,sS,t.dtype);const e=new gl(t.shape,sS),s=this.compileAndRun(e,[t]);return cl().makeTensorFromTensorInfo(s)}makeTensorInfo(t,e,s){let i;if(e==="string"&&s!=null&&s.length>0&&Gp(s[0])){const r=s.map(o=>Yc(o));i=this.write(r,t,e)}else i=this.write(s,t,e);return this.texData.get(i).usage=null,{dataId:i,shape:t,dtype:e}}makeOutput(t,e,s){return cl().makeTensorFromTensorInfo(this.makeTensorInfo(t,e,s),this)}unpackTensor(t){const e=new Oet(t.shape);return this.runWebGLProgram(e,[t],t.dtype)}packTensor(t){const e=new bet(t.shape);return this.runWebGLProgram(e,[t],t.dtype,null,!0)}packedReshape(t,e){const s=[Kd(t.shape),...Yd(t.shape)],i={dtype:t.dtype,shape:s,dataId:t.dataId},r=[Kd(e),...Yd(e)],o=new QA(r,s),a=!0,l=[s],u=this.runWebGLProgram(o,[i],t.dtype,l,a);return{dataId:u.dataId,shape:e,dtype:u.dtype}}decode(t,e){const s=this.texData.get(t),{isPacked:i,shape:r,dtype:o}=s;if(e!=null){const g=Ce(r),m=e[0]*e[1]*4;wt(g<=m,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=dm(r);let l;i?l=new stt(a):l=new ntt(a);const u=!0,h=[e??cm(a)],f=this.runWebGLProgram(l,[{shape:a,dtype:o,dataId:t}],o,h,u,e);return{dtype:o,shape:r,dataId:f.dataId}}runWebGLProgram(t,e,s,i,r=!1,o){const a=this.makeTensorInfo(t.outputShape,s),l=this.texData.get(a.dataId);if(t.packedOutput&&(l.isPacked=!0),t.outPackingScheme===Dp.DENSE){const S=o??cm(t.outputShape);l.texShape=S.map($=>$*2)}if(t.outTexUsage!=null&&(l.usage=t.outTexUsage),Ce(a.shape)===0)return l.values=br(a.dtype,0),a;const u=[],h=e.map(S=>{if(S.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let $=this.texData.get(S.dataId);if($.texture==null){if(!t.packedInputs&&Ce(S.shape)<=ge().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:S.shape,texData:null,isUniform:!0,uniformValues:$.values};t.packedInputs&&($.isPacked=!0,$.shape=S.shape)}if(this.uploadToGPU(S.dataId),!!$.isPacked!=!!t.packedInputs)S=$.isPacked?this.unpackTensor(S):this.packTensor(S),u.push(S),$=this.texData.get(S.dataId);else if($.isPacked&&!u1($.shape,S.shape)){const D=S,R=S.shape;S.shape=$.shape,S=this.packedReshape(S,R),u.push(S),$=this.texData.get(S.dataId),D.shape=R}return{shape:S.shape,texData:$,isUniform:!1}});this.uploadToGPU(a.dataId);const f={shape:a.shape,texData:l,isUniform:!1},g=ett(t,h,f),m=this.getAndSaveBinary(g,()=>QQ(this.gpgpu,t,h,f)),y=this.activeTimers!=null;let k;y&&(k=this.startTimer()),ge().get("ENGINE_COMPILE_ONLY")||ttt(this.gpgpu,m,h,f,i),u.forEach(S=>this.disposeIntermediateTensorInfo(S)),y&&(k=this.endTimer(k),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(k)}));const C=ge().getNumber("WEBGL_FLUSH_THRESHOLD");if(C>0){const S=Qr();S-this.lastGlFlushTime>C&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=S)}if(!ge().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&r===!1){const S=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),S}return a}compileAndRun(t,e,s,i,r=!1){return s=s||e[0].dtype,this.runWebGLProgram(t,e,s,i,r)}getAndSaveBinary(t,e){return t in this.binaryCache||(this.binaryCache[t]=e()),this.binaryCache[t]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(ge().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=he(()=>{if(!ge().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=ge().getBool("DEBUG");ge().set("DEBUG",!1);const e=this.abs(Bs(1e-8)).dataSync()[0];if(ge().set("DEBUG",t),e>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?Pet:Let}uploadToGPU(t){const e=this.texData.get(t),{shape:s,dtype:i,values:r,texture:o,usage:a,isPacked:l}=e;if(o!=null)return;const u=this.activeTimers!=null;let h;u&&(h=Qr());let f=e.texShape;if(f==null&&(f=aQ(s,l),e.texShape=f),r!=null){const g=dm(s);let m,y=f[1],k=f[0];const C=r instanceof Uint8Array||r instanceof Uint8ClampedArray;(l||!C)&&([y,k]=df(f[0],f[1])),l?m=new att(g,C):m=new QC(g,C);const S=C?[k,y]:f,$=this.makeTensorInfo(S,i),D=this.texData.get($.dataId);C?D.usage=Go.PIXELS:D.usage=Go.UPLOAD,D.texShape=S,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture($.dataId),y,k,r);const R=[[k,y]],E=this.runWebGLProgram(m,[$],i,R,!0),q=this.texData.get(E.dataId);e.texShape=q.texShape,e.isPacked=q.isPacked,e.usage=q.usage,ge().get("ENGINE_COMPILE_ONLY")?this.disposeData(E.dataId):(e.texture=q.texture,e.values=null,this.texData.delete(E.dataId)),this.disposeIntermediateTensorInfo($),u&&(this.uploadWaitMs+=Qr()-h)}else{const g=this.acquireTexture(f,a,i,l);e.texture=g}}convertAndCacheOnCPU(t,e){const s=this.texData.get(t),{dtype:i}=s;return e!=null&&(s.values=Uet(e,i)),s.values}acquireTexture(t,e,s,i){if(this.numBytesInGPU+=this.computeBytes(t,s),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const r=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${r} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(t,e,i)}computeBytes(t,e){return t[0]*t[1]*zm(e)}checkCompileCompletion(){for(const[,t]of Object.entries(this.binaryCache))this.checkCompletion_(t)}async checkCompileCompletionAsync(){const t=[];if(this.gpgpu.parallelCompilationExtension){for(const[,e]of Object.entries(this.binaryCache))t.push(this.checkCompletionAsync_(e));return Promise.all(t)}else{for(const[,e]of Object.entries(this.binaryCache)){const s=new Promise(i=>{try{this.checkCompletion_(e),i(!0)}catch(r){throw r}});t.push(s)}return Promise.all(t)}}async checkCompletionAsync_(t){return this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(t):(await U5(),this.checkCompletionAsync_(t))}checkCompletion_(t){if(this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(t.webGLProgram)),this.gpgpu.gl.getShaderParameter(t.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(LA(t.source,this.gpgpu.gl.getShaderInfoLog(t.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const t of Object.values(this.binaryCache)){this.gpgpu.buildVao(t.webGLProgram);const{variablesLocations:e,customUniformLocations:s,infLoc:i,nanLoc:r,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:l}=UA(this.gpgpu,t.program,t.webGLProgram);t.variablesLocations=e,t.customUniformLocations=s,t.infLoc=i,t.nanLoc=r,t.outShapeLocation=o,t.outShapeStridesLocation=a,t.outTexShapeLocation=l}}createTensorFromGPUData(t,e,s){t.channels=t.channels||"RGBA";const{texture:i,height:r,width:o,channels:a}=t,l=cl().backend;if(!l.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const u=l.writeTexture(i,e,s,r,o,a);return cl().makeTensorFromDataId(u,e,s,l)}}Y2.nextDataId=0;function Uet(n,t){if(t==="float32"||t==="complex64")return n;if(t==="int32"||t==="bool"){const e=t==="int32"?new Int32Array(n.length):new Uint8Array(n.length);for(let s=0;s<e.length;++s)e[s]=Math.round(n[s]);return e}else throw new Error(`Unknown dtype ${t}`)}UI()&&XI("webgl",()=>new Y2,2);const A3=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Rh{constructor(t,e,s){this.variableNames=["A","B"],this.outputShape=es(e,s),this.enableShapeUniforms=Ir(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${t}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}const Gh=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class xf{constructor(t,e,s,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=es(e,s);const r=this.outputShape.length;this.enableShapeUniforms=Ir(r);let o="";if(i)if(r===0||Ce(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${Zs(r)} coords = getOutputCoords();
        `,r===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Lr("coords",r);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${l[r-2]} + 1) >= outShape[${r} - 2];
            bool nextColOutOfBounds =
              (${l[r-1]} + 1) >= outShape[${r} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${l[r-2]} + 1) >= ${this.outputShape[r-2]};
            bool nextColOutOfBounds =
              (${l[r-1]} + 1) >= ${this.outputShape[r-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${t}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}function Eo(n){const{inputs:t,backend:e}=n,{x:s}=t;return e.incRef(s.dataId),{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}const Get={kernelName:h0,backendName:"webgl",kernelFunc:Eo};function mu(n){const{inputs:t,backend:e}=n,{real:s,imag:i}=t,r=e.makeTensorInfo(s.shape,"complex64"),o=e.texData.get(r.dataId),a=Eo({inputs:{x:s},backend:e}),l=Eo({inputs:{x:i},backend:e});return o.complexTensorInfos={real:a,imag:l},r}const Het={kernelName:dy,backendName:"webgl",kernelFunc:mu};const t$="return (a < 0.) ? b * a : a;",e$=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function jet(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{alpha:r}=s,o=e.makeTensorInfo([],"float32",lu(r,"float32")),a=ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xf(e$,i.shape,o.shape):new Rh(t$,i.shape,o.shape),l=e.runWebGLProgram(a,[i,o],"float32");return e.disposeIntermediateTensorInfo(o),l}const Xet={kernelName:H1,backendName:"webgl",kernelFunc:jet};const n$="return (a < 0.) ? b * a : a;",s$=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function qet(n){const{inputs:t,backend:e}=n,{x:s,alpha:i}=t,r=ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xf(s$,s.shape,i.shape):new Rh(n$,s.shape,i.shape);return e.runWebGLProgram(r,[s,i],"float32")}const Ket={kernelName:u2,backendName:"webgl",kernelFunc:qet};const bf="if (isnan(x)) return x;";function $s({opSnippet:n,packedOpSnippet:t,cpuKernelImpl:e,dtype:s}){return({inputs:i,backend:r})=>{const{x:o}=i,a=r,l=s||o.dtype;if(a.shouldExecuteOnCPU([o])&&e!=null){const f=a.texData.get(o.dataId),g=e(f.values,l);return a.makeTensorInfo(o.shape,l,g)}const u=ge().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&t!=null;let h;return u?h=new Gc(o.shape,t):h=new gl(o.shape,n),a.runWebGLProgram(h,[o],l)}}function hr({opSnippet:n,packedOpSnippet:t,checkOutOfBounds:e=!1,supportsComplex:s=!1,cpuKernelImpl:i,dtype:r}){return({inputs:o,backend:a})=>{const{a:l,b:u}=o,h=a;if(s&&l.dtype==="complex64"){const y=h.texData.get(l.dataId),k=h.texData.get(u.dataId),[C,S]=[[y.complexTensorInfos.real,k.complexTensorInfos.real],[y.complexTensorInfos.imag,k.complexTensorInfos.imag]].map(D=>{const[R,V]=D,E={dataId:R.dataId,dtype:R.dtype,shape:l.shape},q={dataId:V.dataId,dtype:V.dtype,shape:u.shape},X=new Rh(n,l.shape,u.shape);return h.runWebGLProgram(X,[E,q],To(R.dtype,V.dtype))}),$=mu({inputs:{real:C,imag:S},backend:h});return h.disposeIntermediateTensorInfo(C),h.disposeIntermediateTensorInfo(S),$}const f=r||To(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||h.shouldExecuteOnCPU([l,u]))&&i!=null){const y=h.texData.get(l.dataId).values,k=h.texData.get(u.dataId).values,C=l.dtype==="string"?lc(y):y,S=l.dtype==="string"?lc(k):k,[$,D]=i(l.shape,u.shape,C,S,f),R=h.makeTensorInfo(D,f),V=h.texData.get(R.dataId);return V.values=$,R}const g=ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&t!=null;let m;return g?m=new xf(t,l.shape,u.shape,e):m=new Rh(n,l.shape,u.shape),h.runWebGLProgram(m,[l,u],f)}}function Rp(n,t=!1){if(n==="linear")return t?$et:Tet;if(n==="relu")return t?Det:Eet;if(n==="elu")return t?Net:Iet;if(n==="relu6")return t?Ret:_et;if(n==="prelu")return t?s$:n$;if(n==="leakyrelu")return t?e$:t$;if(n==="sigmoid")return t?Met:Aet;throw new Error(`Activation ${n} has not been implemented for the WebGL backend.`)}class i${constructor(t,e,s,i=!1,r=!1,o=!1,a=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s,this.enableShapeUniforms=Ir(this.outputShape.length);const h=i?t[1]:t[2],f=Math.ceil(h/2),g=i?"i * 2, rc.y":"rc.y, i * 2",m=r?"rc.z, i * 2":"i * 2, rc.z",y=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],k=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let C="",S="";a&&(l?C=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:u?C=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:C=`vec4 activation(vec4 x) {
          ${a}
        }`,S="result = activation(result);");const $=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let D="rc.x",R="rc.x";t[0]<e[0]?D=`imod(rc.x, ${t[0]})`:e[0]<t[0]&&(R=`imod(rc.x, ${e[0]})`),this.userCode=`
      ${C}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${f}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${D};
        int batchB = ${R};
        for (int i = 0; i < ${f}; i++) {
          vec4 a = getMatrixA(batchA, ${g});
          vec4 b = getMatrixB(batchB, ${m});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${y[0]} * ${k[0]});
          result += (${y[1]} * ${k[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${$}

        ${S}

        setOutput(result);
      }
    `}}const iS={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class rS{constructor(t,e,s){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=es(e,s),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${t}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}const oS="return a * b;";function $3(n){const{inputs:t,backend:e}=n,{a:s,b:i}=t,r=To(s.dtype,i.dtype);if(s.dtype==="complex64"){const a=e.texData.get(s.dataId),l=e.texData.get(i.dataId),u=new rS(iS.REAL,s.shape,i.shape),h=new rS(iS.IMAG,s.shape,i.shape),f=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:s.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:s.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],g=e.runWebGLProgram(u,f,"float32"),m=e.runWebGLProgram(h,f,"float32"),y=mu({inputs:{real:g,imag:m},backend:e});return e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(m),y}if(e.shouldExecuteOnCPU([s,i])){const a=e.texData.get(s.dataId),l=e.texData.get(i.dataId),[u,h]=jtt(s.shape,i.shape,a.values,l.values,r),f=e.makeTensorInfo(h,r),g=e.texData.get(f.dataId);return g.values=u,f}let o;return ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new xf(oS,s.shape,i.shape):o=new Rh(oS,s.shape,i.shape),e.runWebGLProgram(o,[s,i],r)}const Yet={kernelName:y0,backendName:"webgl",kernelFunc:$3};function Zet(n,t,e){const s=[Kd(n.shape),...Yd(n.shape)],i={dtype:n.dtype,shape:s,dataId:n.dataId},r=[Kd(t),...Yd(t)],o=new QA(r,s),a=!0,l=[s],u=e.runWebGLProgram(o,[i],n.dtype,l,a);return{dataId:u.dataId,shape:t,dtype:u.dtype}}function qe(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{shape:r}=s,o=e,a=Ce(i.shape),l=nI(r,a),u=Ce(l);wt(a===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const h=o.texData.get(i.dataId);return h.isPacked&&!u1(i.shape,l)&&!(h.texture!==null&&u1(h.shape,l))?Zet(i,l,o):(o.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype})}const Jet={kernelName:d2,backendName:"webgl",kernelFunc:qe};class aS{constructor(t,e){this.variableNames=["x"];const{windowSize:s,batchSize:i,inSize:r,outSize:o}=t;this.outputShape=[i,o];const a=Math.floor(s/4)*4,l=s%4;let u="sumValue += dot(values, ones);";if(e!=null){const f=1/e;u=`sumValue += dot(values * ${zd(f)?f.toPrecision(2):f}, ones);`}let h="";r%s>0&&(h=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}class Qet{constructor(t,e){this.variableNames=["x"];const{windowSize:s,batchSize:i,inSize:r,outSize:o}=t;this.outputShape=[i,o];let a="0.0",l="";e==="prod"?a="1.0":e==="min"?(a="1.0 / 1e-20",l="min"):e==="max"&&(a="-1.0 / 1e-20",l="max");let u=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;e==="sum"?u="sumValue":e==="prod"?u="prodValue":e==="all"?u="allValue":e==="any"&&(u="anyValue");const h=Math.floor(s/4)*4,f=s%4;let g=`
      if (${e==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${e==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${e==="min"} || ${e==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,m="vec4";e==="all"?(a="1.0",g=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,m="bvec4"):e==="any"&&(a="0.0",g=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,m="bvec4");let y="";r%s>0&&(y=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${y}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${h}; i += 4) {
          int inIdx = inOffset + i;
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${g}
        }

        int inIdx = inOffset + ${h};
        if (${f===1}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${g}
        } else if (${f===2}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${g}
        } else if (${f===3}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${g}
        }
        setOutput(${u});
      }
    `}}function tnt(n){const t=[];for(;t.length===0||t[t.length-1].outSize!==1;){const e=t.length?t[t.length-1].outSize:n[1],s=M2(e);t.push({inSize:e,windowSize:s,outSize:Math.ceil(e/s)})}return t}function Hh(n,t,e,s){const i=tnt(n.shape);let r=n;for(let o=0;o<i.length;o++){const{inSize:a,windowSize:l,outSize:u}=i[o];let h,f;e==="mean"?h=o===0?new aS({windowSize:l,inSize:a,batchSize:n.shape[0],outSize:u},a):new aS({windowSize:l,inSize:a,batchSize:n.shape[0],outSize:u}):h=new Qet({windowSize:l,inSize:a,batchSize:n.shape[0],outSize:u},e),f=r,r=s.runWebGLProgram(h,[r],t),f.dataId!==n.dataId&&s.disposeIntermediateTensorInfo(f)}return r}class ent{constructor(t,e){this.variableNames=["A"];const s=new Array(t.length);for(let o=0;o<s.length;o++)s[o]=t[e[o]];this.outputShape=s,this.rank=s.length;const i=Zs(this.rank),r=nnt(e);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${r}));
    }
    `}}function nnt(n){const t=n.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],s=new Array(t);for(let i=0;i<n.length;i++)s[n[i]]=e[i];return s.join()}class snt{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const s=new Array(t.length);for(let h=0;h<s.length;h++)s[h]=t[e[h]];if(this.outputShape=s,this.rank=s.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const i=Zs(this.rank),r=JA("rc",this.rank),o=new Array(this.rank);for(let h=0;h<e.length;h++)o[e[h]]=r[h];const a=`vec2(${o.slice(-2).join()})`,l=`++${r[this.rank-1]} < ${s[this.rank-1]}`,u=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${r[this.rank-1]};
      if(++${r[this.rank-2]} < ${s[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}function Z2(n,t,e){const s=ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new snt(n.shape,t):new ent(n.shape,t);return e.runWebGLProgram(s,[n],n.dtype)}function int(n,t,e,s){const i=t,r=n.shape.length,o=ds(i,n.shape);let a=o;const l=xi(a,r),u=l!=null;let h=n;u&&(h=Z2(n,l,s),a=_i(a.length,r)),ur("sum",a,r);const[f,g]=tr(h.shape,a);let m=f;e&&(m=Fi(f,o));const y=Ce(g),C=Ce(n.shape)/y,S=qe({inputs:{x:h},attrs:{shape:[C,y]},backend:s}),$=jy(n.dtype),D=Hh(S,$,"sum",s),R=qe({inputs:{x:D},attrs:{shape:m},backend:s});return s.disposeIntermediateTensorInfo(S),s.disposeIntermediateTensorInfo(D),u&&s.disposeIntermediateTensorInfo(h),R}function J2(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{axis:r,keepDims:o}=s;return int(i,r,o,e)}const rnt={kernelName:b2,backendName:"webgl",kernelFunc:J2};function Wr(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{perm:r}=s,o=e,a=i.shape.length,l=new Array(a);for(let h=0;h<l.length;h++)l[h]=i.shape[r[h]];let u;if(o.shouldExecuteOnCPU([i])){const f=o.texData.get(i.dataId).values,g=_3(f,i.shape,i.dtype,r,l);u=o.makeTensorInfo(l,i.dtype);const m=o.texData.get(u.dataId);m.values=g}else u=Z2(i,r,o);return u}const ont={kernelName:Dd,backendName:"webgl",kernelFunc:Wr};const r$=1e3;function h1({a:n,b:t,transposeA:e,transposeB:s,backend:i,bias:r=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:l=null}){const u=n.shape.length,h=t.shape.length,f=e?n.shape[u-2]:n.shape[u-1],g=s?t.shape[h-1]:t.shape[h-2],m=e?n.shape[u-1]:n.shape[u-2],y=s?t.shape[h-2]:t.shape[h-1],k=n.shape.slice(0,-2),C=t.shape.slice(0,-2),S=Ce(k),$=Ce(C),R=es(n.shape.slice(0,-2),t.shape.slice(0,-2)).concat([m,y]);wt(f===g,()=>`Error in matMul: inner shapes (${f}) and (${g}) of Tensors with shapes ${n.shape} and ${t.shape} and transposeA=${e} and transposeB=${s} must match.`);const V=e?[S,f,m]:[S,m,f],E=s?[$,y,g]:[$,g,y],q=qe({inputs:{x:n},backend:i,attrs:{shape:V}}),X=qe({inputs:{x:t},backend:i,attrs:{shape:E}}),B=[q,X],U=Math.max(S,$),K=e?q.shape[1]:q.shape[2],Y=r!=null,ct=o!=null,j=l==="leakyrelu",ht=l!=null?Rp(l,!0):null,It=Y||ct||j||ht!=null;let yt;if((m===1||y===1)&&K>r$&&It===!1){let Ct=q,Gt=X;e&&(Ct=Wr({inputs:{x:q},backend:i,attrs:{perm:[0,2,1]}}),B.push(Ct)),s&&(Gt=Wr({inputs:{x:X},backend:i,attrs:{perm:[0,2,1]}}),B.push(Gt));const vt=y!==1,at=y===1;let Pt=Ct;vt&&(Pt=qe({inputs:{x:Ct},backend:i,attrs:{shape:[U,K,1]}}),B.push(Pt));const jt=y===1?2:1;let Ut=Gt;at&&(Ut=qe({inputs:{x:Gt},backend:i,attrs:{shape:[U,1,K]}}),B.push(Ut));const me=$3({inputs:{a:Pt,b:Ut},backend:i});yt=J2({inputs:{x:me},backend:i,attrs:{axis:jt,keepDims:!0}}),B.push(me)}else{const Ct=To(n.dtype,t.dtype),Gt=new i$(V,E,[U,m,y],e,s,Y,ht,ct,j),vt=[q,X];if(r!=null&&vt.push(r),ct&&vt.push(o),j){const at=i.makeTensorInfo([],"float32",lu(a,"float32"));vt.push(at),B.push(at)}yt=i.runWebGLProgram(Gt,vt,Ct)}const Ot=qe({inputs:{x:yt},backend:i,attrs:{shape:R}});B.push(yt);for(const Ct of B)i.disposeIntermediateTensorInfo(Ct);return Ot}function ant(n){const{inputs:t,backend:e,attrs:s}=n,{a:i,b:r,bias:o,preluActivationWeights:a}=t,{transposeA:l,transposeB:u,activation:h,leakyreluAlpha:f}=s;return h1({a:i,b:r,transposeA:l,transposeB:u,backend:e,bias:o,preluActivationWeights:a,leakyreluAlpha:f,activation:h})}const lnt={kernelName:Wm,backendName:"webgl",kernelFunc:ant};const lS="return abs(x);";function cnt(n){const{inputs:t,backend:e}=n,{x:s}=t;if(e.shouldExecuteOnCPU([s])&&s.dtype!=="complex64"){const r=e.texData.get(s.dataId),o=YA(r.values);return e.makeTensorInfo(s.shape,s.dtype,o)}let i;return ge().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new Gc(s.shape,lS):i=new gl(s.shape,lS),e.runWebGLProgram(i,[s],s.dtype)}const unt={kernelName:T1,backendName:"webgl",kernelFunc:cnt};const hnt=xa+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,dnt=$s({opSnippet:hnt}),fnt={kernelName:Hp,backendName:"webgl",kernelFunc:dnt};const pnt=xa+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,gnt=$s({opSnippet:pnt}),mnt={kernelName:jp,backendName:"webgl",kernelFunc:gnt};const cS="return a + b;",xnt=hr({opSnippet:cS,packedOpSnippet:cS,supportsComplex:!0,cpuKernelImpl:Ttt}),bnt={kernelName:rf,backendName:"webgl",kernelFunc:xnt};class vnt{constructor(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map((r,o)=>`T${o}`);const s=[];this.variableNames.forEach(r=>{s.push(`float v${r} = get${r}AtOutCoords();`)});const i=this.variableNames.map(r=>`v${r}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}}class ynt{constructor(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map((r,o)=>`T${o}`);const s=[];this.variableNames.forEach(r=>{s.push(`vec4 v${r} = get${r}AtOutCoords();`)});const i=this.variableNames.map(r=>`v${r}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}}function Am(n){const{inputs:t,backend:e}=n,s=t;if(s.length===1)return Eo({inputs:{x:s[0]},backend:e});if(s.length>ge().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(s.length/2),u=Am({inputs:s.slice(0,l),backend:e}),h=Am({inputs:s.slice(l),backend:e});return Am({inputs:[u,h],backend:e})}const i=s.map(l=>l.dtype).reduce((l,u)=>To(l,u)),r=s.map(l=>l.shape),a=ge().getBool("WEBGL_PACK")?new ynt(s[0].shape,r):new vnt(s[0].shape,r);return e.runWebGLProgram(a,s,i)}const wnt={kernelName:ry,backendName:"webgl",kernelFunc:Am};function knt(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{axis:r,keepDims:o}=s,a=i.shape.length,l=ds(r,i.shape);let u=l;const h=xi(u,a);let f=i;h!=null&&(f=Wr({inputs:{x:i},backend:e,attrs:{perm:h}}),u=_i(u.length,a)),ur("all",u,a);const[g,m]=tr(f.shape,u),y=Ce(m),k=qe({inputs:{x:f},backend:e,attrs:{shape:[-1,y]}}),C=Hh(k,k.dtype,"all",e);let S;if(o){const $=Fi(g,l);S=qe({inputs:{x:C},backend:e,attrs:{shape:$}})}else S=qe({inputs:{x:C},backend:e,attrs:{shape:g}});return e.disposeIntermediateTensorInfo(k),e.disposeIntermediateTensorInfo(C),h!=null&&e.disposeIntermediateTensorInfo(f),S}const Cnt={kernelName:oy,backendName:"webgl",kernelFunc:knt};function Snt(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{axis:r,keepDims:o}=s,a=i.shape.length,l=ds(r,i.shape);let u=l;const h=xi(u,a);let f=i;h!=null&&(f=Wr({inputs:{x:i},backend:e,attrs:{perm:h}}),u=_i(u.length,a)),ur("any",u,a);const[g,m]=tr(f.shape,u),y=Ce(m),k=qe({inputs:{x:f},backend:e,attrs:{shape:[-1,y]}}),C=Hh(k,k.dtype,"any",e);let S;if(o){const $=Fi(g,l);S=qe({inputs:{x:C},backend:e,attrs:{shape:$}})}else S=qe({inputs:{x:C},backend:e,attrs:{shape:g}});return e.disposeIntermediateTensorInfo(k),e.disposeIntermediateTensorInfo(C),h!=null&&e.disposeIntermediateTensorInfo(f),S}const Tnt={kernelName:ay,backendName:"webgl",kernelFunc:Snt};class Int{constructor(t,e,s){this.variableNames=["A"];const{windowSize:i,batchSize:r,outSize:o}=t;s||this.variableNames.push("bestIndicesA"),this.outputShape=[r,o];const a=e==="max"?">":"<",l=s?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}class Ent{constructor(t,e,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,wt(t.length>2,()=>`Packed arg${s.charAt(0).toUpperCase()+s.slice(1)} supports only inputs with rank above 2.`);const r=t[t.length-1],o=Math.ceil(r/e);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),i||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,u=Zs(l),h=Lr("coords",l);let f,g;if(o===1){g=l+1;const X=Zs(g);f=`
        ${X} sourceLocR = ${X}(${h.join()}, 0);
        ++${h[l-1]};
        ${X} sourceLocG = ${X}(${h.join()}, 0);
        ++${h[l-2]};
        ${X} sourceLocA = ${X}(${h.join()}, 0);
        --${h[l-1]};
        ${X} sourceLocB = ${X}(${h.join()}, 0);
        --${h[l-2]};`}else g=l,f=`
        ${u} sourceLocR = coords;
        ++${h[l-1]};
        ${u} sourceLocG = coords;
        ++${h[l-2]};
        ${u} sourceLocA = coords;
        --${h[l-1]};
        ${u} sourceLocB = coords;
        --${h[l-2]};`;const m=["x","y","z","w","u","v"].slice(0,g),y="."+m[g-1],k=m.map(X=>"int "+X),C=Lr("sourceLocR",g-1).concat("inIdx.r"),S=Lr("sourceLocG",g-1).concat("inIdx.g"),$=Lr("sourceLocB",g-1).concat("inIdx.b"),D=Lr("sourceLocA",g-1).concat("inIdx.a"),R=s==="max"?"greaterThan":"lessThan",V=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${C.join()}),
                             getBestIndicesAChannel(${S.join()}),
                             getBestIndicesAChannel(${$.join()}),
                             getBestIndicesAChannel(${D.join()})));`,E=`vec4(
            getAChannel(${C.join()}),
            hasNextCol ? getAChannel(${S.join()}) : 0.,
            hasNextRow ? getAChannel(${$.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${D.join()}) : 0.)`,q=i?"":`
      float getBestIndicesAChannel(${k.join()}) {
        return getChannel(getBestIndicesA(${m.join()}),
                                          vec2(${m.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${k.join()}) {
        return getChannel(getA(${m.join()}),
                               vec2(${m.slice(-2).join()}));
      }
      ${q}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${h[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${h[l-2]} < ${a[l-2]-1};
        ${f}
        ivec4 srcIdx = ivec4(sourceLocR${y}, sourceLocG${y},
          sourceLocB${y}, sourceLocA${y}) * ${e};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${E};

        for (int i = 0; i < ${e}; i++) {
          inIdx = srcIdx;
          ${V}
          vec4 candidate = ${E};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${R}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}function o$(n,t,e,s=null){let i=t.shape[0],r=t.shape[1];s!=null&&(i=s.shape[0],r=s.shape[1]);const o=M2(r),a={windowSize:o,inSize:r,batchSize:i,outSize:Math.ceil(r/o)},l=new Int(a,e,s==null),u=[t];s!=null&&u.push(s);const h=n.runWebGLProgram(l,u,"int32");if(h.shape[1]===1)return h;const f=o$(n,t,e,h);return n.disposeIntermediateTensorInfo(h),f}function a$(n,t,e,s=null){const i=s!=null?s.shape:t.shape,r=i[i.length-1],o=M2(r),a=new Ent(i,o,e,s==null),l=s==null?[t]:[t,s],u=n.runWebGLProgram(a,l,"int32");if(u.shape.length===t.shape.length){const h=a$(n,t,e,u);return n.disposeIntermediateTensorInfo(u),h}return u}function l$(n,t,e,s){const i=[e];if(ur("arg"+s.charAt(0).toUpperCase()+s.slice(1),i,t.shape.length),!ge().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const r=[],o=n.texData.get(t.dataId),a=o!==null&&o.isPacked;let l=t;a&&(l=n.unpackTensor(t),r.push(l));const[u,h]=tr(l.shape,i),f=Ce(h),g=qe({inputs:{x:l},backend:n,attrs:{shape:[-1,f]}});r.push(g);const m=o$(n,g,s);r.push(m);const y=qe({inputs:{x:m},backend:n,attrs:{shape:u}});return r.forEach(k=>n.disposeIntermediateTensorInfo(k)),y}return a$(n,t,s)}function _nt(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{axis:r}=s;let o=ds(r,i.shape);const a=xi(o,i.shape.length);let l=i;const u=[];a!=null&&(l=Wr({inputs:{x:i},backend:e,attrs:{perm:a}}),u.push(l),o=_i(o.length,l.shape.length)),ur("argMax",[o[0]],l.shape.length);const h=l$(e,l,o[0],"max");return u.forEach(f=>e.disposeIntermediateTensorInfo(f)),h}const Ant={kernelName:I1,backendName:"webgl",kernelFunc:_nt};function $nt(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{axis:r}=s;let o=ds(r,i.shape);const a=xi(o,i.shape.length);let l=i;const u=[];a!=null&&(l=Wr({inputs:{x:i},backend:e,attrs:{perm:a}}),u.push(l),o=_i(o.length,l.shape.length)),ur("argMin",[o[0]],l.shape.length);const h=l$(e,l,o[0],"min");return u.forEach(f=>e.disposeIntermediateTensorInfo(f)),h}const Nnt={kernelName:E1,backendName:"webgl",kernelFunc:$nt};const Dnt=xa+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Rnt=$s({opSnippet:Dnt}),Mnt={kernelName:Xp,backendName:"webgl",kernelFunc:Rnt};const Ont=xa+"return log(x + sqrt(x * x + 1.0));",Fnt=$s({opSnippet:Ont}),Pnt={kernelName:qp,backendName:"webgl",kernelFunc:Fnt};const Lnt=xa+`
  return atan(x);
`,Bnt=$s({opSnippet:Lnt}),znt={kernelName:Kp,backendName:"webgl",kernelFunc:Bnt};const Wnt=A3+`
  return atan(a, b);
`,Vnt=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Gh+`
  return result;
`,Unt=hr({opSnippet:Wnt,packedOpSnippet:Vnt}),Gnt={kernelName:Zp,backendName:"webgl",kernelFunc:Unt};const Hnt=xa+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,jnt=$s({opSnippet:Hnt}),Xnt={kernelName:Yp,backendName:"webgl",kernelFunc:jnt};class Mp{constructor(t,e,s,i=!1,r=!1){if(this.variableNames=["x"],e==="avg"&&s)throw new Error("Cannot compute positions for average pool.");const o=t.filterWidth,a=t.strideHeight,l=t.strideWidth,u=t.dilationHeight,h=t.dilationWidth,f=t.effectiveFilterHeight,g=t.effectiveFilterWidth,m=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;const k=e==="avg",C=`((batch  * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + d`,S=`(xR * ${t.inWidth} + xC) * ${t.inChannels} + d`;let $="0.0";if(k||($="-1.0 / 1e-20"),s){this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${m}, ${y});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${f};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${g};
                wC += ${h}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?r?C:S:`wR * ${g} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const D="max";let R=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;e==="avg"&&(R="avgValue / max(count, 1.0)");const V=Math.floor(o/4)*4,E=o%4,q=`
      if (${k}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${D}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${m}, ${y});
      const float initializationValue = ${$};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${$});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${f};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${V}; wC += 4) {
            int xC = xCCorner + wC * ${h};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${h}, d),
              getValue(batch, xR, xC + 2 * ${h}, d),
              getValue(batch, xR, xC + 3 * ${h}, d)
            );

            ${q}
          }

          int xC = xCCorner + ${V};
          if (${E===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${q}
          } else if (${E===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${h}, d),
              initializationValue,
              initializationValue
            );

            ${q}
          } else if (${E===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${h}, d),
              getValue(batch, xR, xC + 2 * ${h}, d),
              initializationValue
            );

            ${q}
          }
        }
        setOutput(${R});
      }
    `}}class N3{constructor(t,e,s,i=!1,r=!1){if(this.variableNames=["x"],e==="avg"&&s)throw new Error("Cannot compute positions for average pool.");const o=t.filterWidth,a=t.strideDepth,l=t.strideHeight,u=t.strideWidth,h=t.dilationDepth,f=t.dilationHeight,g=t.dilationWidth,m=t.effectiveFilterDepth,y=t.effectiveFilterHeight,k=t.effectiveFilterWidth,C=t.padInfo.front,S=t.padInfo.top,$=t.padInfo.left;this.outputShape=t.outShape;const D=e==="avg";let R="0.0";if(D||(R="-1.0 / 1e-20"),s){this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${u});
        const ivec3 pads = ivec3(${C}, ${S}, ${$});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${m};
              wD += ${h}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${t.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${y};
                wR += ${f}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${k};
                  wC += ${g}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?r?`(((batch * ${t.inDepth} + xD) * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`((xD * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`wD * ${y} * ${k} +
                      wR * ${k} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const V="max";let E=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;e==="avg"&&(E="avgValue / max(count, 1.0)");const q=Math.floor(o/4)*4,X=o%4,B=`
      if (${D}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${V}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${u});
      const ivec3 pads = ivec3(${C}, ${S}, ${$});
      const float initializationValue = ${R};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${R});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${m};
            wD += ${h}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${y};
            wR += ${f}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${q}; wC += 4) {
              int xC = xCCorner + wC * ${g};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${g}, ch),
                getValue(batch, xD, xR, xC + 2 * ${g}, ch),
                getValue(batch, xD, xR, xC + 3 * ${g}, ch)
              );

              ${B}
            }

            int xC = xCCorner + ${q};
            if (${X===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${B}
            } else if (${X===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${g}, ch),
                initializationValue,
                initializationValue
              );

              ${B}
            } else if (${X===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${g}, ch),
                getValue(batch, xD, xR, xC + 2 * ${g}, ch),
                initializationValue
              );

              ${B}
            }
          }
        }
        setOutput(${E});
      }
    `}}function qnt(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t;ig(i,"avgPool");const{filterSize:r,strides:o,pad:a,dimRoundingMode:l}=s,u=1;wt(Sr(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const h=ga(i.shape,r,o,u,a,l);if(h.filterWidth===1&&h.filterHeight===1&&zs(h.inShape,h.outShape))return Eo({inputs:{x:i},backend:e});const f=new Mp(h,"avg",!1);return e.runWebGLProgram(f,[i],"float32")}const Knt={kernelName:_1,backendName:"webgl",kernelFunc:qnt};function Ynt(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{filterSize:r,strides:o,pad:a,dimRoundingMode:l,dataFormat:u}=s,h=[1,1,1],f=hc(i.shape,r,o,h,a,l,u),g=new N3(f,"avg",!1);return e.runWebGLProgram(g,[i],"float32")}const Znt={kernelName:A1,backendName:"webgl",kernelFunc:Ynt};class Jnt{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const e=t.filterHeight,s=t.filterWidth,i=t.strideHeight,r=t.strideWidth,o=t.dilationHeight,a=t.dilationWidth,l=t.effectiveFilterHeight,u=t.effectiveFilterWidth,h=l-1-t.padInfo.top,f=u-1-t.padInfo.left,g=1/(e*s);this.userCode=`
      const ivec2 pads = ivec2(${h}, ${f});
      const float avgMultiplier = float(${g});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class Qnt{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const e=t.filterDepth,s=t.filterHeight,i=t.filterWidth,r=t.strideDepth,o=t.strideHeight,a=t.strideWidth,l=t.dilationDepth,u=t.dilationHeight,h=t.dilationWidth,f=t.effectiveFilterDepth,g=t.effectiveFilterHeight,m=t.effectiveFilterWidth,y=f-1-t.padInfo.front,k=g-1-t.padInfo.top,C=m-1-t.padInfo.left,S=1/(e*s*i);this.userCode=`
      const ivec3 pads = ivec3(${y}, ${k}, ${C});
      const float avgMultiplier = float(${S});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${r}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${g};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${m};
                wC += ${h}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}function tst(n){const{inputs:t,backend:e,attrs:s}=n,{dy:i,input:r}=t,o=r,{filterSize:a,strides:l,pad:u,dimRoundingMode:h}=s,f=[1,1,1],g=hc(o.shape,a,l,f,u,h),m=new Qnt(g);return e.runWebGLProgram(m,[i],o.dtype)}const est={kernelName:cy,backendName:"webgl",kernelFunc:tst};function nst(n){const{inputs:t,backend:e,attrs:s}=n,{dy:i,input:r}=t,o=r;ig([i,r],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=s,h=ga(o.shape,a,l,1,u),f=new Jnt(h);return e.runWebGLProgram(f,[i],o.dtype)}const sst={kernelName:ly,backendName:"webgl",kernelFunc:nst};function ist(n){const{inputs:t,backend:e,attrs:s}=n,{a:i,b:r}=t,{transposeA:o,transposeB:a}=s;return h1({a:i,b:r,transposeA:o,transposeB:a,backend:e})}const rst={kernelName:$1,backendName:"webgl",kernelFunc:ist};class ost{constructor(t,e,s,i,r,o){this.outputShape=[],this.variableNames=["x","mean","variance"],es(t,e),es(t,s);let a="0.0";i!=null&&(es(t,i),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";r!=null&&(es(t,r),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}class ast{constructor(t,e,s,i,r,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],es(t,e),es(t,s);let a="vec4(0.0)";i!=null&&(es(t,i),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";r!=null&&(es(t,r),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}const lst=({inputs:n,backend:t,attrs:e})=>{const{x:s,mean:i,variance:r,offset:o,scale:a}=n;wt(i.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),wt(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),wt(a==null||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=e;l==null&&(l=.001);const u=[s,i,r];let h=null;o!=null&&(h=o.shape,u.push(o));let f=null;a!=null&&(f=a.shape,u.push(a));const g=ge().getBool("WEBGL_PACK_NORMALIZATION")?new ast(s.shape,i.shape,r.shape,h,f,l):new ost(s.shape,i.shape,r.shape,h,f,l);return t.runWebGLProgram(g,u,u[0].dtype)},cst={kernelName:V1,backendName:"webgl",kernelFunc:lst};class ust{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;const e=Zs(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const s=hst(this.rank);let i;const r=t.map((o,a)=>`sourceLoc.${Av[a]} = start[${a}] + coords.${Av[a]};`);i=`
        ${e} sourceLoc;
        ${e} coords = getOutputCoords();
        ${r.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${s}));
      }
    `}}const Av=["x","y","z","w","u","v"];function hst(n){if(n===1)return"sourceLoc";if(n<=6)return Av.slice(0,n).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${n} is not yet supported`)}class dst{constructor(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const e=Zs(this.rank),s=Lr("coords",this.rank),i=Lr("sourceLoc",this.rank),r=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,o=`getChannel(getSource(${i.join()}), ${r})`,a=`
      result.x = ${o};
      if (++${s[this.rank-1]} < ${t[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${o};
        --${i[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${s[this.rank-1]};
      if (++${s[this.rank-2]} < ${t[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${o};
        if (++${s[this.rank-1]} < ${t[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${o};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${e}(${t.map((h,f)=>`start[${f}]`).join()});`:t.map((h,f)=>`${i[f]} = ${s[f]} + start[${f}];`).join(`
`);this.userCode=`
      void main() {
        ${e} coords = getOutputCoords();
        ${e} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}function fst(n,t,e,s){const i=s.texData.get(n.dataId),r=s.makeTensorInfo(e,n.dtype),o=s.texData.get(r.dataId);Object.assign(o,i),o.refCount=1,o.shape=e,o.dtype=n.dtype;let a=W5(t,Dn(n.shape));i.slice&&(a+=i.slice.flatOffset),o.slice={flatOffset:a,origDataId:i.slice&&i.slice.origDataId||n.dataId};const l=s.dataRefCount.get(o.slice.origDataId)||1;return s.dataRefCount.set(o.slice.origDataId,l+1),r}function vf(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{begin:r,size:o}=s,[a,l]=Tw(i,r,o);if(L5(i,a,l),Ce(l)===0)return e.makeTensorInfo(l,i.dtype,[]);if(e.shouldExecuteOnCPU([i])||i.dtype==="string"){const f=e.texData.get(i.dataId),g=set(f.values,a,l,i.shape,i.dtype);return e.makeTensorInfo(l,i.dtype,g)}const{isPacked:u}=e.texData.get(i.dataId),h=z5(i.shape,a,l);if(u||!h){const f=ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new dst(l):new ust(l),g=[a];return e.runWebGLProgram(f,[i],i.dtype,g)}return e.uploadToGPU(i.dataId),fst(i,a,l,e)}const pst={kernelName:x2,backendName:"webgl",kernelFunc:vf};const gst=n=>{const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{blockShape:r,crops:o}=s;wt(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=r.reduce(($,D)=>$*D),l=H0(i.shape,r,a),u=j0(l.length,r.length),h=X0(i.shape,r,a),f=Aw(o,r.length),g=$w(h,o,r.length),m=[],y=qe({inputs:{x:i},backend:e,attrs:{shape:l}}),k=Wr({inputs:{x:y},backend:e,attrs:{perm:u}}),C=qe({inputs:{x:k},backend:e,attrs:{shape:h}}),S=vf({inputs:{x:C},backend:e,attrs:{begin:f,size:g}});return m.push(y),m.push(k),m.push(C),m.forEach($=>e.disposeIntermediateTensorInfo($)),S},mst={kernelName:N1,backendName:"webgl",kernelFunc:gst};function xst(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,weights:r}=t,{size:o}=s,a=e.readSync(i.dataId),l=e.readSync(r.dataId),u=KA(a,l,r.dtype,r.shape,o);return e.makeTensorInfo([o],r.dtype,u)}const bst={kernelName:uy,backendName:"webgl",kernelFunc:xst};const vst=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,yst=`
  return float(int(a.r) & int(b.r));
`;function wst(n){const{inputs:t,backend:e}=n,{a:s,b:i}=t,r=ge().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=ge().getNumber("WEBGL_VERSION");if(e.shouldExecuteOnCPU([s,i])||o===1){const l=e.texData.get(s.dataId).values,u=e.texData.get(i.dataId).values,[h,f]=Ett(s.shape,i.shape,l,u,s.dtype),g=e.makeTensorInfo(f,s.dtype),m=e.texData.get(g.dataId);return m.values=h,g}let a;return r?a=new xf(vst,s.shape,i.shape,!1):a=new Rh(yst,s.shape,i.shape),e.runWebGLProgram(a,[s,i],s.dtype)}const kst={kernelName:hy,backendName:"webgl",kernelFunc:wst};function Cst(n){const{inputs:t,backend:e}=n,{s0:s,s1:i}=t,r=e.readSync(s.dataId),o=e.readSync(i.dataId),a=es(Array.from(r),Array.from(o));return e.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const Sst={kernelName:lI,backendName:"webgl",kernelFunc:Cst};const Tst="return float(a != b);",c$=hr({opSnippet:Tst,cpuKernelImpl:qtt,dtype:"bool"}),Ist={kernelName:r2,backendName:"webgl",kernelFunc:c$};function og(n){const{inputs:t,backend:e}=n,{input:s}=t,i=e.texData.get(s.dataId);return Eo({inputs:{x:i.complexTensorInfos.real},backend:e})}const Est={kernelName:Fy,backendName:"webgl",kernelFunc:og};const _st="return float(int(x));";function Ast(n,t){const e=new gl(n.shape,_st),s=t.runWebGLProgram(e,[n],"int32");return{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}function $v(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{dtype:r}=s;if(r==="complex64"){if(i.dtype==="complex64")return Eo({inputs:{x:i},backend:e});const o=Zi(i.shape),a=$v({inputs:{x:i},backend:e,attrs:{dtype:"float32"}}),l=mu({inputs:{real:a,imag:o},backend:e});return o.dispose(),e.disposeIntermediateTensorInfo(a),l}if(i.dtype==="complex64"){const o=og({inputs:{input:i},backend:e}),a=$v({inputs:{x:o},backend:e,attrs:{dtype:r}});return e.disposeIntermediateTensorInfo(o),a}if(!sI(i.dtype,r)){const o=Eo({inputs:{x:i},backend:e});return{dataId:o.dataId,shape:o.shape,dtype:r}}if(e.shouldExecuteOnCPU([i])){const o=e.texData.get(i.dataId).values,[a,l,u]=_tt(o,i.shape,i.dtype,r);return e.makeTensorInfo(a,l,u)}if(r==="int32")return Ast(i,e);if(r==="bool"){const o=e.makeTensorInfo([],"bool",br("bool",1)),l=c$({inputs:{a:i,b:o},backend:e});return e.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${r}`)}const $st={kernelName:Jp,backendName:"webgl",kernelFunc:$v};const uS="return ceil(x);",Nst=$s({opSnippet:uS,packedOpSnippet:uS,cpuKernelImpl:Att}),Dst={kernelName:Qp,backendName:"webgl",kernelFunc:Nst};class Rst{constructor(t){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}class Mst{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}function Ost(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{clipValueMin:r,clipValueMax:o}=s;let a;ge().getBool("WEBGL_PACK_CLIP")?a=new Mst(i.shape):a=new Rst(i.shape);const l=[[r],[o]];return e.runWebGLProgram(a,[i],i.dtype,l)}const Fst={kernelName:t0,backendName:"webgl",kernelFunc:Ost};class Pst{constructor(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}function hS(n,t){return{dataId:t.dataId,dtype:t.dtype,shape:n.shape}}function Lst(n){const{inputs:t,backend:e}=n,{x:s}=t,i=e.texData.get(s.dataId),r=new Pst(s.shape),o=[hS(s,i.complexTensorInfos.real),hS(s,i.complexTensorInfos.imag)];return e.runWebGLProgram(r,o,o[0].dtype)}const Bst={kernelName:D1,backendName:"webgl",kernelFunc:Lst};class zst{constructor(t){this.outputShape=[],this.outputShape=vl(t,1),this.variableNames=t.map((o,a)=>`T${a}`);const e=new Array(t.length-1);e[0]=t[0][1];for(let o=1;o<e.length;o++)e[o]=e[o-1]+t[o][1];const s=[`if (yC < ${e[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<e.length;o++){const a=e[o-1];s.push(`else if (yC < ${e[o]}) setOutput(getT${o}(yR, yC-${a}));`)}const i=e.length,r=e[e.length-1];s.push(`else setOutput(getT${i}(yR, yC-${r}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${s.join(`
        `)}
      }
    `}}class Wst{constructor(t,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=vl(t,e);const s=this.outputShape,i=s.length,r=Zs(i),o=Lr("coords",i),a=["x","y","z","w","u","v"].slice(0,i);this.variableNames=t.map((k,C)=>`T${C}`);const l=new Array(t.length-1);l[0]=t[0][e];for(let k=1;k<l.length;k++)l[k]=l[k-1]+t[k][e];const u=a[e],h=a.slice(-2),f=a.join();let g=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${f}), vec2(${h.join()}));
        }`;for(let k=1;k<l.length;k++){const C=l[k-1];g+=`
        if (${u} < ${l[k]}  && ${u} >= ${l[k-1]}) {
          return getChannel(
            getT${k}(${gm(a,u,C)}),
            vec2(${gm(h,u,C)}));
        }`}const m=l.length,y=l[l.length-1];g+=`
        return getChannel(
          getT${m}(${gm(a,u,y)}),
          vec2(${gm(h,u,y)}));`,this.userCode=`
      float getValue(${a.map(k=>"int "+k)}) {
        ${g}
      }

      void main() {
        ${r} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[i-1]} = ${o[i-1]} + 1;
        if (${o[i-1]} < ${s[i-1]}) {
          result.g = getValue(${o});
        }

        ${o[i-2]} = ${o[i-2]} + 1;
        if (${o[i-2]} < ${s[i-2]}) {
          result.a = getValue(${o});
        }

        ${o[i-1]} = ${o[i-1]} - 1;
        if (${o[i-2]} < ${s[i-2]} &&
            ${o[i-1]} < ${s[i-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function gm(n,t,e){const s=n.indexOf(t);return n.map((r,o)=>o===s?`${r} - ${e}`:r).join()}function Q2(n){const{inputs:t,backend:e}=n,{input:s}=t,i=e.texData.get(s.dataId);return Eo({inputs:{x:i.complexTensorInfos.imag},backend:e})}const Vst={kernelName:_y,backendName:"webgl",kernelFunc:Q2};function gp(n,t,e){const s=n[0].dtype;if(s==="complex64"){const m=n.map($=>og({inputs:{input:$},backend:e})),y=n.map($=>Q2({inputs:{input:$},backend:e})),k=gp(m,t,e),C=gp(y,t,e),S=mu({inputs:{real:k,imag:C},backend:e});return m.forEach($=>e.disposeIntermediateTensorInfo($)),y.forEach($=>e.disposeIntermediateTensorInfo($)),e.disposeIntermediateTensorInfo(k),e.disposeIntermediateTensorInfo(C),S}let i=e.shouldExecuteOnCPU(n);if(s==="string"&&(i=!0),i){const m=n.map(R=>{const E=[-1,Ce(R.shape.slice(t))];return qe({inputs:{x:R},backend:e,attrs:{shape:E}})}),y=m.map(R=>({vals:e.readSync(R.dataId),shape:R.shape})),k=vl(m.map(R=>R.shape),1),C=m[0].shape[0]===1,S=$tt(y,k,s,C),$=vl(n.map(R=>R.shape),t),D=e.makeTensorInfo($,s,S);return m.forEach(R=>e.disposeIntermediateTensorInfo(R)),D}const r=n.filter(m=>Ce(m.shape)>0),o=ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&r[0].shape.length>1;if(r.length===1){const m=o?new gl(n[0].shape,zc):new Gc(n[0].shape,zc);return e.runWebGLProgram(m,n,s)}const a=ge().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(r.length>a){const m=[];for(let k=0;k<r.length;k+=a){const C=r.slice(k,k+a);m.push(gp(C,t,e))}const y=gp(m,t,e);for(const k of m)e.disposeIntermediateTensorInfo(k);return y}if(o){const m=new Wst(r.map(y=>y.shape),t);return e.runWebGLProgram(m,r,s)}const{tensors2D:l,outShape:u}=Ust(r,t,e),h=new zst(l.map(m=>m.shape)),f=e.runWebGLProgram(h,l,s);l.forEach(m=>e.disposeIntermediateTensorInfo(m));const g=qe({inputs:{x:f},attrs:{shape:u},backend:e});return e.disposeIntermediateTensorInfo(f),g}function Ust(n,t,e){const s=vl(n.map(r=>r.shape),t);return{tensors2D:n.map(r=>qe({inputs:{x:r},attrs:{shape:[-1,Ce(r.shape.slice(t))]},backend:e})),outShape:s}}function u$(n){const{inputs:t,backend:e,attrs:s}=n,{axis:i}=s,r=ds(i,t[0].shape)[0],o=t.map(u=>u.shape);Iw(o,r);const a=vl(t.map(u=>u.shape),r);if(Ce(a)===0)return e.makeTensorInfo(a,t[0].dtype,[]);const l=t.filter(u=>Ce(u.shape)>0);return l.length===1?Eo({inputs:{x:l[0]},backend:e}):gp(l,r,e)}const Gst={kernelName:R1,backendName:"webgl",kernelFunc:u$};class h${constructor(t,e=!1,s=null,i=!1,r=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const o=t.padInfo.top,a=t.padInfo.left,l=t.strideHeight,u=t.strideWidth,h=t.dilationHeight,f=t.dilationWidth,g=t.filterHeight,m=t.filterWidth,y=Math.floor(t.inChannels/4)*4,k=t.inChannels%4,C=t.dataFormat==="channelsLast",S=C?1:2,$=C?2:3,D=C?3:1;let R="",V="";s&&(i?R=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:r?R=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:R=`
          float activation(float x) {
            ${s}
          }
        `,V="result = activation(result);");const E=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${R}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${D}];

        ivec2 xRCCorner =
            ivec2(coords[${S}], coords[${$}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${g}; wR++) {
          int xR = xRCorner + wR * ${h};

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${m}; wC++) {
            int xC = xCCorner + wC * ${f};

            if (xC < 0 || xC >= ${t.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${y}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${C}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${k===1}) {

              if (${C}) {
                dotProd +=
                    getX(batch, xR, xC, ${y}) *
                    getW(wR, wC, ${y}, d2);
              } else {
                dotProd +=
                    getX(batch, ${y}, xR, xC) *
                    getW(wR, wC, ${y}, d2);
              }

            } else if (${k===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${y}, d2),
                getW(wR, wC, ${y} + 1, d2)
              );

              if (${C}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${y}),
                  getX(batch, xR, xC, ${y} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${y}, xR, xC),
                  getX(batch, ${y} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${k===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${y}, d2),
                getW(wR, wC, ${y} + 1, d2),
                getW(wR, wC, ${y} + 2, d2)
              );

              if (${C}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${y}),
                  getX(batch, xR, xC, ${y} + 1),
                  getX(batch, xR, xC, ${y} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${y}, xR, xC),
                  getX(batch, ${y} + 1, xR, xC),
                  getX(batch, ${y} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${E}
        ${V}
        setOutput(result);
      }
    `}}class Hst{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const e=t.padInfo.front,s=t.padInfo.top,i=t.padInfo.left,r=t.strideDepth,o=t.strideHeight,a=t.strideWidth,l=t.dilationDepth,u=t.dilationHeight,h=t.dilationWidth,f=t.filterDepth,g=t.filterHeight,m=t.filterWidth,y=Math.floor(t.inChannels/4)*4,k=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${r}, ${o}, ${a});
      const ivec3 pads = ivec3(${e}, ${s}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${f}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${g}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${m}; wC++) {
              int xC = xCCorner + wC * ${h};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${y}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${k===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${y}) *
                  getW(wF, wR, wC, ${y}, d2);
              } else if (${k===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${y}),
                  getX(batch, xF, xR, xC, ${y} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${y}, d2),
                  getW(wF, wR, wC, ${y} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${k===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${y}),
                  getX(batch, xF, xR, xC, ${y} + 1),
                  getX(batch, xF, xR, xC, ${y} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${y}, d2),
                  getW(wF, wR, wC, ${y} + 1, d2),
                  getW(wF, wR, wC, ${y} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class d${constructor(t,e=!1,s=null,i=!1,r=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=Ir(this.outputShape.length);const o=t.padInfo.left,a=t.strideWidth,l=t.dilationWidth,u=t.filterHeight,h=t.filterWidth,f=h;let g=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let C=0;C<h;C++)g+=`
           vec4 xTexelC${C*2};
           int xTexelC${C*2}Ready;
           vec4 xTexelC${C*2+1};
           int xTexelC${C*2+1}Ready;
           vec4 xC${C};`;g+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${t.inChannels}; d1 += 2) {
       `;for(let C=0;C<h;C++)g+=`
           xTexelC${C*2} = vec4(0.0);
           xTexelC${C*2}Ready = 0;
           xTexelC${C*2+1} = vec4(0.0);
           xTexelC${C*2+1}Ready = 0;
           xC${C} = vec4(0.0);`;g+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let C=0;C<(f+1)/2;C++){const S=C*2;if(g+=`
           xC = xCCorner + ${S*l};
           `,a===1){if(S<h&&(o%2===1?(g+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S}Ready == 0) {
                   xTexelC${S} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${S}.zw = vec2(0.0);
                   }
                   xTexelC${S}Ready = 1;
                 }
               `,l===1&&S>0?g+=`
                 xC${S} = vec4(xTexelC${S-2}.zw, xTexelC${S}.xy);
                 `:g+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${S} = vec4(previous.zw, xTexelC${S}.xy);
                   } else {
                     xC${S} = vec4(0.0, 0.0, xTexelC${S}.xy);
                   }
                   `):g+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${S}Ready == 0) {
                   xTexelC${S} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${S}.zw = vec2(0.0);
                   }
                   xTexelC${S}Ready = 1;
                 }

                 xC${S} = xTexelC${S};
                 `,S+1<h)){const $=o%2===0?ty(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(g+=`
                   xCOffset = xC + imod(pads[1], 2) + ${$};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                     xTexelC${S+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${S+1}.zw = vec2(0.0);
                     }
                     xTexelC${S+1}Ready = 1;
                   }
                   `,l>1?g+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${S+1} = vec4(previous.zw, xTexelC${S+1}.xy);
                     } else {
                      xC${S+1} = vec4(0.0, 0.0, xTexelC${S+1}.xy);
                     }
                     `:g+=`
                     xC${S+1} = vec4(xTexelC${S}.zw, xTexelC${S+1}.xy);
                     `):$===1?g+=`
                     xC${S+1} = xTexelC${S};
                     `:g+=`
                     xCOffset = xC + ${$};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                       xTexelC${S+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${S+1}.zw = vec2(0.0);
                       }
                       xTexelC${S+1}Ready = 1;
                     }

                     xC${S+1} = xTexelC${S+1};
                     `}}else S<h&&(o%2===1?(g+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S}Ready == 0) {
                   xTexelC${S} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${S}.zw = vec2(0.0);
                   }
                   xTexelC${S}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${S+1}Ready == 0) {
                   xTexelC${S+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${S+1}.zw = vec2(0.0);
                   }
                   xTexelC${S+1}Ready = 1;
                 }

                 xC${S} = vec4(xTexelC${S}.zw, xTexelC${S+1}.zw);
               `,S+1<h&&(g+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${S+1} = vec4(xTexelC${S+1}.xy, final.xy);
                 `)):(g+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${S}Ready == 0) {
                   xTexelC${S} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${S}.zw = vec2(0.0);
                   }
                   xTexelC${S}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                   xTexelC${S+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${S+1}.zw = vec2(0.);
                   }
                   xTexelC${S+1}Ready = 1;
                 }

                 xC${S} = vec4(
                   xTexelC${S}.xy, xTexelC${S+1}.xy);
               `,S+1<h&&(g+=`
                   xC${S+1} = vec4(xTexelC${S}.zw, xTexelC${S+1}.zw);
                 `)));S<h&&(g+=`
             wTexel = getW(r, ${S}, d1, d2);
             dotProd += xC${S}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${t.inChannels}) {
               dotProd += xC${S}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,S+1<h&&(g+=`
               wTexel = getW(r, ${S+1}, d1, d2);
               dotProd += xC${S+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${t.inChannels}) {
                 dotProd += xC${S+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}g+=`
     }
   `,g+=`
     }
   `,g+=`
     }
   `;let m="",y="";s&&(i?m=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${s}
         }`:r?m=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${s}
         }`:m=`vec4 activation(vec4 x) {
           ${s}
         }`,y="result = activation(result);");const k=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${m}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${g}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${k}
         ${y}
         setOutput(result);
       }
     `}}class jst{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=Ir(this.outputShape.length);const{dataFormat:s}=e,i=Vr(),r=s==="channelsLast",o=r?1:2,a=r?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${t[2]} && pos < ${t[1]}) {`;let u="";for(let h=0;h<=1;h++)for(let f=0;f<=1;f++)u+=`
          blockIndex = rc.z + ${f};
          pos = rc.y + ${h};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${r}) {
                  innerDims = vec2(d1, ch);
                  result[${h*2+f}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${h*2+f}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${i.output} = result;
      }
    `}}function d1(n,t){const e=n.length;return e>=3?t?[...n.slice(0,-3),n[e-3]*n[e-2],n[e-1]]:[...n.slice(0,-3),n[e-3],n[e-2]*n[e-1]]:!t&&e===1&&n[0]>1?[n[0],1]:null}function f$({x:n,filter:t,convInfo:e,backend:s,bias:i=null,preluActivationWeights:r=null,leakyreluAlpha:o=0,activation:a=null}){const l=n.shape,u=s.texData.get(n.dataId),h=e.inChannels,f=l[0]*l[1]*l[2],g=e.outChannels,m=e.dataFormat==="channelsLast",y=!1,k=!1;let C;const S=[];if(r!=null){const R=d1(r.shape,m);R!=null&&(r=qe({inputs:{x:r},backend:s,attrs:{shape:R}}),S.push(r))}if(i!=null){const R=d1(i.shape,m);R!=null&&(i=qe({inputs:{x:i},backend:s,attrs:{shape:R}}),S.push(i))}if(!((f===1||g===1)&&h>r$)&&u.isPacked&&m&&u.texture!=null&&l[2]%2!==0&&zs(u.shape.slice(-3),l.slice(-3))){const R=l[0]*l[1]*(l[2]+1),V={dataId:n.dataId,shape:[1,R,e.inChannels],dtype:n.dtype},E=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,wt(u1(u.shape,V.shape),()=>`packed reshape ${u.shape} to ${V.shape} isn't free`);const q=qe({inputs:{x:t},backend:s,attrs:{shape:[1,e.inChannels,e.outChannels]}});S.push(q);const X=h1({a:V,b:q,backend:s,transposeA:y,transposeB:k,bias:i,activation:a,preluActivationWeights:r,leakyreluAlpha:o}),B=s.texData.get(X.dataId);wt(B.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=E,B.shape=e.outShape,C=Eo({inputs:{x:X},backend:s}),C.shape=e.outShape,S.push(X)}else{const R=e.outHeight*e.outWidth,V=qe({inputs:{x:n},backend:s,attrs:{shape:m?[e.batchSize,R,e.inChannels]:[e.batchSize,e.inChannels,R]}}),E=qe({inputs:{x:t},backend:s,attrs:{shape:[1,e.inChannels,e.outChannels]}}),q=h1({a:m?V:E,b:m?E:V,transposeA:!m,transposeB:k,backend:s,bias:i,activation:a,preluActivationWeights:r,leakyreluAlpha:o});C=qe({inputs:{x:q},backend:s,attrs:{shape:e.outShape}}),S.push(V),S.push(E),S.push(q)}for(const R of S)s.disposeIntermediateTensorInfo(R);return C}function p$({x:n,filter:t,convInfo:e,backend:s,bias:i=null,preluActivationWeights:r=null,leakyreluAlpha:o=0,activation:a=null}){const{filterWidth:l,filterHeight:u,inChannels:h,outWidth:f,outHeight:g,dataFormat:m}=e,y=m==="channelsLast",k=l*u*h,C=g*f,S=[e.batchSize,k,C],$=!0,D=!1,R=[];if(r!=null){const Ot=d1(r.shape,y);Ot!=null&&(r=qe({inputs:{x:r},backend:s,attrs:{shape:Ot}}),R.push(r))}if(i!=null){const Ot=d1(i.shape,y);Ot!=null&&(i=qe({inputs:{x:i},backend:s,attrs:{shape:Ot}}),R.push(i))}const V=qe({inputs:{x:t},backend:s,attrs:{shape:[1,k,Ce(t.shape)/k]}});R.push(V);const E=new jst(S,e),q=[n.shape,[e.padInfo.top,e.padInfo.left],[e.strideHeight,e.strideWidth],[e.dilationHeight,e.dilationWidth],[e.inChannels],[e.filterWidth*e.inChannels],[e.outWidth]],X=s.runWebGLProgram(E,[n],"float32",q),B=qe({inputs:{x:X},backend:s,attrs:{shape:S}});R.push(X),R.push(B);const U=i!=null,K=r!=null,Y=a==="leakyrelu",ct=a?Rp(a,!0):null,j=new i$(y?B.shape:V.shape,y?V.shape:B.shape,y?[e.batchSize,C,e.outChannels]:[e.batchSize,e.outChannels,C],$,D,U,ct,K,Y),ht=y?[B,V]:[V,B];if(i&&ht.push(i),K&&ht.push(r),Y){const Ot=s.makeTensorInfo([],"float32",lu(o,"float32"));ht.push(Ot),R.push(Ot)}const It=s.runWebGLProgram(j,ht,"float32"),yt=qe({inputs:{x:It},backend:s,attrs:{shape:e.outShape}});R.push(It);for(const Ot of R)s.disposeIntermediateTensorInfo(Ot);return yt}function Xst(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,filter:r}=t,{strides:o,pad:a,dataFormat:l,dilations:u,dimRoundingMode:h}=s,f=dc(l),g=cr(i.shape,r.shape,o,u,a,h,!1,f);let m;if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))m=f$({x:i,filter:r,convInfo:g,backend:e});else if(g.strideWidth<=2&&f==="channelsLast"&&ge().getBool("WEBGL_EXP_CONV")){const k=new d$(g),C=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]];m=e.runWebGLProgram(k,[i,r],"float32",C)}else if(ge().getBool("WEBGL_CONV_IM2COL"))m=p$({x:i,filter:r,convInfo:g,backend:e});else{const k=new h$(g);m=e.runWebGLProgram(k,[i,r],"float32")}const y=qe({inputs:{x:m},backend:e,attrs:{shape:g.outShape}});return e.disposeIntermediateTensorInfo(m),y}const qst={kernelName:M1,backendName:"webgl",kernelFunc:Xst};class Kst{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const e=t.strideHeight,s=t.strideWidth,i=t.padInfo.top,r=t.padInfo.left,o=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${e} - ${i};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${r};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Yst{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterHeight,s=t.filterWidth,i=t.strideHeight,r=t.strideWidth,o=t.dataFormat==="channelsLast",a=e-1-t.padInfo.top,l=s-1-t.padInfo.left,u=o?1:2,h=o?2:3,f=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${f}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${h}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${e}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${e} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            for (int d2 = 0; d2 < ${t.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Zst{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const e=t.strideDepth,s=t.strideHeight,i=t.strideWidth,r=t.padInfo.front,o=t.padInfo.top,a=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yF = 0; yF < ${t.outDepth}; yF++) {
            int xF = wF + yF * ${e} - ${r};

            if (xF < 0 || xF >= ${t.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${t.outHeight}; yR++) {
              int xR = wR + yR * ${s} - ${o};

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${t.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${a};

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Jst{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterDepth,s=t.filterHeight,i=t.filterWidth,r=t.strideDepth,o=t.strideHeight,a=t.strideWidth,l=e-1-t.padInfo.front,u=s-1-t.padInfo.top,h=i-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${e}; wF++) {
          float dyF = float(dyFCorner + wF) / ${r}.0;

          if (dyF < 0.0 || dyF >= ${t.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${e} - 1 - wF;

          for (int wR = 0; wR < ${s}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${s} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${t.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}function Qst(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,dy:r}=t,{strides:o,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:h}=s,f=dc(l),g=cr(i.shape,h,o,1,a,u,!1,f),m=new Kst(g);return e.runWebGLProgram(m,[i,r],"float32")}const tit={kernelName:fy,backendName:"webgl",kernelFunc:Qst};class eit{constructor(t){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=t.inShape,this.enableShapeUniforms=Ir(this.outputShape.length);const e=t.filterHeight,s=t.filterWidth,i=e-1-t.padInfo.top,r=s-1-t.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${r});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${e}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${e} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            int wCPerm = ${s} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${t.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${t.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}function nit(n){const{inputs:t,backend:e,attrs:s}=n,{dy:i,filter:r}=t,{inputShape:o,strides:a,pad:l,dataFormat:u,dimRoundingMode:h}=s,f=dc(u),g=cr(o,r.shape,a,1,l,h,!1,f);if(ge().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&f==="channelsLast"){const m=[[g.strideHeight,g.strideWidth]],y=new eit(g);return e.runWebGLProgram(y,[i,r],"float32",m)}else{const m=new Yst(g);return e.runWebGLProgram(m,[i,r],"float32")}}const sit={kernelName:O1,backendName:"webgl",kernelFunc:nit};function iit(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,filter:r}=t,{strides:o,pad:a,dilations:l}=s,u=cu(i.shape,r.shape,o,l,a),h=new Hst(u);return e.runWebGLProgram(h,[i,r],"float32")}const rit={kernelName:F1,backendName:"webgl",kernelFunc:iit};function oit(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,dy:r}=t,{strides:o,pad:a,filterShape:l}=s,u=cu(i.shape,l,o,1,a),h=new Zst(u);return e.runWebGLProgram(h,[i,r],"float32")}const ait={kernelName:py,backendName:"webgl",kernelFunc:oit};function lit(n){const{inputs:t,backend:e,attrs:s}=n,{dy:i,filter:r}=t,{pad:o,strides:a,inputShape:l}=s,u=cu(l,r.shape,a,1,o),h=new Jst(u);return e.runWebGLProgram(h,[i,r],"float32")}const cit={kernelName:gy,backendName:"webgl",kernelFunc:lit};const uit=bf+`
  return cos(x);
`,hit=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Gh}
  return result;
`,dit=$s({opSnippet:uit,packedOpSnippet:hit}),fit={kernelName:e0,backendName:"webgl",kernelFunc:dit};const pit=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,git=$s({opSnippet:pit}),mit={kernelName:n0,backendName:"webgl",kernelFunc:git};class xit{constructor(t,e,s,i,r){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,l,u]=t,[h]=e,[f,g]=s;this.outputShape=[h,f,g,u];const m=i==="bilinear"?1:0,[y,k]=[`${a-1}.0`,`${l-1}.0`],[C,S,$]=f>1?[`${(a-1)/(f-1)}`,"(y2-y1) * height_ratio",`y1*${y} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${y}`],[D,R,V]=g>1?[`${(l-1)/(g-1)}`,"(x2-x1) * width_ratio",`x1*${k} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${k}`];this.userCode=`
      const float height_ratio = float(${C});
      const float width_ratio = float(${D});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${S};
        float width_scale = ${R};

        float in_y = ${$};
        if( in_y < 0.0 || in_y > ${y} ) {
          setOutput(float(${r}));
          return;
        }
        float in_x = ${V};
        if( in_x < 0.0 || in_x > ${k} ) {
          setOutput(float(${r}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${m} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}const bit=n=>{const{inputs:t,backend:e,attrs:s}=n,{image:i,boxes:r,boxInd:o}=t,{cropSize:a,method:l,extrapolationValue:u}=s,h=new xit(i.shape,r.shape,a,l,u);return e.runWebGLProgram(h,[i,r,o],"float32")},vit={kernelName:xy,backendName:"webgl",kernelFunc:bit};var Op;(function(n){n.Prod="*",n.Sum="+"})(Op||(Op={}));class dS{constructor(t,e,s,i){this.op=t,this.outputShape=e,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const r=this.outputShape.length,o=this.op===Op.Prod?"1.0":"0.0",a=s?o:`getX(${fS(r,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let u="",h="";s?(u=i?`end != ${l-1}`:"end != 0",h=i?"end + 1":"end - 1"):(u=i?`end + pow2 < ${l}`:"end >= pow2",h=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Zs(r)} coords = getOutputCoords();
        int end = ${pS(r,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${h};
          ${pS(r,"coords",this.op)} = idx;
          val ${this.op}= getX(${fS(r,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function fS(n,t,e){if(n===1)return`${t}`;if(n===2)return`${t}.x, ${t}.y`;if(n===3)return`${t}.x, ${t}.y, ${t}.z`;if(n===4)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw new Error(`Cumulative ${e} for rank ${n} is not yet supported`)}function pS(n,t,e){if(n===1)return`${t}`;if(n===2)return`${t}.y`;if(n===3)return`${t}.z`;if(n===4)return`${t}.w`;throw new Error(`Cumulative ${e} for rank ${n} is not yet supported`)}function g$(n,t,e,s,i,r){const o=t.shape.length,a=xi([s],o);let l=t;a!=null&&(l=Wr({inputs:{x:t},backend:e,attrs:{perm:a}}));const u=_i(1,o)[0];if(u!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${s}`);const h=l.shape[u];let f=Eo({inputs:{x:l},backend:e});for(let g=0;g<=Math.ceil(Math.log2(h))-1;g++){const m=new dS(n,l.shape,!1,r),y=[[g]],k=f;f=e.runWebGLProgram(m,[f],f.dtype,y),e.disposeIntermediateTensorInfo(k)}if(i){const g=new dS(n,l.shape,i,r),m=f;f=e.runWebGLProgram(g,[f],f.dtype),e.disposeIntermediateTensorInfo(m)}if(a!=null){const g=uu(a),m=Wr({inputs:{x:f},backend:e,attrs:{perm:g}});return e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(l),m}return f}function yit(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{axis:r,exclusive:o,reverse:a}=s;return g$(Op.Prod,i,e,r,o,a)}const wit={kernelName:my,backendName:"webgl",kernelFunc:yit};function kit(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{axis:r,exclusive:o,reverse:a}=s;return g$(Op.Sum,i,e,r,o,a)}const Cit={kernelName:P1,backendName:"webgl",kernelFunc:kit};function Sit(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,weights:r}=t,{size:o,binaryOutput:a}=s;if(i.shape.length===1){const l=e.readSync(i.dataId),u=e.readSync(r.dataId),h=KA(l,u,r.dtype,r.shape,o);return e.makeTensorInfo([o],r.dtype,h)}else if(i.shape.length===2){const l=e.bufferSync(i),u=e.bufferSync(r),h=Itt(l,u,o,a);return e.makeTensorInfo(h.shape,r.dtype,h.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const Tit={kernelName:by,backendName:"webgl",kernelFunc:Sit};class Iit{constructor(t,e,s){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=e,this.dataFormat=s,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${e};
      int offset_h = imod(h, ${e});
      int in_w = w / ${e};
      int offset_w = imod(w, ${e});
      int offset_d = (offset_h * ${e} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}function Eit(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{blockSize:r,dataFormat:o}=s,a=i.shape[0],l=o==="NHWC"?i.shape[1]:i.shape[2],u=o==="NHWC"?i.shape[2]:i.shape[3],h=o==="NHWC"?i.shape[3]:i.shape[1],f=l*r,g=u*r,m=h/(r*r),y=o==="NHWC"?[a,f,g,m]:[a,m,f,g],k=new Iit(y,r,o);return e.runWebGLProgram(k,[i],i.dtype)}const _it={kernelName:vy,backendName:"webgl",kernelFunc:Eit};class m${constructor(t,e=!1,s=null,i=!1,r=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=Ir(this.outputShape.length);const o=t.filterHeight,a=t.filterWidth,l=t.outChannels/t.inChannels;let u="",h="";s&&(i?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:r?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:u=`
          float activation(float x) {
            ${s}
          }
        `,h="result = activation(result);");const f=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${f}
        ${h}
        setOutput(result);
      }
    `}}class x${constructor(t,e=!1,s=null,i=!1,r=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=Ir(this.outputShape.length);const o=t.outChannels/t.inChannels,a=t.padInfo.left,l=t.strideWidth,u=t.dilationWidth,h=t.filterHeight,f=t.filterWidth,g=f;let m=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let S=0;S<f;S++)m+=`
          vec4 xTexelC${S*2};
          int xTexelC${S*2}Ready;
          vec4 xTexelC${S*2+1};
          int xTexelC${S*2+1}Ready;
          vec4 xC${S};`;m+=`
    for (int r = 0; r < ${h}; r++) {
      `;for(let S=0;S<f;S++)m+=`
          xTexelC${S*2} = vec4(0.0);
          xTexelC${S*2}Ready = 0;
          xTexelC${S*2+1} = vec4(0.0);
          xTexelC${S*2+1}Ready = 0;
          xC${S} = vec4(0.0);`;m+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let S=0;S<(g+1)/2;S++){const $=S*2;if(m+=`
          xC = xCCorner + ${$*u};
          `,l===1){if($<f&&(a%2===1?(m+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${$}Ready == 0) {
                  xTexelC${$} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${$}.zw = vec2(0.0);
                  }
                  xTexelC${$}Ready = 1;
                }
              `,u===1&&$>0?m+=`
                xC${$} = vec4(xTexelC${$-2}.zw, xTexelC${$}.xy);
                `:m+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${$} = vec4(previous.zw, xTexelC${$}.xy);
                  } else {
                    xC${$} = vec4(0.0, 0.0, xTexelC${$}.xy);
                  }
                  `):m+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${$}Ready == 0) {
                  xTexelC${$} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${$}.zw = vec2(0.0);
                  }
                  xTexelC${$}Ready = 1;
                }

                xC${$} = xTexelC${$};
                `,$+1<f)){const D=a%2===0?ty(u):u;u%2===0&&a%2===1||u%2!==0&&a%2!==1?(m+=`
                  xCOffset = xC + imod(pads[1], 2) + ${D};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${$+1}Ready == 0) {
                    xTexelC${$+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${$+1}.zw = vec2(0.0);
                    }
                    xTexelC${$+1}Ready = 1;
                  }
                  `,u>1?m+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${$+1} = vec4(previous.zw, xTexelC${$+1}.xy);
                    } else {
                     xC${$+1} = vec4(0.0, 0.0, xTexelC${$+1}.xy);
                    }
                    `:m+=`
                    xC${$+1} = vec4(xTexelC${$}.zw, xTexelC${$+1}.xy);
                    `):D===1?m+=`
                    xC${$+1} = xTexelC${$};
                    `:m+=`
                    xCOffset = xC + ${D};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${$+1}Ready == 0) {
                      xTexelC${$+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${$+1}.zw = vec2(0.0);
                      }
                      xTexelC${$+1}Ready = 1;
                    }

                    xC${$+1} = xTexelC${$+1};
                    `}}else $<f&&(a%2===1?(m+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${$}Ready == 0) {
                  xTexelC${$} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${$}.zw = vec2(0.0);
                  }
                  xTexelC${$}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${$+1}Ready == 0) {
                  xTexelC${$+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${$+1}.zw = vec2(0.0);
                  }
                  xTexelC${$+1}Ready = 1;
                }

                xC${$} = vec4(xTexelC${$}.zw, xTexelC${$+1}.zw);
              `,$+1<f&&(m+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${$+1} = vec4(xTexelC${$+1}.xy, final.xy);
                `)):(m+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${$}Ready == 0) {
                  xTexelC${$} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${$}.zw = vec2(0.0);
                  }
                  xTexelC${$}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${$+1}Ready == 0) {
                  xTexelC${$+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${$+1}.zw = vec2(0.);
                  }
                  xTexelC${$+1}Ready = 1;
                }

                xC${$} = vec4(
                  xTexelC${$}.xy, xTexelC${$+1}.xy);
              `,$+1<f&&(m+=`
                  xC${$+1} = vec4(xTexelC${$}.zw, xTexelC${$+1}.zw);
                `)));$<f&&(m+=`
            wTexel = getW(r, ${$}, d1, q);
            dotProd += xC${$} * vec4(wTexel.xz, wTexel.xz);
          `,$+1<f&&(m+=`
              wTexel = getW(r, ${$+1}, d1, q);
              dotProd += xC${$+1} * vec4(wTexel.xz, wTexel.xz);
            `))}m+=`
    }
  `,m+=`
      }
    `;let y="",k="";s&&(i?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:r?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:y=`vec4 activation(vec4 x) {
          ${s}
        }`,k="result = activation(result);");const C=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${y}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${m}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${C}
        ${k}
        setOutput(result);
      }
    `}}function Ait(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,filter:r}=t,{strides:o,pad:a,dilations:l,dimRoundingMode:u}=s;let h=l;h==null&&(h=[1,1]),wt(Sr(o,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${h}'`);const f=cr(i.shape,r.shape,o,h,a,u,!0);let g;ge().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?g=new x$(f):g=new m$(f);const m=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return e.runWebGLProgram(g,[i,r],"float32",m)}const $it={kernelName:L1,backendName:"webgl",kernelFunc:Ait};class Nit{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const e=t.strideHeight,s=t.strideWidth,i=t.padInfo.top,r=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${e} - ${i};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${r};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Dit{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterHeight,s=t.filterWidth,i=t.strideHeight,r=t.strideWidth,o=e-1-t.padInfo.top,a=s-1-t.padInfo.left,l=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${e}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${e} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}function Rit(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,dy:r}=t,{strides:o,dilations:a,pad:l,dimRoundingMode:u,filterShape:h}=s,f=cr(i.shape,h,o,a,l,u,!0),g=new Nit(f);return e.runWebGLProgram(g,[i,r],"float32")}const Mit={kernelName:yy,backendName:"webgl",kernelFunc:Rit};function Oit(n){const{inputs:t,backend:e,attrs:s}=n,{dy:i,filter:r}=t,{strides:o,dilations:a,pad:l,dimRoundingMode:u,inputShape:h}=s,f=cr(h,r.shape,o,a,l,u,!0),g=new Dit(f);return e.runWebGLProgram(g,[i,r],"float32")}const Fit={kernelName:wy,backendName:"webgl",kernelFunc:Oit};class Pit{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}function Lit(n){const{inputs:t,backend:e}=n,{x:s}=t,i=[...s.shape,...s.shape],r=Ce(s.shape),o=qe({inputs:{x:s},backend:e,attrs:{shape:[r]}}),a=new Pit(r),l=e.runWebGLProgram(a,[o],o.dtype),u=qe({inputs:{x:l},backend:e,attrs:{shape:i}});return e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(l),u}const Bit={kernelName:cI,backendName:"webgl",kernelFunc:Lit};class zit{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const{inHeight:e,inWidth:s,padInfo:i,strideHeight:r,strideWidth:o,filterHeight:a,filterWidth:l,dilationHeight:u,dilationWidth:h}=t,{top:f,left:g}=i;this.userCode=`
      const ivec2 strides = ivec2(${r}, ${o});
      const ivec2 pads = ivec2(${f}, ${g});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${e}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${h};

              if (wIn >= 0 && wIn < ${s}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}function Wit(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,filter:r}=t,{strides:o,pad:a,dilations:l}=s,u=z0(i.shape,r.shape,o,a,"NHWC",l);let h;const f=new zit(u);h=e.runWebGLProgram(f,[i,r],"float32");const g=qe({inputs:{x:h},backend:e,attrs:{shape:u.outShape}});return e.disposeIntermediateTensorInfo(h),g}const Vit={kernelName:B1,backendName:"webgl",kernelFunc:Wit};function Uit(n){const{inputs:t,backend:e,attrs:s}=n,{equation:i}=s,r=t,{allDims:o,summedDims:a,idDims:l}=Lw(i,r.length);zw(o.length,l,r);const{path:u,steps:h}=Ww(a,l),f=h.length;let g=null,m=o.length;const y=[];for(let k=0;k<f;++k){for(const C of h[k]){const{permutationIndices:S,expandDims:$}=Bw(m,l[C]);let D;Vw(S)?D=r[C]:(D=Wr({inputs:{x:r[C]},backend:e,attrs:{perm:S}}),y.push(D));const R=D.shape.slice();for(let V=0;V<$.length;++V)R.splice($[V],0,1);zs(D.shape,R)||(D=qe({inputs:{x:D},backend:e,attrs:{shape:R}}),y.push(D)),g===null?g=D:(g=$3({inputs:{a:D,b:g},backend:e}),y.push(g))}k<f-1&&(u[k]>=0&&(g=J2({inputs:{x:g},backend:e,attrs:{axis:u[k]-(o.length-m),keepDims:!1}}),y.push(g)),m--)}for(const k of y)k!==g&&e.disposeIntermediateTensorInfo(k);return g}const Git={kernelName:ky,backendName:"webgl",kernelFunc:Uit};const Hit="return (x >= 0.0) ? x : (exp(x) - 1.0);",jit=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Xit=$s({opSnippet:Hit,packedOpSnippet:jit}),qit={kernelName:i0,backendName:"webgl",kernelFunc:Xit};const Kit="return (b >= 0.0) ? a : a * (b + 1.0);",Yit=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,Zit=n=>{const{inputs:t,backend:e}=n,{dy:s,y:i}=t,r=ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new xf(Yit,s.shape,i.shape):new Rh(Kit,s.shape,i.shape);return e.runWebGLProgram(r,[s,i],s.dtype)},Jit={kernelName:Cy,backendName:"webgl",kernelFunc:Zit};const Qit=`
  return vec4(equal(a, b));
`,trt="return float(a == b);",ert=hr({opSnippet:trt,packedOpSnippet:Qit,dtype:"bool",cpuKernelImpl:Ntt}),nrt={kernelName:z1,backendName:"webgl",kernelFunc:ert};const srt=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${Nw};
  float a1 = ${Dw};
  float a2 = ${Rw};
  float a3 = ${Mw};
  float a4 = ${Ow};
  float a5 = ${Fw};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,irt=$s({opSnippet:srt}),rrt={kernelName:r0,backendName:"webgl",kernelFunc:irt};const ort=bf+`
  return exp(x);
`,art=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,b$=$s({opSnippet:ort,packedOpSnippet:art,cpuKernelImpl:Dtt,dtype:"float32"}),lrt={kernelName:o0,backendName:"webgl",kernelFunc:b$};function Nv(n){const{inputs:t,attrs:e,backend:s}=n,{dim:i}=e,{input:r}=t,o=r.shape.length,a=r.shape.slice();let l=i;return i<0&&(wt(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),a.splice(l,0,1),qe({inputs:{x:r},backend:s,attrs:{shape:a}})}const crt={kernelName:W1,backendName:"webgl",kernelFunc:Nv};const gS="return exp(x) - 1.0;",urt=$s({opSnippet:gS,packedOpSnippet:gS,cpuKernelImpl:Rtt}),hrt={kernelName:a0,backendName:"webgl",kernelFunc:urt};class mS{constructor(t,e,s){this.variableNames=["real","imag"];const i=e[1];this.outputShape=e;const r=s?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=s?`${i}.0`:"1.0";let a;if(t==="real")a="return real * expR - imag * expI;";else if(t==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${t}.`);this.userCode=`
      const float exponentMultiplier = ${r};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}function v$(n,t,e){const s=e.texData.get(n.dataId),i=Ce(n.shape),r=n.shape[n.shape.length-1],o=i/r,a=qe({inputs:{x:n},backend:e,attrs:{shape:[o,r]}}),l=a.shape,u=new mS("real",l,t),h=new mS("imag",l,t),f=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:l},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:l}],g=e.runWebGLProgram(u,f,"float32"),m=e.runWebGLProgram(h,f,"float32"),y=mu({inputs:{real:g,imag:m},backend:e});e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(m);const k=qe({inputs:{x:y},backend:e,attrs:{shape:n.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(y),k}function drt(n){const{inputs:t,backend:e}=n,{input:s}=t;return v$(s,!1,e)}const frt={kernelName:Sy,backendName:"webgl",kernelFunc:drt};class prt{constructor(t,e){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}function ag(n){const{backend:t,attrs:e}=n,{shape:s,value:i}=e;let{dtype:r}=e;if(r=r||nf(i),r==="string"){const o=Ti(r,Ce(s));return o.fill(i),t.makeTensorInfo(s,r,o)}else{const o=new prt(s,i),a=[[i]];return t.runWebGLProgram(o,[],r,a)}}const grt={kernelName:Ty,backendName:"webgl",kernelFunc:ag};class mrt{constructor(t){this.variableNames=["Image"],this.outputShape=[];const e=t[2];this.outputShape=t,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${e} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${e}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}const xrt={kernelName:Iy,backendName:"webgl",kernelFunc:({inputs:n,backend:t})=>{const{image:e}=n,s=t,i=new mrt(e.shape);return s.runWebGLProgram(i,[e],e.dtype)}};const xS="return floor(x);",brt=$s({opSnippet:xS,packedOpSnippet:xS,cpuKernelImpl:Mtt}),vrt={kernelName:l0,backendName:"webgl",kernelFunc:brt};const yrt=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,wrt=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,krt=hr({opSnippet:yrt,packedOpSnippet:wrt,dtype:"int32"}),Crt={kernelName:c0,backendName:"webgl",kernelFunc:krt};class Srt{constructor(t){this.variableNames=["A"];const e=Vr(),[s,i]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${s}.0);

        vec4 values = ${e.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}class Trt{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const e=Vr(),[s,i]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${s}.0);
            vec4 values = ${e.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${e.output} = result;
      }
    `}}const Irt={kernelName:UO,backendName:"webgl",kernelFunc:Ert};let Sd,Db=ge().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function Ert(n){const{inputs:t,backend:e,attrs:s}=n;let{pixels:i}=t;const{numChannels:r}=s,o=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[l,u]=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],h=[u,l],f=[u,l,r];if(a||o){const k=ge().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Sd==null||k!==Db)&&(Db=k,Sd=document.createElement("canvas").getContext("2d",{willReadFrequently:Db})),Sd.canvas.width=l,Sd.canvas.height=u,Sd.drawImage(i,0,0,l,u),i=Sd.canvas}const g=e.makeTensorInfo(h,"int32");e.texData.get(g.dataId).usage=Go.PIXELS,e.gpgpu.uploadPixelDataToTexture(e.getTexture(g.dataId),i);const m=ge().getBool("WEBGL_PACK")?new Trt(f):new Srt(f),y=e.runWebGLProgram(m,[g],"int32");return e.disposeData(g.dataId),y}function _rt(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,filter:r,bias:o,preluActivationWeights:a}=t,{strides:l,pad:u,dataFormat:h,dilations:f,dimRoundingMode:g,activation:m,leakyreluAlpha:y}=s,k=dc(h),C=cr(i.shape,r.shape,l,f,u,g,!1,k);let S;const $=[],D=o!=null,R=a!=null,V=m==="leakyrelu",E=()=>{const X=[i,r],B=(U,K)=>{if(K==="NCHW"&&U.shape.length===1&&U.shape[0]!==1){const Y=qe({inputs:{x:U},backend:e,attrs:{shape:[U.shape[0],1,1]}});return $.push(Y),Y}return U};if(D&&X.push(B(o,h)),R&&X.push(B(a,h)),V){const U=e.makeTensorInfo([],"float32",lu(y,"float32"));X.push(U),$.push(U)}return X};if(C.filterHeight===1&&C.filterWidth===1&&C.dilationHeight===1&&C.dilationWidth===1&&C.strideHeight===1&&C.strideWidth===1&&(C.padInfo.type==="SAME"||C.padInfo.type==="VALID"))S=f$({x:i,filter:r,convInfo:C,backend:e,bias:o,activation:m,preluActivationWeights:a,leakyreluAlpha:y});else if(C.strideWidth<=2&&k==="channelsLast"&&ge().getBool("WEBGL_EXP_CONV")){const X=m?Rp(m,!0):null,B=new d$(C,D,X,R,V),U=[[C.padInfo.top,C.padInfo.left],[C.strideHeight,C.strideWidth],[C.dilationHeight,C.dilationWidth],[C.inHeight,C.inWidth]],K=E();S=e.runWebGLProgram(B,K,"float32",U)}else if(ge().getBool("WEBGL_CONV_IM2COL"))S=p$({x:i,filter:r,convInfo:C,backend:e,bias:o,activation:m,preluActivationWeights:a,leakyreluAlpha:y});else{const X=m?Rp(m,!1):null,B=new h$(C,D,X,R,V),U=E();S=e.runWebGLProgram(B,U,"float32")}const q=qe({inputs:{x:S},backend:e,attrs:{shape:C.outShape}});return $.push(S),$.forEach(X=>e.disposeIntermediateTensorInfo(X)),q}const Art={kernelName:Vm,backendName:"webgl",kernelFunc:_rt};function $rt(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,filter:r,bias:o,preluActivationWeights:a}=t,{strides:l,pad:u,dilations:h,dimRoundingMode:f,activation:g,leakyreluAlpha:m}=s,y=[];let k=h;k==null&&(k=[1,1]),wt(Sr(l,k),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${k}'`);const C=cr(i.shape,r.shape,l,k,u,f,!0),S=ge().getBool("WEBGL_PACK_DEPTHWISECONV")&&C.strideWidth<=2&&C.outChannels/C.inChannels===1,$=g?Rp(g,S):null,D=[i,r],R=o!=null,V=a!=null,E=g==="leakyrelu";if(R&&D.push(o),V&&D.push(a),E){const U=e.makeTensorInfo([],"float32",lu(m,"float32"));D.push(U),y.push(U)}let q;S?q=new x$(C,R,$,V,E):q=new m$(C,R,$,V,E);const X=[[C.padInfo.top,C.padInfo.left],[C.strideHeight,C.strideWidth],[C.dilationHeight,C.dilationWidth],[C.inHeight,C.inWidth]],B=e.runWebGLProgram(q,D,"float32",X);return y.forEach(U=>e.disposeIntermediateTensorInfo(U)),B}const Nrt={kernelName:_I,backendName:"webgl",kernelFunc:$rt};class Drt{constructor(t,e,s,i){this.sliceDim=t,this.strides=e,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=s;const r=Zs(s.length);let o=`
    int index;`;for(let a=0;a<this.sliceDim;a++)o+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${r} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}function Rrt(n){const{inputs:t,backend:e}=n,{params:s,indices:i}=t,r=i.shape,o=r[r.length-1],a=Ce(s.shape),[l,u,h,f]=Sw(s,i),g=qe({inputs:{x:i},backend:e,attrs:{shape:[u,o]}}),m=qe({inputs:{x:s},backend:e,attrs:{shape:[Ce(s.shape)/h,h]}});if(e.shouldExecuteOnCPU([s,i])||s.dtype==="string"){const S=e.readSync(i.dataId),$=e.bufferSync(s),D=Ott(S,$,s.dtype,u,o,h,f,s.shape,a);return e.makeTensorInfo(l,s.dtype,D.values)}const y=new Drt(o,f,[u,h],s.shape),k=e.runWebGLProgram(y,[m,g],m.dtype),C=qe({inputs:{x:k},backend:e,attrs:{shape:l}});return e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(k),C}const Mrt={kernelName:uI,backendName:"webgl",kernelFunc:Rrt};class Ort{constructor(t,e){this.variableNames=["A","indices"],this.outputShape=e,this.rank=e.length;const s=Zs(this.rank),i=Frt(t);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${t[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}}function Frt(n,t){const e=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[];for(let i=0;i<n.length;i++)i===2?s.push("index"):s.push(`${e[i]}`);return s.join()}function y$(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,indices:r}=t,{axis:o,batchDims:a}=s,l=ds(o,i.shape)[0];if(ge().get("DEBUG")){const $=e.readSync(r.dataId),D=i.shape[l];for(let R=0;R<$.length;++R){const V=$[R];wt(V<=D-1&&V>=0,()=>`GatherV2: the index value ${V} is not in [0, ${D-1}]`)}}const u=hE(i,r,l,a),h=Ce(r.shape),f=[],g=qe({inputs:{x:i},backend:e,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),m=qe({inputs:{x:r},backend:e,attrs:{shape:[u.batchSize,h/u.batchSize]}});f.push(g),f.push(m);const y=[u.batchSize,u.outerSize,h/u.batchSize,u.sliceSize];if(e.shouldExecuteOnCPU([i,r])||i.dtype==="string"){const $=e.bufferSync(m),D=e.bufferSync(g),R=Ftt(D,$,y);return f.forEach(V=>e.disposeIntermediateTensorInfo(V)),e.makeTensorInfo(u.outputShape,R.dtype,R.values)}const k=new Ort(g.shape,y),C=e.runWebGLProgram(k,[g,m],g.dtype);f.push(C);const S=qe({inputs:{x:C},backend:e,attrs:{shape:u.outputShape}});return f.forEach($=>e.disposeIntermediateTensorInfo($)),S}const Prt={kernelName:U1,backendName:"webgl",kernelFunc:y$};const Lrt="return float(a > b);",Brt=`
  return vec4(greaterThan(a, b));
`,zrt=hr({opSnippet:Lrt,packedOpSnippet:Brt,cpuKernelImpl:Ptt,dtype:"bool"}),Wrt={kernelName:G1,backendName:"webgl",kernelFunc:zrt};const Vrt="return float(a >= b);",Urt=`
  return vec4(greaterThanEqual(a, b));
`,Grt=hr({opSnippet:Vrt,packedOpSnippet:Urt,dtype:"bool",cpuKernelImpl:Ltt}),Hrt={kernelName:u0,backendName:"webgl",kernelFunc:Grt};function jrt(n){const{inputs:t,backend:e}=n,{input:s}=t;return v$(s,!0,e)}const Xrt={kernelName:Ey,backendName:"webgl",kernelFunc:jrt};const qrt="return float(!isnan(x) && !isinf(x));",Krt=$s({opSnippet:qrt,dtype:"bool"}),Yrt={kernelName:d0,backendName:"webgl",kernelFunc:Krt};const Zrt="return float(isinf(x));",Jrt=$s({opSnippet:Zrt,dtype:"bool"}),Qrt={kernelName:f0,backendName:"webgl",kernelFunc:Jrt};const tot="return float(isnan(x));",eot=$s({opSnippet:tot,dtype:"bool"}),not={kernelName:p0,backendName:"webgl",kernelFunc:eot};const sot="return float(a < b);",iot=`
  return vec4(lessThan(a, b));
`,rot=hr({opSnippet:sot,packedOpSnippet:iot,cpuKernelImpl:Btt,dtype:"bool"}),oot={kernelName:j1,backendName:"webgl",kernelFunc:rot};const aot="return float(a <= b);",lot=`
  return vec4(lessThanEqual(a, b));
`,cot=hr({opSnippet:aot,packedOpSnippet:lot,cpuKernelImpl:ztt,dtype:"bool"}),uot={kernelName:X1,backendName:"webgl",kernelFunc:cot};function hot(n){const{backend:t,attrs:e}=n,{start:s,stop:i,num:r}=e,o=Wtt(s,i,r);return t.makeTensorInfo([o.length],"float32",o)}const dot={kernelName:hI,backendName:"webgl",kernelFunc:hot};const fot=bf+`
  return x < 0.0 ? 0./0. : log(x);
`,pot=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,got=$s({opSnippet:fot,packedOpSnippet:pot,cpuKernelImpl:Vtt}),mot={kernelName:g0,backendName:"webgl",kernelFunc:got};const xot=bf+`
  return log(1.0 + x);
`,bot=$s({opSnippet:xot}),vot={kernelName:m0,backendName:"webgl",kernelFunc:bot};const yot="return float(a >= 1.0 && b >= 1.0);",wot=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,kot=hr({opSnippet:yot,packedOpSnippet:wot,dtype:"bool"}),Cot={kernelName:q1,backendName:"webgl",kernelFunc:kot};const Sot="return float(!(x >= 1.0));",Tot=$s({opSnippet:Sot}),Iot={kernelName:K1,backendName:"webgl",kernelFunc:Tot};const Eot="return float(a >= 1.0 || b >= 1.0);",_ot=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,Aot=hr({opSnippet:Eot,packedOpSnippet:_ot,dtype:"bool"}),$ot={kernelName:Y1,backendName:"webgl",kernelFunc:Aot};class Not{constructor(t,e,s,i,r){this.variableNames=["x"],this.outputShape=[];const o=e,a=t[3]-1;this.outputShape=t;let l;const u=`float(${s}) + float(${i}) * sum`;r===.5?l=`inversesqrt(${u})`:r===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${r}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}class Dot{constructor(t,e,s,i,r){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=e,a=t[3]-1;this.outputShape=t;let l;const u=`float(${s}) + float(${i}) * sum`;r===.5?l=`inversesqrt(${u})`:r===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${r}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}const Rot=n=>{const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{depthRadius:r,bias:o,alpha:a,beta:l}=s,u=ge().getBool("WEBGL_PACK_NORMALIZATION")?new Dot(i.shape,r,o,a,l):new Not(i.shape,r,o,a,l);return e.runWebGLProgram(u,[i],i.dtype)},Mot={kernelName:Z1,backendName:"webgl",kernelFunc:Rot};class Oot{constructor(t,e,s,i,r){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=s,this.alpha=i,this.beta=r,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${e})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${e} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${s});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${r})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${r});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}const Fot=n=>{const{inputs:t,backend:e,attrs:s}=n,{x:i,y:r,dy:o}=t,{depthRadius:a,bias:l,alpha:u,beta:h}=s,f=new Oot(i.shape,a,l,u,h);return e.runWebGLProgram(f,[i,r,o],i.dtype)},Pot={kernelName:Ay,backendName:"webgl",kernelFunc:Fot};function Lot(n,t,e,s){const i=Ce(t),o=Ce(n.shape)/i,a=qe({inputs:{x:n},attrs:{shape:[o,i]},backend:s}),l=Hh(a,n.dtype,"max",s),u=qe({inputs:{x:l},attrs:{shape:e},backend:s});return s.disposeIntermediateTensorInfo(a),s.disposeIntermediateTensorInfo(l),u}function w$(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{reductionIndices:r,keepDims:o}=s,a=i.shape.length,l=ds(r,i.shape);let u=l;const h=xi(u,a),f=h!=null,g=e.shouldExecuteOnCPU([i]);let m=i;if(f){if(g){const D=e.texData.get(m.dataId).values,R=new Array(a);for(let q=0;q<R.length;q++)R[q]=i.shape[h[q]];const V=_3(D,i.shape,i.dtype,h,R);m=e.makeTensorInfo(R,i.dtype);const E=e.texData.get(m.dataId);E.values=V}else m=Z2(i,h,e);u=_i(u.length,a)}ur("max",u,a);const[y,k]=tr(m.shape,u);let C=y;o&&(C=Fi(y,l));let S;if(g){const D=e.texData.get(m.dataId).values,R=Utt(D,Ce(k),C,i.dtype);S=e.makeTensorInfo(C,i.dtype);const V=e.texData.get(S.dataId);V.values=R}else S=Lot(m,k,C,e);return f&&e.disposeIntermediateTensorInfo(m),S}const Bot={kernelName:J1,backendName:"webgl",kernelFunc:w$};const zot=A3+`
  return max(a, b);
`,Wot=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Gh+`
  return result;
`,Vot=hr({opSnippet:zot,packedOpSnippet:Wot,cpuKernelImpl:Gtt}),Uot={kernelName:x0,backendName:"webgl",kernelFunc:Vot};function Got(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t;ig(i,"maxPool");const{filterSize:r,strides:o,pad:a,dimRoundingMode:l}=s,u=1;wt(Sr(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const h=ga(i.shape,r,o,u,a,l);if(h.filterWidth===1&&h.filterHeight===1&&zs(h.inShape,h.outShape))return Eo({inputs:{x:i},backend:e});const f=new Mp(h,"max",!1);return e.runWebGLProgram(f,[i],i.dtype)}const Hot={kernelName:Q1,backendName:"webgl",kernelFunc:Got};function jot(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{filterSize:r,strides:o,pad:a,dataFormat:l,dimRoundingMode:u}=s,h=[1,1,1],f=hc(i.shape,r,o,h,a,u,l),g=new N3(f,"max",!1);return e.runWebGLProgram(g,[i],i.dtype)}const Xot={kernelName:t2,backendName:"webgl",kernelFunc:jot};class qot{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const e=t.strideHeight,s=t.strideWidth,i=t.dilationHeight,r=t.effectiveFilterHeight,o=t.effectiveFilterWidth,a=r-1-t.padInfo.top,l=o-1-t.padInfo.left,u=r*o-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${r};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${e}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class Kot{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const e=t.strideDepth,s=t.strideHeight,i=t.strideWidth,r=t.dilationDepth,o=t.dilationHeight,a=t.dilationWidth,l=t.effectiveFilterDepth,u=t.effectiveFilterHeight,h=t.effectiveFilterWidth,f=l-1-t.padInfo.front,g=u-1-t.padInfo.top,m=h-1-t.padInfo.left,y=l*u*h-1;this.userCode=`
      const ivec3 pads = ivec3(${f}, ${g}, ${m});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${r}) {
          float dyD = float(dyDCorner + wD) / ${e}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${y} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${h} +
                  wR * ${h} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}function Yot(n){const{inputs:t,backend:e,attrs:s}=n,{dy:i,input:r}=t,o=r,{filterSize:a,strides:l,pad:u,dimRoundingMode:h}=s,f=[1,1,1],g=hc(o.shape,a,l,f,u,h),m=new N3(g,"max",!0),y=e.runWebGLProgram(m,[o],o.dtype),k=new Kot(g),C=e.runWebGLProgram(k,[i,y],o.dtype);return e.disposeIntermediateTensorInfo(y),C}const Zot={kernelName:Ny,backendName:"webgl",kernelFunc:Yot};function Jot(n){const{inputs:t,backend:e,attrs:s}=n,{dy:i,input:r,output:o}=t,a=r;ig([r,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:h,dimRoundingMode:f}=s,g=ga(a.shape,l,u,1,h,f),m=!0,y=new Mp(g,"max",m),k=e.runWebGLProgram(y,[a],a.dtype),C=new qot(g),S=e.runWebGLProgram(C,[i,k],a.dtype);return e.disposeIntermediateTensorInfo(k),S}const Qot={kernelName:$y,backendName:"webgl",kernelFunc:Jot};function tat(n,t,e,s){let i=new Mp(e,"max",!1);const r=s.runWebGLProgram(i,[n],"float32");i=new Mp(e,"max",!0,!0,t);const o=s.runWebGLProgram(i,[n],"float32");return[r,o]}const eat={kernelName:dI,backendName:"webgl",kernelFunc:({inputs:n,attrs:t,backend:e})=>{const{x:s}=n,{filterSize:i,strides:r,pad:o,includeBatchInIndex:a}=t,l=e;wt(s.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.shape.length}.`);const u=[1,1];wt(Sr(r,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${r} and dilations '${u}'`);const h=ga(s.shape,i,r,u,o),[f,g]=tat(s,a,h,l);return[f,g]}};function nat(n,t,e,s){const i=Ce(t),o=Ce(n.shape)/i,a=qe({inputs:{x:n},attrs:{shape:[o,i]},backend:s}),l=Hh(a,"float32","mean",s),u=qe({inputs:{x:l},attrs:{shape:e},backend:s});return s.disposeIntermediateTensorInfo(a),s.disposeIntermediateTensorInfo(l),u}const sat={kernelName:e2,backendName:"webgl",kernelFunc:({inputs:n,attrs:t,backend:e})=>{const{x:s}=n,{keepDims:i,axis:r}=t,o=e,a=s.shape.length,l=ds(r,s.shape);let u=l;const h=xi(u,a),f=h!=null,g=o.shouldExecuteOnCPU([s]),m=[];let y=s;if(f){if(g){const R=o.texData.get(y.dataId).values,V=new Array(a);for(let X=0;X<V.length;X++)V[X]=s.shape[h[X]];const E=_3(R,s.shape,s.dtype,h,V);y=o.makeTensorInfo(V,s.dtype);const q=o.texData.get(y.dataId);q.values=E}else y=Z2(s,h,o);m.push(y),u=_i(u.length,a)}ur("sum",u,a);const[k,C]=tr(y.shape,u);let S=k;i&&(S=Fi(k,l));const $=nat(y,C,S,o);for(const D of m)o.disposeIntermediateTensorInfo(D);return $}};function iat(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{axis:r,keepDims:o}=s,a=i.shape.length,l=ds(r,i.shape);let u=l;const h=xi(u,a);let f=i;h!=null&&(f=Wr({inputs:{x:i},backend:e,attrs:{perm:h}}),u=_i(u.length,i.shape.length)),ur("min",u,a);const[g,m]=tr(f.shape,u),y=Ce(m),k=qe({inputs:{x:f},backend:e,attrs:{shape:[-1,y]}}),C=Hh(k,k.dtype,"min",e);let S;if(o){const $=Fi(g,l);S=qe({inputs:{x:C},backend:e,attrs:{shape:$}})}else S=qe({inputs:{x:C},backend:e,attrs:{shape:g}});return e.disposeIntermediateTensorInfo(k),e.disposeIntermediateTensorInfo(C),h!=null&&e.disposeIntermediateTensorInfo(f),S}const rat={kernelName:n2,backendName:"webgl",kernelFunc:iat};const oat=A3+`
  return min(a, b);
`,aat=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Gh+`
  return result;
`,lat=hr({opSnippet:oat,packedOpSnippet:aat,cpuKernelImpl:Htt}),cat={kernelName:b0,backendName:"webgl",kernelFunc:lat};class uat{constructor(t,e,s){this.variableNames=["x"],this.outputShape=e.map((h,f)=>h[0]+t[f]+h[1]);const i=t.length,r=Zs(i),o=e.map(h=>h[0]).join(","),a=e.map((h,f)=>h[0]+t[f]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),u=s==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${r} start = ${r}(${o});
      ${r} end = ${r}(${a});

      void main() {
        ${r} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${r} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}class hat{constructor(t,e,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((y,k)=>y[0]+t[k]+y[1]);const i=t.length,r=Zs(i),o=e.map(y=>y[0]).join(","),a=e.map((y,k)=>y[0]+t[k]).join(","),l=Lr("rc",i),u=Lr("source",i),h=`${l[i-1]} < ${this.outputShape[i-1]}`,f=i===1?"source":`vec2(${u.slice(-2).join()})`,g=s==="reflect"?0:1;let m="";if(i===1){const y=`
        ${r} source = rc;
        if (source < start) {
          source = start * 2 - source - ${g};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${g};
        }
        source -= start;
      `;m=`
        ${r} rc = outputLoc;
        ${y}
        result[0] = getChannel(getX(${u.join()}), ${f});
        ${l[i-1]} += 1;
        if(${h}) {
          ${y}
          result[1] = getChannel(getX(${u.join()}), ${f});
        }
      `}else{const y=`
        ${r} source = rc;
        ${r} lt = ${r}(lessThan(source, start));
        ${r} gte = ${r}(greaterThanEqual(source, end));
        ${r} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${g}) +
                gte * ((end - 1) * 2 - source + ${g});
        source -= start;
      `;m=`
        ${r} rc = outputLoc;
        ${y}
        result[0] = getChannel(getX(${u.join()}), ${f});
        ${l[i-1]} += 1;
        if(${h}) {
          ${y}
          result[1] = getChannel(getX(${u.join()}), ${f});
        }
        rc = outputLoc;
        ${l[i-2]} += 1;
        if(${l[i-2]} < ${this.outputShape[i-2]}) {
          ${y}
          result[2] = getChannel(getX(${u.join()}), ${f});
          ${l[i-1]} += 1;
          if(${h}) {
            ${y}
            result[3] = getChannel(getX(${u.join()}), ${f});
          }
        }
      `}this.userCode=`
      const ${r} start = ${r}(${o});
      const ${r} end = ${r}(${a});

      void main() {
        ${r} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}}const dat=({inputs:n,backend:t,attrs:e})=>{const{x:s}=n,{paddings:i,mode:r}=e,o=ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new hat(s.shape,i,r):new uat(s.shape,i,r);return t.runWebGLProgram(o,[s],s.dtype)},fat={kernelName:s2,backendName:"webgl",kernelFunc:dat};const pat=`if (b == 0.0) return NAN;
  return mod(a, b);`,gat=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Gh+`
  return result;
`,mat=hr({opSnippet:pat,packedOpSnippet:gat}),xat={kernelName:v0,backendName:"webgl",kernelFunc:mat};class bat{constructor(t,e,s){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,s],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${e-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${e-1}));
      }
    `}}const vat=`
if (a == b) {
  return 1.0;
};
return a / b;`,yat=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,k$=hr({opSnippet:vat,packedOpSnippet:yat,checkOutOfBounds:!0}),wat={kernelName:s0,backendName:"webgl",kernelFunc:k$};const bS="return a - b;",C$=hr({opSnippet:bS,packedOpSnippet:bS,supportsComplex:!0,cpuKernelImpl:fet}),kat={kernelName:O0,backendName:"webgl",kernelFunc:C$};function S$(n){const{inputs:t,backend:e,attrs:s}=n,{logits:i}=t,{dim:r}=s,o=ds([r],i.shape),a=w$({inputs:{x:i},backend:e,attrs:{reductionIndices:o,keepDims:!1}}),l=Fi(a.shape,o),u=qe({inputs:{x:a},backend:e,attrs:{shape:l}}),h=C$({inputs:{a:i,b:u},backend:e}),f=b$({inputs:{x:h},backend:e}),g=J2({inputs:{x:f},backend:e,attrs:{axis:o,keepDims:!1}}),m=qe({inputs:{x:g},backend:e,attrs:{shape:l}}),y=k$({inputs:{a:f,b:m},backend:e});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(m),y}const Cat={kernelName:w2,backendName:"webgl",kernelFunc:S$};function Sat(n){const{inputs:t,backend:e,attrs:s}=n,{logits:i}=t,{numSamples:r,seed:o,normalized:a}=s,l=a?i:S$({inputs:{logits:i},backend:e,attrs:{dim:i.shape.length-1}}),u=l.shape[0],h=l.shape[1],f=new bat(u,h,r),g=[[o]],m=e.runWebGLProgram(f,[l],"int32",g);return a||e.disposeIntermediateTensorInfo(l),m}const Tat={kernelName:fI,backendName:"webgl",kernelFunc:Sat};const Iat=xa+`
  return -x;
`,Eat=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function _at(n){const{inputs:t,backend:e}=n,{x:s}=t;if(e.shouldExecuteOnCPU([s])){const r=e.texData.get(s.dataId),[o,a]=Xtt(r.values,s.shape,s.dtype);return e.makeTensorInfo(a,s.dtype,o)}let i;return ge().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new Gc(s.shape,Eat):i=new gl(s.shape,Iat),e.runWebGLProgram(i,[s],s.dtype)}const Aat={kernelName:i2,backendName:"webgl",kernelFunc:_at};const $at=vw;function Nat(n){Uo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:e,attrs:s}=n,{boxes:i,scores:r}=t,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=s,u=e.readSync(i.dataId),h=e.readSync(r.dataId),{selectedIndices:f}=$at(u,h,o,a,l);return e.makeTensorInfo([f.length],"int32",new Int32Array(f))}const Dat={kernelName:Dy,backendName:"webgl",kernelFunc:Nat};const Rat=yw;function Mat(n){Uo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:e,attrs:s}=n,{boxes:i,scores:r}=t,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=s,h=e.readSync(i.dataId),f=e.readSync(r.dataId),{selectedIndices:g,validOutputs:m}=Rat(h,f,o,a,l,u);return[e.makeTensorInfo([g.length],"int32",new Int32Array(g)),e.makeTensorInfo([],"int32",new Int32Array([m]))]}const Oat={kernelName:Ry,backendName:"webgl",kernelFunc:Mat};const Fat=ww;function Pat(n){Uo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:e,attrs:s}=n,{boxes:i,scores:r}=t,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=s,h=e.readSync(i.dataId),f=e.readSync(r.dataId),g=o,m=a,y=l,k=u,{selectedIndices:C,selectedScores:S}=Fat(h,f,g,m,y,k);return[e.makeTensorInfo([C.length],"int32",new Int32Array(C)),e.makeTensorInfo([S.length],"float32",new Float32Array(S))]}const Lat={kernelName:My,backendName:"webgl",kernelFunc:Pat};class Bat{constructor(t,e,s,i){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${s}),
                      float(index == coords.y)));
      }
    `}}const zat=n=>{const{inputs:t,backend:e,attrs:s}=n,{indices:i}=t,{dtype:r,depth:o,onValue:a,offValue:l}=s,u=Ce(i.shape),h=new Bat(u,o,a,l),f=qe({inputs:{x:i},backend:e,attrs:{shape:[u]}}),g=e.runWebGLProgram(h,[f],r);e.disposeIntermediateTensorInfo(f);const m=[...i.shape,o],y=qe({inputs:{x:g},backend:e,attrs:{shape:m}});return e.disposeIntermediateTensorInfo(g),y},Wat={kernelName:a2,backendName:"webgl",kernelFunc:zat};function f1(n){const{inputs:t,backend:e}=n,{x:s}=t;if(s.dtype==="complex64"){const i=og({inputs:{input:s},backend:e}),r=f1({inputs:{x:i},backend:e}),o=Q2({inputs:{input:s},backend:e}),a=f1({inputs:{x:o},backend:e}),l=mu({inputs:{real:r,imag:a},backend:e});return e.disposeIntermediateTensorInfo(i),e.disposeIntermediateTensorInfo(r),e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(a),l}else return ag({attrs:{shape:s.shape,dtype:s.dtype,value:s.dtype==="string"?"":0},backend:e})}const Vat={kernelName:S2,backendName:"webgl",kernelFunc:f1};function T$(n){const{inputs:t,backend:e}=n,{x:s}=t;if(s.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(s.dtype==="complex64"){const i=og({inputs:{input:s},backend:e}),r=T$({inputs:{x:i},backend:e}),o=Q2({inputs:{input:s},backend:e}),a=f1({inputs:{x:o},backend:e}),l=mu({inputs:{real:r,imag:a},backend:e});return e.disposeIntermediateTensorInfo(i),e.disposeIntermediateTensorInfo(r),e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(a),l}else return ag({attrs:{shape:s.shape,dtype:s.dtype,value:1},backend:e})}const Uat={kernelName:o2,backendName:"webgl",kernelFunc:T$};function Gat(n){const{inputs:t,backend:e,attrs:s}=n,{axis:i}=s;if(t.length===1)return Nv({inputs:{input:t[0]},backend:e,attrs:{dim:i}});const r=t[0].shape,o=t[0].dtype;t.forEach(h=>{ey(r,h.shape,"All tensors passed to stack must have matching shapes"),wt(o===h.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=t.map(h=>{const f=Nv({inputs:{input:h},backend:e,attrs:{dim:i}});return a.push(f),f}),u=u$({inputs:l,backend:e,attrs:{axis:i}});return a.forEach(h=>e.disposeIntermediateTensorInfo(h)),u}const Hat={kernelName:l2,backendName:"webgl",kernelFunc:Gat};class jat{constructor(t,e,s){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map((u,h)=>u[0]+t[h]+u[1]);const i=t.length,r=Zs(i),o=e.map(u=>u[0]).join(","),a=e.map((u,h)=>u[0]+t[h]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${r} start = ${r}(${o});
      ${r} end = ${r}(${a});

      void main() {
        ${r} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${r} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}class Xat{constructor(t,e,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map((k,C)=>k[0]+t[C]+k[1]);const i=t.length,r=Zs(i),o=e.map(k=>k[0]).join(","),a=e.map((k,C)=>k[0]+t[C]).join(","),l=Lr("rc",i),u=Lr("source",i),h=`${l[i-1]} < ${this.outputShape[i-1]}`,f=i===1?"source":`vec2(${u.slice(-2).join()})`,g=[`${r} rc = outputLoc;`,`${l[i-1]} += 1;
       if(${h}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${l[i-2]} += 1;
       if(${l[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${l[i-1]} += 1;
         if(${h}) {`],m=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let y="";for(let k=0,C=i===1?2:4;k<C;k++)y+=`
        ${g[k]}
        if (${m}) {
          result[${k}] = float(value);
        } else {
          ${r} source = rc - start;
          result[${k}] = getChannel(getX(${u.join()}), ${f});
        }
      `;y+=i===1?"} ":"}}",this.userCode=`
      const ${r} start = ${r}(${o});
      const ${r} end = ${r}(${a});

      void main() {
        ${r} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${y}
        setOutput(result);
      }
    `}}const I$=n=>{const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{paddings:r,constantValue:o}=s;if(Ce(i.shape)===0){const u=r.map((h,f)=>h[0]+i.shape[f]+h[1]);return ag({backend:e,attrs:{shape:u,value:o,dtype:i.dtype}})}const a=ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Xat(i.shape,r,o):new jat(i.shape,r,o),l=[[o]];return e.runWebGLProgram(a,[i],i.dtype,l)},qat={kernelName:c2,backendName:"webgl",kernelFunc:I$};const Kat=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,Yat=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Gh+`
  return result;
`,Zat=hr({opSnippet:Kat,packedOpSnippet:Yat}),Jat={kernelName:w0,backendName:"webgl",kernelFunc:Zat};function Qat(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{axis:r,keepDims:o}=s,a=i.shape.length,l=[],u=ds(r,i.shape);let h=u;const f=xi(h,a);let g=i;f!=null&&(g=Wr({inputs:{x:i},backend:e,attrs:{perm:f}}),h=_i(h.length,a),l.push(g)),ur("prod",h,a);let m;if(e.shouldExecuteOnCPU([g])){const y=e.texData.get(g.dataId).values,{outVals:k,outShape:C,outDtype:S}=Ktt(g.shape,g.dtype,y,h);m=e.makeTensorInfo(C,S,k)}else{const[y,k]=tr(g.shape,h),C=Ce(k),S=qe({inputs:{x:g},backend:e,attrs:{shape:[-1,C]}}),$=jy(i.dtype),D=Hh(S,$,"prod",e);m=qe({inputs:{x:D},backend:e,attrs:{shape:y}}),l.push(S),l.push(D)}if(o){l.push(m);const y=Fi(m.shape,u);m=qe({inputs:{x:m},backend:e,attrs:{shape:y}})}return l.forEach(y=>e.disposeIntermediateTensorInfo(y)),m}const tlt={kernelName:h2,backendName:"webgl",kernelFunc:Qat};function elt(n){const{inputs:t,backend:e,attrs:s}=n,{paramsNestedSplits:i,paramsDenseValues:r,indices:o}=t,{outputRaggedRank:a}=s,l=i.map(S=>e.readSync(S.dataId)),u=i.map(S=>S.shape),h=e.readSync(r.dataId),f=e.readSync(o.dataId),[g,m,y]=Ytt(l,u,h,r.shape,r.dtype,f,o.shape,a),k=g.map(S=>e.makeTensorInfo([S.length],"int32",S)),C=e.makeTensorInfo(y,r.dtype,m);return k.concat([C])}const nlt={kernelName:pI,backendName:"webgl",kernelFunc:elt};function slt(n){const{inputs:t,backend:e}=n,{starts:s,limits:i,deltas:r}=t,o=e.readSync(s.dataId),a=e.readSync(i.dataId),l=e.readSync(r.dataId),[u,h]=Ztt(o,s.shape,s.dtype,a,i.shape,l,r.shape),f=e.makeTensorInfo([u.length],"int32",u),g=e.makeTensorInfo([h.length],s.dtype,h);return[f,g]}const ilt={kernelName:gI,backendName:"webgl",kernelFunc:slt};function rlt(n){const{inputs:t,backend:e,attrs:s}=n,{shape:i,values:r,defaultValue:o,rowPartitionTensors:a}=t,{rowPartitionTypes:l}=s,u=e.readSync(i.dataId),h=e.readSync(r.dataId),f=e.readSync(o.dataId),g=a.map(C=>e.readSync(C.dataId)),m=a.map(C=>C.shape),[y,k]=Jtt(u,i.shape,h,r.shape,r.dtype,f,o.shape,g,m,l);return e.makeTensorInfo(y,r.dtype,k)}const olt={kernelName:mI,backendName:"webgl",kernelFunc:rlt};const E$=n=>{const{backend:t,attrs:e}=n,{start:s,stop:i,step:r,dtype:o}=e,a=Qtt(s,i,r,o);return t.makeTensorInfo([a.length],o,a)},alt={kernelName:Oy,backendName:"webgl",kernelFunc:E$};const llt="return 1.0 / x;",clt=$s({opSnippet:llt}),ult={kernelName:k0,backendName:"webgl",kernelFunc:clt};const hlt=xa+`
  return (x < 0.0) ? 0.0 : x;
`,dlt=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,flt=$s({opSnippet:hlt,packedOpSnippet:dlt}),plt={kernelName:C0,backendName:"webgl",kernelFunc:flt};const glt=xa+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,mlt=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,xlt=$s({opSnippet:glt,packedOpSnippet:mlt}),blt={kernelName:S0,backendName:"webgl",kernelFunc:xlt};class vlt{constructor(t,e,s,i,r){this.variableNames=["A"],this.outputShape=[];const[o,a,l,u]=t;this.outputShape=[o,e,s,u];const h=[i&&e>1?a-1:a,i&&s>1?l-1:l],f=[i&&e>1?e-1:e,i&&s>1?s-1:s];let g;r?g="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":g="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${h[0]/f[0]},
          ${h[1]/f[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${g};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}class ylt{constructor(t,e,s,i,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,u]=t;this.outputShape=[o,e,s,u];const h=[i&&e>1?a-1:a,i&&s>1?l-1:l],f=[i&&e>1?e-1:e,i&&s>1?s-1:s];let g;r?g="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":g="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${h[0]/f[0]},
          ${h[1]/f[1]},
          ${h[1]/f[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${g};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${s-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}function wlt(n){const{inputs:t,backend:e,attrs:s}=n,{images:i}=t,{alignCorners:r,halfPixelCenters:o,size:a}=s,[l,u]=a,h=ge().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ylt(i.shape,l,u,r,o):new vlt(i.shape,l,u,r,o);return e.runWebGLProgram(h,[i],"float32")}const klt={kernelName:p2,backendName:"webgl",kernelFunc:wlt};class Clt{constructor(t,e,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;const[,i,r]=e,[,o,a]=t,l=[s&&o>1?i-1:i,s&&a>1?r-1:r],u=[s&&o>1?o-1:o,s&&a>1?a-1:a],h=l[0]/u[0],f=l[1]/u[1],g=1/h,m=1/f,y=Math.ceil(g)*2+2,k=Math.ceil(m)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${h});
        const float widthScale = float(${f});

        const float invHeightScale = float(${g});
        const float invWidthScale = float(${m});

        const int winHeight = int(${y});
        const int winWidth = int(${k});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${r-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}function Slt(n){const{inputs:t,backend:e,attrs:s}=n,{images:i,dy:r}=t,{alignCorners:o}=s,a=new Clt(r.shape,i.shape,o);return e.runWebGLProgram(a,[r],r.dtype)}const Tlt={kernelName:Ly,backendName:"webgl",kernelFunc:Slt};class Ilt{constructor(t,e,s,i,r){this.variableNames=["A"],this.outputShape=[];const[o,a,l,u]=t;this.outputShape=[o,e,s,u];const h=[i&&e>1?a-1:a,i&&s>1?l-1:l],f=[i&&e>1?e-1:e,i&&s>1?s-1:s],g=i?"0.5":"0.0";let m;r?m="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":m="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${h[0]/f[0]},
          ${h[1]/f[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${m};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${g})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}class Elt{constructor(t,e,s,i,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,u]=t;this.outputShape=[o,e,s,u];const h=[i&&e>1?a-1:a,i&&s>1?l-1:l],f=[i&&e>1?e-1:e,i&&s>1?s-1:s],g=i?"0.5":"0.0";let m;r?m="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":m="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${h[0]/f[0]},
          ${h[1]/f[1]},
          ${h[1]/f[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${m};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${g})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${s-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}function _lt(n){const{inputs:t,backend:e,attrs:s}=n,{images:i}=t,{alignCorners:r,halfPixelCenters:o,size:a}=s,[l,u]=a,h=ge().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Elt(i.shape,l,u,r,o):new Ilt(i.shape,l,u,r,o);return e.runWebGLProgram(h,[i],i.dtype)}const Alt={kernelName:f2,backendName:"webgl",kernelFunc:_lt};class $lt{constructor(t,e,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;const[,i,r]=e,[,o,a]=t,l=[s&&o>1?i-1:i,s&&a>1?r-1:r],u=[s&&o>1?o-1:o,s&&a>1?a-1:a],h=l[0]/u[0],f=l[1]/u[1],g=1/h,m=1/f,y=Math.ceil(g)*2+2,k=Math.ceil(m)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${h});
        const float widthScale = float(${f});

        const float invHeightScale = float(${g});
        const float invWidthScale = float(${m});

        const int winHeight = int(${y});
        const int winWidth = int(${k});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${s} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${r}) - 1),
                ${s} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}function Nlt(n){const{inputs:t,backend:e,attrs:s}=n,{images:i,dy:r}=t,{alignCorners:o}=s,a=new $lt(r.shape,i.shape,o);return e.runWebGLProgram(a,[r],r.dtype)}const Dlt={kernelName:Py,backendName:"webgl",kernelFunc:Nlt};class Rlt{constructor(t,e){this.variableNames=["x"];const s=t.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);if(this.outputShape=t,s===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${t[0]} - coord - 1));
        }
      `;return}const i=a=>e.indexOf(a)!==-1&&t[a]!==1?`${t[a]} - coords[${a}] - 1`:`coords[${a}]`,r=t.map((a,l)=>i(l)).join(","),o=Zs(s);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${r}));
      }
    `}}class Mlt{constructor(t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const s=t.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);this.outputShape=t;const i=Lr("rc",s),r=`${i[s-1]} + 1 < ${this.outputShape[s-1]}`,o=`${i[s-2]} + 1 < ${this.outputShape[s-2]}`,a=Zs(s);s===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${t[0]} - rc - 1),
            ${t[0]} - rc - 1);
          if(${r}){
              result.g = getChannel(getX(${t[0]} - (rc  + 1) - 1),
                ${t[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(i.slice())};
          if(${r}){
            result.g = ${u(i.slice())};
          }
          if(${o}) {
            result.b = ${h(i.slice())};
            if(${r}) {
              result.a = ${f(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(y){return g(y)}function u(y){return y[s-1]="("+y[s-1]+" + 1)",g(y)}function h(y){return y[s-2]="("+y[s-2]+" + 1)",g(y)}function f(y){return y[s-1]="("+y[s-1]+" + 1)",y[s-2]="("+y[s-2]+" + 1)",g(y)}function g(y){const k=t.map(($,D)=>m(D,y)),C=k.join(","),S=k.slice(-2).join(",");return`getChannel(getX(${C}), vec2(${S}))`}function m(y,k){return e.indexOf(y)!==-1&&t[y]!==1?`${t[y]} - ${k[y]} - 1`:`${k[y]}`}}}function Olt(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{dims:r}=s,o=i.shape.length,a=ds(r,i.shape);if(o===0)return Eo({inputs:{x:i},backend:e});const l=ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Mlt(i.shape,a):new Rlt(i.shape,a);return e.runWebGLProgram(l,[i],i.dtype)}const Flt={kernelName:g2,backendName:"webgl",kernelFunc:Olt};class Plt{constructor(t,e){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const s=t[1],i=t[2];this.outputShape=t;let r="";typeof e=="number"?r=`float outputValue = ${e.toFixed(2)};`:r=`
        vec3 fill = vec3(${e.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${r}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${s}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}const Llt={kernelName:Hy,backendName:"webgl",kernelFunc:({inputs:n,attrs:t,backend:e})=>{const{image:s}=n,{radians:i,fillValue:r,center:o}=t,a=e,l=new Plt(s.shape,r),[u,h]=_w(o,s.shape[1],s.shape[2]),f=[[u,h,Math.sin(i),Math.cos(i)]];return a.runWebGLProgram(l,[s],s.dtype,f)}};const Blt=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,zlt=$s({opSnippet:Blt}),Wlt={kernelName:T0,backendName:"webgl",kernelFunc:zlt};const Vlt="return inversesqrt(x);",Ult=$s({opSnippet:Vlt,cpuKernelImpl:tet}),Glt={kernelName:I0,backendName:"webgl",kernelFunc:Ult};class D3{constructor(t,e,s,i,r,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const u=Zs(r.length),h=Zs(o.length);let f="";s===1?f="i":s===2&&(f="i, j");const g=`getIndices(${f})`;let m="";i===1?m="i":i===2&&(m="i, coords[1]");const y=`getUpdates(${m})`;let k="";l&&(k="coords[0], coords[1]");const C=`getDefaultValue(${k})`,S=e>1?"strides[j]":"strides";this.userCode=`
        ${u} strides = ${u}(${r});

        void main() {
          ${h} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${t}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${e}; j++) {
              int index = round(${g});
              flattenedIndex += index * ${S};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${y};
              found = true;
            }
          }
          setOutput(mix(${C}, sum, float(found)));
        }
      `}}class Hlt{constructor(t,e,s,i,r,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const u=Zs(r.length),h=Zs(o.length);let f="";s===1?f="i":s===2&&(f="i, j");const g=`getIndices(${f})`;let m="";i===1?m="i":i===2&&(m="i, coords[1]");const y=`getUpdates(${m})`;let k="";l&&(k="coords[0], coords[1]");const C=`getDefaultValue(${k})`,S=e>1?"strides[j]":"strides",$=e>1?"strides[j + 1]":"strides";this.userCode=`
        ${u} strides = ${u}(${r});

        void main() {
          ${h} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${t}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${e}; j+=2) {
              ivec4 index = round(${g});
              flattenedIndex += index.xz * ${S};
              if (j + 1 < ${e}) {
                flattenedIndex += index.yw * ${$};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${y};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${C}, sum, found));
        }
      `}}function jlt(n){const{inputs:t,backend:e,attrs:s}=n,{indices:i,updates:r}=t,{shape:o}=s,{sliceRank:a,numUpdates:l,sliceSize:u,strides:h,outputSize:f}=Bh(r,i,o),g=[f/u,u];if(f===0)return e.makeTensorInfo(o,i.dtype);const m=qe({inputs:{x:i},backend:e,attrs:{shape:[l,a]}}),y=qe({inputs:{x:r},backend:e,attrs:{shape:[l,u]}}),k=e.makeTensorInfo([],"float32",new Float32Array([0]));let C;ge().getBool("WEBGL_PACK")?C=new Hlt(l,a,m.shape.length,y.shape.length,h,g):C=new D3(l,a,m.shape.length,y.shape.length,h,g);const S=e.runWebGLProgram(C,[y,m,k],y.dtype),$=qe({inputs:{x:S},backend:e,attrs:{shape:o}});return e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(y),e.disposeIntermediateTensorInfo(S),e.disposeIntermediateTensorInfo(k),$}const Xlt={kernelName:xI,backendName:"webgl",kernelFunc:jlt};class qlt{constructor(t,e,s,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,s];const r="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(e+1))}; ++i) { if (left >= right) break;`,a=ge().getNumber("WEBGL_VERSION")===2?r:o,l=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}function Klt(n){const{inputs:t,backend:e,attrs:s}=n,{sortedSequence:i,values:r}=t,{side:o}=s,a=new qlt(i.shape[0],i.shape[1],r.shape[1],o),l=[[i.shape[1]]];return e.runWebGLProgram(a,[i,r],"int32",l)}const Ylt={kernelName:vI,backendName:"webgl",kernelFunc:Klt};class Zlt{constructor(t,e,s){this.variableNames=["c","a","b"],this.outputShape=e;let i,r;if(s>4)throw Error(`Where for rank ${s} is not yet supported`);if(s===1)r="resRC",i="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let h=0;h<e.length;h++)u.push(`${a[h]}`),h<t&&l.push(`${a[h]}`);i=l.join(),r=u.join()}const o=Zs(s);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${r}));
        } else {
          setOutput(getB(${r}));
        }
      }
    `}}function Jlt(n){const{inputs:t,backend:e}=n,{condition:s,t:i,e:r}=t,o=new Zlt(s.shape.length,i.shape,i.shape.length);return e.runWebGLProgram(o,[s,i,r],To(i.dtype,r.dtype))}const Qlt={kernelName:m2,backendName:"webgl",kernelFunc:Jlt};const tct=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${O2};
  float scale = ${F2};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,ect=$s({opSnippet:tct}),nct={kernelName:E0,backendName:"webgl",kernelFunc:ect};const sct=bf+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,ict=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,rct=$s({opSnippet:sct,packedOpSnippet:ict,cpuKernelImpl:net}),oct={kernelName:N0,backendName:"webgl",kernelFunc:rct};const act=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,lct=$s({opSnippet:act}),cct={kernelName:$0,backendName:"webgl",kernelFunc:lct};const uct=bf+`
  return sin(x);
`,hct=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Gh}
  return result;
`,dct=$s({opSnippet:uct,packedOpSnippet:hct}),fct={kernelName:_0,backendName:"webgl",kernelFunc:dct};const pct=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,gct=$s({opSnippet:pct}),mct={kernelName:A0,backendName:"webgl",kernelFunc:gct};const xct=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,bct=$s({opSnippet:xct}),vct={kernelName:D0,backendName:"webgl",kernelFunc:bct};const yct=n=>{const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{blockShape:r,paddings:o}=s;wt(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=r.reduce((S,$)=>S*$),l=[[0,0]];l.push(...o);for(let S=1+r.length;S<i.shape.length;++S)l.push([0,0]);const u=[],h=I$({inputs:{x:i},backend:e,attrs:{paddings:l,constantValue:0}}),f=H0(h.shape,r,a,!1),g=j0(f.length,r.length,!1),m=X0(h.shape,r,a,!1),y=qe({inputs:{x:h},backend:e,attrs:{shape:f}}),k=Wr({inputs:{x:y},backend:e,attrs:{perm:g}}),C=qe({inputs:{x:k},backend:e,attrs:{shape:m}});return u.push(h),u.push(y),u.push(k),u.forEach(S=>e.disposeIntermediateTensorInfo(S)),C},wct={kernelName:v2,backendName:"webgl",kernelFunc:yct};function kct(n){const{inputs:t,backend:e}=n,{indices:s,values:i,denseShape:r,defaultValue:o}=t;if(r.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${r.shape}`);if(s.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${s.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=e.readSync(s.dataId),l=e.readSync(i.dataId),u=e.readSync(r.dataId),h=e.readSync(o.dataId)[0],[f,g,m,y,k]=iet(a,s.shape,s.dtype,l,i.dtype,u,h);return[e.makeTensorInfo(g,s.dtype,f),e.makeTensorInfo([g[0]],i.dtype,m),e.makeTensorInfo([y.length],"bool",new Uint8Array(y.map(C=>Number(C)))),e.makeTensorInfo([k.length],s.dtype,new Int32Array(k))]}const Cct={kernelName:yI,backendName:"webgl",kernelFunc:kct};function Sct(n){const{inputs:t,backend:e}=n,{inputIndices:s,inputShape:i,newShape:r}=t;if(s.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${s.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(r.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${r.shape}`);const o=Array.from(e.readSync(i.dataId)),a=e.readSync(s.dataId),l=Array.from(e.readSync(r.dataId)),[u,h,f]=ret(a,s.shape,s.dtype,o,l);return[e.makeTensorInfo(h,s.dtype,u),e.makeTensorInfo([f.length],r.dtype,new Int32Array(f))]}const Tct={kernelName:wI,backendName:"webgl",kernelFunc:Sct};function Ict(n){const{inputs:t,backend:e}=n,{data:s,indices:i,segmentIds:r}=t;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${r.shape}`);const o=e.readSync(s.dataId),a=e.readSync(i.dataId),l=e.readSync(r.dataId),[u,h]=ZA(o,s.shape,s.dtype,a,l,!0);return e.makeTensorInfo(h,s.dtype,u)}const Ect={kernelName:kI,backendName:"webgl",kernelFunc:Ict};function _ct(n){const{inputs:t,backend:e}=n,{data:s,indices:i,segmentIds:r}=t;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${r.shape}`);const o=e.readSync(s.dataId),a=e.readSync(i.dataId),l=e.readSync(r.dataId),[u,h]=ZA(o,s.shape,s.dtype,a,l);return e.makeTensorInfo(h,s.dtype,u)}const Act={kernelName:CI,backendName:"webgl",kernelFunc:_ct};function $ct(n){const{inputs:t,backend:e,attrs:s}=n,{sparseIndices:i,sparseValues:r,defaultValue:o}=t,{outputShape:a}=s,{sliceRank:l,numUpdates:u,sliceSize:h,strides:f,outputSize:g}=Bh(r,i,a),m=!1;if(r.dtype==="string"){const S=e.bufferSync(i),$=e.bufferSync(r),D=eu(e.readSync(o.dataId)[0]),R=eet(S,$,a,g,h,u,l,f,D,m);return e.makeTensorInfo(a,R.dtype,R.values)}const y=new D3(u,l,i.shape.length,r.shape.length,f,[g,1],m),k=e.runWebGLProgram(y,[r,i,o],r.dtype),C=qe({inputs:{x:k},backend:e,attrs:{shape:a}});return e.disposeIntermediateTensorInfo(k),C}const Nct={kernelName:SI,backendName:"webgl",kernelFunc:$ct};function Dct(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{numOrSizeSplits:r,axis:o}=s,a=ds(o,i.shape)[0],l=Uw(i,r,a),u=i.shape.length,h=new Array(u).fill(0),f=i.shape.slice();return l.map(g=>{const m=[...f];m[a]=g;const y=vf({inputs:{x:i},backend:e,attrs:{begin:h,size:m}});return h[a]+=g,y})}const Rct={kernelName:y2,backendName:"webgl",kernelFunc:Dct};const vS="return sqrt(x);",Mct=$s({opSnippet:vS,packedOpSnippet:vS,cpuKernelImpl:oet}),Oct={kernelName:R0,backendName:"webgl",kernelFunc:Mct};const Fct="return x * x;",Pct=$s({opSnippet:Fct}),Lct={kernelName:By,backendName:"webgl",kernelFunc:Pct};const yS="return (a - b) * (a - b);",Bct=hr({opSnippet:yS,packedOpSnippet:yS}),zct={kernelName:M0,backendName:"webgl",kernelFunc:Bct};function Wct(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");const r=e.readSync(i.dataId),o=lc(r),a=aet(o,"string",s);return e.makeTensorInfo(i.shape,"string",a)}const Vct={kernelName:zy,backendName:"webgl",kernelFunc:Wct};function Uct({inputs:n,attrs:t,backend:e}){const{x:s}=n,i=xa+`
    return x > 0.0 ? 1.0 : float(${t.alpha});
  `,r=new gl(s.shape,i);return e.runWebGLProgram(r,[s],s.dtype)}const Gct={kernelName:B0,backendName:"webgl",kernelFunc:Uct};class Hct{constructor(t,e,s){this.variableNames=["x"],this.outputShape=s;const i=s.length,r=Zs(s.length),o=Zs(s.length);let a="";if(i===1)a="coords * strides + begin";else{let l=0;a=s.map((u,h)=>(l++,s.length===1?`coords * strides[${h}] + begin[${h}]`:`coords[${l-1}] * strides[${h}] + begin[${h}]`)).join(",")}this.userCode=`
      ${r} begin = ${r}(${t});
      ${r} strides = ${r}(${e});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}function jct(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{begin:r,end:o,strides:a,beginMask:l,endMask:u,ellipsisMask:h,newAxisMask:f,shrinkAxisMask:g}=s,{finalShapeSparse:m,finalShape:y,isIdentity:k,sliceDim0:C,isSimpleSlice:S,begin:$,end:D,strides:R}=V5(i.shape,r,o,a,l,u,h,f,g);let V;if(k)V=qe({inputs:{x:i},backend:e,attrs:{shape:y}});else if(C||S){wt(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const q=B5($,D,R),X=vf({inputs:{x:i},backend:e,attrs:{begin:$,size:q}});V=qe({inputs:{x:X},backend:e,attrs:{shape:y}}),e.disposeIntermediateTensorInfo(X)}else if(e.shouldExecuteOnCPU([i])){const X=e.readSync(i.dataId),B=hs(i.shape,i.dtype,X),U=cet(m,B,R,$);V=e.makeTensorInfo(y,i.dtype,U.values)}else{const X=new Hct($,R,m);V=e.runWebGLProgram(X,[i],i.dtype)}const E=qe({inputs:{x:V},backend:e,attrs:{shape:y}});return e.disposeIntermediateTensorInfo(V),E}const Xct={kernelName:Wy,backendName:"webgl",kernelFunc:jct};function qct(n){const{inputs:t,backend:e,attrs:s}=n,{separator:i,nGramWidths:r,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:u}=s,{data:h,dataSplits:f}=t,g=e.readSync(h.dataId),m=e.readSync(f.dataId),[y,k]=uet(g,m,i,r,o,a,l,u);return[e.makeTensorInfo([y.length],"string",y),e.makeTensorInfo(f.shape,"int32",k)]}const Kct={kernelName:TI,backendName:"webgl",kernelFunc:qct};function Yct(n){const{inputs:t,backend:e,attrs:s}=n,{skipEmpty:i}=s,{input:r,delimiter:o}=t;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(r.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${r.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=e.readSync(r.dataId),l=e.readSync(o.dataId)[0],[u,h,f]=het(a,l,i),g=h.length;return[e.makeTensorInfo([g,2],"int32",u),e.makeTensorInfo([g],"string",h),e.makeTensorInfo([2],"int32",new Int32Array(f))]}const Zct={kernelName:II,backendName:"webgl",kernelFunc:Yct};function Jct(n){const{inputs:t,backend:e,attrs:s}=n,{numBuckets:i}=s,{input:r}=t;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=e.readSync(r.dataId),a=det(o,i);return e.makeTensorInfo(r.shape,"int32",a)}const Qct={kernelName:EI,backendName:"webgl",kernelFunc:Jct};const tut="return tan(x);",eut=$s({opSnippet:tut}),nut={kernelName:F0,backendName:"webgl",kernelFunc:eut};const sut=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,iut=$s({opSnippet:sut}),rut={kernelName:P0,backendName:"webgl",kernelFunc:iut};function out(n){const{inputs:t,backend:e,attrs:s}=n,{tensor:i,indices:r,updates:o}=t,{sliceRank:a,numUpdates:l,sliceSize:u,strides:h,outputSize:f}=Bh(o,r,i.shape),g=[f/u,u];if(f===0)return e.makeTensorInfo(i.shape,r.dtype);const m=qe({inputs:{x:r},backend:e,attrs:{shape:[l,a]}}),y=qe({inputs:{x:o},backend:e,attrs:{shape:[l,u]}}),k=qe({inputs:{x:i},backend:e,attrs:{shape:g}}),C=new D3(l,a,m.shape.length,y.shape.length,h,g,!1,!0),S=e.runWebGLProgram(C,[y,m,k],k.dtype),$=qe({inputs:{x:S},backend:e,attrs:{shape:i.shape}});return e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(y),e.disposeIntermediateTensorInfo(k),e.disposeIntermediateTensorInfo(S),$}const aut={kernelName:bI,backendName:"webgl",kernelFunc:out};class lut{constructor(t,e){this.variableNames=["A"];const s=new Array(t.length);for(let o=0;o<s.length;o++)s[o]=t[o]*e[o];this.outputShape=s,this.rank=s.length;const i=Zs(this.rank),r=cut(t);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${r}));
      }
    `}}function cut(n){const t=n.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(t===1)return`imod(resRC, ${n[0]})`;const e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],s=[];for(let i=0;i<n.length;i++)s.push(`imod(${e[i]}, ${n[i]})`);return s.join()}function _$(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{reps:r}=s;if(i.dtype==="string"||i.shape.length>5){const l=e.readSync(i.dataId),u=i.dtype==="string"?l.map(g=>eu(g)):l,h=hs(i.shape,i.dtype,u),f=pet(h,r);return e.makeTensorInfo(f.shape,f.dtype,f.values)}const o=new lut(i.shape,r);return e.runWebGLProgram(o,[i],i.dtype)}const uut={kernelName:L0,backendName:"webgl",kernelFunc:_$};class hut{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class dut{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}function th(n,t){t!==null&&n.disposeIntermediateTensorInfo(t)}function wS(n){let t=1;for(;t<n;)t*=2;return t}function fut(n){const{inputs:t,backend:e,attrs:s}=n,{x:i}=t,{k:r,sorted:o}=s,a=ge().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=ge().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=i.shape,h=u[u.length-1];if(e.shouldExecuteOnCPU([i])||h<a||r>l){const U=e.readSync(i.dataId),[K,Y]=get(U,u,i.dtype,r,o);return[e.makeTensorInfo(K.shape,K.dtype,K.values),e.makeTensorInfo(Y.shape,Y.dtype,Y.values)]}if(r===0)return u[u.length-1]=0,[e.makeTensorInfo(u,i.dtype,[]),e.makeTensorInfo(u,"int32",[])];if(h===1)return[i,ag({attrs:{shape:u,dtype:"int32",value:0},backend:e})];const f=e.texData.get(i.dataId),g=f!==null&&f.isPacked,m=g?e.unpackTensor(i):i,k=Ce(u)/h,C=qe({inputs:{x:m},attrs:{shape:[k,h]},backend:e});g&&th(e,m);const S=wS(r),$=wS(h);let D=null;const R=()=>D===null?[C,C]:[C,D],V=(U,K,Y)=>{const ct=R(),j=new hut(Y),It=[[h],[D===null?1:0],[Number.NEGATIVE_INFINITY],[U],[K]],yt=D;D=e.runWebGLProgram(j,ct,"int32",It),th(e,yt)};for(let U=1;U<S;U*=2){const K=U*2;for(let Y=U;Y>=1;Y/=2)V(K,Y,[k,$])}for(let U=$;U>S;U/=2){const K=R(),Y=new dut([k,U/2]),j=[[h],[D===null?1:0],[S]],ht=D;D=e.runWebGLProgram(Y,K,"int32",j),th(e,ht);const It=S/2,yt=It*2;for(let Ot=It;Ot>=1;Ot/=2)V(yt,Ot,D.shape)}let E=D;D=vf({inputs:{x:D},backend:e,attrs:{begin:0,size:[k,r]}}),th(e,E);let q=y$({inputs:{x:C,indices:D},backend:e,attrs:{axis:1,batchDims:1}});th(e,C);const X=u.slice(0,-1);X.push(r),E=D,D=qe({inputs:{x:D},attrs:{shape:X},backend:e}),th(e,E);const B=q;return q=qe({inputs:{x:q},attrs:{shape:X},backend:e}),th(e,B),[q,D]}const put={kernelName:Vy,backendName:"webgl",kernelFunc:fut};class gut{constructor(t,e,s,i,r,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a=s==="nearest"?1:2;let l;switch(i){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${t} && 0 <= coordX && coordX < ${e}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${r});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${r});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${e}));
                float mapY = mapCoord(inY, float(${t}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}function mut(n){const{inputs:t,backend:e,attrs:s}=n,{image:i,transforms:r}=t,{interpolation:o,fillMode:a,fillValue:l,outputShape:u}=s,[h,f,g,m]=i.shape,[y,k]=u??[f,g],C=[h,y,k,m],S=new gut(f,g,o,a,l,C);return e.runWebGLProgram(S,[i,r],"float32")}const xut={kernelName:Uy,backendName:"webgl",kernelFunc:mut};function but(n){const{inputs:t,attrs:e,backend:s}=n,{axis:i}=e,{x:r}=t;ig(r,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=s.readSync(r.dataId),{outputValues:a,outputShape:l,indices:u}=met(o,i,r.shape,r.dtype);return[s.makeTensorInfo(l,r.dtype,a),s.makeTensorInfo([u.length],"int32",u)]}const vut={kernelName:Gy,backendName:"webgl",kernelFunc:but};function yut(n){const{inputs:t,backend:e,attrs:s}=n,{value:i}=t;let{axis:r}=s;r<0&&(r+=i.shape.length);const o=i,a=o.shape.length,l=i.shape[r],u=new Array(a-1);let h=0;for(let k=0;k<a;k++)k!==r&&(u[h++]=o.shape[k]);const f=[],g=new Array(a).fill(0),m=o.shape.slice();m[r]=1;const y=new Array(l);for(let k=0;k<y.length;k++){g[r]=k;const C=vf({inputs:{x:o},backend:e,attrs:{begin:g,size:m}}),S=qe({inputs:{x:C},backend:e,attrs:{shape:u}});y[k]=S,f.push(C)}return f.forEach(k=>e.disposeIntermediateTensorInfo(k)),y}const wut={kernelName:k2,backendName:"webgl",kernelFunc:yut};class kut{constructor(t,e){this.variableNames=["x","segmentIds"];const s=t.windowSize,i=t.batchSize,r=t.inSize,o=t.numSegments,a=o*Math.ceil(r/s);this.outputShape=[i,a];const l="0.0",u="sumValue",h=Math.floor(s/4)*4,f=s%4,g=`
        sumValue += dot(values, segFilter);
    `;let m="";r%s>0&&(m=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return initializationValue;
        }
      `);let y="";r%s>0&&(y=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${y}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${s}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${h}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${g}
        }

        int inIdx = inOffset + ${h};
        if (${f===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${g}
        } else if (${f===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${g}
        } else if (${f===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${g}
        }
        setOutput(${u});
      }
    `}}function Cut(n){const{inputs:t,backend:e,attrs:s}=n,{x:i,segmentIds:r}=t,{numSegments:o}=s,a=i.shape.length,l=[];let u=0;const h=xi([u],a);let f=i;h!=null&&(f=Wr({inputs:{x:i},backend:e,attrs:{perm:h}}),l.push(f),u=_i(1,a)[0]);const g=iV(f.shape,u,o),m=Ce([f.shape[u]]),y=qe({inputs:{x:f},backend:e,attrs:{shape:[-1,m]}});l.push(y);const k=jy(i.dtype),C=(R,V,E,q,X)=>{const B=R.shape[0],U=R.shape[1],K=sV(U,X),Y={windowSize:K,inSize:U,batchSize:B,numSegments:X},ct=new kut(Y,V),j=e.compileAndRun(ct,[R,E],q);if(l.push(j),j.shape[1]===X)return j;const ht=E$({backend:e,attrs:{start:0,stop:X,step:1,dtype:"float32"}}),It=_$({inputs:{x:ht},backend:e,attrs:{reps:[U/K]}});return l.push(ht),l.push(It),C(j,V,It,q,X)},S=C(y,"unsortedSegmentSum",r,k,o),$=qe({inputs:{x:S},backend:e,attrs:{shape:g}});let D=$;if(h!=null){l.push($);const R=uu(h);D=Wr({inputs:{x:D},backend:e,attrs:{perm:R}})}return l.forEach(R=>e.disposeIntermediateTensorInfo(R)),D}const Sut={kernelName:C2,backendName:"webgl",kernelFunc:Cut};const Tut=[lnt,unt,fnt,mnt,bnt,wnt,Cnt,Tnt,Ant,Nnt,Mnt,Pnt,znt,Gnt,Xnt,Knt,Znt,est,sst,rst,cst,mst,bst,kst,Sst,$st,Dst,Fst,Het,Bst,Gst,qst,tit,sit,rit,ait,cit,fit,mit,vit,wit,Cit,Tit,_it,$it,Mit,Fit,Bit,Vit,Git,qit,Jit,nrt,rrt,lrt,crt,hrt,frt,grt,xrt,vrt,Crt,Irt,Art,Nrt,Mrt,Prt,Wrt,Hrt,Get,Xrt,Vst,Yrt,Qrt,not,Xet,oot,uot,dot,mot,vot,Cot,Iot,$ot,Mot,Pot,Bot,Uot,Hot,Xot,Zot,Qot,eat,sat,rat,cat,fat,xat,Tat,Yet,Aat,Dat,Oat,Lat,Ist,Wat,Uat,Hat,qat,Jat,Ket,tlt,nlt,ilt,olt,alt,Est,wat,ult,plt,blt,Jet,klt,Tlt,Alt,Dlt,Flt,Llt,Wlt,Glt,Xlt,Ylt,Qlt,nct,oct,cct,fct,mct,pst,Cat,vct,wct,Cct,Tct,Ect,Act,Nct,Rct,Oct,Lct,zct,Vct,Gct,Xct,Kct,Zct,Qct,kat,rnt,nut,rut,aut,uut,put,xut,ont,vut,wut,Sut,Vat];for(const n of Tut)AI(n);var Iut=Re('<div class="loaderContainer2 withMsg"><div class="loadingMsg"> </div> <div class="loader2"></div></div>'),Eut=Re('<p class="errormsg message"><!></p>'),_ut=Re('<div class="singleFilm singleFilmBig"><a class="poster"><div class="containertextimg"><span> </span></div> <img class="lazy" src="images/poster.jpg"/></a> <div class="recpercentage"><img src="images/orangeheart.jpg" alt="recommendation score"/> <span> </span></div></div>'),Aut=Re('<section class="sectionStats"><div class="sepline"><span>Recommended movies</span> <div class="line"></div></div> <div><div class="filmList"></div></div></section> <div style="height: 5em"></div>',1),$ut=Re("<main><!> <!></main>");function A$(n,t){if(new.target)return wr({component:A$,...n});ar(t,!0);let e=An(t,"username",7),s=qn(!0),i=qn(""),r=qn(no({})),o=qn("This operation takes some time, please wait...");const a=`${window.location.origin}/ratings_5000_250k.csv`,l=60,u=1024,h=4;async function f(){ts(event.target).parent().addClass("imgok")}async function g(){ts(event.target).parent().removeClass("imgok").addClass("notok"),ts(event.target).attr("src","images/poster.jpg")}function m(U){try{return U.values()}catch{}return[]}function y(U){try{return U.replace("-"," ")}catch{return""}}function k(U,K=165,Y=110){try{if(U!==null){if(U.includes("a.ltrbxd"))try{return U.split("-0-").slice(0,2).join("-0-")+"-0-"+Y+"-0-"+K+"-crop.jpg"}catch{return U.includes(".jpg")?U:U+".jpg"}return"//a.ltrbxd.com/resized/"+U+"-0-"+Y+"-0-"+K+"-crop.jpg"}}catch{}return""}async function C(){return new Promise((U,K)=>{FT.parse(a,{download:!0,header:!0,worker:!0,complete(Y){U(Y.data)},error(Y){K(Y)}})})}async function S(U){let K=localStorage.getItem(U.toLowerCase());return K===null||K==="undefined"?null:(K=JSON.parse(K),K.watched.map(Y=>({user:"500",movie:Y._id,r:Y.r*2})).filter(Y=>Y.r>0))}async function $(U,K){const Y=U.filter(Mt=>K.some(Ft=>Ft.movie===Mt.movie));Y.forEach(Mt=>K.push(Mt));const ct=[...new Set(K.map(Mt=>Mt.user))],j=[...new Set(K.map(Mt=>Mt.movie))],ht=Object.fromEntries(ct.map((Mt,Ft)=>[Mt,Ft])),It=Object.fromEntries(j.map((Mt,Ft)=>[Mt,Ft])),yt=K.map(Mt=>ht[Mt.user]),Ot=K.map(Mt=>It[Mt.movie]);Ve(o,"Data normalization");let Ct=K.map(Mt=>parseFloat(Mt.r)).filter(Mt=>!isNaN(Mt));Ct=Ct.map(Mt=>(Mt-1)/9);const Gt=Math.min(yt.length,Ot.length,Ct.length);yt.length=Ot.length=Ct.length=Gt,Ve(o,"Tensorflow model preparation"),console.log("Prepared data for TensorFlow.js:",{userIndices:yt,movieIndices:Ot,ratings:Ct});const vt=DC({shape:[1]}),at=DC({shape:[1]}),Pt=BC({inputDim:ct.length,outputDim:25}).apply(vt),jt=BC({inputDim:j.length,outputDim:25}).apply(at),Ut=LC().apply(Pt),me=LC().apply(jt),Ee=ij({axes:1}).apply([Ut,me]),le=zH({inputs:[vt,at],outputs:Ee});le.compile({optimizer:"adam",loss:"meanSquaredError"}),Ve(o,`Model created and compiled, start 1/${h} epoch`),console.log("Model created and compiled.");let ce="";await le.fit([Wc(yt,[yt.length,1]),Wc(Ot,[Ot.length,1])],Wc(Ct,[Ct.length,1]),{epochs:h,batchSize:u,callbacks:{onEpochEnd:(Mt,Ft)=>{Ve(o,`Epoch ${Mt+1}/${h} completed. Loss: ${Ft.loss.toFixed(3)}`),console.log(`Epoch ${Mt+1}/${h} completed. Loss: ${Ft.loss}`),ce=Ft.loss.toFixed(3)}}}),Ve(o,"Model training completed with Loss: "+ce),console.log("Model training completed.");const De=ht[500],ae=j.map((Mt,Ft)=>({m:Mt,i:Ft})).filter(Mt=>!Y.some(Ft=>Ft.movie===Mt.m)).map(Mt=>Mt.i),Oe=await Promise.all(ae.map(async Mt=>{const Ft=await le.predict([Wc([De],[1,1]),Wc([Mt],[1,1])]).data();return{_id:j[Mt],score:Ft[0]}})),Le=Math.max(...Oe.map(Mt=>Mt.score)),J=Math.min(...Oe.map(Mt=>Mt.score));return Oe.forEach(Mt=>{Mt.score=(Mt.score-J)/(Le-J)}),Oe.sort((Mt,Ft)=>Ft.score-Mt.score).slice(0,l)}$l(async()=>{let U;if(U=localStorage.getItem("latest"),U===null||U==="undefined")Ve(i,"Incorrect or not set data");else if(Ve(r,localStorage.getItem(U.toLowerCase()+"_rec"),!0),Ve(r,JSON.parse(Tt(r)),!0),Tt(r)===null||Tt(r)==="undefined"){Ve(o,"Download database and user ratings");const[K,Y]=await Promise.all([S(U),C()]);if(K===null||Y===null||K==="undefined"||Y==="undefined")Ve(i,"Incorrect or not set data");else{let ct;try{ct=await $(K,Y)}catch(j){console.error("Error during model training:",j),Ve(o,"Error during model training: "+j)}Ve(o,"Get information about recommended films");try{const j=await fetch(nc+"associate",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(ct)});Ve(r,await j.json(),!0),localStorage.setItem(U.toLowerCase()+"_rec",JSON.stringify(Tt(r)))}catch{Ve(i,"Server error.")}}}Ve(s,!1)});var D={get username(){return e()},set username(U){e(U),_n()},$set:Cr,$on:(U,K)=>kr(t,U,K)},R=$ut(),V=Ht(R);{var E=U=>{var K=Iut(),Y=Ht(K),ct=Ht(Y,!0);Lt(Y),Ys(2),Lt(K),un(()=>nn(ct,Tt(o))),Ie(U,K)};En(V,U=>{Tt(s)&&U(E)})}var q=pe(V,2);{var X=U=>{var K=Eut(),Y=Ht(K);Gv(Y,()=>Tt(i)),Lt(K),Ie(U,K)},B=U=>{var K=Aut(),Y=Ss(K),ct=pe(Ht(Y),2),j=Ht(ct);Ps(j,21,()=>m(Tt(r)),Fs,(ht,It)=>{var yt=_ut(),Ot=Ht(yt),Ct=Ht(Ot),Gt=Ht(Ct),vt=Ht(Gt,!0);Lt(Gt),Lt(Ct);var at=pe(Ct,2);Hv(at,me=>Xv?.(me)),Lt(Ot);var Pt=pe(Ot,2),jt=pe(Ht(Pt),2),Ut=Ht(jt);Lt(jt),Lt(Pt),Lt(yt),un((me,Ee,le)=>{rs(Ot,"href",`${ir}${Tt(r).username??""}/film/${Tt(It)._id??""}`),nn(vt,me),rs(at,"data-src",Ee),rs(at,"alt",Tt(It)._id),nn(Ut,`${le??""}%`)},[()=>y(Tt(It)._id),()=>k(Tt(It).poster,225,150),()=>Math.floor(Tt(It).score*100)]),Mi("load",at,f),Mi("error",at,g),Wp(at),Ie(ht,yt)}),Lt(j),Lt(ct),Lt(Y),Ys(2),Ie(U,K)};En(q,U=>{Tt(i)!==""?U(X):U(B,!1)})}return Lt(R),Ie(n,R),lr(D)}const xu=new URLSearchParams(window.location.search),Ma=xu.get("username"),kS=xu.get("id"),Rb=parseInt(xu.get("year")),Nut=parseInt(xu.get("month")),Dut=xu.get("collage"),Rut=xu.get("wrapped"),Mut=xu.get("donator"),Out=xu.get("rec"),eh=document.getElementById("app");Ma!==null&&Out!==null?Kl(A$,{target:eh,props:{username:Ma}}):kS!==null&&Mut!==null?Kl(QT,{target:eh,props:{username:Ma,idx:kS}}):Ma!==null&&Dut!==null?Kl(ZT,{target:eh,props:{username:Ma,year:Rb,month:Nut}}):Ma!==null&&!isNaN(Rb)?Kl(OT,{target:eh,props:{username:Ma,year:Rb}}):Ma!==null&&Rut!==null?Kl(JT,{target:eh,props:{username:Ma}}):Ma!==null?Kl(MT,{target:eh,props:{username:Ma}}):Kl(zT,{target:eh});
